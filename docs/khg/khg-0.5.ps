%!PS-Adobe-2.0
%%Creator: dvips 5.495 Copyright 1986, 1992 Radical Eye Software
%%Title: khg-0.5.dvi
%%CreationDate: Sun Oct 17 11:34:54 1993
%%Pages: 128
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips -o khg-0.5.ps khg-0.5.dvi
%DVIPSSource:  TeX output 1993.10.16:2003
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N /X{S N}
B /TR{translate}N /isls false N /vsize 11 72 mul N /@rigin{isls{[0 -1 1 0 0 0]
concat}if 72 Resolution div 72 VResolution div neg scale isls{Resolution hsize
-72 div mul 0 TR}if Resolution VResolution vsize -72 div 1 add mul TR matrix
currentmatrix dup dup 4 get round 4 exch put dup dup 5 get round 5 exch put
setmatrix}N /@landscape{/isls true N}B /@manualfeed{statusdict /manualfeed
true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N
/IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn begin /FontType 3 N /FontMatrix
fntrx N /FontBBox FBB N string /base X array /BitMaps X /BuildChar{
CharBuilder}N /Encoding IE N end dup{/foo setfont}2 array copy cvx N load 0 nn
put /ctr 0 N[}B /df{/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0
0 sf neg 0 0]N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data
dup length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128
ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127
sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp 0 N
/cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2 index get
S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff ch-yoff ch-height
sub ch-xoff ch-width add ch-yoff setcachedevice ch-width ch-height true[1 0 0
-1 -.1 ch-xoff sub ch-yoff .1 add]{ch-image}imagemask restore}B /D{/cc X dup
type /stringtype ne{]}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1
ne{dup dup length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}
B /I{cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage userdict
/eop-hook known{eop-hook}if}N /@start{userdict /start-hook known{start-hook}
if pop /VResolution X /Resolution X 1000 div /DVImag X /IE 256 array N 0 1 255
{IE S 1 string dup 0 3 index put cvn put}for 65781.76 div /vsize X 65781.76
div /hsize X}N /p{show}N /RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N
/ruley 0 N /v{/ruley X /rulex X V}B /V{}B /RV statusdict begin /product where{
pop product dup length 7 ge{0 7 getinterval dup(Display)eq exch 0 4
getinterval(NeXT)eq or}{pop false}ifelse}{false}ifelse end{{gsave TR -.1 -.1
TR 1 1 scale rulex ruley false RMat{BDot}imagemask grestore}}{{gsave TR -.1
-.1 TR rulex ruley scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{
gsave transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N
/tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B
/w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}B /r{
p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B /bos{/SS save
N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 (/home/johnsonm/tars/khg-0.5.dvi)
@start /Fa 17 118 df<183C3C1C08080810204080060B78990C>39 D<000FC100302100C013
01800F0700060E00060C0006180006380004300004700000700000E00000E00000E00000E007FE
E00070E00070E00070E000706000E06000E03000E01801E00C064003F840181A7A991E>71
D<03FF1FF800700380007003800070038000E0070000E0070000E0070000E0070001C00E0001C0
0E0001C00E0001C00E0003FFFC0003801C0003801C0003801C0007003800070038000700380007
0038000E0070000E0070000E0070000E0070001C00E000FF87FC001D1A7D991D>I<03FF03F000
7001C0007001000070020000E0040000E0080000E0100000E0400001C0800001C1000001C30000
01C70000038B80000393800003C380000381C0000701C0000701C0000700E0000700E0000E00E0
000E0070000E0070000E0070001C007800FF81FE001C1A7D991D>75 D<3FFFFC381C0C201C0440
1C0440380480380480380480380400700000700000700000700000E00000E00000E00000E00001
C00001C00001C00001C000038000038000038000038000078000FFF800161A79991B>84
D<03CC0E2E181C381C301C701CE038E038E038E038C072C072C07260F261341E180F107C8F14>
97 D<01E006180C181838301070006000E000E000E000E000E008E010602030C01F000D107C8F
12>99 D<001F80000380000380000380000700000700000700000700000E00000E0003CE000E2E
00181C00381C00301C00701C00E03800E03800E03800E03800C07200C07200C0720060F2006134
001E1800111A7C9914>I<01E00E181C08380870087010FFE0E000E000E000E000E00860106020
30C01F000D107C8F12>I<1F80000380000380000380000700000700000700000700000E00000E
00000E7C000F86001E07001E07001C07001C0700380E00380E00380E00381C00701C80701C8070
3880703900E01900600E00111A7E9914>104 D<030706000000000000384C4E8E9C9C1C383870
7272E2E4643808197C980C>I<1F8003800380038007000700070007000E000E000E0E0E131C27
1C431C801F003C003F8039C038E070E270E270E270E4E0646038101A7E9912>107
D<1F0707070E0E0E0E1C1C1C1C3838383870707070E4E4E4E4E830081A7D990A>I<307C005986
009E07009E07009C07009C0700380E00380E00380E00381C00701C80701C80703880703900E019
00600E0011107C8F16>110 D<30F05D189E389C189C009C003800380038003800700070007000
7000E00060000D107C8F10>114 D<03E004300830187018601C001F801FC00FE000E00060E060
E06080C041803E000C107D8F10>I<38064C074E0E8E0E9C0E9C0E1C1C381C381C381C70397039
70393079389A0F0C10107C8F15>117 D E /Fb 5 115 df<00000E00001F00001F00003F00003E
00007E00007C00007C0000FC0000F80001F80001F00003F00003E00007E00007C0000FC0000F80
000F80001F80001F00003F00003E00007E00007C0000FC0000F80001F80001F00001F00003F000
03E00007E00007C0000FC0000F80001F80001F00003F00003E00003E00007E00007C0000FC0000
F80000F80000700000182F7DA91F>47 D<007FE001FFF807FFFC0FFFFC1FC07C3F00383E00007C
0000780000780000F00000F00000F00000F00000F00000F000007800007800007C003C3E003C3F
007C1FC0F80FFFF007FFF001FFC0007F00161A7C991F>99 D<00FC0003FF0007FF801FFFE01F87
E03E01F07C00F8780078780078F0003CF0003CF0003CF0003CF0003CF0003CF0003CF8007C7800
787C00F87C00F83E01F01F87E01FFFE007FF8003FF0000FC00161A7C991F>111
D<7F87E000FF9FF800FFBFFE007FFFFF0007F83F0007E00F8007C0078007C003C0078003C00780
03E0078001E0078001E0078001E0078001E0078001E0078001E0078003E0078003C007C007C007
C0078007E00F8007F03F0007FFFE0007BFFC00079FF8000787C000078000000780000007800000
0780000007800000078000000780000007800000078000007FF80000FFFC0000FFFC00007FF800
001B277F991F>I<7FE07E00FFE1FF80FFE3FFC07FEFFFC001FF87C001FE038001FC000001F800
0001F8000001F0000001F0000001E0000001E0000001E0000001E0000001E0000001E0000001E0
000001E0000001E0000001E0000001E000007FFFE000FFFFF000FFFFF0007FFFE0001A1A7E991F
>114 D E /Fc 5 115 df<000000001C000000003E000000003E000000007E000000007C000000
007C00000000FC00000000F800000000F800000001F800000001F000000001F000000003F00000
0003E000000003E000000007E000000007C000000007C00000000FC00000000F800000000F8000
00001F800000001F000000001F000000003F000000003E000000003E000000007E000000007C00
000000FC00000000F800000000F800000001F800000001F000000001F000000003F000000003E0
00000003E000000007E000000007C000000007C00000000FC00000000F800000000F800000001F
800000001F000000001F000000003F000000003E000000003E000000007E000000007C00000000
FC00000000F800000000F800000001F800000001F000000001F000000003F000000003E0000000
03E000000007E000000007C000000007C00000000FC00000000F800000000F800000001F800000
001F000000001F000000003F000000003E000000003E000000007E000000007C00000000FC0000
0000F800000000F800000001F800000001F000000001F000000003F000000003E000000003E000
000007E000000007C000000007C00000000FC00000000F800000000F800000001F800000001F00
0000001F000000003F000000003E000000003E000000007E000000007C000000007C00000000FC
00000000F800000000F800000000700000000027677ACC34>47 D<00003FE0000001FFFE000007
E01F80001F8003C0003E0000E0007C00007001F80000F803F80003F803F00003FC07F00007FC0F
E00007FC1FE00007FC1FC00003F83FC00003F83FC00000E03FC00000007FC00000007F80000000
7F80000000FF80000000FF80000000FF80000000FF80000000FF80000000FF80000000FF800000
00FF80000000FF80000000FF800000007F800000007F800000007FC00000003FC00000003FC000
000E1FC000000E1FE000000E0FE000001C0FF000001C07F000003803F800003801F800007000FC
0000E0007E0001C0001F800780000FE03E000001FFFC0000003FE000272F7DAD2E>99
D<00003FE000000001FFFC00000007E03F0000001F800FC000007E0003F00000FC0001F80001F8
0000FC0003F000007E0007F000007F0007E000003F000FE000003F801FC000001FC01FC000001F
C03FC000001FE03FC000001FE03F8000000FE07F8000000FF07F8000000FF07F8000000FF0FF80
00000FF8FF8000000FF8FF8000000FF8FF8000000FF8FF8000000FF8FF8000000FF8FF8000000F
F8FF8000000FF8FF8000000FF8FF8000000FF87F8000000FF07F8000000FF07F8000000FF03FC0
00001FE03FC000001FE03FC000001FE01FC000001FC00FE000003F800FE000003F8007F000007F
0003F000007E0001F80000FC0000FC0001F800007E0003F000001F800FC000000FE03F80000003
FFFE000000003FE000002D2F7DAD34>111 D<01FE00FF000000FFFE07FFF00000FFFE1F01FC00
00FFFE38007E000003FE70003F800001FEC0001FC00000FF80000FE00000FF800007F00000FF00
0003F80000FE000003FC0000FE000001FC0000FE000001FE0000FE000001FE0000FE000000FF00
00FE000000FF0000FE000000FF8000FE000000FF8000FE0000007F8000FE0000007FC000FE0000
007FC000FE0000007FC000FE0000007FC000FE0000007FC000FE0000007FC000FE0000007FC000
FE0000007FC000FE0000007FC000FE0000007FC000FE0000007F8000FE000000FF8000FE000000
FF8000FE000000FF0000FE000000FF0000FE000001FE0000FE000001FE0000FE000003FC0000FE
000003F80000FF000007F00000FF800007F00000FF80000FE00000FFC0001F800000FEE0003F00
0000FE7800FE000000FE1E03F8000000FE0FFFE0000000FE01FE00000000FE000000000000FE00
0000000000FE000000000000FE000000000000FE000000000000FE000000000000FE0000000000
00FE000000000000FE000000000000FE000000000000FE000000000000FE000000000000FE0000
00000000FE000000000000FE000000000003FF8000000000FFFFFE00000000FFFFFE00000000FF
FFFE0000000032417DAC39>I<01FC01F800FFFC07FE00FFFC1E1F00FFFC383F8003FC607FC001
FC607FC000FCC07FC000FCC07FC000FD803F8000FD801F0000FF000E0000FF00000000FF000000
00FF00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE0000
0000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00
000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE
00000000FE00000000FE00000000FE00000000FF00000003FF800000FFFFFF8000FFFFFF8000FF
FFFF8000222D7DAC28>114 D E /Fd 5 121 df<FFF0000E00000E00000E00000E00000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00100E00100E
00100E00300E00200E00600E00600E01E0FFFFE0141A7D991A>76 D<FF801C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C00FF8009137F920B>105
D<FC07F01E01C01F008017008013808011C08011C08010E080107080107880103880101C80100E
80100E80100780100380100180380180FE008014137F9217>110 D<FF87F01C01C01C00801C00
801C00801C00801C00801C00801C00801C00801C00801C00801C00801C00801C00800C01000601
0003060000F80014137F9217>117 D<FF0FE01E07800E06000F0400070C0003880003D00001E0
0000E00000700000F80001B800011C00021E00040E000C07000807803C07C0FE0FF014137F9217
>120 D E /Fe 1 122 df<0200070007000700070007000200020002007270FFF8727002000200
07000700070007000700070007000700070007000700070007000700020002000200020002000D
217E9912>121 D E /Ff 19 122 df<387878380808101020204080050C7D830C>44
D<0FFFFC0000F8078000F001C000F000E000F0007000F0007000F0007801E0003801E0003801E0
003801E0003801E0003C01E0003803C0003803C0007803C0007803C0007803C0007003C000F007
8000E0078000E0078001C0078003800780078007800E000F001C000F007000FFFFC0001E1C7E9B
20>68 D<0FFFFFE000F801E000F000E000F0004000F0004000F0004000F0004001E0004001E040
4001E0400001E0400001E0C00001E1C00003FF800003C1800003C0800003C0800003C0800003C0
80800780008007800080078001000780010007800300078006000F000E000F003E00FFFFFC001B
1C7E9B1C>I<FFF00FF81F8003C00F0001800F0001000F00020007800200078004000780040007
80080007C0080003C0100003C0100003C0200003C0200003E0400001E0400001E0800001E18000
01E1000001F2000000F2000000F4000000F4000000F8000000F800000070000000700000006000
00006000001D1D7B9B1F>86 D<07F0001C18001E0C001C0E00180E00000E00000E0001FE000F0E
001C1C00301C00701C00E01C40E01C40E03C40E05C80709D803F0E0012127D9115>97
D<3F00000F00000E00000E00000E00000E00000E00000E00001C00001C00001C00001C78001D86
001E03003C03803801803801803801C03801C03801C0700380700380700380700300700700700E
00F00C00CC300083C000121D7C9C17>I<01F8071C0C1E181C38183000700070007000E000E000
E000600060047008301018200FC00F127D9112>I<0003F00000F00000E00000E00000E00000E0
0000E00000E00001C00001C00001C000F1C0030DC00C03C01C0380380380300380700380700380
700380E00700E00700E00700600700600700700F00301E00186F00078FC0141D7D9C17>I<01F8
070C0C061C073803300370037FFF7000E000E000E00060006002300430081C3007C010127E9112
>I<00C001C001C0018000000000000000000000000000001F8007800380070007000700070007
0007000E000E000E000E000E000E001C001E00FF800A1D7F9C0C>105 D<07E00001E00001C000
01C00001C00001C00001C00001C0000380000380000380000387F80381E0038180070200070400
07080007100007700007F8000F38000E3C000E1C000E1E000E0E000E0F001C07001C0F80FF9FE0
151D7F9C16>107 D<07E001E001C001C001C001C001C001C00380038003800380038003800700
070007000700070007000E000E000E000E000E000E001C001E00FF800B1D7F9C0C>I<1F8F8007
B0C003C0E00780E00780E00700E00700E00700E00700E00E01C00E01C00E01C00E01C00E01C00E
01C01C03801E03C0FF9FF014127F9117>110 D<00FC000307000E01801C01C03800C03000C070
00E07000E07000E0E001C0E001C0E001C0600180600380700700380E001C180007E00013127E91
15>I<03F20C0E18061004300438043E001FE00FF007F8003C401C400C400C6018E010D0608FC0
0F127F9110>115 D<FC1F803C07801C0380380700380700380700380700380700380700700E00
700E00700E00700E00701E00701E00703C00305E001F9F8011127C9117>117
D<FF0FE03C03801C03001C02001C06001C04001E08000E08000E10000E10000E20000720000740
0007C00007800007000003000002000013127C9116>I<FF3FCFE03C0F038038060300380E0200
1C0F02001C1704001C1704001C2708001C2308001C4310000E4390000E83A0000E83A0000F03C0
000F01C0000E01800006018000040100001B127C911E>I<0FF0FE03C03801C03001C02001C060
01C04001E08000E08000E10000E10000E200007200007400007C00007800007000003000002000
002000004000004000708000F10000F10000E60000780000171A809116>121
D E /Fg 3 106 df<0001FC0000000FFF8000003E03E00000F000780001C0001C000380000E00
07000007000E000003801C000001C018000000C038000000E03000000060700000007060000000
306000000030E000000038C000000018C000000018C000000018C000000018C000000018C00000
0018C000000018E000000038600000003060000000307000000070300000006038000000E01800
0000C01C000001C00E0000038007000007000380000E0001C0001C0000F0007800003E03E00000
0FFF80000001FC000025277E9D2A>13 D<018001800380030003000700060006000E000C001C00
18001800380030003000700060006000E000C000C000E000600060007000300030003800180018
001C000C000E0006000600070003000300038001800180092A7C9E10>104
D<C000C000E00060006000700030003000380018001C000C000C000E0006000600070003000300
0380018001800380030003000700060006000E000C000C001C0018003800300030007000600060
00E000C000C000092A7E9E10>I E /Fh 4 117 df<1FF0303C701EF81FF81FF81F703E007C00F0
00C0018001800300030003000300000000000000000007800FC00FC00FC00FC00780101A7E9915
>63 D<FE1F00FE63C01E81C01F01E01F01E01E01E01E01E01E01E01E01E01E01E01E01E01E01E0
1E01E01E01E01E01E0FFCFFCFFCFFC16117F9019>110 D<03F8000E0E003C07803803807803C0
7803C0F803E0F803E0F803E0F803E0F803E0F803E07803C07C07C03C07800E0E0003F80013117F
9016>I<06000600060006000E000E001E003FF0FFF01E001E001E001E001E001E001E001E001E
181E181E181E181E180F3003E00D187F9711>116 D E /Fi 1 59 df<60F0F06004047C830C>
58 D E /Fj 63 124 df<007E0001C1800301800703C00E03C00E01800E00000E00000E00000E
00000E0000FFFFC00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C00E01C00E01C07F87F8151D809C17>12 D<60F0F86808080810102040
80050C7C9C0C>39 D<004000800100020006000C000C0018001800300030007000600060006000
E000E000E000E000E000E000E000E000E000E000E000E000600060006000700030003000180018
000C000C00060002000100008000400A2A7D9E10>I<800040002000100018000C000C00060006
0003000300038001800180018001C001C001C001C001C001C001C001C001C001C001C001C00180
01800180038003000300060006000C000C00180010002000400080000A2A7E9E10>I<60F0F070
1010101020204080040C7C830C>44 D<FFE0FFE00B0280890E>I<60F0F06004047C830C>I<0001
0003000600060006000C000C000C0018001800180030003000300060006000C000C000C0018001
800180030003000300060006000C000C000C00180018001800300030003000600060006000C000
C00010297E9E15>I<03C00C301818300C300C700E60066006E007E007E007E007E007E007E007
E007E007E007E007E007E00760066006700E300C300C18180C3007E0101D7E9B15>I<03000700
3F00C7000700070007000700070007000700070007000700070007000700070007000700070007
0007000700070007000F80FFF80D1C7C9B15>I<07C01830201C400C400EF00FF80FF807F80770
07000F000E000E001C001C00380070006000C00180030006010C01180110023FFE7FFEFFFE101C
7E9B15>I<07E01830201C201C781E780E781E381E001C001C00180030006007E00030001C001C
000E000F000F700FF80FF80FF80FF00E401C201C183007E0101D7E9B15>I<000C00000C00001C
00003C00003C00005C0000DC00009C00011C00031C00021C00041C000C1C00081C00101C00301C
00201C00401C00C01C00FFFFC0001C00001C00001C00001C00001C00001C00001C0001FFC0121C
7F9B15>I<300C3FF83FF03FC020002000200020002000200023E024302818301C200E000E000F
000F000F600FF00FF00FF00F800E401E401C2038187007C0101D7E9B15>I<00F0030C06040C0E
181E301E300C700070006000E3E0E430E818F00CF00EE006E007E007E007E007E0076007600770
06300E300C18180C3003E0101D7E9B15>I<4000007FFF807FFF007FFF00400200800400800400
80080000100000100000200000600000400000C00000C00001C000018000018000038000038000
038000038000078000078000078000078000078000078000030000111D7E9B15>I<03E00C3010
08200C20066006600660067006780C3E083FB01FE007F007F818FC307E601E600FC007C003C003
C003C00360026004300C1C1007E0101D7E9B15>I<03C00C301818300C700C600EE006E006E007
E007E007E007E0076007700F300F18170C2707C700060006000E300C780C78187010203030C00F
80101D7E9B15>I<60F0F0600000000000000000000060F0F06004127C910C>I<003F800000C060
0003001800040004000800020010000100201F00802070808040E0404040C0384041C038408180
382083803820838038208380382083803820838038208180382041C0382040C0384040E0784020
709880201F0F00100000000800000004000000030001E000C01F80003FF0001B1D7E9C20>64
D<000600000006000000060000000F0000000F0000000F00000017800000178000001780000023
C0000023C0000023C0000041E0000041E0000041E0000080F0000080F0000180F8000100780001
FFF80003007C0002003C0002003C0006003E0004001E0004001E000C001F001E001F00FF80FFF0
1C1D7F9C1F>I<FFFFC00F00F00F00380F003C0F001C0F001E0F001E0F001E0F001E0F001C0F00
3C0F00780F01F00FFFE00F00780F003C0F001E0F000E0F000F0F000F0F000F0F000F0F000F0F00
1E0F001E0F003C0F0078FFFFE0181C7E9B1D>I<001F808000E0618001801980070007800E0003
801C0003801C00018038000180780000807800008070000080F0000000F0000000F0000000F000
0000F0000000F0000000F0000000F0000000700000807800008078000080380000801C0001001C
0001000E000200070004000180080000E03000001FC000191E7E9C1E>I<FFFFC0000F00F0000F
003C000F000E000F0007000F0007000F0003800F0003C00F0001C00F0001C00F0001E00F0001E0
0F0001E00F0001E00F0001E00F0001E00F0001E00F0001E00F0001C00F0001C00F0003C00F0003
800F0007800F0007000F000E000F001C000F007000FFFFC0001B1C7E9B20>I<FFFFFC0F003C0F
000C0F00040F00040F00060F00020F00020F02020F02000F02000F02000F06000FFE000F06000F
02000F02000F02000F02010F00010F00020F00020F00020F00060F00060F000C0F003CFFFFFC18
1C7E9B1C>I<FFFFF80F00780F00180F00080F00080F000C0F00040F00040F02040F02000F0200
0F02000F06000FFE000F06000F02000F02000F02000F02000F00000F00000F00000F00000F0000
0F00000F00000F8000FFF800161C7E9B1B>I<001F808000E0618001801980070007800E000380
1C0003801C00018038000180780000807800008070000080F0000000F0000000F0000000F00000
00F0000000F0000000F000FFF0F0000F80700007807800078078000780380007801C0007801C00
07800E00078007000B800180118000E06080001F80001C1E7E9C21>I<FFF00F000F000F000F00
0F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F
000F000F00FFF00C1C7F9B0F>73 D<FFF8000F80000F00000F00000F00000F00000F00000F0000
0F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00080F00080F0008
0F00180F00180F00100F00300F00700F01F0FFFFF0151C7E9B1A>76 D<FFFF800F00E00F00780F
003C0F001C0F001E0F001E0F001E0F001E0F001E0F001C0F003C0F00780F00E00FFF800F00000F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0000FFF000171C7E9B
1C>80 D<FFFF00000F01E0000F0078000F003C000F001C000F001E000F001E000F001E000F001E
000F001C000F003C000F0078000F01E0000FFF00000F03C0000F00E0000F00F0000F0078000F00
78000F0078000F0078000F0078000F0078000F0078100F0078100F0038100F003C20FFF01C2000
0007C01C1D7E9B1F>82 D<07E0801C1980300580700380600180E00180E00080E00080E00080F0
0000F800007C00007FC0003FF8001FFE0007FF0000FF80000F800007C00003C00001C08001C080
01C08001C0C00180C00180E00300D00200CC0C0083F800121E7E9C17>I<7FFFFFC0700F01C060
0F00C0400F0040400F0040C00F0020800F0020800F0020800F0020000F0000000F0000000F0000
000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F00
00000F0000000F0000000F0000000F0000001F800003FFFC001B1C7F9B1E>I<FFF07FC00F000E
000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F00
04000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F
0004000700080007800800038010000180100000C020000070C000001F00001A1D7E9B1F>I<FF
F007FC0F8001E00780008007C0018003C0010003E0020001F0020000F0040000F8040000780800
007C1800003C1000001E2000001F2000000F4000000FC000000780000007800000078000000780
0000078000000780000007800000078000000780000007800000078000007FF8001E1C809B1F>
89 D<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0FEFE07297C9E0C>91 D<FEFE060606060606060606060606060606060606060606060606
06060606060606060606060606FEFE0729809E0C>93 D<1FC000307000783800781C00301C0000
1C00001C0001FC000F1C00381C00701C00601C00E01C40E01C40E01C40603C40304E801F870012
127E9115>97 D<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00
001C7C001D86001E03001C01801C01C01C00C01C00E01C00E01C00E01C00E01C00E01C00E01C00
C01C01C01C01801E030019060010F800131D7F9C17>I<07E00C301878307870306000E000E000
E000E000E000E00060007004300418080C3007C00E127E9112>I<003F00000700000700000700
00070000070000070000070000070000070000070003E7000C1700180F00300700700700600700
E00700E00700E00700E00700E00700E00700600700700700300700180F000C370007C7E0131D7E
9C17>I<03E00C301818300C700E6006E006FFFEE000E000E000E00060007002300218040C1803
E00F127F9112>I<00F8018C071E061E0E0C0E000E000E000E000E000E00FFE00E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E007FE00F1D809C0D>I<00038003C4
C00C38C01C3880181800381C00381C00381C00381C001818001C38000C300013C0001000003000
001800001FF8001FFF001FFF803003806001C0C000C0C000C0C000C06001803003001C0E0007F8
00121C7F9215>I<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C
00001C7C001C87001D03001E03801C03801C03801C03801C03801C03801C03801C03801C03801C
03801C03801C03801C03801C0380FF9FF0141D7F9C17>I<18003C003C00180000000000000000
00000000000000FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C00FF80091D7F9C0C>I<00C001E001E000C000000000000000000000000000000FE000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E060E0F0
C0F1C061803E000B25839C0D>I<FC00001C00001C00001C00001C00001C00001C00001C00001C
00001C00001C00001C3FC01C0F001C0C001C08001C10001C20001C40001CE0001DE0001E70001C
78001C38001C3C001C1C001C0E001C0F001C0F80FF9FE0131D7F9C16>I<FC001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C00FF80091D7F9C0C>I<FC7E07E0001C838838001D019018001E01E01C001C01
C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C
01C01C001C01C01C001C01C01C001C01C01C001C01C01C00FF8FF8FF8021127F9124>I<FC7C00
1C87001D03001E03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380
1C03801C03801C0380FF9FF014127F9117>I<03F0000E1C00180600300300700380600180E001
C0E001C0E001C0E001C0E001C0E001C06001807003803003001806000E1C0003F00012127F9115
>I<FC7C001D86001E03001C01801C01C01C00C01C00E01C00E01C00E01C00E01C00E01C00E01C
01C01C01C01C01801E03001D06001CF8001C00001C00001C00001C00001C00001C00001C0000FF
8000131A7F9117>I<FCE01D301E781E781C301C001C001C001C001C001C001C001C001C001C00
1C001C00FFC00D127F9110>114 D<1F9030704030C010C010E010F8007F803FE00FF000F88038
8018C018C018E010D0608FC00D127F9110>I<04000400040004000C000C001C003C00FFE01C00
1C001C001C001C001C001C001C001C001C101C101C101C101C100C100E2003C00C1A7F9910>I<
FC1F801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380
1C03801C07800C07800E1B8003E3F014127F9117>I<FF07E03C03801C01001C01000E02000E02
0007040007040007040003880003880003D80001D00001D00000E00000E00000E0000040001312
7F9116>I<FF3FCFE03C0F03801C0701801C0701001C0B01000E0B82000E0B82000E1182000711
C4000711C4000720C40003A0E80003A0E80003C0680001C0700001C0700001803000008020001B
127F911E>I<7F8FF00F03800F030007020003840001C80001D80000F00000700000780000F800
009C00010E00020E000607000403801E07C0FF0FF81512809116>I<FF07E03C03801C01001C01
000E02000E020007040007040007040003880003880003D80001D00001D00000E00000E00000E0
00004000004000008000008000F08000F10000F300006600003C0000131A7F9116>I<7FFC7038
6038407040F040E041C003C0038007000F040E041C043C0C380870087038FFF80E127F9112>I<
FFFFF01401808B15>I E /Fk 33 121 df<00C001C0030006000C001C00380030007000700060
00E000E000E000E000E000E000E000600070007000300038001C000C000600030001C000C00A1D
7A9914>40 D<8000C0006000300018001C000E0006000700070003000380038003800380038003
80038003000700070006000E001C00180030006000C0008000091D7C9914>I<70F8FCFC7C0C18
30E0C0060A798414>44 D<FFFEFFFEFFFE0F037E8C14>I<70F8F8F8700505798414>I<0006000E
000E001C001C003800380070007000E000E001C001C0038003800380070007000E000E001C001C
003800380070007000E000E000C0000F1D7E9914>I<0300030007000F003F00F7004700070007
000700070007000700070007000700070007000700070007007FF07FF00C177C9614>49
D<0FC01FF03838701CE00EE00EE00E400E000E001C001C00380030007000E001C0030006000C00
180E300E7FFE7FFE0F177E9614>I<00780000F80001B80001B8000338000338000638000E3800
0C38001C3800383800303800703800E03800FFFF80FFFF80003800003800003800003800003800
01FF0001FF0011177F9614>52 D<3FFC7FFC700070007000700070007000700077C07FF0783820
1C000C000E000E400EE00EE01C601C78783FF00FC00F177E9614>I<FF00FF0038003800380038
00380038003800380038003800380038003800380038003807380738073807FFFFFFFF10177E96
14>76 D<7FFEFFFEE01CE01CE038E038007000E000E001C001C00380070007000E000E001C0038
0E380E700E700EFFFEFFFE0F177E9614>90 D<1FC0007FF000707800201800001C00001C0007FC
001FFC003C1C00701C00E01C00E01C00E01C00707C003FFF800F8F8011107E8F14>97
D<FC0000FC00001C00001C00001C00001C00001C00001CF8001DFE001F07001E03001C03801C01
C01C01C01C01C01C01C01C01C01C01C01C03801E03001F0E001DFC000CF8001217809614>I<03
F80FFC1C1C380870006000E000E000E000E00060007000380E1C1E0FFC03F00F107E8F14>I<00
7E00007E00000E00000E00000E00000E00000E0007CE000FFE001C3E00301E00700E00E00E00E0
0E00E00E00E00E00E00E00E00E00700E00301E00383E001FEFC007CFC012177F9614>I<07E00F
F01C38301C700CE00EE00EFFFEFFFEE00060007000380E1C1E0FFC03F00F107E8F14>I<07CF00
1FFF80383B80301800701C00701C00701C003018003838003FF00037C0007000007000003FF800
1FFC003FFE00700F00E00380E00380E00380E003807007003C1E001FFC0007F00011197F8F14>
103 D<FC0000FC00001C00001C00001C00001C00001C00001C78001DFE001F86001E07001C0700
1C07001C07001C07001C07001C07001C07001C07001C07001C0700FF8FE0FF8FE01317809614>
I<030007800780030000000000000000007F807F80038003800380038003800380038003800380
038003800380FFFCFFFC0E187D9714>I<FC0000FC00001C00001C00001C00001C00001C00001D
FF801DFF801C3C001C78001CF0001DE0001FC0001FC0001FE0001EF0001C70001C38001C38001C
1C00FE3F80FE3F8011177F9614>107 D<FF80FF80038003800380038003800380038003800380
0380038003800380038003800380038003800380FFFEFFFE0F177E9614>I<FB8E00FFDF003CF3
803CF38038E38038E38038E38038E38038E38038E38038E38038E38038E38038E380FEFBE0FE79
E01310808F14>I<FC7800FDFE001F86001E07001C07001C07001C07001C07001C07001C07001C
07001C07001C07001C0700FF8FE0FF8FE01310808F14>I<07C01FF03C78701C701CE00EE00EE0
0EE00EE00EE00E701C783C3C781FF007C00F107E8F14>I<FCF800FDFE001F07001E03001C0380
1C01C01C01C01C01C01C01C01C01C01C01C01C03801E03001F0E001DFC001CF8001C00001C0000
1C00001C00001C00001C0000FF8000FF80001218808F14>I<03CE000FFE001C3E00301E00700E
00E00E00E00E00E00E00E00E00E00E00E00E00700E00301E001C3E000FEE0007CE00000E00000E
00000E00000E00000E00000E00007FC0007FC012187F8F14>I<FE1F00FE7F800EE3800F81000F
00000F00000E00000E00000E00000E00000E00000E00000E00000E0000FFF000FFF00011107F8F
14>I<0FD83FF86038C038C038F0007F803FF007F8001C6006E006F006F81CFFF8CFE00F107E8F
14>I<030007000700070007007FFCFFFC07000700070007000700070007000700070E070E070E
070C03FC00F00F157F9414>I<FC3F00FC3F001C07001C07001C07001C07001C07001C07001C07
001C07001C07001C07001C07001C1F000FFFE003E7E01310808F14>I<FE3F80FE3F801C1C001C
1C001C1C001C1C000E38000E38000E380006300007700007700007700003E00003E00003E00011
107F8F14>I<7E3F007E3F001E38000E780007700007E00003E00001C00003C00003E000077000
0E78000E38001C1C00FE3F80FE3F8011107F8F14>120 D E /Fl 70 125
df<00FC7C0183C607078E0607040E07000E07000E07000E07000E07000E0700FFFFF00E07000E
07000E07000E07000E07000E07000E07000E07000E07000E07000E07000E07000E07000E07007F
0FF0171A809916>11 D<00FC000182000703000607000E02000E00000E00000E00000E00000E00
00FFFF000E07000E07000E07000E07000E07000E07000E07000E07000E07000E07000E07000E07
000E07000E07007F0FE0131A809915>I<60C0F1E0F9F068D0081008100810102010202040C180
0C0B7F9913>34 D<010001000FC0193021086108C104C10CC11CC108E100610079003F801FE007
F001780138011C410CE10CE10C810C81084118211011600F80010001000E1E7E9B13>36
D<60F0F868080808101020C0050B7D990B>39 D<00800100020004000C00080018003000300030
006000600060006000E000E000E000E000E000E000E000E000E000E00060006000600060003000
30003000180008000C00040002000100008009267D9B0F>I<8000400020001000180008000C00
060006000600030003000300030003800380038003800380038003800380038003800300030003
0003000600060006000C0008001800100020004000800009267E9B0F>I<60F0F0701010102020
4080040B7D830B>44 D<FFC0FFC00A0280880D>I<60F0F06004047D830B>I<0004000C00180018
001800300030003000600060006000C000C000C00180018001800300030003000600060006000C
000C000C00180018001800300030003000600060006000C000C0000E257E9B13>I<0780186030
30303060186018E01CE01CE01CE01CE01CE01CE01CE01CE01CE01CE01CE01C6018601870383030
186007800E187E9713>I<03000700FF0007000700070007000700070007000700070007000700
070007000700070007000700070007000700FFF00C187D9713>I<0F80106020304038803CC01C
E01C401C003C003800380070006000C001800100020004040804100430083FF87FF8FFF80E187E
9713>I<0F8010E02070607870382038007800700070006000C00F8000E000700038003C003CE0
3CE03CC03C4038407030E00F800E187E9713>I<00300030007000F000F001700370027004700C
7008701070307020704070C070FFFF00700070007000700070007007FF10187F9713>I<30183F
F03FE03FC02000200020002000200027C03860203000380018001C001C401CE01CE01C80184038
403030E00F800E187E9713>I<01E006100C1818383038300070006000E000E7C0E860F030F018
E018E01CE01CE01C601C601C701830183030186007C00E187E9713>I<40007FFE7FFC7FFC4008
801080108020004000400080018001800100030003000300030007000700070007000700070002
000F197E9813>I<078018603030201860186018601870103C303E600F8007C019F030F8603840
1CC00CC00CC00CC00C6008201018600FC00E187E9713>I<07801860303070306018E018E018E0
1CE01CE01C601C603C303C185C0F9C001C00180018003870307060604021801F000E187E9713>
I<60F0F060000000000000000060F0F06004107D8F0B>I<FFFFFF80FFFFFF8000000000000000
0000000000000000000000000000000000FFFFFF80FFFFFF80190A7E8D1E>61
D<1FC020604030C038E038E0380038007000E00180010003000200020002000200020002000000
00000000000006000F000F0006000D1A7E9912>63 D<000C0000000C0000000C0000001E000000
1E0000003F000000270000002700000043800000438000004380000081C0000081C0000081C000
0100E0000100E00001FFE000020070000200700006007800040038000400380008001C0008001C
001C001E00FF00FFC01A1A7F991D>65 D<FFFF000E01C00E00E00E00700E00780E00780E00780E
00780E00780E00F00E00E00E03C00FFF800E01E00E00700E00780E003C0E003C0E003C0E003C0E
003C0E00380E00780E00F00E01E0FFFF80161A7E991B>I<003F0201C0C603002E0E001E1C000E
1C0006380006780002700002700002F00000F00000F00000F00000F00000F00000700002700002
7800023800041C00041C00080E000803003001C0C0003F00171A7E991C>I<FFFF000E01C00E00
E00E00300E00380E001C0E001C0E000E0E000E0E000F0E000F0E000F0E000F0E000F0E000F0E00
0F0E000F0E000E0E000E0E001E0E001C0E00380E00380E00700E01C0FFFF00181A7E991D>I<FF
FFF00E00700E00300E00100E00180E00080E00080E00080E04000E04000E04000E0C000FFC000E
0C000E04000E04000E04000E00040E00040E00080E00080E00080E00180E00380E0070FFFFF016
1A7E991A>I<FFFFE00E00E00E00600E00200E00300E00100E00100E00100E04000E04000E0400
0E0C000FFC000E0C000E04000E04000E04000E00000E00000E00000E00000E00000E00000E0000
0E0000FFF000141A7E9919>I<003F020001C0C60003002E000E001E001C000E001C0006003800
0600780002007000020070000200F0000000F0000000F0000000F0000000F0000000F001FFC070
000E0070000E0078000E0038000E001C000E001C000E000E000E000300160001C06600003F8200
1A1A7E991E>I<FFE7FF0E00700E00700E00700E00700E00700E00700E00700E00700E00700E00
700E00700FFFF00E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00
700E0070FFE7FF181A7E991D>I<FFE00E000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E00FFE00B1A7F990E>I<FFF0000E00
000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00
000E00000E00000E00200E00200E00200E00600E00400E00400E00C00E03C0FFFFC0131A7E9918
>76 D<FF0003FC0F0003C00F0003C00B8005C00B8005C00B8005C009C009C009C009C009C009C0
08E011C008E011C008E011C0087021C0087021C0083841C0083841C0083841C0081C81C0081C81
C0081C81C0080F01C0080F01C0080F01C0080601C01C0601C0FF861FFC1E1A7E9923>I<007F00
0001C1C000070070000E0038001C001C003C001E0038000E0078000F0070000700F0000780F000
0780F0000780F0000780F0000780F0000780F0000780F000078078000F0078000F0038000E003C
001E001C001C000E0038000700700001C1C000007F0000191A7E991E>79
D<FFFF000E03C00E00E00E00700E00700E00780E00780E00780E00780E00700E00700E00E00E03
C00FFF000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0000FFE0
00151A7E991A>I<FFFC00000E0780000E01C0000E00E0000E00F0000E00F0000E00F0000E00F0
000E00F0000E00E0000E01C0000E0780000FFC00000E0600000E0300000E0180000E01C0000E01
C0000E01C0000E01E0000E01E0000E01E0000E01E0800E00F0800E007100FFE03E00191A7E991C
>82 D<0FC21836200E6006C006C002C002C002E00070007E003FE01FF807FC003E000E00070003
800380038003C002C006E004D81887E0101A7E9915>I<7FFFFF00701C0700401C0100401C0100
C01C0180801C0080801C0080801C0080001C0000001C0000001C0000001C0000001C0000001C00
00001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C
0000001C000003FFE000191A7F991C>I<FFE1FF0E00380E00100E00100E00100E00100E00100E
00100E00100E00100E00100E00100E00100E00100E00100E00100E00100E00100E00100E001006
002007002003004001804000C180003E00181A7E991D>I<7FC0FF000F003C0007003000078020
000380600001C0400001E0800000E1800000710000007A0000003C0000001C0000001E0000001E
00000017000000278000004380000041C0000081E0000100E0000100700002007800040038000C
001C001E003E00FF80FFC01A1A7F991D>88 D<1830204040804080810081008100B160F9F078F0
30600C0B7B9913>92 D<3F8070C070E020700070007007F01C7030707070E070E071E071E0F171
FB1E3C10107E8F13>97 D<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C
00001CF8001F0E001E07001C03801C01801C01C01C01C01C01C01C01C01C01C01C01C01C03801C
03001E07001B0C0010F000121A7F9915>I<07F80C1C381C30087000E000E000E000E000E000E0
007000300438080C1807E00E107F8F11>I<007E00000E00000E00000E00000E00000E00000E00
000E00000E00000E0003CE000C3E00380E00300E00700E00E00E00E00E00E00E00E00E00E00E00
E00E00600E00700E00381E001C2E0007CFC0121A7F9915>I<07C01C3030187018600CE00CFFFC
E000E000E000E0006000300438080C1807E00E107F8F11>I<01F0031807380E100E000E000E00
0E000E000E00FFC00E000E000E000E000E000E000E000E000E000E000E000E000E000E007FE00D
1A80990C>I<0FCE187330307038703870387038303018602FC02000600070003FF03FFC1FFE60
0FC003C003C003C0036006381C07E010187F8F13>I<FC00001C00001C00001C00001C00001C00
001C00001C00001C00001C00001CF8001D0C001E0E001E0E001C0E001C0E001C0E001C0E001C0E
001C0E001C0E001C0E001C0E001C0E001C0E00FF9FC0121A7F9915>I<18003C003C0018000000
00000000000000000000FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C
00FF80091A80990A>I<018003C003C001800000000000000000000000000FC001C001C001C001
C001C001C001C001C001C001C001C001C001C001C001C001C001C001C041C0E180E3007E000A21
82990C>I<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C3F801C
1E001C18001C10001C20001C40001DC0001FE0001CE0001C70001C78001C38001C1C001C1E001C
1F00FF3FC0121A7F9914>I<FC001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C00FF80091A80990A>I<FC7C1F001D8E63
801E0781C01E0781C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C07
01C01C0701C01C0701C01C0701C0FF9FE7F81D107F8F20>I<FCF8001D0C001E0E001E0E001C0E
001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E00FF9FC012107F8F15
>I<07E01C38300C700E6006E007E007E007E007E007E0076006700E381C1C3807E010107F8F13>
I<FCF8001F0E001E07001C03801C03801C01C01C01C01C01C01C01C01C01C01C01C01C03801C03
001E07001F0C001CF0001C00001C00001C00001C00001C00001C0000FF800012177F8F15>I<03
C2000C2600381E00300E00700E00E00E00E00E00E00E00E00E00E00E00E00E00700E00700E0038
1E001C2E0007CE00000E00000E00000E00000E00000E00000E00007FC012177F8F14>I<FCE01D
701E701E201C001C001C001C001C001C001C001C001C001C001C00FFC00C107F8F0F>I<1F2060
E04020C020C020F0007F003FC01FE000F080708030C030C020F0408F800C107F8F0F>I<040004
0004000C000C001C003C00FFC01C001C001C001C001C001C001C001C001C201C201C201C201C20
0E4003800B177F960F>I<FC7E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C
0E001C0E001C0E001C0E001C1E000C2E0007CFC012107F8F15>I<FF1F803C06001C04001C0400
1E0C000E08000E080007100007100007900003A00003A00001C00001C00001C00000800011107F
8F14>I<FF3F9F803C0E0700380E06001C1604001C1704001E170C000E2308000E2388000F2398
00074190000741D00003C1E0000380E0000380E0000180C0000100400019107F8F1C>I<FF3F80
3C1C001C18000E100007200007600003C00001C00001E00003E000027000043800083800181C00
381E00FC3FC012107F8F14>I<FF1F803C06001C04001C04001E0C000E08000E08000710000710
0007900003A00003A00001C00001C00001C000008000008000010000010000E10000E20000E400
0078000011177F8F14>I<FFFFC01201808913>123 D<FFFFFFFFF82501808926>I
E /Fm 10 58 df<07C018303018701C600C600CE00EE00EE00EE00EE00EE00EE00EE00EE00E60
0C600C701C30181C7007C00F157F9412>48 D<03000700FF000700070007000700070007000700
07000700070007000700070007000700070007007FF00C157E9412>I<0F8030E040708030C038
E0384038003800700070006000C00180030006000C08080810183FF07FF0FFF00D157E9412>I<
0FE030306018701C701C001C00180038006007E000300018000C000E000EE00EE00EC00C401830
300FE00F157F9412>I<00300030007000F001F001700270047008701870107020704070C070FF
FE0070007000700070007003FE0F157F9412>I<20303FE03FC0240020002000200020002F8030
E020700030003800384038E038E0388030406020C01F000D157E9412>I<01F00608080C181C30
1C70006000E000E3E0EC30F018F00CE00EE00EE00E600E600E300C3018183007C00F157F9412>
I<40007FFE7FFC7FF8C008801080200040008000800100010003000200060006000E000E000E00
0E000E0004000F167E9512>I<07E018302018600C600C700C78183E101F600FC00FF018F8607C
601EC00EC006C006C004600C38300FE00F157F9412>I<07C0183030186018E00CE00CE00EE00E
E00E601E301E186E0F8E000E000C001C70187018603020C01F800F157F9412>I
E /Fn 5 121 df<FFFE0000FFFE00000780000007800000078000000780000007800000078000
000780000007800000078000000780000007800000078000000780000007800000078000000780
000007800000078000000780000007800020078000200780002007800020078000600780006007
800040078000C0078001C0078003C007800FC0FFFFFFC0FFFFFFC01B227CA122>76
D<FFF00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00
0F000F000F000F000F000F00FFF00C1A7F990F>105 D<FF00FF800F801C000F8008000BC00800
09E0080009E0080008F0080008F8080008780800083C0800083C0800081E0800080F0800080F08
00080788000803C8000803C8000801E8000800F8000800F8000800780008007800080038000800
18001C001800FF800800191A7E991F>110 D<FFF0FF800F001C000F0008000F0008000F000800
0F0008000F0008000F0008000F0008000F0008000F0008000F0008000F0008000F0008000F0008
000F0008000F0008000F0008000F0008000F00080007001000078010000380200001C0600000E0
8000003F0000191A7E991F>117 D<7FE07F800FC03E000F80180007C0100003C0200003E06000
01F0400000F0800000790000007D0000003E0000001E0000001F0000000F0000001780000037C0
000023C0000041E0000081F0000180F0000100780002007C0006003C000E003E001E003F00FF80
FFE01B1A7F991F>120 D E /Fo 16 119 df<007C3801FF3807FFF80F83F81E00F81C00783800
78380038700038700038700000E00000E00000E00000E00000E00000E00000E00000E000007000
007000387000383800383800381C00701E00F00F83E007FFC001FF80007C00151E7E9D1A>67
D<FF83FEFF83FEFF83FE1C00701C00701C00701C00701C00701C00701C00701C00701C00701C00
701FFFF01FFFF01FFFF01C00701C00701C00701C00701C00701C00701C00701C00701C00701C00
701C0070FF83FEFF83FEFF83FE171E7F9D1A>72 D<03F1C00FFDC03FFFC07C0FC07003C0E003C0
E001C0E001C0E001C0E000007000007800003F00001FF00007FE0000FF00000F800003C00001C0
0000E00000E06000E0E000E0E000E0E001C0F001C0FC0780FFFF80EFFE00E3F800131E7D9D1A>
83 D<1FF0003FFC007FFE00780F00300700000380000380007F8007FF801FFF803F8380780380
700380E00380E00380E00380700780780F803FFFFC1FFDFC07F0FC16157D941A>97
D<FE0000FE0000FE00000E00000E00000E00000E00000E00000E00000E3E000EFF800FFFE00FC1
F00F80700F00380E00380E001C0E001C0E001C0E001C0E001C0E001C0E001C0F00380F00780F80
F00FC1E00FFFC00EFF80063E00161E7F9D1A>I<00FF8003FFC00FFFE01F01E03C00C078000070
0000700000E00000E00000E00000E00000E000007000007000007800703C00701F01F00FFFE003
FFC000FE0014157D941A>I<001FC0001FC0001FC00001C00001C00001C00001C00001C00001C0
01F1C007FDC00FFFC01E0FC03C07C07803C07001C0E001C0E001C0E001C0E001C0E001C0E001C0
E001C07003C07003C03807C03E0FC01FFFFC07FDFC01F1FC161E7E9D1A>I<01F87C07FFFE0FFF
FE1E078C1C03803801C03801C03801C03801C03801C01C03801E07801FFF001FFE0039F8003800
003800001C00001FFF801FFFE03FFFF878007C70001CE0000EE0000EE0000EE0000E70001C7800
3C3E00F81FFFF007FFC001FF0017217F941A>103 D<00C00001E00001E00000C0000000000000
000000000000000000000000007FE0007FE0007FE00000E00000E00000E00000E00000E00000E0
0000E00000E00000E00000E00000E00000E00000E00000E00000E0007FFF80FFFFC07FFF80121F
7C9E1A>105 D<FFE000FFE000FFE00000E00000E00000E00000E00000E00000E00000E00000E0
0000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0
0000E00000E00000E000FFFFE0FFFFE0FFFFE0131E7D9D1A>108 D<7CE0E000FFFBF8007FFFF8
001F1F1C001E1E1C001E1E1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C
1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C007F1F1F00FF9F9F807F1F1F00191580941A
>I<FE3E00FEFF80FFFFC00FC1C00F80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E
00E00E00E00E00E00E00E00E00E00E00E0FFE3FEFFE7FEFFE3FE17157F941A>I<01F00007FC00
1FFF003E0F803C07807803C07001C0E000E0E000E0E000E0E000E0E000E0E000E0F001E07001C0
7803C03C07803E0F801FFF0007FC0001F00013157D941A>I<07FB801FFF807FFF80780780E003
80E00380E003807800007FC0003FFC0007FE00003F800007806001C0E001C0E001C0F003C0FC07
80FFFF00EFFE00E3F80012157C941A>115 D<00C00001C00001C00001C00001C00001C00001C0
007FFFE0FFFFE0FFFFE001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C07001C07001C07001C07000E0E000FFE0007FC0001F00141C7F9B1A>I<7F83FCFFC7FE7F
83FC0E00E00E00E00E00E00701C00701C00701C003838003838003838001C70001C70001C70000
EE0000EE0000EE00007C00007C0000380017157F941A>118 D E /Fp 58
123 df<000FF83F00007FFDFFC001F81FE3E003E03F87E007C03F87E00F803F07E00F803F03C0
0F801F00000F801F00000F801F00000F801F00000F801F00000F801F0000FFFFFFFC00FFFFFFFC
000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F
00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00000F80
1F00000F801F00000F801F00007FF0FFF0007FF0FFF00023237FA221>11
D<FFFCFFFCFFFCFFFC0E047F8C13>45 D<387CFEFEFE7C3807077C8610>I<00FE0007FFC00F83
E01F01F03E00F83E00F87C007C7C007C7C007CFC007CFC007EFC007EFC007EFC007EFC007EFC00
7EFC007EFC007EFC007EFC007EFC007EFC007EFC007E7C007C7C007C7C007C3E00F83E00F81F01
F00F83E007FFC000FE0017207E9F1C>48 D<00180000780001F800FFF800FFF80001F80001F800
01F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F800
01F80001F80001F80001F80001F80001F80001F80001F80001F80001F8007FFFE07FFFE013207C
9F1C>I<03FC000FFF003C1FC07007E07C07F0FE03F0FE03F8FE03F8FE01F87C01F83803F80003
F80003F00003F00007E00007C0000F80001F00003E0000380000700000E01801C0180380180700
180E00380FFFF01FFFF03FFFF07FFFF0FFFFF0FFFFF015207D9F1C>I<00FE0007FFC00F07E01E
03F03F03F03F81F83F81F83F81F81F03F81F03F00003F00003E00007C0001F8001FE0001FF0000
07C00001F00001F80000FC0000FC3C00FE7E00FEFF00FEFF00FEFF00FEFF00FC7E01FC7801F81E
07F00FFFC001FE0017207E9F1C>I<0000E00001E00003E00003E00007E0000FE0001FE0001FE0
0037E00077E000E7E001C7E00187E00307E00707E00E07E00C07E01807E03807E07007E0E007E0
FFFFFEFFFFFE0007E00007E00007E00007E00007E00007E00007E000FFFE00FFFE17207E9F1C>
I<1000201E01E01FFFC01FFF801FFF001FFE001FF8001BC00018000018000018000018000019FC
001FFF001E0FC01807E01803E00003F00003F00003F80003F83803F87C03F8FE03F8FE03F8FC03
F0FC03F07007E03007C01C1F800FFF0003F80015207D9F1C>I<001F8000FFE003F07007C0F00F
01F81F01F83E01F83E01F87E00F07C00007C0000FC0800FC7FC0FCFFE0FD80F0FF00F8FE007CFE
007CFC007EFC007EFC007EFC007E7C007E7C007E7C007E3C007C3E007C1E00F80F00F00783E003
FFC000FF0017207E9F1C>I<6000007800007FFFFE7FFFFE7FFFFC7FFFF87FFFF87FFFF0E00060
E000C0C00180C00300C00300000600000C00001C0000180000380000780000780000F00000F000
00F00001F00001F00001F00003F00003F00003F00003F00003F00003F00003F00001E00017227D
A11C>I<00FE0003FFC00703E00E00F01C00F01C00783C00783E00783F00783F80783FE0F01FF9
E01FFFC00FFF8007FFC003FFE007FFF01E7FF83C1FFC7807FC7801FEF000FEF0003EF0001EF000
1EF0001CF8001C7800383C00381F01F00FFFC001FF0017207E9F1C>I<01FE0007FF800F83E01E
01F03E00F07C00F87C0078FC007CFC007CFC007CFC007EFC007EFC007EFC007E7C00FE7C00FE3E
01FE1E037E0FFE7E07FC7E00207E00007C00007C1E007C3F00F83F00F83F00F03F01E01E03C01C
0F800FFE0003F80017207E9F1C>I<387CFEFEFE7C380000000000000000387CFEFEFE7C380716
7C9510>I<07FC001FFF00380F807007C0F807E0FC07E0FC07E0FC07E07807E0000FC0001F8000
1F00003C0000780000700000E00000E00000C00000C00000C00000C00000C00000C00000000000
000000000000000000000001C00003E00007F00007F00007F00003E00001C00013237DA21A>63
D<000070000000007000000000F800000000F800000000F800000001FC00000001FC00000003FE
00000003FE00000003FE00000006FF000000067F0000000E7F8000000C3F8000000C3F80000018
3FC00000181FC00000381FE00000300FE00000300FE00000600FF000006007F00000E007F80000
FFFFF80000FFFFF800018001FC00018001FC00038001FE00030000FE00030000FE000600007F00
0600007F00FFE00FFFF8FFE00FFFF825227EA12A>65 D<FFFFFF8000FFFFFFE00007F001F80007
F000FC0007F0007E0007F0007E0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F00
07F0007E0007F000FE0007F000FC0007F003F80007FFFFF00007FFFFF00007F001FC0007F0007E
0007F0003F0007F0003F8007F0001F8007F0001FC007F0001FC007F0001FC007F0001FC007F000
1FC007F0001FC007F0003F8007F0003F8007F0007F0007F001FE00FFFFFFF800FFFFFFC0002222
7EA128>I<0003FE0080001FFF818000FF01E38001F8003F8003E0001F8007C0000F800F800007
801F800007803F000003803F000003807F000001807E000001807E00000180FE00000000FE0000
0000FE00000000FE00000000FE00000000FE00000000FE00000000FE000000007E000000007E00
0001807F000001803F000001803F000003801F800003000F8000030007C000060003F0000C0001
F800380000FF00F000001FFFC0000003FE000021227DA128>I<FFFFFF8000FFFFFFF00007F003
FC0007F0007E0007F0003F0007F0001F8007F0000FC007F00007E007F00007E007F00007F007F0
0003F007F00003F007F00003F007F00003F807F00003F807F00003F807F00003F807F00003F807
F00003F807F00003F807F00003F807F00003F807F00003F007F00003F007F00003F007F00007E0
07F00007E007F0000FC007F0001F8007F0003F0007F0007E0007F003FC00FFFFFFF000FFFFFF80
0025227EA12B>I<FFFFFFFCFFFFFFFC07F000FC07F0003C07F0001C07F0000C07F0000E07F000
0E07F0000607F0180607F0180607F0180607F0180007F0380007F0780007FFF80007FFF80007F0
780007F0380007F0180007F0180007F0180307F0180307F0000307F0000607F0000607F0000607
F0000E07F0000E07F0001E07F0003E07F001FCFFFFFFFCFFFFFFFC20227EA125>I<FFFFFFF8FF
FFFFF807F001F807F0007807F0003807F0001807F0001C07F0001C07F0000C07F0000C07F0180C
07F0180C07F0180007F0180007F0380007F0780007FFF80007FFF80007F0780007F0380007F018
0007F0180007F0180007F0180007F0000007F0000007F0000007F0000007F0000007F0000007F0
000007F00000FFFFE000FFFFE0001E227EA123>I<0003FE0040001FFFC0C0007F00F1C001F800
3FC003F0000FC007C00007C00FC00003C01F800003C03F000001C03F000001C07F000000C07E00
0000C07E000000C0FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE
00000000FE000FFFFC7E000FFFFC7F00001FC07F00001FC03F00001FC03F00001FC01F80001FC0
0FC0001FC007E0001FC003F0001FC001FC003FC0007F80E7C0001FFFC3C00003FF00C026227DA1
2C>I<FFFFE0FFFFE003F80003F80003F80003F80003F80003F80003F80003F80003F80003F800
03F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F800
03F80003F80003F80003F80003F80003F80003F800FFFFE0FFFFE013227FA115>73
D<FFF000000FFFFFF800001FFF07F800001FE006FC000037E006FC000037E006FC000037E0067E
000067E0067E000067E0063F0000C7E0063F0000C7E0061F800187E0061F800187E0060FC00307
E0060FC00307E0060FC00307E00607E00607E00607E00607E00603F00C07E00603F00C07E00601
F81807E00601F81807E00601F81807E00600FC3007E00600FC3007E006007E6007E006007E6007
E006003FC007E006003FC007E006001F8007E006001F8007E006001F8007E006000F0007E0FFF0
0F00FFFFFFF00600FFFF30227EA135>77 D<FFF8001FFEFFFC001FFE07FC0000C007FE0000C006
FF0000C0067F8000C0063FC000C0061FE000C0060FE000C0060FF000C00607F800C00603FC00C0
0601FE00C00600FE00C00600FF00C006007F80C006003FC0C006001FE0C006000FF0C0060007F0
C0060007F8C0060003FCC0060001FEC0060000FFC00600007FC00600007FC00600003FC0060000
1FC00600000FC006000007C006000003C006000003C0FFF00001C0FFF00000C027227EA12C>I<
FFFFFF00FFFFFFE007F007F007F001FC07F000FC07F0007E07F0007E07F0007F07F0007F07F000
7F07F0007F07F0007F07F0007E07F0007E07F000FC07F001FC07F007F007FFFFE007FFFF0007F0
000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007
F0000007F0000007F00000FFFF8000FFFF800020227EA126>80 D<0007FC0000003FFF800000FC
07E00003F001F80007E000FC000FC0007E001F80003F001F80003F003F00001F803F00001F807F
00001FC07E00000FC07E00000FC0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0
FE00000FE0FE00000FE0FE00000FE0FE00000FE07E00000FC07F00001FC07F00001FC03F00001F
803F81F03F801F83F83F000FC70C7E0007E606FC0003F607F80000FF07E000003FFF80000007FF
80200000038020000001C020000001E0E0000001FFE0000001FFC0000000FFC0000000FFC00000
007F800000007F000000001E00232C7DA12A>I<FFFFFE0000FFFFFFC00007F007F00007F001F8
0007F000FC0007F0007E0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F000
7F0007F0007E0007F000FC0007F001F80007F007F00007FFFFC00007FFFF800007F00FE00007F0
07F00007F003F80007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007
F001FC0007F001FC0007F001FC0607F000FE0607F000FF0CFFFF803FF8FFFF800FF027227EA12A
>I<01FC0407FF8C1F03FC3C007C7C003C78001C78001CF8000CF8000CFC000CFC0000FF0000FF
E0007FFF007FFFC03FFFF01FFFF80FFFFC03FFFE003FFE0003FF00007F00003F00003FC0001FC0
001FC0001FE0001EE0001EF0003CFC003CFF00F8C7FFE080FF8018227DA11F>I<7FFFFFFF807F
FFFFFF807E03F80F807803F807807003F803806003F80180E003F801C0E003F801C0C003F800C0
C003F800C0C003F800C0C003F800C00003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F800000003F800000003F800000003F800000003F800000003F8000003FF
FFF80003FFFFF80022227EA127>I<FFFF803FFCFFFF803FFC07F000018007F000018007F00001
8007F000018007F000018007F000018007F000018007F000018007F000018007F000018007F000
018007F000018007F000018007F000018007F000018007F000018007F000018007F000018007F0
00018007F000018007F000018007F000018007F000018007F000018003F000030003F800030001
F800060000FC000E00007E001C00003F80F800000FFFE0000001FF000026227EA12B>I<FFFF80
0FFEFFFF800FFE07F00000C007F80000C003F800018003F800018001FC00030001FC00030001FE
00070000FE00060000FF000600007F000C00007F800C00003F801800003F801800003FC0380000
1FC03000001FE03000000FE06000000FF060000007F0C0000007F0C0000007F9C0000003F98000
0003FD80000001FF00000001FF00000000FE00000000FE00000000FE000000007C000000007C00
000000380000000038000027227FA12A>I<FFFF0FFFF01FFEFFFF0FFFF01FFE0FF000FF0000E0
07F0007F0000C007F0007F0000C003F8007F80018003F8003F80018003FC003F80038001FC003F
C0030001FC003FC0030000FE007FE0060000FE006FE0060000FF006FE00600007F00C7F00C0000
7F00C7F00C00007F80C7F81C00003F8183F81800003F8183F81800001FC383FC3000001FC301FC
3000001FE301FC3000000FE600FE6000000FE600FE6000000FF600FFE0000007FC007FC0000007
FC007FC0000003FC007F80000003F8003F80000003F8003F80000001F0001F00000001F0001F00
000000F0001E00000000E0000E00000000E0000E000037227FA13A>I<FFFF800FFEFFFF800FFE
07F80000C007F80001C003FC00018001FE00030001FE00070000FF00060000FF000C00007F801C
00003FC01800003FC03000001FE07000000FF06000000FF0E0000007F8C0000003FD80000003FF
80000001FF00000001FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000
FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE0000001FFFF00000
1FFFF00027227FA12A>89 D<07FC001FFF803F07C03F03E03F01E03F01F01E01F00001F00001F0
003FF003FDF01FC1F03F01F07E01F0FC01F0FC01F0FC01F0FC01F07E02F07E0CF81FF87F07E03F
18167E951B>97 D<FF000000FF0000001F0000001F0000001F0000001F0000001F0000001F0000
001F0000001F0000001F0000001F0000001F0000001F0FE0001F3FF8001FF07C001F801E001F00
1F001F000F801F000F801F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F
000FC01F000F801F001F801F801F001FC03E001EE07C001C3FF800180FC0001A237EA21F>I<00
FF8007FFE00F83F01F03F03E03F07E03F07C01E07C0000FC0000FC0000FC0000FC0000FC0000FC
00007C00007E00007E00003E00301F00600FC0E007FF8000FE0014167E9519>I<0001FE000001
FE0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000
003E0000003E0001FC3E0007FFBE000F81FE001F007E003E003E007E003E007C003E00FC003E00
FC003E00FC003E00FC003E00FC003E00FC003E00FC003E00FC003E007C003E007C003E003E007E
001E00FE000F83BE0007FF3FC001FC3FC01A237EA21F>I<00FE0007FF800F87C01E01E03E01F0
7C00F07C00F8FC00F8FC00F8FFFFF8FFFFF8FC0000FC0000FC00007C00007C00007E00003E0018
1F00300FC07003FFC000FF0015167E951A>I<003F8000FFC001E3E003C7E007C7E00F87E00F83
C00F80000F80000F80000F80000F80000F8000FFFC00FFFC000F80000F80000F80000F80000F80
000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80
007FF8007FF80013237FA211>I<03FC1E0FFF7F1F0F8F3E07CF3C03C07C03E07C03E07C03E07C
03E07C03E03C03C03E07C01F0F801FFF0013FC003000003000003800003FFF801FFFF00FFFF81F
FFFC3800FC70003EF0001EF0001EF0001EF0001E78003C7C007C3F01F80FFFE001FF0018217E95
1C>I<FF000000FF0000001F0000001F0000001F0000001F0000001F0000001F0000001F000000
1F0000001F0000001F0000001F0000001F07E0001F1FF8001F307C001F403C001F803E001F803E
001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F00
3E001F003E001F003E001F003E001F003E00FFE1FFC0FFE1FFC01A237EA21F>I<1C003E007F00
7F007F003E001C000000000000000000000000000000FF00FF001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE00B247EA310>I<FF000000FF
0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F000000
1F0000001F0000001F00FF801F00FF801F0038001F0060001F01C0001F0380001F0700001F0E00
001F1C00001F7E00001FFF00001FCF00001F0F80001F07C0001F03E0001F01E0001F01F0001F00
F8001F007C001F003C00FFE0FFC0FFE0FFC01A237EA21E>107 D<FF00FF001F001F001F001F00
1F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F00FFE0FFE00B237EA210>I<FF07F007F000FF1FFC1FFC001F
303E303E001F403E403E001F801F801F001F801F801F001F001F001F001F001F001F001F001F00
1F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE0FFE0FFE0FFE0
FFE02B167E9530>I<FF07E000FF1FF8001F307C001F403C001F803E001F803E001F003E001F00
3E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E00FFE1FFC0FFE1FFC01A167E951F>I<00FE0007FFC00F83E01E00F03E
00F87C007C7C007C7C007CFC007EFC007EFC007EFC007EFC007EFC007EFC007E7C007C7C007C3E
00F81F01F00F83E007FFC000FE0017167E951C>I<FF0FE000FF3FF8001FF07C001F803E001F00
1F001F001F801F001F801F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F
000FC01F001F801F001F801F803F001FC03E001FE0FC001F3FF8001F0FC0001F0000001F000000
1F0000001F0000001F0000001F0000001F0000001F000000FFE00000FFE000001A207E951F>I<
FE1F00FE3FC01E67E01EC7E01E87E01E87E01F83C01F00001F00001F00001F00001F00001F0000
1F00001F00001F00001F00001F00001F00001F0000FFF000FFF00013167E9517>114
D<0FF3003FFF00781F00600700E00300E00300F00300FC00007FE0007FF8003FFE000FFF0001FF
00000F80C00780C00380E00380E00380F00700FC0E00EFFC00C7F00011167E9516>I<01800001
80000180000180000380000380000780000780000F80003F8000FFFF00FFFF000F80000F80000F
80000F80000F80000F80000F80000F80000F80000F80000F80000F81800F81800F81800F81800F
81800F830007C30003FE0000F80011207F9F16>I<FF01FE00FF01FE001F003E001F003E001F00
3E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E001F007E001F00FE000F81BE0007FF3FC001FC3FC01A167E951F>I<FF
E01FE0FFE01FE00F8006000F8006000FC00E0007C00C0007E01C0003E0180003E0180001F03000
01F0300000F8600000F86000007CC000007CC000007FC000003F8000003F8000001F0000001F00
00000E0000000E00001B167F951E>I<FFE7FF07F8FFE7FF07F81F007800C00F807801800F807C
01800F807C018007C07E030007C0DE030007E0DE070003E0DF060003E18F060001F18F0C0001F3
8F8C0001FB079C0000FB07D80000FE03D800007E03F000007E03F000007C01F000003C01E00000
3800E000001800C00025167F9528>I<FFE07FC0FFE07FC00F801C0007C0380003E0700003F060
0001F8C00000F98000007F8000003F0000001F0000001F8000003FC0000037C0000063E00000C1
F00001C0F8000380FC0007007E000E003E00FF80FFE0FF80FFE01B167F951E>I<FFE01FE0FFE0
1FE00F8006000F8006000FC00E0007C00C0007E01C0003E0180003E0180001F0300001F0300000
F8600000F86000007CC000007CC000007FC000003F8000003F8000001F0000001F0000000E0000
000E0000000C0000000C00000018000078180000FC380000FC300000FC60000069C000007F8000
001F0000001B207F951E>I<7FFFF07FFFF07C03E07007C0600FC0E01F80C01F00C03E00C07E00
00FC0000F80001F00003F03007E03007C0300F80701F80703F00603E00E07C03E0FFFFE0FFFFE0
14167E9519>I E /Fq 1 52 df<00008000000180000003C00000066000000C30000018180000
300C000060060000C0030001800180030000C0060000600C000030180000183000000C60000006
C0000003600000063000000C180000180C00003006000060030000C00180018000C00300006006
0000300C0000181800000C3000000660000003C000000180000000800020217E9F25>51
D E /Fr 93 127 df<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0600000000060F0F0600419779816
>33 D<E038F078F078F078F078F078F078F078E038E03860300D0B7C9816>I<03870003870003
87000387000387000387007FFFC0FFFFE0FFFFE0070E00070E00070E000E1C000E1C000E1C000E
1C00FFFFE0FFFFE07FFFC01C38001C38001C38001C38001C38001C380013197F9816>I<00C000
01C00001C00001C00007F0001FFC003FFF007DCF00F1C780E1C780E1C780E1C780F1C30079C000
7FC0001FF00007FC0001FE0001CF0001C780F1C380F1C380F1C380E1C780F1C78079DF003FFE00
1FFC0007E00001C00001C00000C00011207E9C16>I<3801807C0380FE0380FE0700EE0700EE0E
00EE0E00EE0E00FE1C00FE1C007C380038380000700000700000700000E00000E00001C00001C0
0001C0000380000383800707C0070FE00E0EE00E0EE00E0EE01C0EE01C0EE0380FE03807C01803
8013207F9C16>I<03800007E0000FE0001E70001C70001C70001C70001C77E01CE7E01DE7E00F
C7000F8E000F0E001E0E003F1C007F1C00739C00E3F800E1F800E0F1C0E0F1C071F9C07FFFC03F
9F801E070013197F9816>I<183C3E1E0E0E0E1E1C3C78F060070D799816>I<00E001E007C00700
0F001E003C0038007800700070007000F000E000E000E000E000E000E000E000F0007000700070
00780038003C001E000F00070007C001E000E00B217A9C16>I<E000F0007C001C001E000F0007
80038003C001C001C001C001E000E000E000E000E000E000E000E001E001C001C001C003C00380
07800F001E001C007C00F000E0000B217C9C16>I<01C00001C00001C00001C00071C700F9CF80
7FFF001FFC0007F00007F0001FFC007FFF00F9CF8071C70001C00001C00001C00001C00011127E
9516>I<01C00001C00001C00001C00001C00001C00001C00001C000FFFF80FFFF80FFFF8001C0
0001C00001C00001C00001C00001C00001C00001C00011137E9516>I<387C7E7E3E0E1E3C7CF8
60070B798416>I<FFFF80FFFF80FFFF8011037E8D16>I<70F8F8F8700505788416>I<00018000
0380000380000700000700000E00000E00001C00001C0000380000380000700000700000E00000
E00001C00001C0000380000380000700000700000E00000E00001C00001C000038000038000070
0000700000E00000E00000C0000011207E9C16>I<03E0000FF8001FFC001E3C00380E00780F00
700700700700E00380E00380E00380E00380E00380E00380E00380E00380F00780700700700700
780F003C1E001E3C001FFC000FF80003E00011197E9816>I<01800380038007800F807F80FF80
7380038003800380038003800380038003800380038003800380038003807FF87FFC7FF80E197C
9816>I<07E0001FF8007FFE00783F00F00F00F00780F00380F003800003800003800007800007
00000F00001E00003C0000780000F00003E0000780000F00001E03803C03807FFF80FFFF807FFF
8011197E9816>I<07E0001FFC007FFE00781F00780F00780700000700000F00000F00003E0007
FC0007F80007FC00001E00000700000780000380000380F00380F00780F00700F81F007FFE003F
FC0007E00011197E9816>I<007C0000FC0000DC0001DC00039C00039C00071C000F1C000E1C00
1E1C003C1C00381C00781C00F01C00FFFFE0FFFFE0FFFFE0001C00001C00001C00001C00001C00
01FFC001FFC001FFC013197F9816>I<3FFE003FFE003FFE003800003800003800003800003800
003800003800003BF0003FFC003FFE003C0F00300700000780000380600380F00380F00780F00F
00F81F007FFE001FF80007E00011197E9816>I<00F80003FE000FFF001F0F003E0F003C0F0078
0600700000F00000F3F800EFFE00FFFE00F80F00F00780F00780E00380F00380F0038070038078
0780780F003C1F001FFE000FF80003E00011197E9816>I<E00000FFFF80FFFF80FFFF80E00F00
E01E00001C0000380000780000700000E00000E00001C00001C00001C000038000038000038000
038000070000070000070000070000070000070000070000111A7E9916>I<07F0001FFC003FFE
007C1F00F00780E00380E00380E003807007007C1F001FFC0007F0001FFC003C1E00700700F007
80E00380E00380E00380F007807007007C1F003FFE001FFC0007F00011197E9816>I<03E0000F
F8003FFC007C1E00780F00F00700E00700E00780E00780E00380F00780F00780780F803FFF803F
FB800FE380000780000700300F00780E00781E00787C007FF8003FE0000F800011197E9816>I<
70F8F8F870000000000000000070F8F8F8700512789116>I<387C7C7C38000000000000000038
7C7C7C3C1C3C38F8F0600618799116>I<000180000780001F80003E0000F80001F00007C0000F
80003E0000FC0000F00000FC00003E00000F800007C00001F00000F800003E00001F8000078000
018011157E9616>I<7FFF00FFFF80FFFF80000000000000000000000000000000FFFF80FFFF80
7FFF00110B7E9116>I<C00000F00000FC00003E00000F800007C00001F00000F800003E00001F
80000780001F80003E0000F80001F00007C0000F80003E0000FC0000F00000C0000011157E9616
>I<0FE03FF87FFCF01EF00EF00E601E007C00F801F003E003C003800380038003800300000000
000000000003000780078003000F197D9816>I<00F80003FE000FFF001F0F803E3F803C7F8078
FFC071E7C0F1C3C0E3C3C0E381C0E381C0E381C0E381C0E381C0E3C3C0F1C38071E78078FF003C
7E003E3C001F03C00FFFC003FF0000FC0012197E9816>I<00E00001F00001F00001B00001B000
03B80003B80003B800031800071C00071C00071C00071C00071C000E0E000E0E000FFE000FFE00
1FFF001C07001C07001C07007F1FC0FF1FE07F1FC013197F9816>I<7FF800FFFE007FFF001C0F
001C07801C03801C03801C03801C07801C07001FFF001FFE001FFE001C1F001C03801C03C01C01
C01C01C01C01C01C01C01C03C01C07807FFF80FFFF007FFC0012197F9816>I<01F18007FF800F
FF801F0F803C0780780780780380700380F00000E00000E00000E00000E00000E00000E00000E0
0000F000007003807803807803803C07801F0F000FFE0007FC0001F00011197E9816>I<7FF800
FFFE007FFF001C0F001C07801C03C01C01C01C01C01C01E01C00E01C00E01C00E01C00E01C00E0
1C00E01C00E01C00E01C01C01C01C01C03C01C07801C0F807FFF00FFFE007FF8001319809816>
I<7FFFC0FFFFC07FFFC01C01C01C01C01C01C01C01C01C00001C00001C1C001C1C001FFC001FFC
001FFC001C1C001C1C001C00001C00E01C00E01C00E01C00E01C00E07FFFE0FFFFE07FFFE01319
7F9816>I<FFFFE0FFFFE0FFFFE01C00E01C00E01C00E01C00E01C00001C00001C1C001C1C001F
FC001FFC001FFC001C1C001C1C001C00001C00001C00001C00001C00001C0000FF8000FFC000FF
800013197F9816>I<03E30007FF001FFF003E1F003C0F00780F00780700700700F00000E00000
E00000E00000E00000E03F80E07FC0E03F80F00700700700780F00780F003C0F003E1F001FFF00
07FF0003E70012197E9816>I<7F1FC0FFBFE07F1FC01C07001C07001C07001C07001C07001C07
001C07001FFF001FFF001FFF001C07001C07001C07001C07001C07001C07001C07001C07001C07
007F1FC0FFBFE07F1FC013197F9816>I<FFFEFFFEFFFE03800380038003800380038003800380
03800380038003800380038003800380038003800380FFFEFFFEFFFE0F197D9816>I<07FE07FF
07FE00380038003800380038003800380038003800380038003800380038003800386038F038F0
707FF07FE01F8010197D9816>I<7F0FE0FF8FF07F0FE01C07801C0F001C0E001C1C001C3C001C
78001CF0001CE0001DF0001FF0001FF8001F38001E1C001C1C001C0E001C0E001C07001C07001C
03807F07E0FF8FF07F07E01419809816>I<FFC000FFC000FFC0001C00001C00001C00001C0000
1C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00401C00E01C00E0
1C00E01C00E0FFFFE0FFFFE0FFFFE013197F9816>I<FC07E0FE0FE0FE0FE03A0B803B1B803B1B
803B1B803B1B803B1B803BBB8039B38039B38039B38039B38039F38038E38038E3803803803803
80380380380380380380FE0FE0FE0FE0FE0FE013197F9816>I<7E1FC0FF3FE07F1FC01D07001D
87001D87001D87001DC7001DC7001CC7001CC7001CE7001CE7001CE7001C67001C67001C77001C
77001C37001C37001C37001C17007F1F00FF9F007F0F0013197F9816>I<1FFC003FFE007FFF00
780F00F00780E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380
E00380E00380E00380F00780F00780780F007FFF003FFE001FFC0011197E9816>I<7FF800FFFE
007FFF001C0F801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F801FFF001FFE001FF8
001C00001C00001C00001C00001C00001C00001C00007F0000FF80007F000012197F9816>I<1F
FC003FFE007FFF00780F00F00780E00380E00380E00380E00380E00380E00380E00380E00380E0
0380E00380E00380E00380E00380E0E380E1E380F0F780787F007FFF003FFE001FFC00001C0000
1E00000E00000F00000700000700111F7E9816>I<7FE000FFF8007FFC001C1E001C0F001C0700
1C07001C07001C07001C0F001C1E001FFC001FF8001FFC001C1C001C0E001C0E001C0E001C0E00
1C0E201C0E701C0E707F07E0FF87E07F03C014197F9816>I<07E3001FFF007FFF00781F00F00F
00E00700E00700E00000F000007800007F80001FF00007FC0000FE00000F000007800003800003
80E00380E00380F00780F80F00FFFE00FFFC00C7F00011197E9816>I<7FFFE0FFFFE0FFFFE0E0
E0E0E0E0E0E0E0E0E0E0E000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00007FC000FFE0007FC0013197F9816>I<7F07F0FF8FF8
7F07F01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C0
1C01C01C01C01C01C01C01C00E03800E038007070007FF0003FE0000F8001519809816>I<FE0F
E0FF1FE0FE0FE03803801C07001C07001C07001C07000E0E000E0E000E0E000E0E00060C00071C
00071C00071C00071C0003180003B80003B80003B80001B00001F00001F00000E00013197F9816
>I<FC07E0FE0FE0FC07E07001C07001C07001C030018038038038038038038038E38039F38039
F38039B38019B30019B30019B30019B30019B30019B3001913001B1B000F1E000F1E000E0E0013
197F9816>I<7F1F807F3F807F1F800E1E000E1C00073C0007380003B80003F00001F00001E000
00E00001E00001F00003F00003B80007B800071C00071C000E0E000E0E001C07007F1FC0FF1FE0
7F1FC013197F9816>I<FE0FE0FF1FE0FE0FE01C07001C07000E0E000E0E00071C00071C00071C
0003B80003B80001F00001F00000E00000E00000E00000E00000E00000E00000E00000E00003F8
0007FC0003F80013197F9816>I<7FFF80FFFF80FFFF80E00700E00F00E01E00E01C00003C0000
780000700000F00001E00001C00003C0000780000700000F00001E03801C03803C038078038070
0380FFFF80FFFF80FFFF8011197E9816>I<FFF0FFF0FFF0E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000FFF0
FFF0FFF00C20789C16>I<C00000E00000E000007000007000003800003800001C00001C00000E
00000E000007000007000003800003800001C00001C00000E00000E00000700000700000380000
3800001C00001C00000E00000E0000070000070000038000038000018011207E9C16>I<FFF0FF
F0FFF0007000700070007000700070007000700070007000700070007000700070007000700070
00700070007000700070007000700070FFF0FFF0FFF00C207F9C16>I<FFFF80FFFF80FFFF8011
037E7E16>95 D<0C1E3C7870F0E0E0E0F0F87830070D789B16>I<1FE0007FF8007FFC00783C00
301E00000E00000E0003FE001FFE007E0E00F00E00E00E00E00E00F01E00F83E007FFFE03FE7E0
0F83E013127E9116>I<7E0000FE00007E00000E00000E00000E00000E00000E3E000EFF800FFF
C00F83E00F01E00E00F00E00F00E00700E00700E00700E00700E00F00F00E00F01E00F83C00FFF
C00EFF00063C001419809816>I<03F80FFE1FFE3C1E780C7000F000E000E000E000E000F00070
0778073E0F1FFE0FFC03F010127D9116>I<003F00007F00003F00000700000700000700000700
03C7000FF7003FFF003C1F00780F00F00700F00700E00700E00700E00700E00700F00700F00F00
781F007C3F003FFFE01FF7F007C7E014197F9816>I<03E00FF81FFC3C1E780E7007E007FFFFFF
FFFFFFE000E000700778073C0F1FFE0FFC03F010127D9116>I<001F00007F8000FF8001E78001
C30001C00001C0007FFF00FFFF00FFFF0001C00001C00001C00001C00001C00001C00001C00001
C00001C00001C00001C00001C0003FFE007FFF003FFE0011197F9816>I<03E3C00FFFE01FFFE0
1E3CC03C1E00380E00380E00380E003C1E001E3C001FFC001FF8003BE0003800003800001FFC00
1FFF003FFFC07803C0F001E0E000E0E000E0E000E0F001E07C07C03FFF800FFE0003F800131C7F
9116>I<7E0000FE00007E00000E00000E00000E00000E00000E3C000EFF000FFF800F87800F03
800F03800E03800E03800E03800E03800E03800E03800E03800E03800E03807FC7F0FFE7F87FC7
F01519809816>I<018003C003C0018000000000000000007FC07FC07FC001C001C001C001C001
C001C001C001C001C001C001C001C07FFFFFFF7FFF101A7D9916>I<0030007800780030000000
00000000001FF81FF81FF800380038003800380038003800380038003800380038003800380038
003800380038003800386070F0F0FFE07FC03F800D237E9916>I<7E0000FE00007E00000E0000
0E00000E00000E00000E7FE00E7FE00E7FE00E0F000E1E000E3C000E78000EF0000FF0000FF800
0FBC000F1E000E0E000E07000E07807F87F0FFCFF07F87F01419809816>I<FFC000FFC000FFC0
0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C00001C00001C00001C00001C00001C000FFFF80FFFF80FFFF8011197E9816>I<F9C380FF
EFC0FFFFE03E7CE03C78E03870E03870E03870E03870E03870E03870E03870E03870E03870E038
70E0FE7CF8FE7CF8FE3C781512809116>I<7E3C00FEFF007FFF800F87800F03800F03800E0380
0E03800E03800E03800E03800E03800E03800E03800E03807FC7F0FFE7F87FC7F01512809116>
I<03E0000FF8001FFC003C1E00780F00700700E00380E00380E00380E00380E00380F007807007
00780F003C1E001FFC000FF80003E00011127E9116>I<7E3E00FEFF807FFFC00F83E00F01E00E
00F00E00F00E00700E00700E00700E00700E00F00F00E00F01E00F83C00FFFC00EFF000E3C000E
00000E00000E00000E00000E00000E00007FC000FFE0007FC000141B809116>I<07C7001FF700
3FFF007C3F00781F00F00F00F00700E00700E00700E00700E00700F00700F00F00781F007C3F00
3FFF001FF70007C700000700000700000700000700000700000700003FE0007FF0003FE0141B7E
9116>I<FF0FC0FF3FE0FF7FE007F04007E00007C0000780000780000700000700000700000700
00070000070000070000FFFC00FFFC00FFFC0013127F9116>I<0FEC3FFC7FFCF03CE01CE01CF0
007F801FF007FC003EE00EE00EF00EF81EFFFCFFF8C7E00F127D9116>I<030000070000070000
0700000700007FFF00FFFF00FFFF00070000070000070000070000070000070000070000070100
07038007038007078007878003FF0003FE0000F80011177F9616>I<7E1F80FE3F807E1F800E03
800E03800E03800E03800E03800E03800E03800E03800E03800E03800E07800F0F800FFFF007FF
F803E3F01512809116>I<7F1FC0FF1FE07F1FC01C07001E0F000E0E000E0E000E0E00071C0007
1C00071C00071C0003B80003B80003B80001F00001F00000E00013127F9116>I<FF1FE0FFBFE0
FF1FE038038038038038038038038038E38019F30019F30019B3001DB7001DB7001DB7001DB700
0F1E000F1E000F1E0013127F9116>I<7F1FC07F3FC07F1FC00F1C00073C0003B80003F00001F0
0000E00001E00001F00003B800073C00071C000E0E007F1FC0FF3FE07F1FC013127F9116>I<7F
1FC0FF9FE07F1FC01C07000E07000E0E000E0E00070E00071C00071C00039C00039C0003980001
B80001B80000F00000F00000F00000E00000E00000E00001C00079C0007BC0007F80003F00003C
0000131B7F9116>I<3FFFC07FFFC07FFFC0700780700F00701E00003C0000780001F00003E000
0780000F00001E01C03C01C07801C0FFFFC0FFFFC0FFFFC012127F9116>I<001F80007F8001FF
8001E00001C00001C00001C00001C00001C00001C00001C00001C00001C00003C0007F8000FF00
00FF00007F800003C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001E0
0001FF80007F80001F8011207E9C16>I<E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0
E0E0E0E0E0E0E0E0E0E00320779C16>I<FC0000FF0000FFC00003C00001C00001C00001C00001
C00001C00001C00001C00001C00001C00001E00000FF00007F80007F8000FF0001E00001C00001
C00001C00001C00001C00001C00001C00001C00001C00003C000FFC000FF0000FC000011207E9C
16>I<1C303F78FFF8F7E061C00D057C9816>I E /Fs 60 123 df<0001FF0000001FFFC000007F
80F00000FC00F80001F801F80003F803FC0007F003FC0007F003FC0007F003FC0007F001F80007
F000F00007F000000007F000000007F000000007F0000000FFFFFFFC00FFFFFFFC00FFFFFFFC00
07F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC
0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001
FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC007FFF1FFFC07FFF1FFFC07FFF
1FFFC0222A7FA926>12 D<1C007F007F00FF80FFC0FFC07FC07FC01CC000C000C0018001800180
0300030006000C001800300020000A157BA913>39 D<1C007F007F00FF80FFC0FFC07FC07FC01C
C000C000C00180018001800300030006000C001800300020000A157B8813>44
D<FFFF80FFFF80FFFF80FFFF80FFFF80FFFF8011067F9017>I<1C003E007F00FF80FF80FF807F
003E001C0009097B8813>I<00000300000007800000078000000F8000000F0000000F0000001F
0000001E0000003E0000003C0000003C0000007C0000007800000078000000F8000000F0000001
F0000001E0000001E0000003E0000003C0000003C0000007C00000078000000F8000000F000000
0F0000001F0000001E0000003E0000003C0000003C0000007C0000007800000078000000F80000
00F0000001F0000001E0000001E0000003E0000003C0000003C0000007C00000078000000F8000
000F0000000F0000001F0000001E0000001E0000003E0000003C0000007C000000780000007800
0000F8000000F0000000F000000060000000193C7CAC22>I<003F800001FFF00007E0FC000FC0
7E001F803F001F803F003F001F803F001F807F001FC07F001FC07F001FC07F001FC0FF001FE0FF
001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0
FF001FE0FF001FE0FF001FE0FF001FE07F001FC07F001FC07F001FC07F001FC03F001F803F001F
801F803F001F803F000FC07E0007E0FC0001FFF000003F80001B277DA622>I<000E00001E0000
7E0007FE00FFFE00FFFE00F8FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000
FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000
FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE007FFFFE7FFFFE7FFFFE17277BA622>I<
00FF800003FFF0000FFFFC001F03FE003800FF007C007F80FE003FC0FF003FC0FF003FE0FF001F
E0FF001FE07E001FE03C003FE000003FE000003FC000003FC000007F8000007F000000FE000000
FC000001F8000003F0000003E00000078000000F0000001E0000003C00E0007000E000E000E001
C001C0038001C0070001C00FFFFFC01FFFFFC03FFFFFC07FFFFFC0FFFFFF80FFFFFF80FFFFFF80
1B277DA622>I<007F800003FFF00007FFFC000F81FE001F00FF003F80FF003F807F803F807F80
3F807F801F807F800F007F800000FF000000FF000000FE000001FC000001F8000007F00000FFC0
0000FFF0000001FC0000007E0000007F0000007F8000003FC000003FC000003FE000003FE03C00
3FE07E003FE0FF003FE0FF003FE0FF003FC0FF007FC07E007F807C007F003F01FE001FFFFC0007
FFF00000FF80001B277DA622>I<00000E0000001E0000003E0000007E000000FE000000FE0000
01FE000003FE0000077E00000E7E00000E7E00001C7E0000387E0000707E0000E07E0000E07E00
01C07E0003807E0007007E000E007E000E007E001C007E0038007E0070007E00E0007E00FFFFFF
F8FFFFFFF8FFFFFFF80000FE000000FE000000FE000000FE000000FE000000FE000000FE000000
FE00007FFFF8007FFFF8007FFFF81D277EA622>I<0C0003000F803F000FFFFE000FFFFC000FFF
F8000FFFF0000FFFE0000FFFC0000FFE00000E0000000E0000000E0000000E0000000E0000000E
0000000E7FC0000FFFF8000F80FC000E003E000C003F0000001F8000001FC000001FC000001FE0
00001FE018001FE07C001FE0FE001FE0FE001FE0FE001FE0FE001FC0FC001FC078003F8078003F
803C007F001F01FE000FFFF80003FFF00000FF80001B277DA622>I<0007F000003FFC0000FFFE
0001FC0F0003F01F8007E03F800FC03F801FC03F801F803F803F801F003F8000007F0000007F00
00007F000000FF000000FF0FC000FF3FF800FF707C00FFC03E00FFC03F00FF801F80FF801FC0FF
001FC0FF001FE0FF001FE0FF001FE07F001FE07F001FE07F001FE07F001FE03F001FE03F001FC0
1F801FC01F803F800FC03F0007E07E0003FFFC0000FFF000003FC0001B277DA622>I<38000000
3E0000003FFFFFF03FFFFFF03FFFFFF07FFFFFE07FFFFFC07FFFFF807FFFFF0070000E0070000E
0070001C00E0003800E0007000E000E0000000E0000001C000000380000007800000078000000F
0000000F0000001F0000001F0000003F0000003E0000003E0000007E0000007E0000007E000000
7E000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE0000007C0000
003800001C297CA822>I<003FC00001FFF00003FFFC0007C07E000F003F001E001F001E000F80
3E000F803E000F803F000F803F000F803FC00F003FF01F001FFC1E001FFE3C000FFFF80007FFE0
0003FFF80001FFFC0001FFFE0007FFFF000F0FFF801E03FFC03C01FFC07C007FE078001FE0F800
07E0F80007E0F80003E0F80003E0F80003E0F80003C07C0003C07C0007803F000F001FC03E000F
FFFC0003FFF800007FC0001B277DA622>I<007F800001FFF00007FFF8000FE0FC001F807E003F
803F007F003F007F001F80FF001F80FF001FC0FF001FC0FF001FC0FF001FE0FF001FE0FF001FE0
FF001FE07F001FE07F003FE03F003FE01F807FE00F807FE007C1DFE003FF9FE0007E1FE000001F
E000001FC000001FC000001FC000003F801F003F803F803F003F803F003F807E003F807C001F01
F8001E03F0000FFFE00007FF800001FE00001B277DA622>I<1C003E007F00FF80FF80FF807F00
3E001C000000000000000000000000000000000000001C003E007F00FF80FF80FF807F003E001C
00091B7B9A13>I<01FF000FFFE01E03F03801F87801FCFC01FEFE01FEFE01FEFE01FE7C01FE38
01FC0003F80007F00007C0000F80001F00001E00003C0000380000380000780000700000700000
700000700000700000700000000000000000000000000000000000000000700000F80001FC0003
FE0003FE0003FE0001FC0000F800007000172A7CA920>63 D<000003800000000007C000000000
07C0000000000FE0000000000FE0000000000FE0000000001FF0000000001FF0000000003FF800
0000003FF8000000003FF80000000073FC0000000073FC00000000F3FE00000000E1FE00000000
E1FE00000001C0FF00000001C0FF00000003C0FF80000003807F80000007807FC0000007003FC0
000007003FC000000E003FE000000E001FE000001E001FF000001C000FF000001FFFFFF000003F
FFFFF800003FFFFFF80000780007FC0000700003FC0000700003FC0000E00001FE0000E00001FE
0001E00001FF0001C00000FF0001C00000FF00FFFE001FFFFEFFFE001FFFFEFFFE001FFFFE2F29
7EA834>65 D<FFFFFFF80000FFFFFFFF8000FFFFFFFFC00003F8001FF00003F8000FF80003F800
07FC0003F80003FC0003F80003FC0003F80003FE0003F80001FE0003F80001FE0003F80001FE00
03F80003FE0003F80003FC0003F80003FC0003F80007F80003F8000FF00003F8001FE00003F800
FFC00003FFFFFE000003FFFFFFE00003F80007F00003F80003FC0003F80001FE0003F80001FE00
03F80000FF0003F80000FF0003F80000FF8003F80000FF8003F80000FF8003F80000FF8003F800
00FF8003F80000FF8003F80000FF0003F80001FF0003F80003FE0003F80007FC0003F8001FF800
FFFFFFFFF000FFFFFFFFC000FFFFFFFE000029297DA831>I<00003FF001800003FFFE0380000F
FFFF8780003FF007DF8000FF8001FF8001FE00007F8003FC00003F8007F000001F800FF000000F
801FE0000007801FE0000007803FC0000007803FC0000003807FC0000003807F80000003807F80
00000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF80000000
00FF8000000000FF8000000000FF80000000007F80000000007F80000000007FC0000003803FC0
000003803FC0000003801FE0000003801FE0000007000FF00000070007F000000E0003FC00001E
0001FE00003C0000FF8000F800003FF007E000000FFFFFC0000003FFFF000000003FF800002929
7CA832>I<FFFFFFF80000FFFFFFFF8000FFFFFFFFE00003FC001FF80003FC0007FC0003FC0001
FE0003FC0000FF0003FC00007F8003FC00003FC003FC00001FC003FC00001FE003FC00001FE003
FC00000FF003FC00000FF003FC00000FF003FC00000FF003FC00000FF803FC00000FF803FC0000
0FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803
FC00000FF803FC00000FF003FC00000FF003FC00000FF003FC00001FE003FC00001FE003FC0000
1FC003FC00003FC003FC00007F8003FC00007F0003FC0001FE0003FC0003FC0003FC001FF800FF
FFFFFFE000FFFFFFFF8000FFFFFFFC00002D297DA835>I<FFFFFFFFE0FFFFFFFFE0FFFFFFFFE0
03FC001FE003FC0007F003FC0001F003FC0001F003FC0000F003FC00007003FC00007003FC0000
7003FC01C07803FC01C03803FC01C03803FC01C03803FC03C00003FC03C00003FC0FC00003FFFF
C00003FFFFC00003FFFFC00003FC0FC00003FC03C00003FC03C00003FC01C00E03FC01C00E03FC
01C00E03FC01C01C03FC00001C03FC00001C03FC00001C03FC00003C03FC00003803FC00007803
FC0000F803FC0001F803FC0003F803FC001FF8FFFFFFFFF0FFFFFFFFF0FFFFFFFFF027297DA82D
>I<FFFFFFFFC0FFFFFFFFC0FFFFFFFFC003FC003FC003FC000FE003FC0003E003FC0001E003FC
0001E003FC0000E003FC0000E003FC0000E003FC0000F003FC03807003FC03807003FC03807003
FC03800003FC07800003FC07800003FC1F800003FFFF800003FFFF800003FFFF800003FC1F8000
03FC07800003FC07800003FC03800003FC03800003FC03800003FC03800003FC00000003FC0000
0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000FFFFFC
0000FFFFFC0000FFFFFC000024297DA82B>I<FFFFF01FFFFEFFFFF01FFFFEFFFFF01FFFFE03FC
00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F
8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC
00007F8003FC00007F8003FFFFFFFF8003FFFFFFFF8003FFFFFFFF8003FC00007F8003FC00007F
8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC
00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F
8003FC00007F8003FC00007F80FFFFF01FFFFEFFFFF01FFFFEFFFFF01FFFFE2F297DA836>72
D<FFFFFCFFFFFCFFFFFC01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE
0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE
0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00FFFF
FCFFFFFCFFFFFC16297EA81A>I<FFFE0000001FFFC0FFFE0000001FFFC0FFFF0000003FFFC003
FF0000003FF00003FF0000003FF00003BF80000077F00003BF80000077F000039FC00000E7F000
039FC00000E7F000038FE00001C7F000038FE00001C7F0000387F0000387F0000387F0000387F0
000387F0000387F0000383F8000707F0000383F8000707F0000381FC000E07F0000381FC000E07
F0000380FE001C07F0000380FE001C07F0000380FF003807F00003807F003807F00003807F0038
07F00003803F807007F00003803F807007F00003801FC0E007F00003801FC0E007F00003800FE1
C007F00003800FE1C007F00003800FE1C007F000038007F38007F000038007F38007F000038003
FF0007F000038003FF0007F000038001FE0007F000038001FE0007F000038000FC0007F0000380
00FC0007F000FFFE00FC01FFFFC0FFFE007801FFFFC0FFFE007801FFFFC03A297DA841>77
D<FFFC0000FFFEFFFE0000FFFEFFFF0000FFFE03FF8000038003FF8000038003BFC0000380039F
E0000380039FF0000380038FF80003800387F80003800383FC0003800381FE0003800381FF0003
800380FF80038003807FC0038003803FC0038003801FE0038003800FF0038003800FF803800380
07FC0380038003FC0380038001FE0380038000FF0380038000FF83800380007FC3800380003FE3
800380001FE3800380000FF38003800007FB8003800007FF8003800003FF8003800001FF800380
0000FF80038000007F80038000007F80038000003F80038000001F80038000000F80FFFE000007
80FFFE00000380FFFE000003802F297DA836>I<0000FFE000000007FFFC0000003FC07F800000
7F001FC00001FC0007F00003F80003F80007F00001FC000FF00001FE001FE00000FF001FE00000
FF003FC000007F803FC000007F807FC000007FC07F8000003FC07F8000003FC07F8000003FC0FF
8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF800000
3FE0FF8000003FE0FF8000003FE0FF8000003FE07F8000003FC07FC000007FC07FC000007FC03F
C000007F803FC000007F801FE00000FF001FE00000FF000FF00001FE0007F00001FC0003F80003
F80001FC0007F00000FF001FE000003FC07F8000000FFFFE00000000FFE000002B297CA834>I<
FFFFFFF800FFFFFFFF00FFFFFFFFC003FC003FE003FC000FF003FC0007F803FC0007FC03FC0003
FC03FC0003FE03FC0003FE03FC0003FE03FC0003FE03FC0003FE03FC0003FE03FC0003FE03FC00
03FC03FC0007FC03FC0007F803FC000FF003FC003FE003FFFFFF8003FFFFFE0003FC00000003FC
00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003
FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000FFFFF00000
FFFFF00000FFFFF0000027297DA82F>I<007F806003FFF0E007FFF9E00F807FE01F001FE03E00
07E07C0003E07C0001E0FC0001E0FC0001E0FC0000E0FE0000E0FE0000E0FF000000FFC000007F
FE00007FFFE0003FFFFC001FFFFE000FFFFF8007FFFFC003FFFFE000FFFFE00007FFF000007FF0
00000FF8000007F8000003F8600001F8E00001F8E00001F8E00001F8F00001F0F00001F0F80003
F0FC0003E0FF0007C0FFE01F80F3FFFF00E0FFFE00C01FF0001D297CA826>83
D<7FFFFFFFFFC07FFFFFFFFFC07FFFFFFFFFC07F803FC03FC07E003FC007C078003FC003C07800
3FC003C070003FC001C0F0003FC001E0F0003FC001E0E0003FC000E0E0003FC000E0E0003FC000
E0E0003FC000E0E0003FC000E000003FC0000000003FC0000000003FC0000000003FC000000000
3FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC000
0000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC000000000
3FC0000000003FC0000000003FC0000000003FC0000000003FC00000007FFFFFE000007FFFFFE0
00007FFFFFE0002B287EA730>I<FFFFF001FFFCFFFFF001FFFCFFFFF001FFFC03FC0000070003
FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000
070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003
FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000
070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003
FC0000070001FC00000E0001FE00000E0000FE00001C00007E00001C00007F00003800003FC000
F000000FF007E0000007FFFFC0000001FFFF000000001FF800002E297DA835>I<FFFFE07FFFF0
07FFF0FFFFE07FFFF007FFF0FFFFE07FFFF007FFF003FC0001FE00001C0003FC0001FE00001C00
01FE0001FF0000380001FE0000FF0000380001FF0000FF0000780000FF0000FF8000700000FF00
00FF8000700000FF8000FF8000F000007F8001FFC000E000007F8001FFC000E000003FC003FFE0
01C000003FC0039FE001C000003FE0039FE003C000001FE0070FF0038000001FE0070FF0038000
001FF00F0FF0078000000FF00E07F8070000000FF00E07F80700000007F81E07FC0E00000007F8
1C03FC0E00000007FC1C03FC1E00000003FC3801FE1C00000003FC3801FE1C00000001FE7801FF
3800000001FE7000FF3800000001FE7000FF3800000000FFF000FFF000000000FFE0007FF00000
0000FFE0007FF0000000007FC0003FE0000000007FC0003FE0000000003FC0003FC0000000003F
80001FC0000000003F80001FC0000000001F80001F80000000001F00000F80000000001F00000F
80000000000E00000700000044297FA847>87 D<FFFFF0003FFF80FFFFF0003FFF80FFFFF0003F
FF8003FF000001E00001FF000003C00000FF8000038000007FC000078000007FE0000F0000003F
E0000E0000001FF0001E0000001FF8003C0000000FF8003800000007FC007800000007FE00F000
000003FE00E000000001FF01E000000001FF83C000000000FF8380000000007FC780000000007F
EF00000000003FEE00000000001FFE00000000000FFC00000000000FF8000000000007F8000000
000007F8000000000007F8000000000007F8000000000007F8000000000007F8000000000007F8
000000000007F8000000000007F8000000000007F8000000000007F8000000000007F800000000
0007F8000000000007F80000000001FFFFE000000001FFFFE000000001FFFFE0000031297FA834
>89 D<01FF800007FFF0000F81F8001FC07E001FC07E001FC03F000F803F8007003F8000003F80
00003F8000003F80000FFF8000FFFF8007FC3F800FE03F803F803F803F003F807F003F80FE003F
80FE003F80FE003F80FE003F807E007F807F00DF803F839FFC0FFF0FFC01FC03FC1E1B7E9A21>
97 D<FFE0000000FFE0000000FFE00000000FE00000000FE00000000FE00000000FE00000000F
E00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE0000000
0FE1FE00000FE7FF80000FFE07E0000FF801F0000FF000F8000FE000FC000FE000FE000FE0007F
000FE0007F000FE0007F000FE0007F800FE0007F800FE0007F800FE0007F800FE0007F800FE000
7F800FE0007F800FE0007F000FE0007F000FE0007F000FE000FE000FE000FC000FF001F8000FF8
03F0000F9E07E0000F07FF80000E01FC0000212A7EA926>I<001FF80000FFFE0003F01F0007E0
3F800FC03F801F803F803F801F007F800E007F0000007F000000FF000000FF000000FF000000FF
000000FF000000FF000000FF0000007F0000007F0000007F8000003F8001C01F8001C00FC00380
07E0070003F01E0000FFFC00001FE0001A1B7E9A1F>I<00003FF80000003FF80000003FF80000
0003F800000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800001FE3F80000FFFBF80003F03FF80007E00FF8
000FC007F8001F8003F8003F8003F8007F0003F8007F0003F8007F0003F800FF0003F800FF0003
F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F8007F0003F8007F0003F8007F00
03F8003F8003F8001F8003F8000F8007F80007C00FF80003F03BFF8000FFF3FF80003FC3FF8021
2A7EA926>I<003FE00001FFF80003F07E0007C01F000F801F801F800F803F800FC07F000FC07F
0007C07F0007E0FF0007E0FF0007E0FFFFFFE0FFFFFFE0FF000000FF000000FF0000007F000000
7F0000007F0000003F8000E01F8000E00FC001C007E0038003F81F0000FFFE00001FF0001B1B7E
9A20>I<0007F0003FFC00FE3E01F87F03F87F03F07F07F07F07F03E07F00007F00007F00007F0
0007F00007F00007F000FFFFC0FFFFC0FFFFC007F00007F00007F00007F00007F00007F00007F0
0007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F0
0007F0007FFF807FFF807FFF80182A7EA915>I<00FF81F003FFE7F80FC1FE7C1F80FC7C1F007C
383F007E107F007F007F007F007F007F007F007F007F007F007F007F003F007E001F007C001F80
FC000FC1F8001FFFE00018FF800038000000380000003C0000003E0000003FFFF8001FFFFF001F
FFFF800FFFFFC007FFFFE01FFFFFF03E0007F07C0001F8F80000F8F80000F8F80000F8F80000F8
7C0001F03C0001E01F0007C00FC01F8003FFFE00007FF0001E287E9A22>I<FFE0000000FFE000
0000FFE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE0
0000000FE00000000FE00000000FE00000000FE00000000FE00000000FE07F00000FE1FFC0000F
E787E0000FEE03F0000FF803F0000FF803F8000FF003F8000FF003F8000FE003F8000FE003F800
0FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8
000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F800FFFE3FFF80FFFE3F
FF80FFFE3FFF80212A7DA926>I<07000F801FC03FE03FE03FE01FC00F80070000000000000000
00000000000000FFE0FFE0FFE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2B7DAA14>I<FFE00000FFE00000FFE0
00000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000F
E000000FE000000FE000000FE01FFC0FE01FFC0FE01FFC0FE007800FE00F000FE01E000FE03C00
0FE078000FE0E0000FE3C0000FE7C0000FEFE0000FFFE0000FFFF0000FF3F8000FE3F8000FC1FC
000FC0FE000FC07F000FC07F000FC03F800FC01FC00FC00FC00FC00FE0FFFC3FFEFFFC3FFEFFFC
3FFE1F2A7EA924>107 D<FFE0FFE0FFE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00F
E00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2A7DA914>I<FFC07F800FF000FFC1FFE03FFC00FF
C383F0707E000FC603F8C07F000FCC01F9803F000FD801FF003F800FF001FE003F800FF001FE00
3F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE0
01FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F
800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F80FFFE1F
FFC3FFF8FFFE1FFFC3FFF8FFFE1FFFC3FFF8351B7D9A3A>I<FFC07F0000FFC1FFC000FFC787E0
000FCE03F0000FD803F0000FD803F8000FF003F8000FF003F8000FE003F8000FE003F8000FE003
F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE0
03F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F800FFFE3FFF80FFFE3FFF80FF
FE3FFF80211B7D9A26>I<003FE00001FFFC0003F07E000FC01F801F800FC03F800FE03F0007E0
7F0007F07F0007F07F0007F0FF0007F8FF0007F8FF0007F8FF0007F8FF0007F8FF0007F8FF0007
F8FF0007F87F0007F07F0007F03F800FE03F800FE01F800FC00FC01F8007F07F0001FFFC00003F
E0001D1B7E9A22>I<FFE1FE0000FFE7FF8000FFFE07E0000FF803F0000FF001F8000FE000FC00
0FE000FE000FE000FF000FE0007F000FE0007F000FE0007F800FE0007F800FE0007F800FE0007F
800FE0007F800FE0007F800FE0007F800FE0007F000FE000FF000FE000FF000FE000FE000FE001
FC000FF001F8000FF803F0000FFE0FE0000FE7FF80000FE1FC00000FE00000000FE00000000FE0
0000000FE00000000FE00000000FE00000000FE00000000FE00000000FE0000000FFFE000000FF
FE000000FFFE00000021277E9A26>I<001FC0380000FFF0780003F838F80007E00DF8000FC007
F8001FC007F8003F8003F8007F8003F8007F8003F8007F0003F800FF0003F800FF0003F800FF00
03F800FF0003F800FF0003F800FF0003F800FF0003F8007F0003F8007F0003F8007F8003F8003F
8003F8001F8007F8000FC007F80007E01FF80003F07BF80000FFF3F800003FC3F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
0000003FFF8000003FFF8000003FFF8021277E9A24>I<FFC1F0FFC7FCFFCE3E0FD87F0FD87F0F
F07F0FF03E0FF01C0FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000F
E0000FE0000FE0000FE0000FE0000FE000FFFF00FFFF00FFFF00181B7E9A1C>I<03FE300FFFF0
1E03F03800F0700070F00070F00070F80070FC0000FFE0007FFE007FFF803FFFE01FFFF007FFF8
00FFF80003FC0000FC60007CE0003CF0003CF00038F80038FC0070FF01E0F7FFC0C1FF00161B7E
9A1B>I<00700000700000700000700000F00000F00000F00001F00003F00003F00007F0001FFF
F0FFFFF0FFFFF007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F0
0007F00007F00007F03807F03807F03807F03807F03807F03803F03803F87001F86000FFC0001F
8015267FA51B>I<FFE03FF800FFE03FF800FFE03FF8000FE003F8000FE003F8000FE003F8000F
E003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F800
0FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE007F8
0007E007F80007E00FF80003F03BFF8001FFF3FF80003FC3FF80211B7D9A26>I<FFFE03FF80FF
FE03FF80FFFE03FF8007F000700007F000700007F800F00003F800E00003FC01E00001FC01C000
01FC01C00000FE03800000FE038000007F070000007F070000007F8F0000003F8E0000003FDE00
00001FDC0000001FDC0000000FF80000000FF80000000FF800000007F000000007F000000003E0
00000003E000000001C00000211B7F9A24>I<FFFE7FFC0FFEFFFE7FFC0FFEFFFE7FFC0FFE0FE0
07E000E007F003F001C007F003F001C007F807F803C003F807F8038003F807F8038001FC0EFC07
0001FC0EFC070001FE1EFC0F0000FE1C7E0E0000FE1C7E0E0000FF383F1E00007F383F1C00007F
783F3C00003FF01FB800003FF01FB800003FF01FF800001FE00FF000001FE00FF000000FC007E0
00000FC007E000000FC007E00000078003C00000078003C0002F1B7F9A32>I<FFFC0FFF00FFFC
0FFF00FFFC0FFF0007F003C00003F807800001FC07800000FE0F000000FF1E0000007F3C000000
3FF80000001FF00000000FF00000000FF000000007F000000007F80000000FFC0000001FFE0000
001EFE0000003C7F000000783F800000F01FC00001E01FE00001C00FE00003C007F000FFF01FFF
80FFF01FFF80FFF01FFF80211B7F9A24>I<FFFE03FF80FFFE03FF80FFFE03FF8007F000700007
F000700007F800F00003F800E00003FC01E00001FC01C00001FC01C00000FE03800000FE038000
007F070000007F070000007F8F0000003F8E0000003FDE0000001FDC0000001FDC0000000FF800
00000FF80000000FF800000007F000000007F000000003E000000003E000000001C000000001C0
00000003800000000380000038078000007C07000000FE0F000000FE0E000000FE1E000000FE3C
0000007C780000003FE00000000FC000000021277F9A24>I<3FFFFF803FFFFF803F007F003C00
FE003801FE007803FC007803F8007007F800700FF000700FE000001FC000003FC000007F800000
7F000000FF000001FE038001FC038003F8038007F803800FF007800FE007801FE007003FC00F00
3F801F007F007F00FFFFFF00FFFFFF00191B7E9A1F>I E /Ft 1 59 df<1C003E007F00FF80FF
80FF807F003E001C000909798818>58 D E /Fu 18 121 df<0001FF8000000FFFF000003FFFFC
0000FF81FF0001FE007F8003FC003FC007F8001FE00FF8001FF00FF0000FF01FF0000FF81FF000
0FF83FF0000FFC3FE00007FC3FE00007FC7FE00007FE7FE00007FE7FE00007FE7FE00007FE7FE0
0007FEFFE00007FFFFE00007FFFFE00007FFFFE00007FFFFE00007FFFFE00007FFFFE00007FFFF
E00007FFFFE00007FFFFE00007FFFFE00007FFFFE00007FFFFE00007FFFFE00007FFFFE00007FF
FFE00007FFFFE00007FFFFE00007FFFFE00007FF7FE00007FE7FE00007FE7FE00007FE7FE00007
FE7FE00007FE3FE00007FC3FF0000FFC3FF0000FFC1FF0000FF81FF0000FF80FF0000FF00FF800
1FF007F8001FE003FC003FC001FE007F8000FF81FF00003FFFFC00000FFFF0000001FF80002839
7CB731>48 D<00001E000000003E00000000FE00000003FE0000003FFE0000FFFFFE0000FFFFFE
0000FFFFFE0000FFCFFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000F
FE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE000000
0FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000
000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE00
00000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE
0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE00007FFFFFFFC07FFF
FFFFC07FFFFFFFC07FFFFFFFC0223879B731>I<0007FE0000007FFFE00001FFFFF80003FFFFFE
0007F01FFF000F8007FF801F0001FFC03E0000FFE07F8000FFF07FC0007FF0FFE0007FF8FFF000
3FF8FFF0003FFCFFF0003FFCFFF0003FFCFFF0003FFC7FE0003FFC3FC0003FFC1F80003FFC0000
003FFC0000003FF80000007FF80000007FF00000007FF0000000FFE0000000FFC0000001FF8000
0001FF00000003FE00000007FC00000007F80000000FF00000001FC00000003F800000007F0000
0000FC00000001F800000001F0003C0003E0003C0007C0003C000F000078001E000078003C0000
7800780000F800F00000F801FFFFFFF803FFFFFFF007FFFFFFF00FFFFFFFF01FFFFFFFF03FFFFF
FFF07FFFFFFFF0FFFFFFFFF0FFFFFFFFE0FFFFFFFFE0FFFFFFFFE026387BB731>I<0003FF8000
001FFFF000007FFFFE0000FE03FF0001F000FF8003C000FFC00780007FE00FF0007FF00FF8007F
F01FFC007FF81FFE007FF81FFE007FF81FFE007FF81FFE007FF81FFE007FF80FFC007FF007F800
7FF003F0007FF0000000FFE0000000FFC0000001FF80000001FF00000003FE00000007FC000000
1FF000000FFFC000000FFF8000000FFFF800000003FE00000000FF800000007FE00000003FF000
00003FF80000003FFC0000001FFC0000001FFE0000001FFE0200001FFF1FC0001FFF3FE0001FFF
7FF0001FFF7FF0001FFFFFF8001FFFFFF8001FFFFFF8001FFEFFF8001FFEFFF0001FFE7FF0003F
FC7FE0003FFC3FC0003FF81F80007FF01FE000FFE007FC03FFC003FFFFFF0001FFFFFE00003FFF
F0000007FF800028397CB731>I<00000007C0000000000FC0000000000FC0000000001FC00000
00003FC0000000007FC000000000FFC000000000FFC000000001FFC000000003FFC000000007FF
C00000000FFFC00000000FFFC00000001EFFC00000003CFFC00000007CFFC0000000F8FFC00000
00F0FFC0000001E0FFC0000003C0FFC0000007C0FFC000000F80FFC000000F00FFC000001E00FF
C000003C00FFC000007C00FFC00000F800FFC00000F000FFC00001E000FFC00003C000FFC00007
C000FFC0000F8000FFC0000F0000FFC0001E0000FFC0003C0000FFC0007C0000FFC000F80000FF
C000FFFFFFFFFFC0FFFFFFFFFFC0FFFFFFFFFFC0FFFFFFFFFFC0000001FFC000000001FFC00000
0001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FF
C000000001FFC0000007FFFFFFC00007FFFFFFC00007FFFFFFC00007FFFFFFC02A377DB631>I<
00000001F80000000000000001F80000000000000003FC0000000000000003FC00000000000000
07FE0000000000000007FE0000000000000007FE000000000000000FFF000000000000000FFF00
0000000000001FFF800000000000001FFF800000000000001FFF800000000000003FFFC0000000
0000003FFFC00000000000007FFFE00000000000007DFFE00000000000007DFFE0000000000000
FDFFF0000000000000F8FFF0000000000001F8FFF8000000000001F07FF8000000000001F07FF8
000000000003F07FFC000000000003E03FFC000000000007E03FFE000000000007C01FFE000000
00000FC01FFF00000000000F801FFF00000000000F800FFF00000000001F800FFF80000000001F
0007FF80000000003F0007FFC0000000003E0003FFC0000000003E0003FFC0000000007E0003FF
E0000000007C0001FFE000000000FC0001FFF000000000F80000FFF000000000F80000FFF00000
0001FFFFFFFFF800000001FFFFFFFFF800000003FFFFFFFFFC00000003FFFFFFFFFC00000003E0
00003FFC00000007E000003FFE00000007C000001FFE0000000FC000001FFF0000000F8000000F
FF0000001F8000000FFF8000001F0000000FFF8000001F00000007FF8000003F00000007FFC000
003E00000003FFC000007E00000003FFE00000FF00000001FFE000FFFFFC0001FFFFFFF0FFFFFC
0001FFFFFFF0FFFFFC0001FFFFFFF0FFFFFC0001FFFFFFF0443B7DBA4B>65
D<FFFFFFFFFFC00000FFFFFFFFFFFC0000FFFFFFFFFFFF0000FFFFFFFFFFFFC000007FF00001FF
F000007FF000007FF800007FF000003FFC00007FF000001FFE00007FF000001FFE00007FF00000
0FFF00007FF000000FFF00007FF0000007FF80007FF0000007FF80007FF0000007FF80007FF000
0007FF80007FF0000007FF80007FF0000007FF80007FF0000007FF80007FF0000007FF00007FF0
00000FFF00007FF000000FFF00007FF000001FFE00007FF000001FFC00007FF000003FF800007F
F000007FF000007FF00001FFE000007FF0000FFF8000007FFFFFFFFE0000007FFFFFFFFE000000
7FFFFFFFFFC000007FF000007FF000007FF000001FFC00007FF000000FFE00007FF0000007FF00
007FF0000007FF80007FF0000003FFC0007FF0000003FFC0007FF0000001FFE0007FF0000001FF
E0007FF0000001FFF0007FF0000001FFF0007FF0000001FFF0007FF0000001FFF0007FF0000001
FFF0007FF0000001FFF0007FF0000001FFF0007FF0000001FFF0007FF0000001FFE0007FF00000
03FFE0007FF0000003FFC0007FF0000007FFC0007FF000000FFF80007FF000001FFF00007FF000
003FFE00007FF00001FFFC00FFFFFFFFFFFFF800FFFFFFFFFFFFE000FFFFFFFFFFFF8000FFFFFF
FFFFF800003C3B7CBA46>I<0000001FFF000030000001FFFFE000F000000FFFFFFC01F000007F
FFFFFE03F00001FFFE007F87F00003FFE0000FCFF0000FFF000003FFF0001FFC000001FFF0003F
F80000007FF0007FF00000003FF000FFC00000003FF001FFC00000001FF003FF800000000FF007
FF000000000FF00FFF0000000007F00FFE0000000007F01FFE0000000003F01FFE0000000003F0
3FFC0000000003F03FFC0000000001F03FFC0000000001F07FFC0000000001F07FF80000000001
F07FF80000000000007FF8000000000000FFF8000000000000FFF8000000000000FFF800000000
0000FFF8000000000000FFF8000000000000FFF8000000000000FFF8000000000000FFF8000000
000000FFF8000000000000FFF8000000000000FFF80000000000007FF80000000000007FF80000
000000007FF80000000000007FFC0000000000F03FFC0000000000F03FFC0000000000F03FFC00
00000000F01FFE0000000000F01FFE0000000001E00FFE0000000001E00FFF0000000001E007FF
0000000003C003FF8000000003C001FFC0000000078000FFE00000000F00007FF00000001F0000
3FF80000003E00001FFC0000007C00000FFF000001F8000003FFE00007F0000001FFFE003FC000
00007FFFFFFF000000000FFFFFFC0000000001FFFFF000000000001FFF0000003C3D7BBB47>I<
001FFF00000001FFFFF0000003FFFFFC000007F007FE00000FF801FF00001FFC00FF80001FFC00
7FC0001FFC007FE0001FFC003FE0000FF8003FF0000FF8003FF00007F0003FF00001C0003FF000
0000003FF0000000003FF0000000003FF0000000FFFFF000000FFFFFF000007FF83FF00001FF80
3FF00007FE003FF0000FF8003FF0001FF0003FF0003FE0003FF0007FE0003FF0007FE0003FF000
FFC0003FF000FFC0003FF000FFC0003FF000FFC0003FF000FFC0007FF0007FE0007FF0007FE000
DFF0003FF0039FF8001FFC0F0FFFF007FFFE0FFFF001FFFC07FFF0003FE000FFF02C267DA530>
97 D<000000003FC00000003FFFC00000003FFFC00000003FFFC00000003FFFC000000001FFC0
00000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC0000000
00FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC0
00000000FFC000000000FFC000000000FFC00000FFC0FFC0000FFFF8FFC0003FFFFEFFC000FFE0
3FFFC001FF000FFFC003FE0003FFC007FC0001FFC00FF80000FFC01FF00000FFC01FF00000FFC0
3FF00000FFC03FE00000FFC07FE00000FFC07FE00000FFC07FE00000FFC0FFE00000FFC0FFE000
00FFC0FFE00000FFC0FFE00000FFC0FFE00000FFC0FFE00000FFC0FFE00000FFC0FFE00000FFC0
FFE00000FFC07FE00000FFC07FE00000FFC07FE00000FFC03FF00000FFC03FF00000FFC01FF000
00FFC00FF80001FFC007F80003FFC003FC0007FFC001FE000FFFE000FFC07EFFFF003FFFFCFFFF
000FFFF0FFFF0001FF80FFFF303C7DBB37>100 D<0001FFC000000FFFF800003FFFFE0000FF80
FF0001FE003F8007FC001FC00FF8000FE00FF8000FF01FF00007F03FF00007F83FF00007F87FE0
0007F87FE00003FC7FE00003FC7FE00003FCFFE00003FCFFFFFFFFFCFFFFFFFFFCFFFFFFFFFCFF
E0000000FFE0000000FFE0000000FFE00000007FE00000007FE00000007FE00000003FE0000000
3FF000003C1FF000003C1FF000003C0FF800007807FC0000F803FE0001F001FF0007E000FFC03F
C0003FFFFF000007FFFC000000FFE00026267DA52D>I<00FF00000000FFFF00000000FFFF0000
0000FFFF00000000FFFF0000000007FF0000000003FF0000000003FF0000000003FF0000000003
FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000
000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003
FF007FC00003FF01FFF80003FF07FFFC0003FF0F03FE0003FF1C01FF0003FF3001FF8003FF6000
FF8003FFE000FFC003FFC000FFC003FF8000FFC003FF8000FFC003FF8000FFC003FF0000FFC003
FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000
FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003
FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000
FFC003FF0000FFC0FFFFFC3FFFFFFFFFFC3FFFFFFFFFFC3FFFFFFFFFFC3FFFFF303C7CBB37>
104 D<01F00007FC000FFE000FFE001FFF001FFF001FFF001FFF001FFF000FFE000FFE0007FC00
01F00000000000000000000000000000000000000000000000000000000000000000FF00FFFF00
FFFF00FFFF00FFFF0007FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF00
03FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF0003FF00
03FF0003FF0003FF0003FF0003FF0003FF00FFFFF8FFFFF8FFFFF8FFFFF8153D7DBC1B>I<00FE
007FC000FFFE01FFF800FFFE07FFFC00FFFE0F03FE00FFFE1C01FF0007FE3001FF8003FE6000FF
8003FEE000FFC003FEC000FFC003FF8000FFC003FF8000FFC003FF8000FFC003FF0000FFC003FF
0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FF
C003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF
0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FF
C003FF0000FFC0FFFFFC3FFFFFFFFFFC3FFFFFFFFFFC3FFFFFFFFFFC3FFFFF30267CA537>110
D<00FF01FF8000FFFF0FFFF000FFFF3FFFFC00FFFFFE03FF00FFFFF000FF8003FFC0007FC003FF
80003FE003FF00003FF003FF00001FF803FF00001FFC03FF00000FFC03FF00000FFE03FF00000F
FE03FF000007FE03FF000007FF03FF000007FF03FF000007FF03FF000007FF03FF000007FF03FF
000007FF03FF000007FF03FF000007FF03FF000007FF03FF000007FE03FF000007FE03FF00000F
FE03FF00000FFC03FF00000FFC03FF00001FF803FF00001FF803FF00003FF003FF80003FE003FF
C0007FC003FFF001FF8003FFFC07FF0003FF3FFFFC0003FF0FFFF00003FF01FF000003FF000000
0003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF
0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF00000000FFFFFC0000
00FFFFFC000000FFFFFC000000FFFFFC00000030377DA537>112 D<00FE03F000FFFE0FFE00FF
FE1FFF00FFFE3C3F80FFFE707FC007FE60FFE003FEE0FFE003FEC0FFE003FFC0FFE003FF807FC0
03FF807FC003FF803F8003FF800E0003FF00000003FF00000003FF00000003FF00000003FF0000
0003FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF00
000003FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF
000000FFFFFE0000FFFFFE0000FFFFFE0000FFFFFE000023267DA529>114
D<0007800000078000000780000007800000078000000F8000000F8000000F8000000F8000001F
8000001F8000003F8000003F8000007F800000FF800001FF800007FF80001FFFFFF0FFFFFFF0FF
FFFFF0FFFFFFF001FF800001FF800001FF800001FF800001FF800001FF800001FF800001FF8000
01FF800001FF800001FF800001FF800001FF800001FF800001FF800001FF800001FF800001FF80
0001FF800001FF803C01FF803C01FF803C01FF803C01FF803C01FF803C01FF803C01FF803C00FF
807800FFC078007FC070003FE0E0001FFFC00007FF800001FF001E377EB626>116
D<FFFFF007FFFCFFFFF007FFFCFFFFF007FFFCFFFFF007FFFC01FF8000FC0000FFC000F80000FF
E001F000007FF003E000003FF007C000001FF80FC000000FFC1F8000000FFE1F00000007FF3E00
000003FFFC00000001FFF800000000FFF0000000007FE0000000007FF0000000003FF800000000
1FF8000000001FFC000000003FFE000000007FFF00000000FBFF80000001F9FF80000003F0FFC0
000003E07FE0000007C07FF000000F803FF800001F001FFC00003E000FFC00007C0007FE0000FC
0003FF0001FC0003FF80FFFF801FFFFEFFFF801FFFFEFFFF801FFFFEFFFF801FFFFE2F267EA534
>120 D E /Fv 31 122 df<387C7C7E3A040404080810204080070E789F0D>39
D<3078F8787005057C840D>46 D<0001F808000E061800380138007000F801E0007803C0007007
800030078000300F0000301F0000301E0000303E0000203C0000007C0000007C0000007C000000
7C000000F8000000F8000000F8000000F8000000F80000007800004078000080780000803C0000
803C0001001C0002000E00020006000C000300100001C0E000003F00001D217B9F21>67
D<07FFFFF8007C0078003C0038003C001800780018007800080078000800780008007800080078
080800F0100000F0100000F0100000F0300000FFF00000F0700001E0200001E0200001E0200001
E0200001E0000801E0001003C0001003C0001003C0002003C0002003C0006003C000C0078001C0
078007C0FFFFFF801D1F7E9E1F>69 D<07FC01FFC0003E003E00003E001800003E001800004F00
1000004F001000004780100000478010000043C010000043C010000083C020000081E020000081
E020000080F020000080F020000080782000010078400001007C400001003C400001003C400001
001E400001001E400002000F800002000F800002000F8000020007800002000780000600038000
06000300000F00010000FFE0010000221F7E9E22>78 D<0003F800001E0E000038070000E00380
01C001C003C001E0078000E00F0000F00F0000F01E0000F01E0000F83E0000F83C0000F87C0000
F87C0000F87C0000F87C0000F8F80001F0F80001F0F80001F0F80001F0F80003E0780003E07800
03C0780007C07C0007803C000F003C001E001E001C000E0038000700F00003C3C00000FE00001D
217B9F23>I<0003F800001E0E000038070000F0038001E001C003C001E0078001E00F0000F00F
0000F01F0000F01E0000F83E0000F83C0000F87C0000F87C0000F87C0000F87C0000F8F80001F0
F80001F0F80001F0F80001F0F80003E0780003E0780003C0780007C0781E07803C210F003C409E
001E409C000E80B8000740F00003C1C04000FEC0400000C0400000C0800000E1800000FF800000
FF000000FF0000007E0000003C001D297B9F23>81 D<003F040060CC01803C03801C03001C0700
180600080E00080E00080E00080E00000F00000F80000FE00007FE0003FF8001FFC0007FE00007
E00001E00000E00000F00000F04000E04000E04000E04000E06000C0600180E00380F80300C60C
0081F80016217D9F19>83 D<3FFFFFF03C0780F03007803060078030400F0010400F0010C00F00
10800F0010800F0010800F0010001E0000001E0000001E0000001E0000001E0000001E0000003C
0000003C0000003C0000003C0000003C0000003C00000078000000780000007800000078000000
7800000078000000F0000000F800007FFFE0001C1F7A9E21>I<03FFC0FFC0007F007E00003E00
3800001E003000001E002000001F004000000F008000000F81000000078200000007C600000003
C400000003E800000001F000000001F000000000F000000000F800000000F8000000017C000000
023C000000043C0000000C1E000000081E000000101F000000200F000000400F800000C0078000
008007C000010003C000070003E0001F8007E000FFE01FFE00221F7F9E22>88
D<07F8000C0C001E06001E07001C0700000700000700000700007F0007C7001E07003C0E00780E
00F00E10F00E10F00E10F01E10F02E20784F401F878014147D9317>97 D<0700003F00000F0000
0700000700000E00000E00000E00000E00000E00000E00001C00001C7C001D87001E03801C01C0
1C01C03801C03801E03801E03801E03801E03801E07003C07003C0700380700780700700700E00
E81C00C4380083E00013207B9F19>I<0000700003F00000F00000700000700000E00000E00000
E00000E00000E00000E00001C000F9C00305C00E03C01C03C03801C0780380700380F00380F003
80F00380F00380E00700E00700E00700E00700E00700700F00301E00186F000F8FE014207C9F19
>100 D<00F800070E000E07001C0700380380780380700380F00380F00380FFFF80F00000E000
00E00000E00000E00000F001007002003004001C180007E00011147D9314>I<0007800018C000
31E00061E000E1C000C00001C00001C00001C00001C00001C0000380007FF80003800003800003
80000380000700000700000700000700000700000700000E00000E00000E00000E00000E00000E
00001C00001E0000FFC00013207E9F0E>I<00000E003E1100E1A301C1C20381E00780E00701E0
0F01E00F01E00F01E00703C007038007870004FC000800000800001800001C00000FFF000FFFC0
07FFE01800F0300030600030C00030C00030C000306000603000C01C070007FC00181F809417>
I<00E00007E00001E00000E00000E00001C00001C00001C00001C00001C00001C000038000038F
800390E003A0E003C0600380600780E00700E00700E00700E00700E00700E00E01C00E01C00E01
C00E01C00E01C00E01C01C03801E03C0FFCFF815207E9F19>I<01C003E003E003C00180000000
00000000000000000003801F800780038003800700070007000700070007000E000E000E000E00
0E000E001C001E00FF800B1F7F9E0C>I<00E007E001E000E000E001C001C001C001C001C001C0
0380038003800380038003800700070007000700070007000E000E000E000E000E000E001C001E
00FFC00B207F9F0C>108 D<0387C07C001F9861860007A072070003C034030003803803000780
780700070070070007007007000700700700070070070007007007000E00E00E000E00E00E000E
00E00E000E00E00E000E00E00E000E00E00E001C01C01C001E01E01E00FFCFFCFFC022147E9326
>I<038F801F90E007A0E003C0600380600780E00700E00700E00700E00700E00700E00E01C00E
01C00E01C00E01C00E01C00E01C01C03801E03C0FFCFF815147E9319>I<00FC000387000E0180
1C00C03800E03800E07000F0F000F0F000F0F000F0F000F0E001E0E001E0E001C0E003C0F00380
700700380E001C1C0007E00014147D9317>I<00E3E007EC3800F01C00E01E00E00E01C00E01C0
0F01C00F01C00F01C00F01C00F03801E03801E03801C03803C0380380380700740E00721C0071F
000700000700000700000E00000E00000E00000E00001E0000FFC000181D809319>I<038E001F
B38007C78003C7800383000780000700000700000700000700000700000E00000E00000E00000E
00000E00000E00001C00001E0000FFC00011147E9312>114 D<01F2060E080618061802380438
001E001FE00FF003F8003C401C400C400C600C6018E010D0608FC00F147E9312>I<0080010001
000100030007000F001E00FFF80E000E000E000E001C001C001C001C001C001C00380038203820
382038203840384018800F000D1C7C9B12>I<1C0380FC1F803C07801C03801C03803807003807
00380700380700380700380700700E00700E00700E00700E00701E00701E00703C00305E001F9F
C012147B9319>I<FF83F81E00E01C00C01C00800E00800E01000E02000E02000F040007040007
080007080007100003900003A00003E00003C00003800001800001000015147C9318>I<FF9FE1
FC3C0780701C0300601C0300401C0380401C0380800E0780800E0581000E0981000E09C2000E11
C2000731C4000721C4000760C8000740C8000780F0000780F0000300E00003006000020040001E
147C9321>I<1FF0FF03C07801C07001C04000E08000E180007300007600003C00003C00001C00
002E00004E000087000107000203800603800C01C03C03E0FF07FC18147F9318>I<0FF83F8001
E00E0001C00C0001C0080000E0080000E0100000E0200000E0200000F040000070400000708000
007080000071000000390000003A0000003E0000003C0000003800000018000000100000001000
0000200000002000000040000070C00000F0800000F1000000E20000007C000000191D809318>
I E /Fw 39 122 df<00000007FF800000000001FFFFF0000000000FFFFFFC000000003FFFFFFE
00000000FFFC00FF00000001FFC0003F80000007FF00007FC000000FFE0001FFC000001FFC0001
FFE000001FF80003FFE000003FF00003FFE000003FF00003FFE000007FE00003FFE000007FE000
03FFE000007FE00003FFE000007FE00003FFE000007FE00001FFC000007FE00000FF8000007FE0
00003E0000007FE00000000000007FE00000000000007FE00000000000007FE00000000000007F
E00000000000007FE00000000000007FE0003FFFF000FFFFFFFFFFFFF000FFFFFFFFFFFFF000FF
FFFFFFFFFFF000FFFFFFFFFFFFF000FFFFFFFFFFFFF000007FF00000FFF000007FF000007FF000
007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF0
00007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007F
F000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF00000
7FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000
007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF0
00007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007F
F000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF0003F
FFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE0
3B487EC742>12 D<0000000003E000000000000000000007F000000000000000000007F0000000
0000000000000FF80000000000000000000FF80000000000000000000FF8000000000000000000
1FFC0000000000000000001FFC0000000000000000003FFE0000000000000000003FFE00000000
00000000007FFF0000000000000000007FFF0000000000000000007FFF000000000000000000FF
FF800000000000000000FFFF800000000000000001FFFFC00000000000000001FFFFC000000000
00000001FFFFC00000000000000003FFFFE00000000000000003EFFFE00000000000000007EFFF
F00000000000000007CFFFF00000000000000007C7FFF0000000000000000FC7FFF80000000000
00000F83FFF8000000000000001F83FFFC000000000000001F03FFFC000000000000001F01FFFC
000000000000003F01FFFE000000000000003E00FFFE000000000000007E00FFFF000000000000
007C007FFF00000000000000FC007FFF80000000000000F8007FFF80000000000000F8003FFF80
000000000001F8003FFFC0000000000001F0001FFFC0000000000003F0001FFFE0000000000003
E0001FFFE0000000000003E0000FFFE0000000000007E0000FFFF0000000000007C00007FFF000
000000000FC00007FFF800000000000F800007FFF800000000000F800003FFF800000000001F80
0003FFFC00000000001F000001FFFC00000000003FFFFFFFFFFE00000000003FFFFFFFFFFE0000
0000007FFFFFFFFFFF00000000007FFFFFFFFFFF00000000007FFFFFFFFFFF0000000000FC0000
007FFF8000000000F80000003FFF8000000001F80000003FFFC000000001F00000003FFFC00000
0001F00000001FFFC000000003F00000001FFFE000000003E00000000FFFE000000007E0000000
0FFFF000000007C00000000FFFF000000007C000000007FFF00000000FC000000007FFF8000000
0F8000000003FFF80000001F8000000003FFFC0000001F0000000003FFFC0000007FC000000001
FFFC0000FFFFFFC00007FFFFFFFF80FFFFFFC00007FFFFFFFF80FFFFFFC00007FFFFFFFF80FFFF
FFC00007FFFFFFFF80FFFFFFC00007FFFFFFFF8051487CC75A>65 D<FFFFFFFFFFFFE00000FFFF
FFFFFFFFFE0000FFFFFFFFFFFFFFC000FFFFFFFFFFFFFFF000FFFFFFFFFFFFFFF800001FFF8000
01FFFE00001FFF8000007FFF00001FFF8000003FFF80001FFF8000001FFFC0001FFF8000000FFF
C0001FFF80000007FFE0001FFF80000007FFF0001FFF80000007FFF0001FFF80000003FFF0001F
FF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF8000
0003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF80000003FF
F0001FFF80000007FFF0001FFF80000007FFE0001FFF8000000FFFE0001FFF8000000FFFC0001F
FF8000001FFF80001FFF8000003FFF00001FFF8000007FFE00001FFF800001FFFC00001FFF8000
07FFF000001FFFFFFFFFFFC000001FFFFFFFFFFE0000001FFFFFFFFFFF8000001FFFFFFFFFFFF0
00001FFF800000FFFC00001FFF8000003FFF00001FFF8000000FFFC0001FFF80000007FFE0001F
FF80000003FFF0001FFF80000003FFF8001FFF80000001FFF8001FFF80000001FFFC001FFF8000
0000FFFC001FFF80000000FFFE001FFF80000000FFFE001FFF80000000FFFE001FFF80000000FF
FF001FFF800000007FFF001FFF800000007FFF001FFF800000007FFF001FFF800000007FFF001F
FF80000000FFFF001FFF80000000FFFF001FFF80000000FFFF001FFF80000000FFFE001FFF8000
0000FFFE001FFF80000001FFFE001FFF80000001FFFC001FFF80000003FFFC001FFF80000007FF
F8001FFF80000007FFF0001FFF8000001FFFE0001FFF8000003FFFE0001FFF800001FFFF80FFFF
FFFFFFFFFFFF00FFFFFFFFFFFFFFFC00FFFFFFFFFFFFFFF000FFFFFFFFFFFFFFC000FFFFFFFFFF
FFF8000048477CC654>I<000000003FFE00000E0000000FFFFFC0001E0000007FFFFFF8003E00
0003FFFFFFFE00FE00000FFFFFFFFF81FE00003FFFF800FFC3FE0000FFFF80000FF7FE0001FFFC
000003FFFE0007FFF0000001FFFE000FFFC00000007FFE001FFF800000003FFE003FFF00000000
1FFE007FFE000000000FFE00FFFC0000000007FE01FFF80000000007FE03FFF00000000003FE03
FFF00000000001FE07FFE00000000001FE07FFE00000000000FE0FFFC00000000000FE0FFFC000
000000007E1FFFC000000000007E1FFF8000000000007E3FFF8000000000007E3FFF8000000000
003E3FFF8000000000003E7FFF8000000000003E7FFF0000000000003E7FFF000000000000007F
FF00000000000000FFFF00000000000000FFFF00000000000000FFFF00000000000000FFFF0000
0000000000FFFF00000000000000FFFF00000000000000FFFF00000000000000FFFF0000000000
0000FFFF00000000000000FFFF00000000000000FFFF00000000000000FFFF00000000000000FF
FF000000000000007FFF000000000000007FFF000000000000007FFF000000000000007FFF8000
000000003E3FFF8000000000003E3FFF8000000000003E3FFF8000000000003E1FFF8000000000
003E1FFFC000000000003E0FFFC000000000007C0FFFC000000000007C07FFE000000000007C07
FFE00000000000F803FFF00000000000F803FFF00000000001F801FFF80000000001F000FFFC00
00000003E0007FFE0000000007E0003FFF000000000FC0001FFF800000001F80000FFFC0000000
3F000007FFF0000000FE000001FFFC000001FC000000FFFF80000FF80000003FFFF8007FF00000
000FFFFFFFFFC000000003FFFFFFFF00000000007FFFFFFC00000000000FFFFFE0000000000000
3FFE000000474979C756>I<FFFFFFFFFFFFC0000000FFFFFFFFFFFFFE000000FFFFFFFFFFFFFF
C00000FFFFFFFFFFFFFFF00000FFFFFFFFFFFFFFFC0000001FFF800007FFFF0000001FFF800000
7FFF8000001FFF8000000FFFE000001FFF80000007FFF000001FFF80000001FFF800001FFF8000
0000FFFC00001FFF800000007FFE00001FFF800000003FFF00001FFF800000001FFF00001FFF80
0000000FFF80001FFF800000000FFFC0001FFF8000000007FFC0001FFF8000000007FFE0001FFF
8000000003FFE0001FFF8000000003FFF0001FFF8000000003FFF0001FFF8000000003FFF8001F
FF8000000001FFF8001FFF8000000001FFF8001FFF8000000001FFFC001FFF8000000001FFFC00
1FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001FFFE
001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000000000FF
FE001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000000000
FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF80000000
00FFFE001FFF8000000001FFFE001FFF8000000001FFFC001FFF8000000001FFFC001FFF800000
0001FFFC001FFF8000000001FFFC001FFF8000000001FFF8001FFF8000000001FFF8001FFF8000
000001FFF8001FFF8000000003FFF0001FFF8000000003FFF0001FFF8000000003FFF0001FFF80
00000007FFE0001FFF8000000007FFE0001FFF800000000FFFC0001FFF800000000FFF80001FFF
800000001FFF80001FFF800000003FFF00001FFF800000003FFE00001FFF800000007FFC00001F
FF80000001FFF800001FFF80000003FFF000001FFF8000000FFFE000001FFF8000007FFFC00000
1FFF800003FFFF0000FFFFFFFFFFFFFFFE0000FFFFFFFFFFFFFFF80000FFFFFFFFFFFFFFC00000
FFFFFFFFFFFFFE000000FFFFFFFFFFFFC00000004F477CC65B>I<000000003FFE00000E000000
000FFFFFC0001E000000007FFFFFF8003E00000003FFFFFFFE00FE0000000FFFFFFFFF81FE0000
003FFFF800FFC3FE000000FFFF80000FF7FE000001FFFC000003FFFE000007FFF0000001FFFE00
000FFFC00000007FFE00001FFF800000003FFE00003FFF000000001FFE00007FFE000000000FFE
0000FFFC0000000007FE0001FFF80000000007FE0003FFF00000000003FE0003FFF00000000001
FE0007FFE00000000001FE0007FFE00000000000FE000FFFC00000000000FE000FFFC000000000
007E001FFFC000000000007E001FFF8000000000007E003FFF8000000000007E003FFF80000000
00003E003FFF8000000000003E007FFF8000000000003E007FFF0000000000003E007FFF000000
00000000007FFF0000000000000000FFFF0000000000000000FFFF0000000000000000FFFF0000
000000000000FFFF0000000000000000FFFF0000000000000000FFFF0000000000000000FFFF00
00000000000000FFFF0000000000000000FFFF0000000000000000FFFF0000000000000000FFFF
0000000000000000FFFF0000000000000000FFFF0000007FFFFFFFFE7FFF0000007FFFFFFFFE7F
FF0000007FFFFFFFFE7FFF8000007FFFFFFFFE7FFF8000007FFFFFFFFE3FFF8000000000FFFE00
3FFF8000000000FFFE003FFF8000000000FFFE001FFF8000000000FFFE001FFFC000000000FFFE
000FFFC000000000FFFE000FFFC000000000FFFE0007FFE000000000FFFE0007FFE000000000FF
FE0003FFF000000000FFFE0003FFF800000000FFFE0001FFF800000000FFFE0000FFFC00000000
FFFE00007FFE00000000FFFE00003FFF00000000FFFE00001FFF80000000FFFE00000FFFE00000
01FFFE000007FFF0000003FFFE000001FFFC000007FFFE000000FFFF80001FFFFE0000003FFFFC
00FFC7FE0000000FFFFFFFFF83FE00000003FFFFFFFE00FE000000007FFFFFF8003E000000000F
FFFFE0000E00000000003FFE000000004F4979C75D>71 D<FFFFFFFFF801FFFFFFFFF0FFFFFFFF
F801FFFFFFFFF0FFFFFFFFF801FFFFFFFFF0FFFFFFFFF801FFFFFFFFF0FFFFFFFFF801FFFFFFFF
F0001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC000
00003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000
001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000
003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF800000
1FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC0000000
3FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001F
FFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003F
FF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFFFFFFFFFFFFF8000001FFF
FFFFFFFFFFFF8000001FFFFFFFFFFFFFFF8000001FFFFFFFFFFFFFFF8000001FFFFFFFFFFFFFFF
8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC0
0000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF80
00001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC000
00003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000
001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000
003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF800000
1FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC0000000
3FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001FFFC00000003FFF8000001F
FFC00000003FFF8000FFFFFFFFF801FFFFFFFFF0FFFFFFFFF801FFFFFFFFF0FFFFFFFFF801FFFF
FFFFF0FFFFFFFFF801FFFFFFFFF0FFFFFFFFF801FFFFFFFFF054477CC65D>I<FFFFFFFFFF0000
00FFFFFFFFFF000000FFFFFFFFFF000000FFFFFFFFFF000000FFFFFFFFFF000000001FFFC00000
0000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000
000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC0
00000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFF
C000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001F
FFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC00000000000
1FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000
001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC0000000
00001FFFC000000000001FFFC000000000001FFFC000000000001FFFC0000000F8001FFFC00000
00F8001FFFC0000000F8001FFFC0000000F8001FFFC0000001F0001FFFC0000001F0001FFFC000
0001F0001FFFC0000001F0001FFFC0000001F0001FFFC0000003F0001FFFC0000003F0001FFFC0
000003F0001FFFC0000007F0001FFFC0000007F0001FFFC000000FE0001FFFC000001FE0001FFF
C000001FE0001FFFC000003FE0001FFFC000007FE0001FFFC00000FFE0001FFFC00003FFE0001F
FFC0000FFFE0001FFFC0007FFFE0FFFFFFFFFFFFFFC0FFFFFFFFFFFFFFC0FFFFFFFFFFFFFFC0FF
FFFFFFFFFFFFC0FFFFFFFFFFFFFFC03D477CC647>76 D<FFFFFFE0000000000003FFFFFFFFFFFF
F0000000000007FFFFFFFFFFFFF0000000000007FFFFFFFFFFFFF800000000000FFFFFFFFFFFFF
F800000000000FFFFFFF001FFFF800000000000FFFF800001FFFFC00000000001EFFF800001FFF
FC00000000001EFFF800001FBFFE00000000003CFFF800001FBFFE00000000003CFFF800001F9F
FF000000000078FFF800001F9FFF000000000078FFF800001F8FFF8000000000F0FFF800001F8F
FF8000000000F0FFF800001F87FFC000000001E0FFF800001F87FFC000000001E0FFF800001F87
FFC000000001E0FFF800001F83FFE000000003C0FFF800001F83FFE000000003C0FFF800001F81
FFF00000000780FFF800001F81FFF00000000780FFF800001F80FFF80000000F00FFF800001F80
FFF80000000F00FFF800001F807FFC0000001E00FFF800001F807FFC0000001E00FFF800001F80
7FFC0000001E00FFF800001F803FFE0000003C00FFF800001F803FFE0000003C00FFF800001F80
1FFF0000007800FFF800001F801FFF0000007800FFF800001F800FFF800000F000FFF800001F80
0FFF800000F000FFF800001F8007FFC00001E000FFF800001F8007FFC00001E000FFF800001F80
03FFE00003C000FFF800001F8003FFE00003C000FFF800001F8003FFE00003C000FFF800001F80
01FFF000078000FFF800001F8001FFF000078000FFF800001F8000FFF8000F0000FFF800001F80
00FFF8000F0000FFF800001F80007FFC001E0000FFF800001F80007FFC001E0000FFF800001F80
003FFE003C0000FFF800001F80003FFE003C0000FFF800001F80001FFF00780000FFF800001F80
001FFF00780000FFF800001F80001FFF00780000FFF800001F80000FFF80F00000FFF800001F80
000FFF80F00000FFF800001F800007FFC1E00000FFF800001F800007FFC1E00000FFF800001F80
0003FFE3C00000FFF800001F800003FFE3C00000FFF800001F800001FFF7800000FFF800001F80
0001FFF7800000FFF800001F800001FFF7800000FFF800001F800000FFFF000000FFF800001F80
0000FFFF000000FFF800001F8000007FFE000000FFF800001F8000007FFE000000FFF800001F80
00003FFC000000FFF800001F8000003FFC000000FFF800001F8000001FF8000000FFF800001F80
00001FF8000000FFF800007FE000000FF0000000FFF800FFFFFFF0000FF00007FFFFFFFFFFFFFF
F0000FF00007FFFFFFFFFFFFFFF00007E00007FFFFFFFFFFFFFFF00007E00007FFFFFFFFFFFFFF
F00003C00007FFFFFFFF68477CC671>I<FFFFFFC0000000FFFFFFF0FFFFFFE0000000FFFFFFF0
FFFFFFF0000000FFFFFFF0FFFFFFF8000000FFFFFFF0FFFFFFFC000000FFFFFFF0001FFFFC0000
00007FE000001FFFFE000000001F8000001FFFFF000000001F8000001FFFFF800000001F800000
1FFFFFC00000001F8000001FBFFFE00000001F8000001F9FFFE00000001F8000001F9FFFF00000
001F8000001F8FFFF80000001F8000001F87FFFC0000001F8000001F83FFFE0000001F8000001F
81FFFF0000001F8000001F80FFFF0000001F8000001F80FFFF8000001F8000001F807FFFC00000
1F8000001F803FFFE000001F8000001F801FFFF000001F8000001F800FFFF800001F8000001F80
07FFF800001F8000001F8007FFFC00001F8000001F8003FFFE00001F8000001F8001FFFF00001F
8000001F8000FFFF80001F8000001F80007FFFC0001F8000001F80003FFFC0001F8000001F8000
3FFFE0001F8000001F80001FFFF0001F8000001F80000FFFF8001F8000001F800007FFFC001F80
00001F800003FFFE001F8000001F800001FFFF001F8000001F800001FFFF001F8000001F800000
FFFF801F8000001F8000007FFFC01F8000001F8000003FFFE01F8000001F8000001FFFF01F8000
001F8000000FFFF81F8000001F8000000FFFF81F8000001F80000007FFFC1F8000001F80000003
FFFE1F8000001F80000001FFFF1F8000001F80000000FFFF9F8000001F800000007FFFDF800000
1F800000007FFFDF8000001F800000003FFFFF8000001F800000001FFFFF8000001F800000000F
FFFF8000001F8000000007FFFF8000001F8000000003FFFF8000001F8000000003FFFF8000001F
8000000001FFFF8000001F8000000000FFFF8000001F80000000007FFF8000001F80000000003F
FF8000001F80000000001FFF8000001F80000000001FFF8000001F80000000000FFF8000001F80
0000000007FF8000001F800000000003FF8000001F800000000001FF8000007FE00000000000FF
8000FFFFFFF000000000FF8000FFFFFFF0000000007F8000FFFFFFF0000000003F8000FFFFFFF0
000000001F8000FFFFFFF0000000000F000054477CC65D>I<FFFFFFFFFFFF800000FFFFFFFFFF
FFFC0000FFFFFFFFFFFFFF0000FFFFFFFFFFFFFFC000FFFFFFFFFFFFFFF000001FFF80000FFFFC
00001FFF800001FFFE00001FFF8000007FFF00001FFF8000003FFF80001FFF8000001FFFC0001F
FF8000000FFFC0001FFF8000000FFFE0001FFF8000000FFFE0001FFF80000007FFF0001FFF8000
0007FFF0001FFF80000007FFF0001FFF80000007FFF8001FFF80000007FFF8001FFF80000007FF
F8001FFF80000007FFF8001FFF80000007FFF8001FFF80000007FFF8001FFF80000007FFF8001F
FF80000007FFF8001FFF80000007FFF0001FFF80000007FFF0001FFF80000007FFF0001FFF8000
000FFFE0001FFF8000000FFFE0001FFF8000000FFFC0001FFF8000001FFF80001FFF8000003FFF
80001FFF8000007FFF00001FFF800001FFFE00001FFF80000FFFF800001FFFFFFFFFFFF000001F
FFFFFFFFFFC000001FFFFFFFFFFE0000001FFFFFFFFFF00000001FFFC00000000000001FFFC000
00000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000000000
00001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001F
FFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000
00000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000000000
00001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001F
FFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000FFFFFFFFF8
00000000FFFFFFFFF800000000FFFFFFFFF800000000FFFFFFFFF800000000FFFFFFFFF8000000
0045477CC651>80 D<00007FF00007000007FFFF000F00001FFFFFC01F00007FFFFFF03F0000FF
FFFFFC7F0003FFC00FFEFF0007FE0000FFFF0007FC00003FFF000FF000001FFF001FF0000007FF
001FE0000003FF003FE0000001FF003FC0000001FF007FC0000000FF007FC00000007F007FC000
00007F00FFC00000003F00FFC00000003F00FFC00000003F00FFE00000003F00FFE00000001F00
FFF00000001F00FFF80000001F00FFFC0000001F00FFFF00000000007FFFC0000000007FFFFE00
0000007FFFFFE00000003FFFFFFF0000003FFFFFFFF000001FFFFFFFFC00001FFFFFFFFF00000F
FFFFFFFFC00007FFFFFFFFE00007FFFFFFFFF00003FFFFFFFFF80000FFFFFFFFFC00007FFFFFFF
FE00003FFFFFFFFE00000FFFFFFFFF000001FFFFFFFF0000003FFFFFFF80000001FFFFFF800000
000FFFFFC000000000FFFFC0000000001FFFC0000000000FFFE00000000007FFE00000000003FF
E07800000001FFE0F800000000FFE0F800000000FFE0F8000000007FE0F8000000007FE0F80000
00007FE0FC000000007FE0FC000000007FC0FC000000007FC0FE000000007FC0FE000000007F80
FF00000000FF80FF80000000FF80FFC0000000FF00FFE0000001FE00FFF8000003FE00FFFE0000
07FC00FFFF80000FF800FFFFFC007FF000FE3FFFFFFFE000FC0FFFFFFF8000F803FFFFFF0000F0
007FFFF80000E00003FFC00000334979C742>83 D<3FFFFFFFFFFFFFFFFF003FFFFFFFFFFFFFFF
FF003FFFFFFFFFFFFFFFFF003FFFFFFFFFFFFFFFFF003FFFFFFFFFFFFFFFFF003FFF0003FFF800
3FFF007FF80003FFF80007FF807FE00003FFF80001FF807FC00003FFF80000FF807F800003FFF8
00007F807F000003FFF800003F807F000003FFF800003F807E000003FFF800001F807E000003FF
F800001F807E000003FFF800000F807C000003FFF800000F807C000003FFF800000F807C000003
FFF800000F807C000003FFF800000F80FC000003FFF800000FC0F8000003FFF8000007C0F80000
03FFF8000007C0F8000003FFF8000007C0F8000003FFF8000007C0F8000003FFF8000007C00000
0003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF80000000000
000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF800000000
00000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF8000000
0000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF80000
000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF800
00000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF8
0000000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FF
F80000000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003
FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF800000000000000
03FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF8000000000000
0003FFF8000000000003FFFFFFFFFFF800000003FFFFFFFFFFF800000003FFFFFFFFFFF8000000
03FFFFFFFFFFF800000003FFFFFFFFFFF800004A467CC553>I<FFFFFFFFF80001FFFFFFC0FFFF
FFFFF80001FFFFFFC0FFFFFFFFF80001FFFFFFC0FFFFFFFFF80001FFFFFFC0FFFFFFFFF80001FF
FFFFC0001FFFC000000000FF8000001FFFC0000000003E0000001FFFC0000000003E0000001FFF
C0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E
0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0
000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E00
00001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC000
0000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000
001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC00000
00003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E000000
1FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000
003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001F
FFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC000000000
3E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFF
C0000000003E0000001FFFC0000000003E0000001FFFC0000000003E0000001FFFC0000000003E
0000001FFFC0000000003E0000000FFFC0000000007E0000000FFFC0000000007C0000000FFFE0
000000007C0000000FFFE000000000FC00000007FFE000000000F800000007FFE000000001F800
000003FFF000000001F800000001FFF000000003F000000001FFF800000007E000000000FFF800
000007E0000000007FFC0000001FC0000000003FFE0000003F80000000001FFF800000FF000000
00000FFFE00007FE000000000003FFFE007FFC000000000001FFFFFFFFF00000000000007FFFFF
FFE00000000000000FFFFFFF8000000000000001FFFFFC00000000000000000FFFC00000000052
487CC65B>I<FFFFFFFFC03FFFFFFFF0001FFFFFF0FFFFFFFFC03FFFFFFFF0001FFFFFF0FFFFFF
FFC03FFFFFFFF0001FFFFFF0FFFFFFFFC03FFFFFFFF0001FFFFFF0FFFFFFFFC03FFFFFFFF0001F
FFFFF0007FFF0000001FFFE00000000FF800007FFF0000000FFFE000000003E000007FFF800000
0FFFE000000007E000003FFF8000000FFFF000000007C000003FFFC0000007FFF000000007C000
003FFFC0000007FFF80000000FC000001FFFC0000003FFF80000000F8000001FFFE0000003FFF8
0000001F8000000FFFE0000003FFFC0000001F0000000FFFE0000001FFFC0000001F0000000FFF
F0000001FFFE0000003F00000007FFF0000001FFFE0000003E00000007FFF8000001FFFE000000
7E00000003FFF8000003FFFF0000007C00000003FFF8000003FFFF0000007C00000003FFFC0000
03FFFF000000FC00000001FFFC000007FFFF800000F800000001FFFE000007FFFF800000F80000
0001FFFE000007FFFFC00001F800000000FFFE00000F9FFFC00001F000000000FFFF00000F9FFF
C00003F0000000007FFF00001F9FFFE00003E0000000007FFF00001F0FFFE00003E0000000007F
FF80001F0FFFE00007E0000000003FFF80003F0FFFF00007C0000000003FFFC0003E07FFF00007
C0000000001FFFC0007E07FFF8000F80000000001FFFC0007C03FFF8000F80000000001FFFE000
7C03FFF8001F80000000000FFFE000FC03FFFC001F00000000000FFFE000F801FFFC001F000000
00000FFFF000F801FFFE003F000000000007FFF001F801FFFE003E000000000007FFF801F000FF
FE007E000000000003FFF803F000FFFF007C000000000003FFF803E0007FFF007C000000000003
FFFC03E0007FFF00FC000000000001FFFC07E0007FFF80F8000000000001FFFE07C0003FFF80F8
000000000001FFFE0FC0003FFFC1F8000000000000FFFE0F80001FFFC1F0000000000000FFFF0F
80001FFFC3F00000000000007FFF1F80001FFFE3E00000000000007FFF1F00000FFFE3E0000000
0000007FFF9F00000FFFF7E00000000000003FFFBF00000FFFF7C00000000000003FFFFE000007
FFFFC00000000000001FFFFE000007FFFF800000000000001FFFFC000003FFFF80000000000000
1FFFFC000003FFFF800000000000000FFFFC000003FFFF000000000000000FFFF8000001FFFF00
0000000000000FFFF8000001FFFF0000000000000007FFF0000000FFFE0000000000000007FFF0
000000FFFE0000000000000003FFF0000000FFFC0000000000000003FFE00000007FFC00000000
00000003FFE00000007FFC0000000000000001FFE00000007FF80000000000000001FFC0000000
3FF80000000000000001FFC00000003FF80000000000000000FF800000001FF000000000000000
00FF800000001FF000000000000000007F800000001FE000000000000000007F000000000FE000
000000000000007F000000000FE000000000000000003E0000000007C00000000074487DC67B>
87 D<FFFFFFFFF000000FFFFFF8FFFFFFFFF000000FFFFFF8FFFFFFFFF000000FFFFFF8FFFFFF
FFF000000FFFFFF8FFFFFFFFF000000FFFFFF8003FFFF0000000001FF000001FFFF0000000000F
C000000FFFF8000000001F8000000FFFFC000000001F80000007FFFC000000003F00000003FFFE
000000007E00000003FFFF00000000FC00000001FFFF00000000FC00000000FFFF80000001F800
000000FFFFC0000003F0000000007FFFC0000003F0000000003FFFE0000007E0000000003FFFF0
00000FC0000000001FFFF000000FC0000000000FFFF800001F80000000000FFFFC00003F000000
000007FFFC00003F000000000003FFFE00007E000000000003FFFF0000FC000000000001FFFF00
00FC000000000000FFFF8001F8000000000000FFFFC003F00000000000007FFFC003F000000000
00003FFFE007E00000000000003FFFF00FC00000000000001FFFF00FC00000000000000FFFF81F
800000000000000FFFFC3F0000000000000007FFFC3F0000000000000003FFFE7E000000000000
0003FFFFFC0000000000000001FFFFFC0000000000000000FFFFF80000000000000000FFFFF000
000000000000007FFFF000000000000000003FFFE000000000000000003FFFC000000000000000
001FFF8000000000000000001FFF8000000000000000001FFF8000000000000000001FFF800000
0000000000001FFF8000000000000000001FFF8000000000000000001FFF800000000000000000
1FFF8000000000000000001FFF8000000000000000001FFF8000000000000000001FFF80000000
00000000001FFF8000000000000000001FFF8000000000000000001FFF8000000000000000001F
FF8000000000000000001FFF8000000000000000001FFF8000000000000000001FFF8000000000
000000001FFF8000000000000000001FFF8000000000000000001FFF8000000000000000001FFF
8000000000000000001FFF8000000000000000001FFF8000000000000000FFFFFFFFF800000000
0000FFFFFFFFF8000000000000FFFFFFFFF8000000000000FFFFFFFFF8000000000000FFFFFFFF
F800000055477EC65A>89 D<0007FFFC000000007FFFFFC0000001FFFFFFF8000003FFFFFFFE00
0007FE001FFF000007FF0003FFC0000FFF8001FFE0000FFF8000FFF0000FFF80007FF0000FFF80
007FF8000FFF80007FF80007FF00003FFC0007FF00003FFC0003FE00003FFC0000F800003FFC00
000000003FFC00000000003FFC00000000003FFC00000000003FFC00000007FFFFFC000000FFFF
FFFC000007FFFFFFFC00003FFFE03FFC0000FFFE003FFC0003FFF0003FFC0007FFC0003FFC000F
FF00003FFC001FFE00003FFC003FFC00003FFC007FF800003FFC007FF800003FFC00FFF000003F
FC00FFF000003FFC00FFF000003FFC00FFF000003FFC00FFF000003FFC00FFF000007FFC007FF8
0000FFFC007FF80001EFFC003FFC0003EFFC003FFF0007CFFF000FFFC03F8FFFF807FFFFFF07FF
FC01FFFFFC03FFFC007FFFF001FFFC0003FF80007FF8362E7DAD3A>97 D<007FC00000000000FF
FFC00000000000FFFFC00000000000FFFFC00000000000FFFFC00000000000FFFFC00000000000
03FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC000000000
0001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000
000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC00000
00000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC000
0000000001FFC00FFC00000001FFC07FFFC0000001FFC3FFFFF0000001FFCFFFFFFC000001FFDF
F00FFF000001FFFF8003FF800001FFFE0001FFC00001FFF800007FE00001FFF000007FF00001FF
E000003FF80001FFE000001FFC0001FFE000001FFC0001FFE000001FFE0001FFE000001FFE0001
FFE000000FFF0001FFE000000FFF0001FFE000000FFF0001FFE000000FFF0001FFE000000FFF80
01FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF
8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000F
FF0001FFE000000FFF0001FFE000000FFF0001FFE000001FFE0001FFE000001FFE0001FFE00000
1FFC0001FFE000001FFC0001FFE000003FF80001FFF000003FF80001FFF800007FF00001FFFC00
00FFE00001FFFE0001FFC00001FFBF0007FF800001FF1FE01FFE000001FE0FFFFFFC000001FC03
FFFFF0000001F800FFFF80000001F0001FF800000039487CC742>I<00001FFFC0000000FFFFF8
000007FFFFFE00001FFFFFFF80007FFC00FFC000FFE001FFC001FFC003FFE003FF8003FFE007FF
0003FFE00FFE0003FFE00FFE0003FFE01FFC0001FFC01FFC0001FFC03FFC0000FF803FFC00003E
007FF8000000007FF8000000007FF800000000FFF800000000FFF800000000FFF800000000FFF8
00000000FFF800000000FFF800000000FFF800000000FFF800000000FFF800000000FFF8000000
007FF8000000007FF8000000007FFC000000003FFC000000003FFC000000001FFC000000F81FFE
000000F80FFE000000F80FFF000001F007FF800003F003FFC00007E001FFE0000FC000FFF0001F
80007FFE00FF00001FFFFFFE000007FFFFF8000000FFFFE00000001FFE00002D2E7CAD35>I<00
000000007FC00000000000FFFFC00000000000FFFFC00000000000FFFFC00000000000FFFFC000
00000000FFFFC0000000000003FFC0000000000001FFC0000000000001FFC0000000000001FFC0
000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FF
C0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001
FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC00000000000
01FFC0000000000001FFC00000000FFC01FFC0000000FFFF81FFC0000007FFFFE1FFC000001FFF
FFF9FFC000007FFC03FFFFC00000FFF0007FFFC00001FFC0001FFFC00003FF80000FFFC00007FF
000007FFC0000FFE000003FFC0000FFE000003FFC0001FFC000003FFC0001FFC000003FFC0003F
FC000003FFC0003FFC000003FFC0007FF8000003FFC0007FF8000003FFC0007FF8000003FFC000
FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC0
00FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FF
C0007FF8000003FFC0007FF8000003FFC0007FF8000003FFC0003FF8000003FFC0003FFC000003
FFC0003FFC000003FFC0001FFC000003FFC0001FFC000003FFC0000FFE000007FFC00007FF0000
0FFFC00003FF00001FFFC00001FFC0003FFFC00000FFE000FFFFE000007FF807FBFFFF80001FFF
FFF3FFFF800007FFFFC3FFFF800001FFFF03FFFF8000001FF803FFFF8039487CC742>I<00001F
FE00000001FFFFE0000007FFFFF800001FFFFFFE00007FFC07FF0000FFE001FF8001FFC0007FC0
03FF80003FE007FF00003FF00FFE00001FF01FFE00000FF81FFC00000FF83FFC00000FFC3FFC00
0007FC7FFC000007FC7FF8000007FC7FF8000007FE7FF8000007FEFFF8000007FEFFF8000007FE
FFFFFFFFFFFEFFFFFFFFFFFEFFFFFFFFFFFEFFFFFFFFFFFCFFF800000000FFF800000000FFF800
000000FFF8000000007FF8000000007FF8000000007FFC000000003FFC000000003FFC00000000
3FFC0000001C1FFE0000003E0FFE0000003E07FF0000007E07FF000000FC03FF800001F801FFC0
0003F0007FF0001FE0003FFE00FFC0001FFFFFFF800007FFFFFE000000FFFFF80000000FFF8000
2F2E7DAD36>I<000000FFC000000007FFF80000003FFFFC000000FFFFFF000001FFC1FF000007
FF03FF80000FFC03FF80000FF807FFC0001FF807FFC0003FF007FFC0003FF007FFC0003FE003FF
80007FE003FF80007FE001FF00007FE000FE00007FE0003800007FE0000000007FE0000000007F
E0000000007FE0000000007FE0000000007FE0000000007FE0000000007FE0000000007FE00000
00007FE0000000FFFFFFFE0000FFFFFFFE0000FFFFFFFE0000FFFFFFFE0000FFFFFFFE0000007F
F0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF00000
00007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007F
F0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF00000
00007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007F
F0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF00000
00007FF0000000007FF0000000007FF00000003FFFFFF800003FFFFFF800003FFFFFF800003FFF
FFF800003FFFFFF800002A487DC724>I<00000000001F8000007FF000FFE00007FFFF03FFF000
1FFFFFC7FFF0007FFFFFFFC7F800FFE03FFE0FF801FF800FFC0FF803FF0007FE0FF807FE0003FF
07F007FE0003FF07F00FFC0001FF81C00FFC0001FF80000FFC0001FF80001FFC0001FFC0001FFC
0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0000FFC0001FF80
000FFC0001FF80000FFC0001FF800007FE0003FF000007FE0003FF000003FF0007FE000001FF80
0FFC000000FFE03FF8000001FFFFFFF0000001DFFFFFC0000003C7FFFF00000003C07FF0000000
07C0000000000007C0000000000007C0000000000007C0000000000007E0000000000007F00000
00000007F8000000000007FFFFFFF0000007FFFFFFFF000003FFFFFFFFE00003FFFFFFFFF80001
FFFFFFFFFE0001FFFFFFFFFF0000FFFFFFFFFF80007FFFFFFFFF8003FFFFFFFFFFC00FFFFFFFFF
FFC01FF800001FFFE03FE0000001FFE07FC00000007FF07FC00000003FF0FF800000001FF0FF80
0000001FF0FF800000001FF0FF800000001FF0FF800000001FF07FC00000003FE07FC00000003F
E03FE00000007FC03FF0000000FFC01FFC000003FF800FFF00000FFF0003FFF000FFFC0000FFFF
FFFFF000003FFFFFFFC0000007FFFFFE000000003FFFC0000035447DAE3B>I<007FC000000000
00FFFFC00000000000FFFFC00000000000FFFFC00000000000FFFFC00000000000FFFFC0000000
000003FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC00000
00000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC000
0000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0
000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FF
C0000000000001FFC001FFC0000001FFC00FFFF8000001FFC03FFFFE000001FFC0FFFFFF000001
FFC1FC07FF800001FFC3E003FFC00001FFC7C001FFC00001FFCF0001FFE00001FFDE0000FFE000
01FFDC0000FFE00001FFFC0000FFF00001FFF80000FFF00001FFF00000FFF00001FFF00000FFF0
0001FFF00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FF
F00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000
FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF000FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FF
FFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE03B487CC742>I<00FC0001FE0003FF00
07FF800FFFC01FFFE01FFFE01FFFE01FFFE01FFFE01FFFE00FFFC007FF8003FF0001FE0000FC00
000000000000000000000000000000000000000000000000000000000000000000007FC0FFFFC0
FFFFC0FFFFC0FFFFC0FFFFC003FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC0
01FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC0
01FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC0
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF18497CC820>I<007FC000000000FFFFC000000000FFFFC0
00000000FFFFC000000000FFFFC000000000FFFFC00000000003FFC00000000001FFC000000000
01FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC000
00000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001
FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000
000001FFC00000000001FFC0007FFFF801FFC0007FFFF801FFC0007FFFF801FFC0007FFFF801FF
C0007FFFF801FFC0000FFE0001FFC00007F00001FFC0000FE00001FFC0003FC00001FFC0007F80
0001FFC000FE000001FFC001FC000001FFC007F8000001FFC00FF0000001FFC01FC0000001FFC0
3F80000001FFC0FF00000001FFC1FE00000001FFC3FF00000001FFCFFF80000001FFDFFFC00000
01FFFFFFC0000001FFFFFFE0000001FFFFFFF0000001FFFCFFF8000001FFF87FFC000001FFE03F
FC000001FFC01FFE000001FFC01FFF000001FFC00FFF800001FFC007FFC00001FFC003FFC00001
FFC001FFE00001FFC001FFF00001FFC000FFF80001FFC0007FFC0001FFC0003FFC0001FFC0001F
FE0001FFC0000FFF0001FFC0000FFF8001FFC0000FFFC0FFFFFF807FFFFFFFFFFF807FFFFFFFFF
FF807FFFFFFFFFFF807FFFFFFFFFFF807FFFFF38487CC73F>107 D<007FC000FFFFC000FFFFC0
00FFFFC000FFFFC000FFFFC00003FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC000
01FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC0
0001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC000FFFFFF80FFFFFF80FFFFFF80FFFFFF80
FFFFFF8019487CC720>I<007FC001FFC00000FFE00000FFFFC00FFFF80007FFFC0000FFFFC03F
FFFE001FFFFF0000FFFFC0FFFFFF007FFFFF8000FFFFC1FC07FF80FE03FFC000FFFFC3E003FFC1
F001FFE00003FFC7C001FFC3E000FFE00001FFCF0001FFE78000FFF00001FFDE0000FFEF00007F
F00001FFDC0000FFEE00007FF00001FFFC0000FFFE00007FF80001FFF80000FFFC00007FF80001
FFF00000FFF800007FF80001FFF00000FFF800007FF80001FFF00000FFF800007FF80001FFE000
00FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF0
00007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007F
F80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001
FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE000
00FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF0
00007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007F
F80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001
FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF800FFFFFFC0
7FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF0FFFFFFC07FFFFF
E03FFFFFF0FFFFFFC07FFFFFE03FFFFFF05C2E7CAD63>I<007FC001FFC00000FFFFC00FFFF800
00FFFFC03FFFFE0000FFFFC0FFFFFF0000FFFFC1FC07FF8000FFFFC3E003FFC00003FFC7C001FF
C00001FFCF0001FFE00001FFDE0000FFE00001FFDC0000FFE00001FFFC0000FFF00001FFF80000
FFF00001FFF00000FFF00001FFF00000FFF00001FFF00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001
FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF000
01FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF0
00FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFF
FFE03B2E7CAD42>I<00000FFF0000000000FFFFF000000007FFFFFE0000001FFFFFFF8000003F
FC03FFC00000FFE0007FF00001FF80001FF80003FF00000FFC0007FE000007FE000FFE000007FF
000FFC000003FF001FFC000003FF803FFC000003FFC03FF8000001FFC03FF8000001FFC07FF800
0001FFE07FF8000001FFE07FF8000001FFE0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0
FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF80000
01FFF0FFF8000001FFF07FF8000001FFE07FF8000001FFE07FF8000001FFE07FF8000001FFE03F
FC000003FFC03FFC000003FFC01FFC000003FF801FFE000007FF800FFE000007FF0007FF00000F
FE0003FF80001FFC0001FFC0003FF80000FFE0007FF000007FFC03FFE000001FFFFFFF80000007
FFFFFE00000000FFFFF0000000000FFF000000342E7DAD3B>I<007FC00FFC000000FFFFC07FFF
C00000FFFFC3FFFFF00000FFFFCFFFFFFC0000FFFFDFF01FFF0000FFFFFF8007FF800003FFFE00
01FFC00001FFF80000FFE00001FFF00000FFF00001FFE000007FF80001FFE000003FFC0001FFE0
00003FFC0001FFE000003FFE0001FFE000001FFE0001FFE000001FFF0001FFE000001FFF0001FF
E000001FFF0001FFE000000FFF0001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001
FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF80
01FFE000000FFF8001FFE000000FFF8001FFE000000FFF0001FFE000001FFF0001FFE000001FFF
0001FFE000001FFE0001FFE000001FFE0001FFE000003FFC0001FFE000003FFC0001FFE000007F
F80001FFF000007FF80001FFF80000FFF00001FFFC0001FFE00001FFFE0003FFC00001FFFF0007
FF800001FFFFE03FFE000001FFEFFFFFFC000001FFE3FFFFF0000001FFE0FFFF80000001FFE01F
F800000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0
000000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0000000000001FF
E0000000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0000000000001
FFE00000000000FFFFFFC000000000FFFFFFC000000000FFFFFFC000000000FFFFFFC000000000
FFFFFFC00000000039427CAD42>I<00FF803F8000FFFF80FFF000FFFF83FFFC00FFFF87FFFE00
FFFF8FC3FF00FFFF8F07FF0003FF9E0FFF8001FFBC0FFF8001FFB80FFF8001FFF80FFF8001FFF0
0FFF8001FFF007FF0001FFF007FF0001FFE003FE0001FFE000F80001FFE000000001FFE0000000
01FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC0
00000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC0000000
01FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC0
00000001FFC000000001FFC000000001FFC000000001FFC0000000FFFFFFE00000FFFFFFE00000
FFFFFFE00000FFFFFFE00000FFFFFFE00000292E7CAD31>114 D<000FFF00E0007FFFF3E001FF
FFFFE007FFFFFFE00FF800FFE01FC0001FE03F80000FE03F000007E07F000003E07F000003E0FF
000003E0FF000003E0FF800003E0FFC0000000FFF0000000FFFE000000FFFFF800007FFFFFC000
7FFFFFF0003FFFFFFC001FFFFFFF000FFFFFFF8007FFFFFFC003FFFFFFE000FFFFFFF0003FFFFF
F00003FFFFF800001FFFF8000000FFFC0000001FFC7800000FFCF8000007FCF8000003FCFC0000
03FCFC000003FCFE000003F8FE000003F8FF000003F8FF800007F0FFC0000FF0FFF0001FE0FFFC
00FFC0FFFFFFFF80FC7FFFFE00F81FFFF800E003FF8000262E7CAD2F>I<0001F000000001F000
000001F000000001F000000001F000000001F000000003F000000003F000000003F000000007F0
00000007F000000007F00000000FF00000000FF00000001FF00000003FF00000003FF00000007F
F0000001FFF0000003FFF000000FFFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFFFFFFC0FFFFFFFFC000
FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF00000
00FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF000
0000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0
01F000FFF001F000FFF001F000FFF001F000FFF001F000FFF001F000FFF001F000FFF001F000FF
F001F0007FF001E0007FF803E0003FF803E0003FFC07C0001FFE0F80000FFFFF800007FFFE0000
01FFFC0000001FF00024427EC12E>I<007FE000003FF000FFFFE0007FFFF000FFFFE0007FFFF0
00FFFFE0007FFFF000FFFFE0007FFFF000FFFFE0007FFFF00003FFE00001FFF00001FFE00000FF
F00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000
FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001
FFE00000FFF00001FFE00001FFF00001FFE00001FFF00001FFE00001FFF00001FFE00003FFF000
00FFE00007FFF00000FFE0000F7FF000007FE0001F7FF000007FF0003E7FF800003FFC00FC7FFF
E0001FFFFFF87FFFE00007FFFFE07FFFE00001FFFF807FFFE000003FFE007FFFE03B2E7CAD42>
I<FFFFFF8001FFFFFFFFFF8001FFFFFFFFFF8001FFFFFFFFFF8001FFFFFFFFFF8001FFFF01FFE0
00001FC001FFF000001F8001FFF000001F8000FFF800001F0000FFF800003F00007FF800003E00
007FFC00007E00003FFC00007C00003FFE0000FC00001FFE0000F800001FFF0001F800000FFF00
01F000000FFF8003F0000007FF8003E0000007FFC007E0000007FFC007E0000003FFE007C00000
03FFE00FC0000001FFE00F80000001FFF01F80000000FFF01F00000000FFF83F000000007FF83E
000000007FFC7E000000003FFC7C000000003FFEFC000000001FFEF8000000001FFFF800000000
1FFFF8000000000FFFF0000000000FFFF00000000007FFE00000000007FFE00000000003FFC000
00000003FFC00000000001FF800000000001FF800000000000FF000000000000FF000000000000
7E0000000000003C000000382E7DAD3F>I<FFFFFF07FFFFE007FFFEFFFFFF07FFFFE007FFFEFF
FFFF07FFFFE007FFFEFFFFFF07FFFFE007FFFEFFFFFF07FFFFE007FFFE03FFC0001FFC00003FC0
03FFE0000FFC00001F8001FFE0000FFC00001F0001FFE0000FFE00001F0001FFF00007FE00003F
0000FFF0000FFF00003E0000FFF8000FFF00007E00007FF8000FFF00007C00007FF8001FFF8000
7C00003FFC001FFF8000F800003FFC003FFFC000F800003FFE003EFFC001F800001FFE003EFFC0
01F000001FFE007EFFE003F000000FFF007C7FE003E000000FFF00FC7FF003E000000FFF80F83F
F007E0000007FF80F83FF007C0000007FF81F83FF80FC0000003FFC1F01FF80F80000003FFC3F0
1FFC0F80000003FFE3E00FFC1F80000001FFE3E00FFC1F00000001FFE7E00FFE3F00000000FFF7
C007FE3E00000000FFFFC007FF3E00000000FFFF8003FF7E000000007FFF8003FF7C000000007F
FF8003FFFC000000003FFF0001FFF8000000003FFF0001FFF8000000003FFE0000FFF800000000
1FFE0000FFF0000000001FFE0000FFF0000000000FFC00007FE0000000000FFC00007FE0000000
000FF800003FE00000000007F800003FC00000000007F800003FC00000000003F000001F800000
000001E000000F0000004F2E7DAD56>I<7FFFFF801FFFFF007FFFFF801FFFFF007FFFFF801FFF
FF007FFFFF801FFFFF007FFFFF801FFFFF00007FF80001FF0000007FFC0001FC0000003FFE0003
F80000001FFF0007F00000000FFF0007E000000007FF800FC000000003FFC01F8000000003FFE0
3F8000000001FFF07F0000000000FFF8FE00000000007FF9FC00000000003FFFF800000000003F
FFF000000000001FFFE000000000000FFFC0000000000007FFC0000000000003FFC00000000000
01FFE0000000000001FFF0000000000001FFF8000000000003FFFC000000000003FFFE00000000
0007FFFE00000000000FEFFF00000000001FCFFF80000000003F87FFC0000000007F03FFE00000
0000FE01FFE000000001FC00FFF000000001F8007FF800000003F0007FFC00000007F0003FFE00
00000FE0001FFF0000001FC0000FFF0000003F800007FF800000FF800007FFC000FFFFF8003FFF
FFC0FFFFF8003FFFFFC0FFFFF8003FFFFFC0FFFFF8003FFFFFC0FFFFF8003FFFFFC03A2E7EAD3F
>I<7FFFFFC000FFFF807FFFFFC000FFFF807FFFFFC000FFFF807FFFFFC000FFFF807FFFFFC000
FFFF8000FFF000000FE00000FFF800000FC00000FFF800000FC000007FFC00000F8000007FFC00
001F8000003FFC00001F0000003FFE00003F0000001FFE00003E0000001FFF00007E0000000FFF
00007C0000000FFF8000FC00000007FF8000F800000007FFC001F800000003FFC001F000000003
FFE003F000000003FFE003F000000001FFF003E000000001FFF007E000000000FFF007C0000000
00FFF80FC0000000007FF80F80000000007FFC1F80000000003FFC1F00000000003FFE3F000000
00001FFE3E00000000001FFF7E00000000000FFF7C00000000000FFFFC00000000000FFFFC0000
00000007FFF8000000000007FFF8000000000003FFF0000000000003FFF0000000000001FFE000
0000000001FFE0000000000000FFC0000000000000FFC00000000000007F800000000000007F80
0000000000003F000000000000003F000000000000003F000000000000003E000000000000007E
000000000000007C00000000000000FC000000001F8000F8000000003FC001F8000000007FE001
F000000000FFF003F000000000FFF003E000000000FFF007E000000000FFF00FC000000000FFF0
1F8000000000FFF03F80000000007FE07F00000000007F43FE00000000003FFFF800000000001F
FFF0000000000007FFC0000000000001FE00000000000039427EAD3F>I
E /Fx 1 59 df<3C7EFFFFFFFF7E3C08087A8714>58 D E /Fy 24 122
df<78FCFCFCFC780000000000000000000000000000000000000078FCFCFCFC78061F7A9E12>
58 D<00000300000000000300000000000300000000000780000000000780000000000FC00000
00000FC0000000000FC00000000017E00000000013E00000000013E00000000023F00000000021
F00000000021F00000000040F80000000040F80000000040F800000000807C00000000807C0000
0001807E00000001003E00000001003E00000002003F00000002001F00000002001F0000000400
0F80000004000F80000004000F800000080007C00000080007C00000180007E000001FFFFFE000
001FFFFFE00000200003F00000200001F00000200001F00000400001F80000400000F800004000
00F800008000007C00008000007C00008000007C00010000003E00010000003E00030000003F00
030000001F00070000001F001F8000003F80FFE00003FFFCFFE00003FFFC2E327EB132>65
D<00003FE0010001FFF8030007F01E03001F800307003E000087007800004F00F000002F01E000
001F03C000000F078000000F0F800000070F000000071F000000031E000000033E000000033C00
0000017C000000017C000000017C000000017800000000F800000000F800000000F800000000F8
00000000F800000000F800000000F800000000F800000000F800000000F800000000F800000000
78000000007C000000007C000000017C000000013C000000013E000000011E000000011F000000
020F000000020F80000006078000000403C000000801E000000800F00000100078000020003E00
00C0001F8003800007F00F000001FFFC0000003FE00028337CB130>67 D<FFFF80FFFF8007F000
03E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E000
03E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E000
03E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E000
03E00003E00003E00003E00007F000FFFF80FFFF8011317DB017>73 D<7FFFFFFFFFE07FFFFFFF
FFE07E000F8007E078000F8001E070000F8000E060000F80006040000F80002040000F800020C0
000F800030C0000F80003080000F80001080000F80001080000F80001080000F80001080000F80
001080000F80001000000F80000000000F80000000000F80000000000F80000000000F80000000
000F80000000000F80000000000F80000000000F80000000000F80000000000F80000000000F80
000000000F80000000000F80000000000F80000000000F80000000000F80000000000F80000000
000F80000000000F80000000000F80000000000F80000000000F80000000000F80000000000F80
000000000F80000000000F80000000000F80000000000F80000000000F80000000001FC0000000
0FFFFF8000000FFFFF80002C317EB030>84 D<00FE00000303C0000C00E0001000700010003800
3C003C003E001C003E001E003E001E0008001E0000001E0000001E0000001E00000FFE0000FC1E
0003E01E000F801E001F001E003E001E003C001E007C001E00F8001E04F8001E04F8001E04F800
3E04F8003E0478003E047C005E043E008F080F0307F003FC03E01E1F7D9E21>97
D<003F8000E0600380180700040F00041E001E1C003E3C003E7C003E7C0008780000F80000F800
00F80000F80000F80000F80000F80000F80000F800007800007C00007C00003C00011E00011E00
020F000207000403801800E060003F80181F7D9E1D>99 D<000001E000003FE000003FE0000003
E0000001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E00000
01E0000001E0000001E0000001E0000001E0000001E0001F81E000F061E001C019E0078005E00F
0003E00E0003E01E0001E03C0001E03C0001E07C0001E0780001E0F80001E0F80001E0F80001E0
F80001E0F80001E0F80001E0F80001E0F80001E0F80001E0780001E0780001E03C0001E03C0001
E01C0001E01E0003E00E0005E0070009E0038011F000E061FF003F81FF20327DB125>I<003F80
0000E0E0000380380007003C000E001E001E001E001C000F003C000F007C000F0078000F807800
0780F8000780F8000780FFFFFF80F8000000F8000000F8000000F8000000F8000000F800000078
0000007C0000003C0000003C0000801E0000800E0001000F0002000780020001C00C0000F03000
001FC000191F7E9E1D>I<000000F0007F030801C1C41C0380E81C070070080F0078001E003C00
1E003C003E003E003E003E003E003E003E003E003E003E003E003E001E003C001E003C000F0078
00070070000780E00009C1C000087F000018000000180000001800000018000000180000001C00
00000E0000000FFFF80007FFFF0003FFFF800E000FC0180001E0300000F070000070E0000038E0
000038E0000038E0000038E00000387000007070000070380000E01C0001C00700070001C01C00
003FE0001E2F7E9F21>103 D<0780000000FF80000000FF800000000F80000000078000000007
800000000780000000078000000007800000000780000000078000000007800000000780000000
0780000000078000000007800000000780000000078000000007800000000780FE000007830780
00078C03C000079001E00007A001E00007A000F00007C000F00007C000F000078000F000078000
F000078000F000078000F000078000F000078000F000078000F000078000F000078000F0000780
00F000078000F000078000F000078000F000078000F000078000F000078000F000078000F00007
8000F000078000F000078000F0000FC001F800FFFC1FFF80FFFC1FFF8021327EB125>I<0F001F
801F801F801F800F00000000000000000000000000000000000000000000000780FF80FF800F80
078007800780078007800780078007800780078007800780078007800780078007800780078007
8007800780078007800FC0FFF8FFF80D307EAF12>I<07800000FF800000FF8000000F80000007
800000078000000780000007800000078000000780000007800000078000000780000007800000
078000000780000007800000078000000780000007801FFC07801FFC078007E007800780078006
000780040007800800078010000780600007808000078100000783800007878000078FC0000793
C00007A1E00007C1F0000780F0000780780007807C0007803C0007803E0007801F0007800F0007
800F80078007C0078003C0078003E00FC007F8FFFC0FFFFFFC0FFF20327EB123>107
D<0780FF80FF800F80078007800780078007800780078007800780078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800FC0FFFCFFFC0E327EB112>I<0780FE001FC000FF83
078060F000FF8C03C18078000F9001E2003C0007A001E4003C0007A000F4001E0007C000F8001E
0007C000F8001E00078000F0001E00078000F0001E00078000F0001E00078000F0001E00078000
F0001E00078000F0001E00078000F0001E00078000F0001E00078000F0001E00078000F0001E00
078000F0001E00078000F0001E00078000F0001E00078000F0001E00078000F0001E00078000F0
001E00078000F0001E00078000F0001E00078000F0001E00078000F0001E000FC001F8003F00FF
FC1FFF83FFF0FFFC1FFF83FFF0341F7E9E38>I<0780FE0000FF83078000FF8C03C0000F9001E0
0007A001E00007A000F00007C000F00007C000F000078000F000078000F000078000F000078000
F000078000F000078000F000078000F000078000F000078000F000078000F000078000F0000780
00F000078000F000078000F000078000F000078000F000078000F000078000F000078000F00007
8000F0000FC001F800FFFC1FFF80FFFC1FFF80211F7E9E25>I<001FC00000F0780001C01C0007
0007000F0007801E0003C01C0001C03C0001E03C0001E0780000F0780000F0780000F0F80000F8
F80000F8F80000F8F80000F8F80000F8F80000F8F80000F8F80000F8780000F07C0001F03C0001
E03C0001E01E0003C01E0003C00F00078007800F0001C01C0000F07800001FC0001D1F7E9E21>
I<0781FC00FF860700FF8803C00F9001E007A000F007C00078078000780780003C0780003C0780
003E0780001E0780001F0780001F0780001F0780001F0780001F0780001F0780001F0780001F07
80001F0780003E0780003E0780003C0780007C0780007807C000F007A000F007A001E007980380
07860F000781F80007800000078000000780000007800000078000000780000007800000078000
000780000007800000078000000FC00000FFFC0000FFFC0000202D7E9E25>I<0783E0FF8C18FF
907C0F907C07A07C07C03807C00007C00007C00007800007800007800007800007800007800007
80000780000780000780000780000780000780000780000780000780000780000780000780000F
C000FFFE00FFFE00161F7E9E19>114 D<01FC100E03301800F0300070600030E00030E00010E0
0010E00010F00010F800007E00003FF0001FFF000FFFC003FFE0003FF00001F80000F880003C80
003C80001CC0001CC0001CE0001CE00018F00038F00030CC0060C301C080FE00161F7E9E1A>I<
00400000400000400000400000400000C00000C00000C00001C00001C00003C00007C0000FC000
1FFFE0FFFFE003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C000
03C00003C00003C00003C00003C00003C01003C01003C01003C01003C01003C01003C01003C010
01C02001E02000E0400078C0001F00142C7FAB19>I<078000F000FF801FF000FF801FF0000F80
01F000078000F000078000F000078000F000078000F000078000F000078000F000078000F00007
8000F000078000F000078000F000078000F000078000F000078000F000078000F000078000F000
078000F000078000F000078000F000078000F000078001F000078001F000078001F000038002F0
0003C004F00001C008F800007030FF80001FC0FF80211F7E9E25>I<FFF07FF80FFCFFF07FF80F
FC0FC007C003F00F8003C001C0078003C00080078003C0008003C003E0010003C003E0010003C0
07E0010001E004F0020001E004F0020001E00870020000F00878040000F00878040000F0103804
000078103C08000078103C08000078201C0800003C201E1000003C201E1000003C400E1000001E
400F2000001E400F2000001E80072000000F8007C000000F8007C000000F0003C0000007000380
000007000380000006000180000002000100002E1F7F9E30>119 D<FFF801FF80FFF801FF800F
C0007C00078000380007C000300003C000200003C000200001E000400001E000400001F0004000
00F000800000F000800000780100000078010000007C010000003C020000003C020000001E0400
00001E040000001F040000000F080000000F080000000790000000079000000007D000000003E0
00000003E000000001C000000001C000000001C000000000800000000080000000010000000001
00000000010000000002000000000200000000040000007004000000F80C000000F808000000F8
10000000703000000030400000001F80000000212D7F9E23>121 D E /Fz
12 85 df<1F00318060C04040C060C060C060C060C060C060C060C060404060C031801F000B10
7F8F0F>48 D<0C003C00CC000C000C000C000C000C000C000C000C000C000C000C000C00FF8009
107E8F0F>I<1F00618040C08060C0600060006000C00180030006000C00102020207FC0FFC00B
107F8F0F>I<1F00218060C060C000C0008001800F00008000400060C060C060804060801F000B
107F8F0F>I<0300030007000F000B001300330023004300C300FFE003000300030003001FE00B
107F8F0F>I<20803F002C002000200020002F0030802040006000600060C06080C061801F000B
107F8F0F>I<0780184030C060C06000C000CF00F080E040C060C060C060406060C030801F000B
107F8F0F>I<40007FE07FC08080808001000200040004000C0008000800180018001800180018
000B117E900F>I<1F00318060C060C060C071803F000F00338061C0C060C060C060404060801F
000B107F8F0F>I<1F00318060C0C040C060C060C06040E021E01E600060004060C0608043003E
000B107F8F0F>I<FC007E1C00701600B01600B01600B013013013013011823011823011823010
C43010C430106830106830106830383030FE31FE17117F901B>77 D<7FFF8060C18040C080C0C0
C080C04080C04000C00000C00000C00000C00000C00000C00000C00000C00000C00000C0000FFC
0012117F9016>84 D E /FA 3 64 df<70F8F8F87005057C840D>58 D<E0000000780000001E00
00000780000001E0000000780000001C0000000700000003C0000000F00000003C0000000F0000
0003C0000003C000000F0000003C000000F0000003C00000070000001C00000078000001E00000
078000001E00000078000000E00000001A1A7C9723>62 D<001000001000001000001000003800
003800003800003800E0380E3FBBF80FFFE003FF8000FE00007C0000FE0001EF0001C700038380
0301800600C00400400800201716809517>I E /FB 55 122 df<060F0E1C386040800808709F
17>19 D<0E1F3F3F1D0102020404081020C0080E779F0E>39 D<1C3C3C3C3C0404080810202040
80060E7D840E>44 D<7FF0FFE07FE00C037D8A10>I<70F8F8F0E005057B840E>I<000F800030E0
00E07001C0700380300380380700380F00780F00780E00781E00781E00703C00F03C00F03C00F0
3C00F07801E07801E07801E07801C07003C0F003C0F00380F00780F00700700700700E00701C00
3038001870000FC000151F7C9D17>48 D<000200020006000E003C00DC031C001C003800380038
0038007000700070007000E000E000E000E001C001C001C001C003800380038003800780FFF80F
1E7B9D17>I<001F800060E0008070010030020038042038042038041038042070046070038060
0000E00001C000030000FE00001C00000600000700000780000780000780300780780780780780
F00F00800F00401E00401C0040380020E0001F8000151F7C9D17>51 D<0007C0001C2000302000
60E000C1E00181E00380C00700000F00000E00001E00001E78001D84003E06003E07003C07007C
0780780780780780780780700F00700F00F00F00F00E00F01E00701C00601C0070380030700010
C0000F8000131F7B9D17>54 D<001F000061800080C00100600300600600600600600600600E00
C00F00800F818007C30007E40003F80001F80003FC00067E00183F00300F00200700600700C003
00C00300C00300800600800600C00C00C008004030003060001F8000131F7B9D17>56
D<070F1F1F0E0000000000000000000070F8F8F0E008147B930E>58 D<00000200000006000000
060000000E0000001E0000001E0000003F0000002F0000004F0000004F0000008F0000010F0000
010F0000020F0000020F0000040F00000C0F0000080F0000100F0000100F0000200F80003FFF80
0040078000C007800080078001000780010007800200078002000780060007801E000F80FF807F
F81D207E9F22>65 D<01FFFFC0001E00F0001E0078001E0038001E003C003C003C003C003C003C
003C003C003C0078007800780078007800F0007801E000F0078000FFFE0000F00F8000F003C001
E001C001E001E001E001E001E001E003C001E003C001E003C001E003C001C0078003C007800780
07800F0007801E000F007800FFFFE0001E1F7D9E20>I<01FFFF80001E00E0001E0070001E0038
001E001C003C001C003C000E003C000E003C000E0078000E0078000E0078000E0078000E00F000
1E00F0001E00F0001E00F0001E01E0003C01E0003C01E0003C01E0007803C0007003C0007003C0
00E003C001C0078001C00780038007800E0007801C000F007000FFFFC0001F1F7D9E22>68
D<0000FC040007030C001C00980030007800E0007801C000380380003003800030070000300E00
00301E0000201E0000203C0000003C00000078000000780000007800000078000000F0000000F0
00FFF0F0000780F0000780F0000F0070000F0070000F0070000F0070001E0038001E0018003E00
1C002E000E00CC000383040000FC00001E217A9F23>71 D<01FFF3FFE0001F003E00001E003C00
001E003C00001E003C00003C007800003C007800003C007800003C007800007800F000007800F0
00007800F000007800F00000F001E00000FFFFE00000F001E00000F001E00001E003C00001E003
C00001E003C00001E003C00003C007800003C007800003C007800003C007800007800F00000780
0F000007800F000007800F00000F801F0000FFF1FFE000231F7D9E22>I<01FFF0001F00001E00
001E00001E00003C00003C00003C00003C0000780000780000780000780000F00000F00000F000
00F00001E00001E00001E00001E00003C00003C00003C00003C000078000078000078000078000
0F8000FFF800141F7E9E11>I<01FFF03FE0001F000F80001E000E00001E000800001E00100000
3C002000003C004000003C010000003C0200000078040000007808000000781000000078300000
00F0F0000000F1F8000000F278000000F478000001E83C000001F03C000001E03C000001E01E00
0003C01E000003C01E000003C00F000003C00F000007800F000007800780000780078000078007
80000F8007C000FFF03FF800231F7D9E23>75 D<01FFF8001F00001E00001E00001E00003C0000
3C00003C00003C0000780000780000780000780000F00000F00000F00000F00001E00001E00001
E00001E00103C00203C00203C00603C00407800407800C0780180780380F00F0FFFFF0181F7D9E
1C>I<01FE00007FC0001E0000FC00001E0000F80000170001780000170001780000270002F000
00270004F00000270004F00000270008F00000470009E00000470011E00000470021E000004700
21E00000870043C00000838043C00000838083C00000838083C000010381078000010382078000
0103820780000103840780000203840F00000203880F00000203900F00000203900F00000401E0
1E00000401E01E00000401C01E00000C01801E00001C01803E0000FF8103FFC0002A1F7D9E29>
I<01FF007FE0001F000F00001F0004000017800400001780040000278008000023C008000023C0
08000023C008000041E010000041E010000041F010000040F010000080F0200000807820000080
782000008078200001003C400001003C400001003C400001001E400002001E800002001E800002
000F800002000F800004000F0000040007000004000700000C000700001C00020000FF80020000
231F7D9E22>I<0001FC0000070700001C01C0003000E000E0006001C000700380007007800038
070000380E0000381E0000381C0000383C0000383C000038780000787800007878000078780000
78F00000F0F00000F0F00000E0F00001E0F00001C0F00003C0700003807000070078000F003800
1E0038003C001C0070000E00E0000783800001FC00001D217A9F23>I<01FFFF80001E00E0001E
0070001E0038001E003C003C003C003C003C003C003C003C003C0078007800780078007800F000
7800E000F003C000F00F0000FFFC0000F0000001E0000001E0000001E0000001E0000003C00000
03C0000003C0000003C00000078000000780000007800000078000000F800000FFF000001E1F7D
9E1F>I<01FFFF00001E03C0001E00E0001E0070001E0078003C0078003C0078003C0078003C00
78007800F0007800F0007801E0007801C000F0070000F01E0000FFF00000F0380001E01C0001E0
1E0001E00E0001E00F0003C01E0003C01E0003C01E0003C01E0007803C0007803C0807803C0807
803C100F801C10FFF00C20000007C01D207D9E21>82 D<0007E040001C18C00030058000600380
00C0038001C00180018001000380010003800100038001000380000003C0000003C0000003F800
0001FF800001FFE000007FF000001FF0000001F800000078000000780000003800000038002000
3800200038002000300060007000600060006000E0007000C000E8038000C606000081F800001A
217D9F1A>I<0FFFFFE01E0780C0180780401007804020078040200F0040600F0040400F004040
0F0040801E0080001E0000001E0000001E0000003C0000003C0000003C0000003C000000780000
00780000007800000078000000F0000000F0000000F0000000F0000001E0000001E0000001E000
0001E0000003E00000FFFF00001B1F789E20>I<7FFC1FF807C003C00780010007800100078001
000F0002000F0002000F0002000F0002001E0004001E0004001E0004001E0004003C0008003C00
08003C0008003C00080078001000780010007800100078001000F0002000F0002000F0002000F0
004000F0004000700080007001000030020000380400000C18000007E000001D20779E22>I<FF
F007FC0F8000E00F0000C00F0000800F0001000F0001000F0002000F0004000F0004000F800800
07800800078010000780200007802000078040000780400007808000078100000781000007C200
0003C2000003C4000003C8000003C8000003D0000003D0000003E0000003C0000003C000000380
000001800000010000001E20779E22>I<FFF1FFC0FF801F003E001C001F003C0018001F003C00
10000F003C0010000F003C0020000F003C0020000F003E0040000F003E00C0000F005E0080000F
005E0100000F009E0100000F019E0200000F011E0200000F021E0400000F021E0400000F041E08
00000F041E0800000F081E1000000F081E3000000F101E2000000F101E4000000F201E4000000F
601E8000000FC01E80000007801F00000007801F00000007001E00000007001E00000006000C00
00000600080000000400080000002920779E2D>I<00FFF07FE0000F801F00000F001C00000F80
1000000780300000078020000007C040000003C080000003C100000003E200000001E400000001
EC00000001F800000000F000000000F800000000F800000000F8000000017C000000023C000000
063C000000043E000000081E000000101E000000201F000000400F000000800F000001800F8000
010007800007000780001F000FC000FFC07FF800231F7E9E22>I<FFF003FC1F8000E00F0000C0
0F800080078001000780020007C0040003C00C0003C0080003E0100003E0200001E0400001F040
0001F0800000F1000000FA000000FE0000007C000000780000007800000070000000F0000000F0
000000F0000000E0000001E0000001E0000001E0000001E0000003C000003FFC00001E1F779E22
>I<00F1800389C00707800E03801C03803C0380380700780700780700780700F00E00F00E00F0
0E00F00E20F01C40F01C40703C40705C40308C800F070013147C9317>97
D<07803F8007000700070007000E000E000E000E001C001C001CF01D0C3A0E3C0E380F380F700F
700F700F700FE01EE01EE01EE01CE03CE038607060E031C01F0010207B9F15>I<007E0001C100
0300800E07801E07801C07003C0200780000780000780000F00000F00000F00000F00000F00000
70010070020030040018380007C00011147C9315>I<0000780003F80000700000700000700000
700000E00000E00000E00000E00001C00001C000F1C00389C00707800E03801C03803C03803807
00780700780700780700F00E00F00E00F00E00F00E20F01C40F01C40703C40705C40308C800F07
0015207C9F17>I<007C01C207010E011C013C013802780C79F07E00F000F000F000F000700070
0170023804183807C010147C9315>I<00007800019C00033C00033C000718000700000700000E
00000E00000E00000E00000E0001FFE0001C00001C00001C00001C000038000038000038000038
0000380000700000700000700000700000700000700000E00000E00000E00000E00000C00001C0
0001C0000180003180007B0000F300006600003C00001629829F0E>I<003C6000E27001C1E003
80E00700E00F00E00E01C01E01C01E01C01E01C03C03803C03803C03803C03803C07003C07001C
0F001C17000C2E0003CE00000E00000E00001C00001C00301C00783800F0700060E0003F800014
1D7E9315>I<01E0000FE00001C00001C00001C00001C000038000038000038000038000070000
070000071E000763000E81800F01C00E01C00E01C01C03801C03801C03801C0380380700380700
380700380E10700E20700C20701C20700C40E00CC060070014207D9F17>I<00C001E001E001C0
00000000000000000000000000000E003300230043804300470087000E000E000E001C001C001C
003840388030807080310033001C000B1F7C9E0E>I<01E0000FE00001C00001C00001C00001C0
000380000380000380000380000700000700000703C00704200E08E00E11E00E21E00E40C01C80
001D00001E00001F800038E000387000387000383840707080707080707080703100E03100601E
0013207D9F15>107 D<03C01FC0038003800380038007000700070007000E000E000E000E001C
001C001C001C0038003800380038007000700070007100E200E200E200E200640038000A207C9F
0C>I<1C0F80F0002630C318004740640C004780680E004700700E004700700E008E00E01C000E
00E01C000E00E01C000E00E01C001C01C038001C01C038001C01C038001C01C070803803807100
3803806100380380E10038038062007007006600300300380021147C9325>I<1C0F802630C047
40604780604700704700708E00E00E00E00E00E00E00E01C01C01C01C01C01C01C038438038838
03083807083803107003303001C016147C931A>I<007C0001C3000301800E01C01E01C01C01E0
3C01E07801E07801E07801E0F003C0F003C0F003C0F00780F00700700F00700E00301800187000
07C00013147C9317>I<01C1E002621804741C04781C04701E04701E08E01E00E01E00E01E00E0
1E01C03C01C03C01C03C01C0380380780380700380E003C1C0072380071E000700000700000E00
000E00000E00000E00001C00001C0000FFC000171D809317>I<00F0400388C00705800E03801C
03803C0380380700780700780700780700F00E00F00E00F00E00F00E00F01C00F01C00703C0070
5C0030B8000F380000380000380000700000700000700000700000E00000E0000FFE00121D7C93
15>I<1C1E002661004783804787804707804703008E00000E00000E00000E00001C00001C0000
1C00001C000038000038000038000038000070000030000011147C9313>I<00FC030206010C03
0C070C060C000F800FF007F803FC003E000E700EF00CF00CE008401020601F8010147D9313>I<
018001C0038003800380038007000700FFF007000E000E000E000E001C001C001C001C00380038
0038003820704070407080708031001E000C1C7C9B0F>I<0E00C03300E02301C04381C04301C0
4701C08703800E03800E03800E03801C07001C07001C07001C07101C0E20180E20180E201C1E20
0C264007C38014147C9318>I<0E03803307802307C04383C04301C04700C08700800E00800E00
800E00801C01001C01001C01001C02001C02001C04001C04001C08000E300003C00012147C9315
>I<0E00C1C03300E3C02301C3E04381C1E04301C0E04701C060870380400E0380400E0380400E
0380401C0700801C0700801C0700801C0701001C0701001C0602001C0F02000C0F04000E130800
03E1F0001B147C931E>I<0383800CC4401068E01071E02071E02070C040E00000E00000E00000
E00001C00001C00001C00001C040638080F38080F38100E5810084C60078780013147D9315>I<
0E00C03300E02301C04381C04301C04701C08703800E03800E03800E03801C07001C07001C0700
1C07001C0E00180E00180E001C1E000C3C0007DC00001C00001C00003800F03800F07000E06000
C0C0004380003E0000131D7C9316>I E /FC 78 125 df<000FE0FE00007FF3FF0000F87F8F80
01E0FF1F8003E0FE1F8007C0FE1F8007C07E0F0007C03E000007C03E000007C03E000007C03E00
0007C03E0000FFFFFFF000FFFFFFF00007C03E000007C03E000007C03E000007C03E000007C03E
000007C03E000007C03E000007C03E000007C03E000007C03E000007C03E000007C03E000007C0
3E000007C03E000007C03E000007C03E00003FF9FFE0003FF9FFE0002120809F1E>11
D<000FE000007FF80000F81C0001E07C0003E07C0007C07C0007C07C0007C0380007C0000007C0
000007C0000007C1FE00FFFFFE00FFFFFE0007C03E0007C03E0007C03E0007C03E0007C03E0007
C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E00
07C03E003FF9FFC03FF9FFC01A20809F1D>I<000FFE00007FFE0000F87E0001E0FE0003E0FE00
07C07E0007C07E0007C03E0007C03E0007C03E0007C03E0007C03E00FFFFFE00FFFFFE0007C03E
0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C0
3E0007C03E0007C03E0007C03E0007C03E0007C03E003FF9FFC03FF9FFC01A20809F1D>I<387C
FEFEFEFEFE7C7C7C7C7C7C7C3838383838383800000000387CFEFEFE7C3807207C9F10>33
D<387CFEFFFF7F3B030306060E0C18702008107D9F0E>39 D<0018007000E001C0038003800700
0E000E001E001C003C003C007800780078007800F800F000F000F000F000F000F000F000F000F0
00F80078007800780078003C003C001C001E000E000E0007000380038001C000E0007000180D2D
7DA114>I<C000700038001C000E000E0007000380038003C001C001E001E000F000F000F000F0
00F800780078007800780078007800780078007800F800F000F000F000F001E001E001C003C003
80038007000E000E001C0038007000C0000D2D7DA114>I<387CFEFFFF7F3B030306060E0C1870
2008107D860E>44 D<FFF0FFF0FFF0FFF00C047F8B11>I<387CFEFEFE7C3807077D860E>I<0000
600000E00000E00001C00001C0000380000380000380000700000700000700000E00000E00001C
00001C00001C0000380000380000380000700000700000E00000E00000E00001C00001C0000380
000380000380000700000700000700000E00000E00001C00001C00001C00003800003800003800
00700000700000E00000E00000C00000132D7DA11A>I<01FC0007FF001F07C01E03C03E03E07C
01F07C01F07C01F0FC01F8FC01F8FC01F8FC01F8FC01F8FC01F8FC01F8FC01F8FC01F8FC01F8FC
01F8FC01F8FC01F87C01F07C01F07C01F03E03E01E03C01F8FC007FF0001FC00151D7E9C1A>I<
00E00001E0000FE000FFE000F3E00003E00003E00003E00003E00003E00003E00003E00003E000
03E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E000
03E000FFFF80FFFF80111D7C9C1A>I<07F0001FFE00383F007C1F80FE0FC0FE0FC0FE0FE0FE07
E07C07E03807E0000FE0000FC0000FC0001F80001F00003E0000780000F00000E00001C0000380
600700600E00601C00E01FFFC03FFFC07FFFC0FFFFC0FFFFC0131D7D9C1A>I<01FC0007FF000E
0F801E0FC03F07E03F07E03F07E03F07E01E0FC0000FC0000F80001F0001FC0001FC00000F8000
07C00003E00003F00003F83803F87C03F8FE03F8FE03F8FE03F0FC03F07807E03C0FC01FFF8003
FC00151D7E9C1A>I<0001C00003C00007C00007C0000FC0001FC0003BC00073C00063C000C3C0
0183C00383C00703C00E03C00C03C01803C03803C07003C0E003C0FFFFFEFFFFFE0007C00007C0
0007C00007C00007C00007C000FFFE00FFFE171D7F9C1A>I<3803803FFF803FFF003FFE003FFC
003FF0003F800030000030000030000030000033F80037FE003C1F00380F801007C00007C00007
E00007E07807E0FC07E0FC07E0FC07E0FC07C0780FC0600F80381F001FFC0007F000131D7D9C1A
>I<003F0001FFC007E0E00F81E01F03F01E03F03E03F07C03F07C01E07C0000FC1000FCFF00FD
FFC0FD03E0FE01F0FE01F0FC01F8FC01F8FC01F8FC01F87C01F87C01F87C01F83C01F03E01F01E
03E00F07C007FF8001FE00151D7E9C1A>I<6000007FFFF87FFFF87FFFF07FFFE07FFFC0E00180
C00300C00300C00600000C0000180000380000380000780000700000F00000F00001F00001F000
01F00001F00003F00003F00003F00003F00003F00003F00001E00000C000151E7D9D1A>I<01FC
0007FF000F07801E03C01C01E03C01E03C01E03E01E03F01E03FC3C01FE3801FFF000FFE0007FF
8007FFC01FFFE03C3FF0780FF07803F8F001F8F000F8F00078F00078F000707800707C00E03E03
C00FFF8003FC00151D7E9C1A>I<01FC000FFF001F07803E03C07C03E07C01E0FC01F0FC01F0FC
01F0FC01F8FC01F8FC01F8FC01F87C03F87C03F83E05F81FFDF807F9F80041F80001F03C01F07E
01F07E03E07E03E07E07C03C0780381F001FFC0007F000151D7E9C1A>I<387CFEFEFE7C380000
00000000387CFEFEFE7C3807147D930E>I<7FFFFFFF80FFFFFFFFC0FFFFFFFFC0000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
FFFFFFFFC0FFFFFFFFC07FFFFFFF80220F7D9229>61 D<07F8001FFE00381F80780F80FC0FC0FC
0FC0FC0FC0780FC0301F80001F00003E00007C0000700000E00000E00000C00000C00000C00000
C00000C00000C00000000000000000000000000001C00003E00007F00007F00007F00003E00001
C00012207D9F19>63 D<0000C000000001E000000001E000000001E000000003F000000003F000
000007F800000007F80000000FFC0000000CFC0000000CFC000000187E000000187E000000387F
000000303F000000303F000000601F800000601F800000E01FC00000C00FC00000FFFFC00001FF
FFE000018007E000038007F000030003F000030003F000060001F800060001F8000E0001FC00FF
E01FFFC0FFE01FFFC0221F7E9E27>65 D<FFFFFE00FFFFFFC007C007E007C003F007C001F807C0
01FC07C001FC07C001FC07C001FC07C001FC07C001F807C003F807C007F007C00FE007FFFF8007
FFFFC007C003F007C001F807C001FC07C000FC07C000FE07C000FE07C000FE07C000FE07C000FE
07C000FC07C001FC07C003F807C007F0FFFFFFE0FFFFFF001F1F7E9E25>I<0007FC02003FFF0E
00FE03DE03F000FE07E0003E0FC0001E1F80001E3F00000E3F00000E7F0000067E0000067E0000
06FE000000FE000000FE000000FE000000FE000000FE000000FE0000007E0000007E0000067F00
00063F0000063F00000C1F80000C0FC0001807E0003803F0007000FE01C0003FFF800007FC001F
1F7D9E26>I<FFFFFE0000FFFFFFC00007E007F00007E001F80007E000FC0007E0007E0007E000
3F0007E0003F0007E0001F8007E0001F8007E0001F8007E0001FC007E0001FC007E0001FC007E0
001FC007E0001FC007E0001FC007E0001FC007E0001FC007E0001FC007E0001F8007E0001F8007
E0001F8007E0003F0007E0003F0007E0007E0007E000FC0007E001F80007E007F000FFFFFFC000
FFFFFE0000221F7E9E28>I<FFFFFFE0FFFFFFE007E007E007E001E007E000E007E0006007E000
7007E0003007E0003007E0603007E0603007E0600007E0E00007E1E00007FFE00007FFE00007E1
E00007E0E00007E0600007E0600C07E0600C07E0000C07E0001807E0001807E0001807E0003807
E0007807E000F807E003F0FFFFFFF0FFFFFFF01E1F7E9E22>I<FFFFFFE0FFFFFFE007E007E007
E001E007E000E007E0006007E0007007E0003007E0003007E0603007E0603007E0600007E0E000
07E1E00007FFE00007FFE00007E1E00007E0E00007E0600007E0600007E0600007E0000007E000
0007E0000007E0000007E0000007E0000007E0000007E00000FFFF8000FFFF80001C1F7E9E21>
I<0007FC0200003FFF0E0000FE03DE0003F000FE0007E0003E000FC0001E001F80001E003F0000
0E003F00000E007F000006007E000006007E00000600FE00000000FE00000000FE00000000FE00
000000FE00000000FE003FFFE0FE003FFFE07E00007E007E00007E007F00007E003F00007E003F
00007E001F80007E000FC0007E0007E0007E0003F000FE0000FE01FE00003FFF8E000007FC0600
231F7D9E29>I<FFFF0FFFF0FFFF0FFFF007E0007E0007E0007E0007E0007E0007E0007E0007E0
007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007
FFFFFE0007FFFFFE0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E00
07E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E00FFFF0FFF
F0FFFF0FFFF0241F7E9E29>I<FFFFFFFF07E007E007E007E007E007E007E007E007E007E007E0
07E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E0FFFFFFFF101F7E
9E14>I<03FFFC03FFFC000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000F
C0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0100FC07C0FC0FE0F
C0FE0FC0FE0F80FC1F80783F003FFE000FF000161F7F9E1B>I<FFFF00FFE0FFFF00FFE007E000
1E0007E000180007E000300007E000600007E001C00007E003800007E006000007E00C000007E0
18000007E030000007E0F0000007E1F8000007E3F8000007E6FC000007EC7E000007F87F000007
F03F000007E01F800007E00FC00007E00FE00007E007E00007E003F00007E001F80007E000FC00
07E000FC0007E0007E0007E0007F00FFFF03FFF0FFFF03FFF0241F7E9E29>I<FFFF8000FFFF80
0007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0
000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000C007E000C007
E000C007E001C007E001C007E001C007E0038007E0038007E00F8007E01F80FFFFFF80FFFFFF80
1A1F7E9E1F>I<FFE000003FF8FFF000007FF807F000007F0006F80000DF0006F80000DF0006F8
0000DF00067C00019F00067C00019F00063E00031F00063E00031F00061F00061F00061F00061F
00060F800C1F00060F800C1F000607C0181F000607C0181F000607C0181F000603E0301F000603
E0301F000601F0601F000601F0601F000600F8C01F000600F8C01F0006007D801F0006007D801F
0006003F001F0006003F001F0006003F001F0006001E001F00FFF01E03FFF8FFF00C03FFF82D1F
7E9E32>I<FFE000FFF0FFF000FFF007F000060007F800060006FC000600067E000600063F0006
00063F800600061F800600060FC006000607E006000603F006000601F806000601FC06000600FC
060006007E060006003F060006001F860006001FC60006000FE600060007E600060003F6000600
01FE00060000FE00060000FE000600007E000600003E000600001E000600000E00FFF0000600FF
F0000600241F7E9E29>I<001FF80000FFFF0001F81F8007E007E00FC003F01F8001F81F0000F8
3F0000FC7F0000FE7E00007E7E00007EFE00007FFE00007FFE00007FFE00007FFE00007FFE0000
7FFE00007FFE00007FFE00007F7E00007E7F0000FE7F0000FE3F0000FC3F8001FC1F8001F80FC0
03F007E007E001F81F8000FFFF00001FF800201F7D9E27>I<FFFFFE00FFFFFF8007E00FE007E0
03F007E001F807E001F807E001FC07E001FC07E001FC07E001FC07E001FC07E001F807E001F807
E003F007E00FE007FFFF8007FFFE0007E0000007E0000007E0000007E0000007E0000007E00000
07E0000007E0000007E0000007E0000007E0000007E00000FFFF0000FFFF00001E1F7E9E24>I<
001FF80000FFFF0001F81F8007E007E00FC003F01F8001F81F8001F83F0000FC7F0000FE7F0000
FE7E00007EFE00007FFE00007FFE00007FFE00007FFE00007FFE00007FFE00007FFE00007FFE00
007F7E00007E7E00007E7F0000FE3F0000FC3F87C1FC1F8FE1F80FD833F007F81FE001F81F8000
FFFF00001FFE0300000E0300000F0700000FFF000007FF000007FE000007FE000003FC000001F8
000000F020287D9E27>I<FFFFF80000FFFFFF000007E01FC00007E007E00007E003F00007E003
F00007E003F80007E003F80007E003F80007E003F80007E003F00007E003F00007E007E00007E0
1FC00007FFFF000007FFFC000007E03E000007E01F000007E00F800007E00F800007E00FC00007
E00FC00007E00FC00007E00FE00007E00FE00007E00FE00007E00FE03007E007F03007E003F860
FFFF01FFC0FFFF007F80241F7E9E27>I<03FC080FFF381E03F83800F8700078700038F00038F0
0018F00018F80000FC00007FC0007FFE003FFF801FFFC00FFFF007FFF000FFF80007F80000FC00
007C00003CC0003CC0003CC0003CE00038E00078F80070FE01E0E7FFC081FF00161F7D9E1D>I<
7FFFFFFC7FFFFFFC7C07E07C7007E01C6007E00C6007E00CE007E00EC007E006C007E006C007E0
06C007E0060007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007
E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E00003FFFFC003
FFFFC01F1E7E9D24>I<FFFF01FFE0FFFF01FFE007E0000C0007E0000C0007E0000C0007E0000C
0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E000
0C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0
000C0007E0000C0007E0000C0003E000180001F000180001F000300000F8006000007E03C00000
1FFF80000003FC0000231F7E9E28>I<FFFE007FF0FFFE007FF007E000070007E000060007F000
0E0003F0000C0003F8000C0001F800180001F800180000FC00300000FC00300000FE007000007E
006000007F006000003F00C000003F00C000001F818000001F818000001FC38000000FC3000000
0FE700000007E600000007E600000003FC00000003FC00000001F800000001F800000001F80000
0000F000000000F000000000600000241F7F9E27>I<FFFE0FFFC0FFE0FFFE0FFFC0FFE00FC000
FC000E000FE000FC000E0007E000FE000C0007E000FE000C0003F000FE00180003F001FF001800
03F001BF00180001F801BF00300001F8031F80300001FC031F80700000FC031F80600000FC060F
C06000007E060FC0C000007E0E0FE0C000007E0C07E0C000003F0C07E18000003F1803F1800000
3F9803F38000001F9803F30000001FB001FB0000000FF001FE0000000FF001FE0000000FE000FE
00000007E000FC00000007C0007C00000007C0007C00000003C000780000000380003800000001
8000300000331F7F9E36>I<FFFE007FF0FFFE007FF00FE000070007F0000E0003F8000C0003F8
00180001FC00380000FE00300000FE006000007F00E000003F80C000003F818000001FC3800000
0FE30000000FE600000007FE00000003FC00000003F800000001F800000001F800000001F80000
0001F800000001F800000001F800000001F800000001F800000001F800000001F800000001F800
00003FFFC000003FFFC000241F7F9E27>89 D<FEFEFEE0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0
E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0FEFEFE072D7BA10E>91
D<FEFEFE0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E
0E0E0E0EFEFEFE072D7FA10E>93 D<07FC001FFF003F0F803F07C03F03E03F03E00C03E00003E0
007FE007FFE01F03E03E03E07C03E0F803E0F803E0F803E0FC05E07E0DE03FF8FE0FE07E17147F
9319>97 D<FF0000FF00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F
00001F1FC01F7FF01FE0F81F807C1F007E1F003E1F003E1F003F1F003F1F003F1F003F1F003F1F
003F1F003E1F003E1F007C1F807C1EC1F81C7FE0181F8018207E9F1D>I<01FE0007FF801F0FC0
3E0FC03E0FC07C0FC07C0300FC0000FC0000FC0000FC0000FC0000FC00007C00007E00003E0060
3F00C01F81C007FF0001FC0013147E9317>I<0007F80007F80000F80000F80000F80000F80000
F80000F80000F80000F80000F80000F801F8F80FFEF81F83F83E01F87E00F87C00F87C00F8FC00
F8FC00F8FC00F8FC00F8FC00F8FC00F87C00F87C00F87E00F83E01F81F07F80FFEFF03F8FF1820
7E9F1D>I<01FE0007FF800F83C01E01E03E00F07C00F07C00F8FC00F8FFFFF8FFFFF8FC0000FC
0000FC00007C00007C00003E00181E00180F807007FFE000FF8015147F9318>I<001F8000FFC0
01F3E003E7E003C7E007C7E007C3C007C00007C00007C00007C00007C000FFFC00FFFC0007C000
07C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C000
07C00007C0003FFC003FFC0013207F9F10>I<01FC3C07FFFE0F079E1E03DE3E03E03E03E03E03
E03E03E03E03E01E03C00F07800FFF0009FC001800001800001C00001FFF800FFFF007FFF81FFF
FC3C007C70003EF0001EF0001EF0001E78003C78003C3F01F80FFFE001FF00171E7F931A>I<FF
0000FF00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F0FC01F
3FE01F61F01FC0F81F80F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F
00F81F00F81F00F81F00F8FFE3FFFFE3FF18207D9F1D>I<1C003E007F007F007F003E001C0000
0000000000000000000000FF00FF001F001F001F001F001F001F001F001F001F001F001F001F00
1F001F001F001F00FFE0FFE00B217EA00E>I<0038007C00FE00FE00FE007C0038000000000000
00000000000001FE01FE003E003E003E003E003E003E003E003E003E003E003E003E003E003E00
3E003E003E003E003E003E303E783EFC3CFC7C78783FF01FC00F2A83A010>I<FF0000FF00001F
00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F01FE1F01FE1F00F01F
00C01F03801F07001F0C001F18001F7C001FFC001F9E001F0F001E0F801E07C01E03C01E01E01E
01F01E00F8FFC3FFFFC3FF18207E9F1C>I<FF00FF001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
FFE0FFE00B207E9F0E>I<FE0FE03F80FE1FF07FC01E70F9C3E01E407D01F01E807E01F01F807E
01F01F007C01F01F007C01F01F007C01F01F007C01F01F007C01F01F007C01F01F007C01F01F00
7C01F01F007C01F01F007C01F01F007C01F01F007C01F0FFE3FF8FFEFFE3FF8FFE27147D932C>
I<FE0FC0FE3FE01E61F01EC0F81E80F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00
F81F00F81F00F81F00F81F00F81F00F8FFE3FFFFE3FF18147D931D>I<01FF0007FFC01F83F03E
00F83E00F87C007C7C007CFC007EFC007EFC007EFC007EFC007EFC007E7C007C7C007C3E00F83E
00F81F83F007FFC001FF0017147F931A>I<FF1FC0FF7FF01FE1F81F80FC1F007E1F007E1F003E
1F003F1F003F1F003F1F003F1F003F1F003F1F003E1F007E1F007C1F80FC1FC1F81F7FE01F1F80
1F00001F00001F00001F00001F00001F00001F0000FFE000FFE000181D7E931D>I<01F81807FE
381F87783F01F83E01F87E00F87C00F8FC00F8FC00F8FC00F8FC00F8FC00F8FC00F87C00F87E00
F87E00F83F01F81F87F80FFEF803F8F80000F80000F80000F80000F80000F80000F80000F80007
FF0007FF181D7E931C>I<FE3C00FEFF001EDF801F9F801F9F801F1F801F06001F00001F00001F
00001F00001F00001F00001F00001F00001F00001F00001F0000FFF000FFF00011147E9315>I<
0FE63FFE701E600EE006E006F800FFC07FF83FFC1FFE03FE001FC007C007E007F006F81EFFFCC7
F010147E9315>I<01800180018003800380038007800F803F80FFFCFFFC0F800F800F800F800F
800F800F800F800F800F800F860F860F860F860F8607CC03F801F00F1D7F9C14>I<FF07F8FF07
F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00
F81F01F81F01F80F06F807FCFF03F8FF18147D931D>I<FFE07F80FFE07F801F001C000F801800
0F80180007C0300007C0300003E0600003E0600001F0C00001F0C00001F9C00000F9800000FF80
00007F0000007F0000003E0000003E0000001C0000001C000019147F931C>I<FFE7FE1FE0FFE7
FE1FE01F00F003001F00F803000F80F806000F80F8060007C1BC0C0007C1BC0C0007C1BE0C0003
E31E180003E31E180001F60F300001F60F300001F60FB00000FC07E00000FC07E000007803C000
007803C000007803C000003001800023147F9326>I<FFE1FF00FFE1FF000F80700007C0E00007
E0C00003E1800001F3800000FF0000007E0000003E0000003F0000007F8000006F800000C7C000
0183E0000381F0000701F8000E00FC00FF81FF80FF81FF8019147F931C>I<FFE07F80FFE07F80
1F001C000F8018000F80180007C0300007C0300003E0600003E0600001F0C00001F0C00001F9C0
0000F9800000FF8000007F0000007F0000003E0000003E0000001C0000001C0000001800000018
000078300000FC300000FC600000C0E00000E1C000007F8000001E000000191D7F931C>I<3FFF
E03FFFE03C07C0380F80701F80603F00603E00607C0000F80001F80003F00003E06007C0600F80
601F80E03F00C03E01C07C03C0FFFFC0FFFFC013147F9317>I<FFFFFF80FFFFFF801902808C1A>
I<FFFFFFFFFFFFE0FFFFFFFFFFFFE03302808C34>I E /FD 88 126 df<70F8F8F8F8F8F8F8F8
F8F8F8F8F8F8F8F870000000000070F8F8F870051C779B18>33 D<4010E038F078E038E038E038
E038E038E038E038E038E038E03860300D0E7B9C18>I<030600078F00078F00078F00078F0007
8F00078F007FFFC0FFFFE0FFFFE07FFFC00F1E000F1E000F1E000F1E000F1E000F1E007FFFC0FF
FFE0FFFFE07FFFC01E3C001E3C001E3C001E3C001E3C001E3C000C1800131C7E9B18>I<00C000
01C00001C00001C00003F0000FFC003FFE007DCF0071C700E1C380E1C780E1C780E1C780F1C000
79C0003DC0001FE0000FF80003FC0001DE0001CF0001C70061C380F1C380F1C380E1C380E1C700
71C70079DE003FFE001FF80007E00001C00001C00001C00000C00011247D9F18>I<3803007C07
807C0780EE0F80EE0F00EE0F00EE1F00EE1E00EE1E00EE3E007C3C007C3C00387C000078000078
0000F80000F00001F00001E00001E00003E00003C00003C00007C0000783800787C00F87C00F0E
E00F0EE01F0EE01E0EE01E0EE03E0EE03C07C03C07C018038013247E9F18>I<01C00007E0000F
F0000E70001C38001C38001C38001C38001C73F01C73F01CE3F00FE3800FC7000F87000F07001F
0E003F0E007B8E0073DC00E1DC00E0F800E0F800E07070E0787070FC707FFFE03FCFE00F03C014
1C7F9B18>I<007000F001E003C007800F001E001C00380038007000700070007000E000E000E0
00E000E000E000E000E0007000700070007000380038001C001E000F00078003C001F000F00070
0C24799F18>40 D<6000F00078003C001E000F000780038001C001C000E000E000E000E0007000
7000700070007000700070007000E000E000E000E001C001C0038007800F001E003C007800F000
60000C247C9F18>I<01C00001C00001C00001C000C1C180F1C780F9CF807FFF001FFC0007F000
07F0001FFC007FFF00F9CF80F1C780C1C18001C00001C00001C00001C00011147D9718>I<0060
0000F00000F00000F00000F00000F00000F00000F0007FFFC0FFFFE0FFFFE07FFFC000F00000F0
0000F00000F00000F00000F00000F00000600013147E9718>I<1C3E7E7F3F1F070E1E7CF86008
0C788518>I<7FFF00FFFF80FFFF807FFF0011047D8F18>I<3078FCFC78300606778518>I<0003
00000780000780000F80000F00001F00001E00001E00003E00003C00007C0000780000780000F8
0000F00001F00001E00003E00003C00003C00007C0000780000F80000F00000F00001F00001E00
003E00003C00003C00007C0000780000F80000F00000F0000060000011247D9F18>I<01F00007
FC000FFE001F1F001C07003803807803C07001C07001C0E000E0E000E0E000E0E000E0E000E0E0
00E0E000E0E000E0E000E0F001E07001C07001C07803C03803801C07001F1F000FFE0007FC0001
F000131C7E9B18>I<01800380038007800F803F80FF80FB804380038003800380038003800380
03800380038003800380038003800380038003807FFCFFFE7FFC0F1C7B9B18>I<03F0000FFE00
3FFF007C0F807003C0E001C0F000E0F000E06000E00000E00000E00001C00001C00003C0000780
000F00001E00003C0000780000F00001E00007C0000F80001E00E03C00E07FFFE0FFFFE07FFFE0
131C7E9B18>I<07F8001FFE003FFF007807807803C07801C03001C00001C00003C0000380000F
0003FF0003FE0003FF000007800003C00001C00000E00000E00000E0F000E0F000E0F001C0F003
C07C07803FFF001FFE0003F800131C7E9B18>I<001F00003F0000770000770000E70001E70001
C7000387000787000707000E07001E07003C0700380700780700F00700FFFFF8FFFFF8FFFFF800
0700000700000700000700000700000700007FF000FFF8007FF0151C7F9B18>I<1FFF803FFF80
3FFF803800003800003800003800003800003800003800003800003BF8003FFE003FFF003C0780
1803C00001C00000E00000E06000E0F000E0F000E0E001C07003C07C0F803FFF001FFC0003F000
131C7E9B18>I<007E0001FF0007FF800F83C01E03C01C03C0380180380000700000700000E1F8
00E7FE00FFFF00FE0780F803C0F001C0F000E0E000E0F000E07000E07000E07000E03801C03C03
C01E07800FFF0007FE0001F800131C7E9B18>I<E00000FFFFE0FFFFE0FFFFE0E003C0E0078000
0700000E00001E00001C0000380000380000700000700000E00000E00000E00001C00001C00001
C00001C00003C000038000038000038000038000038000038000038000131D7E9C18>I<03F800
0FFE001FFF003E0F803803807001C07001C07001C07001C03803803C07801FFF0007FC000FFE00
1F1F003C07807001C0F001E0E000E0E000E0E000E0E000E07001C07803C03E0F801FFF000FFE00
03F800131C7E9B18>I<03F0000FFC001FFE003C0F00780780700380E001C0E001C0E001C0E001
E0E001E07001E07803E03C0FE01FFFE00FFEE003F0E00000E00001C00001C00001C03003807807
80780F00783E003FFC001FF00007C000131C7E9B18>I<3078FCFC783000000000000000003078
FCFC78300614779318>I<183C7E7E3C180000000000000000183C7E7E3E1E0E1C3C78F060071A
789318>I<000300000780001F80003F00007E0001FC0003F00007E0001FC0003F00007E0000FC
0000FC00007E00003F00001FC00007E00003F00001FC00007E00003F00001F8000078000030011
187D9918>I<7FFFC0FFFFE0FFFFE0FFFFE0000000000000000000000000FFFFE0FFFFE0FFFFE0
7FFFC0130C7E9318>I<600000F00000FC00007E00003F00001FC00007E00003F00001FC00007E
00003F00001F80001F80003F00007E0001FC0003F00007E0001FC0003F00007E0000FC0000F000
0060000011187D9918>I<007C0001FE0007FF000F87801E03C03C1DC0387FC070FFE071E3E071
C1E0E1C1E0E380E0E380E0E380E0E380E0E380E0E380E0E1C1C071C1C071E3C070FF80387F003C
1C001E00E00F83E007FFC001FF80007E00131C7E9B18>64 D<00700000F80000F80000D80000D8
0001DC0001DC0001DC00018C00038E00038E00038E00038E000306000707000707000707000707
000FFF800FFF800FFF800E03800E03801C01C01C01C07F07F0FF8FF87F07F0151C7F9B18>I<FF
FC00FFFF00FFFF801C03C01C01C01C00E01C00E01C00E01C00E01C01E01C01C01C07C01FFF801F
FF001FFFC01C03C01C00E01C00F01C00701C00701C00701C00701C00F01C00E01C03E0FFFFC0FF
FF80FFFE00141C7F9B18>I<00F8E003FEE007FFE00F07E01E03E03C01E03800E07000E07000E0
700000E00000E00000E00000E00000E00000E00000E00000E000007000007000E07000E03800E0
3C00E01E01C00F07C007FF8003FE0000F800131C7E9B18>I<7FF800FFFE007FFF001C0F801C03
C01C03C01C01E01C00E01C00E01C00F01C00701C00701C00701C00701C00701C00701C00701C00
701C00F01C00E01C00E01C01E01C01C01C03C01C0F807FFF00FFFE007FF800141C7F9B18>I<FF
FFF0FFFFF0FFFFF01C00701C00701C00701C00701C00001C00001C0E001C0E001C0E001FFE001F
FE001FFE001C0E001C0E001C0E001C00001C00001C00381C00381C00381C00381C0038FFFFF8FF
FFF8FFFFF8151C7F9B18>I<FFFFE0FFFFE0FFFFE01C00E01C00E01C00E01C00E01C00001C0000
1C1C001C1C001C1C001FFC001FFC001FFC001C1C001C1C001C1C001C00001C00001C00001C0000
1C00001C00001C0000FFC000FFC000FFC000131C7E9B18>I<01F1C003FDC00FFFC01F0FC01C03
C03803C03801C07001C07001C0700000E00000E00000E00000E00000E00000E00FF0E01FF0E00F
F07001C07001C07003C03803C03803C01C07C01F0FC00FFFC003FDC001F1C0141C7E9B18>I<7F
07F0FF8FF87F07F01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01FFFC01F
FFC01FFFC01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C07F07F0FF
8FF87F07F0151C7F9B18>I<7FFF00FFFF807FFF0001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C0007FFF00FFFF807FFF00111C7D9B18>I<01FFC003FFC001FFC0000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E
00000E00000E00000E00000E00F00E00F00E00F03C007FFC003FF0000FC000121C7D9B18>I<7F
07F0FF87F87F07F01C03C01C07801C07001C0E001C1E001C3C001C38001C70001CF0001DF0001D
F0001FB8001FB8001F1C001E1C001C0E001C0E001C07001C07001C03801C03801C01C07F03F0FF
87F87F03F0151C7F9B18>I<7FE000FFE0007FE0000E00000E00000E00000E00000E00000E0000
0E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00700E0070
0E00700E00700E00707FFFF0FFFFF07FFFF0141C7F9B18>I<FC01F8FE03F8FE03F83B06E03B06
E03B06E03B06E03B8EE03B8EE0398CE0398CE039DCE039DCE039DCE038D8E038D8E038F8E03870
E03870E03800E03800E03800E03800E03800E03800E0FE03F8FE03F8FE03F8151C7F9B18>I<7E
07F0FF0FF87F07F01D81C01D81C01D81C01DC1C01CC1C01CC1C01CE1C01CE1C01CE1C01C61C01C
71C01C71C01C31C01C39C01C39C01C39C01C19C01C19C01C1DC01C0DC01C0DC01C0DC07F07C0FF
87C07F03C0151C7F9B18>I<0FF8003FFE007FFF00780F00700700F00780E00380E00380E00380
E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380
F00780700700780F007FFF003FFE000FF800111C7D9B18>I<FFFE00FFFF80FFFFC01C03C01C01
E01C00E01C00701C00701C00701C00701C00701C00E01C01E01C03C01FFFC01FFF801FFE001C00
001C00001C00001C00001C00001C00001C00001C0000FF8000FF8000FF8000141C7F9B18>I<0F
F8003FFE007FFF00780F00700700F00780E00380E00380E00380E00380E00380E00380E00380E0
0380E00380E00380E00380E00380E00380E00380E1E380E1E380F0E78070F700787F007FFF003F
FE000FFC00001C00001E00000E00000F0000070000070011227D9B18>I<7FF800FFFE007FFF00
1C0F801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F801FFF001FFE001FFE001C0F00
1C07001C03801C03801C03801C03801C03801C039C1C039C1C039C7F01F8FF81F87F00F0161C7F
9B18>I<03F3801FFF803FFF807C0F80700780E00380E00380E00380E000007000007800003F00
001FF00007FE0000FF00000F800003C00001C00000E00000E06000E0E000E0E001E0F001C0F807
80FFFF80FFFE00E7F800131C7E9B18>I<7FFFF8FFFFF8FFFFF8E07038E07038E07038E0703800
700000700000700000700000700000700000700000700000700000700000700000700000700000
700000700000700000700000700007FF0007FF0007FF00151C7F9B18>I<FF83FEFF83FEFF83FE
1C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C0070
1C00701C00701C00701C00701C00701C00700E00E00F01E00783C003FF8001FF00007C00171C80
9B18>I<FF07F8FF07F8FF07F81C01C01C01C01C01C01C01C00E03800E03800E03800E03800F07
80070700070700070700070700038E00038E00038E00038E00018C0001DC0001DC0001DC0000D8
0000F80000F800007000151C7F9B18>I<FE03F8FE03F8FE03F87000707000707000703800E038
00E03800E03800E03800E038F8E038F8E039DCE039DCE019DCC019DCC019DCC0198CC01D8DC01D
8DC01D8DC01D8DC00D8D800D05800F07800F07800E0380151C7F9B18>I<7F8FE07F9FE07F8FE0
0E07000F0700070E00078E00039C0003DC0001F80001F80000F00000F00000700000F00000F800
01F80001DC00039E00038E00070F000707000E07800E03801E03C07F07F0FF0FF87F07F0151C7F
9B18>I<FF07F8FF07F8FF07F81C01C01E03C00E03800F0780070700070700038E00038E0001DC
0001DC0001DC0000F80000F8000070000070000070000070000070000070000070000070000070
0001FC0003FE0001FC00151C7F9B18>I<3FFFE07FFFE07FFFE07001C07003C070078070070000
0F00001E00001C00003C0000780000700000F00001E00001C00003C0000780000700000F00001E
00E01C00E03C00E07800E07000E0FFFFE0FFFFE0FFFFE0131C7E9B18>I<FFF8FFF8FFF8E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E000E000FFF8FFF8FFF80D24779F18>I<600000F00000F000
00F800007800007C00003C00003C00003E00001E00001F00000F00000F00000F800007800007C0
0003C00003C00003E00001E00001F00000F00000F800007800007800007C00003C00003E00001E
00001E00001F00000F00000F8000078000078000030011247D9F18>I<FFF8FFF8FFF800380038
003800380038003800380038003800380038003800380038003800380038003800380038003800
3800380038003800380038003800380038FFF8FFF8FFF80D247F9F18>I<7FFF00FFFF80FFFF80
7FFF0011047D7F18>95 D<1FE0003FF8007FFC00781E00300E0000070000070000FF0007FF001F
FF007F0700780700E00700E00700E00700F00F00781F003FFFF01FFBF007E1F014147D9318>97
D<7E0000FE00007E00000E00000E00000E00000E00000E00000E3E000EFF800FFFC00FC1E00F80
E00F00700E00700E00380E00380E00380E00380E00380E00380F00700F00700F80E00FC1E00FFF
C00EFF80063E00151C809B18>I<01FE0007FF001FFF803E0780380300700000700000E00000E0
0000E00000E00000E00000E000007000007001C03801C03E03C01FFF8007FF0001FC0012147D93
18>I<001F80003F80001F8000038000038000038000038000038003E3800FFB801FFF803C1F80
380F80700780700380E00380E00380E00380E00380E00380E00380700780700780380F803C1F80
1FFFF00FFBF803E3F0151C7E9B18>I<01F00007FC001FFE003E0F00380780700380700380E001
C0E001C0FFFFC0FFFFC0FFFFC0E000007000007001C03801C03E03C01FFF8007FF0001FC001214
7D9318>I<001F80007FC000FFE000E1E001C0C001C00001C00001C0007FFFC0FFFFC0FFFFC001
C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001
C0007FFF007FFF007FFF00131C7F9B18>I<01E1F007FFF80FFFF81E1E301C0E00380700380700
3807003807003807001C0E001E1E001FFC001FF80039E0003800001C00001FFE001FFFC03FFFE0
7801F0700070E00038E00038E00038E000387800F07E03F01FFFC00FFF8001FC00151F7F9318>
I<7E0000FE00007E00000E00000E00000E00000E00000E00000E3E000EFF800FFFC00FC1C00F80
E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E07FC3
FCFFE7FE7FC3FC171C809B18>I<03800007C00007C00007C00003800000000000000000000000
00007FC000FFC0007FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001
C00001C00001C00001C00001C000FFFF00FFFF80FFFF00111D7C9C18>I<0038007C007C007C00
3800000000000000000FFC1FFC0FFC001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C6038F078FFF07FE03F800E277E9C18>I<FE00
00FE0000FE00000E00000E00000E00000E00000E00000E3FF00E7FF00E3FF00E07800E0F000E1E
000E3C000E78000EF0000FF8000FFC000F9C000F0E000E0F000E07000E03800E03C0FFC7F8FFC7
F8FFC7F8151C7F9B18>I<7FE000FFE0007FE00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E00000E0007FFFC0FFFFE07FFFC0131C7E9B18>I<7CE0E000FFFBF8007FFFF8001F1F1C
001E1E1C001E1E1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C
1C001C1C1C001C1C1C001C1C1C007F1F1F00FFBFBF807F1F1F001914819318>I<7E3E00FEFF80
7FFFC00FC1C00F80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E0
0E00E00E00E07FC3FCFFE7FE7FC3FC1714809318>I<01F0000FFE001FFF003E0F803803807001
C07001C0E000E0E000E0E000E0E000E0E000E0F001E07001C07803C03C07803E0F801FFF000FFE
0001F00013147E9318>I<7E3E00FEFF807FFFC00FC1E00F80E00F00700E00700E00380E00380E
00380E00380E00380E00380F00700F00700F80E00FC1E00FFFC00EFF800E3E000E00000E00000E
00000E00000E00000E00000E00007FC000FFE0007FC000151E809318>I<01E38007FB801FFF80
3E1F80380F80700780700780E00380E00380E00380E00380E00380E00380700780700780380F80
3C1F801FFF800FFB8003E380000380000380000380000380000380000380000380003FF8003FF8
003FF8151E7E9318>I<7F87E0FF9FF07FBFF803F87803F03003E00003C00003C0000380000380
000380000380000380000380000380000380000380007FFE00FFFF007FFE0015147F9318>I<07
F7003FFF007FFF00780F00E00700E00700E007007C00007FE0001FFC0003FE00001F00600780E0
0380E00380F00380F80F00FFFF00FFFC00E7F00011147D9318>I<018000038000038000038000
0380007FFFC0FFFFC0FFFFC0038000038000038000038000038000038000038000038000038000
0380400380E00380E00380E001C1C001FFC000FF80003E0013197F9818>I<7E07E0FE0FE07E07
E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E01
E00F03E007FFFC03FFFE01FCFC1714809318>I<7F8FF0FF8FF87F8FF01E03C00E03800E03800E
0380070700070700070700038E00038E00038E00038E0001DC0001DC0001DC0000F80000F80000
700015147F9318>I<FF8FF8FF8FF8FF8FF83800E03800E03800E01C01C01C01C01C71C01CF9C0
1CF9C01CD9C01CD9C00DDD800DDD800DDD800D8D800F8F800F8F8007070015147F9318>I<7F8F
F07F9FF07F8FF0070700078E00039E0001DC0001F80000F80000700000F00000F80001DC00039E
00038E000707000F07807F8FF0FF8FF87F8FF015147F9318>I<7F8FF0FF8FF87F8FF00E01C00E
03800E0380070380070700070700038700038600038E0001CE0001CE0000CC0000CC0000DC0000
780000780000780000700000700000700000F00000E00079E0007BC0007F80003F00001E000015
1E7F9318>I<3FFFF07FFFF07FFFF07001E07003C0700780000F00001E00003C0000F80001F000
03C0000780000F00701E00703C0070780070FFFFF0FFFFF0FFFFF014147F9318>I<0007E0001F
E0007FE000780000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0
0001E0007FC000FF8000FF80007FC00001E00000E00000E00000E00000E00000E00000E00000E0
0000E00000E00000E00000E000007800007FE0001FE00007E013247E9F18>I<7C0000FF0000FF
C00003C00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
F000007FC0003FE0003FE0007FC000F00000E00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00003C000FFC000FF00007C000013247E9F18>125
D E /FE 19 121 df<000100000003800000038000000380000007C0000007C0000007C0000009
E0000009E0000011F0000010F0000010F00000207800002078000020780000403C0000403C0000
C03E0000801E0000801E0001FFFF0001000F0001000F000200078002000780060007C0040003C0
040003C00C0001E00C0001E03E0003F0FF801FFE1F207D9F25>65 D<000FE01000381C3000E002
7003C00170078000F00F0000701E0000701E0000303C0000303C0000107C00001078000010F800
0000F8000000F8000000F8000000F8000000F8000000F8000000F8000000F8000000780000007C
0000103C0000103C0000101E0000201E0000200F0000200780004003C0008000E0030000380C00
000FF0001C217C9F24>67 D<FFFFF8000F801E0007800780078003C0078001E0078000F0078000
7007800078078000780780003C0780003C0780003C0780003E0780003E0780003E0780003E0780
003E0780003E0780003E0780003E0780003C0780003C0780007C0780007807800078078000F007
8001E0078003C0078007800F801E00FFFFF8001F1F7D9E26>I<FFFFFFC00F8007C0078001C007
8000C0078000400780006007800020078000200780002007802020078020000780200007806000
0780E00007FFE0000780E000078060000780200007802000078020000780000807800008078000
080780001007800010078000100780003007800070078000E00F8003E0FFFFFFE01D1F7D9E22>
I<FFFFFF800F800780078001800780018007800080078000C00780004007800040078000400780
0040078040000780400007804000078040000780C00007FFC0000780C000078040000780400007
804000078040000780000007800000078000000780000007800000078000000780000007800000
0FC00000FFFE00001A1F7D9E20>I<FFFC0FC00780078007800780078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800FC0FFFC0E
1F7E9E12>73 D<FFFE00000FC00000078000000780000007800000078000000780000007800000
078000000780000007800000078000000780000007800000078000000780000007800000078000
000780000007800000078000800780008007800080078000800780018007800100078003000780
0300078007000F801F00FFFFFF00191F7D9E1F>76 D<FF800007FE0F800007E007800007C005C0
000BC005C0000BC004E00013C004E00013C004E00013C004700023C004700023C004380043C004
380043C004380043C0041C0083C0041C0083C0040E0103C0040E0103C0040E0103C004070203C0
04070203C004070203C004038403C004038403C00401C803C00401C803C00401C803C00400F003
C00400F003C00E006003C01F006007E0FFE0607FFE271F7D9E2D>I<FF800FFE07C001F007C000
E005E0004004F0004004F0004004780040043C0040043C0040041E0040040F0040040F00400407
80400403C0400403C0400401E0400400F0400400F0400400784004003C4004003C4004001E4004
000F4004000F40040007C0040003C0040003C0040001C00E0000C01F0000C0FFE000401F1F7D9E
25>I<001FE0000070380001C00E0003800700070003800F0003C01E0001E03C0000F03C0000F0
7C0000F87C0000F878000078F800007CF800007CF800007CF800007CF800007CF800007CF80000
7CF800007CF800007C780000787C0000F87C0000F83C0000F03E0001F01E0001E00F0003C00700
03800380070001E01E0000703800001FE0001E217C9F26>I<FFFFC0000F80780007801E000780
0F0007800F8007800780078007C0078007C0078007C0078007C00780078007800F8007800F0007
801E000780780007FFC0000780E000078030000780380007801C0007801E0007801E0007801E00
07801F0007801F0007801F0007801F0107801F8107800F810FC00782FFFC03C4000000F820207D
9E24>82 D<03F0200C0C601803E03000E06000E0600060E00060E00020E00020E00020F00000F8
00007C00007F80003FFC001FFF0007FF8001FFC0000FE00003E00001F00000F000007080007080
0070800070800070C00060C000E0E000C0F80180C6030081FC0014217C9F1C>I<7FFFFFF87807
8078600780184007800840078008C007800C800780048007800480078004800780040007800000
078000000780000007800000078000000780000007800000078000000780000007800000078000
0007800000078000000780000007800000078000000780000007800000078000000FC00003FFFF
001E1F7D9E24>I<FFF03FFC07FC1F8007E001F00F0003C000E00F0003C000400F0003E0004007
8003E00080078003E00080078007F0008003C004F0010003C004F0010003C00CF8010001E00878
020001E00878020001E0187C020000F0103C040000F0103C040000F0103E04000078201E080000
78201E08000078201F0800003C400F1000003C400F1000003C400F1000001E8007A000001E8007
A000001E8007A000000F0003C000000F0003C000000F0003C00000060001800000060001800000
06000180002E207E9E32>87 D<FFF000FF801F80003E000F8000180007C000100003C000300003
E000200001F000400000F000400000F8008000007C010000003C010000003E020000001F060000
000F040000000F8800000007C800000003D000000003F000000001E000000001E000000001E000
000001E000000001E000000001E000000001E000000001E000000001E000000001E000000001E0
00000003E00000003FFF0000211F7E9E25>89 D<FF801C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C00FF8009177E960E>105
D<FC07F01C01C01E008017008017008013808011808011C08010E08010E0801070801070801038
80101C80101C80100E80100E80100780100380100380100180380180FE008014177D961C>110
D<FF87F01C01C01C00801C00801C00801C00801C00801C00801C00801C00801C00801C00801C00
801C00801C00801C00801C00801C00800C01000E010006020003840000F80014177D961C>117
D<FF81FE1F00F00F00E00700C003808003C10001C20000E60000F400007800003800001C00003E
00004E0000C7000087800103800301C00200E00400F00C00703C00F8FF01FF18177F961C>120
D E /FF 37 122 df<0000F000F8F001F8F003F8F00780000700000F00000F00000F00000F0000
0F00000F00000F0000FFF8F0FFF8F0FFF8F00F00F00F00F00F00F00F00F00F00F00F00F00F00F0
0F00F00F00F00F00F00F00F00F00F00F00F00F00F00F00F00F00F00F00F0142180A018>12
D<787878781830306060E0050A7D830D>44 D<FFC0FFC0FFC00A037F8B0F>I<F0F0F0F004047C
830D>I<F0F0F0F0000000000000000000000000F0F0F0F004147C930D>58
D<001F0000001F0000003F8000003B8000003B8000007BC0000073C0000071C00000F1E00000E1
E00000E0E00001E0F00001E0F00001C0F00003C0780003C078000380780007803C0007803C0007
003C000FFFFE000FFFFE000FFFFE001E000F001E000F003C000F803C0007803C000780780007C0
780003C0780003C0F00003E01B207F9F1E>65 D<FFFFC0FFFFC0FFFFC0F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000FFFF80FFFF80FFFF80F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000FFFFE0FFFFE0FFFFE013
207B9F1B>69 D<F00078F00078F00078F00078F00078F00078F00078F00078F00078F00078F000
78F00078F00078F00078FFFFF8FFFFF8FFFFF8F00078F00078F00078F00078F00078F00078F000
78F00078F00078F00078F00078F00078F00078F00078F0007815207B9F20>72
D<003C003C003C003C003C003C003C003C003C003C003C003C003C003C003C003C003C003C003C
003C003C003C003C003C003C003C003C003CC078E078FFF07FE00FC00E217E9F15>74
D<F0003EF0007CF000F8F001F0F003E0F007C0F00780F00F00F01F00F03E00F07C00F0F800F1F0
00F3F800F3F800F7FC00FFBC00FF1E00FE1F00FC0F00F80780F00780F003C0F003E0F001E0F000
F0F000F8F00078F0003CF0003CF0001EF0001F18207B9F20>I<F80001F8FC0003F8FC0003F8F4
000378F6000778F6000778F6000778F3000E78F3000E78F3000E78F3801E78F3801E78F1801C78
F1C03C78F1C03C78F0C03878F0C03878F0E07878F0E07878F0607078F070F078F070F078F030E0
78F039E078F039E078F019C078F019C078F019C078F00F8078F00F8078F00F8078F00000781D20
7B9F28>77 D<003F000000FFC00003FFF00007E1F8000F807C001F003E001E001E003C000F003C
000F00780007807800078078000780F00003C0F00003C0F00003C0F00003C0F00003C0F00003C0
F00003C0F00003C0F00003C0F80007C07800078078000780780007803C000F003C000F001E001E
001F003E000F807C0007E1F80003FFF00000FFC000003F00001A227DA021>79
D<FFF800FFFF00FFFF80F00FC0F003E0F001E0F000F0F000F0F000F0F000F0F000F0F000F0F000
F0F001E0F003E0F00FC0FFFF80FFFF00FFF800F00000F00000F00000F00000F00000F00000F000
00F00000F00000F00000F00000F00000F0000014207B9F1D>I<01FC0007FF800FFFC01F03C03C
00C03C00007800007800007800007800007800007C00003C00003F00001FE0000FFC0007FE0001
FF00003F800007C00003C00003E00001E00001E00001E00001E00001E00001C0C003C0F007C0FC
0F807FFF001FFE0003F80013227EA019>83 D<FFFFFFC0FFFFFFC0FFFFFFC0001E0000001E0000
001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E00
00001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E0000001E
0000001E0000001E0000001E0000001E0000001E0000001E0000001E00001A207E9F1F>I<07E0
3FF87FFC701E401F000F000F000F003F07FF1FFF7E0FF80FF00FF00FF00FF83F7FFF3FEF1F8F10
147E9316>97 D<F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F000
00F00000F1F000F7FC00FFFE00FC3E00F80F00F00F00F00780F00780F00780F00780F00780F007
80F00780F00F00F00F00F81F00FC3E00FFFC00F7F800F1E00011207D9F17>I<03F00FFC1FFE3E
0E3C0278007800F000F000F000F000F000F000780078003C013E0F1FFF0FFE03F010147E9314>
I<00078000078000078000078000078000078000078000078000078000078000078000078007C7
800FF7801FFF803E1F807C0780780780F80780F00780F00780F00780F00780F00780F00780F007
80780780780F803E1F801FFF800FF78007C78011207E9F17>I<03F0000FFC001FFE003E1F003C
0700780700700380FFFF80FFFF80FFFF80F00000F00000F000007000007800003C01003E07001F
FF0007FE0001F80011147F9314>I<007E01FE03FE078007000F000F000F000F000F000F000F00
FFF0FFF0FFF00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F
000F20809F0E>I<03E0F00FFFF01FFFF03E3E003C1E00780F00780F00780F00780F00780F003C
1E003E3E001FFC003FF80033E0003000003800003FFE003FFF801FFFC03FFFE07803F0F000F0F0
00F0F000F0F801F07E07E03FFFC00FFF0003FC00141E7F9317>I<F000F000F000F000F000F000
F000F000F000F000F000F000F1F8F3FCF7FEFC1FF80FF80FF00FF00FF00FF00FF00FF00FF00FF0
0FF00FF00FF00FF00FF00FF00F10207D9F17>I<F0F0F0F00000000000000000F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F004207D9F0B>I<F00000F00000F00000F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F01F00F01E00F03C00F07800F0F000F1E000F3C000F7
8000FFC000FFC000FFE000F9F000F8F000F0F800F07C00F07C00F03E00F01E00F01F00F00F8011
207D9F16>107 D<F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F004207D9F0B>I<F0FC07E0F3FE1FF0F7FF3FF8FE0F7078F807C03CF807C03CF007803CF00780
3CF007803CF007803CF007803CF007803CF007803CF007803CF007803CF007803CF007803CF007
803CF007803CF007803C1E147D9325>I<F1F8F3FCF7FEFC1FF80FF80FF00FF00FF00FF00FF00F
F00FF00FF00FF00FF00FF00FF00FF00FF00F10147D9317>I<01F80007FE001FFF803F0FC03C03
C07801E07801E0F000F0F000F0F000F0F000F0F000F0F000F07801E07801E03C03C03F0FC01FFF
8007FE0001F80014147F9317>I<F1F000F7FC00FFFE00FC3E00F81F00F00F00F00F80F00780F0
0780F00780F00780F00780F00780F00F00F00F00F81F00FC3E00FFFC00F7F800F1E000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000111D7D9317>I<F0E0F3E0F7E0FF00FC
00FC00F800F800F000F000F000F000F000F000F000F000F000F000F000F0000B147D9310>114
D<07F01FFC3FFC780C7800780078007C003FC01FF00FF803F8007C003C003CC03CF07CFFF87FF0
0FC00E147F9311>I<1E001E001E001E001E001E00FFF0FFF0FFF01E001E001E001E001E001E00
1E001E001E001E001E001E001E001E201FF00FF007C00C1A7F9910>I<F00FF00FF00FF00FF00F
F00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF01FF03FFFFF7FEF3F0F10147D9317>I<F003
C0F003C07803807807807807803C0F003C0F003C0F001E0E001E1E001E1E000F1C000F3C000F3C
0007380007380007B80003F00003F00001E00012147F9315>I<F01F00F0F01F80F0F01F80F078
1B81E0783B81E0783BC1E07839C1E03C31C3C03C71C3C03C71E3C01C70E3801E60E7801E60E780
1EE0E7800EE077000EC077000EC0770007C07E0007C03E0007803E001C147F931F>I<F003C0F0
03C07807807807807C07803C0F003C0F001E0F001E1E000E1E000F1C000F1C00073C0007380003
B80003B80003B00001F00001F00000E00000E00001C00001C00003C0000380000780007F00007E
00007C0000121D7F9315>121 D E /FG 8 122 df<FFFFFFC0FFFFFFC01A027C8B23>0
D<0001FE00000007FF8000001E01E000007800780000E0001C0001800006000300000300060000
01800C000000C00C000000C0180000006030000000303000000030300000003060000000186000
0000186000000018C00000000CC00000000CC00000000CC00000000CC00000000CC00000000CC0
0000000CC00000000CC00000000C60000000186000000018600000001830000000303000000030
300000003018000000600C000000C00C000000C006000001800300000300018000060000E0001C
000078007800001E01E0000007FF80000001FE0000262B7DA02D>13 D<03C00FF01FF83FFC7FFE
7FFEFFFFFFFFFFFFFFFFFFFFFFFF7FFE7FFE3FFC1FF80FF003C010127D9317>15
D<C0000000F00000003C0000000F00000003C0000000F0000000380000000E0000000780000001
E0000000780000001E0000000780000001C00000078000001E00000078000001E0000007800000
0E00000038000000F0000003C000000F0000003C00000070000000C00000000000000000000000
00000000000000000000000000000000000000007FFFFF80FFFFFFC01A247C9C23>21
D<00000C00000C0000180000180000300000300000600000600000C00000C00001800001800001
80000300000300000600000600000C00000C0000180000180000300000300000600000600000C0
0000C0000180000180000300000300000600000600000600000C00000C00001800001800003000
00300000600000600000C00000400000162C7AA000>54 D<004000C00180018001800300030003
000600060006000C000C00180018001800300030003000600060006000C000C000600060006000
3000300030001800180018000C000C0006000600060003000300030001800180018000C000400A
2E7CA112>104 D<C000C0006000600060003000300030001800180018000C000C000600060006
0003000300030001800180018000C000C00180018001800300030003000600060006000C000C00
180018001800300030003000600060006000C000C0000A2E7DA112>I<02000700070007000700
0700070002000200020002007270FFF87270020002000200070007000700070007000700070007
00070007000700070007000700070007000700070002000200020002000200020002000D2A7D9F
14>121 D E /FH 90 125 df<003F07C000E0DC6001C0F0F00381F0F00701E0600700E0000700
E0000700E0000700E0000700E0000700E0000700E000FFFFFF000700E0000700E0000700E00007
00E0000700E0000700E0000700E0000700E0000700E0000700E0000700E0000700E0000700E000
0700E0000700E0000700E0000700E0000700E0007FC3FE001C20809F1A>11
D<003F0000E0C001C0C00381E00701E00701E0070000070000070000070000070000070000FFFF
E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700
E00700E00700E00700E00700E00700E07FC3FE1720809F19>I<003FE000E0E001C1E00381E007
00E00700E00700E00700E00700E00700E00700E00700E0FFFFE00700E00700E00700E00700E007
00E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E007
00E07FE7FE1720809F19>I<001F81F80000F04F040001C07C06000380F80F000300F00F000700
F00F00070070000007007000000700700000070070000007007000000700700000FFFFFFFF0007
007007000700700700070070070007007007000700700700070070070007007007000700700700
070070070007007007000700700700070070070007007007000700700700070070070007007007
00070070070007007007007FE3FE3FF02420809F26>I<70F8F8F8F8F8F8F87070707070707070
70702020202020000000000070F8F8F87005217CA00D>33 D<7038F87CFC7EFC7E743A04020402
04020804080410081008201040200F0E7E9F17>I<0080008007E00C981084208260824081C087
C08FC08FC086E080F08078803F803FE01FF807FC00FE009E008E00870087F083F083F083808380
8240864084208818B007C000800080008010257DA117>36 D<0078000000840000018400000302
000007020000070200000702000007020000070400000704000007080000070800000310000003
A00FFC03C001E0038001C001C0008001C0010003E0010004E0020008F002001870040030780800
70380800701C1000F01E1000F00E2000F0074000F003C0087001C0087801E010380670101C1838
6007E00F801E227EA023>38 D<70F8FCFC74040404080810102040060E7C9F0D>I<0020004000
800100020006000C000C00180018003000300030007000600060006000E000E000E000E000E000
E000E000E000E000E000E000E0006000600060007000300030003000180018000C000C00060002
0001000080004000200B2E7DA112>I<800040002000100008000C000600060003000300018001
80018001C000C000C000C000E000E000E000E000E000E000E000E000E000E000E000E000C000C0
00C001C001800180018003000300060006000C00080010002000400080000B2E7DA112>I<0006
000000060000000600000006000000060000000600000006000000060000000600000006000000
060000000600000006000000060000FFFFFFF0FFFFFFF000060000000600000006000000060000
000600000006000000060000000600000006000000060000000600000006000000060000000600
001C1E7D9923>43 D<70F8FCFC74040404080810102040060E7C840D>I<FFC0FFC00A027F8A0F>
I<70F8F8F87005057C840D>I<000100030003000600060006000C000C000C0018001800180030
0030003000600060006000C000C000C00180018001800300030003000600060006000C000C000C
00180018001800300030003000600060006000C000C000C000102D7DA117>I<03F0000E1C001C
0E00180600380700700380700380700380700380F003C0F003C0F003C0F003C0F003C0F003C0F0
03C0F003C0F003C0F003C0F003C0F003C0F003C07003807003807003807807803807001806001C
0E000E1C0003F000121F7E9D17>I<018003800F80F38003800380038003800380038003800380
038003800380038003800380038003800380038003800380038003800380038007C0FFFE0F1E7C
9D17>I<03F0000C1C00100E00200700400780800780F007C0F803C0F803C0F803C02007C00007
C0000780000780000F00000E00001C0000380000700000600000C0000180000300000600400C00
401800401000803FFF807FFF80FFFF80121E7E9D17>I<03F0000C1C00100E00200F00780F8078
0780780780380F80000F80000F00000F00000E00001C0000380003F000003C00000E00000F0000
07800007800007C02007C0F807C0F807C0F807C0F00780400780400F00200E001C3C0003F00012
1F7E9D17>I<000600000600000E00000E00001E00002E00002E00004E00008E00008E00010E00
020E00020E00040E00080E00080E00100E00200E00200E00400E00C00E00FFFFF0000E00000E00
000E00000E00000E00000E00000E0000FFE0141E7F9D17>I<1803001FFE001FFC001FF8001FE0
0010000010000010000010000010000010000011F000161C00180E001007001007800003800003
800003C00003C00003C07003C0F003C0F003C0E00380400380400700200600100E000C380003E0
00121F7E9D17>I<007C000182000701000E03800C07801C078038030038000078000070000070
0000F1F000F21C00F40600F80700F80380F80380F003C0F003C0F003C0F003C0F003C07003C070
03C07003803803803807001807000C0E00061C0001F000121F7E9D17>I<4000007FFFC07FFF80
7FFF8040010080020080020080040000080000080000100000200000200000400000400000C000
00C00001C000018000038000038000038000038000078000078000078000078000078000078000
078000030000121F7D9D17>I<03F0000C0C001006003003002001806001806001806001807001
807803003E03003F06001FC8000FF00003F80007FC000C7E00103F00300F806003804001C0C001
C0C000C0C000C0C000C0C000806001802001001002000C0C0003F000121F7E9D17>I<03F0000E
18001C0C00380600380700700700700380F00380F00380F003C0F003C0F003C0F003C0F003C070
07C07007C03807C0180BC00E13C003E3C0000380000380000380000700300700780600780E0070
0C002018001070000FC000121F7E9D17>I<70F8F8F8700000000000000000000070F8F8F87005
147C930D>I<70F8F8F8700000000000000000000070F0F8F878080808101010202040051D7C93
0D>I<7FFFFFE0FFFFFFF000000000000000000000000000000000000000000000000000000000
00000000FFFFFFF07FFFFFE01C0C7D9023>61 D<07000F800F800F800700000000000000000000
000200020002000200020002000600060004000C001C00380078007000F018F03CF03CF01CF008
701838200FC00E207D9615>I<0FC0307040384038E03CF03CF03C603C0038007000E000C00180
0180010003000200020002000200020002000000000000000000000007000F800F800F8007000E
207D9F15>I<001F800000E0700001000800060006000800010008000100100F00802030C04020
60404040C0202041C01C2041C01C2081801C1083801C1083801C1083801C1083801C1083801C10
83801C1081801C1041C01C1041C01C1040C03C2020605C202030CC40100F078008000000080000
0006000070010001C000E01F00001FF0001C207D9F23>I<000100000003800000038000000380
000007C0000007C0000007C0000009E0000009E0000009E0000010F0000010F0000010F0000020
7800002078000020780000403C0000403C0000403C0000801E0000801E0000FFFE0001000F0001
000F0001000F00020007800200078002000780040003C00E0003C01F0007E0FFC03FFE1F207F9F
22>I<FFFFE0000F80380007801E0007801F0007800F0007800F8007800F8007800F8007800F80
07800F8007800F0007801F0007801E0007803C0007FFF00007803C0007801E0007800F0007800F
8007800780078007C0078007C0078007C0078007C0078007C00780078007800F8007800F000780
1F000F803C00FFFFF0001A1F7E9E20>I<000FC040007030C001C009C0038005C0070003C00E00
01C01E0000C01C0000C03C0000C07C0000407C00004078000040F8000000F8000000F8000000F8
000000F8000000F8000000F8000000F8000000F8000000780000007C0000407C0000403C000040
1C0000401E0000800E000080070001000380020001C0040000703800000FC0001A217D9F21>I<
FFFFE0000F803C0007801E000780070007800380078003C0078001E0078001E0078001F0078000
F0078000F0078000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F80780
00F8078000F0078000F0078000F0078001E0078001E0078003C0078003800780070007800E000F
803C00FFFFE0001D1F7E9E23>I<FFFFFF000F800F000780030007800300078001000780018007
8000800780008007800080078080800780800007808000078080000781800007FF800007818000
078080000780800007808000078080000780002007800020078000200780004007800040078000
40078000C0078000C0078001800F800F80FFFFFF801B1F7E9E1F>I<FFFFFF000F800F00078003
000780030007800100078001800780008007800080078000800780008007808000078080000780
8000078080000781800007FF800007818000078080000780800007808000078080000780000007
8000000780000007800000078000000780000007800000078000000FC00000FFFE0000191F7E9E
1E>I<000FE0200078186000E004E0038002E0070001E00F0000E01E0000601E0000603C000060
3C0000207C00002078000020F8000000F8000000F8000000F8000000F8000000F8000000F80000
00F8007FFCF80003E0780001E07C0001E03C0001E03C0001E01E0001E01E0001E00F0001E00700
01E0038002E000E0046000781820000FE0001E217D9F24>I<FFF8FFF80F800F8007800F000780
0F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007
800F0007FFFF0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F00
07800F0007800F0007800F0007800F0007800F0007800F000F800F80FFF8FFF81D1F7E9E22>I<
FFFC0FC00780078007800780078007800780078007800780078007800780078007800780078007
800780078007800780078007800780078007800FC0FFFC0E1F7F9E10>I<0FFF80007C00003C00
003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00
003C00003C00003C00003C00003C00003C00003C00203C00F83C00F83C00F83C00F03800407800
40700030E0000F800011207E9E17>I<FFFC0FFC0FC003E0078001800780010007800200078004
000780080007801000078020000780400007808000078100000783000007878000078F80000793
C0000791E00007A1E00007C0F0000780F0000780780007803C0007803C0007801E0007801E0007
800F000780078007800780078007C00FC007E0FFFC3FFC1E1F7E9E23>I<FFFE000FC000078000
078000078000078000078000078000078000078000078000078000078000078000078000078000
07800007800007800007800007800207800207800207800207800607800407800407800C07801C
0F807CFFFFFC171F7E9E1C>I<FF80001FF80F80001F800780001F0005C0002F0005C0002F0005
C0002F0004E0004F0004E0004F000470008F000470008F000470008F000438010F000438010F00
0438010F00041C020F00041C020F00041C020F00040E040F00040E040F00040E040F000407080F
000407080F000407080F000403900F000403900F000401E00F000401E00F000401E00F000E00C0
0F001F00C01F80FFE0C1FFF8251F7E9E2A>I<FF803FF807C007C007C0038005E0010005E00100
04F001000478010004780100043C0100043C0100041E0100040F0100040F010004078100040781
000403C1000401E1000401E1000400F1000400F1000400790004003D0004003D0004001F000400
1F0004000F0004000700040007000E0003001F000300FFE001001D1F7E9E22>I<001F800000F0
F00001C0380007801E000F000F000E0007001E0007803C0003C03C0003C07C0003E0780001E078
0001E0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0
780001E07C0003E07C0003E03C0003C03C0003C01E0007800E0007000F000F0007801E0001C038
0000F0F000001F80001C217D9F23>I<FFFFE0000F80780007801C0007801E0007800F0007800F
8007800F8007800F8007800F8007800F8007800F8007800F0007801E0007801C000780780007FF
E00007800000078000000780000007800000078000000780000007800000078000000780000007
8000000780000007800000078000000FC00000FFFC0000191F7E9E1F>I<001F800000F0F00001
C0380007801E000F000F000E0007001E0007803C0003C03C0003C07C0003E07C0003E0780001E0
F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0780001
E0780001E07C0003E03C0003C03C0F03C01E1087800E2047000F204F0007A03E0001E0380000F0
F010001FB01000003010000038300000387000003FF000001FE000001FE000000FC0000007801C
297D9F23>I<FFFF80000F80F0000780780007803C0007801E0007801E0007801F0007801F0007
801F0007801F0007801E0007801E0007803C00078078000780F00007FF80000781C0000780E000
0780F0000780700007807800078078000780780007807C0007807C0007807C0007807C0407807E
0407803E040FC01E08FFFC0F10000003E01E207E9E21>I<07E0800C1980100780300380600180
600180E00180E00080E00080E00080F00000F000007800007F00003FF0001FFC000FFE0003FF00
001F800007800003C00003C00001C08001C08001C08001C08001C0C00180C00380E00300F00600
CE0C0081F80012217D9F19>I<7FFFFFE0780F01E0600F0060400F0020400F0020C00F0030800F
0010800F0010800F0010800F0010000F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000
000F0000000F0000000F0000001F800007FFFE001C1F7E9E21>I<FFFC3FF80FC007C007800380
078001000780010007800100078001000780010007800100078001000780010007800100078001
000780010007800100078001000780010007800100078001000780010007800100078001000780
010007800100038002000380020001C0020001C0040000E008000070180000382000000FC0001D
207E9E22>I<FFF003FE1F8000F80F0000600F800060078000400780004003C0008003C0008003
C0008001E0010001E0010001F0010000F0020000F0020000F806000078040000780400003C0800
003C0800003C0800001E1000001E1000001F3000000F2000000F20000007C0000007C0000007C0
00000380000003800000038000000100001F207F9E22>I<FFF07FF81FF01F800FC007C00F0007
8003800F00078001000F0007C00100078007C00200078007C00200078007C0020003C009E00400
03C009E0040003C009E0040003E010F00C0001E010F0080001E010F0080001E02078080000F020
78100000F02078100000F0403C10000078403C20000078403C20000078C03E2000003C801E4000
003C801E4000003C801E4000001F000F8000001F000F8000001F000F8000001E00078000000E00
070000000E00070000000C000300000004000200002C207F9E2F>I<7FF81FF80FE00FC007C007
0003C0020001E0040001F00C0000F0080000781000007C1000003C2000003E4000001E4000000F
8000000F8000000780000003C0000007E0000005E0000009F0000018F8000010780000207C0000
603C0000401E0000801F0001800F0001000780020007C0070003C01F8007E0FFE01FFE1F1F7F9E
22>I<FFF003FF1F8000F80F8000600780004007C0004003E0008001E0008001F0010000F00300
00F80200007C0400003C0400003E0800001E0800001F1000000FB0000007A0000007C0000003C0
000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003
C0000007C000007FFE00201F7F9E22>I<7FFFF87C00F87000F06001E04001E0C003C0C003C080
0780800F80800F00001E00001E00003C00003C0000780000F80000F00001E00001E00003C00403
C0040780040F80040F000C1E000C1E00083C00183C0018780038F801F8FFFFF8161F7D9E1C>I<
FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0FEFE072D7CA10D>I<080410082010201040204020804080408040B85CFC7EFC7E7C3E
381C0F0E7B9F17>I<FEFE06060606060606060606060606060606060606060606060606060606
06060606060606060606060606FEFE072D7FA10D>I<081020204040808080B8FCFC7C38060E7D
9F0D>96 D<1FE000303000781800781C00300E00000E00000E00000E0000FE00078E001E0E0038
0E00780E00F00E10F00E10F00E10F01E10781E103867200F83C014147E9317>I<0E0000FE0000
0E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E3E000EC3800F01C0
0F00E00E00E00E00700E00700E00780E00780E00780E00780E00780E00780E00700E00700E00E0
0F00E00D01C00CC300083E0015207F9F19>I<03F80E0C1C1E381E380C70007000F000F000F000
F000F000F00070007000380138011C020E0C03F010147E9314>I<000380003F80000380000380
00038000038000038000038000038000038000038000038003E380061B801C0780380380380380
700380700380F00380F00380F00380F00380F00380F003807003807003803803803807801C0780
0E1B8003E3F815207E9F19>I<03F0000E1C001C0E00380700380700700700700380F00380F003
80FFFF80F00000F00000F000007000007000003800801800801C010007060001F80011147F9314
>I<007C00C6018F038F07060700070007000700070007000700FFF00700070007000700070007
000700070007000700070007000700070007000700070007007FF01020809F0E>I<0000E003E3
300E3C301C1C30380E00780F00780F00780F00780F00780F00380E001C1C001E380033E0002000
002000003000003000003FFE001FFF800FFFC03001E0600070C00030C00030C00030C000306000
603000C01C038003FC00141F7F9417>I<0E0000FE00000E00000E00000E00000E00000E00000E
00000E00000E00000E00000E00000E3E000E43000E81800F01C00F01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0FFE7FC16207F9F
19>I<1C003E003E003E001C000000000000000000000000000E007E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E00FFC00A1F809E0C>I<00E001F001F0
01F000E0000000000000000000000000007007F000F00070007000700070007000700070007000
700070007000700070007000700070007000700070007000706070F060F0C061803F000C28829E
0E>I<0E0000FE00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0000
0E0FF00E03C00E03000E02000E04000E08000E10000E30000E70000EF8000F38000E1C000E1E00
0E0E000E07000E07800E03800E03C00E03E0FFCFF815207F9F18>I<0E00FE000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00
0E000E000E000E000E000E00FFE00B20809F0C>I<0E1F01F000FE618618000E81C81C000F00F0
0E000F00F00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00
E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E00FF
E7FE7FE023147F9326>I<0E3E00FE43000E81800F01C00F01C00E01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0FFE7FC16147F9319>I<
01F800070E001C03803801C03801C07000E07000E0F000F0F000F0F000F0F000F0F000F0F000F0
7000E07000E03801C03801C01C0380070E0001F80014147F9317>I<0E3E00FEC3800F01C00F00
E00E00E00E00F00E00700E00780E00780E00780E00780E00780E00780E00700E00F00E00E00F01
E00F01C00EC3000E3E000E00000E00000E00000E00000E00000E00000E00000E0000FFE000151D
7F9319>I<03E0800619801C05803C0780380380780380700380F00380F00380F00380F00380F0
0380F003807003807803803803803807801C0B800E138003E38000038000038000038000038000
0380000380000380000380003FF8151D7E9318>I<0E78FE8C0F1E0F1E0F0C0E000E000E000E00
0E000E000E000E000E000E000E000E000E000E00FFE00F147F9312>I<1F9030704030C010C010
C010E00078007F803FE00FF00070803880188018C018C018E030D0608F800D147E9312>I<0200
02000200060006000E000E003E00FFF80E000E000E000E000E000E000E000E000E000E000E000E
080E080E080E080E080610031001E00D1C7F9B12>I<0E01C0FE1FC00E01C00E01C00E01C00E01
C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E03C00603C0030D
C001F1FC16147F9319>I<FF83F81E01E01C00C00E00800E00800E008007010007010003820003
820003820001C40001C40001EC0000E80000E80000700000700000700000200015147F9318>I<
FF9FE1FC3C0780701C0300601C0380200E0380400E0380400E03C0400707C0800704C0800704E0
80038861000388710003C8730001D0320001D03A0000F03C0000E01C0000E01C00006018000040
08001E147F9321>I<7FC3FC0F01E00701C007018003810001C20000E40000EC00007800003800
003C00007C00004E000087000107000303800201C00601E01E01E0FF03FE1714809318>I<FF83
F81E01E01C00C00E00800E00800E008007010007010003820003820003820001C40001C40001EC
0000E80000E800007000007000007000002000002000004000004000004000F08000F08000F100
006200003C0000151D7F9318>I<3FFF380E200E201C40384078407000E001E001C00380078007
010E011E011C0338027006700EFFFE10147F9314>I<FFFFFC1601808C17>I<FFFFFFFFFFF02C01
808C2D>I E /FI 15 118 df<F8F8F8F8F8383070706060E0050C7AA911>39
D<0001FF00000FFFE0003FFFFC007FFFFE00FE01FE01F8003E03F0000C07C000000FC000001F80
00001F0000003F0000003E0000007E0000007C0000007C0000007C000000F8000000F8000000F8
000000F8000000F8000000F8000000F8000000F8001FFEF8001FFEF8001FFE7C001FFE7C00003E
7C00003E7E00003E3E00003E3F00003E1F00003E1F80003E0FC0003E07C0003E03F0003E01F800
3E00FE00FE007FFFFE003FFFFC000FFFE00001FF001F2C7CAA28>71 D<F800003EF800003EF800
003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF8
00003EF800003EF800003EF800003EF800003EF800003EFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFE
F800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF80000
3EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800
003E1F2A7BA92A>I<F800003F80F800007F00F80000FE00F80001FC00F80003F800F80007F000
F8000FE000F8001FC000F8003F8000F8007F0000F800FE0000F801FC0000F803F80000F803F000
00F807E00000F80FC00000F81F800000F83F800000F87FC00000F8FFE00000F9FBE00000FBF3F0
0000FFE1F80000FFC0F80000FF807C0000FF007E0000FE003E0000FC001F0000F8001F8000F800
0F8000F80007C000F80007E000F80003E000F80001F000F80001F800F80000FC00F800007C00F8
00007E00F800003F00F800001F00F800000F80F800000FC0222A7BA92A>75
D<01FE000FFF803FFFC03FFFE03C03F03001F00001F80000F80000F80000F80000F80000F8007F
F807FFF81FFFF83FE0F87F00F8FC00F8F800F8F800F8F800F8FC01F87E07F87FFFF83FFFF81FFC
F807E0F8151B7E9A1D>97 D<007FC001FFF007FFFC0FFFFC1FC07C1F00083E00007C00007C0000
7C0000F80000F80000F80000F80000F80000F80000F800007C00007C00007E00003E00001F000C
1FC07C0FFFFC07FFFC01FFF0007F80161B7E9A1B>99 D<00003E00003E00003E00003E00003E00
003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00FC3E03FF3E07FFFE0F
FFFE1FC1FE3F007E3E003E7C003E7C003EFC003EF8003EF8003EF8003EF8003EF8003EF8003EF8
003EFC003E7C003E7C003E3E007E3F00FE1FC1FE0FFFFE07FFBE03FF3E00FC3E172A7EA91F>I<
007E0003FF8007FFC00FFFE01F83F03F00F03E00787C00787C003878003CFFFFFCFFFFFCFFFFFC
FFFFFCF80000F80000F800007800007C00007C00003E00003F000C1FC07C0FFFFC07FFFC01FFF0
007F80161B7E9A1B>I<F8F8F8F8F800000000000000000000F8F8F8F8F8F8F8F8F8F8F8F8F8F8
F8F8F8F8F8F8F8F8F8F8F8F8F8052A7CA90E>105 D<F80000F80000F80000F80000F80000F800
00F80000F80000F80000F80000F80000F80000F80000F80000F80000F800FCF801F8F803F0F807
E0F80FC0F81F80F83F00F87E00F87C00F8F800F9F000FBF800FFFC00FFFC00FF7E00FE3F00FC3F
00FC1F80F80F80F80FC0F807E0F807E0F803F0F801F8F801F8F800FCF8007E172A7CA91D>107
D<F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8
F8F8F8F8052A7CA90E>I<F83F80F8FFE0F9FFF0FBFFF8FF81F8FE00FCFE007CFC007CFC007CF8
007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8
007CF8007CF8007CF8007CF8007C161B7C9A1F>110 D<F83CF8FCF9FCFBFCFFE0FF80FF00FE00
FC00FC00FC00F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F8000E
1B7C9A14>114 D<03FC001FFF803FFFC07FFFC07C07C0F80080F80000F80000F80000FC00007F
80007FF8003FFE001FFF0007FF8000FFC0000FE00007E00003E00003E04003E0E007E0FC0FC0FF
FFC07FFF801FFE0003F800131B7E9A17>I<F8007CF8007CF8007CF8007CF8007CF8007CF8007C
F8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007CF8007C
F800FCF801FCFC07FCFFFFFC7FFF7C3FFC7C1FE07C161B7C9A1F>117 D
E /FJ 5 121 df<FFFFE000FFFFE00007F0000003E0000003E0000003E0000003E0000003E000
0003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0
000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000103E0000103
E0000103E0000103E0000203E0000203E0000203E0000203E0000603E0000603E0000E03E0001E
03E0007C07E001FCFFFFFFFCFFFFFFFC20297CA829>76 D<FFFCFFFC0780078007800780078007
800780078007800780078007800780078007800780078007800780078007800780078007800780
07800780FFFCFFFC0E1F7F9E12>105 D<FF000FF8FF800FF80F8003E00BC001C009E0008009E0
008008F000800878008008780080083C0080081E0080081E0080080F0080080780800807808008
03C0800801E0800801E0800800F080080078800800788008003C8008001E8008001E8008000F80
08000780080007801C0003803E000180FF800180FF8000801D1F7D9E25>110
D<FFF00FF8FFF00FF80F0003E00F0001C00F0000800F0000800F0000800F0000800F0000800F00
00800F0000800F0000800F0000800F0000800F0000800F0000800F0000800F0000800F0000800F
0000800F0000800F0000800F0000800F00008007800100078001000380020001C0040000F03800
003FF000000FC0001D1F7D9E25>117 D<7FF807FE007FF807FE0007E003E00003E001800001E0
01000001F002000000F80600000078040000003C080000003E180000001F100000000F20000000
0FC000000007C000000003C000000001E000000003F000000006F80000000478000000087C0000
00103E000000101E000000200F000000400F800000C0078000008003C000010003E000030001F0
000F8001F800FFC007FF80FFC007FF80211F7F9E25>120 D E /FK 26 122
df<00001800000000180000000018000000003C000000003C000000003C000000007E00000000
7E00000000FF000000009F000000009F000000011F800000010F800000010F8000000207C00000
0207C000000207C000000403E000000403E000000403E000000801F000000801F000001801F800
001000F800001000F800002000FC000020007C00003FFFFC00007FFFFE000040003E000040003E
000080001F000080001F000080001F000100000F800100000F800100000F8002000007C0070000
07C01F80000FE0FFF000FFFFFFF000FFFF282A7EA92D>65 D<FFFF80FFFF8007F00003E00003E0
0003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E0
0003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E0
0003E00003E00003E00003E00003E00003E00003E00007F000FFFF80FFFF8011297EA816>73
D<FFE0001FFFFFF0001FFF03F80001F002F80000E0027C000040027E000040023E000040021F00
0040021F800040020F8000400207C000400207E000400203E000400201F000400201F800400200
F8004002007C004002007E004002003E004002001F004002001F804002000F8040020007C04002
0003E040020003E040020001F040020000F840020000F8400200007C400200003E400200003E40
0200001F400200000FC00200000FC002000007C002000003C002000003C007000001C00F800000
C0FFF80000C0FFF800004028297EA82D>78 D<FFFFFE000000FFFFFFC0000007E003F0000003E0
00FC000003E0003E000003E0001F000003E0001F800003E0000F800003E0000FC00003E0000FC0
0003E0000FC00003E0000FC00003E0000FC00003E0000FC00003E0000F800003E0001F000003E0
001E000003E0003C000003E000F8000003E003E0000003FFFE00000003E00780000003E001E000
0003E000F0000003E00078000003E0007C000003E0003C000003E0003E000003E0003E000003E0
003E000003E0003E000003E0003F000003E0003F000003E0003F000003E0003F000003E0003F00
8003E0003F808003E0001F808007F0000F8100FFFF8007C100FFFF8003C20000000000FC00292A
7EA82C>82 D<FFFF801FFFFFFF801FFF07F00001F003E00000E003E000004003E000004003E000
004003E000004003E000004003E000004003E000004003E000004003E000004003E000004003E0
00004003E000004003E000004003E000004003E000004003E000004003E000004003E000004003
E000004003E000004003E000004003E000004003E000004003E000004003E000004003E0000040
03E000004001E000008001F000008001F000008000F000010000780003000078000200003C000C
00001F0018000007C070000001FFE00000007F0000282A7EA82D>85 D<01FC00000E0780001001
C0003C00E0003E00F0003E0078001C00780008007800000078000000780000007800007FF80003
E078000F8078001F0078003E0078007C00780078007820F8007820F8007820F8007820F800F820
7C00F8203C013C401F063FC007F80F001B1A7E991E>97 D<007F8001C0700780080F003C1E007C
3C007C3C00387C0010780000F80000F80000F80000F80000F80000F80000F80000F80000780000
7C00003C00043C00041E00080F001007802001C0C0007F00161A7E991B>99
D<00000F000001FF000001FF0000001F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000000F0000000F0000000F0000000F0000000F00003F0F0001C0CF0003802F000F
001F001E001F001C000F003C000F007C000F0078000F0078000F00F8000F00F8000F00F8000F00
F8000F00F8000F00F8000F00F8000F0078000F0078000F003C000F003C000F001E001F000E002F
0007004F8001C18FF8007E0FF81D2A7EA921>I<007E0003C3800700E00E00F01C00703C00783C
003878003C78003CF8003CF8003CFFFFFCF80000F80000F80000F80000F800007800007C00003C
00043C00041E00080E001007002001C0C0007F00161A7E991B>I<001F000070C000E1E001C3E0
03C3E00381C0078080078000078000078000078000078000078000078000078000078000FFFE00
FFFE00078000078000078000078000078000078000078000078000078000078000078000078000
07800007800007800007800007800007800007800007800007800007C000FFFE00FFFE00132A7F
A912>I<0000078001FC1840070721C00E03C1C01E03C0803C01E0003C01E0007C01F0007C01F0
007C01F0007C01F0007C01F0003C01E0003C01E0001E03C0000E0380001707000011FC00003000
00003000000030000000380000001C0000001FFFC0000FFFF80007FFFC001C003E0030000F0070
00070060000380E0000380E0000380E0000380E0000380700007007000070038000E000C001800
0780F00000FF80001A287E9A1E>I<07800000FF800000FF8000000F8000000780000007800000
078000000780000007800000078000000780000007800000078000000780000007800000078000
000783F800078C1C0007900E0007A0070007A0078007C0078007C0078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800780FFFCFFFCFFFCFFFC1E2A7FA921>I<0F001F801F
801F801F800F0000000000000000000000000000000000000007807F807F800F80078007800780
07800780078007800780078007800780078007800780078007800780078007800780FFF8FFF80D
297FA811>I<07800000FF800000FF8000000F8000000780000007800000078000000780000007
8000000780000007800000078000000780000007800000078000000780000007807FF007807FF0
07801F8007801C0007801800078020000780400007808000078100000782000007870000079F80
0007A7800007C7C0000783E0000781E0000781F0000780F8000780780007807C0007803E000780
1E0007801F0007801F80FFFC7FF8FFFC7FF81D2A7FA920>107 D<0780FF80FF800F8007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
8007800780078007800780078007800780078007800780078007800780FFFCFFFC0E2A7FA911>
I<0781F800FC00FF860E030700FF98070C03800FA0079003C007A003D001E007C003E001E007C0
03E001E0078003C001E0078003C001E0078003C001E0078003C001E0078003C001E0078003C001
E0078003C001E0078003C001E0078003C001E0078003C001E0078003C001E0078003C001E00780
03C001E0078003C001E0078003C001E0078003C001E0078003C001E0FFFC7FFE3FFFFFFC7FFE3F
FF301A7F9933>I<0783F800FF8C1C00FF900E000FA0070007A0078007C0078007C00780078007
800780078007800780078007800780078007800780078007800780078007800780078007800780
0780078007800780078007800780078007800780078007800780FFFCFFFCFFFCFFFC1E1A7F9921
>I<007F000001C1C000070070000E0038001C001C003C001E003C001E0078000F0078000F00F8
000F80F8000F80F8000F80F8000F80F8000F80F8000F80F8000F80F8000F8078000F0078000F00
3C001E003C001E001E003C000E0038000700700001C1C000007F0000191A7E991E>I<0783F000
FF8C1C00FFB00F0007A0078007C003C0078003E0078001E0078001F0078001F0078000F8078000
F8078000F8078000F8078000F8078000F8078000F8078000F0078001F0078001F0078001E00780
03C007C003C007C0078007A00E0007983C000787E0000780000007800000078000000780000007
8000000780000007800000078000000780000007800000FFFC0000FFFC00001D267F9921>I<07
87C0FF98E0FF91F00FA1F007C1F007C0E007C00007800007800007800007800007800007800007
800007800007800007800007800007800007800007800007800007800007C000FFFE00FFFE0014
1A7F9917>114 D<07F8401C06C03001C06000C06000C0E00040E00040F00040F800007E00007F
F0003FFE000FFF0003FF80003FC00007C08001E08001E0C000E0C000E0C000E0E000C0F001C0F8
0180C4070083F800131A7E9918>I<008000008000008000008000018000018000018000038000
0380000780000F80001FFF80FFFF80078000078000078000078000078000078000078000078000
07800007800007800007800007800007804007804007804007804007804007804007804003C080
01C08000E100003E0012257FA417>I<07800780FF80FF80FF80FF800F800F8007800780078007
800780078007800780078007800780078007800780078007800780078007800780078007800780
07800780078007800780078007800780078007800F8007800F800380178001C027C000E047FC00
3F87FC1E1A7F9921>I<FFF00FF8FFF00FF80F8003C0078003800780010003C0020003C0020003
E0020001E0040001E0040000F0080000F0080000F818000078100000781000003C2000003C2000
003E6000001E4000001E4000000F8000000F8000000700000007000000070000000200001D1A7F
9920>I<FFF1FFC1FFFFF1FFC1FF0F803E00780F001E003007801E002007801E002007801F0020
03C03F004003C027004003C027804001E067808001E043808001E043C08000F081C10000F081C1
0000F881E300007900E200007900E200007D00F600003E007400003E007400001E007800001C00
3800001C003800000C0030000008001000281A7F992B>I<FFF00FF8FFF00FF80F8003C0078003
800780010003C0020003C0020003E0020001E0040001E0040000F0080000F0080000F818000078
100000781000003C2000003C2000003E6000001E4000001E4000000F8000000F80000007000000
0700000007000000020000000200000004000000040000000400000008000070080000F8100000
F8100000F8200000F0400000608000001F0000001D267F9920>121 D E
end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 0 1
0 0 bop 891 88 a FK(Rough)20 b(draft)814 174 y(Not)g(Authoritativ)n(e)701
259 y(Incomplete)d(and)k(Inaccurate)778 344 y(Use)e(at)h(y)n(our)g(o)n(wn)h
(risk)150 782 y FJ(Linux)e FI(Kernel)g(Hack)n(ers')h(Guide)p
150 846 1800 12 v 1056 910 a FH(Cop)o(yrigh)o(t)1282 909 y(c)1270
910 y FG(\015)15 b FH(1992,)f(1993)g(Mic)o(hael)i(K.)f(Johnson)150
1288 y FF(A)j(ho)q(dgep)q(o)q(dge)i(collection)f(of)e(info)o(rmation,)g(sp)q
(eculation,)k(and)d(ramblings)g(ab)q(out)h(the)g FE(Linux)e
FF(k)o(ernel.)150 1352 y(This)e(is)f(only)g(a)g(draft.)19 b(Please)c(mail)e
(any)h(co)o(rrections,)g(ampli\014cations,)g(suggestions,)i(etc.)e(to)h
(Michael)f(K.)150 1416 y(Johnson,)j FD(johnsonm@sunsite.unc.ed)o(u)p
FF(,)12 b(Edito)o(r.)221 1504 y(Edito)o(rial)i(comments)h(lo)q(ok)g(lik)o(e)h
(this:)21 b FC([This)e(is)f(an)g(editorial)i(commen)o(t.)k(I)17
b(in)o(vite)i(answ)o(ers)150 1568 y(to)d(an)o(y)f(questions)g(in)h(these)g
(commen)o(ts.)22 b(The)16 b(more)g(help)g(I)f(get)h(on)g(these,)g(the)g(few)o
(er)f(of)150 1633 y(these)j(ugly)h(commen)o(ts)f(new)o(er)g(v)o(ersions)g(of)
g(the)h(guide)g(will)h(ha)o(v)o(e.)26 b(Some)18 b(of)h(these)f(are)150
1697 y(merely)h(large)i(notices)g(to)e(m)o(yself)f(to)i(\014nish)g(some)e
(task)i(I)f(started.)31 b(If)19 b(y)o(ou)f(w)o(ould)i(lik)o(e)150
1762 y(to)g(help)g(b)o(y)f(w)o(orking)h(on)g(a)g(section)h(that)g(has)e
(notes)h(lik)o(e)g(this,)h(please)f(con)o(tact)h(me)f(to)150
1826 y(see)d(what)h(help)g(I)f(need.])221 1914 y FF(This)i(w)o(o)o(rk)f(is)h
(currently)h(rather)e(fragmented,)i(and)f(will)g(remain)f(in)h(that)h(state)g
(until)g(most)e(of)h(the)150 1978 y(sections)e(have)f(b)q(een)h(written,)f
(so)f(that)i(revision)e(combining)g(those)i(sections)g(can)f(b)q(e)g(done)g
(intelligently)l(.)150 2042 y(Substantial)g(revision)e(to)g(o)q(ccur)h(at)f
(that)h(time)e(should)j(address)f(the)g(p)o(roblems)e(with)i(unnecessa)o
(rily)h(dupli-)150 2107 y(cated)f(info)o(rmation)d(and)j(lack)f(of)f
(structure,)j(and)e(mak)o(e)f(the)i(guide)g(easier)f(to)g(follo)o(w)e(and)j
(mo)o(re)d(succinct.)221 2195 y(Ho)o(w)o(ever,)h(the)i(section)g(on)f(device)
g(drivers)g(should)h(b)q(e)g(helpful)g(to)f(some.)19 b(Other)c(sections)g(a)o
(re)f(mostly)150 2259 y(a)h(little)h(out)g(of)e(date)i(and)g(in)g(need)g(of)f
(revision)g(anyw)o(a)o(y)l(.)20 b(Please)c(b)q(ea)o(r)f(with)h(me,)e(o)o(r)g
(b)q(etter)j(y)o(et,)e(help.)p eop
%%Page: 1 2
1 1 bop 150 -84 1800 3 v 1937 -100 a FH(i)150 265 y(Cop)o(yrigh)o(t)376
264 y(c)364 265 y FG(\015)15 b FH(1992,)f(1993)29 b(Mic)o(hael)16
b(K.)f(Johnson)150 329 y(201)f(Ho)o(w)o(ell)i(Street,)f(Apt.)f(1C,)h(Chap)q
(el)h(Hill,)h(North)e(Carolina)30 b(27514-4818)150 393 y FD
(johnsonm@sunsite.unc.edu)150 606 y FB(The)18 b FE(Linux)13
b FB(Kernel)i(Hackers')f(Guide)k FH(ma)o(y)c(b)q(e)g(repro)q(duced)h(and)g
(distributed)g(in)g(whole)g(or)e(in)i(part,)150 670 y(sub)s(ject)g(to)g(the)g
(follo)o(wing)h(conditions:)206 795 y(0.)22 b(The)13 b(cop)o(yrigh)o(t)g
(notice)h(ab)q(o)o(v)o(e)e(and)i(this)f(p)q(ermission)i(notice)e(m)o(ust)g(b)
q(e)h(preserv)o(ed)f(complete)h(on)264 860 y(all)i(complete)g(or)e(partial)i
(copies.)206 961 y(1.)22 b(An)o(y)e(translation)g(or)g(deriv)m(ativ)o(e)i(w)o
(ork)d(of)h FB(The)k FE(Linux)c FB(Kernel)g(Hackers')g(Guide)25
b FH(m)o(ust)19 b(b)q(e)264 1026 y(appro)o(v)o(ed)14 b(b)o(y)i(the)f(author)f
(in)j(writing)e(b)q(efore)h(distribution.)206 1127 y(2.)22
b(If)12 b(y)o(ou)g(distribute)i FB(The)i FE(Linux)c FB(Kernel)h(Hackers')g
(Guide)j FH(in)d(part,)f(instructions)h(for)f(obtaining)264
1192 y(the)k(complete)i(v)o(ersion)e(of)g FB(The)21 b FE(Linux)16
b FB(Kernel)h(Hackers')g(Guide)j FH(m)o(ust)c(b)q(e)h(included,)j(and)c(a)264
1256 y(means)f(for)f(obtaining)i(a)f(complete)h(v)o(ersion)g(pro)o(vided.)206
1358 y(3.)22 b(Small)13 b(p)q(ortions)g(ma)o(y)e(b)q(e)j(repro)q(duced)f(as)f
(illustrations)i(for)e(reviews)h(or)f(quotes)g(in)h(other)f(w)o(orks)264
1422 y(without)j(this)g(p)q(ermission)i(notice,)f(if)f(prop)q(er)h(citation)f
(is)h(giv)o(en.)206 1524 y(4.)22 b(The)f(GNU)h(General)f(Public)j(License)f
(referenced)f(b)q(elo)o(w)g(ma)o(y)f(b)q(e)h(repro)q(duced)h(under)f(the)264
1588 y(conditions)16 b(giv)o(en)g(within)g(it.)206 1690 y(5.)22
b(Sev)o(eral)f(sections)h(of)e(this)h(do)q(cumen)o(t)h(are)e(held)j(under)e
(separate)g(cop)o(yrigh)o(t.)36 b(When)22 b(these)264 1754
y(sections)15 b(are)g(co)o(v)o(ered)h(b)o(y)f(a)g(di\013eren)o(t)h(cop)o
(yrigh)o(t,)f(the)h(sep)q(erate)f(cop)o(yrigh)o(t)g(is)h(noted.)k
FC(If)e(y)o(ou)264 1819 y(distribute)c FB(The)i FE(Linux)c
FB(Kernel)f(Hackers')h(Guide)k FC(in)d(part,)i(and)d(that)i(part)f(is,)h(in)f
(whole,)264 1883 y(held)18 b(under)g(a)f(sep)q(erate)i(cop)o(yrigh)o(t,)g
(the)e(conditions)j(of)d(that)i(cop)o(yrigh)o(t)f(apply)l(.)150
2008 y FH(Exceptions)13 b(to)f(these)h(rules)g(ma)o(y)e(b)q(e)i(gran)o(ted)f
(for)g(academic)h(purp)q(oses:)19 b(W)l(rite)13 b(to)f(Mic)o(hael)h(K.)f
(John-)150 2073 y(son,)f(at)f(the)g(ab)q(o)o(v)o(e)g(address,)h(or)f(email)i
FD(johnsonm@sunsite.unc.ed)o(u)p FH(,)c(and)j(ask.)18 b(These)11
b(restrictions)150 2137 y(are)k(here)g(to)g(protect)g(us)g(as)g(authors,)f
(not)h(to)f(restrict)h(y)o(ou)g(as)g(educators)g(and)g(learners.)150
2285 y(All)d(source)f(co)q(de)h(in)g FB(The)j FE(Linux)10 b
FB(Kernel)h(Hackers')h(Guide)j FH(is)c(placed)i(under)e(the)g(GNU)g(General)g
(Pub-)150 2349 y(lic)k(License.)21 b(See)13 b(App)q(endix)j(B)d(for)g(a)g
(cop)o(y)g(of)g(the)g(GNU)g(\\GPL.")f(Source)i(co)q(de)g(for)e(all)j(full)f
(example)150 2414 y(programs)9 b(is)i(a)o(v)m(ailable)g(on-line)h(as)e
FD(tsx-11.mit.edu:/pub/linux/d)o(ocs/hac)o(ker-sour)o(ce.tar.)o(Z)150
2478 y FH(and)15 b(a)f(cop)o(y)g(of)g(the)h(GPL)g(is)g(a)o(v)m(ailable)h(in)f
(that)f(\014le)h(as)g FD(COPYING)p FH(.)e FC([O.K.,)19 b(so)d(it)i
FB(wil)r(l)j FC(b)q(e)c(a)o(v)m(ailable)150 2542 y(when)g(this)h(b)q(o)q(ok)g
(is)g(b)q(eing)h(publicly)f(distributed)p FA(:)8 b(:)g(:)g
FC(])p eop
%%Page: 2 3
2 2 bop 150 -84 1800 3 v 1925 -100 a FH(ii)150 88 y(UNIX)16
b(is)g(a)e(trademark)h(of)f(Unix)j(System)e(Labratories)150
153 y(MS-DOS)h(is)f(a)g(trademark)f(of)h(Microsoft)g(Corp)q(oration.)150
217 y FE(Linux)f FH(is)i(not)e(a)g(trademark,)g(and)h(has)g(no)f(connection)i
(to)e(UNIX)1321 201 y Fz(TM)1388 217 y FH(or)g(Unix)i(System)e(Labratories.)
150 281 y(If)22 b(an)o(y)f(trademarks)g(ha)o(v)o(e)g(b)q(een)i(unin)o(ten)o
(tionally)h(unac)o(kno)o(wledged,)g(please)e(inform)g(the)g(editor,)150
346 y(Mic)o(hael)16 b(K.)e(Johnson,)h(201)e(Ho)o(w)o(ell)j(Street,)e(Apt.)g
(1C,)f(Chap)q(el)j(Hill,)g(North)e(Carolina)30 b(27514-4818,)150
410 y(email)16 b FD(johnsonm@sunsite.unc.edu)p FH(.)p eop
%%Page: 3 4
3 3 bop 150 -84 1800 3 v 1912 -100 a FH(iii)150 266 y Fy(In)n(tro)r(duction)
150 399 y FH(The)16 b FB(The)j FE(Linux)c FB(Kernel)h(Hackers')g(Guide)k
FH(is)c(inspired)i(b)o(y)d(all)i(of)e(us)h(\\k)o(ernel)g(hac)o(k)o(er)f(w)o
(annab)q(ees")150 463 y(who)h(just)g(did)i(not)e(kno)o(w)f(enough)i(ab)q(out)
f(unix)i(systems)e(to)f(hac)o(k)i(the)f FE(Linux)g FH(k)o(ernel)h(when)g(it)f
(\014rst)150 528 y(came)c(out,)h(and)f(had)h(to)f(learn)h(slo)o(wly)l(.)19
b(This)13 b(guide)h(is)f(designed)h(to)d(help)j(y)o(ou)e(get)g(up)h(to)f(sp)q
(eed)h(on)g(the)150 592 y(concepts)g(that)g(are)g(not)f(in)o(tuitiv)o(ely)j
(ob)o(vious,)f(and)f(to)g(do)q(cumen)o(t)g(the)g(in)o(ternal)h(structures)f
(of)g FE(Linux)150 657 y FH(so)g(that)g(y)o(ou)f(don't)h(ha)o(v)o(e)g(to)g
(read)g(the)h(whole)f(k)o(ernel)h(source)g(to)f(\014gure)g(out)g(what)g(is)h
(happ)q(ening)h(with)150 721 y(one)g(v)m(ariable,)i(or)d(to)h(disco)o(v)o(er)
g(the)g(purp)q(ose)h(of)f(one)g(function)h(call.)221 809 y(Wh)o(y)f
FE(Linux)p FH(?)22 b(W)l(ell,)16 b FE(Linux)f FH(is)i(the)f(\014rst)f(free)h
(unix)g(clone)h(for)e(the)h(386)f(to)g(b)q(e)h(freely)h(a)o(v)m(ailable.)150
873 y(It)h(is)h(a)e(complete)i(re-write,)g(and)f(has)g(b)q(een)h(k)o(ept)f
(small,)h(so)e(it)i(do)q(es)f(not)g(ha)o(v)o(e)f(a)h(lot)g(of)f(the)h(time-)
150 937 y(honored)d(baggage)f(that)g(other)h(free)g(op)q(erating)g(systems)g
(\(lik)o(e)h(386BSD\))e(carry)l(,)g(and)h(so)g(is)g(easier)h(to)150
1002 y(understand)g(and)f(mo)q(dify)l(.)221 1090 y(Unix)20
b(has)e(b)q(een)j(around)e(for)f(o)o(v)o(er)g(t)o(w)o(en)o(t)o(y)g(y)o(ears,)
h(but)g(only)g(in)h(the)f(last)g(few)g(y)o(ears)g(ha)o(v)o(e)f(mi-)150
1154 y(cro)q(computers)d(b)q(ecome)g(p)q(o)o(w)o(erful)g(enough)g(to)f(run)h
(a)f(mo)q(dern)i(protected,)e(m)o(ultiuser,)h(m)o(ultitasking)150
1218 y(op)q(erating)g(system.)20 b(F)l(urthermore,)14 b(unix)i(implemen)o
(tations)g(ha)o(v)o(e)e(not)h(b)q(een)h(free.)k(Because)15
b(of)g(this,)150 1283 y(v)o(ery)g(little)h(free)g(do)q(cumen)o(tation)f(has)g
(b)q(een)i(written,)e(at)f(least)h(for)g(the)g(k)o(ernel)h(in)o(ternals.)221
1371 y(Unix,)g(though)f(simple)i(at)e(\014rst,)g(has)g(gro)o(wn)f(more)h(and)
h(more)f(app)q(endages,)h(and)g(has)f(b)q(ecome)h(a)150 1435
y(v)o(ery)f(complex)i(system,)e(whic)o(h)i(only)f(\\wizards")g(understand.)22
b(With)16 b FE(Linux)p FH(,)f(ho)o(w)o(ev)o(er,)f(w)o(e)i(ha)o(v)o(e)f(a)150
1499 y(c)o(hance)h(to)e(c)o(hange)i(this,)f(for)f(a)h(few)g(reasons:)218
1624 y FG(\017)23 b FE(Linux)14 b FH(has)h(a)g(simple)i(k)o(ernel,)e(with)h
(w)o(ell-structured)g(in)o(terfaces.)218 1726 y FG(\017)23
b FH(One)14 b(p)q(erson,)g(Lin)o(us)h(T)l(orv)m(alds,)f(has)g(con)o(trol)g
(of)f(what)g(co)q(de)i(is)f(added)g(to)f FE(Linux)p FH(,)g(and)h(he)h(do)q
(es)264 1791 y(this)e(w)o(ork)f(gratis.)18 b(This)13 b(means)g(that)f(random)
g(pieces)j(of)d(co)q(de)h(are)g(not)f(forced)h(in)o(to)f(the)h(k)o(ernel)264
1855 y(b)o(y)i(some)g(compan)o(y's)f(p)q(olitics,)j(and)e(the)h(k)o(ernel)f
(in)o(terfaces)h(sta)o(y)e(relativ)o(ely)i(clean.)218 1957
y FG(\017)23 b FH(The)14 b(source)h(is)g(free,)f(so)g(man)o(y)h(p)q(eople)h
(can)e(study)h(it)g(and)f(learn)h(to)f(understand)h(it,)g(b)q(ecoming)264
2021 y(\\wizards")g(in)h(their)f(o)o(wn)g(righ)o(t,)g(and)g(ev)o(en)o(tually)
h(con)o(tribute)g(co)q(de)g(to)e(the)h(e\013ort.)221 2146 y(It)g(is)i(our)e
(hop)q(e)h(that)f(this)h(b)q(o)q(ok)g(will)i(help)f(the)e(nascen)o(t)h(k)o
(ernel)g(hac)o(k)o(er)g(learn)g(ho)o(w)f(to)g(hac)o(k)h(the)150
2211 y FE(Linux)f FH(k)o(ernel,)g(b)o(y)g(giving)h(an)g(understanding)g(of)f
(ho)o(w)f(the)i(k)o(ernel)g(is)f(structured.)p eop
%%Page: 4 5
4 4 bop 150 -84 1800 3 v 1913 -100 a FH(iv)150 266 y Fy(Thanks)20
b(to)p Fx(:)12 b(:)g(:)150 449 y FC(Lin)o(us)18 b(T)l(orv)m(alds,)24
b FH(of)d(course,)i(for)e(starting)h(this)g(whole)g(time)g(sink,)i(and)e(for)
f(gen)o(tly)h(pro)o(viding)264 513 y(explanations)17 b(whenev)o(er)f
(necessary)l(.)22 b(He)17 b(has)e(done)i(a)e(w)o(onderful)i(job)f(of)f(k)o
(eeping)i(the)f(k)o(ernel)264 578 y(source)f(co)q(de)h(understandable)h(and)f
(neat.)k(I)c(can't)f(imagine)h(ha)o(ving)g(learned)g(so)f(m)o(uc)o(h)h(in)g
(the)264 642 y(past)e(y)o(ear)h(without)g FE(Linux)p FH(.)150
744 y FC(Krishna)k(Balasubramanian)h FH(and)e FC(Douglas)g(Johnson,)23
b FH(for)15 b(writing)g(m)o(uc)o(h)g(of)f(the)h(section)g(on)264
808 y(memory)f(managemen)o(t,)g(and)i(helping)h(with)e(the)h(rest.)150
910 y FC(Stanley)i(Scalsky)l(,)23 b FH(for)15 b(helping)i(do)q(cumen)o(t)e
(the)h(system)e(call)j(in)o(terface.)150 1011 y FC(Rik)h(F)l(aith,)24
b FH(for)14 b(writing)i(the)f(section)h(on)f(ho)o(w)g(to)g(write)g(a)g(SCSI)h
(device)g(driv)o(er.)150 1113 y FC(Rob)q(ert)j(Baruc)o(h,)24
b FH(for)19 b(the)g(review)g(of)g FB(Writing)h(UNIX)f(Devic)n(e)g(Drivers)k
FH(and)c(for)g(his)g(help)i(with)264 1178 y(the)15 b(section)h(on)f(writing)h
(device)g(driv)o(ers.)150 1279 y FC(Kim)h(Christian)j(Johnson,)e(m)o(y)e
(wife)23 b FH(for)16 b(tolerating)h(and)h(encouraging)f(me)g(in)h(this)g(w)o
(ork)e(and)264 1344 y(in)g(all)g(I)f(do.)150 1571 y Fy(Cop)n(yrigh)n(t)21
b(Ac)n(kno)n(wledgemen)n(ts:)150 1754 y FC(Lin)o(ux)d(Memory)e(Managemen)o
(t:)24 b FH(The)10 b(original)h(v)o(ersion)g(of)e(this)i(do)q(cumen)o(t)f(is)
h(cop)o(yrigh)o(t)1821 1753 y(c)1808 1754 y FG(\015)g FH(1993)264
1818 y(Krishna)k(Balasubramanian.)21 b(Some)14 b(c)o(hanges)h(cop)o(yrigh)o
(t)1315 1817 y(c)1302 1818 y FG(\015)h FH(1993)d(Mic)o(hael)j(K.)f(Johnson)g
(and)264 1883 y(Douglas)g(R.)g(Johnson.)150 1984 y FC(Ho)o(w)i(System)f
(Calls)j(W)l(ork:)k FH(The)d(original)h(v)o(ersion)g(of)e(this)i(do)q(cumen)o
(t)f(is)h(cop)o(yrigh)o(t)1806 1983 y(c)1794 1984 y FG(\015)f
FH(1993)264 2049 y(Stanley)c(Scalsky)l(.)k(Some)15 b(c)o(hanges)h(cop)o
(yrigh)o(t)1105 2048 y(c)1093 2049 y FG(\015)f FH(1993)f(Mic)o(hael)i(K.)g
(Johnson)150 2150 y FC(W)l(riting)j(a)f(SCSI)f(Device)h(Driv)o(er)23
b FH(The)11 b(original)g(v)o(ersion)f(of)g(this)h(do)q(cumen)o(t)f(is)h(cop)o
(yrigh)o(t)1841 2149 y(c)1829 2150 y FG(\015)f FH(1993)264
2215 y(Ric)o(k)m(ard)k(E.)e(F)l(aith.)19 b(Some)13 b(mo)q(di\014cations)g
(are)g(cop)o(yrigh)o(t)1301 2214 y(c)1288 2215 y FG(\015)g
FH(1993)f(Mic)o(hael)i(K.)e(Johnson.)20 b(The)264 2279 y(author)c(has)g
(appro)o(v)o(ed)g(the)h(inclusion)i(of)d(this)h(material,)g(despite)h(the)f
(sligh)o(tly)g(more)g(restric-)264 2344 y(tiv)o(e)c(cop)o(yrigh)o(t)g(on)h
(this)f(whole)h(do)q(cumen)o(t.)20 b(The)14 b(original)g(cop)o(yrigh)o(t)f
(restrictions,)h FB(which)h(stil)r(l)264 2408 y(apply)h(to)h(any)f(work)h
(derive)n(d)f(solely)f(fr)n(om)i(this)f(work,)f FH(are:)p eop
%%Page: 5 6
5 5 bop 150 -84 1800 3 v 1926 -100 a FH(v)432 88 y(Cop)o(yrigh)o(t)661
87 y(c)649 88 y FG(\015)19 b FH(1993)e(Ric)o(k)m(ard)j(E.)e(F)l(aith)g
(\(faith@cs.unc.edu\).)31 b(All)20 b(righ)o(ts)e(re-)364 153
y(serv)o(ed.)h(P)o(ermission)12 b(is)h(gran)o(ted)e(to)g(mak)o(e)h(and)g
(distribute)h(v)o(erbatim)f(copies)h(of)f(this)364 217 y(pap)q(er)f(pro)o
(vided)h(the)f(cop)o(yrigh)o(t)g(notice)g(and)g(this)h(p)q(ermission)g
(notice)g(are)f(preserv)o(ed)364 281 y(on)k(all)h(copies.)264
383 y(If)g(y)o(ou)g(wish)h(to)f(mak)o(e)g(a)g(deriv)o(ed)i(w)o(ork,)d(please)
i(start)e(from)h(the)h(original)g(do)q(cumen)o(t.)24 b(T)l(o)16
b(do)264 448 y(so,)f(please)h(con)o(tact)f(Ric)o(k)m(ard)i(E.)e(F)l(aith,)h
FD(faith@cs.unc.edu)p FH(.)j(The)c(original)i(is)f(a)o(v)m(ailable)i(for)264
512 y(anon)o(ymous)c(ftp)h(as)g(ftp.cs.unc.edu:/pub/faith/pap)q(ers/scsi.pap)
q(er.tar.gz.)p eop
%%Page: 6 7
6 6 bop 150 461 a Fw(Con)m(ten)m(ts)150 761 y FC(0)42 b(Before)18
b(Y)l(ou)g(Begin)p FA(:)8 b(:)g(:)1247 b FC(1)218 849 y FH(0.1)46
b(T)o(yp)q(ographical)16 b(Con)o(v)o(en)o(tions)36 b FA(:)22
b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)91 b FH(1)218 936 y(0.2)46 b(Assumptions)e
FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)91
b FH(2)218 1024 y(0.3)46 b(Hac)o(king)15 b(Wisdom)31 b FA(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)91 b FH(2)150
1158 y FC(1)42 b(Device)18 b(Driv)o(ers)1367 b(4)218 1245 y
FH(1.1)46 b(What)14 b(is)i(a)f(Device)h(Driv)o(er?)40 b FA(:)23
b(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)91 b FH(4)218 1333 y(1.2)46
b(User-space)15 b(device)i(driv)o(ers)12 b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)91 b FH(5)323 1421 y(1.2.1)50 b(Example:)21 b FD(vgalib)14
b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)91 b FH(6)323
1509 y(1.2.2)50 b(Example:)21 b(mouse)15 b(con)o(v)o(ersion)25
b FA(:)e(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)91 b FH(7)218 1597 y(1.3)46 b(Device)16
b(Driv)o(er)f(Basics)28 b FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)91 b FH(8)323 1685 y(1.3.1)50 b(Namespace)38 b FA(:)22 b(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)91 b FH(8)323 1772 y(1.3.2)50
b(Allo)q(cating)17 b(memory)i FA(:)k(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)91
b FH(8)323 1860 y(1.3.3)50 b(Character)15 b(vs.)f(blo)q(c)o(k)i(devices)36
b FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)91 b FH(9)323 1948 y(1.3.4)50 b(In)o(terrupts)15
b(vs.)20 b(P)o(olling)44 b FA(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(10)323 2036 y(1.3.5)50 b(The)16 b(sleep-w)o(ak)o(eup)g(mec)o(hanism)27
b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)69 b FH(11)323 2124 y(1.3.6)50 b(The)16
b(VFS)41 b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(13)218 2212 y(1.4)46 b(Character)14 b(Device)i(Driv)o(ers)42
b FA(:)23 b(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(20)323 2300
y(1.4.1)50 b(Initialization)43 b FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)69 b FH(20)323 2387 y(1.4.2)50 b(In)o(terrupts)15 b(vs.)20
b(P)o(olling)44 b FA(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(21)323
2475 y(1.4.3)50 b(TTY)15 b(driv)o(ers)45 b FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)69 b FH(23)1032 2678 y(vi)p eop
%%Page: 7 8
7 7 bop 150 -84 1800 3 v 150 -100 a Fv(CONTENTS)1493 b FH(vii)323
88 y(1.4.4)50 b(Example)16 b(Driv)o(ers)32 b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)69 b FH(23)218 176 y(1.5)46 b(Blo)q(c)o(k)16 b(Device)g(Driv)o
(ers)21 b FA(:)i(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(24)323 264 y(1.5.1)50 b(Initialization)43 b FA(:)23 b(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)69 b FH(24)323 352 y(1.5.2)50 b(The)16
b(Bu\013er)g(Cac)o(he)e FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(26)323 440 y(1.5.3)50 b(The)16 b(Strategy)e(Routine)38
b FA(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(26)323 528 y(1.5.4)50
b(Example)16 b(Driv)o(ers)32 b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(27)218 615 y(1.6)46 b(Supp)q(orting)16 b(F)l(unctions)47
b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(27)218
703 y(1.7)46 b(W)l(riting)16 b(a)e(SCSI)i(Device)g(Driv)o(er)24
b FA(:)e(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(39)323 791 y(1.7.1)50
b(Wh)o(y)15 b(Y)l(ou)g(W)l(an)o(t)g(to)f(W)l(rite)i(a)f(SCSI)h(Driv)o(er)38
b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(39)323 879 y(1.7.2)50 b(What)15 b(is)g(SCSI?)37 b FA(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(39)323 967 y(1.7.3)50
b(SCSI)16 b(Commands)27 b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(43)323 1055 y(1.7.4)50 b(Getting)15 b(Started)h FA(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(44)323 1143
y(1.7.5)50 b(Before)15 b(Y)l(ou)h(Begin:)21 b(Gathering)15
b(T)l(o)q(ols)h FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)69 b FH(44)323 1230 y(1.7.6)50 b(The)16
b FE(Linux)e FH(SCSI)i(In)o(terface)h FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(45)323 1318 y(1.7.7)50 b(The)16 b FD(Scsi)p 661 1318 15
2 v 16 w(Host)f FH(Structure)38 b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(45)323 1406 y(1.7.8)50 b(The)16 b FD(Scsi)p 661 1406 V
16 w(Cmnd)f FH(Structure)38 b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b
FH(59)218 1494 y(1.8)46 b(Ac)o(kno)o(wledgemen)o(ts)29 b FA(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(62)218
1582 y(1.9)46 b(Net)o(w)o(ork)14 b(Device)i(Driv)o(ers)37 b
FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(62)150 1715
y FC(2)42 b(The)18 b FD(/proc)f FC(\014lesystem)1211 b(63)218
1803 y FH(2.1)46 b FD(/proc)14 b FH(Directories)i(and)f(Files)37
b FA(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(63)218 1891
y(2.2)46 b(Structure)15 b(of)g(the)g(/pro)q(c)g(\014lesystem)37
b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(69)218 1979 y(2.3)46 b(Programming)14
b(the)h(/pro)q(c)g(\014lesystem)40 b FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(70)150 2112 y FC(3)42 b(Ho)o(w)17 b(System)f(Calls)j(W)l(ork)1121
b(79)218 2200 y FH(3.1)46 b(What)14 b(Do)q(es)h(the)h(386)e(Pro)o(vide?)42
b FA(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(79)218 2288 y(3.2)46
b(Ho)o(w)14 b FE(Linux)h FH(Uses)g(In)o(terrupts)g(and)h(Exceptions)27
b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)69 b FH(81)218 2375 y(3.3)46 b(Ho)o(w)14 b FE(Linux)h FH(Initializes)j
(the)d(system)g(call)h(v)o(ectors)29 b FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(82)218 2463 y(3.4)46
b(Ho)o(w)14 b(to)h(Add)h(Y)l(our)f(Own)g(System)g(Calls)24
b FA(:)e(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)69 b FH(83)p eop
%%Page: 8 9
8 8 bop 150 -84 1800 3 v 150 -100 a Fv(CONTENTS)1480 b FH(viii)150
88 y FC(4)42 b(Lin)o(ux)18 b(Memory)f(Managemen)o(t)1027 b(85)218
176 y FH(4.1)46 b(Ov)o(erview)c FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(85)218 264 y(4.2)46
b(Ph)o(ysical)16 b(memory)28 b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)69 b FH(87)218 352 y(4.3)46 b(A)15 b(user)g(pro)q(cess')g
(view)h(of)f(memory)i FA(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(87)218
440 y(4.4)46 b(Memory)14 b(Managemen)o(t)g(data)h(in)h(the)f(pro)q(cess)h
(table)29 b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)69 b FH(88)218 528 y(4.5)46 b(Memory)14 b(initialization)49
b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(89)323
615 y(4.5.1)50 b(Pro)q(cesses)15 b(and)h(the)f(Memory)g(Manager)31
b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)69 b FH(90)218 703 y(4.6)46 b(Acquiring)16 b(and)g(F)l(reeing)g(Memory:)j
(P)o(aging)c(P)o(olicy)43 b FA(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)69 b FH(92)218 791 y(4.7)46 b(The)15 b(page)g(fault)h
(handlers)37 b FA(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(94)218 879 y(4.8)46 b(P)o(aging)21 b FA(:)h(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(95)218
967 y(4.9)46 b(80386)14 b(Memory)g(Mangamen)o(t)37 b FA(:)22
b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(96)323 1055 y(4.9.1)50 b(P)o(aging)15
b(on)g(the)g(386)39 b FA(:)23 b(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69
b FH(96)323 1143 y(4.9.2)50 b(Segmen)o(ts)15 b(in)h(the)g(80386)23
b FA(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)69 b FH(98)323 1230 y(4.9.3)50
b(Selectors)16 b(in)g(the)f(80386)35 b FA(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)46
b FH(100)323 1318 y(4.9.4)k(Segmen)o(t)15 b(descriptors)38
b FA(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)46 b FH(101)323 1406
y(4.9.5)k(Macros)14 b(used)i(in)g(setting)f(up)h(descriptors)44
b FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)46
b FH(103)150 1539 y FC(A)29 b(Annotated)19 b(Bibliograph)o(y)1103
b(105)150 1673 y(B)31 b(The)18 b(GNU)g(General)h(Public)f(License)881
b(112)218 1760 y FH(B.1)37 b(Pream)o(ble)k FA(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)46 b FH(112)218
1848 y(B.2)37 b(T)l(erms)15 b(and)g(Conditions)35 b FA(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)46 b FH(113)218 1936
y(B.3)37 b(Ho)o(w)14 b(to)h(Apply)h(These)g(T)l(erms)31 b FA(:)22
b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)46 b FH(118)p eop
%%Page: 1 10
1 9 bop 150 438 a Fu(Chapter)34 b(0)150 686 y Fw(Before)42
b(Y)-10 b(ou)39 b(Begin)p Ft(:)17 b(:)d(:)150 961 y Fs(0.1)70
b(T)n(yp)r(ographical)23 b(Con)n(v)n(en)n(tions)150 1090 y
FC(Bold)194 b FH(Used)12 b(to)f(mark)g FC(new)i(concepts)p
FH(,)f FC(W)-6 b(ARNINGS)p FH(,)12 b(and)g FC(k)o(eyw)o(ords)e
FH(in)i(a)f(language.)150 1193 y FB(italics)182 b FH(Used)19
b(for)f FB(emphasis)g FH(in)h(text,)f(and)h(o)q(ccasionally)h(for)d(quotes)h
(or)g(in)o(tro)q(ductions)i(at)450 1258 y(the)15 b(b)q(eginning)j(of)c(a)h
(section.)150 1361 y Fv(slan)o(ted)160 b FH(Used)18 b(to)e(mark)h
FC(meta-v)m(ariables)i FH(in)f(the)g(text,)e(esp)q(ecially)k(in)e(represen)o
(tations)f(of)450 1426 y(the)e(command)g(line.)22 b(F)l(or)14
b(example,)550 1528 y FD(ls)24 b(-l)14 b Fv(fo)q(o)450 1631
y FH(where)j Fv(fo)q(o)f FH(w)o(ould)h(\\stand)f(for")g(a)g(\014lename,)i
(suc)o(h)f(as)f FD(/bin/cp)p FH(.)24 b(Sometimes,)17 b(this)450
1695 y(migh)o(t)f(b)q(e)i(di\016cult)g(to)e(see,)g(and)h(so)f(the)h(text)f
(is)h(put)g(in)g(angle)g(brac)o(k)o(ets,)f(lik)o(e)i(this:)450
1760 y FG(h)p Fv(slan)o(ted)p FG(i)p FH(.)150 1863 y FD(Typewriter)60
b FH(Used)16 b(to)e(represen)o(t)h(screen)h(in)o(teraction,)f(as)g(in)550
1958 y Fr(ls)21 b(-l)h(/bin/cp)550 2015 y(-rwxr-xr-x)42 b(1)21
b(root)86 b(wheel)h(12104)20 b(Sep)i(25)f(15:53)g(/bin/cp)450
2117 y FH(Also)14 b(used)h(for)e(co)q(de)i(examples,)f(whether)h(it)f(is)g
(\\C")g(co)q(de,)g(a)g(shell)h(script,)g(or)e(some-)450 2182
y(thing)20 b(else,)i(and)e(to)f(displa)o(y)j(general)e(\014les,)i(suc)o(h)e
(as)f(con\014guration)i(\014les.)35 b(When)450 2246 y(necessary)13
b(for)f(clarit)o(y's)h(sak)o(e,)f(these)h(examples)h(or)e(\014gures)h(will)i
(b)q(e)e(enclosed)i(in)e(thin)450 2311 y(b)q(o)o(xes.)p 150
2370 101 2 v 150 2435 2 66 v 164 2414 a FF(Key)p 249 2435 V
150 2437 101 2 v 213 w FH(Represen)o(ts)j(a)f(k)o(ey)g(to)f(press.)20
b(Y)l(ou)c(will)h(often)d(see)i(it)f(in)h(this)g(form:)550
2517 y(Press)p 670 2478 143 2 v 670 2529 2 51 v 29 w FF(return)p
811 2529 V 670 2531 143 2 v 30 w FH(to)f(con)o(tin)o(ue.)1039
2678 y(1)p eop
%%Page: 2 11
2 10 bop 150 -84 1800 3 v 150 -100 a FC(0.2.)42 b(Assumptions)1362
b FH(2)150 88 y Fq(3)263 b FH(A)12 b(diamond)i(in)f(the)f(margin,)h(lik)o(e)h
(a)e(blac)o(k)h(diamond)g(on)f(a)g(ski)h(hill,)i(marks)d(\\danger")450
153 y(or)j(\\caution.")k(Read)d(paragraphs)f(mark)o(ed)f(this)i(w)o(a)o(y)e
(carefully)l(.)150 328 y Fs(0.2)70 b(Assumptions)150 461 y
FH(T)l(o)12 b(read)g FB(The)k FE(Linux)11 b FB(Kernel)h(Hackers')h(Guide)s
FH(,)g(y)o(ou)f(should)h(ha)o(v)o(e)f(a)f(reasonably)h(go)q(o)q(d)g
(understand-)150 526 y(ing)j(of)f(C.)g(That)g(is,)g(y)o(ou)g(should)i(b)q(e)f
(able)g(to)f(read)g(C)g(co)q(de)h(without)g(ha)o(ving)g(to)e(lo)q(ok)i(up)g
(ev)o(erything.)150 590 y(Y)l(ou)e(should)g(b)q(e)g(able)g(to)e(write)i
(simple)g(C)f(programs,)g(and)g(understand)h FD(struct)p FH('s,)e(p)q(oin)o
(ters,)i(macros,)150 654 y(and)j(ANSI)h(C)f(protot)o(yping.)22
b(Y)l(ou)16 b(do)g(not)f(ha)o(v)o(e)h(to)f(ha)o(v)o(e)h(a)g(thorough)f(kno)o
(wledge)i(of)e(the)h(standard)150 719 y(I/O)d(library)l(,)h(b)q(ecause)g(the)
f(standard)f(libraries)j(are)d(not)g(a)o(v)m(ailable)j(in)f(the)e(k)o(ernel.)
20 b(Some)13 b(of)g(the)f(more)150 783 y(often)j(used)g(standard)g(I/O)g
(functions)h(ha)o(v)o(e)f(b)q(een)h(rewritten)f(for)f(use)i(within)g(the)f(k)
o(ernel,)h(but)f(these)150 847 y(are)g(explained)i(in)f(this)g(b)q(o)q(ok)f
(where)h(necessary)l(.)221 935 y(Y)l(ou)e(should)i(b)q(e)f(able)g(to)f(use)h
(a)f(go)q(o)q(d)g(text)g(editor,)h(recompile)h(the)e FE(Linux)g
FH(k)o(ernel,)h(and)g(do)f(basic)150 1000 y(system)h(administration)h(tasks,)
e(suc)o(h)h(as)g(making)g(new)h(device)g(en)o(tries)g(in)g(/dev/.)221
1087 y(Y)l(ou)f(should)h(also)f(b)q(e)h(able)g(to)f(read,)g(as)f(I)i(do)f
(not)g(o\013er)g(supp)q(ort)h(for)e(this)i(b)q(o)q(ok)p FA(:)8
b(:)g(:)264 1204 y FH(\\)p FB(Hel)r(lo,)15 b(sir,)h(I'm)h(having)f(some)g(pr)
n(oblems)g(with)h(this)f(b)n(o)n(ok)g(you)h(wr)n(ote.)p FH(")264
1268 y(\\Y)l(es?")264 1333 y(\\)p FB(I)f(c)n(an)-5 b('t)16
b(r)n(e)n(ad)g(it.)p FH(")264 1397 y(\\Is)f(it)g(plugged)i(in?")264
1461 y(\\)p FB(Y)m(es.)27 b(I)20 b(also)f(trie)n(d)g(a)g(lamp)h(in)e(that)i
(so)n(cket,)f(so)g(I)g(know)g(it)g(is)g(getting)g(p)n(ower.)29
b(But)20 b(I)264 1526 y(r)n(e)n(al)r(ly)15 b(don)-5 b('t)17
b(think)f(that's)g(the)h(pr)n(oblem.)p FH(")264 1590 y(\\Wh)o(y)d(not?")264
1654 y(\\)p FB(I)i(c)n(an)-5 b('t)16 b(r)n(e)n(ad.)p FH(")264
1719 y(\\)j(Oh.)32 b(W)l(ell,)22 b(let's)d(start)f(here.)33
b(See)20 b(this?)33 b(Rep)q(eat)20 b(after)f(me:)28 b FB(The)20
b(c)n(at)g(sat)g(on)g(the)264 1783 y(r)n(at)p FA(:)8 b(:)g(:)d
FH(")150 1959 y Fs(0.3)70 b(Hac)n(king)22 b(Wisdom)150 2092
y FH(This)d(is)f(a)g(collection)i(of)d(little)j(things)e(that)f(y)o(ou)h
(need)h(to)e(kno)o(w)h(b)q(efore)g(y)o(ou)g(start)f(hac)o(king.)28
b(It)18 b(is)150 2156 y(rather)h(ram)o(bling,)i(and)f(almost)f(resem)o(bles)i
(a)e(glossary)g(in)i(form,)f(but)g(it)g(is)g(not)f(a)h(reference,)h(but)150
2220 y(rather)15 b(a)f(hac)o(k)o(er's)h(narativ)o(e,)f(a)h(short)g(course)g
(in)h(k)o(ernel)g(hac)o(king.)150 2372 y Fp(Static)i(v)m(ariables)150
2489 y FC(Alw)o(a)o(ys)12 b(initialize)j(static)f(v)m(ariables.)21
b FH(I)10 b(cannot)h(o)o(v)o(eremphasize)g(this.)19 b(Man)o(y)9
b(seemingly)j(random)150 2554 y(bugs)i(ha)o(v)o(e)f(b)q(een)h(caused)g(b)o(y)
g(not)f(initializin)q(g)j(static)d(v)m(ariables.)21 b(Because)14
b(the)g(k)o(ernel)g(is)g(not)f(really)h(a)p eop
%%Page: 3 12
3 11 bop 150 -84 1800 3 v 150 -100 a FC(0.3.)42 b(Hac)o(king)18
b(Wisdom)1264 b FH(3)150 88 y(standard)13 b(executable,)h(the)g
FC(bss)e FH(segmen)o(t)h(ma)o(y)g(or)f(ma)o(y)h(not)g(b)q(e)h(zero)q(ed,)g
(dep)q(ending)h(on)e(the)h(metho)q(d)150 153 y(used)i(for)e(b)q(o)q(oting.)
150 306 y Fo(libc)j Fp(una)n(v)m(ailable)150 423 y FH(Muc)o(h)j(of)f
FD(libc)g FH(is)i(una)o(v)m(ailable.)35 b(That)19 b(is,)i(all)g(of)e
FD(libc)h FH(is)g(una)o(v)m(ailable,)i(but)e(man)o(y)g(of)f(the)h(most)150
488 y(common)12 b(functions)h(are)f(duplicated.)21 b(See)12
b(the)h(section)g FC([not)i(here)f(y)o(et])e FH(for)g(simple)i(do)q(cumen)o
(tation)150 552 y(of)f(these)g(functions.)20 b(Most)12 b(of)h(the)g(do)q
(cumen)o(tation)h(for)e(these)i(are)e(the)i(section)f(3)g(and)h(section)f(9)g
(man)150 616 y(pages.)150 770 y Fn(Linux)k Fp(is)i(not)f Fn(unix)573
752 y Fz(TM)150 887 y FH(Ho)o(w)o(ev)o(er,)g(it)h(is)h(close.)31
b(It)19 b(is)g(not)f(plan)i(9,)f(nor)f(is)h(it)g(Mac)o(h.)31
b(It)18 b(is)i(not)e(primarily)i(in)o(tended)g(to)e(b)q(e)150
951 y(a)j(great)g(commercial)h(success.)39 b(P)o(eople)23 b(will)g(not)e(lo)q
(ok)h(kindly)h(up)q(on)f(suggestions)f(to)g(c)o(hange)h(it)150
1016 y(fundamen)o(tally)c(to)e(attain)h(an)o(y)f(of)h(these)g(goals.)25
b(It)17 b(has)f(b)q(een)j(suggested)d(that)h(part)f(of)g(the)h(reason)150
1080 y(that)i(the)h(qualit)o(y)g(of)f(the)h FE(Linux)f FH(k)o(ernel)h(is)g
(so)g(high)g(is)g(the)g(un)o(b)q(ending)i(dev)o(otion)e(of)f(the)h
FE(Linux)150 1144 y FH(k)o(ernel)c(hac)o(k)o(ers)f(to)f(ha)o(ving)i(fun)f
(pla)o(ying)h(with)g(their)g(new)f(k)o(ernel.)150 1298 y Fp(Useful)j
(references)150 1415 y FH(Y)l(ou)23 b(will)i(encoun)o(ter)e(certain)g
(references)h(that)e(y)o(ou)h(will)h(need)g(to)f(understand.)43
b(F)l(or)23 b(instance,)150 1479 y(\\Stev)o(ens")15 b(and)h(\\Bac)o(h".)21
b(Read)c(the)f(annotated)f(bibliograph)o(y)i(\(App)q(endix)h(A\))d(for)g(a)h
(list)h(of)e(b)q(o)q(oks)150 1544 y(that)f(y)o(ou)h(should)i(at)d(least)h
(recognize)i(references)e(to,)g(ev)o(en)g(if)h(y)o(ou)f(ha)o(v)o(e)f(not)h
(read)g(them.)150 1697 y Fp(Read)j(the)h(F)-6 b(A)n(Q)p eop
%%Page: 4 13
4 12 bop 150 438 a Fu(Chapter)34 b(1)150 686 y Fw(Device)41
b(Driv)m(ers)150 961 y Fs(1.1)70 b(What)23 b(is)f(a)h(Device)e(Driv)n(er?)150
1094 y FH(Making)16 b(hardw)o(are)f(w)o(ork)g(is)i(tedious.)23
b(T)l(o)16 b(write)g(to)f(a)h(hard)g(disk,)h(for)e(example,)i(requires)g
(that)e(y)o(ou)150 1158 y(write)c(magic)h(n)o(um)o(b)q(ers)g(in)g(magic)f
(places,)i(w)o(ait)e(for)g(the)g(hard)g(driv)o(e)h(to)f(sa)o(y)g(that)f(it)i
(is)g(ready)f(to)g(receiv)o(e)150 1222 y(data,)17 b(and)g(then)h(feed)g(it)f
(the)g(data)g(it)h(w)o(an)o(ts,)e(v)o(ery)h(carefully)l(.)27
b(T)l(o)17 b(write)h(to)e(a)h(\015opp)o(y)h(disk)g(is)g(ev)o(en)150
1287 y(harder,)i(and)g(requires)g(that)f(the)g(program)g(sup)q(ervise)i(the)e
(\015opp)o(y)h(disk)g(driv)o(e)g(almost)f(constan)o(tly)150
1351 y(while)e(it)e(is)h(running.)221 1439 y(Instead)g(of)f(putting)h(co)q
(de)g(in)h(eac)o(h)f(application)h(y)o(ou)f(write)f(to)h(con)o(trol)f(eac)o
(h)h(device,)h(y)o(ou)e(share)150 1503 y(the)c(co)q(de)h(b)q(et)o(w)o(een)f
(applications.)20 b(T)l(o)11 b(mak)o(e)f(sure)h(that)g(that)f(co)q(de)i(is)f
(not)g(compromised,)h(y)o(ou)e(protect)150 1568 y(it)i(from)g(users)g(and)g
(normal)g(programs)f(that)h(use)g(it.)19 b(If)13 b(y)o(ou)e(do)h(it)h(righ)o
(t,)f(y)o(ou)g(will)h(b)q(e)g(able)g(to)e(add)i(and)150 1632
y(remo)o(v)o(e)i(devices)j(from)e(y)o(our)f(system)h(without)g(c)o(hanging)h
(y)o(our)f(applications)h(at)f(all.)24 b(F)l(urthermore,)150
1696 y(y)o(ou)19 b(need)g(to)g(b)q(e)g(able)h(to)e(load)h(y)o(our)g(program)f
(in)o(to)h(memory)f(and)h(run)g(it,)h(whic)o(h)g(the)f(op)q(erating)150
1761 y(system)f(also)g(do)q(es.)29 b(So,)18 b(an)g(op)q(erating)h(system)e
(is)i(essen)o(tially)g(a)f(preiviledged,)k(general,)c(sharable)150
1825 y(library)e(or)f(lo)o(w-lev)o(el)h(hardw)o(are)f(and)g(memory)g(and)g
(pro)q(cess)h(con)o(trol)f(functions)g(and)h(routines.)221
1913 y(All)i(v)o(ersions)e(of)h FE(un)p FA(?)p FE(x)f FH(ha)o(v)o(e)g(an)h
(abstract)e(w)o(a)o(y)h(of)g(reading)h(and)g(writing)g(devices.)26
b(By)17 b(making)150 1977 y(the)d(devices)h(act)e(as)h(m)o(uc)o(h)g(as)f(p)q
(ossible)j(lik)o(e)f(regular)e(\014les,)i(the)f(same)g(calls)g(\()p
FD(read\(\))p FH(,)f FD(write\(\))p FH(,)g(etc.\))150 2042
y(can)i(b)q(e)g(used)h(for)e(devices)i(and)f(\014les.)21 b(Within)16
b(the)f(k)o(ernel,)g(there)g(are)g(a)f(set)h(of)f(functions,)i(registered)150
2106 y(with)f(the)g(\014lesystem,)g(whic)o(h)g(are)g(called)h(to)e(handle)i
(requests)f(to)f(do)h(I/O)g(on)f(\\device)i(sp)q(ecial)h(\014les,")150
2170 y(whic)o(h)f(are)f(those)g(whic)o(h)h(represen)o(t)f(devices.)953
2154 y Fm(1)221 2258 y FH(All)k(devices)g(con)o(trolled)g(b)o(y)e(the)h(same)
g(device)h(driv)o(er)f(are)g(giv)o(en)g(the)g(same)g FC(ma)s(jor)j(n)o(um)o
(b)q(er,)150 2323 y FH(and)c(of)f(those)h(with)g(the)g(same)f(ma)s(jor)f(n)o
(um)o(b)q(er,)i(di\013eren)o(t)h(devices)g(are)f(distinguished)i(b)o(y)e
(di\013eren)o(t)150 2387 y FC(minor)h(n)o(um)o(b)q(ers.)512
2371 y Fm(2)p 150 2418 720 2 v 202 2449 a Fz(1)219 2465 y Fl(See)13
b Fk(mknod\(1,2\))c Fl(for)k(an)g(explanation)j(of)d(ho)o(w)g(to)g(mak)o(e)g
(these)h(\014les.)202 2497 y Fz(2)219 2513 y Fl(This)i(is)h(not)e(strictly)i
(true,)f(but)g(is)h(close)f(enough.)26 b(If)15 b(y)o(ou)h(understand)i(where)
d(it)h(is)g(not)g(true,)g(y)o(ou)g(don't)g(need)1039 2678 y
FH(4)p eop
%%Page: 5 14
5 13 bop 150 -84 1800 3 v 150 -100 a FC(1.2.)42 b(User-space)18
b(device)g(driv)o(ers)1075 b FH(5)221 88 y(This)20 b(c)o(hapter)g(explains)i
(ho)o(w)d(to)h(write)g(an)o(y)g(t)o(yp)q(e)g(of)g FE(Linux)f
FH(device)j(driv)o(er)e(that)f(y)o(ou)h(migh)o(t)150 153 y(need)c(to,)f
(including)j(c)o(haracter,)c(blo)q(c)o(k,)i(SCSI,)g(and)g(net)o(w)o(ork)e
(driv)o(ers.)21 b FC([W)l(ell,)e(it)g(will)g(when)e(it)i(is)150
217 y(done)p FA(:)8 b(:)g(:)e FC(])18 b FH(It)f(explains)i(what)d(functions)i
(y)o(ou)f(need)h(to)f(write,)h(ho)o(w)e(to)h(initialize)j(y)o(our)d(driv)o
(ers)h(and)150 281 y(obtain)e(memory)f(for)f(them)i(e\016cien)o(tly)l(,)h
(and)e(what)g(function)i(are)e(built)i(in)f(to)f FE(Linux)g
FH(to)g(mak)o(e)f(y)o(our)150 346 y(job)h(easier.)221 434 y(Creating)j
(device)j(driv)o(ers)e(for)g FE(Linux)f FH(is)i(easier)f(than)g(y)o(ou)g
(migh)o(t)g(think.)32 b(It)19 b(merely)g(in)o(v)o(olv)o(es)150
498 y(writing)c(a)g(few)f(functions)i(and)f(registering)g(them)g(with)g(the)f
(Virtual)i(Filesystem)f(Switc)o(h)h(\(VFS\),)d(so)150 562 y(that)h(when)i
(the)f(prop)q(er)h(device)h(sp)q(ecial)g(\014les)f(are)f(accessed,)g(the)g
(VFS)g(can)h(call)g(y)o(our)f(functions.)221 650 y(Ho)o(w)o(ev)o(er,)i(a)i(w)
o(ord)e(of)h(w)o(arning)h(is)g(due)g(here:)27 b(W)l(riting)19
b(a)f(device)i(driv)o(er)f FC(is)f FH(writing)h(a)f(part)g(of)150
715 y(the)f FE(Linux)g FH(k)o(ernel.)27 b(This)18 b(means)f(that)g(y)o(our)f
(driv)o(er)i(runs)g(with)f(k)o(ernel)h(p)q(ermissions,)h(and)f(can)f(do)150
779 y(an)o(ything)c(it)h(w)o(an)o(ts)d(to:)19 b(write)13 b(to)f(an)o(y)h
(memory)l(,)f(reformat)g(y)o(our)h(hard)g(driv)o(e,)g(damage)g(y)o(our)f
(monitor)150 843 y(or)h(video)h(card,)g(or)f(ev)o(en)h(break)g(y)o(our)f
(dishes,)h(if)g(y)o(our)f(dish)o(w)o(asher)h(is)g(con)o(trolled)h(b)o(y)e(y)o
(our)g(computer.)150 908 y(Be)j(careful.)221 996 y(Also,)d(y)o(our)f(driv)o
(er)h(will)i(run)e(in)g(k)o(ernel)h(mo)q(de,)f(and)g(the)g
FE(Linux)f FH(k)o(ernel,)i(lik)o(e)g(most)e FE(un)p FA(?)p
FE(x)g FH(k)o(ernels,)150 1060 y(is)i(non-pre-emptible.)21
b(This)14 b(means)f(that)f(if)i(y)o(ou)f(driv)o(er)g(tak)o(es)g(a)f(long)i
(time)f(to)g(w)o(ork)f(without)h(giving)150 1124 y(other)i(programs)g(a)g(c)o
(hance)h(to)f(w)o(ork,)g(y)o(our)g(computer)h(will)h(app)q(ear)f(to)f
(\\freeze")g(when)h(y)o(our)g(driv)o(er)150 1189 y(is)g(running.)21
b(Normal)15 b(user-mo)q(de)h(pre-emptiv)o(e)g(sc)o(heduling)h(do)q(es)e(not)g
(apply)h(to)f(y)o(our)f(driv)o(er.)221 1276 y(If)f(y)o(ou)g(c)o(ho)q(ose)h
(to)e(write)i(a)f(device)i(driv)o(er,)f(y)o(ou)f(m)o(ust)f(tak)o(e)h(ev)o
(erything)h(written)f(here)h(as)f(a)g(guide,)150 1341 y(and)21
b(no)f(more.)35 b(I)21 b(cannot)f(guaran)o(tee)g(that)f(this)i(c)o(hapter)g
(will)h(b)q(e)f(free)f(of)g(errors,)h(and)f(I)h(cannot)150
1405 y(guaran)o(tee)d(that)g(y)o(ou)g(will)i(not)e(damage)g(y)o(our)g
(computer,)h(ev)o(en)g(if)g(y)o(ou)f(follo)o(w)g(these)h(instructions)150
1470 y(exactly)l(.)31 b(It)18 b(is)i(highly)g(unlik)o(ely)h(that)d(y)o(ou)g
(will)i(damage)e(it,)i(but)e(I)h(cannot)g(guaran)o(tee)f(against)g(it.)150
1534 y(There)e(is)g(only)g(one)g(\\infallible")j(direction)e(I)f(can)g(giv)o
(e)f(y)o(ou:)21 b FC(Bac)o(k)d(up!)k FH(Bac)o(k)15 b(up)h(b)q(efore)g(y)o(ou)
g(test)150 1598 y(y)o(our)f(new)g(device)i(driv)o(er,)e(or)g(y)o(ou)f(ma)o(y)
h(regret)g(it)g(later.)150 1775 y Fs(1.2)70 b(User-space)22
b(device)f(driv)n(ers)150 1908 y FH(It)d(is)h(not)f(alw)o(a)o(ys)f(necessary)
h(to)g(write)g(a)g(device)i(driv)o(er)e(for)g(a)g(device,)i(esp)q(ecially)g
(in)f(applications)150 1973 y(where)g(no)g(t)o(w)o(o)e(applications)k(will)f
(comp)q(ete)g(for)e(the)h(device.)32 b(The)19 b(most)f(useful)i(example)g(of)
f(this)150 2037 y(is)f(a)g(memory-mapp)q(ed)g(device,)i(but)e(y)o(ou)f(can)h
(also)g(do)g(this)g(with)h(devices)g(in)f(I/O)h(space)f(\(devices)150
2101 y(accessed)e(with)g FD(inb\(\))e FH(and)i FD(outb\(\))p
FH(,)e(etc.\).)20 b(If)c(y)o(our)e(pro)q(cess)i(is)g(running)g(as)f(sup)q
(eruser)i(\(ro)q(ot\),)c(y)o(ou)150 2166 y(can)i(use)h(the)g
FD(mmap\(\))e FH(call)j(to)d(map)h(some)g(of)g(y)o(our)g(pro)q(cess)h(memory)
f(to)f(actual)i(memory)f(lo)q(cations,)150 2230 y(b)o(y)21
b FD(mmap\(\))p FH('ing)e(a)i(section)g(of)f(/dev/mem.)36 b(When)21
b(y)o(ou)f(ha)o(v)o(e)g(done)h(this)g(mapping,)i(it)e(is)g(prett)o(y)150
2294 y(easy)c(to)f(write)h(and)g(read)f(from)h(real)g(memory)f(addresses)h
(just)f(as)h(y)o(ou)f(w)o(ould)i(read)e(and)h(write)g(an)o(y)150
2359 y(v)m(ariables.)p 150 2389 720 2 v 150 2432 a Fl(to)d(read)g(this)h
(section,)g(and)f(if)g(y)o(ou)g(don't)g(but)h(w)o(an)o(t)e(to)h(learn,)h
(read)f(the)g(co)q(de)g(for)g(the)g(tt)o(y)f(devices,)j(whic)o(h)e(uses)h(up)
f(2)150 2484 y(ma)r(jor)f(n)o(um)o(b)q(ers,)h(and)f(ma)o(y)h(use)f(a)g(third)
h(and)g(p)q(ossibly)h(fourth)f(b)o(y)f(the)g(time)h(y)o(ou)f(read)h(this.)p
eop
%%Page: 6 15
6 14 bop 150 -84 1800 3 v 150 -100 a FC(1.2.)36 b(User-space)19
b(device)e(driv)o(ers)1081 b FH(6)221 88 y(If)15 b(y)o(our)f(driv)o(er)i
(needs)g(to)e(resp)q(ond)i(to)e(in)o(terrupts,)h FC([I)j(supp)q(ose)f(there)h
(should)g(b)q(e)g(a)g(discus-)150 153 y(sion)j(of)f(in)o(terrupts)i(b)q
(efore)f(this)p FA(:)8 b(:)g(:)e FC(])19 b FH(then)f(y)o(ou)f(really)i(need)f
(to)f(b)q(e)i(w)o(orking)e(in)i(k)o(ernel)f(space,)150 217
y(and)e(need)g(to)f(write)h(a)f(real)h(device)h(driv)o(er,)e(as)h(there)f(is)
h(no)g(w)o(a)o(y)e(at)h(this)h(time)g(to)f(deliv)o(er)i(in)o(terrupts)150
281 y(to)e(user)g(pro)q(cesses.)221 369 y(If)g(y)o(our)f(driv)o(er)h(m)o(ust)
f(b)q(e)h(accessible)i(to)d(m)o(ultiple)i(pro)q(cesses,)f(and/or)f(manage)g
(con)o(ten)o(tion)h(for)f(a)150 434 y(resource,)h(then)g(y)o(ou)g(also)g
(need)i(to)d(write)h(a)g(real)h(device)g(driv)o(er.)150 587
y Fp(1.2.1)55 b(Example:)22 b Fo(vgalib)150 704 y FH(A)d(go)q(o)q(d)g
(example)h(of)f(a)g(user-space)h(driv)o(er)f(is)h(the)f FD(vgalib)f
FH(library)l(.)33 b(The)20 b(standard)e FD(read\(\))h FH(and)150
769 y FD(write\(\))14 b FH(calls)i(are)f(really)h(inadequate)g(for)e(writing)
i(a)f(really)h(fast)e(graphics)h(driv)o(er,)g(and)h(so)e(instead)150
833 y(there)i(is)g(a)f(library)h(whic)o(h)h(acts)e(conceptually)i(lik)o(e)g
(a)e(device)i(driv)o(er,)e(but)h(runs)g(in)g(user)g(space.)21
b(An)o(y)150 897 y(pro)q(cesses)14 b(whic)o(h)f(use)h(it)f
FC(m)o(ust)f FH(run)i(setuid)g(ro)q(ot,)e(b)q(ecause)i(it)g(uses)f(the)g
FD(ioperm\(\))f FH(system)h(call.)20 b(It)13 b(is)150 962 y(p)q(ossible)j
(for)e(a)g(pro)q(cess)g(that)g(is)g(not)g(setuid)h(ro)q(ot)f(to)f(write)i(to)
e(/dev/mem)h(if)h(y)o(ou)f(ha)o(v)o(e)g(a)f(group)h FD(mem)150
1026 y FH(or)g FD(kmem)g FH(whic)o(h)h(is)g(allo)o(w)o(ed)g(write)g(p)q
(ermission)h(to)d(/dev/mem)i(and)f(the)h(pro)q(cess)g(is)g(prop)q(erly)g
(setgid,)150 1090 y(but)g(only)h(a)f(pro)q(cess)g(running)i(as)e(ro)q(ot)f
(can)h(execute)h(the)f FD(ioperm\(\))f FH(call.)221 1178 y(There)19
b(are)f(sev)o(eral)h(I/O)g(p)q(orts)g(asso)q(ciated)g(with)g(V)o(GA)f
(graphics.)31 b FD(vgalib)18 b FH(creates)h(sym)o(b)q(olic)150
1243 y(names)12 b(for)g(this)h(with)f FD(#define)g FH(statemen)o(ts,)f(and)i
(then)f(issues)h(the)g FD(ioperm\(\))e FH(call)j(lik)o(e)f(this)g(to)e(mak)o
(e)150 1307 y(it)k(p)q(ossible)i(for)e(the)g(pro)q(cess)h(to)e(read)h(and)h
(write)f(directly)i(from)d(and)h(to)g(those)g(p)q(orts:)351
1425 y Fr(if)21 b(\(ioperm\(CRT_IC,)e(1,)i(1\)\))g({)438 1481
y(printf\("VGAlib:)e(can't)h(get)i(I/O)f(permissions)e(\\n"\);)438
1538 y(exit)i(\(-1\);)351 1595 y(})351 1652 y(ioperm\(CRT_IM,)40
b(1,)22 b(1\);)351 1708 y(ioperm\(ATT_IW,)d(1,)i(1\);)264 1848
y Fj([)p Fi(:)7 b(:)g(:)e Fj(])150 1974 y FH(It)17 b(only)h(needs)g(to)e(do)h
(error)g(c)o(hec)o(king)h(once,)g(b)q(ecause)g(the)f(only)h(reason)e(for)h
(the)g FD(ioperm\(\))f FH(call)j(to)150 2038 y(fail)d(is)g(that)e(it)i(is)f
(not)g(b)q(eing)i(called)f(b)o(y)g(the)f(sup)q(eruser,)h(and)f(this)h(status)
e(is)i(not)e(going)i(to)e(c)o(hange.)221 2126 y(After)f(making)h(this)g
(call,)g(the)g(pro)q(cess)g(is)g(allo)o(w)o(ed)g(to)f(use)h
FD(inb)f FH(and)h FD(outb)f FH(mac)o(hine)h(instructions,)150
2190 y(but)f(only)h(on)f(the)h(sp)q(eci\014ed)h(p)q(orts.)k(These)13
b(instructions)i(can)e(b)q(e)h(accessed)g(without)f(writing)h(directly)150
2254 y(in)i(assem)o(bly)f(b)o(y)h(including)i FD(<linux/asm>)p
FH(.)g(Read)e FD(<linux/asm>)d FH(for)i(details.)221 2342 y(After)k
(arranging)g(for)g(p)q(ort)g(I/O,)g FD(vgalib)g FH(arranges)g(for)g(writing)h
(directly)g(to)f(k)o(ernel)i(memory)150 2407 y(with)16 b(the)f(follo)o(wing)h
(co)q(de:)351 2524 y Fr(/*)21 b(open)g(/dev/mem)f(*/)p eop
%%Page: 7 16
7 15 bop 150 -84 1800 3 v 150 -100 a FC(1.2.)42 b(User-space)18
b(device)g(driv)o(ers)1075 b FH(7)351 88 y Fr(if)21 b(\(\(mem_fd)f(=)i
(open\("/dev/mem",)c(O_RDWR\))j(\))g(<)h(0\))f({)438 145 y(printf\("VGAlib:)e
(can't)h(open)h(/dev/mem)g(\\n"\);)438 202 y(exit)g(\(-1\);)351
259 y(})351 372 y(/*)g(mmap)g(graphics)f(memory)h(*/)351 429
y(if)g(\(\(graph_mem)f(=)h(malloc\(GRAPH_SIZE)e(+)i(\(PAGE_SIZE-1\)\)\))e(==)
i(NULL\))g({)438 486 y(printf\("VGAlib:)e(allocation)g(error)i(\\n"\);)438
543 y(exit)g(\(-1\);)351 599 y(})351 656 y(if)g(\(\(unsigned)f
(long\)graph_mem)f(\045)i(PAGE_SIZE\))438 713 y(graph_mem)f(+=)h(PAGE_SIZE)f
(-)i(\(\(unsigned)e(long\)graph_mem)e(\045)k(PAGE_SIZE\);)351
770 y(graph_mem)e(=)h(\(unsigned)f(char)h(*\)mmap\()438 827
y(\(caddr_t\)graph_me)o(m,)438 883 y(GRAPH_SIZE,)438 940 y(PROT_READ|PROT_WR)
o(ITE,)438 997 y(MAP_SHARED|MAP_FI)o(XED,)438 1054 y(mem_fd,)438
1111 y(GRAPH_BASE)351 1167 y(\);)351 1224 y(if)g(\(\(long\)graph_mem)e(<)i
(0\))h({)438 1281 y(printf\("VGAlib:)d(mmap)i(error)f(\\n"\);)438
1338 y(exit)h(\(-1\);)351 1394 y(})150 1520 y FH(It)16 b(\014rst)g(op)q(ens)g
(/dev/mem,)g(then)g(allo)q(cates)h(memory)e(enough)h(so)g(that)f(the)h
(mapping)h(can)f(b)q(e)h(done)150 1584 y(on)g(a)f(page)h(\(4)f(KB\))h(b)q
(oundary)l(,)h(and)f(then)g(attempts)f(the)h(map.)25 b FD(GRAPH)p
1453 1584 15 2 v 16 w(SIZE)17 b FH(is)g(the)g(size)h(of)e(V)o(GA)150
1648 y(memory)l(,)22 b(and)f FD(GRAPH)p 559 1648 V 17 w(BASE)f
FH(is)i(the)f(\014rst)g(address)g(of)g(V)o(GA)g(memory)g(in)h(/dev/mem.)37
b(Then)22 b(b)o(y)150 1713 y(writing)15 b(to)g(the)g(address)f(that)h(is)g
(returned)g(b)o(y)g FD(mmap\(\))p FH(,)f(the)h(pro)q(cess)g(is)g(actually)h
(writing)f(to)f(screen)150 1777 y(memory)l(.)150 1930 y Fp(1.2.2)55
b(Example:)22 b(mouse)17 b(con)n(v)n(ersion)150 2048 y FH(If)c(y)o(ou)f(w)o
(an)o(t)f(a)h(driv)o(er)h(that)f(acts)g(a)g(bit)h(more)f(lik)o(e)i(a)e(k)o
(ernel-lev)o(el)j(driv)o(er,)e(but)f(do)q(es)h(not)f(liv)o(e)i(in)f(k)o
(ernel)150 2112 y(space,)18 b(y)o(ou)f(can)g(also)h(mak)o(e)e(a)h(\014fo,)h
(or)e(named)i(pip)q(e.)28 b(This)18 b(usually)h(liv)o(es)f(in)g(the)g(/dev/)f
(directory)150 2176 y(\(although)i(it)g(do)q(esn't)g(need)h(to\))e(and)i
(acts)e(substan)o(tially)i(lik)o(e)h(a)d(device)j(once)e(set)g(up.)32
b(Ho)o(w)o(ev)o(er,)150 2241 y(\014fo's)15 b(are)f(one-directional)k(only)d
(|)h(they)f(ha)o(v)o(e)g(one)g(reader)h(and)f(one)g(writer.)221
2329 y(F)l(or)20 b(instance,)j(it)e(used)h(to)e(b)q(e)i(that)e(if)h(y)o(ou)g
(had)g(a)g(PS/2-st)o(yle)g(mouse,)h(and)f(w)o(an)o(ted)f(to)h(run)150
2393 y(XF)l(ree86,)12 b(y)o(ou)g(had)g(to)g(create)f(a)h(\014fo)g(called)i
(/dev/mouse,)e(and)g(run)h(a)f(program)f(called)i(mcon)o(v)f(whic)o(h)150
2457 y(read)17 b(PS/2)h(mouse)f(\\droppings")h(from)e(/dev/psaux,)i(and)g
(wrote)e(the)i(equiv)m(alen)o(t)h(microsoft-st)o(yle)150 2522
y(\\droppings")c(to)f(/dev/mouse.)19 b(Then)c(XF)l(ree86)f(w)o(ould)h(read)f
(the)h(\\droppings")g(from)e(/dev/mouse,)p eop
%%Page: 8 17
8 16 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1178 b FH(8)150 88 y(and)15 b(it)h(w)o(ould)f(b)q(e)h
(as)f(if)h(there)f(w)o(ere)g(a)g(microsoft)f(mouse)i(connected)g(to)e
(/dev/mouse.)1692 72 y Fm(3)150 266 y Fs(1.3)70 b(Device)20
b(Driv)n(er)i(Basics)150 398 y FH(W)l(e)e(will)h(assume)f(that)f(y)o(ou)g
(decide)i(that)e(y)o(ou)g(do)h(not)f(wish)i(to)e(write)g(a)h(user-space)g
(device,)i(and)150 463 y(w)o(ould)13 b(rather)f(implemen)o(t)i(y)o(our)e
(device)j(in)e(the)g(k)o(ernel.)20 b(Y)l(ou)13 b(will)h(probably)f(b)q(e)h
(writing)f(writing)g(t)o(w)o(o)150 527 y(\014les,)j(a)g FD(.c)f
FH(\014le)i(and)f(a)g FD(.h)f FH(\014le,)i(and)f(p)q(ossibly)h(mo)q(difying)g
(other)e(\014les)i(as)e(w)o(ell,)i(as)e(will)j(b)q(e)e(describ)q(ed)150
591 y(b)q(elo)o(w.)k(W)l(e)15 b(will)h(refer)f(to)f(y)o(our)g(\014les)h(as)f
(fo)q(o.c)g(and)h(fo)q(o.h,)f(and)h(y)o(our)f(driv)o(er)h(will)h(b)q(e)f(the)
g FD(foo)f FH(driv)o(er.)221 679 y FC([Should)i(I)e(include)i(at)f(the)g(b)q
(eginning)i(of)e(this)g(c)o(hapter)g(an)h(example)e(of)h(c)o(hargen)h(and)150
744 y(c)o(harsink?)30 b(Man)o(y)19 b(writers)i(do,)f(but)g(I)g(don't)h(kno)o
(w)d(that)j(it)f(is)g(the)g(b)q(est)g(w)o(a)o(y)l(.)29 b(I'd)20
b(lik)o(e)150 808 y(p)q(eople's)f(opinions)f(on)g(this.])150
961 y Fp(1.3.1)55 b(Namespace)150 1079 y FH(One)15 b(of)e(the)h(\014rst)g
(things)g(y)o(ou)f(will)j(need)f(to)e(do,)h(b)q(efore)g(writing)g(an)o(y)g
(co)q(de,)g(is)g(to)g(name)g(y)o(our)f(device.)150 1143 y(This)19
b(name)f(should)i(b)q(e)f(a)f(short)f(\(probably)i(t)o(w)o(o)e(or)h(three)g
(c)o(haracter\))f(string.)30 b(F)l(or)17 b(instance,)j(the)150
1207 y(parallel)c(device)g(is)f(the)g(\\)p FD(lp)p FH(")e(device,)j(the)f
(\015oppies)g(are)g(the)f(\\)p FD(fd)p FH(")g(devices,)i(and)e(SCSI)h(disks)h
(are)e(the)150 1272 y(\\)p FD(sd)p FH(")j(devices.)27 b(As)18
b(y)o(ou)f(write)g(y)o(our)g(driv)o(er,)h(y)o(ou)f(will)i(giv)o(e)f(y)o(our)f
(functions)h(names)f(pre\014xed)i(with)150 1336 y(y)o(our)f(c)o(hosen)g
(string)h(to)f(a)o(v)o(oid)g(an)o(y)g(namespace)g(confusion.)31
b(W)l(e)18 b(will)i(call)g(y)o(our)d(pre\014x)i FD(foo,)g FH(and)150
1400 y(giv)o(e)c(y)o(our)g(functions)h(names)f(lik)o(e)i FD(foo)p
841 1400 15 2 v 16 w(read\(\),)23 b(foo)p 1120 1400 V 17 w(write\(\),)14
b FH(etc.)150 1554 y Fp(1.3.2)55 b(Allo)r(cating)18 b(memor)o(y)150
1671 y FH(Memory)j(allo)q(cation)j(in)f(the)f(k)o(ernel)h(is)g(a)f(little)i
(di\013eren)o(t)f(from)f(memory)f(allo)q(cation)j(in)f(normal)150
1735 y(user-lev)o(el)18 b(programs.)24 b(Instead)17 b(of)f(ha)o(ving)h(a)g
FD(malloc\(\))e FH(capable)j(of)f(deliv)o(ering)h(almost)f(unlimited)150
1800 y(amoun)o(ts)d(of)h(memory)l(,)g(there)g(is)h(a)e FD(kmalloc\(\))g
FH(function)i(that)f(is)h(a)e(bit)i(di\013eren)o(t:)218 1925
y FG(\017)23 b FH(The)11 b(largest)g(size)h(that)f(can)g(b)q(e)h(allo)q
(cated)g(is)g(1)f(page,)h(4096)e(b)o(ytes,)h(and)h(all)g(memory)e(is)i(pro)o
(vided)264 1989 y(in)g(pieces)h(whose)f(size)g(is)g(a)f(p)q(o)o(w)o(er)g(of)h
(2.)18 b(Y)l(ou)12 b(can)g(request)f(an)o(y)g(o)q(dd)h(size,)h(but)f(memory)f
(will)i(not)264 2054 y(b)q(e)j(used)h(an)o(y)e(more)g(e\016cien)o(tly)i(if)g
(y)o(ou)e(request)h(a)g(31-b)o(yte)f(piece)i(than)f(it)g(will)h(if)f(y)o(ou)g
(request)264 2118 y(a)f(32)f(b)o(yte)h(piece.)218 2220 y FG(\017)23
b FD(kmalloc\(\))13 b FH(tak)o(es)g(a)h(second)h(argumen)o(t,)e(the)i
(priorit)o(y)l(.)20 b(This)15 b(is)g(used)f(as)g(an)h(argumen)o(t)e(to)h(the)
264 2284 y FD(get)p 339 2284 V 16 w(free)p 451 2284 V 17 w(page\(\))h
FH(function,)i(where)g(it)f(is)h(used)f(to)g(determine)h(when)g(to)e(return.)
23 b(The)16 b(usual)264 2348 y(priorit)o(y)g(is)g FD(GFP)p
550 2348 V 17 w(KERNEL)p FH(.)e(If)i(it)g(ma)o(y)f(b)q(e)i(called)g(from)e
(within)i(an)f(in)o(terrupt,)g(use)g FD(GFP)p 1793 2348 V 17
w(ATOMIC)264 2413 y FH(and)h(b)q(e)h(truly)g(prepared)g(for)f(it)g(to)g(fail)
h(\(i.e.)f(don't)g(panic\).)27 b(This)18 b(is)g(b)q(ecause)h(if)f(y)o(ou)f
(sp)q(ecify)p 150 2455 720 2 v 202 2482 a Fz(3)219 2498 y Fl(Ev)o(en)g
(though)g(XF)m(ree86)f(is)h(no)o(w)f(able)i(to)e(read)g(PS/2)h(st)o(yle)g
(\\droppings",)j(the)c(concepts)h(in)g(this)g(example)h(still)150
2550 y(stands.)g(If)12 b(y)o(ou)i(ha)o(v)o(e)f(a)g(b)q(etter)h(example,)g
(I'd)e(b)q(e)i(glad)g(to)f(see)g(it.)p eop
%%Page: 9 18
9 17 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1178 b FH(9)264 88 y FD(GFP)p 339 88 15
2 v 16 w(KERNEL)p FH(,)13 b FD(kmalloc\(\))h FH(ma)o(y)f(sleep,)i(whic)o(h)h
(cannot)e(b)q(e)h(done)f(on)h(an)f(in)o(terrupt.)20 b(The)14
b(other)264 153 y(option)j(is)h FD(GFP)p 530 153 V 17 w(BUFFER)p
FH(,)e(whic)o(h)i(is)f(used)h(only)g(when)g(the)f(k)o(ernel)h(is)g(allo)q
(cating)g(bu\013er)g(space,)264 217 y(and)d(nev)o(er)g(in)h(device)h(driv)o
(ers.)150 341 y(T)l(o)12 b(free)g(memory)f(allo)q(cated)i(with)f
FD(kmalloc\(\))p FH(,)f(use)h(one)g(of)g(t)o(w)o(o)e(functions:)19
b FD(kfree\(\))11 b FH(or)g FD(kfree)p 1852 341 V 17 w(s\(\))p
FH(.)150 406 y(These)16 b(di\013er)g(from)f FD(free\(\))f FH(in)i(a)f(few)g
(w)o(a)o(ys)f(as)h(w)o(ell:)218 530 y FG(\017)23 b FD(kfree\(\))14
b FH(is)h(a)g(macro)f(whic)o(h)h(calls)h FD(kfree)p 1018 530
V 17 w(s\(\))e FH(and)h(acts)g(lik)o(e)h(the)f(standard)f FD(free\(\))g
FH(outside)264 595 y(the)h(k)o(ernel.)218 696 y FG(\017)23
b FH(If)e(y)o(ou)g(kno)o(w)f(what)g(size)i(ob)s(ject)f(y)o(ou)f(are)h
(freeing,)i(y)o(ou)d(can)h(sp)q(eed)h(things)g(up)f(b)o(y)g(calling)264
760 y FD(kfree)p 387 760 V 16 w(s\(\))g FH(directly)l(.)39
b(It)21 b(tak)o(es)g(t)o(w)o(o)f(argumen)o(ts:)30 b(the)22
b(\014rst)e(is)i(the)f(p)q(oin)o(ter)h(that)e(y)o(ou)h(are)264
825 y(freeing,)14 b(as)g(in)h(the)f(single)h(argumen)o(t)f(to)f
FD(kfree\(\))p FH(,)g(and)h(the)g(second)h(is)g(the)f(size)h(of)e(the)i(ob)s
(ject)264 889 y(b)q(eing)h(freed.)150 1013 y(See)g(section)g(1.6)e(for)g
(more)h(information)g(on)h FD(kmalloc\(\))p FH(,)d FD(kfree\(\))p
FH(,)h(and)h(other)g(useful)h(functions.)221 1101 y(The)e(other)f(w)o(a)o(y)g
(to)g(acquire)h(memory)g(is)g(to)f(allo)q(cate)i(it)f(at)f(initialization)k
(time.)i(Y)l(our)14 b(initializa-)150 1166 y(tion)h(function,)g
FD(foo)p 508 1166 V 17 w(init\(\))p FH(,)e(tak)o(es)h(one)h(argumen)o(t,)e(a)
i(p)q(oin)o(ter)g(to)f(the)h(curren)o(t)f(end)h(of)g(memory)l(.)k(It)150
1230 y(can)e(tak)o(e)g(as)f(m)o(uc)o(h)h(memory)g(as)g(it)g(w)o(an)o(ts)f
(to,)g(sa)o(v)o(e)h(a)f(p)q(oin)o(ter)i(or)f(p)q(oin)o(ters)g(to)g(that)f
(memory)l(,)h(and)150 1294 y(return)d(a)f(p)q(oin)o(ter)h(to)f(the)g(new)h
(end)h(of)e(memory)l(.)19 b(The)14 b(adv)m(an)o(tage)f(of)g(this)h(o)o(v)o
(er)e(statically)j(allo)q(cating)150 1359 y(large)h(bu\013ers)g(\()p
FD(char)23 b(bar[20000])p FH(\))14 b(is)i(that)f(if)h(the)f(fo)q(o)g(driv)o
(er)h(detects)g(that)f(the)g(fo)q(o)g(device)i(is)f(not)150
1423 y(attac)o(hed)f(to)g(the)h(computer,)f(the)g(memory)g(is)i(not)e(w)o
(asted.)20 b(The)c FD(init\(\))f FH(function)h(is)g(discussed)h(in)150
1487 y(Section)f(1.3.6.)150 1641 y Fp(1.3.3)55 b(Character)19
b(vs.)f(blo)r(c)n(k)g(devices)150 1758 y FH(There)e(are)g(t)o(w)o(o)e(main)j
(t)o(yp)q(es)f(of)f(devices)j(under)e(all)h FE(un)p FA(?)p
FE(x)f FH(systems,)f(c)o(haracter)g(and)h(blo)q(c)o(k)h(devices.)150
1822 y(Character)12 b(devices)i(are)e(those)g(for)g(whic)o(h)i(no)e
(bu\013ering)j(is)e(p)q(erformed,)g(and)g(blo)q(c)o(k)g(devices)h(are)e
(those)150 1887 y(whic)o(h)18 b(are)e(accessed)i(through)f(a)f(cac)o(he.)26
b(Blo)q(c)o(k)17 b(devices)i(m)o(ust)d(b)q(e)i(random)e(access,)i(but)f(c)o
(haracter)150 1951 y(devices)g(are)f(not)f(required)i(to)f(b)q(e,)g(though)g
(some)f(are.)22 b(Filesystems)17 b(can)f(only)g(b)q(e)h(moun)o(ted)f(if)g
(they)150 2015 y(are)f(on)g(blo)q(c)o(k)h(devices.)221 2103
y(Character)j(devices)j(are)e(read)h(from)e(and)i(written)f(to)g(with)h(t)o
(w)o(o)e(function:)31 b FD(foo)p 1699 2103 V 17 w(read\(\))20
b FH(and)150 2167 y FD(foo)p 225 2167 V 17 w(write\(\))p FH(.)e(The)c
FD(read\(\))f FH(and)h FD(write\(\))e FH(calls)j(do)e(not)h(return)f(un)o
(til)i(the)f(op)q(eration)f(is)i(complete.)150 2232 y(By)h(con)o(trast,)e
(blo)q(c)o(k)i(devices)h(do)e(not)g(ev)o(en)h(implemen)o(t)h(the)f
FD(read\(\))e FH(and)i FD(write\(\))f FH(functions,)h(and)150
2296 y(instead)j(ha)o(v)o(e)f(a)h(function)g(whic)o(h)h(has)e(historically)i
(b)q(een)g(called)g(the)f(\\strategy)e(routine.")30 b(Reads)150
2361 y(and)13 b(writes)h(are)e(done)i(through)f(the)g(bu\013er)h(cac)o(he)g
(mec)o(hanism)g(b)o(y)f(the)g(generic)h(functions)g FD(bread\(\),)150
2425 y(breada\(\),)e FH(and)i FD(bwrite\(\))p FH(.)k(These)13
b(functions)h(go)e(through)h(the)g(bu\013er)h(cac)o(he,)g(and)f(so)g(ma)o(y)f
(or)h(ma)o(y)150 2489 y(not)j(actually)h(call)g(the)f(strategy)f(routine,)i
(dep)q(ending)h(on)f(whether)f(or)g(not)f(the)i(blo)q(c)o(k)g(requested)f(is)
150 2554 y(in)h(the)f(bu\013er)h(cac)o(he)f(\(for)f(reads\))h(or)f(on)h
(whether)g(or)f(not)h(the)g(bu\013er)h(cac)o(he)f(is)h(full)g(\(for)e
(writes\).)22 b(A)p eop
%%Page: 10 19
10 18 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(10)150 88 y(request)16 b(ma)o(y)f(b)q(e)h
(asyncronous:)21 b FD(breada\(\))15 b FH(can)h(request)g(the)g(strategy)e
(routine)i(to)g(sc)o(hedule)h(reads)150 153 y(that)e(ha)o(v)o(e)h(not)g(b)q
(een)h(ask)o(ed)f(for,)f(and)h(to)g(do)g(it)g(asyncronously)l(,)g(in)h(the)g
(bac)o(kground,)e(in)i(the)f(hop)q(es)150 217 y(that)c(they)g(will)i(b)q(e)f
(needed)g(later.)19 b(A)13 b(more)e(complete)i(explanation)h(of)e(the)g
(bu\013er)h(cac)o(he)g(is)f(presen)o(ted)150 281 y(b)q(elo)o(w)k(in)g
(Section)g FC(??)221 369 y FH(The)h(sources)g(for)g(c)o(haracter)g(devices)i
(are)e(k)o(ept)g(in)h FA(:)8 b(:)g(:)d FH(/k)o(ernel/c)o(hr)p
1431 369 14 2 v 17 w(drv/,)17 b(and)h(the)f(sources)h(for)150
434 y(blo)q(c)o(k)g(devices)h(are)e(k)o(ept)h(in)g FA(:)8 b(:)g(:)e
FH(/k)o(ernel/blk)p 956 434 V 17 w(drv/.)27 b(They)18 b(ha)o(v)o(e)f(similar)
h(in)o(terfaces,)g(and)g(are)f(v)o(ery)150 498 y(m)o(uc)o(h)12
b(alik)o(e,)h(except)g(for)e(reading)i(and)f(writing.)19 b(Because)13
b(of)f(the)g(di\013erence)i(in)f(reading)g(and)f(writing,)150
562 y(initialization)26 b(is)d(di\013eren)o(t,)i(as)d(blo)q(c)o(k)h(devices)h
(ha)o(v)o(e)f(to)e(register)i(a)f(strategy)f(routine,)k(whic)o(h)e(is)150
627 y(registered)15 b(in)g(a)g(di\013eren)o(t)g(w)o(a)o(y)f(than)g(the)h
FD(foo)p 975 627 15 2 v 17 w(read\(\))e FH(and)i FD(foo)p 1309
627 V 17 w(write\(\))e FH(routines)i(of)f(a)h(c)o(haracter)150
691 y(device)i(driv)o(er.)j(Sp)q(eci\014cs)d(are)e(dealt)h(with)f(in)h
(Section)g(1.4.1)e(and)h(Section)h(1.5.1)150 844 y Fp(1.3.4)55
b(In)n(terrupts)19 b(vs.)24 b(P)n(olling)150 962 y FH(Hardw)o(are)13
b(is)h(slo)o(w.)19 b(That)13 b(is,)h(in)g(the)f(time)h(it)g(tak)o(es)f(to)f
(get)h(information)h(from)f(y)o(our)g(a)o(v)o(erage)f(device,)150
1026 y(the)19 b(CPU)f(could)i(b)q(e)g(o\013)f(doing)g(something)g(far)f(more)
g(useful)i(than)f(w)o(aiting)g(for)f(a)g(busy)h(but)g(slo)o(w)150
1090 y(device.)i(So)15 b(to)g(k)o(eep)g(from)g(ha)o(ving)g(to)f
FC(busy-w)o(ait)i FH(all)g(the)f(time,)g FC(in)o(terrupts)h
FH(are)f(pro)o(vided)h(whic)o(h)150 1155 y(can)i(in)o(terrupt)h(whatev)o(er)f
(is)h(happ)q(ening)h(so)e(that)f(the)i(op)q(erating)f(system)g(can)h(do)f
(some)g(task)g(and)150 1219 y(return)j(to)g(what)g(it)h(w)o(as)f(doing)h
(without)f(losing)i(information.)39 b(In)22 b(an)g(ideal)g(w)o(orld,)h(all)g
(devices)150 1283 y(w)o(ould)15 b(probably)h(w)o(ork)e(b)o(y)h(using)h(in)o
(terrupts.)k(Ho)o(w)o(ev)o(er,)13 b(on)i(a)g(PC)g(or)f(clone,)i(there)f(are)g
(only)g(a)g(few)150 1348 y(in)o(terrupts)g(a)o(v)m(ailable)i(for)d(use)h(b)o
(y)g(y)o(our)g(p)q(eripherals,)h(so)f(some)f(driv)o(ers)i(ha)o(v)o(e)e(to)h
(p)q(oll)h(the)f(hardw)o(are:)150 1412 y(ask)g(the)g(hardw)o(are)g(if)h(it)f
(is)h(ready)f(to)g(transfer)g(data)f(y)o(et.)20 b(This)c(unfortunately)g(w)o
(astes)e(time,)h(but)h(it)150 1477 y(sometimes)f(needs)h(to)f(b)q(e)h(done.)
221 1564 y(Also,)c(some)e(hardw)o(are)h(\(lik)o(e)h(memory-mapp)q(ed)g
(displa)o(ys\))g(is)f(as)g(fast)f(as)h(the)h(rest)e(of)h(the)g(mac)o(hine,)
150 1629 y(so)k(an)g(in)o(terrupt-driv)o(en)h(driv)o(er)g(w)o(ould)g(b)q(e)f
(rather)g(silly)l(,)i(ev)o(en)e(if)h(in)o(terrupts)f(w)o(ere)g(pro)o(vided.)
221 1717 y(In)h FE(Linux)p FH(,)f(man)o(y)g(of)g(the)h(driv)o(ers)g(are)f(in)
o(terrupt-driv)o(en,)i(but)f(some)f(are)g(not,)g(and)h(at)f(least)h(one)150
1781 y(can)g(b)q(e)g(either,)g(and)g(can)g(b)q(e)g(switc)o(hed)g(bac)o(k)g
(and)g(forth)f(at)g(run)o(time.)21 b(F)l(or)15 b(instance,)h(the)g
FD(lp)g FH(device)150 1845 y(\(the)g(parallel)h(p)q(ort)f(driv)o(er\))g
(normally)h(p)q(olls)g(the)g(prin)o(ter)f(to)f(see)i(if)f(the)g(prin)o(ter)h
(is)f(ready)g(to)g(accept)150 1910 y(output,)g(and)g(if)h(the)g(prin)o(ter)f
(sta)o(ys)f(in)j(a)e(not)f(ready)i(phase)f(for)g(to)q(o)g(long,)g(the)g(driv)
o(er)h(will)h(sleep)g(for)150 1974 y(a)f(while,)j(and)e(try)f(again)h(later.)
28 b(This)18 b(impro)o(v)o(es)g(system)f(p)q(erformance.)28
b(Ho)o(w)o(ev)o(er,)17 b(if)h(y)o(ou)g(ha)o(v)o(e)f(a)150 2038
y(parallel)e(card)f(that)f(supplies)i(an)f(in)o(terrupt,)g(the)g(driv)o(er)g
(will)h(utilize)h(that,)d(whic)o(h)h(will)h(usually)g(mak)o(e)150
2103 y(p)q(erformance)g(ev)o(en)h(b)q(etter.)221 2191 y(There)21
b(are)g(some)g(imp)q(ortan)o(t)g(programming)g(di\013erences)i(b)q(et)o(w)o
(een)f(in)o(terrupt-driv)o(en)h(driv)o(ers)150 2255 y(and)18
b(p)q(olling)i(driv)o(ers.)29 b(T)l(o)18 b(understand)h(this)f(di\013erence,)
j(y)o(ou)d(ha)o(v)o(e)f(to)h(understand)h(a)e(little)j(bit)e(of)150
2319 y(ho)o(w)c(system)g(calls)h(w)o(ork)e(under)i FE(un)p
FA(?)p FE(x)p FH(.)k(The)c(k)o(ernel)g(is)f(not)g(a)g(separate)g(task)f
(under)i FE(un)p FA(?)p FE(x)p FH(.)k(Rather,)150 2384 y(it)g(is)g(as)f(if)h
(eac)o(h)f(pro)q(cess)h(has)f(a)g(cop)o(y)h(of)f(the)g(k)o(ernel.)30
b(When)19 b(a)f(pro)q(cess)h(executes)g(a)f(system)g(call,)150
2448 y(it)g(do)q(es)g(not)f(transfer)f(con)o(trol)i(to)e(another)h(pro)q
(cess,)h(but)g(rather,)f(the)h(pro)q(cess)f(c)o(hanges)h(execution)150
2512 y(mo)q(des,)f(and)f(is)h(said)g(to)f(b)q(e)h(\\in)g(k)o(ernel)g(mo)q
(de.")23 b(In)17 b(this)g(mo)q(de,)f(it)h(executes)g(k)o(ernel)g(co)q(de)g
(whic)o(h)g(is)p eop
%%Page: 11 20
11 19 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)36 b(Device)18
b(Driv)o(er)g(Basics)1162 b FH(11)150 88 y(trusted)15 b(to)g(b)q(e)g(safe.)
221 176 y(In)d(k)o(ernel)h(mo)q(de,)f(the)g(pro)q(cess)h(can)f(still)h
(access)f(the)g(user-space)h(memory)e(that)g(it)h(w)o(as)g(previously)150
241 y(executing)21 b(in,)g(whic)o(h)g(is)g(done)f(through)f(a)h(set)g(of)f
(macros:)29 b FD(get)p 1336 241 15 2 v 16 w(fs)p 1400 241 V
17 w(*\(\))20 b FH(and)g FD(memcpy)p 1746 241 V 16 w(fromfs\(\))150
305 y FH(read)15 b(user-space)h(memory)l(,)f(and)h FD(put)p
818 305 V 16 w(fs)p 882 305 V 17 w(*\(\))f FH(and)h FD(memcpy)p
1219 305 V 16 w(tofs\(\))f FH(write)g(to)g(user-space)h(memory)l(.)150
369 y(Because)g(the)g(pro)q(cess)g(is)h(still)g(running,)g(but)f(in)g(a)g
(di\013eren)o(t)h(mo)q(de,)f(there)g(is)g(no)g(question)g(of)g(where)150
434 y(in)i(memory)f(to)g(put)g(the)h(data,)e(or)h(where)h(to)f(get)g(it)g
(from.)26 b(Ho)o(w)o(ev)o(er,)16 b(when)i(an)f(in)o(terrupt)h(o)q(ccurs,)150
498 y(an)o(y)13 b(pro)q(cess)g(migh)o(t)g(curren)o(tly)g(b)q(e)h(running,)g
(so)f(these)g(macros)f(cannot)h(b)q(e)h(used)f(|)h(if)f(they)g(are,)g(they)
150 562 y(will)18 b(either)f(write)g(o)o(v)o(er)f(random)g(memory)g(space)h
(of)f(the)g(running)i(pro)q(cess)f(or)f(cause)h(the)f(k)o(ernel)i(to)150
627 y(panic.)221 715 y(Instead,)e(when)h(sc)o(heduling)i(the)d(in)o(terrupt,)
h(a)f(driv)o(er)h(m)o(ust)e(also)i(pro)o(vide)g(temp)q(orary)e(space)i(in)150
779 y(whic)o(h)e(to)e(put)h(the)g(information,)h(and)f(then)g(sleep.)21
b(When)14 b(the)g(in)o(terrupt-driv)o(en)h(part)f(of)f(the)i(driv)o(er)150
843 y(has)i(\014lled)h(up)g(that)e(temp)q(orary)g(space,)h(it)g(w)o(ak)o(es)f
(up)h(the)g(pro)q(cess,)g(whic)o(h)g(copies)h(the)f(information)150
908 y(from)j(that)g(temp)q(orary)g(space)i(in)o(to)e(the)h(pro)q(cess')g
(user)g(space)g(and)g(returns.)37 b(In)21 b(a)g(blo)q(c)o(k)h(device)150
972 y(driv)o(er,)15 b(this)g(temp)q(orary)f(space)h(is)g(automatically)h(pro)
o(vided)f(b)o(y)g(the)g(bu\013er)h(cac)o(he)f(mec)o(hanism,)g(but)150
1036 y(in)h(a)f(c)o(haracter)f(device)j(driv)o(er,)e(the)g(driv)o(er)h(is)g
(resp)q(onsible)h(for)e(allo)q(cating)h(it)f(itself.)150 1188
y Fp(1.3.5)55 b(The)19 b(sleep-w)n(ak)n(eup)f(mec)n(hanism)150
1305 y FC([Begin)f(b)o(y)e(giving)i(a)f(general)h(description)h(of)d(ho)o(w)h
(sleeping)g(is)g(used)f(and)h(what)h(it)f(do)q(es.)150 1369
y(This)h(should)f(men)o(tion)h(things)f(lik)o(e)h(all)g(pro)q(cesses)g
(sleeping)f(on)h(an)f(ev)o(en)o(t)g(are)h(w)o(ok)o(en)d(at)150
1434 y(once,)k(and)g(then)g(they)f(con)o(tend)h(for)g(the)g(ev)o(en)o(t)e
(again,)k(etc)p FA(:)8 b(:)g(:)e FC(])221 1522 y FH(P)o(erhaps)18
b(the)h(b)q(est)g(w)o(a)o(y)f(to)g(try)h(to)f(understand)h(the)g
FE(Linux)g FH(sleep-w)o(ak)o(eup)h(mec)o(hanism)f(is)h(to)150
1586 y(read)13 b(the)g(source)g(for)g(the)p 609 1586 V 626
1586 V 47 w FD(sleep)p 763 1586 V 17 w(on\(\))f FH(function,)i(used)g(to)e
(implemen)o(t)i(b)q(oth)g(the)f FD(sleep)p 1755 1586 V 16 w(on\(\))g
FH(and)150 1650 y FD(interruptible)p 465 1650 V 15 w(sleep)p
600 1650 V 17 w(on\(\))i FH(calls.)264 1759 y Fr(static)20
b(inline)h(void)g(__sleep_on\(struc)o(t)e(wait_queue)h(**p,)h(int)g(state\))
264 1815 y({)351 1872 y(unsigned)f(long)h(flags;)351 1929 y(struct)f
(wait_queue)g(wait)h(=)h({)f(current,)f(NULL)h(};)351 2043
y(if)g(\(!p\))438 2099 y(return;)351 2156 y(if)g(\(current)f(==)i(task[0]\))
438 2213 y(panic\("task[0])d(trying)h(to)i(sleep"\);)351 2270
y(current->state)d(=)i(state;)351 2326 y(add_wait_queue\(p)o(,)e(&wait\);)351
2383 y(save_flags\(flags)o(\);)351 2440 y(sti\(\);)351 2497
y(schedule\(\);)351 2554 y(remove_wait_queu)o(e\(p,)f(&wait\);)p
eop
%%Page: 12 21
12 20 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(12)351 88 y Fr(restore_flags\(fl)o(ags\);)264
145 y(})221 270 y FH(A)12 b FD(wait)p 366 270 15 2 v 16 w(queue)g
FH(is)g(a)g(circular)h(list)g(of)f(p)q(oin)o(ters)h(to)e(task)g(structures,)h
(de\014ned)i(in)f FD(<linux/wait.h>)150 335 y FH(to)i(b)q(e)264
452 y Fr(struct)20 b(wait_queue)g({)351 509 y(struct)g(task_struct)g(*)h
(task;)351 566 y(struct)f(wait_queue)g(*)i(next;)264 623 y(};)150
748 y FD(state)17 b FH(is)i(either)g FD(TASK)p 567 748 V 16
w(INTERRUPTIBLE)e FH(or)g FD(TASK)p 1066 748 V 17 w(UNINTERUPTIBLE)p
FH(,)f(dep)q(ending)k(on)e(whether)g(or)150 812 y(not)e(the)h(sleep)g(should)
g(b)q(e)h(in)o(terruptable)f(b)o(y)f(suc)o(h)h(things)g(as)f(system)g(calls.)
24 b(In)17 b(general,)g(the)g(sleep)150 877 y(should)c(b)q(e)f(in)o
(terruptible)i(if)e(the)g(device)h(is)f(a)f(slo)o(w)h(one;)g(one)g(whic)o(h)h
(can)f(blo)q(c)o(k)g(inde\014nitely)l(,)j(including)150 941
y(terminals)h(and)f(net)o(w)o(ork)f(devices)j(or)e(pseudo)q(devices.)221
1029 y FD(add)p 296 1029 V 16 w(wait)p 408 1029 V 17 w(queue\(\))f
FH(turns)h(o\013)h(in)o(terrupts,)f(if)h(they)f(w)o(ere)g(enabled,)h(and)g
(adds)f(the)g(new)h FD(struct)150 1093 y(wait)p 249 1093 V
17 w(queue)i FH(declared)i(at)f(the)g(b)q(eginning)i(of)e(the)g(function)h
(to)f(the)g(list)h FD(p)p FH(.)32 b(It)19 b(then)g(reco)o(v)o(ers)g(the)150
1158 y(original)d(in)o(terrupt)g(state)e(\(enabled)i(or)f(disabled\),)h(and)g
(returns.)221 1245 y FD(save)p 320 1245 V 16 w(flags\(\))h
FH(is)i(a)f(macro)g(whic)o(h)h(sa)o(v)o(es)e(the)h(pro)q(cess)h(\015ags)f(in)
h(its)f(argumen)o(t.)28 b(This)19 b(is)g(done)150 1310 y(to)14
b(preserv)o(e)h(the)g(previous)g(state)f(of)g(the)h(in)o(terrupt)g(enable)h
(\015ag.)j(This)c(w)o(a)o(y)l(,)f(the)h FD(restore)p 1770 1310
V 16 w(flags\(\))150 1374 y FH(later)f(can)g(restore)f(the)h(in)o(terrupt)g
(state,)f(whether)h(it)g(w)o(as)f(enabled)j(or)d(disabled.)21
b FD(sti\(\))14 b FH(then)g(allo)o(ws)150 1438 y(in)o(terrupts)e(to)e(o)q
(ccur,)i(and)g FD(schedule\(\))e FH(\014nds)i(a)f(new)h(pro)q(cess)f(to)g
(run,)h(and)g(switc)o(hes)f(to)g(it.)19 b(Sc)o(hedule)150 1503
y(will)i(not)e(c)o(ho)q(ose)h(this)g(pro)q(cess)g(to)f(run)g(again)h(un)o
(til)h(the)e(state)g(is)h(c)o(hanged)g(to)f FD(TASK)p 1702
1503 V 16 w(RUNNING)g FH(b)o(y)150 1567 y FD(wake)p 249 1567
V 17 w(up\(\))14 b FH(called)j(on)e(the)g(same)g(w)o(ait)g(queue,)h
FD(p)p FH(,)e(or)h(conceiv)m(ably)j(b)o(y)d(something)g(else.)221
1655 y(The)21 b(pro)q(cess)h(then)g(remo)o(v)o(es)e(itself)i(from)f(the)g
FD(wait)p 1187 1655 V 17 w(queue)p FH(,)h(restores)e(the)i(orginal)g(in)o
(terrupt)150 1719 y(condition)16 b(with)g FD(restore)p 624
1719 V 16 w(flags\(\))p FH(,)e(and)h(returns.)221 1807 y(Whenev)o(er)23
b(con)o(ten)o(tion)g(for)g(a)g(resource)g(migh)o(t)g(o)q(ccur,)i(there)e
(needs)h(to)f(b)q(e)g(a)g(p)q(oin)o(ter)h(to)e(a)150 1872 y
FD(wait)p 249 1872 V 17 w(queue)11 b FH(asso)q(ciated)h(with)g(that)f
(resource.)18 b(Then,)13 b(whenev)o(er)f(con)o(ten)o(tion)g(do)q(es)g(o)q
(ccur,)g(eac)o(h)g(pro-)150 1936 y(cess)f(that)f(\014nds)h(itself)g(lo)q(c)o
(k)o(ed)h(out)e(of)g(access)h(to)f(the)g(resource)h(sleeps)h(on)e(that)g
(resource's)g FD(wait)p 1804 1936 V 17 w(queue)p FH(.)150 2000
y(When)18 b(an)o(y)g(pro)q(cess)g(is)h(\014nished)h(using)e(a)g(resource)g
(for)f(whic)o(h)i(there)f(is)h(a)e FD(wait)p 1608 2000 V 17
w(queue)p FH(,)h(it)g(should)150 2065 y(w)o(ak)o(e)i(up)h(and)f(pro)q(cesses)
h(that)f(migh)o(t)g(b)q(e)i(sleeping)g(on)e(that)g FD(wait)p
1389 2065 V 17 w(queue)p FH(,)h(probably)g(b)o(y)f(calling)150
2129 y FD(wake)p 249 2129 V 17 w(up\(\))p FH(,)14 b(or)h(p)q(ossibly)h
FD(wake)p 715 2129 V 17 w(up)p 780 2129 V 17 w(interruptible\(\))p
FH(.)221 2217 y(If)j(y)o(ou)f(don't)h(understand)g(wh)o(y)g(a)f(pro)q(cess)h
(migh)o(t)g(w)o(an)o(t)f(to)g(sleep,)j(or)d(w)o(an)o(t)g(more)g(details)i(on)
150 2281 y(when)e(and)g(ho)o(w)f(to)g(structure)h(this)g(sleeping,)i(I)e
(urge)f(y)o(ou)h(to)f(buy)h(one)g(of)f(the)h(op)q(erating)f(systems)150
2346 y(textb)q(o)q(oks)e(listed)h(in)g(App)q(endix)i(A)d(and)g(lo)q(ok)h(up)f
FC(m)o(utual)j(exclusion)e FH(and)g FC(deadlo)q(c)o(k.)221
2433 y([This)f(is)f(a)h(cop-out.)24 b(I)14 b(should)h(tak)o(e)f(the)g(time)h
(to)f(explain)i(and)f(giv)o(e)e(examples,)j(but)e(I)150 2498
y(am)h(not)g(trying)h(to)f(write)h(an)g(OS)f(text,)h(and)f(I)g(w)o(an)o(t)f
(to)i(k)o(eep)e(this)h(under)g(1000)h(pages)p FA(:)8 b(:)g(:)d
FC(])p eop
%%Page: 13 22
13 21 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(13)150 88 y FC(1.3.5.1)54 b(More)18
b(adv)m(anced)g(sleeping)150 206 y FH(If)11 b(the)g FD(sleep)p
388 206 15 2 v 17 w(on\(\))p FH(/)p FD(wake)p 620 206 V 15
w(up\(\))g FH(mec)o(hanism)g(in)h FE(Linux)e FH(do)q(es)h(not)g(satisfy)g(y)o
(our)f(device)i(driv)o(er)g(needs,)150 270 y(y)o(ou)k(can)g(co)q(de)g(y)o
(our)g(o)o(wn)f(v)o(ersions)h(of)g FD(sleep)p 975 270 V 16
w(on\(\))g FH(and)g FD(wake)p 1288 270 V 17 w(up\(\))f FH(that)g(\014t)h(y)o
(our)g(needs.)23 b(F)l(or)15 b(an)150 334 y(example)21 b(of)e(this,)i(lo)q
(ok)f(at)f(the)h(serial)h(device)g(driv)o(er)g(\()p FA(:)8
b(:)g(:)d FH(/k)o(ernel/c)o(hr)p 1452 334 14 2 v 16 w(drv/serial.c\))20
b(in)h(function)150 399 y FD(block)p 273 399 15 2 v 16 w(til)p
361 399 V 17 w(ready\(\))p FH(,)15 b(where)h(quite)g(a)g(bit)g(has)g(to)f(b)q
(e)h(done)h(b)q(et)o(w)o(een)f(the)g FD(add)p 1568 399 V 16
w(wait)p 1680 399 V 17 w(queue\(\))f FH(and)150 463 y(the)g
FD(schedule\(\))p FH(.)150 613 y Fp(1.3.6)55 b(The)19 b(VFS)150
730 y FH(The)f(Virtual)g(Filesystem)g(Switc)o(h,)f(or)g FC(VFS)p
FH(,)h(is)f(the)h(mec)o(hanism)g(whic)o(h)g(allo)o(ws)f FE(Linux)g
FH(to)f(moun)o(t)150 795 y(man)o(y)h(di\013eren)o(t)h(\014lesystems)g(at)f
(the)h(same)f(time.)26 b(In)18 b(the)g(\014rst)f(v)o(ersions)g(of)g
FE(Linux)p FH(,)g(all)h(\014lesystem)150 859 y(access)k(w)o(en)o(t)g(straigh)
o(t)f(in)o(to)i(routines)f(whic)o(h)i(understo)q(o)q(d)e(the)h
FD(minix)e FH(\014lesystem.)42 b(T)l(o)22 b(mak)o(e)g(it)150
923 y(p)q(ossible)g(for)d(other)g(\014lesystems)i(to)e(b)q(e)i(written,)f
(\014lesystem)h(calls)g(had)f(to)f(pass)h(through)g(a)f(la)o(y)o(er)150
988 y(of)f(indirection)j(whic)o(h)e(w)o(ould)g(switc)o(h)f(the)h(call)g(to)f
(the)g(routine)h(for)f(the)g(correct)g(\014lesystem.)30 b(This)150
1052 y(w)o(as)15 b(done)h(b)o(y)g(some)f(generic)i(co)q(de)f(whic)o(h)g(can)g
(handle)h(generic)g(cases)f(and)f(a)h(structure)f(of)h(p)q(oin)o(ters)150
1117 y(to)h(functions)i(whic)o(h)g(handle)g(sp)q(eci\014c)g(cases.)28
b(One)19 b(structure)e(is)i(of)e(in)o(terest)h(to)f(the)h(device)i(driv)o(er)
150 1181 y(writer;)15 b(the)g FD(file)p 474 1181 V 17 w(operations)e
FH(structure.)221 1269 y(F)l(rom)h(/usr/include/lin)o(ux/fs.h:)264
1369 y Fr(struct)20 b(file_operations)f({)351 1426 y(int)43
b(\(*lseek\))63 b(\(struct)21 b(inode)g(*,)g(struct)g(file)f(*,)i(off_t,)e
(int\);)351 1483 y(int)43 b(\(*read\))85 b(\(struct)21 b(inode)g(*,)g(struct)
g(file)f(*,)i(char)f(*,)g(int\);)351 1540 y(int)43 b(\(*write\))63
b(\(struct)21 b(inode)g(*,)g(struct)g(file)f(*,)i(char)f(*,)g(int\);)351
1597 y(int)43 b(\(*readdir\))19 b(\(struct)i(inode)g(*,)g(struct)g(file)f(*,)
i(struct)e(dirent)h(*,)721 1653 y(int)g(count\);)351 1710 y(int)43
b(\(*select\))e(\(struct)21 b(inode)g(*,)g(struct)g(file)f(*,)i(int,)721
1767 y(select_table)e(*\);)351 1824 y(int)43 b(\(*ioctl\))63
b(\(struct)21 b(inode)g(*,)g(struct)g(file)f(*,)i(unsigned)e(int,)721
1880 y(unsigned)g(int\);)351 1937 y(int)43 b(\(*mmap\))85 b(\(struct)21
b(inode)g(*,)g(struct)g(file)f(*,)i(unsigned)e(long,)721 1994
y(size_t,)h(int,)g(unsigned)f(long\);)351 2051 y(int)43 b(\(*open\))85
b(\(struct)21 b(inode)g(*,)g(struct)g(file)f(*\);)351 2108
y(void)h(\(*release\))e(\(struct)i(inode)g(*,)g(struct)g(file)f(*\);)264
2164 y(};)221 2273 y FH(Essen)o(tially)l(,)e(this)f(structure)f(constitutes)h
(a)f(parital)h(list)h(of)e(the)h(functions)g(that)f(y)o(ou)g(ma)o(y)g(ha)o(v)
o(e)150 2337 y(to)f(write)g(to)f(create)h(y)o(our)g(driv)o(er.)221
2425 y(This)10 b(section)h(details)g(the)f(actions)h(and)f(requiremen)o(ts)h
(of)e(the)i(functions)f(in)h(the)g FD(file)p 1708 2425 V 16
w(operations)150 2489 y FH(structure.)18 b(It)11 b(do)q(cumen)o(ts)h(all)g
(the)f(argumen)o(ts)g(that)f(these)h(functions)h(tak)o(e.)18
b FC([It)c(should)f(also)g(detail)150 2554 y(all)19 b(the)f(defaults,)g(and)g
(co)o(v)o(er)f(more)h(carefully)h(the)f(p)q(ossible)g(return)h(v)m(alues.)p
eop
%%Page: 14 23
14 22 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(14)150 88 y FC(1.3.6.1)54 b(The)18
b FD(lseek\(\))f FC(function)150 206 y FH(This)k(function)f(is)h(called)g
(when)g(the)f(system)f(call)i FD(lseek\(\))e FH(is)h(called)i(on)e(the)g
(device)h(sp)q(ecial)h(\014le)150 270 y(represen)o(ting)17
b(y)o(our)f(device.)26 b(An)17 b(understanding)h(of)e(what)g(the)g(system)h
(call)g FD(lseek\(\))f FH(do)q(es)h(should)150 334 y(b)q(e)f(su\016cien)o(t)g
(to)f(explain)h(this)g(function,)g(whic)o(h)g(mo)o(v)o(es)e(to)h(the)g
(desired)i(o\013set.)j(It)15 b(tak)o(es)g(these)g(four)150
399 y(argumen)o(ts:)150 516 y FD(struct)23 b(inode)g(*)h(inode)450
580 y FH(P)o(oin)o(ter)15 b(to)f(the)i(ino)q(de)g(structure)f(for)g(this)g
(device.)150 684 y FD(struct)23 b(file)g(*)h(file)450 748 y
FH(P)o(oin)o(ter)15 b(to)f(the)i(\014le)g(structure)f(for)f(this)i(device.)
150 852 y FD(off)p 225 852 15 2 v 17 w(t)23 b(offset)450 916
y FH(O\013set)16 b FC(from)h(origin)g FH(to)e(mo)o(v)o(e)f(to.)150
1019 y FD(int)23 b(origin)61 b FH(0)15 b(=)g(tak)o(e)g(the)g(o\013set)g(from)
g(absolute)g(o\013set)h(0)e(\(the)h(b)q(eginning\).)450 1084
y(1)g(=)g(tak)o(e)g(the)g(o\013set)g(from)g(the)g(curren)o(t)g(p)q(osition.)
450 1148 y(2)g(=)g(tak)o(e)g(the)g(o\013set)g(from)g(the)g(end.)150
1265 y FD(lseek\(\))f FH(returns)h FD(-errno)g FH(on)g(error,)f(or)h
FG(\025)g FH(0)g(the)g(absolute)h(p)q(osition)g(after)e(the)i(lseek.)221
1353 y(If)23 b(there)g(is)g(no)g FD(lseek\(\))p FH(,)g(the)g(k)o(ernel)h
(will)g(tak)o(e)e(the)h(default)h(action,)g(whic)o(h)g(is)f(to)f(mo)q(dify)
150 1418 y(the)f FD(file->f)p 405 1418 V 16 w(pos)f FH(elemen)o(t.)36
b(F)l(or)20 b(an)g FD(origin)g FH(of)g(2,)h(the)f(default)h(action)g(is)g(to)
f(return)g FD(-EINVAL)150 1482 y FH(if)g FD(file->f)p 367 1482
V 16 w(inode)e FH(is)i(NULL,)g(otherwise)f(it)g(sets)g FD(file->f)p
1244 1482 V 17 w(pos)f FH(to)h FD(file->f)p 1579 1482 V 16
w(inode->i)p 1787 1482 V 16 w(size)g FH(+)150 1546 y FD(offset)p
FH(.)g(Because)c(of)f(this,)h(if)g FD(lseek\(\))f FH(should)i(return)e(an)h
(error)f(for)g(y)o(our)g(device,)i(y)o(ou)e(m)o(ust)g(write)150
1611 y(an)h FD(lseek\(\))f FH(function)i(whic)o(h)g(returns)f(that)g(error.)
150 1762 y FC(1.3.6.2)54 b(The)18 b FD(read\(\))f FC(and)h
FD(write\(\))e FC(functions)150 1879 y FH(The)f(read)f(and)h(write)g
(functions)g(read)f(and)h(write)g(a)f(c)o(haracter)g(string)g(to)g(the)h
(device.)21 b(If)14 b(there)h(is)g(no)150 1944 y FD(read\(\))g
FH(or)h FD(write\(\))g FH(function)h(in)g(the)f FD(file)p 961
1944 V 17 w(operations)f FH(structure)h(registered)h(with)f(the)h(k)o(ernel,)
150 2008 y(and)11 b(the)f(device)i(is)f(a)f(c)o(haracter)g(device,)i
FD(read\(\))e FH(or)g FD(write\(\))f FH(system)h(calls,)i(resp)q(ectiv)o(ely)
l(,)h(will)f(return)150 2072 y FD(-EINVAL)p FH(.)h(If)i(the)g(device)h(is)f
(a)f(blo)q(c)o(k)h(device,)h(these)f(functions)g(should)g(not)f(b)q(e)i
(implemen)o(ted,)g(as)e(the)150 2137 y(VFS)g(will)h(route)e(requests)h
(through)g(the)f(bu\013er)i(cac)o(he,)f(whic)o(h)h(will)g(call)g(y)o(our)e
(strategy)f(routine.)20 b(See)150 2201 y(Section)d(1.5.2)d(for)i(details)h
(on)e(ho)o(w)h(the)g(bu\013er)h(cac)o(he)f(do)q(es)h(this.)22
b(The)16 b FD(read)g FH(and)g FD(write)f FH(functions)150 2265
y(tak)o(e)f(these)i(argumen)o(ts:)150 2383 y FD(struct)23 b(inode)g(*)h
(inode)450 2447 y FH(This)17 b(is)g(a)f(p)q(oin)o(ter)h(to)e(the)i(ino)q(de)g
(of)f(the)h(device)h(sp)q(ecial)g(\014le)f(whic)o(h)g(w)o(as)f(accessed.)450
2511 y(F)l(rom)23 b(this,)j(y)o(ou)d(can)h(do)g(sev)o(eral)g(things,)i(based)
e(on)f(the)h FD(struct)f(inode)g FH(dec-)p eop
%%Page: 15 24
15 23 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(15)450 88 y(laration)24 b(ab)q(out)f(100)g
(lines)i(in)o(to)e(/usr/include/lin)o(ux/fs.h.)47 b(F)l(or)23
b(instance,)j(y)o(ou)450 153 y(can)18 b(\014nd)g(the)g(minor)g(n)o(um)o(b)q
(er)g(of)g(the)g(\014le)g(b)o(y)g(this)g(construction:)26 b
FD(unsigned)c(int)450 217 y(minor)h(=)h(MINOR\(inode->i)p 980
217 15 2 v 15 w(rdev\);)18 b FH(The)g(de\014nition)h(of)e(the)h
FD(MINOR)e FH(macro)h(is)h(in)450 281 y FD(<linux/fs.h>)p FH(,)g(as)g(are)h
(man)o(y)f(other)h(useful)h(de\014nitions.)32 b(Read)20 b(fs.h)e(and)i(a)e
(few)450 346 y(device)h(driv)o(ers)f(for)f(more)h(details,)h(and)f(see)g
(section)g(1.6)f(for)g(a)h(short)f(description.)450 410 y FD(inode->i)p
645 410 V 16 w(mode)11 b FH(can)h(b)q(e)g(used)g(to)f(\014nd)h(the)g(mo)q(de)
g(of)f(the)g(\014le,)i(and)f(there)g(are)f(macros)450 475 y(a)o(v)m(ailable)
17 b(for)d(this,)i(as)f(w)o(ell.)150 578 y FD(struct)23 b(file)g(*)h(file)450
642 y FH(P)o(oin)o(ter)15 b(to)f(\014le)j(structure)e(for)f(this)i(device.)
150 746 y FD(char)23 b(*)h(buf)61 b FH(This)20 b(is)f(a)g(bu\013er)h(of)e(c)o
(haracters)g(to)h(read)g(or)f(write.)32 b(It)19 b(is)g(lo)q(cated)h(in)f
FB(user-sp)n(ac)n(e)450 810 y FH(memory)l(,)14 b(and)h(therefore)g(m)o(ust)f
(b)q(e)h(accessed)h(using)f(the)g FD(get)p 1537 810 V 17 w(fs*\(\),)23
b(put)p 1793 810 V 17 w(fs*\(\),)450 875 y FH(and)g FD(memcpy*fs\(\))d
FH(macros)i(detailed)i(in)f(section)g(1.6.)41 b(User-space)23
b(memory)e(is)450 939 y(inaccessible)h(during)f(an)e(in)o(terrupt,)i(so)e(if)
h(y)o(our)f(driv)o(er)g(is)i(in)o(terrupt)e(driv)o(en,)i(y)o(ou)450
1003 y(will)c(ha)o(v)o(e)e(to)f(cop)o(y)h(the)h(con)o(ten)o(ts)e(of)h(y)o
(our)g(bu\013er)h(in)o(to)f(a)g(queue.)150 1107 y FD(int)23
b(count)85 b FH(This)18 b(is)f(a)g(coun)o(t)f(of)h(c)o(haracters)f(in)i
FD(buf)e FH(to)g(b)q(e)i(read)f(or)f(written.)25 b(It)17 b(is)h(the)f(size)g
(of)450 1171 y FD(buf)p FH(,)f(and)h(is)g(ho)o(w)f(y)o(ou)h(kno)o(w)f(that)g
(y)o(ou)g(ha)o(v)o(e)g(reac)o(hed)h(the)g(end)h(of)e FD(buf)p
FH(,)g(as)g FD(buf)g FH(is)450 1236 y(not)f(guaran)o(teed)g(to)f(b)q(e)i(n)o
(ull-terminated.)150 1387 y FC(1.3.6.3)54 b(The)18 b FD(readdir\(\))e
FC(function)150 1504 y FH(This)h(function)g(is)g(another)f(artifact)g(of)g
FD(file)p 963 1504 V 17 w(operations)f FH(b)q(eing)j(used)f(for)f(implemen)o
(ting)i(\014lesys-)150 1569 y(tems)13 b(as)h(w)o(ell)h(as)e(device)i(driv)o
(ers.)20 b(Do)13 b(not)g(implemen)o(t)j(it.)j(The)14 b(k)o(ernel)h(will)g
(return)f FD(-ENOTDIR)f FH(if)h(the)150 1633 y(system)h(call)h
FD(readdir\(\))e FH(is)i(called)h(on)e(y)o(our)f(device)j(sp)q(ecial)g
(\014le.)150 1784 y FC(1.3.6.4)54 b(The)18 b FD(select\(\))e
FC(function)150 1902 y FH(The)h FD(select\(\))f FH(function)i(is)g(generally)
g(most)e(useful)i(with)f(c)o(haracter)g(devices.)26 b(It)17
b(is)h(usually)g(used)150 1966 y(to)13 b(m)o(ultiplex)i(reads)e(without)h(p)q
(olling)h(|)f(the)g(application)h(calls)g(the)e FD(select\(\))f
FH(system)h(call,)i(giving)150 2030 y(it)i(a)g(list)g(of)g(\014le)h
(descriptors)f(to)f(w)o(atc)o(h,)g(and)h(the)g(k)o(ernel)h(rep)q(orts)f(bac)o
(k)f(to)h(the)g(program)e(on)i(whic)o(h)150 2095 y(\014le)i(descriptor)g(has)
f(w)o(ok)o(en)g(it)h(up.)30 b(It)18 b(is)h(also)f(used)h(as)f(a)g(timer.)30
b(Ho)o(w)o(ev)o(er,)18 b(the)g FD(select\(\))f FH(func-)150
2159 y(tion)i(in)h(y)o(our)e(device)i(driv)o(er)f(is)h(not)e(directly)i
(called)g(b)o(y)f(the)g(system)f(call)i FD(select\(\))p FH(,)e(and)h(so)g
(the)150 2223 y FD(file)p 249 2223 V 17 w(operations)13 b(select\(\))h
FH(only)i(needs)g(to)f(do)g(a)g(few)g(things.)20 b(Its)15 b(argumen)o(ts)g
(are:)150 2341 y FD(struct)23 b(inode)g(*)h(inode)450 2405
y FH(P)o(oin)o(ter)15 b(to)f(the)i(ino)q(de)g(structure)f(for)g(this)g
(device.)p eop
%%Page: 16 25
16 24 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(16)150 88 y FD(struct)23 b(file)g(*)h(file)450
153 y FH(P)o(oin)o(ter)15 b(to)f(the)i(\014le)g(structure)f(for)f(this)i
(device.)150 256 y FD(int)23 b(sel)p 320 256 15 2 v 17 w(type)450
321 y FH(The)15 b(select)h(t)o(yp)q(e)g(to)e(p)q(erform:)p
450 335 449 2 v 449 400 2 65 v 499 380 a FD(SEL)p 574 380 15
2 v 17 w(IN)p 659 400 2 65 v 49 w FH(read)p 897 400 V 450 401
449 2 v 449 466 2 65 v 475 446 a FD(SEL)p 550 446 15 2 v 17
w(OUT)p 659 466 2 65 v 49 w FH(write)p 897 466 V 450 467 449
2 v 449 532 2 65 v 499 512 a FD(SEL)p 574 512 15 2 v 17 w(EX)p
659 532 2 65 v 49 w FH(exception)p 897 532 V 450 533 449 2
v 150 604 a FD(select)p 297 604 15 2 v 16 w(table)24 b(*)f(wait)450
669 y FH(If)c FD(wait)e FH(is)i(not)f(NULL)h(and)g(there)f(is)h(no)f(error)g
(condition)h(caused)g(b)o(y)f(the)h(select,)450 733 y FD(select\(\))12
b FH(should)i(put)f(the)g(pro)q(cess)h(to)e(sleep,)j(and)e(arrange)f(to)h(b)q
(e)g(w)o(ok)o(en)g(up)g(when)450 797 y(the)k(device)i(b)q(ecomes)f(ready)l(,)
g(usually)g(through)f(an)h(in)o(terrupt.)26 b(If)18 b FD(wait)f
FH(is)g(NULL,)450 862 y(then)g(the)f(driv)o(er)h(should)h(quic)o(kly)f(see)g
(if)g(the)f(device)i(is)f(ready)l(,)g(and)f(return)h(ev)o(en)f(if)450
926 y(it)f(is)h(not.)k(The)15 b FD(select)p 880 926 V 16 w(wait\(\))g
FH(function)h(do)q(es)f(this)h(already)l(.)221 1043 y(If)g(the)g(calling)i
(program)d(w)o(an)o(ts)g(to)g(w)o(ait)h(un)o(til)h(one)f(of)g(the)g(devices)h
(up)q(on)g(whic)o(h)g(it)f(is)h(selecting)150 1108 y(b)q(ecomes)12
b(a)o(v)m(ailable)h(for)e(the)g(op)q(eration)h(it)f(is)h(in)o(terested)g(in,)
h(the)e(pro)q(cess)h(will)h(ha)o(v)o(e)e(to)g(b)q(e)h(put)f(to)g(sleep)150
1172 y(un)o(til)i(one)f(of)g(those)g(op)q(erations)g(b)q(ecomes)h(a)o(v)m
(ailable.)20 b(This)13 b(do)q(es)f FC(not)h FH(require)f(use)h(of)e(a)h
FD(sleep)p 1817 1172 V 17 w(on*\(\))150 1236 y FH(function,)20
b(ho)o(w)o(ev)o(er.)30 b(Instead)19 b(the)g FD(select)p 941
1236 V 16 w(wait\(\))f FH(function)i(is)f(used.)31 b(\(See)20
b(section)f(1.6)f(for)g(the)150 1301 y(de\014nition)g(of)d(the)h
FD(select)p 631 1301 V 16 w(wait\(\))f FH(function\).)22 b(The)16
b(sleep)h(that)e FD(select\(\))f FH(causes)i(is)g(v)o(ery)g(similar)150
1365 y(to)g(that)f(of)h FD(sleep)p 482 1365 V 16 w(on)p 546
1365 V 17 w(interruptible\(\))p FH(,)e(and,)i(in)h(fact,)f
FD(wake)p 1306 1365 V 16 w(up)p 1370 1365 V 17 w(interruptible\(\))e
FH(is)j(used)g(to)150 1430 y(w)o(ak)o(e)d(the)i(pro)q(cess.)221
1517 y(Ho)o(w)o(ev)o(er,)j FD(select)p 569 1517 V 16 w(wait\(\))g
FH(will)i(return)f(|)g(and)f(the)h FD(select\(\))e FH(function)j(will)g
(return.)33 b(The)150 1582 y(pro)q(cess)15 b(isn't)g(put)g(to)f(sleep)i(un)o
(til)g(the)f(system)g(call)h FD(sys)p 1152 1582 V 16 w(select\(\))e
FH(uses)h(the)g(information)g(giv)o(en)h(to)150 1646 y(it)h(b)o(y)f(the)g
FD(select)p 487 1646 V 17 w(wait\(\))f FH(function)i(and)g(puts)f(the)h(pro)q
(cess)f(to)g(sleep.)25 b FD(select)p 1607 1646 V 16 w(wait\(\))15
b FH(adds)i(the)150 1710 y(pro)q(cess)e(to)g(the)g(w)o(ait)g(queue,)h(and)f
FD(sys)p 848 1710 V 17 w(select\(\))f FH(puts)h(the)g(pro)q(cess)h(to)e
(sleep.)221 1798 y(The)i(\014rst)g(argumen)o(t)g(to)g FD(select)p
819 1798 V 16 w(wait\(\))g FH(is)h(the)g(same)f FD(wait)p 1333
1798 V 16 w(queue)g FH(that)g(should)h(b)q(e)h(used)f(for)150
1863 y(a)22 b FD(sleep)p 318 1863 V 16 w(on\(\))p FH(,)h(and)f(the)g(second)h
(is)f(the)g FD(select)p 1081 1863 V 16 w(table)g FH(that)f(w)o(as)g(passed)h
(to)g(y)o(our)f FD(select\(\))150 1927 y FH(function.)221 2015
y(After)14 b(ha)o(ving)i(explained)h(all)f(this)g(in)g(excruciating)g
(detail,)g(here)g(are)f(t)o(w)o(o)f(rules)i(to)e(follo)o(w:)206
2137 y(1.)22 b(Call)16 b FD(select)p 507 2137 V 16 w(wait\(\))e
FH(if)i(the)f(device)i(is)f(not)e(ready)l(,)h(and)h(return)f(0.)206
2238 y(2.)22 b(Return)15 b(1)g(if)h(the)f(device)i(is)f(ready)l(.)221
2361 y(If)10 b(y)o(ou)g(pro)o(vide)g(a)g FD(select\(\))f FH(function,)j(do)e
(not)g(pro)o(vide)g(timeouts)h(b)o(y)f(setting)g FD(current->timeout)p
FH(,)150 2425 y(as)15 b(the)g(select)h(mec)o(hanism)f(uses)h
FD(current->timeout)p FH(,)c(and)j(the)g(t)o(w)o(o)f(metho)q(ds)h(cannot)g
(co-exist,)g(as)150 2489 y(there)f(is)g(only)g(one)f FD(timeout)g
FH(for)f(eac)o(h)i(pro)q(cess.)19 b(Instead,)14 b(consider)h(using)f(a)f
(timer)h(to)e(pro)o(vide)i(time-)150 2554 y(outs.)20 b(Just)c(b)q(e)g(sure)g
(that)e(y)o(ou)i(need)g(to)f(use)h(a)f(timer)g(b)q(efore)h(y)o(ou)f(call)i
FD(add)p 1493 2554 V 17 w(timer\(\))p FH(,)d(as)h(the)g(whole)p
eop
%%Page: 17 26
17 25 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(17)150 88 y(system)13 b(curren)o(tly)h(has)f
(only)h(64)e(timers,)i(and)f(the)h(k)o(ernel)g(will)h(panic)f(if)g(it)f
(tries)h(to)e(install)j(more)e(than)150 153 y(64)i(timers)g(concurren)o(tly)l
(.)21 b FC([I)c(b)q(eliev)o(e)h(that)h(this)f(has)f(c)o(hange)h(recen)o(tly)l
(.)24 b(Chec)o(k)17 b(this)h(out.])150 304 y(1.3.6.5)54 b(The)18
b FD(ioctl\(\))f FC(function)150 421 y FH(The)d FD(ioctl\(\))e
FH(function)j(pro)q(cesses)f(io)q(ctl)g(calls.)21 b(The)13
b(structure)h(of)f(y)o(our)g FD(ioctl\(\))f FH(function)i(will)i(b)q(e:)150
486 y(\014rst)d(error)f(c)o(hec)o(king,)i(then)g(one)f(gian)o(t)g(\(p)q
(ossibly)h(nested\))f(switc)o(h)g(statemen)o(t)f(to)h(handle)h(all)g(p)q
(ossible)150 550 y(io)q(ctls.)24 b(The)16 b(io)q(ctl)i(n)o(um)o(b)q(er)e(is)h
(passed)f(as)g FD(cmd)p FH(,)g(and)g(the)g(argumen)o(t)g(to)f(the)i(io)q(ctl)
g(is)g(passed)f(as)g FD(arg)p FH(.)150 614 y(It)f(is)h(go)q(o)q(d)e(to)h(ha)o
(v)o(e)f(an)h(understanding)i(of)d(ho)o(w)h FD(ioctls)f FH(ough)o(t)g(to)g(w)
o(ork)g(b)q(efore)i(making)f(them)g(up.)150 679 y(If)j(y)o(ou)f(are)g(not)g
(sure)g(ab)q(out)g(y)o(our)g(io)q(ctls,)i(do)e(not)g(feel)h(ashamed)g(to)e
(ask)h(someone)h(kno)o(wledgeable)150 743 y(ab)q(out)f(it,)i(for)e(a)g(few)g
(reasons:)25 b(y)o(ou)17 b(ma)o(y)g(not)g(ev)o(en)h(need)h(an)e(io)q(ctl)i
(for)e(y)o(our)g(purp)q(ose,)h(and)g(if)g(y)o(ou)150 808 y(do)d(need)g(an)g
(io)q(ctl,)h(there)f(ma)o(y)f(b)q(e)h(a)g(b)q(etter)g(w)o(a)o(y)e(to)h(do)h
(it)g(than)g(what)f(y)o(ou)h(ha)o(v)o(e)f(though)o(t)g(of.)19
b(Since)150 872 y(io)q(ctls)f(are)e(the)h(least)g(regular)g(part)g(of)f(the)h
(device)i(in)o(terface,)e(it)g(tak)o(es)f(p)q(erhaps)i(the)f(most)f(w)o(ork)g
(to)150 936 y(get)f(this)g(part)g(righ)o(t.)20 b(T)l(ak)o(e)15
b(the)g(time)g(and)h(energy)f(y)o(ou)g(need)h(to)f(get)f(it)i(righ)o(t.)150
1053 y FD(struct)23 b(inode)g(*)h(inode)450 1118 y FH(P)o(oin)o(ter)15
b(to)f(the)i(ino)q(de)g(structure)f(for)g(this)g(device.)150
1221 y FD(struct)23 b(file)g(*)h(file)450 1286 y FH(P)o(oin)o(ter)15
b(to)f(the)i(\014le)g(structure)f(for)f(this)i(device.)150
1389 y FD(unsigned)23 b(int)g(cmd)450 1454 y FH(This)17 b(is)f(the)h(io)q
(ctl)g(command.)23 b(It)16 b(is)h(generally)g(used)g(as)e(the)i(switc)o(h)f
(v)m(ariable)i(for)d(a)450 1518 y(case)g(statemen)o(t.)150
1621 y FD(unsigned)23 b(int)g(arg)450 1686 y FH(This)c(is)g(the)f(argumen)o
(t)f(to)h(the)g(command.)29 b(This)19 b(is)g(user)g(de\014ned.)30
b(Since)20 b(this)e(is)450 1750 y(the)h(same)f(size)h(as)f(a)h
FD(\(void)k(*\))p FH(,)18 b(this)h(can)g(b)q(e)g(used)g(as)f(a)h(p)q(oin)o
(ter)g(to)e(user)i(space,)450 1814 y(accessed)d(through)f(the)g(fs)g
(register)g(as)g(usual.)150 1944 y FC(Returns:)103 b FD(-errno)14
b FH(on)h(error)450 2008 y(Ev)o(ery)g(other)g(return)g(is)g(user-de\014ned.)
221 2138 y(If)d(the)f FD(ioctl\(\))g FH(slot)h(in)g(the)g FD(file)p
822 2138 15 2 v 17 w(operations)e FH(structure)i(is)g(not)f(\014lled)j(in,)f
(the)f(VFS)g(will)h(return)150 2203 y FD(-EINVAL)p FH(.)g(Ho)o(w)o(ev)o(er,)g
(in)j(all)f(cases,)f(if)h FD(cmd)f FH(is)h(one)f(of)g FD(FIOCLEX)p
FH(,)g FD(FIONCLEX)p FH(,)e FD(FIONBIO)p FH(,)i(or)f FD(FIOASYNC)p
FH(,)150 2267 y(default)j(pro)q(cessing)g(will)h(b)q(e)f(done:)150
2384 y FD(FIOCLEX)132 b FH(0x5451)450 2448 y(Sets)15 b(the)g(close-on-exec)i
(bit.)p eop
%%Page: 18 27
18 26 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(18)150 88 y FD(FIONCLEX)108
b FH(0x5450)450 153 y(Clears)15 b(the)h(close-on-exec)g(bit.)150
256 y FD(FIONBIO)132 b FH(0x5421)450 321 y(If)15 b FD(arg)g
FH(is)h(non-zero,)f(set)g FD(O)p 923 321 15 2 v 17 w(NONBLOCK)p
FH(,)f(otherwise)h(clear)h FD(O)p 1494 321 V 17 w(NONBLOCK)p
FH(.)150 424 y FD(FIOASYNC)108 b FH(0x5452)450 488 y(If)22
b FD(arg)f FH(is)g(non-zero,)i(set)e FD(O)p 955 488 V 17 w(SYNC)p
FH(,)g(otherwise)g(clear)h FD(O)p 1449 488 V 17 w(SYNC)p FH(.)f
FD(O)p 1620 488 V 17 w(SYNC)g FH(is)g(not)g(y)o(et)450 553
y(implemen)o(ted,)e(but)f(it)f(is)h(do)q(cumen)o(ted)h(here)e(and)h(parsed)f
(in)i(the)e(k)o(ernel)h(for)f(com-)450 617 y(pleteness.)150
734 y(Note)f(that)g(y)o(ou)g(ha)o(v)o(e)g(to)g(a)o(v)o(oid)h(these)f(four)h
(n)o(um)o(b)q(ers)f(when)h(creating)g(y)o(our)f(o)o(wn)g(io)q(ctls,)i(as)e
(if)h(they)150 799 y(con\015ict,)g(the)f(VFS)h(io)q(ctl)g(co)q(de)g(will)h
(in)o(terpret)e(them)h(as)f(b)q(eing)h(one)g(of)e(these)i(four,)f(and)g(act)g
(appro-)150 863 y(priately)l(,)g(causing)g(a)f(v)o(ery)g(hard)g(to)f(trac)o
(k)h(do)o(wn)f(bug.)150 1015 y FC(1.3.6.6)54 b(The)18 b FD(mmap\(\))f
FC(function)150 1128 y FD(struct)23 b(inode)g(*)h(inode)450
1192 y FH(P)o(oin)o(ter)15 b(to)f(ino)q(de)j(structure)e(for)f(device.)150
1296 y FD(struct)23 b(file)g(*)h(file)450 1360 y FH(P)o(oin)o(ter)15
b(to)f(\014le)j(structure)e(for)f(device.)150 1464 y FD(unsigned)23
b(long)g(addr)450 1528 y FH(Beginning)17 b(of)e(address)g(in)h(main)g(memory)
e(to)h FD(mmap\(\))f FH(in)o(to.)150 1631 y FD(size)p 249 1631
V 17 w(t)23 b(len)68 b FH(Length)16 b(of)e(memory)h(to)g FD(mmap\(\))p
FH(.)150 1735 y FD(int)23 b(prot)109 b FH(One)16 b(of:)p 450
1751 857 2 v 449 1815 2 65 v 499 1796 a FD(PROT)p 598 1796
15 2 v 16 w(READ)p 731 1815 2 65 v 50 w FH(region)f(can)g(b)q(e)h(read.)p
1305 1815 V 450 1817 857 2 v 449 1881 2 65 v 475 1862 a FD(PROT)p
574 1862 15 2 v 17 w(WRITE)p 731 1881 2 65 v 49 w FH(region)f(can)g(b)q(e)h
(written.)p 1305 1881 V 450 1883 857 2 v 449 1947 2 65 v 499
1928 a FD(PROT)p 598 1928 15 2 v 16 w(EXEC)p 731 1947 2 65
v 50 w FH(region)f(can)g(b)q(e)h(executed.)p 1305 1947 V 450
1949 857 2 v 449 2013 2 65 v 499 1994 a FD(PROT)p 598 1994
15 2 v 16 w(NONE)p 731 2013 2 65 v 50 w FH(region)f(cannot)g(b)q(e)h
(accessed.)p 1305 2013 V 450 2015 857 2 v 150 2123 a FD(unsigned)23
b(long)g(off)450 2187 y FH(O\013set)15 b(in)h(the)e(\014le)i(to)e
FD(mmap\(\))g FH(from.)19 b(This)c(address)g(in)g(the)g(\014le)h(will)g(b)q
(e)f(mapp)q(ed)h(to)450 2251 y(address)f FD(addr)p FH(.)450
2335 y FC([Here,)i(giv)o(e)d(a)i(p)q(oin)o(ter)g(to)g(the)f(do)q(cumen)o
(tation)i(for)e(the)g(new)g(vmm)f(\(Vir-)450 2400 y(tual)20
b(Memory)e(Mangamen)o(t\))g(in)o(terface,)j(and)e(sho)o(w)e(ho)o(w)h(the)h
(functions)450 2464 y(can)f(b)q(e)f(used)f(b)o(y)g(a)i(device)f
FD(mmap\(\))f FC(function.)25 b(Krishna)18 b(should)f(ha)o(v)o(e)f(the)450
2528 y(do)q(cumen)o(tation)h(for)e(the)h(vmm)d(in)o(terface)k(in)e(the)h
(memory)e(managemen)o(t)p eop
%%Page: 19 28
19 27 bop 150 -84 1800 3 v 150 -100 a FC(1.3.)42 b(Device)18
b(Driv)o(er)g(Basics)1156 b FH(19)450 88 y FC(section.])150
240 y(1.3.6.7)54 b(The)18 b FD(open\(\))f FC(and)h FD(release\(\))e
FC(functions)150 353 y FD(struct)23 b(inode)g(*)h(inode)450
417 y FH(P)o(oin)o(ter)15 b(to)f(ino)q(de)j(structure)e(for)f(device.)150
521 y FD(struct)23 b(file)g(*)h(file)450 585 y FH(P)o(oin)o(ter)15
b(to)f(\014le)j(structure)e(for)f(device.)150 715 y FD(open\(\))d
FH(is)i(called)g(when)g(a)f(device)h(sp)q(ecial)h(\014les)f(is)g(op)q(ened.)
20 b(It)12 b(is)g(the)h(p)q(olicy)g(mec)o(hanism)g(resp)q(onsible)150
779 y(for)i(ensuring)h(consistency)l(.)22 b(If)16 b(only)g(one)g(pro)q(cess)f
(is)h(allo)o(w)o(ed)g(to)f(op)q(en)h(the)g(device)g(at)f(once,)h
FD(open\(\))150 844 y FH(should)g(lo)q(c)o(k)g(the)f(device,)h(using)g
(whatev)o(er)e(lo)q(c)o(king)j(mec)o(hanism)e(is)h(appropriate,)f(usually)h
(setting)f(a)150 908 y(bit)g(in)f(some)g(state)f(v)m(ariable)j(to)d(mark)h
(it)g(as)g(busy)l(.)20 b(If)14 b(a)g(pro)q(cess)g(already)h(is)f(using)h(the)
f(device)i(\(if)e(the)150 972 y(busy)j(bit)g(is)g(already)g(set\))f(then)h
FD(open\(\))e FH(should)j(return)f FD(-EBUSY)p FH(.)e(If)i(more)f(than)g(one)
h(pro)q(cess)g(ma)o(y)150 1037 y(op)q(en)e(the)g(device,)h(this)f(function)g
(is)g(resp)q(onsible)i(to)d(set)g(up)h(an)o(y)f(necessary)h(queues)h(that)d
(w)o(ould)i(not)150 1101 y(b)q(e)i(set)g(up)g(in)g FD(write\(\))p
FH(.)24 b(If)17 b(no)f(suc)o(h)h(device)i(exists,)e FD(open\(\))e
FH(should)j(return)f FD(-ENODEV)e FH(to)h(indicate)150 1166
y(this.)k(Return)c(0)f(on)g(success.)221 1253 y FD(release\(\))c
FH(is)j(called)h(only)e(when)h(the)f(pro)q(cess)g(closes)h(its)f(last)g(op)q
(en)h(\014le)g(descriptor)f(on)g(the)g(\014les.)150 1318 y(If)i(devices)i(ha)
o(v)o(e)d(b)q(een)j(mark)o(ed)d(as)h(busy)l(,)g FD(release\(\))f
FH(should)i(unset)g(the)f(busy)g(bits)h(if)f(appropriate.)150
1382 y(If)h(y)o(ou)g(need)h(to)e(clean)i(up)f FD(kmalloc\(\))p
FH('ed)f(queues)i(or)e(reset)h(devices)h(to)e(preserv)o(e)h(their)h(sanit)o
(y)l(,)f(this)150 1446 y(is)g(the)f(place)h(to)f(do)g(it.)20
b(If)15 b(no)h FD(release\(\))d FH(function)k(is)e(de\014ned,)h(none)g(is)g
(called.)150 1598 y FC(1.3.6.8)54 b(The)18 b FD(init\(\))f
FC(function)150 1715 y FH(This)h(function)h(is)f(not)f(actually)i(included)h
(in)f(the)f FD(file)p 1164 1715 15 2 v 16 w(operations)f FH(structure,)g(but)
h(y)o(ou)f(are)h(re-)150 1779 y(quired)24 b(to)d(implemen)o(t)j(it,)g(b)q
(ecause)g(it)e(is)h(this)g(function)g(that)f(registers)g(the)h
FD(file)p 1698 1779 V 16 w(operations)150 1844 y FH(structure)14
b(with)g(the)g(VFS)g(in)h(the)f(\014rst)f(place)i(|)g(without)f(this)g
(function,)h(the)f(VFS)g(could)h(not)e(route)150 1908 y(an)o(y)k(requests)g
(to)f(the)h(driv)o(er.)26 b(This)17 b(function)h(is)g(called)g(when)g(the)f
(k)o(ernel)h(\014rst)e(b)q(o)q(ots)h(and)g(is)h(con-)150 1973
y(\014guring)g(itself.)26 b FD(init\(\))16 b FH(is)i(passed)f(a)g(v)m
(ariable)h(holding)h(the)e(address)g(of)g(the)g(curren)o(t)g(end)h(of)e(used)
150 2037 y(memory)l(.)j(The)12 b(init)i(function)g(then)e(detects)h(all)h
(devices,)g(allo)q(cates)f(an)o(y)f(memory)g(it)h(will)h(w)o(an)o(t)e(based)
150 2101 y(on)17 b(ho)o(w)f(man)o(y)g(devices)i(exist)f(\(this)g(is)g(often)g
(used)g(to)f(hold)i(suc)o(h)f(things)g(as)f(queues,)i(for)e(in)o(terrupt)150
2166 y(driv)o(en)f(devices\),)h(and)e(then,)h(sa)o(ving)f(the)h(addresses)f
(it)h(needs,)g(it)g(returns)f(the)h(new)g(end)g(of)f(memory)l(.)150
2230 y(Y)l(ou)j(will)h(ha)o(v)o(e)f(to)f(call)i(y)o(our)e FD(init\(\))g
FH(function)h(from)f(the)h(correct)f(place:)24 b(for)16 b(a)h(c)o(haracter)f
(device,)150 2294 y(this)k(is)g FD(chr)p 368 2294 V 17 w(dev)p
457 2294 V 17 w(init\(\))f FH(in)h FA(:)8 b(:)g(:)e FH(/k)o(ernel/c)o(hr)p
981 2294 14 2 v 17 w(dev/mem.c.)33 b(In)20 b(general,)h(y)o(ou)f(will)h(only)
f(pass)g(the)150 2359 y FD(memory)p 297 2359 15 2 v 16 w(start)15
b FH(v)m(ariable)h(to)f(y)o(our)g FD(init\(\))f FH(function.)221
2447 y(While)e(the)f FD(init\(\))g FH(function)h(runs,)g(it)f(registers)g(y)o
(our)g(driv)o(er)g(b)o(y)h(calling)g(the)g(prop)q(er)f(registration)p
eop
%%Page: 20 29
20 28 bop 150 -84 1800 3 v 150 -100 a FC(1.4.)42 b(Character)20
b(Device)d(Driv)o(ers)1049 b FH(20)150 88 y(function.)34 b(F)l(or)19
b(c)o(haracter)g(devices,)j(this)e(is)g FD(register)p 1160
88 15 2 v 16 w(chrdev\(\))p FH(.)1378 72 y Fm(4)1430 88 y FD(register)p
1625 88 V 16 w(chrdev\(\))f FH(tak)o(es)150 153 y(three)f(argumen)o(ts:)24
b(the)17 b(ma)s(jor)g(device)i(n)o(um)o(b)q(er)f(\(an)f(in)o(t\),)h(the)f
(\\name")h(of)f(the)h(device)h(\(a)e(string\),)150 217 y(and)e(the)h(address)
f(of)g(the)g FB(devic)n(e)p 731 217 V 17 w FD(fops)f(file)p
954 217 V 17 w(operations)g FH(structure.)221 305 y(When)h(this)h(is)h(done,)
e(and)h(a)f(c)o(haracter)g(or)g(blo)q(c)o(k)h(sp)q(ecial)i(\014le)e(is)g
(accessed,)g(the)g(VFS)f(\014lesystem)150 369 y(switc)o(h)k(automagically)f
(routes)g(the)h(call,)h(whatev)o(er)d(it)i(is,)g(to)f(the)g(prop)q(er)h
(function,)g(if)g(a)f(function)150 434 y(exists.)i(If)c(the)f(function)h(do)q
(es)f(not)g(exist,)g(the)h(VFS)f(routines)h(tak)o(e)e(some)h(default)h
(action.)221 522 y(The)i FD(init\(\))f FH(function)h(usually)i(displa)o(ys)f
(some)e(information)h(ab)q(out)g(the)g(driv)o(er,)h(and)f(usually)150
586 y(rep)q(orts)d(all)h(hardw)o(are)e(found.)21 b(All)16 b(rep)q(orting)g
(is)f(done)h(via)f(the)h FD(printk\(\))e FH(function.)150 763
y Fs(1.4)70 b(Character)23 b(Device)d(Driv)n(ers)150 896 y
FC([W)l(rite)f(appropriate)h(blurb)f(here])150 1049 y Fp(1.4.1)55
b(Initialization)150 1166 y FH(Besides)21 b(functions)g(de\014ned)h(b)o(y)e
(the)g FD(file)p 929 1166 V 16 w(operations)f FH(structure,)i(there)f(is)h
(at)e(least)h(one)g(other)150 1231 y(function)g(that)f(y)o(ou)g(will)i(ha)o
(v)o(e)e(to)f(write,)i(the)g FD(foo)p 1075 1231 V 16 w(init\(\))f
FH(function.)33 b(Y)l(ou)19 b(will)i(ha)o(v)o(e)e(to)g(c)o(hange)150
1295 y FD(chr)p 225 1295 V 17 w(dev)p 314 1295 V 17 w(init\(\))14
b FH(in)h(c)o(hr)p 603 1295 14 2 v 17 w(drv/mem.c)f(to)g(call)i(y)o(our)f
FD(foo)p 1167 1295 15 2 v 17 w(init\(\))f FH(function.)20 b
FD(foo)p 1609 1295 V 17 w(init\(\))14 b FH(will)j(tak)o(e)150
1360 y(one)g(argumen)o(t,)f FD(long)24 b(mem)p 648 1360 V 16
w(start)p FH(,)17 b(whic)o(h)g(will)i(b)q(e)f(the)f(address)g(of)f(the)h
(curren)o(t)g(end)g(of)g(allo)q(cated)150 1424 y(memory)l(.)i(If)13
b(y)o(our)f(driv)o(er)i(needs)f(to)g(allo)q(cate)g(more)g(than)f(4K)h(of)g
(con)o(tiguous)g(space)g(at)f(run)o(time,)i(here)150 1488 y(is)k(the)f
(place.)28 b(Simply)19 b(sa)o(v)o(e)e FD(mem)p 749 1488 V 16
w(start)g FH(in)h(an)g(appropriate)f(v)m(ariable,)i(add)f(ho)o(w)o(ev)o(er)e
(m)o(uc)o(h)i(space)150 1553 y(y)o(ou)i(need)h(to)e FD(mem)p
487 1553 V 17 w(start)p FH(,)h(and)g(return)g(the)g(new)g(v)m(alue.)36
b(Y)l(our)20 b(driv)o(er)g(will)i(no)o(w)e(ha)o(v)o(e)f(exclusiv)o(e)150
1617 y(access)c(to)g(the)g(memory)g(b)q(et)o(w)o(een)g(the)h(old)f(and)h(new)
f(v)m(alues)i(of)d FD(mem)p 1367 1617 V 17 w(start)p FH(.)221
1705 y FD(foo)p 296 1705 V 16 w(init\(\))e FH(should)i(\014rst)e(call)h
FD(register)p 973 1705 V 16 w(chrdev\(\))f FH(to)g(register)g(itself)i(and)e
(a)o(v)o(oid)h(device)h(n)o(um-)150 1769 y(b)q(er)i(con)o(ten)o(tion.)k
FD(register)p 665 1769 V 16 w(chrdev\(\))14 b FH(tak)o(es)g(three)h(argumen)o
(ts:)150 1886 y FD(int)23 b(major)85 b FH(This)16 b(is)f(the)h(ma)s(jor)d(n)o
(um)o(b)q(er)j(whic)o(h)g(the)f(driv)o(er)h(wishes)g(to)e(allo)q(cate.)150
1990 y FD(char)23 b(*name)61 b FH(This)12 b(is)g(the)g(sym)o(b)q(olic)h(name)
f(of)f(the)h(driv)o(er.)19 b(It)11 b(is)h(curren)o(tly)h(not)e(used)h(for)f
(an)o(ything,)450 2054 y(but)k(this)h(ma)o(y)e(c)o(hange)i(in)g(the)f
(future.)150 2158 y FD(struct)23 b(file)p 416 2158 V 17 w(operations)f(*f)p
743 2158 V 17 w(ops)450 2222 y FH(This)14 b(is)f(the)g(address)g(of)f(y)o
(our)h FD(file)p 1081 2222 V 17 w(operations)e FH(structure)i(de\014ned)h(in)
g(Section)g FC(??)150 2326 y(Returns:)103 b FH(0)15 b(if)h(no)f(other)f(c)o
(haracter)h(device)i(has)e(registered)g(with)h(the)f(same)g(ma)s(jor)f(n)o
(um)o(b)q(er.)450 2390 y(non-0)j(if)g(the)g(call)g(fails,)h(presumably)f(b)q
(ecause)h(another)e(c)o(haracter)g(device)i(has)e(al-)450 2454
y(ready)f(allo)q(cated)h(that)f(ma)s(jor)e(n)o(um)o(b)q(er.)p
150 2494 720 2 v 202 2525 a Fz(4)219 2541 y Fl(See)g(section)p
Fh(??)p eop
%%Page: 21 30
21 29 bop 150 -84 1800 3 v 150 -100 a FC(1.4.)36 b(Character)20
b(Device)e(Driv)o(ers)1054 b FH(21)221 88 y(Generally)l(,)18
b(the)f FD(foo)p 593 88 15 2 v 17 w(init\(\))f FH(routine)i(will)h(then)e
(attempt)f(to)h(detect)g(the)g(hardw)o(are)g(that)f(it)h(is)150
153 y(supp)q(osed)d(to)f(b)q(e)h(driving.)20 b(It)14 b(should)g(mak)o(e)f
(sure)g(that)g(all)h(necessary)g(data)e(structures)h(are)g(\014lled)i(out)150
217 y(for)i(all)i(presen)o(t)f(hardw)o(are,)f(and)h(ha)o(v)o(e)f(some)h(w)o
(a)o(y)e(of)i(ensuring)g(that)f(non-presen)o(t)i(hardw)o(are)e(do)q(es)150
281 y(not)e(get)g(accessed.)20 b FC([detail)g(di\013eren)o(t)f(w)o(a)o(ys)c
(of)j(doing)g(this.])150 435 y Fp(1.4.2)55 b(In)n(terrupts)19
b(vs.)24 b(P)n(olling)150 552 y FH(In)19 b(a)g(p)q(olling)i(driv)o(er,)f(the)
f FD(foo)p 712 552 V 16 w(read\(\))f FH(and)h FD(foo)p 1054
552 V 17 w(write\(\))f FH(functions)i(are)e(prett)o(y)g(easy)h(to)f(write.)
150 616 y(Here)d(is)h(an)f(example)h(of)f FD(foo)p 671 616
V 17 w(read\(\))p FH(:)264 734 y Fr(static)20 b(int)h(foo_write\(struct)e
(inode)i(*)g(inode,)g(struct)f(file)h(*)h(file,)721 791 y(char)f(*)h(buf,)f
(int)g(count\))264 848 y({)351 904 y(unsigned)f(int)h(minor)g(=)g
(MINOR\(inode->i_rdev\))o(;)351 961 y(char)g(ret;)351 1075
y(while)g(\(count)f(>)i(0\))f({)438 1132 y(ret)g(=)h(foo_write_byte\(m)o
(inor\))o(;)264 1188 y(if)f(\(ret)g(<)h(0\))f({)525 1245 y
(foo_handle_error\(W)o(RITE,)d(ret,)j(minor\);)525 1302 y(continue;)438
1359 y(})438 1415 y(buf++)g(=)g(ret;)g(count--)351 1472 y(})351
1529 y(return)f(count;)264 1586 y(})150 1711 y FD(foo)p 225
1711 V 17 w(write)p 362 1711 V 16 w(byte\(\))14 b FH(and)g
FD(foo)p 695 1711 V 17 w(handle)p 856 1711 V 16 w(error\(\))f
FH(are)h(either)h(functions)g(de\014ned)g(elsewhere)h(in)f(fo)q(o.c)150
1775 y(or)g(pseudo)q(co)q(de.)21 b FD(WRITE)15 b FH(w)o(ould)g(b)q(e)h(a)f
(constan)o(t)f(or)h FD(#define)p FH(.)221 1863 y(It)g(should)h(b)q(e)g(clear)
g(from)e(this)i(example)g(ho)o(w)e(to)h(co)q(de)h(the)f FD(foo)p
1367 1863 V 17 w(read\(\))f FH(function)i(as)f(w)o(ell.)221
1951 y(In)o(terrupt-driv)o(en)f(driv)o(ers)h(are)e(a)h(little)h(more)e
(di\016cult.)21 b(Here)14 b(is)h(an)f(example)g(of)g(a)f FD(foo)p
1769 1951 V 17 w(write\(\))150 2015 y FH(that)h(is)i(in)o(terrupt-driv)o(en:)
264 2133 y Fr(static)k(int)h(foo_write\(struct)e(inode)i(*)g(inode,)g(struct)
f(file)h(*)h(file,)721 2190 y(char)f(*)h(buf,)f(int)g(count\))264
2247 y({)351 2303 y(unsigned)f(int)h(minor)g(=)g(MINOR\(inode->i_rdev\))o(;)
351 2360 y(unsigned)f(long)h(copy_size;)351 2417 y(unsigned)f(long)h
(total_bytes_writt)o(en)e(=)i(0;)351 2474 y(unsigned)f(long)h(bytes_written;)
351 2531 y(struct)f(foo_struct)g(*foo)h(=)h(&foo_table[minor)o(];)p
eop
%%Page: 22 31
22 30 bop 150 -84 1800 3 v 150 -100 a FC(1.4.)36 b(Character)20
b(Device)e(Driv)o(ers)1054 b FH(22)351 145 y Fr(do)21 b({)438
202 y(copy_size)f(=)h(\(count)g(<=)g(FOO_BUFFER_SIZE)e(?)j(count)e(:)i
(FOO_BUFFER_SIZE\);)438 259 y(memcpy_fromfs\(foo)o(->foo)o(_buff)o(er,)d
(buf,)i(copy_size\);)438 372 y(while)g(\(copy_size\))e({)525
429 y(/*)j(initiate)e(interrupts)f(*/)525 543 y(if)j(\(some_error_has)o
(_occu)o(red\))40 b({)612 599 y(/*)22 b(handle)e(error)h(condition)f(*/)525
656 y(})525 770 y(current->timeout)f(=)i(jiffies)g(+)g(FOO_INTERRUPT_TIME)o
(OUT;)612 827 y(/*)h(set)f(timeout)f(in)i(case)f(an)g(interrupt)f(has)h(been)
g(missed)g(*/)525 883 y(interruptible_slee)o(p_on\()o(&foo-)o(>foo_)o(wait)o
(_queu)o(e\);)525 940 y(bytes_written)e(=)j(foo->bytes_xfered)o(;)525
997 y(foo->bytes_written)c(=)k(0;)525 1054 y(if)g(\(current->signa)o(l)d(&)j
(~current->block)o(ed\))d({)612 1111 y(if)j(\(total_bytes_wri)o(tten)c(+)k
(bytes_written\))699 1167 y(return)f(total_bytes_writte)o(n)e(+)i
(bytes_written;)612 1224 y(else)699 1281 y(return)g(-EINTR;)f(/*)i(nothing)e
(was)h(written,)f(system)1092 1338 y(call)h(was)g(interrupted,)e(try)i(again)
g(*/)525 1394 y(})438 1451 y(})438 1565 y(total_bytes_writt)o(en)e(+=)i
(bytes_written;)438 1622 y(buf)g(+=)h(bytes_written;)438 1678
y(count)f(-=)g(bytes_written;)351 1792 y(})g(while)g(\(count)g(>)g(0\);)351
1906 y(return)f(total_bytes_written)o(;)264 1962 y(})264 2076
y(static)g(void)h(foo_interrupt\(int)d(irq\))264 2133 y({)351
2190 y(struct)i(foo_struct)g(*foo)h(=)h(&foo_table[foo_i)o(rq[i)o(rq]];)351
2303 y(/*)f(Here,)g(do)g(whatever)f(actions)h(ought)g(to)g(be)g(taken)g(on)g
(an)h(interrupt.)416 2360 y(Look)f(at)h(a)f(flag)g(in)g(foo_table)f(to)i
(know)f(whether)f(you)h(ought)g(to)g(be)416 2417 y(reading)g(or)g(writing.)f
(*/)351 2530 y(/*)h(Increment)f(foo->bytes_xfered)e(by)k(however)e(many)h
(characters)f(were)p eop
%%Page: 23 32
23 31 bop 150 -84 1800 3 v 150 -100 a FC(1.4.)42 b(Character)20
b(Device)d(Driv)o(ers)1049 b FH(23)416 88 y Fr(read)21 b(or)h(written)e(*/)
351 202 y(if)h(\(buffer)g(too)g(full/empty\))438 259 y(wake_up_interrupt)o
(ible\()o(&foo-)o(>foo_)o(wait_)o(queu)o(e\);)264 316 y(})221
551 y FH(Again,)26 b(a)e FD(foo)p 499 551 15 2 v 17 w(read\(\))f
FH(function)i(is)g(written)g(analagously)l(.)47 b FD(foo)p
1453 551 V 17 w(table[])23 b FH(is)i(an)f(arra)o(y)f(of)150
615 y(structures,)f(eac)o(h)f(of)g(whic)o(h)h(has)f(sev)o(eral)g(mem)o(b)q
(ers,)i(some)d(of)h(whic)o(h)h(are)f FD(foo)p 1610 615 V 17
w(wait)p 1723 615 V 16 w(queue)g FH(and)150 680 y FD(bytes)p
273 680 V 16 w(xfered)p FH(,)16 b(whic)o(h)i(can)f(b)q(e)g(used)g(for)f(b)q
(oth)h(reading)h(and)e(writing.)25 b FD(foo)p 1531 680 V 17
w(irq[])16 b FH(is)h(an)g(arra)o(y)e(of)150 744 y(16)h(in)o(tegers,)h(and)g
(is)g(used)h(for)e(lo)q(oking)i(up)f(whic)o(h)h(en)o(try)e(in)i
FD(foo)p 1319 744 V 17 w(table[])d FH(is)j(asso)q(ciated)f(with)g(the)150
808 y FD(irq)e FH(generated)g(and)g(rep)q(orted)h(to)e(the)h
FD(foo)p 924 808 V 17 w(interrupt\(\))f FH(function.)221 896
y(T)l(o)20 b(tell)h(the)g(in)o(terrupt-handling)h(co)q(de)f(to)f(call)h
FD(foo)p 1179 896 V 17 w(interrupt\(\))p FH(,)f(y)o(ou)g(need)h(to)f(use)g
(either)150 961 y FD(request)p 321 961 V 16 w(irq\(\))c FH(or)g
FD(irqaction\(\))p FH(.)23 b(This)17 b(is)g(either)h(done)f(when)g
FD(foo)p 1415 961 V 17 w(open\(\))f FH(is)h(called,)h(or)e(if)h(y)o(ou)150
1025 y(w)o(an)o(t)g(to)g(k)o(eep)h(things)h(simple,)h(when)e
FD(foo)p 922 1025 V 17 w(init\(\))f FH(is)h(called.)30 b FD(request)p
1471 1025 V 16 w(irq\(\))18 b FH(is)g(the)g(simpler)h(of)150
1089 y(the)14 b(t)o(w)o(o,)e(and)i(w)o(orks)f(rather)h(lik)o(e)h(an)e(old-st)
o(yle)i(signal)g(handler.)20 b(It)14 b(tak)o(es)f(t)o(w)o(o)g(argumen)o(ts:)
18 b(the)c(\014rst)150 1154 y(is)i(the)g(n)o(um)o(b)q(er)g(of)f(the)h
FD(irq)g FH(y)o(ou)f(are)g(requesting,)i(and)e(the)h(second)h(is)f(a)f(p)q
(oin)o(ter)h(to)g(y)o(our)f(in)o(terrupt)150 1218 y(handler,)22
b(whic)o(h)f(m)o(ust)f(tak)o(e)g(an)g(in)o(teger)h(argumen)o(t)e(\(the)h(irq)
h(that)e(w)o(as)h(generated\))g(and)g(ha)o(v)o(e)g(a)150 1282
y(return)d(t)o(yp)q(e)g(of)f FD(void)p FH(.)24 b FD(request)p
752 1282 V 17 w(irq\(\))16 b FH(returns)h FD(-EINVAL)e FH(if)j
FD(irq)e FA(>)h FH(15)g(or)f(if)h(the)g(p)q(oin)o(ter)h(to)e(the)150
1347 y(in)o(terrupt)f(handler)g(is)g FD(NULL)p FH(,)e FD(-EBUSY)h
FH(if)g(that)g(in)o(terrupt)h(has)f(already)g(b)q(een)i(tak)o(en,)e(or)f(0)h
(on)h(success.)221 1435 y FD(irqaction\(\))23 b FH(w)o(orks)g(rather)h(lik)o
(e)i(the)f(user-lev)o(el)h FD(sigaction\(\))p FH(,)f(and)g(in)g(fact)f
(reuses)h(the)150 1499 y FD(sigaction)15 b FH(structure.)24
b(The)17 b FD(sa)p 744 1499 V 17 w(restorer\(\))f FH(\014eld)i(of)e(the)h
(sigaction)g(structure)f(is)h(not)g(used,)g(but)150 1563 y(ev)o(erything)i
(else)h(is)g(the)e(same.)31 b(See)20 b(the)f(en)o(try)f(for)g
FD(irqaction\(\))g FH(in)h(Section)h(1.6,)f FC(Supp)q(orting)150
1628 y(F)l(unctions)p FH(,)c(for)g(further)g(information)g(ab)q(out)g
FD(irqaction\(\))p FH(.)150 1780 y Fp(1.4.3)55 b(TTY)19 b(driv)n(ers)150
1898 y FC([The)14 b(reasons)f(that)h(this)f(section)g(has)g(not)h(b)q(een)f
(written)h(are)g(that)f(I)g(don't)h(kno)o(w)e(enough)150 1962
y(ab)q(out)18 b(TTY)g(stu\013)f(y)o(et)f(and)h(that)g(righ)o(t)h(no)o(w,)f
(Lin)o(ux)g(is)f(prett)o(y)h(dep)q(endan)o(t)g(on)g(the)g(fact)150
2026 y(that)e(only)g(ma)s(jor)g(n)o(um)o(b)q(er)f(4)g(holds)h(an)o(y)f(TTY)h
(devices.)23 b(All)16 b(these)e(ma)s(jor)h(n)o(um)o(b)q(ers)e(are)150
2091 y(prett)o(y)22 b(m)o(uc)o(h)e(tak)o(en)h(up)g(already)l(.)36
b(Someb)q(o)q(dy)22 b(needs)f(to)g(do)h(something)f(ab)q(out)i(this,)150
2155 y(but)18 b(un)o(til)g(then,)h(there's)f(not)g(m)o(uc)o(h)e(to)i(b)q(e)g
(done.])150 2308 y Fp(1.4.4)55 b(Example)16 b(Driv)n(ers)150
2425 y FH(In)g(this)g(section,)g(w)o(e)f(will)i(examine)g(some)e(real)h
FE(Linux)f FH(device)i(driv)o(ers)f(that)f(are)g(actually)h(a)f(part)g(of)150
2489 y(the)f(k)o(ernel.)20 b(This)14 b(is)g(a)f(rather)f(long)i(section,)g
(but)g(I)g(think)g(a)f(w)o(orth)o(while)h(one.)19 b FC([Or)e(will)f(b)q(e)g
(rather)150 2554 y(long,)j(when)e(I)g(re-write)j(it)e(to)g(b)q(e)g(actually)h
(useful)p FA(:)8 b(:)g(:)e FC(])p eop
%%Page: 24 33
24 32 bop 150 -84 1800 3 v 150 -100 a FC(1.5.)42 b(Blo)q(c)o(k)18
b(Device)g(Driv)o(ers)1148 b FH(24)150 88 y Fs(1.5)70 b(Blo)r(c)n(k)22
b(Device)e(Driv)n(ers)150 221 y FH(T)l(o)c(moun)o(t)f(a)h(\014lesystem)h(on)f
(a)g(device,)h(it)f(m)o(ust)g(b)q(e)h(a)e(blo)q(c)o(k)i(device.)24
b(This)17 b(means)f(that)f(the)i(device)150 286 y(m)o(ust)d(b)q(e)i(a)f
(random)g(access)g(device,)h(not)e(a)h(stream)f(device.)22
b(In)15 b(other)g(w)o(ords,)f(y)o(ou)h(m)o(ust)f(b)q(e)i(able)g(to)150
350 y(seek)f(to)g(an)o(y)g(lo)q(cation)h(on)f(the)g(ph)o(ysical)i(device)f
(at)f(an)o(y)g(time.)221 438 y(Y)l(ou)h(do)h(not)f(pro)o(vide)h
FD(read\(\))f FH(and)g FD(write\(\))g FH(routines)h(for)f(a)g(blo)q(c)o(k)h
(device.)26 b(Instead,)16 b(y)o(ou)h(use)150 502 y FD(block)p
273 502 15 2 v 16 w(read\(\))e FH(and)h FD(block)p 657 502
V 17 w(write\(\))p FH(,)e(whic)o(h)j(are)e(generic)i(functions)g(whic)o(h)f
(will)i(call)f(a)e FC(strategy)150 567 y FH(routine)k(whic)o(h)g(y)o(ou)f
(pro)o(vide.)29 b(This)19 b(strategy)e(routine)i(is)g(also)f(called)i(b)o(y)e
(the)g FC(bu\013er)k(cac)o(he)p FH(\(See)150 631 y(section)15
b(??\),)g(whic)o(h)h(is)f(called)h(b)o(y)f(the)g(VFS)f(routines)h(\(See)g(c)o
(hapter)g(??\))20 b(whic)o(h)c(is)f(ho)o(w)f(normal)h(\014les)150
695 y(on)g(normal)g(\014lesystems)h(are)f(read)g(and)g(written.)221
783 y(These)k(requests)g(are)f(giv)o(en)i(to)e(a)g(routine)i(called)g
FD(ll)p 1182 783 V 17 w(rw)p 1247 783 V 17 w(block\(\))p FH(,)f(whic)o(h)g
(constructs)g(lists)g(of)150 847 y(requests)d(ordered)h(b)o(y)f(an)h
FC(elev)m(ator)j(algorithm,)f FH(whic)o(h)e(sorts)f(the)g(lists)h(to)f(mak)o
(e)g(accesses)h(faster)150 912 y(and)e(more)g(e\016cien)o(t.)221
1000 y(Note)k(that)g(although)h(SCSI)h(disks)f(and)g(CDR)o(OMs)f(are)h
(considered)h(blo)q(c)o(k)g(devices,)g(they)f(are)150 1064
y(handled)d(sp)q(ecially)l(.)22 b(Refer)16 b(to)e(section)i(1.7,)e(W)l
(riting)i(a)f(SCSI)h(Driv)o(er,)e(for)h(details.)1618 1048
y Fm(5)150 1216 y Fp(1.5.1)55 b(Initialization)150 1333 y FH(Initialization)
24 b(of)c(blo)q(c)o(k)i(devices)g(is)g(a)f(bit)g(more)g(complex)h(than)f
(initialization)j(of)c(c)o(haracter)g(de-)150 1397 y(vices,)f(esp)q(ecially)i
(as)d(some)g(\\initialization")i(has)e(to)g(b)q(e)h(done)f(at)g(compile)h
(time.)29 b(There)19 b(is)f(also)g(a)150 1462 y FD(register)p
345 1462 V 16 w(blkdev\(\))13 b FH(call)i(that)f(corresp)q(onds)g(to)f(the)h
(c)o(haracter)g(device)h FD(register)p 1651 1462 V 16 w(chrdev\(\))e
FH(call,)150 1526 y(whic)o(h)j(the)f(driv)o(er)h(m)o(ust)f(call)h(to)e(sa)o
(y)h(that)f(it)i(is)g(presen)o(t,)e(w)o(orking,)h(and)g(activ)o(e.)150
1676 y FC(1.5.1.1)54 b(The)18 b(\014le)g(blk.h)150 1793 y FH(A)o(t)e(the)g
(top)f(of)h(y)o(our)f(driv)o(er)i(co)q(de,)f(after)g(all)h(other)e(included)k
(header)d(\014les,)h(y)o(ou)f(need)h(to)e(write)h(t)o(w)o(o)150
1857 y(lines)h(of)e(co)q(de:)264 1974 y Fr(#define)20 b(MAJOR)p
551 1974 14 2 v 15 w(NR)h Fg(h)p Ff(n)p Fg(i)264 2038 y Fr(#include)f
("blk.h")150 2154 y FH(where)c FG(h)p Fv(n)p FG(i)f FH(is)h(the)g(ma)s(jor)f
(n)o(um)o(b)q(er)h(of)f(y)o(our)g(device.)23 b(k)o(ernel/blk)p
1301 2154 V 18 w(drv/blk.h)16 b(requires)g(the)g(useof)g(the)150
2219 y(MAJOR)p 320 2219 V 17 w(NR)g(de\014ne)g(to)f(set)g(up)g(man)o(y)g
(other)g(de\014nes)h(and)g(macros)e(for)h(y)o(our)f(driv)o(er.)221
2306 y(No)o(w)g(y)o(ou)h(need)h(to)f(edit)h(blk.h.)21 b(Under)16
b FD(#ifdef)23 b(MAJOR)p 1224 2306 15 2 v 17 w(NR)p FH(,)14
b(there)i(is)f(a)g(section)h(of)f(de\014nes)i(that)150 2371
y(are)h(conditionally)j(included)h(for)c(certain)h(ma)s(jor)e(n)o(um)o(b)q
(ers,)j(protected)e(b)o(y)h FD(#elif)k(\(MAJOR)p 1817 2371
V 17 w(NR)g(==)p 150 2407 720 2 v 202 2434 a Fz(5)219 2449
y Fl(Although)14 b(SCSI)f(didsks)h(and)f(CDR)o(OMs)g(are)g(blo)q(c)o(k)h
(devices,)f(SCSI)g(tap)q(es,)g(lik)o(e)h(other)f(tap)q(es,)g(are)f(generally)
j(used)150 2502 y(as)d(c)o(haracter)h(devices.)18 b(Ho)o(w)o(ev)o(er,)12
b(they)h(are)f(in)h(k)o(ernel/blk)p 1038 2502 12 2 v 17 w(drv/scsi)h(lik)o(e)
f(all)h(the)e(other)h(SCSI)f(devices)i(for)e(the)g(sak)o(e)h(of)150
2554 y(con)o(v)o(enience.)p eop
%%Page: 25 34
25 33 bop 150 -84 1800 3 v 150 -100 a FC(1.5.)42 b(Blo)q(c)o(k)18
b(Device)g(Driv)o(ers)1148 b FH(25)150 88 y FG(h)p Fv(n)p FG(i)p
FD(\))p FH(.)22 b(A)o(t)15 b(the)i(end)f(of)g(this)g(list,)h(y)o(ou)f(will)h
(add)g(another)e(section)i(for)e(y)o(our)h(driv)o(er.)23 b(In)16
b(that)g(section,)150 153 y(the)f(follo)o(wing)h(lines)h(are)e(required:)264
264 y Fr(#define)20 b(DEVICE)p 573 264 14 2 v 14 w(NAME)h(")p
Ff(device)p Fr(")264 328 y(#define)f(DEVICE)p 573 328 V 14
w(REQUEST)h(do)p 806 328 V 15 w Ff(dev)p 884 328 V 16 w Fr(request)264
392 y(#define)f(DEVICE)p 573 392 V 14 w(ON\(device\))g(/*)i
Ff(usually)13 b(blank,)f(see)j(b)q(elo)o(w)22 b Fr(*/)264 457
y(#define)e(DEVICE)p 573 457 V 14 w(OFF\(device\))g(/*)h Ff(usually)13
b(blank,)g(see)i(b)q(elo)o(w)22 b Fr(*/)264 521 y(#define)e(DEVICE)p
573 521 V 14 w(NR\(device\))g(\(MINOR\(device\)\))221 632 y
FD(DEVICE)p 368 632 15 2 v 16 w(NAME)15 b FH(is)g(simply)i(the)e(device)i
(name.)i(See)d(the)g(other)e(en)o(tries)i(in)g(blk.h)g(for)e(examples.)221
720 y FD(DEVICE)p 368 720 V 16 w(REQUEST)h FH(is)i(y)o(our)f(strategy)f
(routine,)i(whic)o(h)g(will)h(do)f(all)g(the)g(I/O)g(on)f(the)g(device.)25
b(See)150 784 y(section)16 b(1.5.3)d(for)i(more)g(details)h(on)f(the)g
(strategy)f(routine.)221 872 y FD(DEVICE)p 368 872 V 16 w(ON)d
FH(and)g FD(DEVICE)p 671 872 V 16 w(OFF)g FH(are)g(for)f(devices)i(that)f
(need)h(to)e(b)q(e)i(turned)f(on)g(and)h(o\013,)f(lik)o(e)h(foppies.)150
937 y(In)k(fact,)e(the)h(\015opp)o(y)h(driv)o(er)f(is)h(curren)o(tly)g(the)f
(only)h(device)g(driv)o(er)g(whic)o(h)g(uses)f(these)h(de\014nes.)221
1024 y FD(DEVICE)p 368 1024 V 16 w(NR\(device\))h FH(is)i(used)h(to)e
(determine)h(the)g(n)o(um)o(b)q(er)g(of)f(the)h(ph)o(ysical)h(device)g(from)e
(the)150 1089 y(minor)e(device)i(n)o(um)o(b)q(er.)k(F)l(or)16
b(instance,)h(in)f(the)g FD(hd)g FH(driv)o(er,)g(since)i(the)e(second)g(hard)
g(driv)o(e)h(starts)e(at)150 1153 y(minor)g(64,)g FD(DEVICE)p
502 1153 V 16 w(NR\(device\))f FH(is)i(de\014ned)g(to)f(b)q(e)h
FD(\(MINOR\(device\)>>6\))c FH(instead.)221 1241 y(If)j(y)o(our)g(driv)o(er)g
(is)h(in)o(terrupt-driv)o(en,)g(y)o(ou)f(will)i(also)e(set)264
1352 y Fr(#define)20 b(DEVICE)p 573 1352 14 2 v 14 w(INTR)h(do)p
740 1352 V 16 w Ff(dev)150 1463 y FH(whic)o(h)f(will)i(b)q(ecome)e(a)f(v)m
(ariable)i(automatically)f(de\014ned)h(and)f(used)g(b)o(y)g(the)f(remainder)h
(of)g(blk.h,)150 1527 y(sp)q(eci\014cally)e(b)o(y)d(the)g FD(SET)p
596 1527 15 2 v 17 w(INTR\(\))g FH(and)g FD(CLEAR)p 980 1527
V 16 w(INTR)g FH(macros.)221 1615 y(Y)l(ou)g(migh)o(t)g(also)g(consider)h
(setting)g(these)f(de\014nes:)264 1726 y Fr(#define)20 b(DEVICE)p
573 1726 14 2 v 14 w(TIMEOUT)h Ff(DEV)p 853 1726 V 16 w Fr(TIMER)264
1790 y(#define)f(TIMEOUT)p 595 1790 V 14 w(VALUE)h Ff(n)150
1901 y FH(where)14 b Fv(n)h FH(is)f(the)h(n)o(um)o(b)q(er)f(of)g(ji\016es)g
(\(clo)q(c)o(k)h(tic)o(ks;)f(h)o(undredths)h(of)f(a)f(second)i(on)f
FE(Linux)p FH(/386\))e(to)i(time)150 1966 y(out)i(after)g(if)i(no)e(in)o
(terrupt)i(is)f(receiv)o(ed.)26 b(These)17 b(are)f(used)i(if)f(y)o(our)f
(device)j(can)d(b)q(ecome)i(\\stuc)o(k":)k(a)150 2030 y(condition)17
b(where)f(the)g(driv)o(er)g(w)o(aits)g(inde\014nitely)j(for)c(an)h(in)o
(terrupt)g(that)f(will)i(nev)o(er)f(arriv)o(e.)22 b(If)16 b(y)o(ou)150
2095 y(de\014ne)f(these,)g(they)f(will)i(automatically)e(b)q(e)h(used)g(in)g
FD(SET)p 1171 2095 15 2 v 17 w(INTR)f FH(to)f(mak)o(e)h(y)o(our)f(driv)o(er)i
(time)g(out.)k(Of)150 2159 y(course,)f(y)o(our)f(driv)o(er)h(will)h(ha)o(v)o
(e)f(to)f(b)q(e)h(able)g(to)f(handle)i(the)f(p)q(ossibilit)o(y)i(of)d(b)q
(eing)i(timed)f(out)g(b)o(y)f(a)150 2223 y(timer.)j(See)c(section)g(??)21
b(for)14 b(an)h(explanation)i(of)d(ho)o(w)h(to)g(do)g(this.)150
2372 y FC(1.5.1.2)54 b(Recognizing)20 b(PC)d(standard)i(partitions)150
2489 y([Insp)q(ect)j(the)g(routines)h(in)f(genhd.c)g(and)g(include)h
(detailed,)h(correct)f(instructions)h(on)150 2554 y(ho)o(w)g(to)i(use)e(them)
h(to)g(allo)o(w)h(y)o(our)f(device)g(to)g(use)f(the)i(standard)g(dos)e
(partitioni)q(ng)p eop
%%Page: 26 35
26 34 bop 150 -84 1800 3 v 150 -100 a FC(1.5.)42 b(Blo)q(c)o(k)18
b(Device)g(Driv)o(ers)1148 b FH(26)150 88 y FC(sc)o(heme.])150
242 y Fp(1.5.2)55 b(The)19 b(Bu\013er)e(Cac)n(he)150 359 y
FC([Here,)28 b(it)d(should)g(b)q(e)g(explained)g(brie\015y)g(ho)o(w)f
FD(ll)p 1205 359 15 2 v 17 w(rw)p 1270 359 V 17 w(block\(\))f
FC(is)i(called,)j(ab)q(out)e(get-)150 423 y(blk\(\))d(and)g(bread\(\))h(and)f
(breada\(\))h(and)f(b)o(write\(\),)i(etc.)39 b(A)23 b(real)h(explanation)g
(of)f(the)150 488 y(bu\013er)18 b(cac)o(he)f(is)g(reserv)o(ed)f(for)i(the)f
(VFS)g(reference)h(section,)g(where)f(something)g(on)g(the)150
552 y(complexit)o(y)g(order)i(of)f(Bac)o(h's)g(treatmen)o(t)g(of)g(the)f
(bu\013er)i(cac)o(he)f(should)f(exist.)221 640 y(F)l(or)k(no)o(w,)h(w)o(e)f
(assume)f(that)i(the)g(reader)g(understands)g(the)g(concepts)f(b)q(ehind)i
(the)150 704 y(bu\013er)d(cac)o(he.)27 b(If)18 b(y)o(ou)g(are)i(a)e(reader)i
(and)f(don't,)i(please)e(email)g(me)f(and)h(I'll)h(help)f(y)o(ou,)150
769 y(whic)o(h)f(will)g(also)g(help)g(me)f(put)h(m)o(y)e(though)o(ts)i
(together)h(for)f(that)g(section.])150 922 y Fp(1.5.3)55 b(The)19
b(Strategy)e(Routine)150 1039 y FH(All)d(reading)f(and)f(writing)h(of)f(blo)q
(c)o(ks)h(is)g(done)g(through)f(the)g FC(strategy)j(routine)p
FH(.)21 b(This)13 b(routine)g(tak)o(es)150 1103 y(no)19 b(argumen)o(ts)f(and)
h(returns)g(nothing,)h(but)f(it)g(kno)o(ws)g(where)g(to)f(\014nd)i(a)f(list)h
(of)e(requests)h(for)g(I/O)150 1168 y(\()p FD(CURRENT)p FH(,)12
b(de\014ned)j(b)o(y)e(default)i(as)e FD(blk)p 858 1168 V 17
w(dev[MAJOR)p 1091 1168 V 16 w(NR].current)p 1371 1168 V 15
w(request)p FH(\),)g(and)g(kno)o(ws)g(ho)o(w)h(to)150 1232
y(get)e(data)g(from)g(the)h(device)h(in)o(to)f(the)g(blo)q(c)o(ks.)19
b(It)13 b(is)g(called)i(with)e(in)o(terrupts)g FC(disabled)g
FH(so)g(as)f(to)g(a)o(v)o(oid)150 1297 y(race)20 b(conditions,)h(and)f(is)g
(resp)q(onsible)i(for)d(turning)h(on)g(in)o(terrupts)g(with)g(a)f(call)i(to)e
FD(sti\(\))g FH(b)q(efore)150 1361 y(returning.)221 1449 y(The)12
b(strategy)f(routine)h(\014rst)g(calls)h(the)f FD(INIT)p 1000
1449 V 17 w(REQUEST)f FH(macro,)h(whic)o(h)h(mak)o(es)e(sure)i(that)e
(requests)150 1513 y(are)i(really)h(on)f(the)g(request)g(list)g(and)h(do)q
(es)f(some)g(other)f(sanit)o(y)h(c)o(hec)o(king.)20 b FD(add)p
1535 1513 V 17 w(request\(\))12 b FH(will)i(ha)o(v)o(e)150
1577 y(already)j(sorted)f(the)g(requests)g(in)h(the)g(prop)q(er)f(order)h
(according)f(to)g(the)g(elev)m(ator)h(algorithm)g(\(using)150
1642 y(an)h(insertion)h(sort,)e(as)h(it)g(is)h(called)g(once)g(for)e(ev)o
(ery)h(request\),)g(so)g(the)g(strategy)e(routine)j(\\merely")150
1706 y(has)14 b(to)f(satisfy)g(the)h(request,)f(call)i FD(end)p
827 1706 V 17 w(request\(1\))p FH(,)d(whic)o(h)j(will)g(tak)o(e)e(the)h
(request)g(o\013)g(the)f(list,)i(and)150 1771 y(then)j(if)h(there)f(is)g
(still)i(another)d(request)h(on)g(the)g(list,)h(satisfy)f(it)g(and)g(call)h
FD(end)p 1574 1771 V 17 w(request\(1\))p FH(,)e(un)o(til)150
1835 y(there)e(are)g(no)g(more)g(requests)g(on)g(the)h(list,)f(at)g(whic)o(h)
h(time)f(it)h(returns.)221 1923 y(If)d(the)g(driv)o(er)g(is)g(in)o
(terrupt-driv)o(en,)i(the)e(strategy)e(routine)j(need)f(only)h(sc)o(hedule)g
(the)f(\014rst)g(request)150 1987 y(to)20 b(o)q(ccur,)i(and)e(ha)o(v)o(e)h
(the)f(in)o(terrupt-handler)i(call)g FD(end)p 1167 1987 V 17
w(request\(1\))d FH(and)h(the)h(call)h(the)e(strategy)150 2051
y(routine)e(again,)f(in)h(order)f(to)g(sc)o(hedule)i(the)e(next)g(request.)26
b(If)18 b(the)f(driv)o(er)h(is)f(not)g(in)o(terrupt-driv)o(en,)150
2116 y(the)e(strategy)f(routine)i(ma)o(y)e(not)h(return)g(un)o(til)i(all)f
(I/O)f(is)h(complete.)221 2204 y(If)f(for)g(some)f(reason)h(I/O)h(fails)g(p)q
(ermanen)o(tly)g(on)f(the)g(curren)o(t)g(request,)g FD(end)p
1585 2204 V 17 w(request\(0\))f FH(m)o(ust)150 2268 y(b)q(e)i(called)h(to)d
(destro)o(y)h(the)g(request.)221 2356 y(A)g(request)g(ma)o(y)f(b)q(e)i(for)f
(a)g(read)g(or)g(write.)k(The)d(driv)o(er)f(determines)i(whether)e(a)g
(request)g(is)h(for)e(a)150 2420 y(read)h(or)g(write)g(b)o(y)h(examining)g
FD(CURRENT->cmd)p FH(.)j(If)c FD(CURRENT->cmd)22 b(==)i(READ)p
FH(,)14 b(the)i(request)f(is)h(for)e(a)150 2485 y(read,)h(and)g(if)g
FD(CURRENT->cmd)23 b(==)g(WRITE)p FH(,)14 b(the)h(request)g(is)h(for)e(a)h
(write.)20 b(If)15 b(the)g(device)i(has)e(sep)q(erate)p eop
%%Page: 27 36
27 35 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(27)150 88 y(in)o(terrupt)13 b(routines)g(for)g
(handling)h(reads)f(and)g(writes,)g FD(SET)p 1188 88 15 2 v
16 w(INTR\()p Fv(n)p FD(\))g FH(m)o(ust)f(b)q(e)h(called)i(to)d(assure)h
(that)150 153 y(the)i(prop)q(er)h(in)o(terrupt)f(routine)h(will)h(b)q(e)f
(called.)221 241 y FC([Here)23 b(I)f(need)g(to)h(include)h(samples)e(of)g(b)q
(oth)i(a)f(p)q(olled)h(strategy)f(routine)h(and)f(an)150 305
y(in)o(terrupt-driv)o(en)h(one.)38 b(The)22 b(in)o(terrupt-driv)o(en)i(one)e
(should)h(pro)o(vide)f(sep)q(erate)h(read)150 369 y(and)18
b(write)g(in)o(terrupt)i(routines)e(to)g(sho)o(w)f(the)g(use)h(of)f
FD(SET)p 1324 369 V 17 w(INTR)p FC(.])150 523 y Fp(1.5.4)55
b(Example)16 b(Driv)n(ers)150 640 y FC([I'm)i(not)g(sure)f(this)h(b)q(elongs)
h(here)f(|)f(w)o(e'll)h(see.)24 b(I'll)19 b(lea)o(v)o(e)d(the)i(stub)g(here)g
(for)g(no)o(w.])150 817 y Fs(1.6)70 b(Supp)r(orting)23 b(F)-6
b(unctions)150 950 y FH(Here)20 b(is)g(a)f(list)i(of)e(man)o(y)g(of)g(the)h
(most)f(common)g(supp)q(orting)h(functions)h(a)o(v)m(ailable)g(to)e(the)h
(device)150 1014 y(driv)o(er)c(writer:)221 1102 y FC([Please)i(\014ll)g(in)g
(an)o(y)f(missing)h(information,)i(esp)q(ecially)f(De\014ned)f(in:)24
b(parts])150 1232 y FD(add)p 225 1232 V 17 w(request\(\))450
1296 y(static)f(void)g(add_request\(struct)f(blk_dev_struct)g(*dev,)1023
1360 y(struct)h(request)g(*)g(req\))450 1444 y FH(This)14 b(is)f(a)g(static)f
(function)i(in)g(ll)p 1006 1444 14 2 v 18 w(rw)p 1075 1444
V 16 w(blo)q(c)o(k.c,)f(and)g(cannot)g(b)q(e)h(called)g(b)o(y)f(other)g(co)q
(de.)450 1509 y(Ho)o(w)o(ev)o(er,)i(an)h(understnading)h(of)f(this)g
(function,)h(as)f(w)o(ell)h(as)e(an)h(understanding)h(of)450
1573 y FD(ll)p 501 1573 15 2 v 17 w(rw)p 566 1573 V 17 w(block\(\))p
FH(,)d(ma)o(y)g(help)j(y)o(ou)d(understand)i(the)g(strategy)d(routine.)450
1657 y(If)21 b(the)f(device)i(that)d(the)i(request)f(is)h(for)f(has)g(an)g
(empt)o(y)g(request)g(queue,)i(the)f(re-)450 1721 y(quest)15
b(is)g(put)h(on)e(the)h(queue)h(and)f(the)g(strategy)f(routine)i(is)f
(called.)21 b(Otherwise,)16 b(the)450 1786 y(prop)q(er)e(place)h(in)g(the)f
(queue)h(is)g(c)o(hosen)f(and)h(the)f(request)g(is)g(inserted)h(in)g(the)f
(queue,)450 1850 y(main)o(taining)i(prop)q(er)g(order)f(b)o(y)g(insertion)h
(sort.)450 1934 y(Prop)q(er)f(order)g(\(the)g(elev)m(ator)h(algorithm\))e(is)
i(de\014ned)h(as:)450 2037 y FC(a.)31 b FH(Reads)16 b(come)f(b)q(efore)g
(writes.)450 2118 y FC(b.)31 b FH(Lo)o(w)o(er)14 b(minor)i(n)o(um)o(b)q(ers)f
(come)g(b)q(efore)h(higher)g(minor)f(n)o(um)o(b)q(ers.)450
2199 y FC(c.)31 b FH(Lo)o(w)o(er)14 b(blo)q(c)o(k)i(n)o(um)o(b)q(ers)g(come)f
(b)q(efore)g(higher)h(blo)q(c)o(k)g(n)o(um)o(b)q(ers.)450 2301
y FC(De\014ned)i(in:)j FH(k)o(ernel/blk)p 926 2301 14 2 v 18
w(drv/ll)p 1058 2301 V 17 w(rw)p 1126 2301 V 16 w(blo)q(c)o(k.c)450
2366 y FC(See)c(also:)22 b FD(make)p 765 2366 15 2 v 16 w(request\(\))p
FH(,)14 b FD(ll)p 1072 2366 V 17 w(rw)p 1137 2366 V 17 w(block\(\))p
FH(.)150 2469 y FD(add)p 225 2469 V 17 w(timer\(\))43 b(void)23
b(add)p 644 2469 V 17 w(timer\(long)g(jiffies,)f(void)i(\(*fn\)\(void\)\))450
2553 y(#include)f(<linux/sched.h>)p eop
%%Page: 28 37
28 36 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(28)450 88 y(Causes)16 b(a)f(function)i(to)e(b)q(e)h
(executed)h(when)f(a)g(giv)o(en)g(amoun)o(t)f(of)g(time)h(has)g(passed.)450
153 y(T)l(ak)o(es)f(the)g(follo)o(wing)h(argumen)o(ts:)450
266 y FD(jiffies)132 b FH(The)15 b(n)o(um)o(b)q(er)h(of)f(ji\016es)g
(\(100ths)f(of)h(a)g(second\))g(to)g(time)g(out)g(after.)450
370 y FD(fn)252 b FH(Kernel-space)17 b(function)f(to)f(run)g(after)g(timeout)
g(has)g(o)q(ccured)450 483 y FC(Note:)21 b FH(This)15 b(is)g
FB(not)f FH(pro)q(cess-sp)q(eci\014c.)22 b(Therefore,)14 b(if)h(y)o(ou)f(w)o
(an)o(t)f(to)h(w)o(ak)o(e)f(a)i(certain)450 547 y(pro)q(cess)h(at)f(this)h
(timeout,)f(y)o(ou)g(will)i(ha)o(v)o(e)e(to)g(use)h(the)g(sleep)h(and)e(w)o
(ak)o(e)g(primitiv)o(es.)450 612 y(Also,)g(b)q(e)g(cautious,)g(as)g(the)g(k)o
(ernel)g(will)i(panic)f(if)f(o)o(v)o(er)f(64)g(timers)h(are)g(set.)k
FC([Is)e(this)450 676 y(still)25 b(true?)44 b(There)24 b(w)o(as)g(noise)g(ab)
q(out)h(dynamically)h(allo)q(cated)g(timers)450 740 y(some)17
b(time)g(ago.])450 824 y(De\014ned)h(in:)450 889 y(See)f(also:)150
992 y FD(cli\(\))180 b(#define)23 b(cli\(\))p 787 992 15 2
v 804 992 V 57 w(asm)p 893 992 V 910 992 V 951 992 V 968 992
V 93 w(volatile)p 1178 992 V 1194 992 V 57 w(\("cli"::\))450
1076 y(#include)g(<asm/system.h>)450 1160 y FH(Prev)o(en)o(ts)14
b(in)o(terrupts)i(from)e(b)q(eing)i(ac)o(kno)o(wledged.)k FD(cli)15
b FH(stands)g(for)f(\\CLear)h(In)o(ter-)450 1224 y(rupt)g(enable".)450
1308 y FC(See)i(also:)22 b FD(sti\(\))150 1412 y(end)p 225
1412 V 17 w(request\(\))450 1476 y(static)h(void)g(end)p 811
1476 V 17 w(request\(int)f(uptodate\))450 1624 y(#include)h("blk.h")450
1708 y FH(Called)16 b(when)g(a)f(request)g(has)g(b)q(een)i(satis\014ed)e(or)g
(ab)q(orted.)20 b(T)l(ak)o(es)15 b(one)g(argumen)o(t:)450 1822
y FD(uptodate)108 b FH(If)15 b(not)g(equal)h(to)f(0,)f(means)h(that)g(the)g
(request)g(has)g(b)q(een)i(satis\014ed.)750 1886 y(If)e(equal)h(to)f(0,)f
(means)i(that)e(the)h(request)h(has)f(not)f(b)q(een)j(satis\014ed.)450
1999 y(If)d(the)h(request)f(w)o(as)f(satis\014ed)i(\()p FD(uptodate)22
b(!=)i(0)p FH(\),)14 b FD(end)p 1437 1999 V 16 w(request\(\))f
FH(main)o(tains)i(the)450 2064 y(request)21 b(list,)h(unlo)q(c)o(ks)g(the)f
(bu\013er,)h(and)f(ma)o(y)f(arrange)g(for)g(the)h(sc)o(heduler)h(to)e(b)q(e)
450 2128 y(run)j(at)g(the)g(next)g(con)o(v)o(enien)o(t)h(time)f(\()p
FD(need)p 1262 2128 V 16 w(resched)g(=)h(1)p FH(\),)g(b)q(efore)g(w)o(aking)e
(up)450 2192 y(all)c(pro)q(cesses)g(sleeping)h(on)f(the)f FD(wait)p
1133 2192 V 17 w(for)p 1222 2192 V 17 w(request)f FH(ev)o(en)o(t,)h(whic)o(h)
i(is)f(slept)g(on)f(in)450 2257 y FD(make)p 549 2257 V 17 w(request\(\))p
FH(,)c FD(ll)p 856 2257 V 17 w(rw)p 921 2257 V 17 w(page\(\))p
FH(,)h(and)h FD(ll)p 1245 2257 V 17 w(rw)p 1310 2257 V 17 w(swap)p
1423 2257 V 17 w(file\(\))p FH(.)450 2341 y FC(Note:)32 b FH(This)21
b(function)g(is)g(a)g(static)f(function,)i(de\014ned)g(in)g(k)o(ernel/blk)p
1746 2341 14 2 v 17 w(drv/blk.h)450 2405 y(for)g(ev)o(ery)g(non-scsi)i
(device)g(that)e(includes)i(blk.h.)43 b(It)22 b(includes)j(sev)o(eral)e
(de\014nes)450 2469 y(dep)q(enden)o(t)17 b(on)f(static)f(device)i
(information,)e(suc)o(h)h(as)f(the)h(device)h(n)o(um)o(b)q(er.)k(This)16
b(is)450 2534 y(marginally)g(faster)f(than)g(a)f(normal)i(c)f(function)h
(whic)o(h)g(is)g(more)f(generic.)p eop
%%Page: 29 38
29 37 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(29)450 88 y FC(De\014ned)18 b(in:)j
FH(k)o(ernel/blk)p 926 88 14 2 v 18 w(drv/blk.h)450 153 y FC(See)c(also:)22
b FD(ll)p 717 153 15 2 v 17 w(rw)p 782 153 V 17 w(block\(\))p
FH(,)13 b FD(add)p 1065 153 V 17 w(request\(\))p FH(,)h FD(make)p
1421 153 V 16 w(request\(\))p FH(.)150 256 y FD(free)p 249
256 V 17 w(irq\(\))67 b(void)23 b(free)p 668 256 V 17 w(irq\(unsigned)f(int)i
(irq\))450 340 y(#include)f(<linux/sched.h>)450 424 y FH(F)l(rees)13
b(an)g(irq)h(previously)h(aquired)f(with)f FD(request)p 1343
424 V 16 w(irq\(\))g FH(or)g FD(irqaction\(\))p FH(.)k(T)l(ak)o(es)450
488 y(one)e(argumen)o(t:)450 602 y FD(irq)228 b FH(in)o(terrupt)15
b(lev)o(el)i(to)e(free.)450 715 y FC(De\014ned)j(in:)450 779
y(See)f(also:)22 b FD(request)p 837 779 V 16 w(irq\(\))p FH(,)14
b FD(irqaction\(\))p FH(.)150 883 y FD(get)p 225 883 V 17 w(fs*\(\))91
b(inline)23 b(unsigned)g(char)g(get)p 1026 883 V 17 w(fs)p
1091 883 V 17 w(byte\(const)f(char)i(*)f(addr\))450 947 y(inline)g(unsigned)g
(short)g(get)p 1050 947 V 17 w(fs)p 1115 947 V 17 w(word\(const)f(unsigned)h
(short)g(*)h(addr\))450 1012 y(inline)f(unsigned)g(long)g(get)p
1026 1012 V 17 w(fs)p 1091 1012 V 17 w(long\(const)f(unsigned)h(long)g
(*addr\))450 1096 y(#include)g(<asm/segment.h>)450 1179 y FH(Allo)o(ws)16
b(a)f(driv)o(er)g(to)g(access)g(data)g(in)h(user)f(space,)g(whic)o(h)h(is)g
(in)g(a)f(di\013eren)o(t)h(segmen)o(t)450 1244 y(than)f(the)g(k)o(ernel.)21
b(When)16 b(en)o(tering)f(the)g(k)o(ernel)h(through)f(a)g(system)g(call,)h(a)
f(selector)450 1308 y(for)e(the)h(curren)o(t)f(user)h(space)g(segmen)o(t)g
(is)g(put)g(in)g(the)g(fs)g(segmen)o(t)f(register,)g(th)o(us)h(the)450
1373 y(names.)450 1456 y FC(Note:)20 b FH(these)12 b(functions)h(ma)o(y)f
(cause)h(implicit)h(I/O,)f(if)g(the)f(memory)g(b)q(eing)h(accessed)450
1521 y(has)k(b)q(een)h(sw)o(app)q(ed)f(out,)f(and)h(therefore)g(pre-emption)g
(ma)o(y)f(o)q(ccur)i(at)e(this)h(p)q(oin)o(t.)450 1585 y(Do)h(not)h(include)i
(these)f(functions)f(in)h(critical)h(sections)e(of)g(y)o(our)f(co)q(de)i
(unless)g(the)450 1650 y(critical)d(sections)e(are)g(protected)g(b)o(y)h
FD(cli\(\))p FH(/)p FD(sti\(\))d FH(pairs.)450 1733 y(These)j(functions)g
(tak)o(e)e(one)h(argumen)o(t:)450 1847 y FD(addr)204 b FH(Address)16
b(to)e(get)h(data)f(from.)450 1973 y FC(Returns:)103 b FH(Data)14
b(at)h(that)f(o\013set)h(in)h(the)g(fs)f(segmen)o(t.)450 2098
y FC(De\014ned)j(in:)450 2163 y(See)f(also:)22 b FD(memcpy)p
813 2163 V 16 w(*fs\(\))p FH(,)14 b FD(put)p 1048 2163 V 17
w(fs*\(\))p FH(,)g FD(cli\(\))p FH(,)g FD(sti\(\))p FH(.)150
2266 y FD(inb\(\),)23 b(inb)p 392 2266 V 17 w(p\(\))450 2330
y(inline)g(unsigned)g(int)g(inb\(unsigned)f(short)i(port\))450
2395 y(inline)f(unsigned)g(int)g(inb)p 1002 2395 V 17 w(p\(unsigned)g(short)g
(port\))450 2479 y(#include)g(<asm/io.h>)p eop
%%Page: 30 39
30 38 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(30)450 88 y(Reads)13 b(a)g(b)o(yte)f(from)g(a)h(p)q
(ort.)18 b FD(inb\(\))12 b FH(go)q(es)h(as)f(fast)g(as)g(it)h(can,)g(while)i
FD(inb)p 1723 88 15 2 v 16 w(p\(\))e FH(pauses)450 153 y(b)q(efore)k
(returning.)24 b(Some)16 b(devices)i(are)e(happier)i(if)f(y)o(ou)f(don't)g
(read)g(from)g(them)g(as)450 217 y(fast)e(as)h(p)q(ossible.)22
b(Both)15 b(functions)h(tak)o(e)e(one)i(argumen)o(t:)450 330
y FD(port)204 b FH(P)o(ort)14 b(to)h(read)g(b)o(yte)g(from.)450
451 y FC(Returns:)103 b FH(The)12 b(b)o(yte)g(is)h(returned)f(in)h(the)f(lo)o
(w)g(b)o(yte)g(of)g(the)g(32-bit)g(in)o(teger,)h(and)750 515
y(the)k(3)g(high)g(b)o(ytes)g(are)g(un)o(used,)g(and)g(ma)o(y)g(b)q(e)g
(garbage.)24 b FC([Or)d(are)750 580 y(they)c(cleared?)25 b(Find)18
b(this)g(out.])450 700 y(De\014ned)g(in:)450 764 y(See)f(also:)22
b FD(outb\(\))p FH(,)14 b FD(outb)p 936 764 V 16 w(p\(\))p
FH(.)150 868 y FD(irqaction\(\))36 b(int)23 b(irqaction\(unsigned)f(int)h
(irq,)h(struct)f(sigaction)f(*new\))450 952 y(#include)h(<linux/sched.h>)450
1036 y FH(Hardw)o(are)16 b(in)o(terrupts)h(are)g(really)h(a)f(lot)g(lik)o(e)h
(signals.)26 b(Therefore,)17 b(it)g(mak)o(es)f(sense)450 1100
y(to)i(b)q(e)h(able)h(to)e(register)h(an)f(in)o(terrupt)h(lik)o(e)h(a)e
(signal.)32 b(The)18 b FD(sa)p 1595 1100 V 17 w(restorer\(\))g
FH(\014eld)450 1164 y(of)h(the)h FD(struct)j(sigaction)c FH(is)h(not)f(used,)
i(but)f(otherwise)g(it)g(is)h(the)e(same.)34 b(The)450 1229
y(in)o(t)16 b(argumen)o(t)f(to)g(the)h FD(sa.handler\(\))e
FH(function)i(ma)o(y)f(mean)h(di\013eren)o(t)h(things,)e(de-)450
1293 y(p)q(ending)h(on)e(whether)g(or)g(not)g(the)g(IR)o(Q)h(is)g(installed)h
(with)f(the)f FD(SA)p 1624 1293 V 17 w(INTERRUPT)f FH(\015ag.)450
1358 y(If)j(it)h(is)f(not)g(installed)i(with)e(the)h FD(SA)p
1089 1358 V 16 w(INTERRUPT)e FH(\015ag,)h(then)g(the)g(argumen)o(t)g(passed)
450 1422 y(to)f(the)h(handler)g(is)h(a)e(p)q(oin)o(ter)h(to)f(a)g(register)h
(structure,)f(and)h(if)g(it)g(is)g(installed)i(with)450 1486
y(the)c FD(SA)p 578 1486 V 17 w(INTERRUPT)e FH(\015ag,)h(then)i(the)e
(argumen)o(t)g(passed)h(is)g(the)g(n)o(um)o(b)q(er)g(of)g(the)f(IR)o(Q.)450
1551 y(F)l(or)18 b(an)h(example)h(of)f(handler)h(set)f(to)f(use)i(the)f
FD(SA)p 1358 1551 V 17 w(INTERRUPT)e FH(\015ag,)j(lo)q(ok)f(at)f(ho)o(w)450
1615 y FD(rs)p 501 1615 V 17 w(interrupt\(\))c FH(is)h(installed)i(in)f
FA(:)8 b(:)g(:)e FH(/k)o(ernel/c)o(hr)p 1363 1615 14 2 v 17
w(drv/serial.c)450 1699 y(The)19 b FD(SA)p 598 1699 15 2 v
17 w(INTERRUPT)f FH(\015ag)g(is)i(used)f(to)g(determine)h(whether)f(or)f(not)
h(the)g(in)o(terrupt)450 1763 y(should)g(b)q(e)g(a)f(\\fast")f(in)o(terrupt.)
30 b(Normally)l(,)19 b(and)f(for)g(all)h(in)o(terrupts)g(installed)h(b)o(y)
450 1828 y FD(request)p 621 1828 V 16 w(irq\(\))p FH(,)11 b(up)q(on)g(return)
f(from)g(the)g(in)o(terrupt,)i FD(need)p 1500 1828 V 16 w(resched)p
FH(,)e(a)h(global)g(\015ag,)450 1892 y(is)18 b(c)o(hec)o(k)o(ed.)26
b(If)18 b(it)f(is)h(set)f(\()p FG(6)p FH(=)f(0\),)h(then)g
FD(schedule\(\))f FH(is)i(run,)g(whic)o(h)g(ma)o(y)e(sc)o(hedule)450
1956 y(another)k(pro)q(cess)i(to)e(run.)37 b(They)21 b(are)g(also)g(run)g
(with)g(all)h(other)e(in)o(terrupts)i(still)450 2021 y(enabled.)f(Ho)o(w)o
(ev)o(er,)13 b(b)o(y)h(setting)g(the)g FD(sigaction)f FH(structure)g(mem)o(b)
q(er)h FD(sa)p 1762 2021 V 17 w(flags)g FH(to)450 2085 y FD(SA)p
501 2085 V 17 w(INTERRUPT)p FH(.)450 2169 y FD(irqaction\(\))g
FH(tak)o(es)g(t)o(w)o(o)g(argumen)o(ts:)450 2282 y FD(irq)228
b FH(The)15 b(n)o(um)o(b)q(er)h(of)f(the)g(IR)o(Q)h(the)f(driv)o(er)h(wishes)
g(to)e(acquire.)450 2386 y FD(new)228 b FH(A)15 b(p)q(oin)o(ter)h(to)e(a)h
(sigaction)h(struct.)450 2489 y FC(Returns:)103 b FD(-EBUSY)14
b FH(if)i(the)f(in)o(terrupt)h(has)f(already)g(b)q(een)i(acquired,)750
2554 y FD(-EINVAL)d FH(if)i FD(sa.handler\(\))d FH(is)j(NULL,)p
eop
%%Page: 31 40
31 39 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(31)750 88 y(0)15 b(on)g(success.)450
202 y FC(De\014ned)j(in:)450 266 y(See)f(also:)22 b FD(request)p
837 266 15 2 v 16 w(irq\(\),)h(free)p 1116 266 V 17 w(irq\(\))150
370 y(IS)p 201 370 V 17 w(*\(inode\))43 b(IS)p 501 370 V 17
w(RDONLY\(inode\))22 b(\(\(inode\)->i)p 1116 370 V 16 w(flags)h(&)h(MS)p
1371 370 V 16 w(RDONLY\))450 434 y(IS)p 501 434 V 17 w(NOSUID\(inode\))e
(\(\(inode\)->i)p 1116 434 V 16 w(flags)h(&)h(MS)p 1371 434
V 16 w(NOSUID\))450 498 y(IS)p 501 498 V 17 w(NODEV\(inode\))e
(\(\(inode\)->i)p 1092 498 V 16 w(flags)h(&)h(MS)p 1347 498
V 17 w(NODEV\))450 563 y(IS)p 501 563 V 17 w(NOEXEC\(inode\))e
(\(\(inode\)->i)p 1116 563 V 16 w(flags)h(&)h(MS)p 1371 563
V 16 w(NOEXEC\))450 627 y(IS)p 501 627 V 17 w(SYNC\(inode\))e(\(\(inode\)->i)
p 1068 627 V 16 w(flags)h(&)h(MS)p 1323 627 V 17 w(SYNC\))450
711 y(#include)f(<linux/fs.h>)450 795 y FH(These)14 b(\014v)o(e)f(test)f(to)h
(see)g(if)h(the)f(ino)q(de)i(is)e(on)g(a)g(\014lesystem)h(moun)o(ted)f(the)g
(corresp)q(ond-)450 859 y(ing)j(\015ag.)150 963 y FD(kfree*\(\))108
b(#define)23 b(kfree\(x\))g(kfree)p 979 963 V 16 w(s\(\(x\),)g(0\))450
1027 y(void)g(kfree)p 692 1027 V 17 w(s\(void)g(*)h(obj,)f(int)g(size\))450
1111 y(#include)g(<linux/kernel.h>)450 1195 y FH(F)l(ree)17
b(memory)e(previously)j(allo)q(cated)g(with)f FD(kmalloc\(\))p
FH(.)22 b(There)17 b(are)f(t)o(w)o(o)f(p)q(ossible)450 1259
y(argumen)o(ts:)450 1373 y FD(obj)228 b FH(P)o(oin)o(ter)15
b(to)f(k)o(ernel)i(memory)f(to)g(free.)450 1476 y FD(size)204
b FH(T)l(o)19 b(sp)q(eed)h(this)f(up,)h(if)f(y)o(ou)g(kno)o(w)f(the)h(size,)i
(use)e FD(kfree)p 1773 1476 V 16 w(s\(\))g FH(and)750 1540
y(pro)o(vide)f(the)g(correct)f(size.)27 b(This)18 b(w)o(a)o(y)l(,)f(the)h(k)o
(ernel)g(memory)f(allo-)750 1605 y(cator)g(kno)o(ws)h(whic)o(h)h(buc)o(k)o
(et)g(cac)o(he)f(the)h(ob)s(ject)e(b)q(elongs)j(to,)e(and)750
1669 y(do)q(esn't)f(ha)o(v)o(e)g(to)g(searc)o(h)h(all)g(of)f(the)h(buc)o(k)o
(ets.)26 b(\(F)l(or)17 b(more)g(details)750 1733 y(on)e(this)h(terminology)l
(,)f(read)g FA(:)8 b(:)g(:)e FH(/lib/mallo)q(c.c.)450 1847
y FC(De\014ned)18 b(in:)450 1911 y(See)f(also:)22 b FD(kmalloc\(\))p
FH(.)150 2015 y FD(kmalloc\(\))84 b(void)23 b(*)h(kmalloc\(unsigned)e(int)h
(len,)g(int)h(priority\))450 2099 y(#include)f(<linux/kernel.h>)450
2182 y FH(Allo)q(cates)18 b(a)e(c)o(h)o(unk)h(of)f(memory)g(no)g(larger)h
(than)f(4096)g(b)o(ytes,)g(and)h(whic)o(h)g(will)h(b)q(e)450
2247 y(allo)q(cated)i(in)h(c)o(h)o(unks)f(whic)o(h)g(are)f(p)q(o)o(w)o(ers)g
(of)g(t)o(w)o(o.)31 b FD(kmalloc\(\))19 b FH(tak)o(es)f(t)o(w)o(o)g(argu-)450
2311 y(men)o(ts:)450 2424 y FD(len)228 b FH(Length)15 b(of)f(memory)h(to)f
(allo)q(cate.)20 b(Must)14 b(not)h(exceed)g(4096,)f(or)g(the)750
2489 y(k)o(ernel)22 b(will)g(complain)g(\\kmallo)q(c)g(called)h(with)e(imp)q
(ossibly)i(large)750 2553 y(argumen)o(t".)p eop
%%Page: 32 41
32 40 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(32)450 88 y FD(priority)108 b(GFP)p
825 88 15 2 v 17 w(KERNEL)9 b FH(or)h FD(GFP)p 1118 88 V 16
w(ATOMIC)p FH(.)f(If)i FD(GFP)p 1413 88 V 17 w(KERNEL)e FH(is)h(c)o(hosen,)i
FD(kmalloc\(\))750 153 y FH(ma)o(y)g(sleep,)i(allo)o(wing)g(pre-emption)g(to)
e(o)q(ccur.)20 b(This)13 b(is)h(the)f(normal)750 217 y(w)o(a)o(y)19
b(of)g(calling)i FD(kmalloc\(\))p FH(.)32 b(Ho)o(w)o(ev)o(er,)20
b(there)g(are)f(cases)h(where)750 281 y(it)f(is)f(b)q(etter)h(to)e(return)i
(immediately)h(if)e(no)h(pages)f(are)g(a)o(v)m(ailable,)750
346 y(without)c(attempting)f(to)g(sleep)i(to)e(\014nd)h(one.)19
b(One)c(of)e(the)h(places)g(in)750 410 y(whic)o(h)k(this)g(is)h(true)e(is)h
(in)h(the)e(sw)o(apping)h(co)q(de,)h(b)q(ecause)f(it)g(could)750
475 y(cause)h(race)g(conditions,)h(and)f(another)g(in)g(the)g(net)o(w)o
(orking)g(co)q(de,)750 539 y(where)h(things)g(can)g(happ)q(en)h(at)e(m)o(uc)o
(h)h(faster)f(sp)q(eed)i(that)e(things)750 603 y(could)d(b)q(e)f(handled)h(b)
o(y)e(sw)o(apping)h(to)f(disk)i(to)e(mak)o(e)g(space)h(for)f(giv-)750
668 y(ing)20 b(the)f(net)o(w)o(orking)g(co)q(de)g(more)g(memory)l(.)31
b FC([Another)24 b(reason)750 732 y(for)g(using)g FD(GFP)p
1055 732 V 16 w(ATOMIC)f FC(is)g(if)h(it)g(is)g(b)q(eing)g(called)h(from)f
(an)750 796 y(in)o(terrupt,)30 b(when)25 b(y)o(ou)g(cannot)i(sleep.)48
b(I)25 b(ha)o(v)o(e)g(not)h(y)o(et)750 861 y(c)o(hec)o(k)o(ed)c(to)i(see)e
(if)i(this)g(is)f(the)h(case)f(in)h(either)h(of)e(these)750
925 y(examples,)18 b(but)f(I)h(susp)q(ect)f(it)i(migh)o(t.])450
1029 y(Returns:)103 b FD(NULL)15 b FH(on)g(failure.)750 1093
y(P)o(oin)o(ter)g(to)f(allo)q(cated)j(memory)d(on)h(success.)450
1206 y FC(De\014ned)j(in:)450 1271 y(See)f(also:)22 b FD(kfree\(\))150
1374 y(ll)p 201 1374 V 17 w(rw)p 266 1374 V 17 w(block\(\))450
1438 y(void)h(ll)p 620 1438 V 17 w(rw)p 685 1438 V 17 w(block\(int)g(rw,)g
(int)h(nr,)f(struct)g(buffer)p 1538 1438 V 17 w(head)g(*bh[]\))450
1522 y(#include)g(<linux/fs.h>)450 1606 y FH(No)15 b(device)h(driv)o(er)g
(will)g(ev)o(er)f(call)h(this)g(co)q(de:)k(it)15 b(is)h(called)h(only)e
(through)g(the)g(bu\013er)450 1671 y(cac)o(he.)k(Ho)o(w)o(ev)o(er,)12
b(an)h(understanding)h(of)f(this)g(function)h(ma)o(y)e(help)i(y)o(ou)e
(understnad)450 1735 y(the)j(function)h(of)f(the)g(strategy)f(routine.)450
1819 y(After)k(sanit)o(y)h(c)o(hec)o(king,)h(if)f(there)g(are)f(no)h(p)q
(ending)h(requests)f(on)f(the)h(device's)h(re-)450 1883 y(quest)f(queue,)i
FD(ll)p 773 1883 V 17 w(rw)p 838 1883 V 17 w(block\(\))d FH(\\plugs")h(the)g
(queue)h(so)f(that)f(the)h(requests)g(don't)450 1948 y(go)e(out)h(un)o(til)h
(all)g(the)f(requests)g(are)f(in)i(the)f(queue,)h(sorted)f(b)o(y)g(the)g
(elev)m(ator)g(algo-)450 2012 y(rithm.)32 b FD(make)p 705 2012
V 17 w(request\(\))18 b FH(is)i(then)f(called)i(for)e(eac)o(h)g(request.)32
b(If)19 b(the)h(queue)g(had)450 2076 y(to)d(b)q(e)i(plugged,)g(then)f(the)g
(strategy)f(routine)i(for)e(that)g(device)i(is)g(not)e(activ)o(e,)i(and)450
2141 y(it)e(is)g(called,)h FC(with)i(in)o(terrupts)h(disabled.)30
b(It)19 b(is)g(the)g(resp)q(onsibilit)o(y)i(of)f(the)450 2205
y(strategy)e(routine)h(to)f(re-enable)h(in)o(terrupts.)450
2289 y(De\014ned)f(in:)j FH(k)o(ernel/blk)p 926 2289 14 2 v
18 w(drv/ll)p 1058 2289 V 17 w(rw)p 1126 2289 V 16 w(blo)q(c)o(k.c)450
2353 y FC(See)c(also:)22 b FD(make)p 765 2353 15 2 v 16 w(request\(\))p
FH(,)14 b FD(add)p 1096 2353 V 17 w(request\(\))p FH(.)150
2457 y FD(MAJOR\(\))132 b(#define)23 b(MAJOR\(a\))g
(\(\(\(unsigned\)\(a\)\)>>8\))450 2541 y(#include)g(<linux/fs.h>)p
eop
%%Page: 33 42
33 41 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(33)450 88 y(This)18 b(tak)o(es)f(a)h(16)f(bit)h
(device)h(n)o(um)o(b)q(er)f(and)g(giv)o(es)g(the)g(asso)q(ciated)f(ma)s(jor)g
(n)o(um)o(b)q(er)450 153 y(b)o(y)e(shifting)h(o\013)g(the)f(minor)g(n)o(um)o
(b)q(er.)450 237 y FC(See)i(also:)22 b FD(MINOR\(\))p FH(.)150
340 y FD(make)p 249 340 15 2 v 17 w(request\(\))450 405 y(static)h(void)g
(make)p 835 405 V 17 w(request\(int)f(major,)h(int)h(rw,)f(struct)g(buffer)p
1807 405 V 17 w(head)g(*bh\))450 488 y FH(This)14 b(is)f(a)g(static)f
(function)i(in)g(ll)p 1006 488 14 2 v 18 w(rw)p 1075 488 V
16 w(blo)q(c)o(k.c,)f(and)g(cannot)g(b)q(e)h(called)g(b)o(y)f(other)g(co)q
(de.)450 553 y(Ho)o(w)o(ev)o(er,)i(an)h(understnading)h(of)f(this)g
(function,)h(as)f(w)o(ell)h(as)e(an)h(understanding)h(of)450
617 y FD(ll)p 501 617 15 2 v 17 w(rw)p 566 617 V 17 w(block\(\))p
FH(,)d(ma)o(y)g(help)j(y)o(ou)d(understand)i(the)g(strategy)d(routine.)450
701 y FD(make)p 549 701 V 17 w(request\(\))f FH(\014rst)h(c)o(hec)o(ks)g(to)g
(see)h(if)g(the)f(request)g(is)h(readahead)g(or)f(writeahead)450
765 y(and)19 b(the)h(bu\013er)g(is)g(lo)q(c)o(k)o(ed.)33 b(If)19
b(so,)h(it)f(simply)i(ignores)e(the)h(request)f(and)g(returns.)450
830 y(Otherwise,)e(it)f(lo)q(c)o(ks)g(the)g(bu\013er)h(and,)f(except)h(for)e
(SCSI)i(devices,)g(c)o(hec)o(ks)f(to)f(mak)o(e)450 894 y(sure)k(that)f(write)
i(requests)f(don't)f(\014ll)j(the)e(queue,)h(as)f(read)g(requests)g(should)h
(tak)o(e)450 959 y(precedence.)450 1042 y(If)15 b(no)f(spaces)g(are)g(a)o(v)m
(ailable)i(in)f(the)g(queue,)g(and)f(the)g(request)h(is)g(neither)g
(readahead)450 1107 y(nor)e(writeahead,)h FD(make)p 872 1107
V 17 w(request\(\))e FH(sleeps)j(on)e(the)h(ev)o(en)g FD(wait)p
1581 1107 V 16 w(for)p 1669 1107 V 17 w(request)p FH(,)f(and)450
1171 y(tries)18 b(again)g(when)h(w)o(ok)o(en.)27 b(When)19
b(a)f(space)g(in)h(the)f(queue)h(is)f(found,)h(the)f(request)450
1236 y(information)23 b(is)g(\014lled)i(in)e(and)g FD(add)p
1107 1236 V 17 w(request\(\))e FH(is)i(called)i(to)d(actually)h(add)g(the)450
1300 y(request)15 b(to)g(the)g(queue.)450 1384 y FC(De\014ned)j(in:)j
FH(k)o(ernel/blk)p 926 1384 14 2 v 18 w(drv/ll)p 1058 1384
V 17 w(rw)p 1126 1384 V 16 w(blo)q(c)o(k.c)450 1448 y FC(See)c(also:)22
b FD(add)p 741 1448 15 2 v 17 w(request\(\))p FH(,)13 b FD(ll)p
1048 1448 V 17 w(rw)p 1113 1448 V 17 w(block\(\))p FH(.)150
1552 y FD(MINOR\(\))132 b(#define)23 b(MINOR\(a\))g(\(\(a\)&0xff\))450
1636 y(#include)g(<linux/fs.h>)450 1720 y FH(This)18 b(tak)o(es)f(a)h(16)f
(bit)h(device)i(n)o(um)o(b)q(er)e(and)g(giv)o(es)g(the)g(asso)q(ciated)g
(minor)g(n)o(um)o(b)q(er)450 1784 y(b)o(y)d(masking)g(o\013)h(the)f(ma)s(jor)
f(n)o(um)o(b)q(er.)450 1868 y FC(See)j(also:)22 b FD(MAJOR\(\))p
FH(.)150 1971 y FD(memcpy)p 297 1971 V 16 w(*fs\(\))450 2036
y(inline)h(void)g(memcpy_tofs\(void)f(*)i(to,)f(const)g(void)h(*)f(from,)1023
2100 y(unsigned)f(long)i(n\))450 2164 y(inline)f(void)g(memcpy_fromfs\(void)f
(*)h(to,)h(const)f(void)g(*)h(from,)1070 2229 y(unsigned)f(long)h(n\))450
2313 y(#include)f(<asm/segment.h>)450 2397 y FH(Copies)17 b(memory)f(b)q(et)o
(w)o(een)i(user)e(space)h(and)g(k)o(ernel)h(space)f(in)g(c)o(h)o(unks)h
(larger)e(than)450 2461 y(one)h(b)o(yte,)g(w)o(ord,)f(or)g(long.)25
b(Be)17 b(v)o(ery)f(careful)i(to)e(get)g(the)h(order)g(of)f(the)h(argumen)o
(ts)450 2525 y(righ)o(t!)p eop
%%Page: 34 43
34 42 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(34)450 88 y FC(Note:)20 b FH(these)12
b(functions)h(ma)o(y)f(cause)h(implicit)h(I/O,)f(if)g(the)f(memory)g(b)q
(eing)h(accessed)450 153 y(has)k(b)q(een)h(sw)o(app)q(ed)f(out,)f(and)h
(therefore)g(pre-emption)g(ma)o(y)f(o)q(ccur)i(at)e(this)h(p)q(oin)o(t.)450
217 y(Do)h(not)h(include)i(these)f(functions)f(in)h(critical)h(sections)e(of)
g(y)o(our)f(co)q(de)i(unless)g(the)450 281 y(critical)d(sections)e(are)g
(protected)g(b)o(y)h FD(cli\(\))p FH(/)p FD(sti\(\))d FH(pairs.)450
365 y(These)j(tak)o(e)e(three)h(argumen)o(ts:)450 479 y FD(to)252
b FH(Address)16 b(to)e(cop)o(y)h(data)g(to.)450 582 y FD(from)204
b FH(Address)16 b(to)e(cop)o(y)h(data)g(from.)450 686 y FD(n)276
b FH(Num)o(b)q(er)16 b(of)e(b)o(ytes)h(to)g(cop)o(y)l(.)450
799 y FC(De\014ned)j(in:)450 863 y(See)f(also:)22 b FD(get)p
741 863 15 2 v 17 w(fs*\(\))p FH(,)14 b FD(put)p 977 863 V
16 w(fs*\(\))p FH(,)h FD(cli\(\))p FH(,)f FD(sti\(\))p FH(.)150
967 y FD(outb\(\),)23 b(outb)p 440 967 V 17 w(p\(\))450 1031
y(inline)g(void)g(outb\(char)g(value,)g(unsigned)g(short)g(port\))450
1096 y(inline)g(void)g(outb)p 835 1096 V 17 w(p\(char)g(value,)g(unsigned)g
(short)g(port\))450 1179 y(#include)g(<asm/io.h>)450 1263 y
FH(W)l(rites)12 b(a)g(b)o(yte)h(to)e(a)h(p)q(ort.)19 b FD(outb\(\))11
b FH(go)q(es)i(as)f(fast)f(as)h(it)h(can,)f(while)i FD(outb)p
1723 1263 V 17 w(p\(\))e FH(pauses)450 1328 y(b)q(efore)h(returning.)19
b(Some)13 b(devices)h(are)e(happier)i(if)f(y)o(ou)f(don't)g(write)g(to)g
(them)h(as)f(fast)450 1392 y(as)j(p)q(ossible.)21 b(Both)15
b(functions)h(tak)o(e)f(t)o(w)o(o)f(argumen)o(ts:)450 1505
y FD(value)180 b FH(The)15 b(b)o(yte)g(to)g(write.)450 1609
y FD(port)204 b FH(P)o(ort)14 b(to)h(write)g(b)o(yte)g(to.)450
1722 y FC(De\014ned)j(in:)450 1787 y(See)f(also:)22 b FD(inb\(\))p
FH(,)14 b FD(inb)p 888 1787 V 17 w(p\(\))p FH(.)150 1890 y
FD(printk\(\))108 b(int)23 b(printk\(const)g(char*)g(fmt,)g(...\))450
1974 y(#include)g(<linux/kernel.h>)450 2058 y(printk\(\))14
b FH(is)i(a)e(v)o(ersion)i(of)e FD(printf\(\))g FH(for)h(the)g(k)o(ernel,)g
(with)h(some)f(restrictions.)20 b(It)450 2122 y(cannot)13 b(handle)h
(\015oats,)e(and)h(has)g(a)g(few)g(other)f(limitations,)j(whic)o(h)e(are)g
(do)q(cumen)o(ted)450 2187 y(in)j(k)o(ernel/vsprin)o(tf.c.)k(It)c(tak)o(es)e
(a)h(v)m(ariable)i(n)o(um)o(b)q(er)e(of)g(argumen)o(ts:)450
2300 y FD(fmt)228 b FH(F)l(ormat)14 b(string,)h FD(printf\(\))f
FH(st)o(yle.)450 2403 y FD(...)228 b FH(The)15 b(rest)g(of)g(the)g(argumen)o
(ts,)f FD(printf\(\))g FH(st)o(yle.)450 2529 y FC(Returns:)103
b FH(Num)o(b)q(er)16 b(of)e(b)o(ytes)h(written.)p eop
%%Page: 35 44
35 43 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(35)750 88 y FC(Note:)39 b FD(printk\(\))22
b FH(ma)o(y)i(cause)g(implicit)i(I/O,)e(if)h(the)f(memory)-1897
b Fq(3)750 153 y FH(b)q(eing)25 b(accessed)g(has)f(b)q(een)h(sw)o(app)q(ed)g
(out,)g(and)g(therefore)f(pre-)750 217 y(emption)14 b(ma)o(y)e(o)q(ccur)h(at)
g(this)g(p)q(oin)o(t.)20 b(Also,)13 b FD(printk\(\))f FH(will)j(set)e(the)750
281 y(in)o(terrupt)18 b(enable)h(\015ag,)f(so)f FC(nev)o(er)j(use)g(it)h(in)g
(co)q(de)g(protected)750 346 y(b)o(y)c FD(cli\(\))p FC(.)j([But)e(is)g(it)g
(supp)q(osed)f(to?])450 472 y(De\014ned)h(in:)j FH(k)o(ernel/vsprin)o(tf.c,)
15 b(k)o(ernel/syslog.c)150 575 y FD(put)p 225 575 15 2 v 17
w(fs*\(\))91 b(inline)23 b(void)g(put)p 811 575 V 17 w(fs)p
876 575 V 17 w(byte\(char)g(val,)g(char)g(*addr\))450 639 y(inline)g(void)g
(put)p 811 639 V 17 w(fs)p 876 639 V 17 w(word\(short)g(val,)g(short)g
(*addr\))450 704 y(inline)g(void)g(put)p 811 704 V 17 w(fs)p
876 704 V 17 w(long\(unsigned)f(long)h(val,)h(unsigned)f(long)g(*addr\))450
788 y(#include)g(<asm/segment.h>)450 872 y FH(Allo)o(ws)17
b(a)f(driv)o(er)h(to)f(write)g(data)g(in)i(user)e(space,)h(whic)o(h)g(is)g
(in)h(a)e(di\013eren)o(t)h(segmen)o(t)450 936 y(than)e(the)g(k)o(ernel.)21
b(When)16 b(en)o(tering)f(the)g(k)o(ernel)h(through)f(a)g(system)g(call,)h(a)
f(selector)450 1000 y(for)e(the)h(curren)o(t)f(user)h(space)g(segmen)o(t)g
(is)g(put)g(in)g(the)g(fs)g(segmen)o(t)f(register,)g(th)o(us)h(the)450
1065 y(names.)450 1149 y FC(Note:)20 b FH(these)12 b(functions)h(ma)o(y)f
(cause)h(implicit)h(I/O,)f(if)g(the)f(memory)g(b)q(eing)h(accessed)450
1213 y(has)k(b)q(een)h(sw)o(app)q(ed)f(out,)f(and)h(therefore)g(pre-emption)g
(ma)o(y)f(o)q(ccur)i(at)e(this)h(p)q(oin)o(t.)450 1277 y(Do)h(not)h(include)i
(these)f(functions)f(in)h(critical)h(sections)e(of)g(y)o(our)f(co)q(de)i
(unless)g(the)450 1342 y(critical)d(sections)e(are)g(protected)g(b)o(y)h
FD(cli\(\))p FH(/)p FD(sti\(\))d FH(pairs.)450 1426 y(These)j(functions)g
(tak)o(e)e(t)o(w)o(o)g(argumen)o(ts:)450 1539 y FD(val)228
b FH(V)l(alue)16 b(to)f(write)450 1642 y FD(addr)204 b FH(Address)16
b(to)e(write)h(data)g(to.)450 1756 y FC(De\014ned)j(in:)450
1820 y(See)f(also:)22 b FD(memcpy)p 813 1820 V 16 w(*fs\(\))p
FH(,)14 b FD(get)p 1048 1820 V 17 w(fs*\(\))p FH(,)g FD(cli\(\))p
FH(,)g FD(sti\(\))p FH(.)150 1924 y FD(register)p 345 1924
V 16 w(*dev\(\))450 1988 y(int)23 b(register_chrdev\(unsigned)e(int)i(major,)
h(const)f(char)g(*name,)927 2052 y(struct)g(file_operations)f(*fops\))450
2117 y(int)h(register_blkdev\(unsigned)e(int)i(major,)h(const)f(char)g
(*name,)927 2181 y(struct)g(file_operations)f(*fops\))450 2265
y(#include)h(<linux/fs.h>)13 b(#include)23 b(<linux/errno.h>)450
2349 y FH(Registers)13 b(a)g(device)h(with)f(the)f(k)o(ernel,)i(letting)f
(the)g(k)o(ernel)h(c)o(hec)o(k)f(to)f(mak)o(e)g(sure)h(that)450
2413 y(no)18 b(other)f(driv)o(er)h(has)g(already)f(grabb)q(ed)i(the)e(same)h
(ma)s(jor)e(n)o(um)o(b)q(er.)28 b(T)l(ak)o(es)17 b(three)450
2478 y(argumen)o(ts:)p eop
%%Page: 36 45
36 44 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(36)450 88 y FD(major)180 b FH(Ma)s(jor)13
b(n)o(um)o(b)q(er)j(of)f(device)h(b)q(eing)h(registered.)450
192 y FD(name)204 b FH(Unique)19 b(string)f(iden)o(tifying)h(driv)o(er.)27
b(Not)17 b(curren)o(tly)i(used,)f(but)g(it)750 256 y(should)e(b)q(e)g(in)g
(the)f(future.)450 360 y FD(fops)204 b FH(P)o(oin)o(ter)15
b(to)f(a)h FD(file)p 1102 360 15 2 v 17 w(operations)f FH(structure)h(for)f
(that)h(device.)450 485 y FC(Returns:)103 b FD(-EINVAL)13 b
FH(if)h(ma)s(jor)e(is)i FG(\025)g FD(MAX)p 1270 485 V 16 w(CHRDEV)f
FH(or)g FD(MAX)p 1569 485 V 17 w(BLKDEV)g FH(\(de\014ned)h(in)750
550 y FD(<linux/fs.h>)p FH(\),)f(for)h(c)o(haracter)h(or)g(blo)q(c)o(k)h
(devices,)g(resp)q(ectiv)o(ely)l(.)750 614 y FD(-EBUSY)e FH(if)i(ma)s(jor)e
(device)i(n)o(um)o(b)q(er)g(has)f(already)g(b)q(een)i(allo)q(cated.)750
679 y(0)e(on)g(success.)450 804 y FC(De\014ned)j(in:)450 869
y(See)f(also:)150 972 y FD(request)p 321 972 V 16 w(irq\(\))450
1037 y(int)23 b(request)p 716 1037 V 17 w(irq\(unsigned)f(int)h(irq,)h(void)f
(\(*handler\)\(int\)\))450 1120 y(#include)g(<linux/sched.h>)450
1185 y(#include)g(<linux/errno.h>)450 1269 y FH(Request)e(an)f(IR)o(Q)h(from)
e(the)h(k)o(ernel,)i(and)e(install)i(an)e(IR)o(Q)h(in)o(terrupt)f(handler)h
(if)450 1333 y(successful.)g(T)l(ak)o(es)15 b(t)o(w)o(o)f(argumen)o(ts:)450
1446 y FD(irq)228 b FH(The)15 b(IR)o(Q)i(b)q(eing)f(requested.)450
1550 y FD(handler)132 b FH(The)11 b(handler)h(to)e(b)q(e)i(called)h(when)e
(the)g(IR)o(Q)h(o)q(ccurs.)19 b(The)11 b(argumen)o(t)750 1614
y(to)16 b(the)h(handler)i(function)e(will)i(b)q(e)f(the)f(n)o(um)o(b)q(er)g
(of)g(the)g(IR)o(Q)h(that)750 1679 y(it)d(w)o(as)g(in)o(v)o(ok)o(ed)g(to)g
(handle.)450 1804 y FC(Returns:)103 b FD(-EINVAL)14 b FH(if)i
FD(irq)f FA(>)g FH(15)g(or)f FD(handler)h FH(=)g FD(NULL)p
FH(.)750 1869 y FD(-EBUSY)f FH(if)i FD(irq)f FH(is)g(already)h(allo)q(cated.)
750 1933 y(0)f(on)g(success.)450 2059 y FC(De\014ned)j(in:)450
2123 y(See)f(also:)22 b FD(free)p 765 2123 V 16 w(irq\(\))p
FH(.)150 2227 y FD(select)p 297 2227 V 16 w(wait\(\))450 2291
y(inline)h(void)g(select_wait\(struct)f(wait_queue)g(**wait_address,)1023
2355 y(select_table)g(*p\))450 2439 y(#include)h(<linux/sched.h>)p
eop
%%Page: 37 46
37 45 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(37)450 88 y(Add)19 b(a)e(pro)q(cess)i(to)e(the)h
(prop)q(er)g FD(select)p 1189 88 15 2 v 17 w(wait)f FH(queue.)30
b(This)18 b(function)h(tak)o(es)e(t)o(w)o(o)450 153 y(argumen)o(ts:)450
266 y FD(wait)p 549 266 V 17 w(address)750 330 y FH(Address)d(of)e(a)h
FD(wait)p 1106 330 V 17 w(queue)f FH(p)q(oin)o(ter)i(to)f(add)g(to)g(the)g
(circular)h(list)g(of)750 395 y(w)o(aits.)450 498 y FD(p)276
b FH(If)12 b FD(p)g FH(is)g FD(NULL)p FH(,)f FD(select)p 1137
498 V 16 w(wait)g FH(do)q(es)i(nothing,)f(otherwise)g(the)g(curren)o(t)750
563 y(pro)q(cess)21 b(is)g(put)g(to)f(sleep.)37 b(This)22 b(should)f(b)q(e)h
(the)e FD(select)p 1817 563 V 17 w(table)750 627 y(*wait)14
b FH(v)m(ariable)j(that)e(w)o(as)f(passed)h(to)g(y)o(our)g
FD(select\(\))f FH(function.)450 740 y FC(De\014ned)k(in:)450
805 y(See)f(also:)22 b FD(*sleep)p 813 805 V 16 w(on\(\),)h(wake)p
1068 805 V 17 w(up*\(\))150 908 y(*sleep)p 297 908 V 16 w(on\(\))44
b(void)23 b(sleep)p 692 908 V 17 w(on\(struct)f(wait)p 1043
908 V 17 w(queue)h(**)h(p\))450 972 y(void)f(interruptible)p
884 972 V 16 w(sleep)p 1020 972 V 16 w(on\(struct)g(wait)p
1371 972 V 16 w(queue)h(**)f(p\))450 1056 y(#include)g(<linux/sched.h>)450
1140 y FH(Sleep)c(on)f(an)g(ev)o(en)o(t,)f(putting)h(a)g FD(wait)p
1142 1140 V 17 w(queue)f FH(en)o(try)g(in)h(the)g(list)h(so)e(that)g(the)h
(pro-)450 1205 y(cess)h(can)f(b)q(e)h(w)o(ok)o(en)f(on)h(that)e(ev)o(en)o(t.)
30 b FD(sleep)p 1276 1205 V 16 w(on\(\))18 b FH(go)q(es)g(in)o(to)h(an)f
(unin)o(teruptible)450 1269 y(sleep:)35 b(The)22 b(only)h(w)o(a)o(y)e(the)h
(pro)q(cess)h(can)f(run)h(is)f(to)g(b)q(e)h(w)o(ok)o(en)e(b)o(y)h
FD(wake)p 1828 1269 V 17 w(up\(\))p FH(.)450 1333 y FD(interruptible)p
765 1333 V 15 w(sleep)p 900 1333 V 17 w(on\(\))12 b FH(go)q(es)h(in)o(to)h
(an)f(in)o(terruptible)i(sleep)f(that)e(can)i(b)q(e)g(w)o(o-)450
1398 y(k)o(en)k(b)o(y)g(signals)h(and)f(pro)q(cess)h(timeouts)f(will)h(cause)
g(the)f(pro)q(cess)g(to)g(w)o(ak)o(e)f(up.)29 b(A)450 1462
y(call)18 b(to)f FD(wake)p 692 1462 V 16 w(up)p 756 1462 V
17 w(interruptible\(\))e FH(is)j(necessary)g(to)e(w)o(ak)o(e)g(up)i(the)f
(pro)q(cess)h(and)450 1526 y(allo)o(w)d(it)h(to)e(con)o(tin)o(ue)i(running)h
(where)e(it)g(left)h(o\013.)k(Both)15 b(tak)o(e)g(one)g(argumen)o(t:)450
1640 y FD(p)276 b FH(P)o(oin)o(ter)20 b(to)g(a)f(prop)q(er)i
FD(wait)p 1268 1640 V 17 w(queue)e FH(structure)h(that)g(records)g(the)750
1704 y(information)15 b(needed)i(to)d(w)o(ak)o(e)h(the)g(pro)q(cess.)450
1817 y FC(De\014ned)j(in:)450 1882 y(See)f(also:)22 b FD(select)p
813 1882 V 16 w(wait\(\))p FH(,)14 b FD(wake)p 1096 1882 V
17 w(up*\(\))p FH(.)150 1985 y FD(sti\(\))180 b(#define)23
b(sti\(\))p 787 1985 V 804 1985 V 57 w(asm)p 893 1985 V 910
1985 V 951 1985 V 968 1985 V 93 w(volatile)p 1178 1985 V 1194
1985 V 57 w(\("sti"::\))450 2069 y(#include)g(<asm/system.h>)450
2153 y FH(Allo)o(ws)d(in)o(terrupts)f(to)g(b)q(e)g(ac)o(kno)o(wledged.)33
b FD(sti)19 b FH(stands)f(for)h(\\SeT)g(In)o(terrupt)g(en-)450
2217 y(able".)450 2301 y FC(De\014ned)f(in:)450 2366 y(See)f(also:)22
b FD(cli\(\))p FH(.)150 2469 y FD(sys)p 225 2469 V 17 w(get*\(\))67
b(int)23 b(sys)p 620 2469 V 17 w(getpid\(void\))450 2534 y(int)g(sys)p
620 2534 V 17 w(getuid\(void\))p eop
%%Page: 38 47
38 46 bop 150 -84 1800 3 v 150 -100 a FC(1.6.)42 b(Supp)q(orting)20
b(F)l(unctions)1140 b FH(38)450 88 y FD(int)23 b(sys)p 620
88 15 2 v 17 w(getgid\(void\))450 153 y(int)g(sys)p 620 153
V 17 w(geteuid\(void\))450 217 y(int)g(sys)p 620 217 V 17 w(getegid\(void\))
450 281 y(int)g(sys)p 620 281 V 17 w(getppid\(void\))450 346
y(int)g(sys)p 620 346 V 17 w(getpgrp\(void\))450 430 y(#include)g
(<linux/sys.h>)450 514 y FH(These)13 b(system)f(calls)i(ma)o(y)d(b)q(e)j
(used)f(to)f(get)g(the)g(information)h(describ)q(ed)i(in)e(the)g(table)450
578 y(b)q(elo)o(w,)k(or)e(the)i(information)f(can)g(b)q(e)h(extracted)f
(directly)i(from)d(the)h(pro)q(cess)h(table,)450 642 y(lik)o(e)f(this:)450
707 y Fv(fo)q(o)23 b FD(=)h(current->)p Fv(pid)p FD(;)p 450
721 935 2 v 449 786 2 65 v 499 766 a(pid)p 594 786 V 49 w FH(Pro)q(cess)15
b(ID)p 1384 786 V 450 787 935 2 v 449 852 2 65 v 499 832 a
FD(uid)p 594 852 V 49 w FH(User)g(ID)p 1384 852 V 450 853 935
2 v 449 918 2 65 v 499 899 a FD(gid)p 594 918 V 49 w FH(Group)g(ID)p
1384 918 V 450 919 935 2 v 449 984 2 65 v 475 965 a FD(euid)p
594 984 V 49 w FH(E\013ectiv)o(e)h(user)g(ID)p 1384 984 V 450
985 935 2 v 449 1050 2 65 v 475 1031 a FD(egid)p 594 1050 V
49 w FH(E\013ectiv)o(e)g(group)f(ID)p 1384 1050 V 450 1052
935 2 v 449 1116 2 65 v 475 1097 a FD(ppid)p 594 1116 V 49
w FH(Pro)q(cess)g(ID)h(of)e(pro)q(cess')h(paren)o(t)g(pro)q(cess)p
1384 1116 V 450 1118 935 2 v 449 1182 2 65 v 475 1163 a FD(pgid)p
594 1182 V 49 w FH(Group)g(ID)g(of)g(pro)q(cess')g(paren)o(t)g(pro)q(cess)p
1384 1182 V 450 1184 935 2 v 450 1239 a FC(De\014ned)j(in:)150
1342 y FD(wake)p 249 1342 15 2 v 17 w(up*\(\))67 b(void)23
b(wake)p 668 1342 V 17 w(up\(struct)g(wait)p 1020 1342 V 16
w(queue)g(**)h(p\))450 1407 y(void)f(wake)p 668 1407 V 17 w(up)p
733 1407 V 17 w(interruptible\(struct)e(wait)p 1347 1407 V
17 w(queue)i(**)g(p\))450 1491 y(#include)g(<linux/sched.h>)450
1575 y FH(W)l(ak)o(es)12 b(up)h(a)f(pro)q(cess)h(that)e(has)h(b)q(een)i(put)f
(to)e(sleep)j(b)o(y)e(the)h(matc)o(hing)f FD(*sleep)p 1841
1575 V 17 w(on\(\))450 1639 y FH(function.)20 b FD(wake)p 744
1639 V 16 w(up\(\))11 b FH(can)h(b)q(e)g(used)g(to)f(w)o(ak)o(e)g(up)h(tasks)
f(in)h(a)g(queue)g(where)g(the)g(tasks)450 1703 y(ma)o(y)20
b(b)q(e)g(in)i(a)e FD(TASK)p 821 1703 V 16 w(INTERRUPTIBLE)f
FH(or)g FD(TASK)p 1324 1703 V 17 w(UNINTERRUPTIBLE)f FH(state,)i(while)450
1768 y FD(wake)p 549 1768 V 17 w(up)p 614 1768 V 17 w(interruptible\(\))8
b FH(will)j(only)g(w)o(ak)o(e)e(up)i(tasks)e(in)i(a)f FD(TASK)p
1629 1768 V 17 w(INTERRUPTIBLE)450 1832 y FH(state,)k(and)h(will)h(b)q(e)f
(insigni\014can)o(tly)j(faster)c(than)g FD(wake)p 1428 1832
V 17 w(up\(\))g FH(on)h(queues)g(that)f(ha)o(v)o(e)450 1896
y(only)i(in)o(terruptible)h(tasks.)i(These)d(tak)o(e)e(one)h(argumen)o(t:)450
2010 y FD(q)276 b FH(P)o(oin)o(ter)14 b(to)f(the)h FD(wait)p
1139 2010 V 17 w(queue)f FH(structure)h(of)g(the)g(pro)q(cess)g(to)g(b)q(e)h
(w)o(o-)750 2074 y(k)o(en.)450 2187 y FC(De\014ned)j(in:)450
2252 y(See)f(also:)22 b FD(select)p 813 2252 V 16 w(wait\(\))p
FH(,)14 b FD(*sleep)p 1144 2252 V 16 w(on\(\))p eop
%%Page: 39 48
39 47 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(39)150 88 y Fs(1.7)70
b(W)-6 b(riting)22 b(a)h(SCSI)g(Device)e(Driv)n(er)332 214
y Fj(Cop)o(yrigh)o(t)541 213 y(c)529 214 y Fg(\015)c Fj(1993)e(Ric)o(k)n(ard)
h(E.)g(F)m(aith)g(\(faith@cs.unc.edu\).)26 b(All)16 b(righ)o(ts)h(reserv)o
(ed.)28 b(P)o(er-)264 270 y(mission)14 b(is)i(gran)o(ted)h(to)f(mak)o(e)f
(and)h(distribute)h(v)o(erbatim)e(copies)h(of)g(this)h(pap)q(er)g(pro)o
(vided)f(the)264 327 y(cop)o(yrigh)o(t)d(notice)h(and)g(this)g(p)q(ermission)
f(notice)h(are)g(preserv)o(ed)i(on)e(all)f(copies.)332 384
y(This)h(is)g(\(with)h(the)g(author's)f(explicit)g(p)q(ermission\))g(a)g(mo)q
(di\014ed)f(cop)o(y)i(of)e(the)j(original)c(do)q(c-)264 441
y(umen)o(t.)22 b(If)16 b(y)o(ou)f(wish)h(to)g(repro)q(duce)h(just)f(this)g
(section,)h(y)o(ou)e(are)h(advised)g(to)g(get)g(the)g(original)264
498 y(v)o(ersion)e(b)o(y)f(ftp)h(from)e(ftp.cs.unc.edu:/pub/faith/pap)q
(ers/scsi.pap)q(er.tar.gz)150 647 y Fp(1.7.1)55 b(Wh)n(y)19
b(Y)-5 b(ou)19 b(W)-5 b(an)n(t)20 b(to)e(W)-5 b(rite)18 b(a)h(SCSI)g(Driv)n
(er)150 765 y FH(Curren)o(tly)l(,)14 b(the)f FE(Linux)g FH(k)o(ernel)h(con)o
(tains)f(driv)o(ers)h(for)f(the)g(follo)o(wing)h(SCSI)g(host)f(adapters:)19
b(Adaptec)150 829 y(1542,)c(Adaptec)i(1740,)f(F)l(uture)g(Domain)g
(TMC-1660/TMC-1680,)d(Seagate)j(ST-01/ST-02,)g(Ultra-)150 893
y(Stor)h(14F,)f(and)i(W)l(estern)f(Digital)i(WD-7000.)25 b(Y)l(ou)18
b(ma)o(y)e(w)o(an)o(t)h(to)g(write)g(y)o(our)g(o)o(wn)g(driv)o(er)h(for)f(an)
150 958 y(unsupp)q(orted)j(host)e(adapter.)31 b(Y)l(ou)19 b(ma)o(y)f(also)h
(w)o(an)o(t)f(to)g(re-write)h(or)f(up)q(date)i(one)f(of)f(the)h(existing)150
1022 y(driv)o(ers.)150 1172 y Fp(1.7.2)55 b(What)19 b(is)f(SCSI?)150
1289 y FH(The)j(forew)o(ord)f(to)h(the)g(SCSI-2)g(standard)g(draft)f([)p
FC(?)p FH(])37 b(giv)o(es)21 b(a)g(succinct)h(de\014nition)h(of)e(the)g
(Small)150 1353 y(Computer)14 b(System)g(In)o(terface)h(and)f(brie\015y)i
(explains)g(ho)o(w)e(SCSI-2)g(is)h(related)g(to)f(SCSI-1)h(and)f(CCS:)332
1459 y(The)k(SCSI)g(proto)q(col)f(is)h(designed)h(to)e(pro)o(vide)h(an)g
(e\016cien)o(t)g(p)q(eer-to-p)q(eer)h(I/O)f(bus)264 1524 y(with)11
b(up)h(to)e(8)h(devices,)i(including)h(one)e(or)e(more)h(hosts.)18
b(Data)10 b(ma)o(y)h(b)q(e)h(transferred)e(asyn-)264 1588 y(c)o(hronously)h
(at)g(rates)f(that)h(only)g(dep)q(end)i(on)e(device)i(implemen)o(tation)f
(and)g(cable)g(length.)264 1653 y(Sync)o(hronous)k(data)f(transfers)h(are)f
(supp)q(orted)i(at)e(rates)h(up)g(to)g(10)f(mega-transfers)g(p)q(er)264
1717 y(second.)41 b(With)23 b(the)f(32)g(bit)h(wide)g(data)f(transfer)f
(option,)j(data)e(rates)g(of)f(up)i(to)f(40)264 1781 y(megab)o(ytes)14
b(p)q(er)i(second)g(are)e(p)q(ossible.)332 1846 y(SCSI-2)i(includes)j
(command)d(sets)g(for)f(magnetic)h(and)h(optical)f(disks,)h(tap)q(es,)f(prin)
o(t-)264 1910 y(ers,)21 b(pro)q(cessors,)h(CD-R)o(OMs,)f(scanners,)h(medium)g
(c)o(hangers,)g(and)f(comm)o(unications)264 1974 y(devices.)332
2039 y(In)d(1985,)g(when)g(the)g(\014rst)g(SCSI)h(standard)e(w)o(as)h(b)q
(eing)h(\014nalized)h(as)e(an)g(American)264 2103 y(National)d(Standard,)g
(sev)o(eral)g(man)o(ufacturers)f(approac)o(hed)h(the)h(X3T9.2)d(T)l(ask)i
(Group.)264 2167 y(They)21 b(w)o(an)o(ted)f(to)h(increase)h(the)f(mandatory)f
(requiremen)o(ts)h(of)g(SCSI)h(and)f(to)f(de\014ne)264 2232
y(further)13 b(features)g(for)g(direct-access)i(devices.)21
b(Rather)13 b(than)h(dela)o(y)g(the)g(SCSI)g(standard,)264
2296 y(X3T9.2)d(formed)i(an)g(ad)g(ho)q(c)h(group)e(to)h(dev)o(elop)h(a)f(w)o
(orking)f(pap)q(er)i(that)e(w)o(as)g(ev)o(en)o(tually)264 2361
y(called)19 b(the)f(Common)e(Command)h(Set)h(\(CCS\).)26 b(Man)o(y)17
b(disk)i(pro)q(ducts)f(w)o(ere)f(designed)264 2425 y(using)f(this)f(w)o
(orking)g(pap)q(er)h(in)g(conjunction)g(with)f(the)h(SCSI)g(standard.)332
2489 y(In)h(parallel)g(with)g(the)f(dev)o(elopmen)o(t)h(of)f(the)g(CCS)h(w)o
(orking)e(pap)q(er,)i(X3T9.2)e(b)q(egan)264 2554 y(w)o(ork)d(on)h(an)g
(enhanced)h(SCSI)g(standard)e(whic)o(h)i(w)o(as)e(named)h(SCSI-2.)20
b(SCSI-2)14 b(included)p eop
%%Page: 40 49
40 48 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(40)264 88 y(the)18
b(results)h(of)f(the)h(CCS)f(w)o(orking)g(pap)q(er)h(and)g(extended)g(them)g
(to)e(all)j(device)g(t)o(yp)q(es.)264 153 y(It)13 b(also)h(added)h(cac)o
(hing)f(commands,)g(p)q(erformance)g(enhancemen)o(t)g(features,)g(and)g
(other)264 217 y(functions)h(that)f(X3T9.2)f(deemed)i(w)o(orth)o(while.)20
b(While)c(SCSI-2)f(has)g(gone)f(w)o(ell)i(b)q(ey)o(ond)264
281 y(the)e(original)i(SCSI)f(standard)f(\(no)o(w)f(referred)i(to)f(as)g
(SCSI-1\),)g(it)h(retains)g(a)f(high)h(degree)264 346 y(of)f(compatibilit)o
(y)j(with)f(SCSI-1)f(devices.)150 497 y FC(1.7.2.1)54 b(SCSI)17
b(phases)150 614 y FH(The)d(\\SCSI)f(bus")h(transfers)e(data)h(and)g(state)g
(information)g(b)q(et)o(w)o(een)h(in)o(terconnected)g(SCSI)g(devices.)150
679 y(A)21 b(single)h(transaction)e(b)q(et)o(w)o(een)h(an)f(\\initiator")h
(and)g(a)f(\\target")f(can)h(in)o(v)o(olv)o(e)i(up)f(to)e(8)i(distinct)150
743 y(\\phases.")27 b(These)18 b(phases)g(are)g(almost)f(en)o(tirely)i
(determined)g(b)o(y)f(the)f(target)g(\(e.g.,)g(the)g(hard)h(disk)150
808 y(driv)o(e\).)i(The)14 b(curren)o(t)g(phase)g(can)g(b)q(e)g(determined)i
(from)d(an)h(examination)g(of)g(\014v)o(e)g(SCSI)g(bus)h(signals,)150
872 y(as)g(sho)o(wn)g(in)h(T)l(able)g(1.1)e([)p FC(?)p FH(,)g(p.)h(57].)p
471 976 1159 2 v 470 1041 2 65 v 496 1021 a(-SEL)p 620 1041
V 50 w(-BSY)p 776 1041 V 51 w(-MSG)p 944 1041 V 49 w(-C/D)p
1099 1041 V 50 w(-I/O)p 1238 1041 V 50 w(PHASE)p 1628 1041
V 471 1042 1159 2 v 471 1052 V 470 1117 2 65 v 520 1097 a(HI)p
620 1117 V 104 w(HI)p 776 1117 V 126 w(?)p 944 1117 V 140 w(?)p
1099 1117 V 127 w(?)p 1238 1117 V 84 w(BUS)h(FREE)p 1628 1117
V 471 1118 1159 2 v 470 1183 2 65 v 520 1163 a(HI)p 620 1183
V 97 w(LO)p 776 1183 V 120 w(?)p 944 1183 V 140 w(?)p 1099
1183 V 127 w(?)p 1238 1183 V 84 w(ARBITRA)l(TION)p 1628 1183
V 471 1184 1159 2 v 470 1249 2 65 v 538 1229 a(I)p 620 1249
V 102 w(I&T)p 776 1249 V 110 w(?)p 944 1249 V 140 w(?)p 1099
1249 V 127 w(?)p 1238 1249 V 84 w(SELECTION)p 1628 1249 V 471
1250 1159 2 v 470 1315 2 65 v 529 1295 a(T)p 620 1315 V 94
w(I&T)p 776 1315 V 110 w(?)p 944 1315 V 140 w(?)p 1099 1315
V 127 w(?)p 1238 1315 V 84 w(RESELECTION)p 1628 1315 V 471
1316 1159 2 v 470 1381 2 65 v 520 1361 a(HI)p 620 1381 V 97
w(LO)p 776 1381 V 106 w(HI)p 944 1381 V 111 w(HI)p 1099 1381
V 97 w(HI)p 1238 1381 V 70 w(D)o(A)l(T)l(A)f(OUT)p 1628 1381
V 471 1382 1159 2 v 470 1447 2 65 v 520 1427 a(HI)p 620 1447
V 97 w(LO)p 776 1447 V 106 w(HI)p 944 1447 V 111 w(HI)p 1099
1447 V 91 w(LO)p 1238 1447 V 63 w(D)o(A)l(T)l(A)g(IN)p 1628
1447 V 471 1448 1159 2 v 470 1513 2 65 v 520 1493 a(HI)p 620
1513 V 97 w(LO)p 776 1513 V 106 w(HI)p 944 1513 V 104 w(LO)p
1099 1513 V 91 w(HI)p 1238 1513 V 70 w(COMMAND)p 1628 1513
V 471 1514 1159 2 v 470 1579 2 65 v 520 1559 a(HI)p 620 1579
V 97 w(LO)p 776 1579 V 106 w(HI)p 944 1579 V 104 w(LO)p 1099
1579 V 85 w(LO)p 1238 1579 V 63 w(ST)l(A)l(TUS)p 1628 1579
V 471 1580 1159 2 v 470 1645 2 65 v 520 1625 a(HI)p 620 1645
V 97 w(LO)p 776 1645 V 99 w(LO)p 944 1645 V 98 w(LO)p 1099
1645 V 91 w(HI)p 1238 1645 V 70 w(MESSA)o(GE)g(OUT)p 1628 1645
V 471 1646 1159 2 v 470 1711 2 65 v 520 1691 a(HI)p 620 1711
V 97 w(LO)p 776 1711 V 99 w(LO)p 944 1711 V 98 w(LO)p 1099
1711 V 85 w(LO)p 1238 1711 V 63 w(MESSA)o(GE)g(IN)p 1628 1711
V 471 1712 1159 2 v 496 1757 a Fl(I)e(=)f(Initiator)j(Asserts,)e(T)f(=)h(T)m
(arget)f(Asserts,)h(?)k(=)c(HI)g(or)g(LO)630 1854 y FH(T)l(able)j(1.1:)i
(SCSI)e(Bus)g(Phase)f(Determination)221 1994 y(Some)h(con)o(trollers)h
(\(notably)g(the)g(inexp)q(ensiv)o(e)i(Seagate)d(con)o(troller\))h(require)g
(direct)h(manipula-)150 2059 y(tion)e(of)g(the)g(SCSI)h(bus|other)g(con)o
(trollers)f(automatically)h(handle)g(these)g(lo)o(w-lev)o(el)g(details.)24
b(Eac)o(h)150 2123 y(of)15 b(the)g(eigh)o(t)g(phases)h(will)h(b)q(e)f
(describ)q(ed)h(in)f(detail.)150 2253 y(BUS)g(FREE)f(Phase)450
2317 y(The)c(BUS)h(FREE)f(phase)g(indicates)i(that)d(the)h(SCSI)h(bus)g(is)f
(idle)i(and)e(is)h(not)e(curren)o(tly)450 2381 y(b)q(eing)16
b(used.)150 2485 y(ARBITRA)l(TION)i(Phase)450 2549 y(The)c(ARBITRA)l(TION)j
(phase)d(is)h(en)o(tered)f(when)g(a)g(SCSI)h(device)g(attempts)e(to)h(gain)p
eop
%%Page: 41 50
41 49 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(41)450 88 y(con)o(trol)13
b(of)f(the)i(SCSI)f(bus.)20 b(Arbitration)13 b(can)h(start)d(only)j(if)g(the)
f(bus)g(w)o(as)g(previously)450 153 y(in)j(the)g(BUS)g(FREE)f(phase.)21
b(During)16 b(arbitration,)f(the)h(arbitrating)f(device)i(asserts)450
217 y(its)j(SCSI)h(ID)g(on)f(the)g(D)o(A)l(T)l(A)g(BUS.)36
b(F)l(or)20 b(example,)i(if)e(the)h(arbitrating)f(device's)450
281 y(SCSI)d(ID)g(is)g(2,)f(then)h(the)g(device)h(will)g(assert)e
FD(0x04)p FH(.)24 b(If)17 b(m)o(ultiple)h(devices)g(attempt)450
346 y(sim)o(ultaneous)e(arbitration,)e(the)h(device)i(with)e(the)g(highest)h
(SCSI)g(ID)f(will)i(win.)j(Al-)450 410 y(though)15 b(ARBITRA)l(TION)i(is)f
(optional)f(in)h(the)f(SCSI-1)h(standard,)e(it)i(is)f(a)g(required)450
475 y(phase)h(in)g(the)f(SCSI-2)h(standard.)150 578 y(SELECTION)g(Phase)450
642 y(After)g(ARBITRA)l(TION,)h(the)f(arbitrating)g(device)h(\(no)o(w)e
(called)j(the)e(initiator\))g(as-)450 707 y(serts)g(the)h(SCSI)g(ID)g(of)g
(the)f(target)g(on)g(the)h(D)o(A)l(T)l(A)g(BUS.)25 b(The)17
b(target,)e(if)i(presen)o(t,)450 771 y(will)i(ac)o(kno)o(wledge)f(the)g
(selection)h(b)o(y)f(raising)g(the)g(-BSY)g(line.)29 b(This)18
b(line)i(remains)450 835 y(activ)o(e)15 b(as)g(long)h(as)e(the)i(target)e(is)
h(connected)h(to)f(the)g(initiator.)150 939 y(RESELECTION)i(Phase)450
1003 y(The)d(SCSI)g(proto)q(col)f(allo)o(ws)h(a)f(device)h(to)f(disconnect)i
(from)d(the)i(bus)g(while)h(pro)q(cess-)450 1068 y(ing)i(a)f(request.)23
b(When)17 b(the)f(device)i(is)f(ready)l(,)f(it)h(reconnects)g(to)e(the)i
(host)f(adapter.)450 1132 y(The)e(RESELECTION)h(phase)e(is)h(iden)o(tical)i
(to)c(the)i(SELECTION)g(phase,)g(with)g(the)450 1196 y(exception)f(that)f(it)
h(is)f(used)h(b)o(y)f(the)h(disconnected)h(target)d(to)h(reconnect)g(to)g
(the)g(origi-)450 1261 y(nal)f(initiator.)19 b(Driv)o(ers)11
b(whic)o(h)g(do)g(not)f(curren)o(tly)i(supp)q(ort)f(RESELECTION)h(do)e(not)
450 1325 y(allo)o(w)16 b(the)g(SCSI)h(target)e(to)g(disconnect.)23
b(RESELECTION)18 b(should)f(b)q(e)f(supp)q(orted)450 1389 y(b)o(y)j(all)i
(driv)o(ers,)f(ho)o(w)o(ev)o(er,)g(so)f(that)g(m)o(ultiple)i(SCSI)f(devices)h
(can)f(sim)o(ultaneously)450 1454 y(pro)q(cess)f(commands.)29
b(This)19 b(allo)o(ws)g(dramatically)g(increased)g(throughput)g(due)g(to)450
1518 y(in)o(terlea)o(v)o(ed)d(I/O)g(requests.)150 1622 y(COMMAND)f(Phase)450
1686 y(During)d(this)h(phase,)f(6,)g(10,)f(or)h(12)f(b)o(ytes)h(of)f(command)
h(information)g(are)f(transferred)450 1750 y(from)j(the)i(initiator)g(to)e
(the)h(target.)150 1854 y(D)o(A)l(T)l(A)g(OUT)g(and)h(D)o(A)l(T)l(A)f(IN)h
(Phases)450 1918 y(During)f(these)f(phases,)h(data)e(are)i(transferred)e(b)q
(et)o(w)o(een)i(the)g(initiator)g(and)f(the)h(tar-)450 1983
y(get.)j(F)l(or)9 b(example,)j(the)e(D)o(A)l(T)l(A)g(OUT)h(phase)f(transfers)
f(data)h(from)f(the)i(host)e(adapter)450 2047 y(to)14 b(the)g(disk)h(driv)o
(e.)20 b(The)15 b(D)o(A)l(T)l(A)f(IN)g(phase)h(transfers)e(data)h(from)f(the)
i(disk)g(driv)o(e)g(to)450 2111 y(the)f(host)f(adapter.)19
b(If)14 b(the)g(SCSI)g(command)g(do)q(es)g(not)f(require)i(data)e(transfer,)g
(then)450 2176 y(neither)j(phase)g(is)f(en)o(tered.)150 2279
y(ST)l(A)l(TUS)h(Phase)450 2344 y(This)c(phase)f(is)g(en)o(tered)h(after)e
(completion)i(of)f(all)h(commands,)f(and)g(allo)o(ws)g(the)g(target)450
2408 y(to)16 b(send)g(a)g(status)g(b)o(yte)g(to)f(the)i(initiator.)23
b(There)17 b(are)f(nine)h(v)m(alid)h(status)d(b)o(ytes,)h(as)p
eop
%%Page: 42 51
42 50 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(42)450 88 y(sho)o(wn)19
b(in)i(T)l(able)f(1.2)f([)p FC(?)p FH(,)h(p.)g(77].)32 b(Note)19
b(that)g(since)i(bits)1496 72 y Fm(6)1536 88 y FH(1{5)e(are)g(used)i(for)e
(the)450 153 y(status)c(co)q(de)h(\(the)g(other)f(bits)i(are)e(reserv)o
(ed\),)g(the)h(status)f(b)o(yte)h(should)h(b)q(e)f(mask)o(ed)450
217 y(with)g FD(0x3e)e FH(b)q(efore)i(b)q(eing)g(examined.)p
547 311 1007 2 v 546 378 2 68 v 572 359 a(V)l(alue)682 342
y FG(y)p 729 378 V 755 359 a FH(Status)p 1552 378 V 547 380
1007 2 v 547 390 V 546 454 2 65 v 572 435 a(0x00)p 729 454
V 90 w(GOOD)p 1552 454 V 547 456 1007 2 v 546 520 2 65 v 572
501 a(0x02)p 729 520 V 90 w(CHECK)f(CONDITION)p 1552 520 V
547 522 1007 2 v 546 586 2 65 v 572 567 a(0x04)p 729 586 V
90 w(CONDITION)h(MET)p 1552 586 V 547 588 1007 2 v 546 652
2 65 v 572 633 a(0x08)p 729 652 V 90 w(BUSY)p 1552 652 V 547
654 1007 2 v 546 718 2 65 v 572 699 a(0x10)p 729 718 V 90 w(INTERMEDIA)l(TE)p
1552 718 V 547 720 1007 2 v 546 784 2 65 v 572 765 a(0x14)p
729 784 V 90 w(INTERMEDIA)l(TE-CONDITION)h(MET)p 1552 784 V
547 786 1007 2 v 546 850 2 65 v 572 831 a(0x18)p 729 850 V
90 w(RESER)-5 b(V)g(A)l(TION)17 b(CONFLICT)p 1552 850 V 547
852 1007 2 v 546 916 2 65 v 572 897 a(0x22)p 729 916 V 90 w(COMMAND)d
(TERMINA)l(TED)p 1552 916 V 547 918 1007 2 v 546 982 2 65 v
572 963 a(0x28)p 729 982 V 90 w(QUEUE)h(FULL)p 1552 982 V 547
984 1007 2 v 572 1013 a Fe(y)604 1029 y Fl(After)d(masking)j(with)e(0x3e)754
1126 y FH(T)l(able)j(1.2:)j(SCSI)c(Status)g(Co)q(des)450 1260
y(The)g(meanings)h(of)f(the)g(three)g(most)f(imp)q(ortan)o(t)h(status)f(co)q
(des)h(are)g(outlined)i(b)q(elo)o(w:)450 1374 y(GOOD)159 b(The)15
b(op)q(eration)h(completed)g(successfully)l(.)450 1477 y(CHECK)f(CONDITION)
750 1542 y(An)e(error)e(o)q(ccurred.)20 b(The)12 b(REQUEST)h(SENSE)g(command)
f(should)750 1606 y(b)q(e)g(used)h(to)e(\014nd)h(out)g(more)f(information)h
(ab)q(out)g(the)g(error)f(\(see)h(sec-)750 1670 y(tion)j(1.7.3\).)450
1774 y(BUSY)175 b(The)12 b(device)h(w)o(as)d(unable)j(to)e(accept)h(a)f
(command.)19 b(This)12 b(ma)o(y)f(o)q(ccur)750 1838 y(during)16
b(a)f(self-test)g(or)g(shortly)g(after)g(p)q(o)o(w)o(er-up.)150
1951 y(MESSA)o(GE)g(OUT)g(and)g(MESSA)o(GE)g(IN)h(Phases)450
2016 y(Additional)j(information)f(is)g(transferred)f(b)q(et)o(w)o(een)h(the)g
(target)e(and)i(the)g(initiator.)450 2080 y(This)23 b(information)f(ma)o(y)g
(regard)f(the)i(status)e(of)h(an)g(outstanding)g(command,)h(or)450
2144 y(ma)o(y)d(b)q(e)i(a)e(request)h(for)f(a)h(c)o(hange)f(of)h(proto)q
(col.)37 b(Multiple)22 b(MESSA)o(GE)f(IN)g(and)450 2209 y(MESSA)o(GE)g(OUT)g
(phases)g(ma)o(y)f(o)q(ccur)i(during)g(a)f(single)h(SCSI)g(transaction.)37
b(If)450 2273 y(RESELECTION)18 b(is)f(supp)q(orted,)g(the)g(driv)o(er)g(m)o
(ust)f(b)q(e)h(able)g(to)f(correctly)h(pro)q(cess)450 2338
y(the)12 b(SA)-5 b(VE)12 b(D)o(A)l(T)l(A)g(POINTERS,)g(RESTORE)h(POINTERS,)g
(and)f(DISCONNECT)450 2402 y(messages.)23 b(Although)17 b(required)h(b)o(y)e
(the)h(SCSI-2)g(standard,)f(some)g(devices)i(do)e(not)450 2466
y(automatically)c(send)h(a)f(SA)-5 b(VE)12 b(D)o(A)l(T)l(A)g(POINTERS)h
(message)e(prior)h(to)g(a)f(DISCON-)p 150 2506 720 2 v 202
2537 a Fz(6)219 2553 y Fl(Bit)j(0)f(is)g(the)g(least)h(signi\014can)o(t)i
(bit.)p eop
%%Page: 43 52
43 51 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(43)450 88 y(NECT)15
b(message.)150 242 y Fp(1.7.3)55 b(SCSI)20 b(Commands)150 359
y FH(Eac)o(h)g(SCSI)g(command)g(is)g(6,)h(10,)f(or)f(12)h(b)o(ytes)f(long.)35
b(The)20 b(follo)o(wing)g(commands)g(m)o(ust)f(b)q(e)i(w)o(ell)150
423 y(understo)q(o)q(d)16 b(b)o(y)f(a)g(SCSI)h(driv)o(er)f(dev)o(elop)q(er.)
150 540 y(REQUEST)h(SENSE)450 605 y(Whenev)o(er)11 b(a)g(command)g(returns)g
(a)g(CHECK)g(CONDITION)h(status,)e(the)i(high-lev)o(el)450
669 y FE(Linux)17 b FH(SCSI)i(co)q(de)g(automatically)f(obtains)h(more)e
(information)i(ab)q(out)e(the)i(error)450 734 y(b)o(y)g(executing)i(the)e
(REQUEST)h(SENSE.)32 b(This)20 b(command)f(returns)g(a)g(sense)h(k)o(ey)450
798 y(and)15 b(a)f(sense)g(co)q(de)h(\(called)h(the)e(\\additional)i(sense)e
(co)q(de,")h(or)f(ASC,)g(in)h(the)f(SCSI-2)450 862 y(standard)f([)p
FC(?)p FH(]\).)18 b(Some)c(SCSI)g(devices)h(ma)o(y)e(also)h(rep)q(ort)f(an)g
(\\additional)i(sense)f(co)q(de)450 927 y(quali\014er")19 b(\(ASCQ\).)29
b(The)18 b(16)g(p)q(ossible)i(sense)e(k)o(eys)g(are)g(describ)q(ed)i(in)f(T)l
(able)g(1.3.)450 991 y(F)l(or)d(information)h(on)f(the)h(ASC)g(and)g(ASCQ,)f
(please)i(refer)e(to)g(the)h(SCSI)g(standard)450 1055 y([)p
FC(?)p FH(])i(or)c(to)f(a)h(SCSI)h(device)h(tec)o(hnical)f(man)o(ual.)p
649 1152 803 2 v 648 1216 2 65 v 674 1197 a(Sense)g(Key)p 901
1216 V 50 w(Description)p 1450 1216 V 649 1218 803 2 v 649
1228 V 648 1292 2 65 v 674 1273 a FD(0x00)p 901 1292 V 157
w FH(NO)g(SENSE)p 1450 1292 V 649 1294 803 2 v 648 1358 2 65
v 674 1339 a FD(0x01)p 901 1358 V 157 w FH(RECO)o(VERED)g(ERR)o(OR)p
1450 1358 V 649 1360 803 2 v 648 1424 2 65 v 674 1405 a FD(0x02)p
901 1424 V 157 w FH(NOT)f(READ)o(Y)p 1450 1424 V 649 1426 803
2 v 648 1490 2 65 v 674 1471 a FD(0x03)p 901 1490 V 157 w FH(MEDIUM)g(ERR)o
(OR)p 1450 1490 V 649 1492 803 2 v 648 1556 2 65 v 674 1537
a FD(0x04)p 901 1556 V 157 w FH(HARD)o(W)-5 b(ARE)15 b(ERR)o(OR)p
1450 1556 V 649 1558 803 2 v 648 1622 2 65 v 674 1603 a FD(0x05)p
901 1622 V 157 w FH(ILLEGAL)h(REQUEST)p 1450 1622 V 649 1624
803 2 v 648 1688 2 65 v 674 1669 a FD(0x06)p 901 1688 V 157
w FH(UNIT)g(A)l(TTENTION)p 1450 1688 V 649 1690 803 2 v 648
1754 2 65 v 674 1735 a FD(0x07)p 901 1754 V 157 w FH(D)o(A)l(T)l(A)f(PR)o
(OTECT)p 1450 1754 V 649 1756 803 2 v 648 1820 2 65 v 674 1801
a FD(0x08)p 901 1820 V 157 w FH(BLANK)h(CHECK)p 1450 1820 V
649 1822 803 2 v 648 1886 2 65 v 674 1867 a FD(0x09)p 901 1886
V 157 w FH(\(V)l(endor)f(sp)q(eci\014c)i(error\))p 1450 1886
V 649 1888 803 2 v 648 1952 2 65 v 674 1933 a FD(0x0a)p 901
1952 V 157 w FH(COPY)e(ABOR)l(TED)p 1450 1952 V 649 1954 803
2 v 648 2018 2 65 v 674 1999 a FD(0x0b)p 901 2018 V 157 w FH(ABOR)l(TED)h
(COMMAND)p 1450 2018 V 649 2020 803 2 v 648 2084 2 65 v 674
2065 a FD(0x0c)p 901 2084 V 157 w FH(EQUAL)p 1450 2084 V 649
2086 803 2 v 648 2150 2 65 v 674 2131 a FD(0x0d)p 901 2150
V 157 w FH(V)o(OLUME)f(O)o(VERFLO)o(W)p 1450 2150 V 649 2152
803 2 v 648 2216 2 65 v 674 2197 a FD(0x0e)p 901 2216 V 157
w FH(MISCOMP)l(ARE)p 1450 2216 V 649 2218 803 2 v 648 2282
2 65 v 674 2263 a FD(0x0f)p 901 2282 V 157 w FH(RESER)-5 b(VED)p
1450 2282 V 649 2284 803 2 v 710 2361 a(T)l(able)16 b(1.3:)j(Sense)d(Key)g
(Descriptions)p eop
%%Page: 44 53
44 52 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(44)150 88 y(TEST)15
b(UNIT)h(READ)o(Y)450 153 y(This)f(command)g(is)h(used)f(to)f(test)g(the)h
(target's)f(status.)19 b(If)c(the)g(target)e(can)i(accept)g(a)450
217 y(medium-access)d(command)f(\(e.g.,)f(a)h(READ)g(or)f(a)h(WRITE\),)f(the)
h(command)g(returns)450 281 y(with)21 b(a)g(GOOD)g(status.)37
b(Otherwise,)23 b(the)f(command)f(returns)g(with)g(a)g(CHECK)450
346 y(CONDITION)12 b(status)e(and)i(a)e(sense)i(k)o(ey)f(of)g(NOT)g(READ)o
(Y.)18 b(This)12 b(resp)q(onse)g(usually)450 410 y(indicates)17
b(that)d(the)h(target)f(is)i(completing)g(p)q(o)o(w)o(er-on)f(self-tests.)150
514 y(INQUIR)l(Y)102 b(This)13 b(command)f(returns)g(the)g(target's)f(mak)o
(e,)g(mo)q(del,)j(and)e(device)i(t)o(yp)q(e.)19 b(The)12 b(high-)450
578 y(lev)o(el)k FE(Linux)e FH(co)q(de)i(uses)f(this)g(command)g(to)f
(di\013eren)o(tiate)i(among)f(magnetic)g(disks,)450 642 y(optical)e(disks,)g
(and)f(tap)q(e)g(driv)o(es)h(\(the)f(high-lev)o(el)i(co)q(de)f(curren)o(tly)g
(do)q(es)f(not)g(supp)q(ort)450 707 y(prin)o(ters,)j(pro)q(cessors,)g(or)f
(juk)o(e)i(b)q(o)o(xes\).)150 810 y(READ)f(and)h(WRITE)450
875 y(These)21 b(commands)g(are)f(used)h(to)f(transfer)g(data)g(from)g(and)h
(to)f(the)h(target.)35 b(Y)l(ou)450 939 y(should)19 b(b)q(e)g(sure)f(y)o(our)
g(driv)o(er)g(can)h(supp)q(ort)f(simpler)i(commands,)e(suc)o(h)g(as)g(TEST)
450 1003 y(UNIT)k(READ)o(Y)g(and)g(INQUIR)l(Y,)h(b)q(efore)f(attempting)f(to)
g(use)h(the)g(READ)g(and)450 1068 y(WRITE)16 b(commands.)150
1221 y Fp(1.7.4)55 b(Getting)18 b(Started)150 1338 y FH(The)h(author)e(of)h
(a)g(lo)o(w-lev)o(el)i(device)g(driv)o(er)f(will)h(need)f(to)f(ha)o(v)o(e)g
(an)g(understanding)i(of)e(ho)o(w)g(in)o(ter-)150 1403 y(ruptions)c(are)g
(handled)i(b)o(y)d(the)h(k)o(ernel.)21 b(A)o(t)13 b(minim)o(um,)i(the)f(k)o
(ernel)h(functions)g(that)e(disable)i(\()p FD(cli\(\))p FH(\))150
1467 y(and)20 b(enable)h(\()p FD(sti\(\))p FH(\))e(in)o(terruptions)i(should)
g(b)q(e)g(understo)q(o)q(d.)34 b(The)21 b(sc)o(heduling)h(functions)f
(\(e.g.,)150 1531 y FD(schedule\(\))p FH(,)16 b FD(sleepon\(\))p
FH(,)f(and)j FD(wakeup\(\))p FH(\))d(ma)o(y)h(also)h(b)q(e)h(needed)g(b)o(y)f
(some)g(driv)o(ers.)25 b(A)17 b(detailed)150 1596 y(explanation)f(of)f(these)
g(functions)h(can)g(b)q(e)g(found)f(in)h(section)g(1.6.)150
1749 y Fp(1.7.5)55 b(Before)18 b(Y)-5 b(ou)19 b(Begin:)24 b(Gathering)18
b(T)-5 b(o)r(ols)150 1866 y FH(Before)12 b(y)o(ou)g(b)q(egin)h(to)f(write)g
(a)g(SCSI)g(driv)o(er)h(for)e FE(Linux)p FH(,)h(y)o(ou)g(will)h(need)g(to)f
(obtain)g(sev)o(eral)g(resources.)221 1954 y(The)k(most)f(imp)q(ortan)o(t)g
(is)h(a)g(b)q(o)q(otable)g FE(Linux)f FH(system|preferably)i(one)f(whic)o(h)g
(b)q(o)q(ots)g(from)f(an)150 2018 y(IDE,)g(RLL,)i(or)e(MFM)g(hard)h(disk.)22
b(During)16 b(the)g(dev)o(elopmen)o(t)g(of)f(y)o(our)h(new)g(SCSI)g(driv)o
(er,)g(y)o(ou)f(will)150 2083 y(rebuild)21 b(the)f(k)o(ernel)g(and)f(reb)q(o)
q(ot)h(y)o(our)e(system)h(man)o(y)g(times.)33 b(Programming)18
b(errors)h(ma)o(y)g(result)150 2147 y(in)e(the)g(destruction)g(of)e(data)h
(on)g(y)o(our)g(SCSI)h(driv)o(e)g FB(and)k FH(on)c(y)o(our)e(non-SCSI)j(driv)
o(e.)24 b FB(Back)17 b(up)h(your)150 2211 y(system)e(b)n(efor)n(e)f(you)i(b)n
(e)n(gin)s FH(.)221 2299 y(The)f(installed)h FE(Linux)e FH(system)h(can)g(b)q
(e)g(quite)g(minimal:)23 b(the)16 b(GCC)f(compiler)i(distribution)g(\(in-)150
2364 y(cluding)f(libraries)g(and)e(the)h(binary)g(utilities\),)h(an)e
(editor,)g(and)h(the)f(k)o(ernel)h(source)f(are)g(all)i(y)o(ou)d(need.)150
2428 y(Additional)k(to)q(ols)e(lik)o(e)h FD(od)p FH(,)f FD(hexdump)p
FH(,)e(and)j FD(less)e FH(will)j(b)q(e)f(quite)g(helpful.)22
b(All)16 b(of)f(these)g(to)q(ols)g(will)i(\014t)p eop
%%Page: 45 54
45 53 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(45)150 88 y(on)15
b(an)g(inexp)q(ensiv)o(e)j(20-30)c(MB)h(hard)g(disk.)927 72
y Fm(7)947 88 y FH(.)221 176 y(Do)q(cumen)o(tation)c(is)i(essen)o(tial.)19
b(A)o(t)12 b(minim)o(um,)h(y)o(ou)f(will)h(need)g(a)e(tec)o(hnical)j(man)o
(ual)e(for)f(y)o(our)g(host)150 241 y(adapter.)19 b(Since)14
b FE(Linux)f FH(is)g(freely)h(distributable,)h(and)e(since)i(y)o(ou)d
(\(ideally\))j(w)o(an)o(t)d(to)g(distribute)i(y)o(our)150 305
y(source)i(co)q(de)g(freely)l(,)h(a)o(v)o(oid)e(non-disclosure)j(agreemen)o
(ts)d(\(ND)o(A\).)20 b(Most)15 b(ND)o(A's)g(will)i(prohibit)g(y)o(ou)150
369 y(from)e(releasing)i(y)o(our)e(source)g(co)q(de|y)o(ou)i(migh)o(t)e(b)q
(e)i(allo)o(w)o(ed)f(to)f(release)h(an)f(ob)s(ject)h(\014le)g(con)o(taining)
150 434 y(y)o(our)f(driv)o(er,)g(but)g(this)h(is)g(simply)g(not)f(acceptable)
h(in)g(the)f FE(Linux)g FH(comm)o(unit)o(y)g(at)g(this)g(time.)221
522 y(A)d(man)o(ual)h(that)f(explains)i(the)f(SCSI)g(standard)f(will)j(b)q(e)
e(helpful.)21 b(Usually)14 b(the)f(tec)o(hnical)h(man)o(ual)150
586 y(for)f(y)o(our)g(disk)i(driv)o(e)f(will)h(b)q(e)g(su\016cien)o(t,)f(but)
g(a)f(cop)o(y)h(of)f(the)h(SCSI)g(standard)f(will)j(often)d(b)q(e)i(helpful.)
1929 569 y Fm(8)221 674 y FH(Before)g(y)o(ou)f(start,)g(mak)o(e)h(hard)g
(copies)h(of)e FD(hosts.h)p FH(,)g FD(scsi.h)p FH(,)g(and)h(one)h(of)e(the)i
(existing)g(driv)o(ers)150 738 y(in)g(the)f FE(Linux)g FH(k)o(ernel.)21
b(These)15 b(will)i(pro)o(v)o(e)e(to)f(b)q(e)i(useful)g(references)g(while)h
(y)o(ou)e(write)g(y)o(our)g(driv)o(er.)150 891 y Fp(1.7.6)55
b(The)19 b Fn(Linux)e Fp(SCSI)i(In)n(terface)150 1009 y FH(The)f(high-lev)o
(el)h(SCSI)f(in)o(terface)g(in)g(the)f FE(Linux)g FH(k)o(ernel)h(manages)e
(all)j(of)e(the)g(in)o(teraction)h(b)q(et)o(w)o(een)150 1073
y(the)e(k)o(ernel)g(and)f(the)h(lo)o(w-lev)o(el)h(SCSI)f(device)h(driv)o(er.)
k(Because)16 b(of)f(this)h(la)o(y)o(ered)f(design,)h(a)g(lo)o(w-lev)o(el)150
1137 y(SCSI)g(driv)o(er)h(need)f(only)h(pro)o(vide)f(a)f(few)h(basic)h
(services)f(to)f(the)h(high-lev)o(el)i(co)q(de.)23 b(The)16
b(author)f(of)g(a)150 1202 y(lo)o(w-lev)o(el)j(driv)o(er)f(do)q(es)g(not)f
(need)h(to)f(understand)h(the)f(in)o(tricacies)i(of)e(the)h(k)o(ernel)g(I/O)g
(system)f(and,)150 1266 y(hence,)g(can)f(write)h(a)e(lo)o(w-lev)o(el)j(driv)o
(er)f(in)g(a)e(relativ)o(ely)j(short)d(amoun)o(t)h(of)g(time.)221
1354 y(Tw)o(o)c(main)h(structures)g(\()p FD(Scsi_Host)f FH(and)h
FD(Scsi_Cmnd)p FH(\))f(are)h(used)g(to)g(comm)o(unicate)g(b)q(et)o(w)o(een)h
(the)150 1418 y(high-lev)o(el)18 b(co)q(de)d(and)h(the)f(lo)o(w-lev)o(el)i
(co)q(de.)j(The)c(next)f(t)o(w)o(o)f(sections)h(pro)o(vide)h(detailed)h
(information)150 1483 y(ab)q(out)e(these)g(structures)g(and)h(the)f
(requiremen)o(ts)h(of)e(the)i(lo)o(w-lev)o(el)g(driv)o(er.)150
1636 y Fp(1.7.7)55 b(The)19 b Fo(Scsi)p 543 1636 16 2 v 17
w(Host)e Fp(Structure)150 1753 y FH(The)22 b FD(Scsi_Host)f
FH(structure)h(serv)o(es)g(to)f(describ)q(e)j(the)e(lo)o(w-lev)o(el)h(driv)o
(er)g(to)e(the)h(high-lev)o(el)j(co)q(de.)150 1818 y(Usually)l(,)e(this)f
(description)g(is)g(placed)g(in)f(the)g(device)i(driv)o(er's)e(header)g
(\014le)h(in)g(a)e(C)h(prepro)q(cessor)150 1882 y(de\014nition,)c(as)d(sho)o
(wn)h(in)h(Figure)g(1.1.)221 1970 y(The)d FD(Scsi_Host)g FH(structure)g(is)h
(presen)o(ted)g(in)h(Figure)f(1.2.)k(Eac)o(h)c(of)f(the)g(\014elds)i(will)h
(b)q(e)e(explained)150 2034 y(in)i(detail)g(later)f(in)i(this)e(section.)p
150 2065 720 2 v 202 2096 a Fz(7)219 2112 y Fl(A)e(used)g(20)h(MB)f(MFM)g
(hard)h(disk)g(and)g(con)o(troller)g(should)h(cost)e(less)h(than)g(US$100.)
202 2144 y Fz(8)219 2160 y Fl(The)k(Octob)q(er)g(17,)g(1991,)h(draft)f(of)f
(the)h(SCSI-2)g(standard)g(do)q(cumen)o(t)h(is)f(a)o(v)n(ailable)j(via)d
(anon)o(ymous)i(ftp)d(from)150 2212 y Fk(sunsite.un)o(c.)o(edu)d
Fl(in)19 b Fk(/pub/Linux)o(/de)o(ve)o(lop)o(men)o(t/)o(scs)o(i-)o(2.t)o(ar.)o
(Z)p Fl(,)14 b(and)19 b(is)g(a)o(v)n(ailable)i(for)d(purc)o(hase)i(from)e
(Global)150 2264 y(Engineering)g(Do)q(cumen)o(ts)e(\(2805)g(McGa)o(w,)g
(Irvine,)g(CA)e(92714\),)j(\(800\)-854-7179)f(or)f(\(714\)-261-1455.)25
b(Please)16 b(refer)150 2316 y(to)d(do)q(cumen)o(t)h(X3.131-199X.)j(In)c
(early)h(1993,)f(the)h(man)o(ual)g(cost)f(US$60{70.)p eop
%%Page: 46 55
46 54 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(46)245 154 y FD(#define)23
b(FDOMAIN_16X0)46 b({)24 b("Future)f(Domain)g(TMC-16x0",)237
b(\\)842 219 y(fdomain_16x0_detect,)331 b(\\)842 283 y(fdomain_16x0_info,)379
b(\\)842 347 y(fdomain_16x0_command,)307 b(\\)842 412 y(fdomain_16x0_queue,)
355 b(\\)842 476 y(fdomain_16x0_abort,)g(\\)842 540 y(fdomain_16x0_reset,)g
(\\)842 605 y(NULL,)691 b(\\)842 669 y(fdomain_16x0_biosparam,)259
b(\\)842 734 y(1,)24 b(6,)f(64,)h(1)f(,0,)h(0})245 798 y(#endif)673
968 y FH(Figure)16 b(1.1:)j(Device)d(Driv)o(er)f(Header)g(File)245
1169 y FD(typedef)23 b(struct)245 1233 y({)293 1298 y(char)358
b(*name;)293 1362 y(int)382 b(\(*)23 b(detect\)\(int\);)293
1426 y(const)g(char)215 b(*\(*)23 b(info\)\(void\);)293 1491
y(int)382 b(\(*)23 b(queuecommand\)\(Scsi_Cmnd)e(*,)770 1555
y(void)j(\(*done\)\(Scsi_Cmnd)d(*\)\);)293 1619 y(int)382 b(\(*)23
b(command\)\(Scsi_Cmnd)f(*\);)293 1684 y(int)382 b(\(*)23 b
(abort\)\(Scsi_Cmnd)f(*,)h(int\);)293 1748 y(int)382 b(\(*)23
b(reset\)\(void\);)293 1812 y(int)382 b(\(*)23 b(slave_attach\)\(int,)f
(int\);)293 1877 y(int)382 b(\(*)23 b(bios_param\)\(int,)f(int,)h(int)h
([]\);)293 1941 y(int)382 b(can_queue;)293 2006 y(int)g(this_id;)293
2070 y(short)23 b(unsigned)g(int)h(sg_tablesize;)293 2134 y(short)334
b(cmd_per_lun;)293 2199 y(unsigned)262 b(present:1;)293 2263
y(unsigned)g(unchecked_isa_dma:1;)245 2327 y(})24 b(Scsi_Host;)681
2498 y FH(Figure)15 b(1.2:)k(The)d FD(Scsi)p 1108 2498 15 2
v 16 w(Host)f FH(Structure)p eop
%%Page: 47 56
47 55 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(47)150 88 y FC(1.7.7.1)54
b(V)l(ariables)20 b(in)e(the)g FD(Scsi)p 829 88 15 2 v 16 w(Host)f
FC(structure)150 206 y FH(In)f(general,)g(the)g(v)m(ariables)h(in)f(the)g
FD(Scsi_Host)e FH(structure)i(are)f(not)g(used)i(un)o(til)f(after)f(the)h
FD(detect\(\))150 270 y FH(function)f(\(see)g(section)g(1.7.7.2.1\))c(is)k
(called.)21 b(Therefore,)14 b(an)o(y)g(v)m(ariables)i(whic)o(h)f(cannot)f(b)q
(e)h(assigned)150 334 y(b)q(efore)k(host)g(adapter)f(detection)i(should)g(b)q
(e)f(assigned)h(during)g(detection.)31 b(This)20 b(situation)f(migh)o(t)150
399 y(o)q(ccur,)e(for)f(example,)i(if)f(a)f(single)i(driv)o(er)f(pro)o(vided)
g(supp)q(ort)g(for)f(sev)o(eral)h(host)f(adapters)g(with)h(v)o(ery)150
463 y(similar)22 b(c)o(haracteristics.)37 b(Some)21 b(of)g(the)g(parameters)f
(in)i(the)f FD(Scsi_Host)e FH(structure)i(migh)o(t)g(then)150
527 y(dep)q(end)c(on)e(the)g(sp)q(eci\014c)i(host)e(adapter)g(detected.)150
679 y FC(1.7.7.1.1)55 b FD(name)150 796 y(name)15 b FH(holds)h(a)e(p)q(oin)o
(ter)i(to)f(a)g(short)f(description)j(of)e(the)g(SCSI)h(host)e(adapter.)150
947 y FC(1.7.7.1.2)55 b FD(can)p 466 947 V 17 w(queue)150 1065
y(can_queue)9 b FH(holds)j(the)f(n)o(um)o(b)q(er)g(of)f(outstanding)h
(commands)f(the)h(host)f(adapter)h(can)f(pro)q(cess.)19 b(Unless)150
1129 y(RESELECTION)14 b(is)f(supp)q(orted)g(b)o(y)f(the)h(driv)o(er)g(and)g
(the)f(driv)o(er)h(is)g(in)o(terrupt-driv)o(en,)1675 1113 y
Fm(9)1709 1129 y FH(this)g(v)m(ariable)150 1193 y(should)j(b)q(e)g(set)f(to)g
(1.)150 1345 y FC(1.7.7.1.3)55 b FD(this)p 490 1345 V 17 w(id)150
1462 y FH(Most)15 b(host)h(adapters)g(ha)o(v)o(e)g(a)f(sp)q(eci\014c)k(SCSI)e
(ID)f(assigned)h(to)e(them.)23 b(This)17 b(SCSI)g(ID,)f(usually)i(6)d(or)150
1526 y(7,)g(is)h(used)g(for)e(RESELECTION.)22 b(The)16 b FD(this_id)e
FH(v)m(ariable)j(holds)f(the)f(host)g(adapter's)g(SCSI)h(ID.)f(If)150
1591 y(the)h(host)f(adapter)h(do)q(es)g(not)f(ha)o(v)o(e)h(an)f(assigned)i
(SCSI)f(ID,)g(this)g(v)m(ariable)h(should)g(b)q(e)g(set)e(to)h
FG(\000)p FH(1)f(\(in)150 1655 y(this)h(case,)e(RESELECTION)j(cannot)e(b)q(e)
h(supp)q(orted\).)150 1807 y FC(1.7.7.1.4)55 b FD(sg)p 442
1807 V 17 w(tablesize)150 1924 y FH(The)15 b(high-lev)o(el)h(co)q(de)f(supp)q
(orts)g(\\scatter-gather,")d(a)i(metho)q(d)h(of)f(increasing)i(SCSI)f
(throughput)f(b)o(y)150 1988 y(com)o(bining)i(man)o(y)e(small)h(SCSI)g
(requests)g(in)o(to)f(a)g(few)h(large)f(SCSI)i(requests.)j(Since)d(most)e
(SCSI)h(disk)150 2052 y(driv)o(es)k(are)e(formatted)g(with)i(1:1)e(in)o
(terlea)o(v)o(e,)962 2036 y Fm(10)1018 2052 y FH(the)h(time)g(required)i(to)d
(p)q(erform)h(the)g(SCSI)h(ARBI-)150 2117 y(TRA)l(TION)j(and)e(SELECTION)h
(phases)g(is)g(longer)g(than)f(the)g(rotational)g(latency)h(time)g(b)q(et)o
(w)o(een)150 2181 y(sectors.)298 2165 y Fm(11)363 2181 y FH(Therefore,)e
(only)g(one)f(SCSI)h(request)f(can)g(b)q(e)h(pro)q(cessed)g(p)q(er)f(disk)h
(rev)o(olution,)g(result-)p 150 2221 720 2 v 202 2252 a Fz(9)219
2268 y Fl(Some)10 b(of)g(the)g(early)h Fd(Linux)e Fl(driv)o(ers)i(w)o(ere)f
(not)g(in)o(terrupt)h(driv)o(en)h(and,)e(consequen)o(tly)m(,)j(had)d(v)o(ery)
h(p)q(o)q(or)f(p)q(erformance.)187 2304 y Fz(10)219 2320 y
Fl(\\1:1)j(in)o(terlea)o(v)o(e")i(means)e(that)h(all)g(of)e(the)h(sectors)h
(in)f(a)g(single)i(trac)o(k)e(app)q(ear)h(consecutiv)o(ely)h(on)f(the)f(disk)
h(surface.)187 2352 y Fz(11)219 2368 y Fl(This)e(ma)o(y)f(b)q(e)g(an)h(o)o(v)
o(er-simpli\014catio)q(n.)19 b(On)11 b(older)h(devices,)h(the)e(actual)h
(command)g(pro)q(cessing)h(can)e(b)q(e)h(signi\014can)o(t.)150
2420 y(F)m(urther,)g(there)g(is)g(a)g(great)g(deal)h(of)e(la)o(y)o(ered)i(o)o
(v)o(erhead)g(in)f(the)g(k)o(ernel:)18 b(the)11 b(high-lev)o(el)k(SCSI)d(co)q
(de,)g(the)g(bu\013ering)i(co)q(de,)150 2472 y(and)g(the)f(\014le-system)h
(co)q(de)g(all)g(con)o(tribute)h(to)d(p)q(o)q(or)i(SCSI)f(p)q(erformance.)p
eop
%%Page: 48 57
48 56 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(48)150 88 y(ing)18
b(in)h(a)e(throughput)g(of)g(ab)q(out)h(50)f(kilob)o(ytes)h(p)q(er)g(second.)
27 b(When)18 b(scatter-gather)f(is)h(supp)q(orted,)150 153
y(ho)o(w)o(ev)o(er,)c(a)o(v)o(erage)g(throughput)h(is)h(usually)g(o)o(v)o(er)
f(500)f(kilob)o(ytes)i(p)q(er)g(second.)221 241 y(The)j FD(sg_tablesize)f
FH(v)m(ariable)j(holds)f(the)g(maxim)o(um)g(allo)o(w)o(able)g(n)o(um)o(b)q
(er)g(of)f(requests)g(in)i(the)150 305 y(scatter-gather)d(list.)32
b(If)19 b(the)g(driv)o(er)h(do)q(es)f(not)g(supp)q(ort)g(scatter-gather,)f
(this)i(v)m(ariable)g(should)g(b)q(e)150 369 y(set)e(to)f FD(SG_NONE)p
FH(.)27 b(If)18 b(the)g(driv)o(er)g(can)g(supp)q(ort)g(an)g(unlimited)i(n)o
(um)o(b)q(er)f(of)e(group)q(ed)h(requests,)h(this)150 434 y(v)m(ariable)h
(should)f(b)q(e)h(set)e(to)g FD(SG_ALL)p FH(.)29 b(Some)18
b(driv)o(ers)h(will)h(use)f(the)g(host)f(adapter)g(to)g(manage)g(the)150
498 y(scatter-gather)10 b(list)i(and)g(ma)o(y)f(need)h(to)f(limit)i
FD(sg_tablesize)d FH(to)h(the)g(n)o(um)o(b)q(er)h(that)f(the)g(host)g
(adapter)150 562 y(hardw)o(are)j(supp)q(orts.)20 b(F)l(or)15
b(example,)h(some)f(Adaptec)g(host)g(adapters)g(require)h(a)e(limit)j(of)e
(16.)150 714 y FC(1.7.7.1.5)55 b FD(cmd)p 466 714 15 2 v 17
w(per)p 555 714 V 17 w(lun)150 831 y FH(The)19 b(SCSI)g(standard)g(supp)q
(orts)f(the)h(notion)g(of)f(\\link)o(ed)i(commands.")30 b(Link)o(ed)20
b(commands)f(allo)o(w)150 895 y(sev)o(eral)f(commands)f(to)f(b)q(e)i(queued)h
(consecutiv)o(ely)g(to)d(a)h(single)i(SCSI)f(device.)28 b(The)18
b FD(cmd_per_lun)150 960 y FH(v)m(ariable)e(sp)q(eci\014es)g(the)f(n)o(um)o
(b)q(er)f(of)g(link)o(ed)j(commands)d(allo)o(w)o(ed.)20 b(This)15
b(v)m(ariable)h(should)f(b)q(e)g(set)f(to)g(1)150 1024 y(if)i(command)g
(linking)i(is)f(not)e(supp)q(orted.)23 b(A)o(t)15 b(this)i(time,)f(ho)o(w)o
(ev)o(er,)f(the)h(high-lev)o(el)i(SCSI)f(co)q(de)f(will)150
1088 y(not)f(tak)o(e)f(adv)m(an)o(tage)h(of)g(this)g(feature.)221
1176 y(Link)o(ed)f(commands)f(are)g(fundamen)o(tally)h(di\013eren)o(t)g(from)
f(m)o(ultiple)i(outstanding)e(commands)g(\(as)150 1241 y(describ)q(ed)h(b)o
(y)e(the)g FD(can_queue)e FH(v)m(ariable\).)20 b(Link)o(ed)14
b(commands)d(alw)o(a)o(ys)g(go)h(to)f(the)h(same)g(SCSI)g(target)150
1305 y(and)17 b(do)g(not)g(necessarily)h(in)o(v)o(olv)o(e)g(a)f(RESELECTION)h
(phase.)26 b(F)l(urther,)17 b(link)o(ed)i(commands)e(elim-)150
1369 y(inate)i(the)f(ARBITRA)l(TION,)i(SELECTION,)f(and)f(MESSA)o(GE)g(OUT)g
(phases)h(on)f(all)h(commands)150 1434 y(after)12 b(the)g(\014rst)h(one)f(in)
i(the)e(set.)19 b(In)13 b(con)o(trast,)f(m)o(ultiple)i(outstanding)e
(commands)h(ma)o(y)f(b)q(e)h(sen)o(t)f(to)g(an)150 1498 y(arbitrary)17
b(SCSI)h(target,)e(and)i FB(r)n(e)n(quir)n(e)i FH(the)e(ARBITRA)l(TION,)h
(SELECTION,)f(MESSA)o(GE)f(OUT,)150 1562 y(and)e(RESELECTION)i(phases.)150
1714 y FC(1.7.7.1.6)55 b FD(present)150 1831 y FH(The)15 b
FD(present)g FH(bit)g(is)h(set)f(\(b)o(y)g(the)g(high-lev)o(el)j(co)q(de\))d
(if)h(the)f(host)g(adapter)g(is)g(detected.)150 1983 y FC(1.7.7.1.7)55
b FD(unchecked)p 610 1983 V 16 w(isa)p 698 1983 V 17 w(dma)150
2100 y FH(Some)19 b(host)g(adapters)f(use)h(Direct)g(Memory)g(Access)g
(\(DMA\))f(to)g(read)h(and)g(write)g(blo)q(c)o(ks)h(of)f(data)150
2164 y(directly)i(from)d(or)h(to)g(the)g(computer's)g(main)h(memory)l(.)32
b FE(Linux)19 b FH(is)h(a)f(virtual)h(memory)f(op)q(erating)150
2228 y(system)f(that)h(can)g(use)g(more)f(than)h(16)g(MB)f(of)h(ph)o(ysical)h
(memory)l(.)31 b(Unfortunately)l(,)19 b(on)g(mac)o(hines)150
2293 y(using)d(the)f(ISA)h(bus)506 2276 y Fm(12)544 2293 y
FH(,)f(DMA)f(is)i(limited)h(to)e(the)g(lo)o(w)g(16)g(MB)g(of)f(ph)o(ysical)j
(memory)l(.)p 150 2332 720 2 v 187 2359 a Fz(12)219 2375 y
Fl(The)f(so-called)i(\\Industry)g(Standard)f(Arc)o(hitecture")h(bus)e(w)o(as)
g(in)o(tro)q(duced)i(with)f(the)f(IBM)g(PC/XT)g(and)h(IBM)150
2427 y(PC/A)m(T)12 b(computers.)p eop
%%Page: 49 58
49 57 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(49)221 88 y(If)14
b(the)g FD(unchecked_isa_dma)d FH(bit)k(is)f(set,)f(the)h(high-lev)o(el)j(co)
q(de)d(will)i(pro)o(vide)e(data)f(bu\013ers)i(whic)o(h)150
153 y(are)i(guaran)o(teed)f(to)g(b)q(e)i(in)g(the)f(lo)o(w)g(16)f(MB)h(of)f
(the)h(ph)o(ysical)i(address)e(space.)25 b(Driv)o(ers)17 b(written)g(for)150
217 y(host)g(adapters)h(that)f(do)g(not)h(use)g(DMA)f(should)i(set)f(this)g
(bit)g(to)f(zero.)28 b(Driv)o(ers)17 b(sp)q(eci\014c)j(to)d(EISA)150
281 y(bus)218 265 y Fm(13)270 281 y FH(mac)o(hines)e(should)g(also)f(set)g
(this)g(bit)h(to)e(zero,)h(since)i(EISA)e(bus)h(mac)o(hines)g(allo)o(w)f
(unrestricted)150 346 y(DMA)h(access.)150 496 y FC(1.7.7.2)54
b(F)l(unctions)18 b(in)g(the)g FD(Scsi)p 839 496 15 2 v 17
w(Host)f FC(Structure)150 614 y(1.7.7.2.1)55 b FD(detect\(\))150
731 y FH(The)11 b FD(detect\(\))f FH(function's)i(only)f(argumen)o(t)g(is)g
(the)h(\\host)e(n)o(um)o(b)q(er,")i(an)f(index)h(in)o(to)f(the)g
FD(scsi_hosts)150 795 y FH(v)m(ariable)i(\(an)e(arra)o(y)f(of)h(t)o(yp)q(e)g
FD(struct)23 b(Scsi_Host)p FH(\).)17 b(The)12 b FD(detect\(\))e
FH(function)i(should)g(return)g(a)f(non-)150 860 y(zero)k(v)m(alue)i(if)e
(the)g(host)g(adapter)g(is)h(detected,)f(and)h(should)g(return)f(zero)g
(otherwise.)221 947 y(Host)h(adapter)h(detection)h(m)o(ust)f(b)q(e)g(done)h
(carefully)l(.)27 b(Usually)19 b(the)e(pro)q(cess)h(b)q(egins)g(b)o(y)f(lo)q
(oking)150 1012 y(in)j(the)f(R)o(OM)h(area)e(for)h(the)g(\\BIOS)h(signature")
f(of)g(the)g(host)g(adapter.)31 b(On)20 b(PC/A)l(T-compatible)150
1076 y(computers,)f(the)g(use)g(of)g(the)f(address)h(space)g(b)q(et)o(w)o
(een)g FD(0xc0000)f FH(and)h FD(0xfffff)f FH(is)h(fairly)h(w)o(ell)f(de-)150
1141 y(\014ned.)i(F)l(or)13 b(example,)i(the)g(video)g(BIOS)g(on)g(most)e
(mac)o(hines)j(starts)d(at)g FD(0xc0000)h FH(and)g(the)h(hard)f(disk)150
1205 y(BIOS,)20 b(if)g(presen)o(t,)g(starts)e(at)h FD(0xc8000)p
FH(.)32 b(When)19 b(a)h(PC/A)l(T-compatible)g(computer)f(b)q(o)q(ots,)h(ev)o
(ery)150 1269 y(2-kilob)o(yte)e(blo)q(c)o(k)h(from)e FD(0xc0000)g
FH(to)g FD(0xf8000)f FH(is)j(examined)f(for)f(the)h(2-b)o(yte)g(signature)f
(\()p FD(0x55aa)p FH(\))150 1334 y(whic)o(h)f(indicates)h(that)d(a)h(v)m
(alid)i(BIOS)f(extension)g(is)g(presen)o(t)f([)p FC(?)p FH(].)221
1421 y(The)21 b(BIOS)g(signature)g(usually)h(consists)f(of)g(a)f(series)i(of)
e(b)o(ytes)g(that)h(uniquely)h(iden)o(ti\014es)h(the)150 1486
y(BIOS.)e(F)l(or)15 b(example,)g(one)h(F)l(uture)f(Domain)g(BIOS)h(signature)
g(is)f(the)h(string)245 1607 y FD(FUTURE)23 b(DOMAIN)h(CORP.)f(\(C\))g
(1986-1990)g(1800-V2.07/28/89)150 1792 y FH(found)16 b(exactly)f(\014v)o(e)g
(b)o(ytes)g(from)g(the)g(start)f(of)h(the)g(BIOS)h(blo)q(c)o(k.)221
1880 y(After)c(the)h(BIOS)g(signature)g(is)g(found,)h(it)f(is)g(safe)f(to)g
(test)g(for)g(the)h(presence)h(of)e(a)g(functioning)i(host)150
1944 y(adapter)g(in)h(more)f(sp)q(eci\014c)j(w)o(a)o(ys.)h(Since)e(the)f
(BIOS)h(signatures)e(are)g(hard-co)q(ded)i(in)f(the)g(k)o(ernel,)g(the)150
2009 y(release)j(of)f(a)g(new)g(BIOS)i(can)e(cause)h(the)f(driv)o(er)h(to)f
(m)o(ysteriously)g(fail.)27 b(F)l(urther,)18 b(p)q(eople)h(who)e(use)150
2073 y(the)e(SCSI)g(adapter)f(exclusiv)o(ely)j(for)d FE(Linux)g
FH(ma)o(y)g(w)o(an)o(t)g(to)g(disable)i(the)f(BIOS)h(to)e(sp)q(eed)h(b)q(o)q
(ot)g(time.)150 2137 y(F)l(or)f(these)i(reasons,)e(if)h(the)h(adapter)e(can)h
(b)q(e)h(detected)g(safely)f(without)g(examining)i(the)e(BIOS,)h(then)150
2202 y(that)e(alternativ)o(e)i(metho)q(d)f(should)h(b)q(e)g(used.)221
2290 y(Usually)l(,)e(eac)o(h)f(host)g(adapter)g(has)g(a)f(series)i(of)f(I/O)g
(p)q(ort)g(addresses)g(whic)o(h)h(are)f(used)h(for)e(comm)o(u-)150
2354 y(nications.)22 b(Sometimes)16 b(these)g(addresses)f(will)i(b)q(e)g
(hard)e(co)q(ded)i(in)o(to)e(the)h(driv)o(er,)f(forcing)h(all)h
FE(Linux)150 2418 y FH(users)f(who)f(ha)o(v)o(e)g(this)h(host)f(adapter)g(to)
g(use)g(a)g(sp)q(eci\014c)j(set)d(of)g(I/O)h(p)q(ort)f(addresses.)21
b(Other)16 b(driv)o(ers)p 150 2459 720 2 v 187 2486 a Fz(13)219
2502 y Fl(The)f(\\Extended)h(Industry)g(Standard)g(Arc)o(hitecture")g(bus)g
(is)f(a)g(non-proprietary)i(32-bit)f(bus)f(for)g(386)g(and)h(i486)150
2554 y(mac)o(hines.)p eop
%%Page: 50 59
50 58 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(50)150 88 y(are)17
b(more)f(\015exible,)j(and)f(\014nd)f(the)g(curren)o(t)g(I/O)h(p)q(ort)f
(address)g(b)o(y)g(scanning)g(all)h(p)q(ossible)h(p)q(ort)e(ad-)150
153 y(dresses.)22 b(Usually)c(eac)o(h)e(host)f(adapter)h(will)i(allo)o(w)e(3)
f(or)h(4)g(sets)f(of)h(addresses,)g(whic)o(h)h(are)e(selectable)150
217 y(via)g(hardw)o(are)g(jump)q(ers)h(on)f(the)g(host)g(adapter)g(card.)221
305 y(After)e(the)g(I/O)h(p)q(ort)f(addresses)h(are)f(found,)h(the)f(host)g
(adapter)g(can)h(b)q(e)g(in)o(terrogated)f(to)g(con\014rm)150
369 y(that)19 b(it)h(is,)g(indeed,)i(the)e(exp)q(ected)g(host)f(adapter.)33
b(These)20 b(tests)e(are)i(host)f(adapter)g(sp)q(eci\014c,)j(but)150
434 y(commonly)17 b(include)h(metho)q(ds)f(to)f(determine)h(the)f(BIOS)i
(base)e(address)h(\(whic)o(h)g(can)f(then)h(b)q(e)g(com-)150
498 y(pared)g(to)e(the)i(BIOS)g(address)g(found)f(during)i(the)e(BIOS)i
(signature)e(searc)o(h\))g(or)g(to)g(v)o(erify)g(a)g(unique)150
562 y(iden)o(ti\014cation)k(n)o(um)o(b)q(er)e(asso)q(ciated)g(with)g(the)g(b)
q(oard.)28 b(F)l(or)17 b(MCA)h(bus)1436 546 y Fm(14)1491 562
y FH(mac)o(hines,)h(eac)o(h)f(t)o(yp)q(e)g(of)150 627 y(b)q(oard)12
b(is)g(giv)o(en)h(a)f(unique)h(iden)o(ti\014cation)h(n)o(um)o(b)q(er)e(whic)o
(h)h(no)f(other)f(man)o(ufacturer)h(can)g(use|sev)o(eral)150
691 y(F)l(uture)17 b(Domain)f(host)g(adapters,)h(for)f(example,)h(also)g(use)
g(this)g(n)o(um)o(b)q(er)g(as)f(a)h(unique)h(iden)o(ti\014er)g(on)150
755 y(ISA)d(bus)f(mac)o(hines.)20 b(Other)14 b(metho)q(ds)g(of)g(v)o
(erifying)g(the)g(host)g(adapter)f(existence)i(and)g(function)f(will)150
820 y(b)q(e)i(a)o(v)m(ailable)h(to)d(the)i(programmer.)150
971 y FC(1.7.7.2.1.1)56 b(Requesting)18 b(the)f(IR)o(Q)150
1088 y FH(After)c(detection,)h(the)g FD(detect\(\))e FH(routine)i(m)o(ust)f
(request)g(an)o(y)h(needed)g(in)o(terrupt)g(or)f(DMA)g(c)o(hannels)150
1153 y(from)e(the)h(k)o(ernel.)19 b(There)12 b(are)f(16)g(in)o(terrupt)h(c)o
(hannels,)h(lab)q(eled)h(IR)o(Q)e(0)g(through)f(IR)o(Q)h(15.)18
b(The)12 b(k)o(ernel)150 1217 y(pro)o(vides)k(t)o(w)o(o)e(metho)q(ds)h(for)f
(setting)i(up)f(an)g(IR)o(Q)i(handler:)k FD(irqaction\(\))13
b FH(and)j FD(request_irq\(\))p FH(.)221 1305 y(The)g FD(request_irq\(\))f
FH(function)i(tak)o(es)f(t)o(w)o(o)f(parameters,)h(the)g(IR)o(Q)i(n)o(um)o(b)
q(er)f(and)f(a)h(p)q(oin)o(ter)g(to)150 1369 y(the)e(handler)h(routine.)k(It)
15 b(then)g(sets)g(up)g(a)f(default)i FD(sigaction)d FH(structure)i(and)g
(calls)h FD(irqaction\(\))p FH(.)150 1434 y(The)11 b(co)q(de)328
1417 y Fm(15)378 1434 y FH(for)f(the)h FD(request_irq\(\))f
FH(function)i(is)g(sho)o(wn)e(in)i(Figure)g(1.3.)18 b(I)11
b(will)i(limit)g(m)o(y)d(discussion)150 1498 y(to)15 b(the)g(more)g(general)g
FD(irqaction\(\))f FH(function.)221 1586 y(The)h(declaration)533
1569 y Fm(16)586 1586 y FH(for)g(the)g FD(irqaction\(\))f FH(function)i(is)
245 1711 y FD(int)24 b(irqaction\()e(unsigned)h(int)h(irq,)f(struct)g
(sigaction)g(*new)g(\))150 1901 y FH(where)16 b(the)g(\014rst)g(parameter,)f
FD(irq)p FH(,)h(is)g(the)g(n)o(um)o(b)q(er)h(of)e(the)h(IR)o(Q)h(that)e(is)i
(b)q(eing)g(requested,)g(and)f(the)150 1965 y(second)g(parameter,)e
FD(new)p FH(,)g(is)i(a)f(structure)g(with)g(the)g(de\014nition)1271
1949 y Fm(17)1326 1965 y FH(sho)o(wn)g(in)h(Figure)f(1.4.)221
2053 y(In)20 b(this)h(structure,)g FD(sa_handler)e FH(should)i(p)q(oin)o(t)g
(to)f(y)o(our)g(in)o(terrupt)g(handler)h(routine,)h(whic)o(h)150
2117 y(should)16 b(ha)o(v)o(e)f(a)g(de\014nition)i(similar)f(to)f(the)g
(follo)o(wing:)245 2242 y FD(void)24 b(fdomain_16x0_intr\()d(int)j(irq)f(\))p
150 2338 720 2 v 187 2369 a Fz(14)219 2385 y Fl(The)13 b(\\Micro-Channel)j
(Arc)o(hitecture")e(bus)g(is)f(IBM's)g(proprietary)i(32)e(bit)h(bus)f(for)g
(386)h(and)f(i486)h(mac)o(hines.)187 2421 y Fz(15)219 2437
y Fd(Linux)e Fl(0.99.7)h(k)o(ernel)i(source)e(co)q(de,)g Fk(linux/kerne)o(l/)
o(irq)o(.c)187 2473 y Fz(16)219 2489 y Fd(Linux)f Fl(0.99.5)h(k)o(ernel)i
(source)e(co)q(de,)g Fk(linux/kerne)o(l/)o(irq)o(.c)187 2525
y Fz(17)219 2541 y Fd(Linux)f Fl(0.99.5)h(k)o(ernel)i(source)e(co)q(de,)g
Fk(linux/inclu)o(de)o(/li)o(nu)o(x/s)o(ign)o(al)o(.h)p eop
%%Page: 51 60
51 59 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(51)245 363 y FD(int)24
b(request_irq\()e(unsigned)h(int)g(irq,)h(void)f(\(*handler\)\()f(int)i(\))g
(\))245 427 y({)293 492 y(struct)f(sigaction)g(sa;)293 620
y(sa.sa_handler)46 b(=)24 b(handler;)293 685 y(sa.sa_flags)94
b(=)24 b(0;)293 749 y(sa.sa_mask)118 b(=)24 b(0;)293 813 y(sa.sa_restorer)e
(=)i(NULL;)293 878 y(return)f(irqaction\()g(irq,)g(&sa)g(\);)245
942 y(})639 1112 y FH(Figure)16 b(1.3:)j(The)c FD(request)p
1138 1112 15 2 v 16 w(irq\(\))g FH(F)l(unction)245 1731 y FD(struct)23
b(sigaction)245 1796 y({)293 1860 y(__sighandler_t)f(sa_handler;)293
1924 y(sigset_t)166 b(sa_mask;)293 1989 y(int)286 b(sa_flags;)293
2053 y(void)262 b(\(*sa_restorer\)\(void\);)245 2118 y(};)678
2288 y FH(Figure)15 b(1.4:)k(The)c FD(sigaction)f FH(Structure)p
eop
%%Page: 52 61
52 60 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(52)150 88 y(where)15
b FD(irq)f FH(will)i(b)q(e)f(the)g(n)o(um)o(b)q(er)g(of)f(the)g(IR)o(Q)i
(whic)o(h)f(caused)g(the)g(in)o(terrupt)g(handler)g(routine)g(to)f(b)q(e)150
153 y(in)o(v)o(ok)o(ed.)221 241 y(The)k FD(sa_mask)f FH(v)m(ariable)j(is)e
(used)h(as)f(an)g(in)o(ternal)h(\015ag)f(b)o(y)g(the)g FD(irqaction\(\))f
FH(routine.)29 b(T)l(radi-)150 305 y(tionally)l(,)16 b(this)g(v)m(ariable)g
(is)g(set)f(to)g(zero)g(prior)g(to)g(calling)i FD(irqaction\(\))p
FH(.)221 393 y(The)g FD(sa_flags)e FH(v)m(ariable)k(can)e(b)q(e)g(set)g(to)f
(zero)h(or)f(to)g FD(SA_INTERRUPT)p FH(.)23 b(If)18 b(zero)e(is)i(selected,)g
(the)150 457 y(in)o(terrupt)i(handler)h(will)h(run)f(with)f(other)g(in)o
(terrupts)g(enabled,)i(and)f(will)g(return)f(via)h(the)f(signal-)150
522 y(handling)f(return)e(functions.)26 b(This)18 b(option)g(is)f
(recommended)h(for)f(relativ)o(ely)h(slo)o(w)f(IR)o(Q's,)h(suc)o(h)f(as)150
586 y(those)f(asso)q(ciated)g(with)g(the)g(k)o(eyb)q(oard)f(and)h(timer)g(in)
o(terrupts.)22 b(If)17 b FD(SA_INTERRUPT)d FH(is)i(selected,)h(the)150
650 y(handler)k(will)g(b)q(e)g(called)g(with)f(in)o(terrupts)g(disabled)i
(and)e(return)f(will)j(a)o(v)o(oid)d(the)h(signal-handling)150
715 y(return)i(functions.)40 b FD(SA_INTERRUPT)21 b FH(selects)h(\\fast")f
(IR)o(Q)i(handler)f(in)o(v)o(o)q(cation)h(routines,)g(and)f(is)150
779 y(recommended)d(for)e(in)o(terrupt)h(driv)o(en)h(hard)f(disk)g(routines.)
29 b(The)18 b(in)o(terrupt)g(handler)h(should)g(turn)150 843
y(in)o(terrupts)c(on)g(as)g(so)q(on)g(as)g(p)q(ossible,)i(ho)o(w)o(ev)o(er,)d
(so)h(that)f(other)h(in)o(terrupts)g(can)h(b)q(e)f(pro)q(cessed.)221
931 y(The)g FD(sa_restorer)f FH(v)m(ariable)i(is)g(not)f(curren)o(tly)g
(used,)h(and)f(is)h(traditionally)g(set)f(to)g FD(NULL)p FH(.)221
1019 y(The)k FD(request_irq\(\))d FH(and)j FD(irqaction\(\))f
FH(functions)h(will)i(return)d(zero)h(if)g(the)g(IR)o(Q)h(w)o(as)d(suc-)150
1083 y(cessfully)g(assigned)f(to)f(the)g(sp)q(eci\014ed)j(in)o(terrupt)e
(handler)g(routine.)21 b(Non-zero)16 b(result)g(co)q(des)g(ma)o(y)e(b)q(e)150
1148 y(in)o(terpreted)i(as)f(follo)o(ws:)150 1265 y FD(-EINVAL)132
b FH(Either)16 b(the)g(IR)o(Q)g(requested)h(w)o(as)d(larger)i(than)f(15,)g
(or)g(a)h FD(NULL)f FH(p)q(oin)o(ter)h(w)o(as)f(passed)450
1329 y(instead)h(of)f(a)f(v)m(alid)j(p)q(oin)o(ter)f(to)f(the)g(in)o(terrupt)
g(handler)i(routine.)150 1433 y FD(-EBUSY)156 b FH(The)21 b(IR)o(Q)h
(requested)f(has)g(already)h(b)q(een)g(allo)q(cated)g(to)e(another)g(in)o
(terrupt)i(han-)450 1497 y(dler.)e(This)15 b(situation)g(should)g(nev)o(er)f
(o)q(ccur,)h(and)f(is)h(reasonable)f(cause)h(for)e(a)h(call)i(to)450
1561 y FD(panic\(\))p FH(.)221 1679 y(The)f(k)o(ernel)i(uses)f(an)f(In)o(tel)
i(\\in)o(terrupt)e(gate")g(to)g(set)g(up)h(IR)o(Q)h(handler)g(routines)f
(requested)g(via)150 1743 y(the)h FD(irqaction\(\))f FH(function.)27
b(The)18 b(In)o(tel)g(i486)f(man)o(ual)h([)p FC(?)p FH(,)e(p.)i(9-11])e
(explains)j(the)e(in)o(terrupt)h(gate)150 1807 y(as)d(follo)o(ws:)332
1945 y(In)o(terrupts)10 b(using)p FA(:)e(:)g(:)e FH(in)o(terrupt)11
b(gates)p FA(:)d(:)g(:)d FH(cause)10 b(the)g(TF)g(\015ag)g([trap)f(\015ag])g
(to)h(b)q(e)h(cleared)264 2009 y(after)j(its)h(curren)o(t)g(v)m(alue)i(is)e
(sa)o(v)o(ed)g(on)g(the)g(stac)o(k)f(as)h(part)g(of)f(the)h(sa)o(v)o(ed)g
(con)o(ten)o(ts)g(of)f(the)264 2074 y(EFLA)o(GS)h(register.)23
b(In)17 b(so)e(doing,)i(the)f(pro)q(cessor)g(prev)o(en)o(ts)g(instruction)h
(tracing)f(from)264 2138 y(a\013ecting)h(in)o(terrupt)f(resp)q(onse.)24
b(A)16 b(subsequen)o(t)h(IRET)g([in)o(terrupt)f(return])g(instruction)264
2202 y(restores)e(the)i(TF)f(\015ag)g(to)g(the)g(v)m(alue)i(in)f(the)g(sa)o
(v)o(ed)f(con)o(ten)o(ts)g(of)g(the)g(EFLA)o(GS)g(register)264
2267 y(on)g(the)g(stac)o(k.)332 2331 y FA(:)8 b(:)g(:)22 b
FH(An)17 b(in)o(terrupt)g(whic)o(h)h(uses)f(an)g(in)o(terrupt)g(gate)f
(clears)i(the)f(IF)g(\015ag)f([interrupt-)264 2396 y(enable)j(\015ag],)e
(whic)o(h)i(prev)o(en)o(ts)e(other)h(in)o(terrupts)g(from)f(in)o(terfering)h
(with)h(the)e(curren)o(t)264 2460 y(in)o(terrupt)i(handler.)31
b(A)18 b(subsequen)o(t)i(IRET)f(instruction)h(restores)e(the)g(IF)h(\015ag)f
(to)g(the)264 2524 y(v)m(alue)e(in)g(the)f(sa)o(v)o(ed)g(con)o(ten)o(ts)g(of)
f(the)i(EFLA)o(GS)f(register)g(on)g(the)g(stac)o(k.)p eop
%%Page: 53 62
53 61 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(53)150 88 y FC(1.7.7.2.2)55
b(Requesting)18 b(the)g(DMA)f(c)o(hannel)150 206 y FH(Some)i(SCSI)g(host)f
(adapters)g(use)h(DMA)f(to)g(access)h(large)f(blo)q(c)o(ks)i(of)e(data)g(in)h
(memory)l(.)30 b(Since)20 b(the)150 270 y(CPU)f(do)q(es)h(not)f(ha)o(v)o(e)g
(to)g(deal)i(with)f(the)f(individual)k(DMA)c(requests,)h(data)f(transfers)g
(are)g(faster)150 334 y(than)f(CPU-mediated)g(transfers)f(and)h(allo)o(w)g
(the)f(CPU)h(to)f(do)h(other)f(useful)i(w)o(ork)d(during)j(a)e(blo)q(c)o(k)
150 399 y(transfer)d(\(assuming)i(in)o(terrupts)f(are)g(enabled\).)221
487 y(The)10 b(host)g(adapter)g(will)i(use)f(a)f(sp)q(eci\014c)j(DMA)c(c)o
(hannel.)20 b(This)11 b(DMA)f(c)o(hannel)h(will)i(b)q(e)e(determined)150
551 y(b)o(y)i(the)h FD(detect\(\))e FH(function)j(and)f(requested)g(from)e
(the)i(k)o(ernel)g(with)g(the)g FD(request_dma\(\))d FH(function.)150
615 y(This)k(function)g(tak)o(es)e(the)h(DMA)g(c)o(hannel)h(n)o(um)o(b)q(er)g
(as)e(its)i(only)f(parameter)g(and)g(returns)g(zero)g(if)h(the)150
680 y(DMA)g(c)o(hannel)h(w)o(as)e(successfully)k(allo)q(cated.)i(Non-zero)c
(results)f(ma)o(y)g(b)q(e)h(in)o(terpreted)g(as)e(follo)o(ws:)150
797 y FD(-EINVAL)132 b FH(The)15 b(DMA)g(c)o(hannel)h(n)o(um)o(b)q(er)g
(requested)g(w)o(as)e(larger)h(than)g(7.)150 900 y FD(-EBUSY)156
b FH(The)22 b(requested)f(DMA)g(c)o(hannel)i(has)e(already)h(b)q(een)g(allo)q
(cated.)39 b(This)22 b(is)g(a)f(v)o(ery)450 965 y(serious)e(situation,)i(and)
e(will)h(probably)g(cause)f(an)o(y)g(SCSI)h(requests)f(to)f(fail.)32
b(It)19 b(is)450 1029 y(w)o(orth)o(y)14 b(of)h(a)g(call)h(to)e
FD(panic\(\))p FH(.)150 1180 y FC(1.7.7.2.3)55 b FD(info\(\))150
1298 y FH(The)14 b FD(info\(\))e FH(function)i(merely)g(returns)f(a)g(p)q
(oin)o(ter)h(to)f(a)g(static)g(area)f(con)o(taining)i(a)f(brief)h
(description)150 1362 y(of)k(the)g(lo)o(w-lev)o(el)h(driv)o(er.)29
b(This)19 b(description,)h(whic)o(h)f(is)g(similar)g(to)e(that)h(p)q(oin)o
(ted)h(to)e(b)o(y)h(the)h FD(name)150 1426 y FH(v)m(ariable,)d(will)h(b)q(e)f
(prin)o(ted)g(at)e(b)q(o)q(ot)i(time.)150 1578 y FC(1.7.7.2.4)55
b FD(queuecommand\(\))150 1695 y FH(The)19 b FD(queuecommand\(\))f
FH(function)i(sets)e(up)i(the)f(host)g(adapter)g(for)f(pro)q(cessing)i(a)f
(SCSI)h(command)150 1759 y(and)j(then)g(returns.)42 b(When)23
b(the)f(command)h(is)g(\014nished,)j(the)c FD(done\(\))g FH(function)h(is)g
(called)i(with)150 1824 y(the)20 b FD(Scsi_Cmnd)e FH(structure)i(p)q(oin)o
(ter)g(as)g(a)f(parameter.)33 b(This)21 b(allo)o(ws)f(the)g(SCSI)g(command)g
(to)f(b)q(e)150 1888 y(executed)h(in)g(an)f(in)o(terrupt-driv)o(en)i
(fashion.)32 b(Before)19 b(returning,)i(the)e FD(queuecommand\(\))e
FH(function)150 1952 y(m)o(ust)e(do)g(sev)o(eral)g(things:)206
2078 y(1.)22 b(Sa)o(v)o(e)14 b(the)i(p)q(oin)o(ter)f(to)g(the)g
FD(Scsi_Cmnd)f FH(structure.)206 2179 y(2.)22 b(Sa)o(v)o(e)16
b(the)g(p)q(oin)o(ter)h(to)f(the)h FD(done\(\))e FH(function)j(in)f(the)f
FD(scsi_done\(\))f FH(function)j(p)q(oin)o(ter)f(in)g(the)264
2244 y FD(Scsi_Cmnd)d FH(structure.)19 b(See)d(section)g(1.7.7.2.5)c(for)j
(more)f(information.)206 2345 y(3.)22 b(Set)17 b(up)h(the)g(sp)q(ecial)h
FD(Scsi_Cmnd)d FH(v)m(ariables)j(required)f(b)o(y)f(the)h(driv)o(er.)27
b(See)18 b(section)g(1.7.8)e(for)264 2410 y(detailed)g(information)g(on)f
(the)g FD(Scsi_Cmnd)f FH(structure.)p eop
%%Page: 54 63
54 62 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(54)206 88 y(4.)22
b(Start)17 b(the)h(SCSI)g(command.)28 b(F)l(or)17 b(an)h(adv)m(anced)h(host)f
(adapter,)f(this)i(ma)o(y)e(b)q(e)h(as)g(simple)h(as)264 153
y(sending)d(the)f(command)g(to)f(a)g(host)h(adapter)f(\\mailb)q(o)o(x.")20
b(F)l(or)15 b(less)g(adv)m(anced)h(host)f(adapters,)264 217
y(the)g(ARBITRA)l(TION)j(phase)d(is)h(man)o(ually)g(started.)221
342 y(The)10 b FD(queuecommand\(\))e FH(function)j(is)g(called)h
FB(only)h FH(if)e(the)f FD(can_queue)f FH(v)m(ariable)i(\(see)f(section)h
(1.7.7.1.2\))150 407 y(is)g(non-zero.)18 b(Otherwise)11 b(the)f
FD(command\(\))f FH(function)i(is)g(used)g(for)e(all)i(SCSI)g(requests.)18
b(The)11 b FD(queuecommand\(\))150 471 y FH(function)17 b(should)g(return)f
(zero)h(on)f(success)h(\(the)e(curren)o(t)i(high-lev)o(el)h(SCSI)f(co)q(de)g
(presen)o(tly)g(ignores)150 535 y(the)e(return)g(v)m(alue\).)150
687 y FC(1.7.7.2.5)55 b FD(done\(\))150 804 y FH(The)18 b FD(done\(\))f
FH(function)i(is)f(called)i(after)d(the)h(SCSI)h(command)f(completes.)28
b(The)18 b(single)i(parameter)150 868 y(that)10 b(this)h(command)f(requires)h
(is)g(a)f(p)q(oin)o(ter)h(to)f(the)h(same)f FD(Scsi_Cmnd)f
FH(structure)h(that)g(w)o(as)g(previously)150 933 y(passed)16
b(to)g(the)g FD(queuecommand\(\))e FH(function.)23 b(Before)16
b(the)g FD(done\(\))f FH(function)i(is)f(called,)i(the)e FD(result)150
997 y FH(v)m(ariable)h(m)o(ust)e(b)q(e)i(set)f(correctly)l(.)22
b(The)16 b FD(result)f FH(v)m(ariable)i(is)f(a)g(32)f(bit)h(in)o(teger,)g
(eac)o(h)g(b)o(yte)g(of)f(whic)o(h)150 1061 y(has)g(sp)q(eci\014c)i(meaning:)
150 1179 y(Byte)e(0)g(\(LSB\))32 b(This)17 b(b)o(yte)g(con)o(tains)g(the)g
(SCSI)g(ST)l(A)l(TUS)h(co)q(de)f(for)f(the)h(command,)g(as)f(describ)q(ed)450
1243 y(in)g(section)g(1.7.2.1.)150 1347 y(Byte)f(1)168 b(This)16
b(b)o(yte)f(con)o(tains)g(the)g(SCSI)h(MESSA)o(GE,)f(as)f(describ)q(ed)k(in)e
(section)f(1.7.2.1.)150 1450 y(Byte)g(2)168 b(This)13 b(b)o(yte)g(holds)g
(the)g(host)g(adapter's)f(return)g(co)q(de.)20 b(The)13 b(v)m(alid)h(co)q
(des)g(for)e(this)h(b)o(yte)450 1514 y(are)i(giv)o(en)h(in)g
FD(scsi.h)e FH(and)h(are)g(describ)q(ed)i(b)q(elo)o(w:)450
1628 y FD(DID)p 525 1628 15 2 v 17 w(OK)163 b FH(No)15 b(error.)450
1731 y FD(DID)p 525 1731 V 17 w(NO)p 590 1731 V 17 w(CONNECT)750
1796 y FH(SCSI)g(SELECTION)g(failed)g(b)q(ecause)g(there)f(w)o(as)f(no)h
(device)i(at)d(the)750 1860 y(address)i(sp)q(eci\014ed.)450
1963 y FD(DID)p 525 1963 V 17 w(BUS)p 614 1963 V 17 w(BUSY)750
2028 y FH(SCSI)h(ARBITRA)l(TION)h(failed.)450 2131 y FD(DID)p
525 2131 V 17 w(TIME)p 638 2131 V 16 w(OUT)750 2196 y FH(A)12
b(time-out)g(o)q(ccurred)g(for)g(some)f(unkno)o(wn)h(reason,)g(probably)h
(dur-)750 2260 y(ing)j(SELECTION)g(or)f(while)h(w)o(aiting)g(for)e
(RESELECTION.)450 2363 y FD(DID)p 525 2363 V 17 w(BAD)p 614
2363 V 17 w(TARGET)750 2428 y FH(The)k(SCSI)g(ID)g(of)f(the)g(target)f(w)o
(as)h(the)h(same)f(as)g(the)h(SCSI)g(ID)f(of)750 2492 y(the)e(host)g
(adapter.)p eop
%%Page: 55 64
55 63 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(55)450 88 y FD(DID)p
525 88 15 2 v 17 w(ABORT)91 b FH(The)11 b(high-lev)o(el)j(co)q(de)e(called)h
(the)e(lo)o(w-lev)o(el)i FD(abort\(\))d FH(function)i(\(see)750
153 y(section)k(1.7.7.2.7\).)450 256 y FD(DID)p 525 256 V 17
w(PARITY)67 b FH(A)15 b(SCSI)h(P)l(ARITY)g(error)f(w)o(as)f(detected.)450
360 y FD(DID)p 525 360 V 17 w(ERROR)91 b FH(An)14 b(error)f(o)q(ccurred)i
(whic)o(h)g(lac)o(ks)f(a)g(more)f(appropriate)h(error)f(co)q(de)750
424 y(\(for)h(example,)i(an)f(in)o(ternal)h(host)f(adapter)g(error\).)450
528 y FD(DID)p 525 528 V 17 w(RESET)91 b FH(The)11 b(high-lev)o(el)j(co)q(de)
e(called)h(the)e(lo)o(w-lev)o(el)i FD(reset\(\))d FH(function)i(\(see)750
592 y(section)k(1.7.7.2.8\).)450 695 y FD(DID)p 525 695 V 17
w(BAD)p 614 695 V 17 w(INTR)750 760 y FH(An)g(unexp)q(ected)i(in)o(terrupt)e
(o)q(ccurred)g FB(and)21 b FH(there)15 b(is)i(no)e(appropri-)750
824 y(ate)g(w)o(a)o(y)f(to)g(handle)j(this)f(in)o(terrupt.)450
937 y(Note)k(that)f(returning)h FD(DID_BUS_BUSY)f FH(will)i(force)f(the)g
(command)g(to)f(b)q(e)i(retried,)450 1002 y(whereas)15 b(returning)h
FD(DID_NO_CONNECT)d FH(will)k(ab)q(ort)e(the)g(command.)150
1105 y(Byte)g(3)g(\(MSB\))450 1170 y(This)j(b)o(yte)f(is)g(for)g(a)f
(high-lev)o(el)k(return)d(co)q(de,)h(and)f(should)h(b)q(e)g(left)f(as)g(zero)
g(b)o(y)g(the)450 1234 y(lo)o(w-lev)o(el)g(co)q(de.)221 1351
y(Curren)o(t)e(lo)o(w-lev)o(el)i(driv)o(ers)f(do)g(not)f(uniformly)i(\(or)e
(correctly\))g(implemen)o(t)i(error)f(rep)q(orting,)f(so)150
1416 y(it)k(ma)o(y)f(b)q(e)i(b)q(etter)f(to)f(consult)i FD(scsi.c)e
FH(to)h(determine)h(exactly)f(ho)o(w)f(errors)h(should)h(b)q(e)f(rep)q
(orted,)150 1480 y(rather)c(than)g(exploring)h(existing)g(driv)o(ers.)150
1631 y FC(1.7.7.2.6)55 b FD(command\(\))150 1749 y FH(The)21
b FD(command\(\))e FH(function)i(pro)q(cesses)g(a)f(SCSI)h(command)f(and)h
(returns)f(when)h(the)f(command)g(is)150 1813 y(\014nished.)k(When)16
b(the)g(original)h(SCSI)g(co)q(de)f(w)o(as)f(written,)h(in)o(terrupt-driv)o
(en)h(driv)o(ers)f(w)o(ere)g(not)f(sup-)150 1877 y(p)q(orted.)20
b(The)13 b(old)i(driv)o(ers)f(are)f(m)o(uc)o(h)h(less)g(e\016cien)o(t)g(\(in)
h(terms)e(of)g(resp)q(onse)h(time)g(and)g(latency\))g(than)150
1942 y(the)f(curren)o(t)g(in)o(terrupt-driv)o(en)h(driv)o(ers,)f(but)g(are)g
(also)g(m)o(uc)o(h)g(easier)g(to)g(write.)19 b(F)l(or)12 b(new)h(driv)o(ers,)
h(this)150 2006 y(command)g(can)h(b)q(e)g(replaced)h(with)e(a)h(call)g(to)f
(the)h FD(queuecommand\(\))d FH(function,)j(as)f(demonstrated)g(in)150
2070 y(Figure)h(1.5.)365 2054 y Fm(18)221 2158 y FH(The)f(return)f(v)m(alue)i
(is)f(the)g(same)f(as)h(the)g FD(result)e FH(v)m(ariable)k(in)e(the)g
FD(Scsi_Cmnd)e FH(structure.)19 b(Please)150 2223 y(see)c(sections)h
(1.7.7.2.5)c(and)k(1.7.8)d(for)i(more)g(details.)p 150 2253
720 2 v 187 2285 a Fz(18)219 2301 y Fd(Linux)d Fl(0.99.5)h(k)o(ernel,)h
Fk(linux/kern)o(el/)o(bl)o(k)p 891 2301 12 2 v 11 w(drv/scsi/a)o(ha1)o(54)o
(2.c)o Fl(,)c(written)j(b)o(y)h(T)m(omm)o(y)e(Thorn.)p eop
%%Page: 56 65
56 64 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(56)245 758 y FD(static)23
b(volatile)g(int)h(internal_done_flag)93 b(=)23 b(0;)245 822
y(static)g(volatile)g(int)h(internal_done_errcode)d(=)i(0;)245
887 y(static)g(void)215 b(internal_done\()22 b(Scsi_Cmnd)g(*SCpnt)h(\))245
951 y({)293 1016 y(internal_done_errcode)e(=)j(SCpnt->result;)293
1080 y(++internal_done_flag;)245 1144 y(})245 1273 y(int)g(aha1542_command\()
e(Scsi_Cmnd)g(*SCpnt)h(\))245 1337 y({)293 1402 y(aha1542_queuecommand\()e
(SCpnt,)i(internal_done)f(\);)293 1530 y(while)h(\(!internal_done_flag\);)293
1595 y(internal_done_flag)f(=)h(0;)293 1659 y(return)g
(internal_done_errcode;)245 1723 y(})636 1894 y FH(Figure)15
b(1.5:)k(Example)d FD(command\(\))e FH(F)l(unction)p eop
%%Page: 57 66
57 65 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(57)150 88 y FC(1.7.7.2.7)55
b FD(abort\(\))150 206 y FH(The)16 b(high-lev)o(el)i(SCSI)e(co)q(de)g
(handles)h(all)g(timeouts.)k(This)16 b(frees)g(the)g(lo)o(w-lev)o(el)h(driv)o
(er)f(from)f(ha)o(ving)150 270 y(to)i(do)h(timing,)h(and)f(p)q(ermits)h
(di\013eren)o(t)g(timeout)e(p)q(erio)q(ds)j(to)d(b)q(e)h(used)h(for)e
(di\013eren)o(t)i(devices)h(\(e.g.,)150 334 y(the)e(timeout)g(for)f(a)g(SCSI)
i(tap)q(e)f(driv)o(e)g(is)g(nearly)h(in\014nite,)h(whereas)d(the)h(timeout)g
(for)f(a)h(SCSI)g(disk)150 399 y(driv)o(e)e(is)f(relativ)o(ely)i(short\).)221
487 y(The)c FD(abort\(\))e FH(function)j(is)f(used)h(to)e(request)h(that)f
(the)h(curren)o(tly)g(outstanding)g(SCSI)g(command,)150 551
y(indicated)19 b(b)o(y)d(the)h FD(Scsi_Cmnd)e FH(p)q(oin)o(ter,)j(b)q(e)f(ab)
q(orted.)24 b(After)17 b(setting)g(the)f FD(result)g FH(v)m(ariable)i(in)g
(the)150 615 y FD(Scsi_Cmnd)c FH(structure,)h(the)g FD(abort\(\))f
FH(function)j(returns)e(zero.)20 b(If)15 b FD(code)p FH(,)g(the)g(second)h
(parameter)f(to)150 680 y(the)f FD(abort\(\))e FH(function,)j(is)f(zero,)f
(then)h FD(result)f FH(should)i(b)q(e)f(set)f(to)g FD(DID_ABORT)p
FH(.)18 b(Otherwise,)d FD(result)150 744 y FH(shoudl)h(b)q(e)g(set)e(equal)i
(to)e FD(code)p FH(.)20 b(If)15 b FD(code)f FH(is)i(not)e(zero,)h(it)g(is)h
(usually)g FD(DID_TIME_OUT)d FH(or)i FD(DID_RESET)p FH(.)221
832 y(Curren)o(tly)l(,)e(none)h(of)f(the)g(lo)o(w-lev)o(el)i(driv)o(ers)f(is)
f(able)i(to)d(correctly)i(ab)q(ort)f(a)g(SCSI)h(command.)19
b(The)150 896 y(initiator)13 b(should)f(request)g(\(b)o(y)g(asserting)g(the)g
FD(-ATN)f FH(line\))i(that)e(the)h(target)f(en)o(ter)h(a)f(MESSA)o(GE)h(OUT)
150 961 y(phase.)20 b(Then,)c(the)f(initiator)h(should)g(send)g(an)f(ABOR)l
(T)h(message)f(to)f(the)i(target.)150 1112 y FC(1.7.7.2.8)55
b FD(reset\(\))150 1229 y FH(The)15 b FD(reset\(\))e FH(function)i(is)g(used)
g(to)f(reset)g(the)g(SCSI)h(bus.)20 b(After)14 b(a)g(SCSI)h(bus)g(reset,)f
(an)o(y)g(executing)150 1294 y(command)h(should)h(fail)g(with)g(a)f
FD(DID_RESET)f FH(result)h(co)q(de)h(\(see)f(section)h(1.7.7.2.5\).)221
1381 y(Curren)o(tly)l(,)k(none)g(of)f(the)g(lo)o(w-lev)o(el)i(driv)o(ers)e
(handles)i(resets)e(correctly)l(.)33 b(T)l(o)19 b(correctly)g(reset)g(a)150
1446 y(SCSI)h(command,)f(the)g(initiator)g(should)h(request)f(\(b)o(y)g
(asserting)g(the)f FD(-ATN)h FH(line\))h(that)e(the)h(target)150
1510 y(en)o(ter)d(a)h(MESSA)o(GE)f(OUT)g(phase.)25 b(Then,)16
b(the)h(initiator)g(should)h(send)f(a)f(BUS)h(DEVICE)g(RESET)150
1574 y(message)d(to)g(the)g(target.)19 b(It)14 b(ma)o(y)g(also)g(b)q(e)h
(necessary)g(to)f(initiate)h(a)f(SCSI)i(RESET)e(b)o(y)h(asserting)f(the)150
1639 y FD(-RST)g FH(line,)i(whic)o(h)f(will)h(cause)e(all)i(target)d(devices)
j(to)d(b)q(e)i(reset.)20 b(After)14 b(a)g(reset,)f(it)i(ma)o(y)f(b)q(e)h
(necessary)150 1703 y(to)g(renegotiate)g(a)f(sync)o(hronous)i(comm)o
(unications)f(proto)q(col)h(with)f(the)g(targets.)150 1855
y FC(1.7.7.2.9)55 b FD(slave)p 514 1855 15 2 v 17 w(attach\(\))150
1972 y FH(The)16 b FD(slave)p 367 1972 V 17 w(attach\(\))f
FH(function)h(is)h FB(not)j FH(curren)o(tly)d(implemen)o(ted.)24
b(This)16 b(function)h(w)o(ould)g(b)q(e)f(used)150 2036 y(to)h(negotiate)g
(sync)o(hronous)g(comm)o(unications)h(b)q(et)o(w)o(een)g(the)f(host)g
(adapter)g(and)g(the)h(target)e(driv)o(e.)150 2101 y(This)i(negotiation)g
(requires)h(an)e(exc)o(hange)h(of)g(a)f(pair)h(of)f(SYNCHR)o(ONOUS)j(D)o(A)l
(T)l(A)d(TRANSFER)150 2165 y(REQUEST)k(messages)g(b)q(et)o(w)o(een)f(the)h
(initiator)g(and)g(the)g(target.)35 b(This)21 b(exc)o(hange)g(should)h(o)q
(ccur)150 2229 y(under)16 b(the)f(follo)o(wing)h(conditions)h([)p
FC(?)p FH(]:)332 2354 y(A)k(SCSI)h(device)h(that)e(supp)q(orts)g(sync)o
(hronous)g(data)g(transfer)g(recognizes)h(it)f(has)264 2419
y(not)d(comm)o(unicated)g(with)h(the)f(other)g(SCSI)h(device)h(since)f
(receiving)h(the)f(last)f(\\hard")264 2483 y(RESET.)p eop
%%Page: 58 67
58 66 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(58)332 88 y(A)21 b(SCSI)h(device)h
(that)e(supp)q(orts)g(sync)o(hronous)g(data)g(transfer)g(recognizes)h(it)f
(has)264 153 y(not)15 b(comm)o(unicated)i(with)g(the)f(other)g(SCSI)g(device)
i(since)f(receiving)h(a)e(BUS)g(DEVICE)264 217 y(RESET)f(message.)150
369 y FC(1.7.7.2.10)55 b FD(bios)p 516 369 15 2 v 17 w(param\(\))150
486 y FE(Linux)16 b FH(supp)q(orts)g(the)g(MS-DOS)738 469 y
Fm(19)792 486 y FH(hard)g(disk)h(partitioning)h(system.)k(Eac)o(h)16
b(disk)h(con)o(tains)f(a)g(\\par-)150 550 y(tition)i(table")g(whic)o(h)g
(de\014nes)h(ho)o(w)e(the)h(disk)g(is)g(divided)i(in)o(to)d(logical)i
(sections.)28 b(In)o(terpretation)17 b(of)150 614 y(this)i(partition)h(table)
f(requires)g(information)g(ab)q(out)g(the)g(size)h(of)e(the)h(disk)h(in)g
(terms)e(of)g(cylinders,)150 679 y(heads,)d(and)g(sectors)f(p)q(er)h
(cylinder.)22 b(SCSI)16 b(disks,)f(ho)o(w)o(ev)o(er,)f(hide)i(their)f(ph)o
(ysical)h(geometry)e(and)h(are)150 743 y(accessed)h(logically)h(as)d(a)h(con)
o(tiguous)g(list)h(of)f(sectors.)k(Therefore,)c(in)g(order)g(to)g(b)q(e)g
(compatible)i(with)150 808 y(MS-DOS,)h(the)f(SCSI)h(host)g(adapter)f(will)i
(\\lie")f(ab)q(out)g(its)g(geometry)l(.)26 b(The)18 b(ph)o(ysical)h(geometry)
d(of)150 872 y(the)h(SCSI)g(disk,)g(while)h(a)o(v)m(ailable,)g(is)f(seldom)g
(used)g(as)f(the)h(\\logical)g(geometry)l(.")23 b(\(The)17
b(reasons)f(for)150 936 y(this)g(in)o(v)o(olv)o(e)f(arc)o(haic)h(and)f
(arbitrary)g(limitations)h(imp)q(osed)h(b)o(y)e(MS-DOS.\))221
1024 y FE(Linux)i FH(needs)h(to)f(determine)i(the)f(\\logical)h(geometry")d
(so)i(that)f(it)h(can)g(correctly)f(mo)q(dify)i(and)150 1088
y(in)o(terpret)g(the)h(partition)f(table.)33 b(Unfortunately)l(,)20
b(there)f(is)h(no)f(standard)g(metho)q(d)g(for)g(con)o(v)o(erting)150
1153 y(b)q(et)o(w)o(een)d(ph)o(ysical)i(and)e(logical)h(geometry)l(.)k
(Hence,)c(the)f FD(bios)p 1274 1153 V 17 w(param\(\))f FH(function)i(w)o(as)e
(in)o(tro)q(duced)150 1217 y(in)h(an)f(attempt)f(to)h(pro)o(vide)h(access)f
(to)g(the)g(host)g(adapter)f(geometry)h(information.)221 1305
y(The)h FD(size)f FH(parameter)h(is)g(the)g(size)h(of)f(the)g(disk)h(in)g
(sectors.)k(Some)16 b(host)g(adapters)g(use)g(a)g(deter-)150
1369 y(ministic)f(form)o(ula)e(based)h(on)f(this)h(n)o(um)o(b)q(er)g(to)f
(calculate)i(the)e(logical)i(geometry)d(of)h(the)h(driv)o(e.)20
b(Other)150 1434 y(host)12 b(adapters)f(store)g(geometry)h(information)g(in)h
(tables)f(whic)o(h)h(the)f(driv)o(er)g(can)g(access.)19 b(T)l(o)12
b(facilitate)150 1498 y(this)j(access,)f(the)g FD(dev)f FH(parameter)h(con)o
(tains)g(the)g(driv)o(e's)g(device)i(n)o(um)o(b)q(er.)j(Tw)o(o)14
b(macros)f(are)h(de\014ned)150 1562 y(in)19 b FD(linux/fs.h)f
FH(whic)o(h)h(will)h(help)g(to)e(in)o(terpret)h(this)g(v)m(alue:)28
b FD(MAJOR\(dev\))17 b FH(is)i(the)g(device's)g(ma)s(jor)150
1627 y(n)o(um)o(b)q(er,)i(and)e FD(MINOR\(dev\))g FH(is)h(the)f(device's)i
(minor)f(n)o(um)o(b)q(er.)33 b(These)20 b(are)g(the)f(same)h(ma)s(jor)e(and)
150 1691 y(minor)g(device)i(n)o(um)o(b)q(ers)e(used)h(b)o(y)f(the)g(standard)
f FE(Linux)h FD(mknod)f FH(command)h(to)g(create)f(the)i(device)150
1756 y(in)g(the)g FD(/dev)f FH(directory)l(.)30 b(The)19 b
FD(info)f FH(parameter)g(p)q(oin)o(ts)h(to)f(an)g(arra)o(y)g(of)g(three)g(in)
o(tegers)h(that)f(the)150 1820 y FD(bios_param\(\))c FH(function)i(will)g
(\014ll)h(in)f(b)q(efore)g(returning:)150 1937 y FD(info[0])132
b FH(Num)o(b)q(er)16 b(of)e(heads)150 2041 y FD(info[1])132
b FH(Num)o(b)q(er)16 b(of)e(sectors)h(p)q(er)h(cylinder)150
2144 y FD(info[2])132 b FH(Num)o(b)q(er)16 b(of)e(cylinders)221
2261 y(The)k(information)h(in)g FD(info)e FH(is)i FB(not)k
FH(the)18 b(ph)o(ysical)i(geometry)d(of)h(the)h(driv)o(e,)g(but)f(only)h(a)f
FB(lo)n(gic)n(al)150 2326 y FH(geometry)12 b(that)g(is)h(iden)o(tical)i(to)d
(the)g FB(lo)n(gic)n(al)17 b FH(geometry)11 b(used)j(b)o(y)e(MS-DOS)h(to)f
(access)h(the)g(driv)o(e.)20 b(The)150 2390 y(distinction)d(b)q(et)o(w)o(een)
f(ph)o(ysical)g(and)f(logical)i(geometry)d(cannot)h(b)q(e)h(o)o(v)o
(erstressed.)p 150 2430 720 2 v 187 2461 a Fz(19)219 2477 y
Fl(MS-DOS)e(is)f(a)g(registered)i(trademark)f(of)e(Microsoft)i(Corp)q
(oration.)p eop
%%Page: 59 68
59 67 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(59)150 88 y Fp(1.7.8)55
b(The)19 b Fo(Scsi)p 543 88 16 2 v 17 w(Cmnd)e Fp(Structure)150
206 y FH(The)c FD(Scsi_Cmnd)e FH(structure,)661 189 y Fm(20)711
206 y FH(as)i(sho)o(wn)f(in)i(Figure)f(1.6,)f(is)h(used)g(b)o(y)g(the)g
(high-lev)o(el)i(co)q(de)f(to)e(sp)q(ecify)150 270 y(a)19 b(SCSI)g(command)g
(for)f(execution)i(b)o(y)f(the)g(lo)o(w-lev)o(el)h(co)q(de.)32
b(Man)o(y)18 b(v)m(ariables)i(in)g(the)f FD(Scsi_Cmnd)150 334
y FH(structure)e(can)h(b)q(e)g(ignored)g(b)o(y)g(the)f(lo)o(w-lev)o(el)i
(device)g(driv)o(er|other)f(v)m(ariables,)h(ho)o(w)o(ev)o(er,)e(are)h(ex-)150
399 y(tremely)e(imp)q(ortan)o(t.)150 550 y FC(1.7.8.1)54 b(Reserv)o(ed)17
b(Areas)150 667 y(1.7.8.1.1)55 b(Informativ)o(e)18 b(V)l(ariables)150
785 y FD(host)d FH(is)g(an)g(index)i(in)o(to)e(the)g FD(scsi_hosts)f
FH(arra)o(y)l(.)221 872 y FD(target)f FH(stores)h(the)g(SCSI)h(ID)f(of)g(the)
g(target)g(of)f(the)i(SCSI)g(command.)k(This)c(information)g(is)f(im-)150
937 y(p)q(ortan)o(t)f(if)h(m)o(ultiple)h(outstanding)e(commands)h(or)f(m)o
(ultiple)i(commands)e(p)q(er)h(target)f(are)g(supp)q(orted.)221
1025 y FD(cmnd)18 b FH(is)h(an)f(arra)o(y)g(of)g(b)o(ytes)g(whic)o(h)i(hold)f
(the)g(actual)g(SCSI)g(command.)31 b(These)19 b(b)o(ytes)f(should)150
1089 y(b)q(e)f(sen)o(t)e(to)h(the)f(SCSI)i(target)e(during)i(the)f(COMMAND)f
(phase.)22 b FD(cmnd[0])15 b FH(is)h(the)g(SCSI)h(command)150
1153 y(co)q(de.)j(The)14 b FD(COMMAND_SIZE)e FH(macro,)h(de\014ned)i(in)g
FD(scsi.h)p FH(,)e(can)h(b)q(e)g(used)h(to)e(determine)i(the)f(length)g(of)
150 1218 y(the)h(curren)o(t)g(SCSI)h(command.)221 1305 y FD(result)10
b FH(is)h(used)h(to)e(store)g(the)h(result)h(co)q(de)f(from)f(the)h(SCSI)h
(request.)19 b(Please)11 b(see)g(section)h(1.7.7.2.5)150 1370
y(for)18 b(more)g(information)h(ab)q(out)g(this)g(v)m(ariable.)32
b(This)19 b(v)m(ariable)i FB(must)i FH(b)q(e)c(correctly)g(set)g(b)q(efore)g
(the)150 1434 y(lo)o(w-lev)o(el)e(routines)e(return.)150 1586
y FC(1.7.8.1.2)55 b(The)18 b(Scatter-Gather)j(List)150 1703
y FD(use_sg)16 b FH(con)o(tains)h(a)f(coun)o(t)h(of)f(the)h(n)o(um)o(b)q(er)g
(of)g(pieces)h(in)g(the)e(scatter-gather)g(c)o(hain.)25 b(If)18
b FD(use_sg)d FH(is)150 1767 y(zero,)c(then)f FD(request_buffer)e
FH(p)q(oin)o(ts)j(to)e(the)i(data)e(bu\013er)i(for)f(the)g(SCSI)h(command,)g
(and)f FD(request_bufflen)150 1832 y FH(is)21 b(the)g(length)g(of)g(this)g
(bu\013er)g(in)h(b)o(ytes.)36 b(Otherwise,)22 b FD(request_buffer)d
FH(p)q(oin)o(ts)i(to)f(an)h(arra)o(y)e(of)150 1896 y FD(scatterlist)g
FH(structures,)i(and)g FD(use_sg)f FH(will)i(indicate)g(ho)o(w)f(man)o(y)f
(suc)o(h)h(structures)f(are)g(in)i(the)150 1960 y(arra)o(y)l(.)d(The)c(use)h
(of)f FD(request_buffer)e FH(is)j(non-in)o(tuitiv)o(e)g(and)g(confusing.)221
2048 y(Eac)o(h)d(elemen)o(t)i(of)e(the)h FD(scatterlist)e FH(arra)o(y)h(con)o
(tains)h(an)g FD(address)f FH(and)h(a)f FD(length)g FH(comp)q(onen)o(t.)150
2112 y(If)i(the)g FD(unchecked_isa_dma)e FH(\015ag)h(in)i(the)f
FD(Scsi_Host)f FH(structure)g(is)i(set)f(to)f(1)g(\(see)h(section)h
(1.7.7.1.7)150 2177 y(for)h(more)f(information)i(on)f(DMA)g(transfers\),)f
(the)h(address)h(is)f(guaran)o(teed)g(to)g(b)q(e)h(within)g(the)f(\014rst)150
2241 y(16)j(MB)g(of)g(ph)o(ysical)i(memory)l(.)35 b(Large)21
b(amoun)o(ts)e(of)h(data)g(will)i(b)q(e)g(pro)q(cessed)f(b)o(y)f(a)g(single)i
(SCSI)150 2306 y(command.)d(The)13 b(length)h(of)e(these)h(data)g(will)h(b)q
(e)g(equal)f(to)g(the)g(sum)g(of)f(the)h(lengths)h(of)e(all)i(the)f
(bu\013ers)150 2370 y(p)q(oin)o(ted)j(to)f(b)o(y)g(the)g FD(scatterlist)f
FH(arra)o(y)l(.)p 150 2409 720 2 v 187 2441 a Fz(20)219 2457
y Fd(Linux)e Fl(0.99.7)h(k)o(ernel,)h Fk(linux/kern)o(el/)o(bl)o(k)p
891 2457 12 2 v 11 w(drv/scsi/s)o(csi)o(.h)p eop
%%Page: 60 69
60 68 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(60)245 144 y FD(typedef)23
b(struct)g(scsi_cmnd)245 209 y({)293 273 y(int)334 b(host;)293
338 y(unsigned)23 b(char)95 b(target,)699 402 y(lun,)699 466
y(index;)293 531 y(struct)23 b(scsi_cmnd)g(*next,)699 595 y(*prev;)293
724 y(unsigned)g(char)95 b(cmnd[10];)293 788 y(unsigned)214
b(request_bufflen;)293 852 y(void)310 b(*request_buffer;)293
981 y(unsigned)23 b(char)95 b(data_cmnd[10];)293 1045 y(unsigned)23
b(short)71 b(use_sg;)293 1110 y(unsigned)23 b(short)71 b(sglist_len;)293
1174 y(unsigned)214 b(bufflen;)293 1239 y(void)310 b(*buffer;)293
1367 y(struct)23 b(request)71 b(request;)293 1432 y(unsigned)23
b(char)95 b(sense_buffer[16];)293 1496 y(int)334 b(retries;)293
1560 y(int)g(allowed;)293 1625 y(int)g(timeout_per_command,)699
1689 y(timeout_total,)699 1753 y(timeout;)293 1818 y(unsigned)23
b(char)95 b(internal_timeout;)293 1882 y(unsigned)214 b(flags;)293
2011 y(void)23 b(\(*scsi_done\)\(struct)f(scsi_cmnd)g(*\);)293
2075 y(void)h(\(*done\)\(struct)f(scsi_cmnd)h(*\);)293 2204
y(Scsi_Pointer)118 b(SCp;)293 2268 y(unsigned)23 b(char)95
b(*host_scribble;)293 2333 y(int)334 b(result;)245 2461 y(})24
b(Scsi_Cmnd;)681 2632 y FH(Figure)15 b(1.6:)k(The)d FD(Scsi)p
1108 2632 15 2 v 16 w(Cmnd)f FH(Structure)p eop
%%Page: 61 70
61 69 bop 150 -84 1800 3 v 150 -100 a FC(1.7.)42 b(W)l(riting)19
b(a)f(SCSI)f(Device)h(Driv)o(er)946 b FH(61)150 88 y FC(1.7.8.2)54
b(Scratc)o(h)19 b(Areas)150 206 y FH(Dep)q(ending)e(on)d(the)h(capabilities)i
(and)f(requiremen)o(ts)f(of)f(the)h(host)g(adapter,)f(the)h(scatter-gather)e
(list)150 270 y(can)18 b(b)q(e)h(handled)h(in)e(a)g(v)m(ariet)o(y)g(of)g(w)o
(a)o(ys.)27 b(T)l(o)18 b(supp)q(ort)g(m)o(ultiple)i(metho)q(ds,)f(sev)o(eral)
f(scratc)o(h)g(areas)150 334 y(are)d(pro)o(vided)h(for)e(the)i(exclusiv)o(e)h
(use)e(of)g(the)g(lo)o(w-lev)o(el)i(driv)o(er.)150 486 y FC(1.7.8.2.1)55
b(The)18 b FD(scsi)p 597 486 15 2 v 16 w(done\(\))f FC(P)o(oin)o(ter)150
603 y FH(This)e(p)q(oin)o(ter)g(should)h(b)q(e)f(set)f(to)g(the)h
FD(done\(\))f FH(function)h(p)q(oin)o(ter)g(in)h(the)e FD(queuecommand\(\))f
FH(function)150 667 y(\(see)i(section)h(1.7.7.2.4)c(for)j(more)g
(information\).)k(There)d(are)f(no)g(other)g(uses)g(for)g(this)g(p)q(oin)o
(ter.)150 819 y FC(1.7.8.2.2)55 b(The)18 b FD(host)p 597 819
V 16 w(scribble)f FC(P)o(oin)o(ter)150 936 y FH(The)j(high-lev)o(el)i(co)q
(de)e(supplies)i(a)d(pair)h(of)g(memory)f(allo)q(cation)i(functions,)g
FD(scsi_malloc\(\))d FH(and)150 1000 y FD(scsi_free\(\))p FH(,)13
b(whic)o(h)i(are)f(guaran)o(teed)g(to)f(return)h(memory)g(in)h(the)g(\014rst)
f(16)f(MB)h(of)g(ph)o(ysical)i(mem-)150 1065 y(ory)l(.)24 b(This)18
b(memory)e(is,)h(therefore,)f(suitable)i(for)f(use)g(with)g(DMA.)24
b(The)17 b(amoun)o(t)f(of)g(memory)g(allo-)150 1129 y(cated)f(p)q(er)h
(request)g FB(must)k FH(b)q(e)c(a)f(m)o(ultiple)i(of)e(512)g(b)o(ytes,)g(and)
h FB(must)k FH(b)q(e)c(less)g(than)f(or)g(equal)h(to)f(4096)150
1193 y(b)o(ytes.)21 b(The)16 b(total)e(amoun)o(t)h(of)g(memory)g(a)o(v)m
(ailable)j(via)e FD(scsi_malloc\(\))d FH(is)j(a)g(complex)g(function)g(of)150
1258 y(the)f FD(Scsi_Host)e FH(structure)i(v)m(ariables)h FD(sg_tablesize)p
FH(,)d FD(cmd_per_lun)p FH(,)g(and)i FD(unchecked_isa_dma)p
FH(.)221 1346 y(The)h FD(host_scribble)e FH(p)q(oin)o(ter)i(is)g(a)o(v)m
(ailable)i(to)d(p)q(oin)o(t)h(to)g(a)f(region)h(of)g(memory)f(allo)q(cated)i
(with)150 1410 y FD(scsi_malloc\(\))p FH(.)h(The)d(lo)o(w-lev)o(el)h(SCSI)f
(driv)o(er)g(is)g(resp)q(onsible)i(for)c(managing)i(this)g(p)q(oin)o(ter)g
(and)g(its)150 1474 y(asso)q(ciated)g(memory)l(,)g(and)g(should)h(free)g(the)
f(area)g(when)g(it)h(is)f(no)h(longer)f(needed.)150 1626 y
FC(1.7.8.2.3)55 b(The)18 b FD(Scsi)p 597 1626 V 16 w(Pointer)f
FC(Structure)150 1743 y FH(The)g FD(SCp)e FH(v)m(ariable,)j(a)e(structure)g
(of)g(t)o(yp)q(e)g FD(Scsi_Pointer)p FH(,)f(is)i(describ)q(ed)h(in)f(Figure)f
(1.7.)23 b(The)16 b(v)m(ari-)150 1807 y(ables)g(in)g(this)g(structure)f(can)h
(b)q(e)g(used)g(in)g FB(any)j FH(w)o(a)o(y)c(necessary)g(in)h(the)g(lo)o
(w-lev)o(el)h(driv)o(er.)k(T)o(ypically)l(,)150 1872 y FD(buffer)g
FH(p)q(oin)o(ts)g(to)g(the)h(curren)o(t)f(en)o(try)g(in)h(the)g
FD(scatterlist)p FH(,)f FD(buffers_residual)e FH(coun)o(ts)i(the)150
1936 y(n)o(um)o(b)q(er)c(of)f(en)o(tries)h(remaining)g(in)g(the)g
FD(scatterlist)p FH(,)e FD(ptr)g FH(is)i(used)g(as)f(a)h(p)q(oin)o(ter)f(in)o
(to)h(the)f(bu\013er,)150 2000 y(and)i FD(this_residual)d FH(coun)o(ts)i(the)
h(c)o(haracters)f(remaining)h(in)h(the)e(transfer.)26 b(Some)17
b(host)g(adapters)150 2065 y(require)f(supp)q(ort)f(of)g(this)h(detail)g(of)f
(in)o(teraction|others)g(can)h(completely)g(ignore)g(this)f(structure.)221
2153 y(The)c(second)h(set)f(of)g(v)m(ariables)h(pro)o(vide)g(con)o(v)o(enien)
o(t)g(lo)q(cations)g(to)f(store)f(SCSI)i(status)f(information)150
2217 y(and)k(v)m(arious)h(p)q(oin)o(ters)g(and)f(\015ags.)p
eop
%%Page: 62 71
62 70 bop 150 -84 1800 3 v 150 -100 a FC(1.8.)42 b(Ac)o(kno)o(wledgemen)o(ts)
1198 b FH(62)245 144 y FD(typedef)23 b(struct)g(scsi_pointer)245
209 y({)293 273 y(char)358 b(*ptr;)309 b(/*)24 b(data)f(pointer)g(*/)293
338 y(int)382 b(this_residual;)93 b(/*)24 b(left)f(in)h(this)f(buffer)g(*/)
293 402 y(struct)g(scatterlist)g(*buffer;)237 b(/*)24 b(which)f(buffer)g(*/)
293 466 y(int)382 b(buffers_residual;)21 b(/*)j(how)f(many)g(buffers)g(left)h
(*/)293 595 y(volatile)f(int)167 b(Status;)293 659 y(volatile)23
b(int)167 b(Message;)293 724 y(volatile)23 b(int)167 b(have_data_in;)293
788 y(volatile)23 b(int)167 b(sent_command;)293 852 y(volatile)23
b(int)167 b(phase;)245 917 y(})24 b(Scsi_Pointer;)645 1087
y FH(Figure)16 b(1.7:)i(The)e FD(Scsi)p 1072 1087 15 2 v 17
w(Pointer)e FH(Structure)150 1262 y Fs(1.8)70 b(Ac)n(kno)n(wledgemen)n(ts)150
1395 y FH(Thanks)14 b(to)g(Drew)g(Ec)o(khardt,)f(Mic)o(hael)j(K.)e(Johnson,)g
(Karin)h(Bo)q(es,)g(Dev)o(esh)f(Bhatnagar,)f(and)i(Doug)150
1459 y(Ho\013man)f(for)g(reading)g(early)h(v)o(ersions)f(of)g(this)g(pap)q
(er)h(and)f(for)g(pro)o(viding)h(man)o(y)f(helpful)i(commen)o(ts.)150
1523 y(Sp)q(ecial)f(thanks)e(to)g(m)o(y)f(o\016cial)i(COMP-291)e
(\(Professional)h(W)l(riting)h(in)g(Computer)e(Science\))j(\\read-)150
1588 y(ers,")f(Professors)g(P)o(eter)h(Calingaert)h(and)f(Ra)s(j)g(Kumar)g
(Singh.)150 1765 y Fs(1.9)70 b(Net)n(w)n(ork)22 b(Device)f(Driv)n(ers)150
1898 y FC([I)15 b(ha)o(v)o(e)e(not)i(written)g(this)g(section)g(b)q(ecause)g
(I)f(don't)i(kno)o(w)d(an)o(ything)i(ab)q(out)g(it.)24 b(I)14
b(w)o(ould)150 1962 y(appreciate)20 b(help)e(with)g(this.])p
eop
%%Page: 63 72
63 71 bop 150 438 a Fu(Chapter)34 b(2)150 686 y Fw(The)40 b
Fc(/pro)s(c)f Fw(\014lesystem)150 940 y FH(The)15 b(pro)q(c)g(\014lesystem)g
(is)g(an)f(in)o(terface)h(to)f(sev)o(eral)h(k)o(ernel)g(data)f(structures)g
(whic)o(h)i(b)q(eha)o(v)o(es)e(remark-)150 1004 y(ably)g(lik)o(e)g(a)f
(\014lesystem.)20 b(Instead)14 b(of)e(ha)o(ving)i(to)e(read)i(/dev/kmem)f
(and)g(ha)o(v)o(e)g(some)g(w)o(a)o(y)f(of)h(kno)o(wing)150
1069 y(where)k(things)h(are,)496 1052 y Fm(1)532 1069 y FH(all)g(an)f
(application)h(has)f(to)f(do)h(is)h(read)f(\014les)g(and)h(directories)g(in)f
(/pro)q(c.)25 b(This)150 1133 y(w)o(a)o(y)l(,)13 b(all)j(the)e(addresses)g
(of)g(the)h(k)o(ernel)g(data)e(structures)h(are)g(compiled)i(in)o(to)f(the)f
(pro)q(c)h(\014lesystem)g(at)150 1198 y(k)o(ernel)f(compile)i(time,)e(and)f
(programs)g(whic)o(h)h(use)g(the)g(/pro)q(c)g(in)o(terface)g(need)g(not)g(b)q
(e)g(recompiled)h(or)150 1262 y(up)q(dated)j(when)f(the)h(k)o(ernel)g(is)f
(recompiled.)27 b(It)17 b(is)h(p)q(ossible)h(to)d(moun)o(t)h(the)g(pro)q(c)g
(\014lesystem)h(some-)150 1326 y(where)e(other)g(than)g(/pro)q(c,)g(but)g
(that)f(destro)o(ys)h(the)g(nice)h(predictablit)o(y)h(of)d(the)i(pro)q(c)f
(\014lesystem,)g(so)150 1391 y(w)o(e)f(will)i(con)o(v)o(enien)o(tly)f(ignore)
g(that)e(option.)150 1568 y Fs(2.1)70 b Fb(/proc)24 b Fs(Directories)d(and)i
(Files)150 1701 y FC([This)d(section)f(should)h(b)q(e)f(sev)o(erly)f(cut,)i
(and)f(the)g(full)h(v)o(ersion)f(put)g(in)g(the)g(LPG)g(when)150
1765 y(that)g(is)e(a)o(v)m(ailable.)26 b(In)17 b(the)h(mean)f(time,)i(b)q
(etter)g(here)f(than)g(no)o(where.])221 1853 y FH(In)c(/pro)q(c,)f(there)g
(is)h(a)f(sub)q(directory)i(for)d(ev)o(ery)i(running)g(pro)q(cess,)g(named)f
(b)o(y)h(the)f(n)o(um)o(b)q(er)h(of)f(the)150 1917 y(pro)q(cess's)j
FD(pid)p FH(.)22 b(These)16 b(directories)h(will)h(b)q(e)f(explained)h(b)q
(elo)o(w.)23 b(There)16 b(are)g(also)g(sev)o(eral)g(other)g(\014les)150
1982 y(and)f(directories.)21 b(These)16 b(are:)150 2099 y FD(self)204
b FH(This)18 b(refers)f(to)g(the)g(pro)q(cess)h(accessing)g(the)f(pro)q(c)h
(\014lesystem,)g(and)g(is)f(iden)o(tical)j(to)450 2163 y(the)15
b(directory)h(named)f(b)o(y)g(the)h(pro)q(cess)f(id)h(of)f(the)g(pro)q(cess)h
(doing)f(the)h(lo)q(ok-up.)150 2267 y FD(kmsg)204 b FH(This)15
b(\014le)h(can)f(b)q(e)g(used)h(instead)f(of)f(the)h FD(syslog\(\))e
FH(system)i(call)h(to)e(log)g(k)o(ernel)i(mes-)450 2331 y(sages.)21
b(A)15 b(pro)q(cess)h(m)o(ust)f(ha)o(v)o(e)g(sup)q(eruser)i(priviledges)h(to)
d(read)g(this)h(\014le,)h(and)e(only)450 2395 y(one)k(pro)q(cess)g(should)h
(read)f(this)h(\014le.)32 b(This)20 b(\014le)g(should)g FC(not)f
FH(b)q(e)h(read)f(if)g(a)g(syslog)p 150 2435 720 2 v 202 2466
a Fz(1)219 2482 y Fl(Usually)c(a)e(\014le)h(called)h(a)e(namelist)h(\014le,)g
(often)f(/etc/psdatabase.)1027 2678 y FH(63)p eop
%%Page: 64 73
64 72 bop 150 -84 1800 3 v 150 -100 a FC(2.1.)42 b FD(/proc)17
b FC(Directories)j(and)d(Files)1022 b FH(64)450 88 y(pro)q(cess)14
b(is)g(running)h(whic)o(h)g(uses)f(the)g FD(syslog\(\))f FH(system)g(call)i
(facilit)o(y)g(to)e(log)h(k)o(ernel)450 153 y(messages.)150
256 y FD(loadavg)132 b FH(This)16 b(\014le)g(giv)o(es)f(an)h(output)f(lik)o
(e)h(this:)550 356 y Fr(0.13)21 b(0.14)g(0.05)450 456 y FH(These)c(n)o(um)o
(b)q(ers)f(are)h(the)f(n)o(um)o(b)q(ers)h(normally)g(giv)o(en)g(b)o(y)f
FD(uptime)f FH(and)i(other)f(com-)450 520 y(mands)f(as)g(the)g(load)h(a)o(v)o
(erage.)150 624 y FD(meminfo)132 b FH(This)18 b(\014le)h(is)g(a)e(condensed)i
(v)o(ersion)g(of)e(the)h(output)g(from)f(the)h FD(free)f FH(program.)27
b(Its)450 688 y(output)15 b(lo)q(oks)g(lik)o(e)i(this:)724
780 y Fr(total:)64 b(used:)87 b(free:)64 b(shared:)42 b(buffers:)550
837 y(Mem:)65 b(7528448)42 b(7344128)64 b(184320)42 b(2637824)g(1949696)550
894 y(Swap:)h(8024064)f(1474560)g(6549504)450 994 y FH(Notice)22
b(that)f(the)g(n)o(um)o(b)q(ers)h(are)f(in)h(b)o(ytes,)g(not)f(KB.)h(Lin)o
(us)g(wrote)f(a)g(v)o(ersion)g(of)450 1058 y(free)e(whic)o(h)g(reads)g(this)g
(\014le)h(and)f(can)g(return)f(either)i(b)o(ytes)e(\()p FD(-b)p
FH(\))g(or)g(KB)h(\()p FD(-k)p FH(,)g(the)450 1122 y(default\).)h(This)15
b(is)g(included)i(with)e(the)f FD(procps)g FH(pac)o(k)m(age)g(at)g
FD(tsx-11.mit.edu)f FH(and)450 1187 y(other)k(places.)29 b(Also)18
b(notice)g(that)f(there)h(is)g FC(not)g FH(a)f(sep)q(erate)h(en)o(try)g(for)f
(eac)o(h)h(sw)o(ap)450 1251 y(\014le:)j(the)15 b FD(Swap:)20
b FH(line)d(sumarizes)e(all)h(the)g(sw)o(ap)e(space)i(a)o(v)m(ailable)h(to)d
(the)h(k)o(ernel.)150 1354 y FD(uptime)156 b FH(This)14 b(\014le)h(con)o
(tains)e(t)o(w)o(o)f(things:)20 b(the)13 b(time)h(that)f(the)g(system)g(has)h
(b)q(een)g(up,)g(and)g(the)450 1419 y(amoun)o(t)h(of)g(time)h(it)g(has)f(sp)q
(en)o(t)h(in)g(the)g(idle)h(pro)q(cess.)22 b(Both)15 b(n)o(um)o(b)q(ers)h
(are)f(giv)o(en)h(as)450 1483 y(decimal)h(quan)o(tities,)f(in)h(seconds)f
(and)g(h)o(undreths)g(of)f(a)g(second.)22 b(The)16 b(t)o(w)o(o)e(decimal)450
1548 y(digits)i(of)e(precision)j(are)d(not)h(guaran)o(teed)f(on)h(all)h(arc)o
(hitectures,)f(but)g(are)f(curren)o(tly)450 1612 y(accurate)19
b(on)g(all)h(w)o(orking)f(implemen)o(tations)h(of)f FE(Linux)p
FH(,)g(due)h(to)e(the)h(con)o(v)o(enien)o(t)450 1676 y(100)14
b(Hz)i(clo)q(c)o(k.)k(This)c(\014le)g(lo)q(oks)g(lik)o(e)g(this:)550
1768 y Fr(604.33)21 b(205.45)450 1868 y FH(In)e(this)g(case,)h(the)e(system)h
(has)f(b)q(een)i(running)g(for)e(604.33)f(seconds,)j(and)e(of)h(that)450
1933 y(time,)c(205.45)f(seconds)h(ha)o(v)o(e)g(b)q(een)h(sp)q(en)o(t)g(in)g
(the)f(idle)i(task.)150 2036 y FD(version)132 b FH(This)16
b(\014le)g(con)o(tains)f(a)g(string)g(iden)o(tifying)i(the)f(v)o(ersion)f(of)
g FE(Linux)f FH(that)h(is)g(curren)o(tly)450 2100 y(running.)21
b(An)15 b(example)i(is:)550 2193 y Fr(Linux)k(version)f(0.99.pl4-2)g
(\(johnsonm@roland\))e(01/26/93)i(18:39:44)150 2296 y FD(net)228
b FH(This)14 b(is)g(a)f(directory)h(con)o(taining)g(three)g(\014les,)g(all)h
(of)e(whic)o(h)h(giv)o(e)g(the)g(status)e(of)h(some)450 2361
y(part)k(of)g(the)h FE(Linux)f FH(net)o(w)o(orking)h(la)o(y)o(er.)27
b(These)18 b(\014les)g(con)o(tain)g(binary)h(structures,)450
2425 y(and)13 b(are)f(therefore)g(not)g(readable)i(with)f(cat.)18
b(Ho)o(w)o(ev)o(er,)12 b(the)h(standard)f(netstat)f(suite)450
2489 y(uses)19 b(these)f(\014les.)30 b(The)18 b(binary)h(structures)f(read)g
(from)g(these)g(\014les)i(are)e(de\014ned)h(in)450 2554 y FD(<linux/if*.h>)13
b FH(The)j(\014les)g(are:)p eop
%%Page: 65 74
65 73 bop 150 -84 1800 3 v 150 -100 a FC(2.1.)42 b FD(/proc)17
b FC(Directories)j(and)d(Files)1022 b FH(65)450 88 y FD(unix)204
b FC([I)14 b(do)g(not)g(y)o(et)f(ha)o(v)o(e)f(details)j(on)f(the)g
FD(unix)f FC(in)o(terface.)24 b(These)750 153 y(details)19
b(will)g(b)q(e)e(added)h(later.])450 256 y FD(arp)228 b FC([I)16
b(do)h(not)f(y)o(et)g(ha)o(v)o(e)f(details)j(on)e(the)h FD(arp)e
FC(in)o(terface.)25 b(These)750 321 y(details)19 b(will)g(b)q(e)e(added)h
(later.])450 424 y FD(route)180 b FC([I)29 b(do)f(not)h(y)o(et)e(ha)o(v)o(e)h
(details)h(on)g(the)f FD(route)g FC(in)o(terface.)750 488 y(These)17
b(details)i(will)g(b)q(e)f(added)g(later.])450 592 y FD(dev)228
b FC([I)16 b(do)h(not)f(y)o(et)g(ha)o(v)o(e)f(details)j(on)e(the)h
FD(dev)e FC(in)o(terface.)25 b(These)750 656 y(details)19 b(will)g(b)q(e)e
(added)h(later.])450 760 y FD(raw)228 b FC([I)16 b(do)h(not)f(y)o(et)g(ha)o
(v)o(e)f(details)j(on)e(the)h FD(raw)e FC(in)o(terface.)25
b(These)750 824 y(details)19 b(will)g(b)q(e)e(added)h(later.])450
928 y FD(tcp)228 b FC([I)16 b(do)h(not)f(y)o(et)g(ha)o(v)o(e)f(details)j(on)e
(the)h FD(tcp)e FC(in)o(terface.)25 b(These)750 992 y(details)19
b(will)g(b)q(e)e(added)h(later.])450 1096 y FD(udp)228 b FC([I)16
b(do)h(not)f(y)o(et)g(ha)o(v)o(e)f(details)j(on)e(the)h FD(udp)e
FC(in)o(terface.)25 b(These)750 1160 y(details)19 b(will)g(b)q(e)e(added)h
(later.])150 1302 y FH(Eac)o(h)13 b(of)g(the)g(pro)q(cess)g(sub)q
(directories)i(\(those)e(with)g(n)o(umerical)i(names)e(and)g(the)h(self)f
(directory\))g(ha)o(v)o(e)150 1366 y(sev)o(eral)i(\014les)i(and)e(sub)q
(directories,)h(as)f(w)o(ell.)21 b(The)16 b(\014les)g(are:)150
1484 y FD(cmdline)132 b FH(This)17 b(holds)h(the)f(complete)g(command)g(line)
h(for)e(the)h(pro)q(cess,)g FC(unless)i(the)h(whole)450 1548
y(pro)q(cess)j(has)f(b)q(een)g(sw)o(app)q(ed)g(out,)f FH(or)e(unless)h(the)f
(pro)q(cess)h(is)f(a)g(zom)o(bie.)32 b(In)450 1612 y(either)15
b(of)e(these)h(later)g(cases,)g(there)g(is)g(nothing)h(in)g(this)f(\014le:)20
b(i.e.)g(a)14 b(read)g(on)g(this)g(\014le)450 1677 y(will)h(return)f(as)f(ha)
o(ving)h(read)g(0)f(c)o(haracters.)19 b(This)14 b(\014le)h(is)f(n)o
(ull-terminated,)i(but)d FC(not)450 1741 y FH(newline-terminated.)150
1845 y FD(cwd)228 b FH(A)14 b(link)h(to)e(the)h(curren)o(t)g(w)o(orking)g
(directory)g(of)f(that)g(pro)q(cess.)20 b(T)l(o)14 b(\014nd)g(out)g(the)g
(cwd)450 1909 y(of)h(pro)q(cess)g(20,)f(sa)o(y)l(,)h(y)o(ou)g(can)g(do)g
(this:)550 2004 y Fr(\(cd)21 b(/proc/20/cwd;)e(pwd\))150 2107
y FD(environ)132 b FH(This)19 b(\014le)h(con)o(tains)e(the)h(en)o(vironmen)o
(t)g(for)f(the)g(pro)q(cess.)31 b(There)18 b(are)h(no)f(newlines)450
2172 y(in)f(this)g(\014le:)24 b(the)16 b(en)o(tries)h(are)f(sep)q(erated)h(b)
o(y)g(n)o(ull)h(c)o(haracters,)d(and)i(there)f(is)h(a)g(n)o(ull)450
2236 y(c)o(haracter)d(at)g(the)h(end.)20 b(Th)o(us,)14 b(to)g(prin)o(t)h(out)
g(the)f(en)o(vironmen)o(t)h(of)g(pro)q(cess)f(10,)g(y)o(ou)450
2300 y(w)o(ould)i(do:)550 2396 y Fr(cat)21 b(/proc/10/environ)e(|)i(tr)h
("\\000")e("\\n")450 2498 y FH(This)c(\014le)g(is)g(also)f(n)o
(ull-terminated)i(and)e(not)g(newline)i(terminated..)p eop
%%Page: 66 75
66 74 bop 150 -84 1800 3 v 150 -100 a FC(2.1.)42 b FD(/proc)17
b FC(Directories)j(and)d(Files)1022 b FH(66)150 88 y FD(exe)228
b FH(This)16 b(is)f(a)g(link)i(to)e(the)g(executable.)21 b(Y)l(ou)15
b(can)h(t)o(yp)q(e)550 183 y Fr(/proc/10/exe)450 286 y FH(to)f(run)g(another)
g(cop)o(y)g(of)g(whatev)o(er)f(pro)q(cess)i(10)e(is.)150 390
y FD(fd)252 b FH(This)18 b(is)g(a)g(sub)q(directory)g(con)o(taining)h(one)f
(en)o(try)f(for)g(eac)o(h)h(\014le)g(whic)o(h)h(the)f(pro)q(cess)450
454 y(has)d(op)q(en,)g(named)g(b)o(y)g(its)g(\014le)h(descripter,)f(and)g
(whic)o(h)h(is)f(a)g(link)h(to)e(the)h(actual)g(\014le.)450
518 y(Programs)i(that)i(will)h(tak)o(e)f(a)f(\014lename,)j(but)e(will)i(not)d
(tak)o(e)h(the)g(standard)f(input,)450 583 y(and)c(whic)o(h)h(write)f(to)f(a)
h(\014le,)h(but)f(will)h(not)f(send)h(their)f(output)g(to)f(standard)h
(output,)450 647 y(can)k(b)q(e)h(e\013ectiv)o(ely)h(foiled)g(this)e(w)o(a)o
(y)l(,)g(assuming)h(that)e FD(-i)h FH(is)h(the)f(\015ag)g(designating)450
711 y(an)d(input)h(\014le)h(and)e FD(-o)g FH(is)h(the)f(\015ag)g(designating)
h(an)f(output)g(\014le:)550 806 y Fr(...)21 b(|)h(foobar)e(-i)i
(/proc/self/fd/0)c(-o)k(/proc/self/fd/1)c(|)k(...)450 909 y
FB(V)m(oil\023)-23 b(a.)19 b FH(Instan)o(t)14 b(\014lter!)21
b(Note)14 b(that)f(this)i(will)i(not)d(w)o(ork)f(for)h(programs)f(that)h
(seek)h(on)450 973 y(their)h(\014les,)g(as)e(the)i(\014les)g(in)g(the)f
FD(fd)g FH(directory)g(are)g(not)g(seek)m(able.)150 1077 y
FD(lib)228 b FH(This)16 b(is)g(a)f(sub)q(directory)h(con)o(taining)g(one)f
(en)o(try)g(for)g(eac)o(h)g(shared)g(library)h(that)f(the)450
1141 y(pro)q(cess)h(is)h(using,)g(named)f(b)o(y)g(n)o(um)o(b)q(er,)h
(starting)e(from)h(0,)f(in)i(the)g(order)e(that)h(they)450
1206 y(w)o(ere)f(in)o(tialized)j(b)o(y)d(the)g(pro)q(cess.)20
b(These)c(are)f(links)h(to)f(the)g(library)h(\014le.)150 1309
y FD(mem)228 b FH(This)13 b(is)g FC(not)f FH(the)h(same)f(as)f(the)i(mem)f
(\(1,1\))e(device,)k(despite)g(the)e(fact)g(that)f(it)i(has)f(the)450
1373 y(same)i(device)i(n)o(um)o(b)q(ers.)k(The)15 b(/dev/mem)g(device)h(is)f
(the)g(ph)o(ysical)h(memory)e(b)q(efore)450 1438 y(an)o(y)h(address)f
(translation)h(is)h(done,)f(but)g(the)g(mem)g(\014le)g(here)h(is)f(the)g
(memory)f(of)h(the)450 1502 y(pro)q(cess)f(that)f(accesses)h(it.)20
b(This)14 b(cannot)g(b)q(e)g FD(mmap\(\))p FH(ed)f(curren)o(tly)l(,)i(and)f
(will)h(not)e(b)q(e)450 1566 y(un)o(til)j(a)f(general)h FD(mmap\(\))e
FH(is)i(added)g(to)e(the)i(k)o(ernel.)150 1670 y FD(root)204
b FH(This)21 b(is)h(a)e(p)q(oin)o(ter)i(to)e(the)h(ro)q(ot)f(directory)h(of)g
(the)g(pro)q(cess.)37 b(This)21 b(is)h(useful)g(for)450 1734
y(programs)14 b(that)g(call)j FD(chroot\(\))p FH(,)d(suc)o(h)h(as)g(ftp)q(d.)
150 1838 y FD(stat)204 b FH(This)17 b(\014le)g(con)o(tains)f(a)g(lot)h(of)e
(status)h(information)g(ab)q(out)g(the)g(pro)q(cess.)24 b(The)16
b(\014elds,)450 1902 y(in)g(order,)f(with)g(their)h(prop)q(er)f
FD(scanf\(\))f FH(format)g(sp)q(eci\014ers,)j(are:)450 2015
y(pid)f FD(\045d)174 b FH(The)15 b(pro)q(cess)h(id.)450 2119
y(comm)f FD(\(\045s\))70 b FH(The)12 b(\014lename)h(of)e(the)h(executable,)h
(in)f(paren)o(theses.)19 b(This)13 b(is)f(visible)750 2183
y(whether)j(or)g(not)g(the)g(executable)i(is)e(sw)o(app)q(ed)h(out.)450
2287 y(state)e FD(\045c)141 b FH(One)14 b(c)o(haracter)f(from)f(the)i(string)
f(\\RSDZT")g(where)h(R)f(is)h(running,)750 2351 y(S)h(is)f(sleeping)i(in)g
(an)e(in)o(terruptable)h(w)o(ait,)f(D)g(is)h(sleeping)h(in)f(an)f(un-)750
2416 y(in)o(terruptable)i(w)o(ait)f(or)f(sw)o(apping,)h(Z)g(is)h(zom)o(bie,)f
(and)h(T)f(is)g(traced)750 2480 y(or)g(stopp)q(ed)g(\(on)g(a)g(signal\).)p
eop
%%Page: 67 76
67 75 bop 150 -84 1800 3 v 150 -100 a FC(2.1.)42 b FD(/proc)17
b FC(Directories)j(and)d(Files)1022 b FH(67)450 88 y(ppid)17
b FD(\045d)148 b FH(The)15 b(pid)i(of)d(the)i(paren)o(t.)450
192 y(pgrp)f FD(\045d)146 b FH(The)15 b(pgrp)h(of)e(the)i(pro)q(cess.)450
295 y(session)g FD(\045d)102 b FH(The)15 b(session)h(id)g(of)f(the)g(pro)q
(cess.)450 399 y(tt)o(y)f FD(\045d)179 b FH(The)15 b(tt)o(y)g(the)g(pro)q
(cess)g(uses.)450 502 y(tpgid)h FD(\045d)133 b FH(The)19 b(pgrp)h(of)e(the)i
(pro)q(cess)f(whic)o(h)h(curren)o(tly)g(o)o(wns)e(the)h(tt)o(y)g(that)750
567 y(the)c(pro)q(cess)h(is)f(connected)i(to.)450 670 y(\015ags)e
FD(\045u)148 b FH(The)16 b(\015ags)g(of)g(the)g(pro)q(cess.)23
b(Curren)o(tly)l(,)16 b(ev)o(ery)g(\015ag)g(has)g(the)g(math)750
735 y(bit)i(set,)g(b)q(ecause)h(crt0.s)d(c)o(hec)o(ks)i(for)f(math)g(em)o
(ulation,)i(so)e(this)h(is)750 799 y(not)g(included)i(in)f(the)g(output.)28
b(This)19 b(is)f(probably)h(a)f(bug,)h(as)e(not)750 863 y FB(every)i
FH(pro)q(cess)c(is)g(a)f(compiled)j(c)e(program.)j(The)d(math)g(bit)g(should)
750 928 y(b)q(e)h(a)f(decimal)h(4,)f(and)g(the)h(traced)f(bit)g(is)h(decimal)
h(10.)450 1031 y(min)p 528 1031 14 2 v 17 w(\015t)e FD(\045u)102
b FH(The)24 b(n)o(um)o(b)q(er)g(of)f(minor)h(faults)f(the)h(pro)q(cess)g(has)
f(made,)i(those)750 1096 y(whic)o(h)16 b(ha)o(v)o(e)f(not)g(required)h
(loading)g(a)f(memory)g(page)g(from)f(disk.)450 1199 y(cmin)p
548 1199 V 17 w(\015t)h FD(\045u)82 b FH(The)14 b(n)o(um)o(b)q(er)g(of)g
(minor)g(faults)g(that)f(the)i(pro)q(cess)f(and)g(its)g(c)o(hildren)750
1263 y(ha)o(v)o(e)h(made.)450 1367 y(ma)s(j)p 531 1367 V 15
w(\015t)g FD(\045u)101 b FH(The)24 b(n)o(um)o(b)q(er)f(of)g(ma)s(jor)f
(faults)i(the)f(pro)q(cess)h(has)f(made,)i(those)750 1431 y(whic)o(h)16
b(ha)o(v)o(e)f(required)h(loading)g(a)f(memory)g(page)g(from)f(disk.)450
1535 y(cma)s(j)p 551 1535 V 16 w(\015t)h FD(\045u)80 b FH(The)14
b(n)o(um)o(b)q(er)g(of)g(ma)s(jor)e(faults)i(that)f(the)h(pro)q(cess)g(and)g
(its)g(c)o(hildren)750 1599 y(ha)o(v)o(e)h(made.)450 1703 y(utime)h
FD(\045d)123 b FH(The)15 b(n)o(um)o(b)q(er)g(of)f(ji\016es)h(that)f(this)h
(pro)q(cess)g(has)f(b)q(een)i(sc)o(heduled)g(in)750 1767 y(user)f(mo)q(de.)
450 1870 y(stime)g FD(\045d)131 b FH(The)15 b(n)o(um)o(b)q(er)g(of)f
(ji\016es)h(that)f(this)h(pro)q(cess)g(has)f(b)q(een)i(sc)o(heduled)g(in)750
1935 y(k)o(ernel)g(mo)q(de.)450 2038 y(cutime)g FD(\045d)103
b FH(The)18 b(n)o(um)o(b)q(er)h(of)f(ji\016es)g(that)g(this)g(pro)q(ces)h
(and)f(its)g(c)o(hildren)i(ha)o(v)o(e)750 2103 y(b)q(een)c(sc)o(heduled)h(in)
f(user)g(mo)q(de.)450 2206 y(cstime)g FD(\045d)110 b FH(The)18
b(n)o(um)o(b)q(er)h(of)f(ji\016es)g(that)g(this)g(pro)q(ces)h(and)f(its)g(c)o
(hildren)i(ha)o(v)o(e)750 2271 y(b)q(een)c(sc)o(heduled)h(in)f(k)o(ernel)g
(mo)q(de.)450 2374 y(coun)o(ter)f FD(\045d)89 b FH(The)24 b(curren)o(t)f
(maxim)o(um)g(size)h(in)h(ji\016es)e(of)g(the)h(pro)q(cess's)f(next)750
2438 y(timeslice,)h(of)d(what)g(is)h(curren)o(tly)g(left)g(of)f(its)g(curren)
o(t)g(timeslice,)750 2503 y(if)16 b(it)f(is)h(the)f(curren)o(tly)h(running)g
(pro)q(cess.)p eop
%%Page: 68 77
68 76 bop 150 -84 1800 3 v 150 -100 a FC(2.1.)42 b FD(/proc)17
b FC(Directories)j(and)d(Files)1022 b FH(68)450 88 y(priorit)o(y)15
b FD(\045d)88 b FH(The)11 b(standard)f FE(un)p FA(?)p FE(x)g
FH(nice)i(v)m(alue,)g(plus)f(\014fteen.)19 b(The)11 b(v)m(alue)h(is)f(nev)o
(er)750 153 y(negativ)o(e)k(in)h(the)g(k)o(ernel.)450 256 y(timeout)f
FD(\045u)83 b FH(The)15 b(time)h(in)g(ji\016es)g(of)e(the)i(pro)q(cess's)f
(next)g(timeout.)450 360 y(it)p 483 360 14 2 v 17 w(real)p
573 360 V 16 w(v)m(alue)i FD(\045u)750 424 y FH(Something)j(ha)o(ving)f(to)g
(do)g(with)g(in)o(terv)m(al)h(timers.)32 b FC([Do)q(cumen)o(t)750
488 y(this.])450 592 y FH(start)p 548 592 V 15 w(time)16 b
FD(\045d)38 b FH(Time)16 b(the)f(pro)q(cess)g(started)g(in)h(ji\016es)g
(after)e(system)h(b)q(o)q(ot.)450 695 y(vsize)h FD(\045u)142
b FH(Virtual)16 b(memory)f(size)450 799 y(rss)g FD(\045u)183
b FH(Residen)o(t)19 b(Set)f(Size:)26 b(n)o(um)o(b)q(er)17 b(of)h(pages)f(the)
h(pro)q(cess)g(has)f(in)i FC(real)750 863 y FH(memory)l(,)11
b(min)o(us)h(3)e(for)h(administrativ)o(e)g(purp)q(oses.)19
b(This)12 b(is)f(just)g(the)750 928 y(pages)17 b(whic)o(h)i(coun)o(t)e(to)o
(w)o(ards)f(text,)i(data,)f(or)g(stac)o(k)g(space.)27 b(This)750
992 y(do)q(es)16 b FC(not)g FH(include)i(pages)d(whic)o(h)i(ha)o(v)o(e)e(not)
g(b)q(een)h(demand-loaded)750 1056 y(in,)g(or)e(whic)o(h)i(are)f(sw)o(app)q
(ed)h(out.)450 1160 y(rlim)g FD(\045u)156 b FH(Curren)o(t)15
b(limit)h(on)f(the)g(size)h(of)f(the)g(pro)q(cess.)20 b FC([Is)e(this)f
(correct?.])450 1263 y FH(start)p 548 1263 V 15 w(co)q(de)f
FD(\045u)37 b FH(The)15 b(address)h(ab)q(o)o(v)o(e)e(whic)o(h)j(program)d
(text)g(can)i(run.)450 1367 y(end)p 523 1367 V 17 w(co)q(de)g
FD(\045u)60 b FH(The)15 b(address)h(b)q(elo)o(w)f(whic)o(h)i(program)d(text)g
(can)i(run.)450 1470 y(start)p 548 1470 V 15 w(stac)o(k)f FD(\045u)750
1535 y FH(The)g(address)h(of)e(the)i(start)e(of)g(the)i(stac)o(k.)450
1638 y(kstk)p 537 1638 V 16 w(esp)f FD(\045u)74 b FC([I)18
b(don't)g(kno)o(w])450 1742 y FH(kstk)p 537 1742 V 16 w(eip)e
FD(\045u)79 b FC([I)18 b(don't)g(kno)o(w])450 1845 y FH(signal)e
FD(\045d)123 b FC([Fill)19 b(this)f(in)g(later])450 1949 y
FH(blo)q(c)o(k)o(ed)e FD(\045d)88 b FC([Fill)19 b(this)f(in)g(later])450
2052 y FH(sigignore)e FD(\045d)62 b FC([Fill)19 b(this)f(in)g(later])450
2156 y FH(sigcatc)o(h)d FD(\045d)79 b FC([Fill)19 b(this)f(in)g(later])450
2259 y FH(w)o(c)o(han)d FD(\045u)113 b FH(This)18 b(is)g(the)g(\\c)o(hannel")
g(in)h(whic)o(h)f(the)g(pro)q(cess)g(is)g(w)o(aiting.)27 b(This)750
2324 y(is)20 b(the)g(address)g(of)f(a)g(system)h(call,)h(and)f(can)g(b)q(e)g
(lo)q(ok)o(ed)h(up)f(in)g(a)750 2388 y(namelist)c(if)g(y)o(ou)f(need)h(a)f
(textual)g(name.)150 2501 y FD(statm)180 b FH(This)17 b(\014le)g(con)o(tains)
f(sp)q(ecial)h(status)f(information)g(that)f(tak)o(es)g(a)h(bit)g(longer)h
(to)e(co)q(ok)p eop
%%Page: 69 78
69 77 bop 150 -84 1800 3 v 150 -100 a FC(2.2.)42 b(Structure)19
b(of)f(the)g(/pro)q(c)h(\014lesystem)877 b FH(69)450 88 y(than)17
b(the)g(information)g(in)h(stat,)e(and)h(is)g(needed)h(rarely)f(enough)h
(that)e(it)h(has)g(b)q(een)450 153 y(relegated)d(to)f(a)g(sep)q(erate)h
(\014le.)20 b(F)l(or)13 b(eac)o(h)g(\014eld)i(in)f(this)g(\014le,)h(the)e
(pro)q(c)h(\014lesystem)g(has)450 217 y(to)j(lo)q(ok)g(at)g(eac)o(h)h(of)e
(the)i(0x300)e(en)o(tries)i(in)g(the)g(page)f(directory)l(,)h(and)f(coun)o(t)
h(what)450 281 y(they)d(are)g(doing.)21 b(Here)15 b(is)h(a)f(description)h
(of)f(these)g(\014elds:)450 395 y(size)h FD(\045d)166 b FH(The)11
b(total)f(n)o(um)o(b)q(er)h(of)g(pages)f(that)g(the)h(pro)q(cess)g(has)g
(mapp)q(ed)g(in)h(the)750 459 y(virtual)k(memory)f(space,)g(whether)h(they)f
(are)h(in)g(ph)o(ysical)h(memory)750 523 y(or)e(not.)450 627
y(residen)o(t)h FD(\045d)81 b FH(The)18 b(total)g(n)o(um)o(b)q(er)g(of)g
(pages)f(that)h(the)g(pro)q(cess)g(has)g(in)h(ph)o(ysical)750
691 y(memory)l(.)f(This)13 b(should)g(equal)f(the)g(rss)g(\014eld)h(from)e
(the)h(stat)f(\014le,)i(but)750 756 y(is)j(calculated)g(rather)f(than)g(read)
g(from)g(the)g(pro)q(cess)g(structure.)450 859 y(shared)g FD(\045d)108
b FH(The)24 b(total)e(n)o(um)o(b)q(er)i(of)f(pages)g(that)g(the)g(pro)q(cess)
g(has)h(that)e(are)750 924 y(shared)15 b(with)h(at)e(least)i(one)f(other)g
(pro)q(cess.)450 1027 y(trs)g FD(\045d)183 b FH(T)l(ext)20
b(Residen)o(t)h(Size:)31 b(the)20 b(total)g(n)o(um)o(b)q(er)g(of)g(text)f
(\(co)q(de\))h(pages)750 1091 y(b)q(elonging)14 b(to)d(the)h(pro)q(cess)h
(that)e(are)h(presen)o(t)g(in)h(ph)o(ysical)h(memory)l(.)750
1156 y(Do)q(es)h FC(not)h FH(include)h(shared)f(library)g(pages.)450
1259 y(lrs)g FD(\045d)188 b FH(Library)13 b(Residen)o(t)g(Size:)20
b(the)12 b(total)f(n)o(um)o(b)q(er)i(of)f(library)g(pages)g(used)750
1324 y(b)o(y)j(the)g(pro)q(cess)h(that)e(are)h(presen)o(t)g(in)h(ph)o(ysical)
h(memory)l(.)450 1427 y(drs)e FD(\045d)176 b FH(Data)10 b(Residen)o(t)j
(Size:)19 b(the)11 b(total)g(n)o(um)o(b)q(er)h(of)f(data)f(pages)h(b)q
(elonging)750 1491 y(to)16 b(the)g(pro)q(cess)h(that)e(are)i(presen)o(t)f(in)
h(ph)o(ysical)h(memory)l(.)23 b(Include)750 1556 y(dirt)o(y)15
b(library)h(pages)f(and)h(stac)o(k.)450 1659 y(dt)f FD(\045d)194
b FH(The)16 b(n)o(um)o(b)q(er)h(of)e(library)i(pages)f(whic)o(h)g(ha)o(v)o(e)
g(b)q(een)h(accessed)g(\(i.e.,)750 1724 y(are)e(dirt)o(y\).)150
1901 y Fs(2.2)70 b(Structure)22 b(of)h(the)g(/pro)r(c)g(\014lesystem)150
2034 y FH(The)13 b(pro)q(c)g(\014lesystem)h(is)f(rather)f(in)o(teresting,)i
(b)q(ecause)g(none)f(of)f(the)h(\014les)h(exist)f(in)h(an)o(y)f(real)g
(directory)150 2098 y(structure.)25 b(Rather,)17 b(the)g(prop)q(er)g(vfs)g
(structures)g(are)f(\014lled)j(in)f(with)f(functions)h(whic)o(h)g(do)f(gigan)
o(tic)150 2162 y(case)d(statemen)o(ts,)g(and)g(in)h(the)g(case)f(of)g
(reading)h(a)f(\014le,)i(get)e(a)g(page,)g(\014ll)i(it)e(in,)i(and)e(put)h
(the)f(result)h(in)150 2227 y(user)g(memory)g(space.)221 2315
y(One)i(of)f(the)g(most)g(in)o(teresting)h(parts)f(of)g(the)h(pro)q(c)f
(\014lesystem)h(is)g(the)g(w)o(a)o(y)e(that)h(the)h(individual)150
2379 y(pro)q(cess)22 b(directories)h(are)f(implemen)o(ted.)42
b(Essen)o(tially)l(,)25 b(ev)o(ery)c(pro)q(cess)i(directory)f(has)g(the)g
(ino)q(de)150 2443 y(n)o(um)o(b)q(er)h(of)f(its)g(PID)g(shifted)h(left)g(16)f
(bits)h(in)o(to)f(a)g(32)g(bit)g(n)o(um)o(b)q(er)h(greater)f(than)g
FD(0x0000ffff)p FH(.)150 2508 y(Within)16 b(the)f(pro)q(cess)h(directories,)f
(ino)q(de)i(n)o(um)o(b)q(ers)e(are)g(reused,)g(b)q(ecause)h(the)f(upp)q(er)h
(16)f(bits)g(of)g(the)p eop
%%Page: 70 79
70 78 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)42 b(Programming)19
b(the)e(/pro)q(c)i(\014lesystem)842 b FH(70)150 88 y(ino)q(de)16
b(n)o(um)o(b)q(er)g(ha)o(v)o(e)f(b)q(een)h(mask)o(ed)f(o\013)g(after)g(c)o
(ho)q(osing)g(the)h(righ)o(t)f(directory)l(.)221 176 y(Another)21
b(in)o(teresting)i(feature)f(is)g(that)f(unlik)o(e)j(in)e(a)g(\\real")g
(\014lesystem,)h(where)f(there)g(is)h(one)150 241 y FD(file)p
249 241 15 2 v 17 w(operations)8 b FH(structure)i(for)g(the)g(whole)h
(\014lesystem,)g(as)f(\014le)h(lo)q(okup)g(is)g(done,)g(di\013eren)o(t)g
FD(file)p 1874 241 V 17 w(operations)150 305 y FH(structures)j(are)g
(assigned)g(to)g(the)g FD(f)p 774 305 V 17 w(ops)g FH(mem)o(b)q(er)g(of)g
(the)g(\014le)h(structure)f(passed)g(to)g(those)g(functions,)150
369 y(dynamically)j(c)o(hanging)f(whic)o(h)g(functions)g(will)h(b)q(e)e
(called)i(for)e(directory)g(lo)q(okup)h(and)g(\014le)g(reading.)221
457 y FC([Expand)h(on)f(this)g(section)h(later)h(|)e(righ)o(t)h(no)o(w)f(it)h
(is)f(mostly)f(here)i(to)f(remind)h(me)f(to)150 522 y(\014nish)i(it)p
FA(:)8 b(:)g(:)e FC(])150 696 y Fs(2.3)70 b(Programming)22
b(the)h(/pro)r(c)g(\014lesystem)150 828 y FH(Unlik)o(e)18 b(in)e(most)g
(\014lesystems,)g(not)g(all)h(ino)q(de)g(n)o(um)o(b)q(ers)f(in)h(the)f(pro)q
(c)h(\014lesystem)f(are)g(unique.)24 b(Some)150 893 y(\014les)16
b(are)f(declared)h(in)g(structures)f(lik)o(e)264 994 y Fr(static)20
b(struct)h(proc_dir_entry)e(root_dir[])g(=)j({)438 1051 y({)g(1,1,".")e(},)
438 1108 y({)i(1,2,"..")e(},)438 1164 y({)i(2,7,"loadavg")d(},)438
1221 y({)j(3,6,"uptime")d(},)438 1278 y({)j(4,7,"meminfo")d(},)438
1335 y({)j(5,4,"kmsg")d(},)438 1392 y({)j(6,7,"version")d(},)438
1448 y({)j(7,4,"self")d(})44 b(/*)21 b(will)g(change)g(inode)f(#)i(*/)438
1505 y({)g(8,4,"net")d(})264 1562 y(};)150 1671 y FH(and)c(some)f(\014les)i
(are)e(dynamically)j(created)d(as)h(the)f(\014lesystem)i(is)f(read.)k(All)d
(the)f(pro)q(cess)g(directories)150 1735 y(\(those)k(with)g(n)o(umerical)h
(names)g(and)f FD(self)p FH(\))f(essen)o(tially)j(ha)o(v)o(e)e(ino)q(de)h(n)o
(um)o(b)q(ers)f(that)g(are)g(the)g(pid)150 1800 y(shifted)k(left)f(16)f
(bits,)j(but)e(the)g(\014les)h(within)g(those)f(directories)h(re-use)g(lo)o
(w)e(\(1{10)g(or)g(so\))h(ino)q(de)150 1864 y(n)o(um)o(b)q(ers,)15
b(whic)o(h)i(are)e(added)h(at)f(run)o(time)h(to)f(the)g(pid)i(of)e(the)g(pro)
q(cess.)21 b(This)16 b(is)g(done)g(in)g(ino)q(de.c)h(b)o(y)150
1928 y(careful)f(re-assignmen)o(t)f(of)g FD(inode)p 760 1928
V 16 w(operation)f FH(structures.)221 2016 y(Other)g(directories,)i(suc)o(h)f
(as)f(/pro)q(c/net/,)g(ha)o(v)o(e)g(their)i(o)o(wn)e(ino)q(de)i(n)o(um)o(b)q
(ers.)k(F)l(or)14 b(instance,)h(the)150 2080 y(net)h(directory)g(itself)g
(has)f(ino)q(de)i(n)o(um)o(b)q(er)f(8.)21 b(The)16 b(\014les)g(within)h(that)
e(directory)h(use)g(ino)q(de)h(n)o(um)o(b)q(ers)150 2145 y(from)d(the)g
(range)h(128{160,)d(and)j(those)f(are)g(uniquely)j(iden)o(ti\014ed)f(in)g
(ino)q(de.c)f(and)g(the)f(\014les)i(giv)o(en)f(the)150 2209
y(prop)q(er)g(p)q(ermissions)i(when)f(lo)q(ok)o(ed)f(up)h(and)f(read.)221
2297 y(Adding)g(a)e(\014le)i(is)f(relativ)o(ely)h(simple,)g(and)f(is)h(left)f
(as)f(an)h(exersize)h(for)e(the)h(reader.)19 b(Adding)c(a)f(new)150
2361 y(directory)k(is)g(a)f(little)i(bit)f(harder.)27 b(Assuming)18
b(that)f(it)h(is)g(not)f(a)h(dynamically)h(allo)q(cated)g(directory)150
2426 y(lik)o(e)d(the)g(pro)q(cess)f(directories,)h(here)g(are)e(the)i(steps:)
1068 2409 y Fm(2)p 150 2459 720 2 v 202 2486 a Fz(2)219 2502
y Fl(Unless)g(y)o(ou)g(are)f(making)i(a)e(sub)q(directory)j(of)d(the)g
(replicating,)j(dynamicall)q(y)g(allo)q(cated)g(pro)q(cess)e(directory)m(,)g
(y)o(ou)150 2554 y(w)o(ould)f(ha)o(v)o(e)g(to)g(create)f(a)h(new)f
(\014lesystem)i(t)o(yp)q(e,)f(similar)h(to)f(the)f(pro)q(c)h(\014lesystem)h
(in)f(design.)23 b(Sub)q(directories)18 b(of)c(the)p eop
%%Page: 71 80
71 79 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)36 b(Programming)19
b(the)f(/pro)q(c)h(\014lesystem)847 b FH(71)206 88 y(1.)22
b(Cho)q(ose)e(a)g FC(unique)g FH(range)g(of)g(ino)q(de)h(n)o(um)o(b)q(ers,)h
(giving)f(y)o(ourself)f(a)g(reasonable)h(amoun)o(t)e(of)264
153 y(ro)q(om)14 b(for)h(expansion.)21 b(Then,)15 b(righ)o(t)g(b)q(efore)g
(the)h(line)473 247 y Fr(if)21 b(\(!pid\))g({)g(/*)g(not)h(a)f(process)g
(directory)f(but)h(in)g(/proc/)g(*/)264 349 y FH(add)15 b(a)g(section)h(that)
e(lo)q(oks)i(lik)o(e)g(this:)473 443 y Fr(if)21 b(\(\(ino)g(>=)g(128\))g(&&)g
(\(ino)g(<=)h(160\)\))f({)g(/*)h(files)e(withing)h(/proc/net)f(*/)603
500 y(inode->i_mode)f(=)j(S_IFREG)e(|)i(0444;)603 556 y(inode->i_op)e(=)h
(&proc_net_inode_oper)o(atio)o(ns;)603 613 y(return;)473 670
y(})264 772 y FH(but)e(mo)q(dify)h(it)f(to)f(to)h(do)g(what)f(y)o(ou)h(w)o
(an)o(t.)31 b(F)l(or)18 b(instance,)j(p)q(erhaps)e(y)o(ou)g(ha)o(v)o(e)g(a)g
(range)f(of)264 836 y(200{256,)f(and)i(some)f(\014les,)i(ino)q(des)g(200,)f
(201,)f(and)h(202,)f(and)h(some)f(directories,)j(whic)o(h)e(are)264
900 y(ino)q(des)d(204)e(and)i(205.)j(Y)l(ou)c(also)g(ha)o(v)o(e)g(a)g(\014le)
h(that)f(is)g(readable)h(only)g(b)o(y)f(ro)q(ot,)f(ino)q(de)j(206.)264
983 y(Y)l(our)e(example)h(migh)o(t)f(lo)q(ok)g(lik)o(e)i(this:)473
1078 y Fr(if)k(\(\(ino)g(>=)g(200\))g(&&)g(\(ino)g(<=)h(256\)\))f({)g(/*)h
(files)e(withing)h(/proc/foo)f(*/)603 1134 y(switch)h(\(ino\))g({)647
1191 y(case)g(204:)647 1248 y(case)g(205:)756 1305 y(inode->i_mode)e(=)j
(S_IFDIR)e(|)i(0555;)756 1361 y(inode->i_op)d(=)j(&proc_foo_inode_o)o(perat)o
(ions;)756 1418 y(break;)647 1475 y(case)f(206:)756 1532 y(inode->i_mode)e(=)
j(S_IFREG)e(|)i(0400;)756 1589 y(inode->i_op)d(=)j(&proc_foo_inode_o)o(perat)
o(ions;)756 1645 y(break;)647 1702 y(default:)756 1759 y(inode->i_mode)d(=)j
(S_IFREG)e(|)i(0444;)756 1816 y(inode->i_op)d(=)j(&proc_foo_inode_o)o(perat)o
(ions;)756 1873 y(break;)603 1929 y(})603 1986 y(return;)473
2043 y(})206 2145 y FH(2.)g(Find)e(the)f(de\014nition)i(of)e(the)g(\014les.)
33 b(If)20 b(y)o(our)f(\014les)h(will)h(go)e(in)h(a)f(sub)q(directory)h(of)f
(/pro)q(c,)h(for)264 2209 y(instance,)15 b(y)o(ou)g(will)i(lo)q(ok)e(in)i(ro)
q(ot.c,)c(and)j(\014nd)g(the)f(follo)o(wing:)p 150 2249 720
2 v 150 2291 a Fl(pro)q(cess)i(directories)i(are)d(supp)q(orted)i(b)o(y)f
(the)f(mec)o(hanism)i(whic)o(h)f(dynamically)j(creates)d(the)f(pro)q(cess)h
(directories.)29 b(I)150 2343 y(suggest)18 b(going)g(through)f(this)h
(explanation)i(of)c(ho)o(w)h(to)f(add)i(a)e(non-dynamical)q(l)q(y-all)q(o)q
(ca)q(ted)k(directory)m(,)e(understand)150 2395 y(it,)e(and)f(then)h(read)f
(the)h(co)q(de)f(for)g(the)g(pro)q(cess)h(sub)q(directories,)i(if)e(y)o(ou)f
(wish)h(to)f(add)h(sub)q(directories)i(to)d(the)g(pro)q(cess)150
2447 y(sub)q(directories.)p eop
%%Page: 72 81
72 80 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)36 b(Programming)19
b(the)f(/pro)q(c)h(\014lesystem)847 b FH(72)364 88 y Fr(static)20
b(struct)h(proc_dir_entry)e(root_dir[])g(=)j({)473 145 y({)f(1,1,".")g(},)473
202 y({)g(1,2,"..")f(},)473 259 y({)h(2,7,"loadavg")e(},)473
316 y({)i(3,6,"uptime")e(},)473 372 y({)i(4,7,"meminfo")e(},)473
429 y({)i(5,4,"kmsg")f(},)473 486 y({)h(6,7,"version")e(},)473
543 y({)i(7,4,"self")f(},)43 b(/*)21 b(will)g(change)g(inode)g(#)g(*/)473
599 y({)g(8,4,"net")f(})364 656 y(};)264 757 y FH(Y)l(ou)14
b(will)h(then)g(add)f(a)f(new)i(\014le)g(to)e(this)h(structure,)g(lik)o(e)h
(this,)f(using)h(the)f(next)g(a)o(v)m(ailable)i(ino)q(de)264
822 y(n)o(um)o(b)q(er:)364 915 y Fr([...])473 972 y({)21 b(6,7,"version")e
(},)473 1029 y({)i(7,4,"self")f(},)43 b(/*)21 b(will)g(change)g(inode)g(#)g
(*/)473 1086 y({)g(8,4,"net")f(},)473 1142 y({)h(9,3,"foo")f(})364
1199 y(};)264 1300 y FH(Y)l(ou)15 b(will)i(then)e(ha)o(v)o(e)g(to)g(pro)o
(vide)h(for)e(this)i(new)f(directory)h(in)g(ino)q(de.c,)g(so:)473
1394 y Fr(if)21 b(\(!pid\))g({)g(/*)g(not)h(a)f(process)g(directory)f(but)h
(in)g(/proc/)g(*/)582 1450 y(inode->i_mode)e(=)i(S_IFREG)g(|)g(0444;)582
1507 y(inode->i_op)e(=)j(&proc_array_inod)o(e_ope)o(rati)o(ons;)582
1564 y(switch)e(\(ino\))625 1621 y(case)h(5:)734 1678 y(inode->i_op)f(=)h
(&proc_kmsg_inode_o)o(perat)o(ions;)734 1734 y(break;)625 1791
y(case)g(8:)g(/*)h(for)f(the)g(net)g(directory)f(*/)734 1848
y(inode->i_mode)f(=)j(S_IFDIR)e(|)i(0555;)734 1905 y(inode->i_op)e(=)h
(&proc_net_inode_op)o(erati)o(ons;)734 1962 y(break;)625 2018
y(default:)734 2075 y(break;)734 2132 y(return;)473 2189 y(})264
2290 y FH(b)q(ecomes)473 2383 y Fr(if)g(\(!pid\))g({)g(/*)g(not)h(a)f
(process)g(directory)f(but)h(in)g(/proc/)g(*/)582 2440 y(inode->i_mode)e(=)i
(S_IFREG)g(|)g(0444;)582 2497 y(inode->i_op)e(=)j(&proc_array_inod)o(e_ope)o
(rati)o(ons;)582 2554 y(switch)e(\(ino\))p eop
%%Page: 73 82
73 81 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)36 b(Programming)19
b(the)f(/pro)q(c)h(\014lesystem)847 b FH(73)625 88 y Fr(case)21
b(5:)734 145 y(inode->i_op)f(=)h(&proc_kmsg_inode_o)o(perat)o(ions;)734
202 y(break;)625 259 y(case)g(8:)g(/*)h(for)f(the)g(net)g(directory)f(*/)734
316 y(inode->i_mode)f(=)j(S_IFDIR)e(|)i(0555;)734 372 y(inode->i_op)e(=)h
(&proc_net_inode_op)o(erati)o(ons;)734 429 y(break;)625 486
y(case)g(9:)g(/*)h(for)f(the)g(foo)g(directory)f(*/)734 543
y(inode->i_mode)f(=)j(S_IFDIR)e(|)i(0555;)734 599 y(inode->i_op)e(=)h
(&proc_foo_inode_op)o(erati)o(ons;)734 656 y(break;)625 713
y(default:)734 770 y(break;)734 827 y(return;)473 883 y(})206
985 y FH(3.)h(Y)l(ou)14 b(no)o(w)f(ha)o(v)o(e)h(to)f(pro)o(vide)h(for)f(the)h
(con)o(ten)o(ts)g(of)f(the)h(\014les)h(within)g(the)f(fo)q(o)f(directory)l(.)
20 b(Mak)o(e)13 b(a)264 1049 y(\014le)e(called)h(pro)q(c/fo)q(o.c,)e(follo)o
(wing)h(the)f(follo)o(wing)h(mo)q(del:)1262 1033 y Fm(3)1300
1049 y FC([The)h(co)q(de)h(in)f FD(proc)p 1685 1049 15 2 v
16 w(lookupfoo\(\))264 1114 y FC(and)23 b FD(proc)p 469 1114
V 17 w(readfoo\(\))e FC(should)j(b)q(e)f(abstracted,)k(as)c(the)g
(functionalit)o(y)i(is)e(used)f(in)264 1178 y(more)17 b(than)h(one)g(place.])
364 1272 y Fr(/*)385 1329 y(*)44 b(linux/fs/proc/fo)o(o.c)385
1386 y(*)385 1443 y(*)g(Copyright)20 b(\(C\))h(1993)g(Linus)g(Torvalds,)f
(Michael)g(K.)h(Johnson,)f(and)i(Your)f(N.)g(Here)385 1500
y(*)385 1556 y(*)44 b(proc)21 b(foo)g(directory)f(handling)g(functions)385
1613 y(*)385 1670 y(*)44 b(inode)21 b(numbers)f(200)h(-)h(256)f(are)g
(reserved)f(for)h(this)g(directory)385 1727 y(*)44 b(\(/proc/foo/)19
b(and)i(its)h(subdirectories\))385 1783 y(*/)364 1897 y(#include)e
(<asm/segment.h>)364 1954 y(#include)g(<linux/errno.h>)364
2011 y(#include)g(<linux/sched.h>)364 2067 y(#include)g(<linux/proc_fs.h)o(>)
364 2124 y(#include)g(<linux/stat.h>)364 2238 y(static)g(int)h
(proc_readfoo\(struct)d(inode)j(*,)g(struct)g(file)g(*,)g(struct)g(dirent)f
(*,)i(int\);)364 2295 y(static)e(int)h(proc_lookupfoo\(stru)o(ct)e(inode)i
(*,const)f(char)h(*,int,struct)e(inode)i(**\);)364 2351 y(static)f(int)h
(proc_read\(struct)e(inode)i(*)g(inode,)g(struct)f(file)h(*)h(file,)821
2408 y(char)f(*)h(buf,)f(int)g(count\);)p 150 2445 720 2 v
202 2471 a Fz(3)219 2487 y Fl(This)13 b(\014le)f(is)h(a)o(v)n(ailab)q(e)h(as)
e(\014le)h(pro)q(c/fo)q(o.c)f(in)h(the)f Fa(The)i Fd(Linux)d
Fa(Kernel)h(Hackers')f(Guide)h Fl(source)h(men)o(tioned)g(on)g(the)150
2539 y(cop)o(yrigh)o(t)i(page.)p eop
%%Page: 74 83
74 82 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)36 b(Programming)19
b(the)f(/pro)q(c)h(\014lesystem)847 b FH(74)364 145 y Fr(static)20
b(struct)h(file_operations)d(proc_foo_operations)g(=)k({)538
202 y(NULL,)413 b(/*)21 b(lseek)g(-)h(default)e(*/)538 259
y(proc_read,)303 b(/*)21 b(read)g(*/)538 316 y(NULL,)413 b(/*)21
b(write)g(-)h(bad)f(*/)538 372 y(proc_readfoo,)237 b(/*)21
b(readdir)g(*/)538 429 y(NULL,)413 b(/*)21 b(select)g(-)h(default)e(*/)538
486 y(NULL,)413 b(/*)21 b(ioctl)g(-)h(default)e(*/)538 543
y(NULL,)413 b(/*)21 b(mmap)g(*/)538 599 y(NULL,)413 b(/*)21
b(no)h(special)e(open)h(code)g(*/)538 656 y(NULL)435 b(/*)21
b(no)h(special)e(release)g(code)h(*/)364 713 y(};)364 827 y(/*)385
883 y(*)h(proc)f(directories)e(can)j(do)f(almost)g(nothing..)385
940 y(*/)364 997 y(struct)f(inode_operations)f(proc_foo_inode_o)o(perat)o
(ions)f(=)k({)538 1054 y(&proc_foo_operati)o(ons,)62 b(/*)21
b(default)g(foo)g(directory)f(file-ops)g(*/)538 1111 y(NULL,)413
b(/*)21 b(create)g(*/)538 1167 y(proc_lookupfoo,)193 b(/*)21
b(lookup)g(*/)538 1224 y(NULL,)413 b(/*)21 b(link)g(*/)538
1281 y(NULL,)413 b(/*)21 b(unlink)g(*/)538 1338 y(NULL,)413
b(/*)21 b(symlink)g(*/)538 1394 y(NULL,)413 b(/*)21 b(mkdir)g(*/)538
1451 y(NULL,)413 b(/*)21 b(rmdir)g(*/)538 1508 y(NULL,)413
b(/*)21 b(mknod)g(*/)538 1565 y(NULL,)413 b(/*)21 b(rename)g(*/)538
1622 y(NULL,)413 b(/*)21 b(readlink)g(*/)538 1678 y(NULL,)413
b(/*)21 b(follow_link)f(*/)538 1735 y(NULL,)413 b(/*)21 b(bmap)g(*/)538
1792 y(NULL,)413 b(/*)21 b(truncate)g(*/)538 1849 y(NULL)435
b(/*)21 b(permission)f(*/)364 1906 y(};)364 2019 y(static)g(struct)h
(proc_dir_entry)e(foo_dir[])h(=)h({)538 2076 y({)h(1,2,"..")e(},)538
2133 y({)i(9,1,".")e(},)538 2190 y({)i(200,3,"bar")d(},)538
2246 y({)j(201,4,"suds")d(},)538 2303 y({)j(202,5,"xyzzy")d(},)538
2360 y({)j(203,3,"baz")d(},)538 2417 y({)j(204,4,"dir1")d(},)538
2473 y({)j(205,4,"dir2")d(},)538 2530 y({)j(206,8,"rootfile)o(")d(})p
eop
%%Page: 75 84
75 83 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)36 b(Programming)19
b(the)f(/pro)q(c)h(\014lesystem)847 b FH(75)364 88 y Fr(};)364
202 y(#define)20 b(NR_FOO_DIRENTRY)f(\(\(sizeof)h(\(foo_dir\)\)/\(size)o(of)f
(\(foo_dir[0]\)\)\))364 316 y(unsigned)h(int)h(get_bar\(char)e(*)j(buffer\);)
364 372 y(unsigned)e(int)h(get_suds\(char)e(*)j(buffer\);)364
429 y(unsigned)e(int)h(get_xyzzy\(char)e(*)i(buffer\);)364
486 y(unsigned)f(int)h(get_baz\(char)e(*)j(buffer\);)364 543
y(unsigned)e(int)h(get_rootfile\(char)d(*)k(buffer\);)364 713
y(static)e(int)h(proc_read\(struct)e(inode)i(*)g(inode,)g(struct)f(file)h(*)h
(file,)821 770 y(char)f(*)h(buf,)f(int)g(count\))364 827 y({)538
883 y(char)g(*)h(page;)538 940 y(int)f(length;)538 997 y(int)g(end;)538
1054 y(unsigned)f(int)h(ino;)538 1167 y(if)g(\(count)g(<)g(0\))712
1224 y(return)g(-EINVAL;)538 1281 y(page)g(=)h(\(char)e(*\))i
(get_free_page\(GF)o(P_KER)o(NEL\))o(;)538 1338 y(if)f(\(!page\))712
1394 y(return)g(-ENOMEM;)538 1451 y(ino)g(=)h(inode->i_ino;)538
1508 y(switch)f(\(ino\))f({)712 1565 y(case)h(200:)887 1622
y(length)f(=)i(get_bar\(page\);)887 1678 y(break;)712 1735
y(case)f(201:)887 1792 y(length)f(=)i(get_suds\(page\);)887
1849 y(break;)712 1906 y(case)f(202:)887 1962 y(length)f(=)i
(get_xyzzy\(page\);)887 2019 y(break;)712 2076 y(case)f(203:)887
2133 y(length)f(=)i(get_baz\(page\);)887 2190 y(break;)712
2246 y(case)f(206:)887 2303 y(length)f(=)i(get_rootfile\(pag)o(e\);)887
2360 y(break;)712 2417 y(default:)887 2473 y(free_page\(\(unsig)o(ned)d
(long\))h(page\);)887 2530 y(return)g(-EBADF;)p eop
%%Page: 76 85
76 84 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)36 b(Programming)19
b(the)f(/pro)q(c)h(\014lesystem)847 b FH(76)538 88 y Fr(})538
145 y(if)21 b(\(file->f_pos)f(>=)h(length\))f({)712 202 y
(free_page\(\(unsigned)e(long\))j(page\);)712 259 y(return)g(0;)538
316 y(})538 372 y(if)g(\(count)g(+)g(file->f_pos)f(>)i(length\))712
429 y(count)f(=)h(length)e(-)i(file->f_pos;)538 486 y(end)f(=)h(count)e(+)i
(file->f_pos;)538 543 y(memcpy_tofs\(buf,)c(page)j(+)h(file->f_pos,)d
(count\);)538 599 y(free_page\(\(unsign)o(ed)g(long\))i(page\);)538
656 y(file->f_pos)e(=)j(end;)538 713 y(return)f(count;)364
827 y(})364 940 y(static)f(int)h(proc_lookupfoo\(stru)o(ct)e(inode)i(*)g
(dir,const)f(char)h(*)h(name,)e(int)i(len,)538 997 y(struct)f(inode)f(**)i
(result\))364 1054 y({)538 1111 y(unsigned)e(int)h(pid,)g(ino;)538
1167 y(int)g(i;)538 1281 y(*result)f(=)i(NULL;)538 1338 y(if)f(\(!dir\))712
1394 y(return)g(-ENOENT;)538 1451 y(if)g(\(!S_ISDIR\(dir->i_mo)o(de\)\))d({)
712 1508 y(iput\(dir\);)712 1565 y(return)j(-ENOENT;)538 1622
y(})538 1678 y(ino)g(=)h(dir->i_ino;)538 1735 y(i)g(=)f(NR_FOO_DIRENTRY;)538
1792 y(while)g(\(i--)g(>)g(0)h(&&)f(!proc_match\(len,nam)o(e,fo)o(o_dir)o
(+i\)\))712 1849 y(/*)h(nothing)e(*/;)538 1906 y(if)h(\(i)h(<)f(0\))h({)712
1962 y(iput\(dir\);)712 2019 y(return)f(-ENOENT;)538 2076 y(})538
2133 y(if)g(\(!\(*result)f(=)i(iget\(dir->i_sb,i)o(no\)\)\))c({)712
2190 y(iput\(dir\);)712 2246 y(return)j(-ENOENT;)538 2303 y(})538
2360 y(iput\(dir\);)538 2417 y(return)g(0;)364 2473 y(})p eop
%%Page: 77 86
77 85 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)36 b(Programming)19
b(the)f(/pro)q(c)h(\014lesystem)847 b FH(77)364 88 y Fr(static)20
b(int)h(proc_readfoo\(struct)d(inode)j(*)h(inode,)e(struct)h(file)g(*)g
(filp,)538 145 y(struct)g(dirent)f(*)i(dirent,)e(int)h(count\))364
202 y({)538 259 y(struct)g(proc_dir_entry)d(*)k(de;)538 316
y(unsigned)e(int)h(pid,)g(ino;)538 372 y(int)g(i,j;)538 486
y(if)g(\(!inode)g(||)g(!S_ISDIR\(inode->i_)o(mode\))o(\))712
543 y(return)g(-EBADF;)538 599 y(ino)g(=)h(inode->i_ino;)538
656 y(if)f(\(\(\(unsigned\))f(filp->f_pos\))f(<)j(NR_FOO_DIRENTRY)o(\))d({)
712 713 y(de)j(=)f(foo_dir)g(+)g(filp->f_pos;)712 770 y(filp->f_pos++;)712
827 y(i)h(=)f(de->namelen;)712 883 y(ino)g(=)h(de->low_ino;)712
940 y(put_fs_long\(ino,)d(&dirent->d_ino\);)712 997 y(put_fs_word\(i,&dire)o
(nt->d)o(_recl)o(en\);)712 1054 y(put_fs_byte\(0,i+dir)o(ent->)o(d_nam)o
(e\);)712 1111 y(j)j(=)f(i;)712 1167 y(while)g(\(i--\))887
1224 y(put_fs_byte\(de->)o(name[)o(i],)d(i+dirent->d_name\);)712
1281 y(return)j(j;)538 1338 y(})538 1394 y(return)g(0;)364
1451 y(})364 1622 y(unsigned)f(int)h(get_foo\(char)e(*)j(buffer\))364
1678 y({)364 1792 y(/*)f(code)g(to)g(find)g(everything)f(goes)h(here)g(*/)538
1906 y(return)g(sprintf\(buffer,)d("format)j(string",)f(variables\);)364
1962 y(})364 2133 y(unsigned)g(int)h(get_suds\(char)e(*)j(buffer\))364
2190 y({)364 2303 y(/*)f(code)g(to)g(find)g(everything)f(goes)h(here)g(*/)538
2417 y(return)g(sprintf\(buffer,)d("format)j(string",)f(variables\);)364
2473 y(})p eop
%%Page: 78 87
78 86 bop 150 -84 1800 3 v 150 -100 a FC(2.3.)42 b(Programming)19
b(the)e(/pro)q(c)i(\014lesystem)842 b FH(78)364 145 y Fr(unsigned)20
b(int)h(get_xyzzy\(char)e(*)i(buffer\))364 202 y({)364 316
y(/*)g(code)g(to)g(find)g(everything)f(goes)h(here)g(*/)538
429 y(return)g(sprintf\(buffer,)d("format)j(string",)f(variables\);)364
486 y(})364 656 y(unsigned)g(int)h(get_baz\(char)e(*)j(buffer\))364
713 y({)364 827 y(/*)f(code)g(to)g(find)g(everything)f(goes)h(here)g(*/)538
940 y(return)g(sprintf\(buffer,)d("format)j(string",)f(variables\);)364
997 y(})364 1167 y(unsigned)g(int)h(get_rootfile\(char)d(*)k(buffer\))364
1224 y({)364 1338 y(/*)f(code)g(to)g(find)g(everything)f(goes)h(here)g(*/)538
1451 y(return)g(sprintf\(buffer,)d("format)j(string",)f(variables\);)364
1508 y(})206 1609 y FH(4.)i(Filling)g(in)f(the)f(directories)h(dir1)f(and)g
(dir2)h(is)f(left)h(as)e(an)h(excersize.)36 b(In)21 b(most)e(cases,)i(suc)o
(h)264 1674 y(directories)16 b(will)h(not)e(b)q(e)g(needed.)22
b(Ho)o(w)o(ev)o(er,)14 b(if)h(they)g(are,)g(the)g(steps)g(presen)o(ted)h
(here)g(ma)o(y)e(b)q(e)264 1738 y(applied)20 b(recursiv)o(ely)g(to)e(add)h
(\014les)h(to)d(a)i(directory)g(at)f(another)g(lev)o(el.)31
b(Notice)20 b(that)d(I)i(sa)o(v)o(ed)264 1802 y(a)g(range)g(of)f(200{256)g
(for)g(/pro)q(c/fo)q(o/)h(and)g(all)h(its)g(sub)q(directories,)h(so)e(there)h
(are)f(plen)o(t)o(y)g(of)264 1867 y(un)o(used)14 b(ino)q(de)g(n)o(um)o(b)q
(ers)g(in)g(that)e(range)h(for)g(y)o(our)f(\014les)j(in)f(dir1)f(and)h(dir2.)
19 b(I)14 b(suggest)e(reserving)264 1931 y(a)h(range)h(for)f(eac)o(h)h
(directory)l(,)h(in)f(case)g(y)o(ou)g(need)h(to)e(expand.)20
b(Also,)14 b(I)h(suggest)e(k)o(eeping)i(all)g(the)264 1995
y(extra)e(data)h(and)g(functions)h(in)g(fo)q(o.c,)f(rather)f(than)h(making)h
(y)o(et)e(another)h(\014le,)h(unless)h(the)e(\014les)264 2060
y(in)i(the)f(dir1)h(and)f(dir2)g(directories)i(are)e(signi\014can)o(tly)h
(di\013eren)o(t)h(in)f(concept)f(than)g(fo)q(o.)206 2161 y(5.)22
b(Mak)o(e)17 b(the)h(appropriate)g(c)o(hanges)h(to)e(fs/pro)q(c/Mak)o
(e\014le.)29 b(This)18 b(is)h(also)f(left)h(as)f(an)g(excersize)264
2225 y(for)c(the)h(reader.)221 2349 y FC([Please)j(note:)25
b(I)18 b(ha)o(v)o(e)f(made)h(c)o(hanges)g(similar)h(to)f(these)g(\(I)g(wrote)
h(the)f(/pro)q(c/net/)150 2414 y(supp)q(ort\).)29 b(Ho)o(w)o(ev)o(er,)18
b(this)h(has)g(b)q(een)g(written)h(from)f(memory)l(,)f(and)h(ma)o(y)f(b)q(e)h
(unin)o(ten-)150 2478 y(tionally)g(incomplete.)25 b(If)18 b(y)o(ou)e(notice)j
(an)o(y)e(inadequacies,)i(please)f(explain)g(them)g(to)f(me)150
2542 y(in)d(as)g(complete)h(detail)g(as)f(p)q(ossible.)23 b(My)13
b(email)i(address)f(is)g FD(johnsonm@sunsite.unc.edu)o FC(])p
eop
%%Page: 79 88
79 87 bop 150 438 a Fu(Chapter)34 b(3)150 686 y Fw(Ho)m(w)39
b(System)h(Calls)h(W)-10 b(ork)150 940 y FC([This)22 b(needs)e(to)h(b)q(e)g
(a)g(little)h(re-w)o(ork)o(ed)f(and)g(expanded)f(up)q(on,)j(but)e(I)f(am)h(w)
o(aiting)h(to)150 1004 y(see)17 b(if)h(the)g(iBCS)g(stu\013)f(mak)o(es)g(an)o
(y)g(impact)h(on)g(it)g(as)f(I)h(write)g(other)h(stu\013.])221
1092 y FH(This)c(section)h(co)o(v)o(ers)e(\014rst)g(the)h(mec)o(hanisms)h
(pro)o(vided)g(b)o(y)f(the)g(386)f(for)g(handling)j(system)d(calls,)150
1157 y(and)f(then)g(sho)o(ws)f(ho)o(w)g FE(Linux)g FH(uses)h(those)f(mec)o
(hanisms.)20 b(This)13 b(is)g(not)f(a)h(reference)g(to)f(the)h(individual)150
1221 y(system)i(calls:)21 b(There)15 b(are)g(v)o(ery)g(man)o(y)g(of)g(them,)g
(new)g(ones)h(are)f(added)h(o)q(ccasionally)l(,)g(and)g(they)f(are)150
1285 y(do)q(cumen)o(ted)i(in)g(man)g(pages)f(that)f(should)j(b)q(e)f(on)f(y)o
(our)g FE(Linux)f FH(system.)23 b(W)l(ell,)18 b(they)e(are)g
FB(supp)n(ose)n(d)150 1350 y FH(to)i(b)q(e)i(do)q(cumen)o(ted)g(and)f(on)g(y)
o(our)g FE(Linux)f FH(system.)31 b(This)20 b(is)f(b)q(eing)h(w)o(ork)o(ed)f
(on.)31 b FC([Ideally)l(,)24 b(this)150 1414 y(c)o(hapter)c(should)f(b)q(e)g
(part)g(of)g(another)h(section,)g(I)f(think.)27 b(Ma)o(yb)q(e,)19
b(ho)o(w)o(ev)o(er,)f(it)i(should)150 1478 y(just)h(b)q(e)h(expanded.)37
b(I)21 b(think)h(it)g(b)q(elongs)h(somewhere)e(near)h(the)g(c)o(hapter)h(on)f
(ho)o(w)f(to)150 1543 y(write)e(a)e(device)h(driv)o(er,)h(b)q(ecause)f(it)g
(explains)g(ho)o(w)f(to)h(write)h(a)e(system)f(call.])150 1720
y Fs(3.1)70 b(What)23 b(Do)r(es)f(the)h(386)h(Pro)n(vide?)150
1853 y FH(The)11 b(386)f(recognizes)h(t)o(w)o(o)f(ev)o(en)o(t)g(classes:)19
b(exceptions)11 b(and)g(in)o(terrupts.)19 b(Both)10 b(cause)h(a)g(forced)g
(con)o(text)150 1917 y(switc)o(h)18 b(to)g(new)g(a)g(pro)q(cedure)h(or)e
(task.)28 b(In)o(terrupts)18 b(can)g(o)q(ccur)g(at)g(unexp)q(ected)i(times)e
(during)h(the)150 1982 y(execution)e(of)f(a)f(program)g(and)h(are)g(used)g
(to)f(resp)q(ond)i(to)e(signals)i(from)e(hardw)o(are.)22 b(Exceptions)16
b(are)150 2046 y(caused)g(b)o(y)f(the)g(execution)h(of)f(instructions.)221
2134 y(Tw)o(o)c(sources)h(of)g(in)o(terrupts)h(are)f(recognized)h(b)o(y)f
(the)h(386:)k(Mask)m(able)c(in)o(terrupts)g(and)f(Nonmask-)150
2198 y(able)18 b(in)o(terrupts.)26 b(Tw)o(o)16 b(sources)i(of)e(exceptions)j
(are)e(recognized)h(b)o(y)f(the)h(386:)23 b(Pro)q(cessor)16
b(detected)150 2262 y(exceptions)g(and)g(programmed)e(exceptions.)221
2350 y(Eac)o(h)c(in)o(terrupt)g(or)g(exception)i(has)e(a)g(n)o(um)o(b)q(er,)h
(whic)o(h)h(is)e(referred)h(to)f(b)o(y)g(the)g(386)g(literature)h(as)f(the)
150 2415 y(v)o(ector.)18 b(The)11 b(NMI)g(in)o(terrupt)g(and)g(the)g(pro)q
(cessor)g(detected)h(exceptions)g(ha)o(v)o(e)e(b)q(een)i(assigned)g(v)o
(ectors)150 2479 y(in)18 b(the)g(range)f(0)h(through)f(31,)g(inclusiv)o(e.)30
b(The)17 b(v)o(ectors)g(for)g(mask)m(able)i(in)o(terrupts)e(are)h(determined)
150 2543 y(b)o(y)23 b(the)f(hardw)o(are.)42 b(External)22 b(in)o(terrupt)h
(con)o(trollers)g(put)g(the)f(v)o(ector)g(on)h(the)f(bus)h(during)h(the)1027
2678 y(79)p eop
%%Page: 80 89
80 88 bop 150 -84 1800 3 v 150 -100 a FC(3.1.)42 b(What)18
b(Do)q(es)g(the)g(386)f(Pro)o(vide?)969 b FH(80)150 88 y(in)o(terrupt-ac)o
(kno)o(wledge)21 b(cycle.)35 b(An)o(y)20 b(v)o(ector)g(in)h(the)f(range)g(32)
f(through)h(255,)g(inclusiv)o(e,)j(can)d(b)q(e)150 153 y(used)e(for)f(mask)m
(able)h(in)o(terrupts)f(or)g(programmed)g(exceptions.)27 b(See)18
b(\014gure)g(3.1)e(for)h(a)g(listing)i(of)e(all)150 217 y(the)i(p)q(ossible)h
(in)o(terrupts)f(and)g(exceptions.)31 b FC([Chec)o(k)21 b(all)i(this)f(out)g
(to)g(mak)o(e)e(sure)i(that)h(it)f(is)150 281 y(righ)o(t.])p
655 344 805 2 v 654 409 2 65 v 794 389 a FH(0)p 841 409 V 50
w(divide)17 b(error)p 1459 409 V 655 410 805 2 v 654 475 2
65 v 794 455 a(1)p 841 475 V 50 w(debug)e(exception)p 1459
475 V 655 476 805 2 v 654 541 2 65 v 794 521 a(2)p 841 541
V 50 w(NMI)g(in)o(terrupt)p 1459 541 V 655 542 805 2 v 654
607 2 65 v 794 587 a(3)p 841 607 V 50 w(Breakp)q(oin)o(t)p
1459 607 V 655 608 805 2 v 654 673 2 65 v 794 653 a(4)p 841
673 V 50 w(INTO-detected)h(Ov)o(er\015o)o(w)p 1459 673 V 655
674 805 2 v 654 739 2 65 v 794 719 a(5)p 841 739 V 50 w(BOUND)f(range)g
(exceeded)p 1459 739 V 655 740 805 2 v 654 805 2 65 v 794 785
a(6)p 841 805 V 50 w(In)o(v)m(alid)i(op)q(co)q(de)p 1459 805
V 655 806 805 2 v 654 871 2 65 v 794 851 a(7)p 841 871 V 50
w(copro)q(cessor)d(not)h(a)o(v)m(ailable)p 1459 871 V 655 872
805 2 v 654 937 2 65 v 794 918 a(8)p 841 937 V 50 w(double)h(fault)p
1459 937 V 655 938 805 2 v 654 1003 2 65 v 794 984 a(9)p 841
1003 V 50 w(copro)q(cessor)e(segmen)o(t)h(o)o(v)o(errun)p 1459
1003 V 655 1004 805 2 v 654 1069 2 65 v 771 1050 a(10)p 841
1069 V 50 w(in)o(v)m(alid)i(task)e(state)f(segmen)o(t)p 1459
1069 V 655 1071 805 2 v 654 1135 2 65 v 771 1116 a(11)p 841
1135 V 50 w(segmen)o(t)g(not)h(presen)o(t)p 1459 1135 V 655
1137 805 2 v 654 1201 2 65 v 771 1182 a(12)p 841 1201 V 50
w(stac)o(k)f(fault)p 1459 1201 V 655 1203 805 2 v 654 1267
2 65 v 771 1248 a(13)p 841 1267 V 50 w(general)h(protection)p
1459 1267 V 655 1269 805 2 v 654 1333 2 65 v 771 1314 a(14)p
841 1333 V 50 w(page)g(fault)p 1459 1333 V 655 1335 805 2 v
654 1399 2 65 v 771 1380 a(15)p 841 1399 V 50 w(reserv)o(ed)p
1459 1399 V 655 1401 805 2 v 654 1465 2 65 v 771 1446 a(16)p
841 1465 V 50 w(copro)q(cessor)f(error)p 1459 1465 V 655 1467
805 2 v 654 1531 2 65 v 703 1512 a(17{31)p 841 1531 V 49 w(reserv)o(ed)p
1459 1531 V 655 1533 805 2 v 654 1597 2 65 v 680 1578 a(32{255)p
841 1597 V 49 w(mask)m(able)i(in)o(terrupts)p 1459 1597 V 655
1599 805 2 v 559 1676 a(Figure)f(3.1:)k(In)o(terrupt)c(and)h(Exception)g
(Assignmen)o(ts)539 1806 y(HIGHEST)p 773 1825 2 65 v 50 w(F)l(aults)g(except)
f(debug)h(faults)p 773 1890 V 798 1870 a(T)l(rap)f(instructions)i(INTO,)e
(INT)h(n,)f(INT)g(3)p 773 1954 V 798 1935 a(Debug)h(traps)e(for)h(this)h
(instruction)p 773 2018 V 798 1999 a(Debug)g(traps)e(for)h(next)g
(instruction)p 773 2083 V 798 2063 a(NMI)h(in)o(terrupt)550
2128 y(LO)o(WEST)p 773 2147 V 50 w(INTR)g(in)o(terrupt)433
2224 y(Figure)f(3.2:)k(Priorit)o(y)c(of)g(sim)o(ultaneous)h(in)o(terrupts)g
(and)f(exceptions)p eop
%%Page: 81 90
81 89 bop 150 -84 1800 3 v 150 -100 a FC(3.2.)36 b(Ho)o(w)17
b FE(Linux)g FC(Uses)g(In)o(terrupts)h(and)g(Exceptions)649
b FH(81)150 88 y Fs(3.2)70 b(Ho)n(w)22 b FJ(Linux)g Fs(Uses)h(In)n(terrupts)g
(and)h(Exceptions)150 221 y FH(Under)13 b(Lin)o(ux)g(the)f(execution)h(of)f
(a)f(system)h(call)h(is)g(in)o(v)o(ok)o(ed)f(b)o(y)g(a)g(mask)m(able)g(in)o
(terrupt)h(or)e FC(exception)150 286 y FH(class)16 b(transfer,)f(caused)h(b)o
(y)g(the)f(instruction)i FD(int)24 b(0x80)p FH(.)c(W)l(e)c(use)g(v)o(ector)f
(0x80)g(to)g(transfer)g(con)o(trol)150 350 y(to)g(the)g(k)o(ernel,)g(whic)o
(h)h(is)g(initialized)j(during)d(system)f(startup.)221 438
y(As)f(of)g(v)o(ersion)h(0.99.2)d(of)i FE(Linux)p FH(,)g(there)g(are)g(116)g
(system)g(calls.)21 b(Do)q(cumen)o(tation)14 b(for)g(man)o(y)g(can)150
502 y(b)q(e)19 b(found)h(in)f(the)g(man)g(\(2\))f(pages.)30
b(When)19 b(a)g(user)g(in)o(v)o(ok)o(es)f(a)h(system)f(call,)j(execution)f
(\015o)o(w)e(is)h(as)150 567 y(follo)o(ws:)218 704 y FG(\017)k
FH(Eac)o(h)e(call)i(is)f(v)o(ectored)g(through)f(a)h(stub)g(in)g(lib)q(c.)42
b(Eac)o(h)21 b(call)i(within)g(the)f(lib)q(c)i(library)e(is)264
769 y(generally)e(a)f FD(syscall)p Fv(X)p FD(\(\))f FH(macro,)h(where)h
Fv(X)f FH(is)h(the)g(n)o(um)o(b)q(er)f(of)g(parameters)g(used)h(b)o(y)f(the)
264 833 y(actual)d(routine.)25 b(Some)16 b(system)h(calls)g(are)f(more)h
(complex)g(then)g(others)f(b)q(ecause)h(of)g(v)m(ariable)264
897 y(length)g(argumen)o(t)f(lists,)h(but)f(ev)o(en)h(these)g(complex)g
(system)f(calls)i(m)o(ust)e(use)h(the)f(same)g(en)o(try)264
962 y(p)q(oin)o(t:)j(they)14 b(just)f(ha)o(v)o(e)g(more)g(parameter)g(setup)h
(o)o(v)o(erhead.)19 b(Examples)14 b(of)f(a)g(complex)h(system)264
1026 y(call)i(include)i FD(open\(\))c FH(and)h FD(ioctl\(\))p
FH(.)218 1128 y FG(\017)23 b FH(Eac)o(h)18 b(syscall)h(macro)f(expands)h(to)f
(an)g(assem)o(bly)h(routine)g(whic)o(h)g(sets)f(up)h(the)g(calling)h(stac)o
(k)264 1192 y(frame)14 b(and)h(calls)p 582 1192 15 2 v 32 w
FD(system)p 743 1192 V 17 w(call\(\))f FH(through)g(an)g(in)o(terrupt,)h(via)
g(the)g(instruction)g FD(int)24 b($0x80)264 1275 y FH(F)l(or)14
b(example,)i(the)f(setuid)h(system)f(call)h(is)g(co)q(ded)g(as)p
366 1377 14 2 v 379 1377 a Fr(syscall1\(int,setuid)o(,uid)p
886 1377 V 12 w(t,uid\);)264 1479 y FH(Whic)o(h)g(will)g(expand)g(to:)364
1573 y Fr(_setuid:)407 1629 y(subl)21 b($4,\045exp)407 1686
y(pushl)g(\045ebx)407 1743 y(movzwl)g(12\(\045esp\),\045eax)407
1800 y(movl)g(\045eax,4\(\045esp\))407 1857 y(movl)g($23,\045eax)407
1913 y(movl)g(4\(\045esp\),\045ebx)407 1970 y(int)g($0x80)407
2027 y(movl)g(\045eax,\045edx)407 2084 y(testl)g(\045edx,\045edx)407
2141 y(jge)g(L2)407 2197 y(negl)g(\045edx)407 2254 y(movl)g(\045edx,_errno)
407 2311 y(movl)g($-1,\045eax)407 2368 y(popl)g(\045ebx)407
2424 y(addl)g($4,\045esp)407 2481 y(ret)364 2538 y(L2:)p eop
%%Page: 82 91
82 90 bop 150 -84 1800 3 v 150 -100 a FC(3.3.)42 b(Ho)o(w)17
b FE(Linux)g FC(Initializes)j(the)d(system)f(call)j(v)o(ectors)607
b FH(82)407 88 y Fr(movl)21 b(\045edx,\045eax)407 145 y(popl)g(\045ebx)407
202 y(addl)g($4,\045esp)407 259 y(ret)264 354 y FH(The)10 b(macro)f
(de\014nition)j(for)e(the)g FD(syscall)p Fv(X)p FD(\(\))f FH(macros)h(can)g
(b)q(e)h(found)f(in)h(/usr/include/lin)o(ux/uni)q(std.h,)264
418 y(and)k(the)g(user-space)h(system)f(call)h(library)g(co)q(de)g(can)f(b)q
(e)h(found)g(in)g(/usr/src/lib)q(c/syscall/)218 514 y FG(\017)23
b FH(A)o(t)15 b(this)h(p)q(oin)o(t)g(no)g(system)f(co)q(de)i(for)e(the)g
(call)i(has)f(b)q(een)h(executed.)22 b(Not)15 b(un)o(til)i(the)f(in)o(t)g
($0x80)264 578 y(is)21 b(executed)g(do)q(es)g(the)f(call)h(transfer)f(to)g
(the)g(k)o(ernel)h(en)o(try)f(p)q(oin)o(t)p 1495 578 15 2 v
38 w FD(system)p 1656 578 V 17 w(call\(\))p FH(.)34 b(This)264
642 y(en)o(try)16 b(p)q(oin)o(t)i(is)f(the)g(same)g(for)f(all)i(system)f
(calls.)26 b(It)17 b(is)g(resp)q(onsible)i(for)e(sa)o(ving)g(all)g
(registers,)264 707 y(c)o(hec)o(king)d(to)e(mak)o(e)h(sure)g(a)g(v)m(alid)i
(system)e(call)h(w)o(as)e(in)o(v)o(ok)o(ed)i(and)f(then)h(ultimately)g
(transfering)264 771 y(con)o(trol)21 b(to)g(the)h(actual)g(system)f(call)i
(co)q(de)f(via)g(the)g(o\013sets)f(in)i(the)p 1529 771 V 39
w FD(sys)p 1618 771 V 17 w(call)p 1731 771 V 16 w(table)p FH(.)39
b(It)264 835 y(is)18 b(also)g(resp)q(onsible)i(for)e(calling)p
866 835 V 37 w FD(ret)p 955 835 V 17 w(from)p 1068 835 V 16
w(sys)p 1156 835 V 17 w(call\(\))f FH(when)i(the)f(system)g(call)h(has)f(b)q
(een)264 900 y(completed,)d(but)h(b)q(efore)f(returning)h(to)f(user)g(space.)
264 979 y(Actual)10 b(co)q(de)h(for)f FD(system)p 718 979 V
16 w(call)f FH(en)o(try)h(p)q(oin)o(t)h(can)f(b)q(e)h(found)f(in)h
(/usr/src/lin)o(ux/k)o(ernel/sys)p 1879 979 14 2 v 18 w(call.S)264
1044 y(Actual)j(co)q(de)g(for)f(man)o(y)g(of)g(the)g(system)g(calls)i(can)f
(b)q(e)g(found)g(in)g(/usr/src/lin)o(ux/k)o(ernel/sys.c,)264
1108 y(and)h(the)g(rest)g(are)g(found)g(elsewhere.)22 b FD(find)14
b FH(is)i(y)o(our)f(friend.)218 1203 y FG(\017)23 b FH(After)15
b(the)h(system)g(call)h(has)f(executed,)p 985 1203 15 2 v 34
w FD(ret)p 1074 1203 V 17 w(from)p 1187 1203 V 16 w(sys)p 1275
1203 V 17 w(call\(\))f FH(is)i(called.)24 b(It)16 b(c)o(hec)o(ks)g(to)g(see)
264 1268 y(if)f(the)h(sc)o(heduler)g(should)g(b)q(e)g(run,)f(and)h(if)f(so,)g
(calls)h(it.)218 1363 y FG(\017)23 b FH(Up)q(on)15 b(return)g(from)f(the)h
(system)f(call,)i(the)f FD(syscall)p Fv(X)p FD(\(\))e FH(macro)i(co)q(de)g(c)
o(hec)o(ks)g(for)f(a)h(negativ)o(e)264 1427 y(return)f(v)m(alue,)h(and)f(if)g
(there)g(is)h(one,)f(puts)g(a)f(p)q(ositiv)o(e)i(cop)o(y)f(of)f(the)h(return)
g(v)m(alue)i(in)e(the)g(global)264 1492 y(v)m(ariable)p 437
1492 V 33 w FD(errno)p FH(,)g(so)h(that)g(it)g(can)h(b)q(e)f(accessed)h(b)o
(y)f(co)q(de)h(lik)o(e)h FD(perror\(\))p FH(.)150 1666 y Fs(3.3)70
b(Ho)n(w)22 b FJ(Linux)g Fs(Initialize)o(s)e(the)i(system)g(call)f(v)n
(ectors)150 1799 y FH(The)11 b FD(startup)p 410 1799 V 16 w(32\(\))f
FH(co)q(de)h(found)g(in)g(/usr/src/lin)o(ux/b)q(o)q(ot/head.S)g(starts)e(ev)o
(erything)i(o\013)g(b)o(y)f(calling)150 1863 y FD(setup)p 273
1863 V 16 w(idt\(\))p FH(.)25 b(This)17 b(routine)h(sets)f(up)g(an)g(IDT)g
(\(In)o(terrupt)f(Descriptor)h(T)l(able\))h(with)f(256)f(en)o(tries.)150
1927 y(No)j(in)o(terrupt)h(en)o(try)f(p)q(oin)o(ts)h(are)f(actually)h(loaded)
g(b)o(y)g(this)g(routine,)g(as)f(that)g(is)h(done)g(only)g(after)150
1992 y(paging)c(has)h(b)q(een)g(enabled)g(and)g(the)f(k)o(ernel)h(has)f(b)q
(een)h(mo)o(v)o(ed)f(to)g(0xC0000000.)k(An)d(IDT)f(has)g(256)150
2056 y(en)o(tries,)f(eac)o(h)g(4)g(b)o(ytes)g(long,)g(for)g(a)g(total)f(of)h
(1024)f(b)o(ytes.)221 2144 y(When)c FD(start)p 471 2144 V 17
w(kernel\(\))f FH(\(found)h(in)h(/usr/src/lin)o(ux/init/main.c\))g(is)g
(called)g(it)g(in)o(v)o(ok)o(es)f FD(trap)p 1887 2144 V 17
w(init\(\))150 2208 y FH(\(found)23 b(in)h(/usr/src/lin)o(ux/k)o
(ernel/traps.c\).)42 b FD(trap)p 1118 2208 V 17 w(init\(\))22
b FH(sets)g(up)i(the)f(IDT)g(via)g(the)g(macro)150 2273 y FD(set)p
225 2273 V 17 w(trap)p 338 2273 V 16 w(gate\(\))c FH(\(found)h(in)h
(/usr/include/asm/system.h\).)34 b FD(trap)p 1431 2273 V 16
w(init\(\))19 b FH(initializes)k(the)d(in-)150 2337 y(terrupt)15
b(descriptor)g(table)h(as)f(sho)o(wn)g(in)h(\014gure)f(3.3.)150
2425 y(A)o(t)k(this)h(p)q(oin)o(t)g(the)g(in)o(terrupt)g(v)o(ector)f(for)g
(the)h(system)f(calls)i(is)f(not)g(set)f(up.)34 b(It)20 b(is)g(initialized)j
(b)o(y)150 2489 y FD(sched)p 273 2489 V 16 w(init\(\))10 b
FH(\(found)g(in)h(/usr/src/lin)o(ux/k)o(ernel/sc)o(hed.c\).)19
b(A)10 b(call)i(to)d FD(set)p 1513 2489 V 17 w(system)p 1674
2489 V 17 w(gate)23 b(\(0x80,)150 2554 y(&system)p 321 2554
V 16 w(call\))15 b FH(sets)g(in)o(terrupt)g(0x80)f(to)h(b)q(e)h(a)f(v)o
(ector)f(to)h(the)g FD(system)p 1431 2554 V 16 w(call\(\))g
FH(en)o(try)f(p)q(oin)o(t.)p eop
%%Page: 83 92
83 91 bop 150 -84 1800 3 v 150 -100 a FC(3.4.)42 b(Ho)o(w)17
b(to)h(Add)g(Y)l(our)g(Own)f(System)g(Calls)786 b FH(83)p 666
44 784 2 v 665 109 2 65 v 781 89 a(0)p 828 109 V 50 w(divide)p
975 89 14 2 v 18 w(error)p 1449 109 2 65 v 666 110 784 2 v
665 175 2 65 v 781 155 a(1)p 828 175 V 50 w(debug)p 1449 175
V 666 176 784 2 v 665 241 2 65 v 781 221 a(2)p 828 241 V 50
w(nmi)p 1449 241 V 666 242 784 2 v 665 307 2 65 v 781 288 a(3)p
828 307 V 50 w(in)o(t3)p 1449 307 V 666 308 784 2 v 665 373
2 65 v 781 354 a(4)p 828 373 V 50 w(o)o(v)o(er\015o)o(w)p 1449
373 V 666 374 784 2 v 665 439 2 65 v 781 420 a(5)p 828 439
V 50 w(b)q(ounds)p 1449 439 V 666 441 784 2 v 665 505 2 65
v 781 486 a(6)p 828 505 V 50 w(in)o(v)m(alid)p 986 486 14 2
v 19 w(op)p 1449 505 2 65 v 666 507 784 2 v 665 571 2 65 v
781 552 a(7)p 828 571 V 50 w(device)p 978 552 14 2 v 18 w(not)p
1062 552 V 16 w(a)o(v)m(ailable)p 1449 571 2 65 v 666 573 784
2 v 665 637 2 65 v 781 618 a(8)p 828 637 V 50 w(double)p 987
618 14 2 v 18 w(fault)p 1449 637 2 65 v 666 639 784 2 v 665
703 2 65 v 781 684 a(9)p 828 703 V 50 w(copro)q(cessor)p 1084
684 14 2 v 16 w(segmen)o(t)p 1261 684 V 16 w(o)o(v)o(errun)p
1449 703 2 65 v 666 705 784 2 v 665 769 2 65 v 759 750 a(10)p
828 769 V 49 w(in)o(v)m(alid)p 986 750 14 2 v 19 w(TSS)p 1449
769 2 65 v 666 771 784 2 v 665 835 2 65 v 759 816 a(11)p 828
835 V 49 w(segmen)o(t)p 1018 816 14 2 v 16 w(not)p 1100 816
V 16 w(presen)o(t)p 1449 835 2 65 v 666 837 784 2 v 665 901
2 65 v 759 882 a(12)p 828 901 V 49 w(stac)o(k)p 959 882 14
2 v 16 w(segmen)o(t)p 1449 901 2 65 v 666 903 784 2 v 665 967
2 65 v 759 948 a(13)p 828 967 V 49 w(general)p 998 948 14 2
v 17 w(protection)p 1449 967 2 65 v 666 969 784 2 v 665 1033
2 65 v 759 1014 a(14)p 828 1033 V 49 w(page)p 948 1014 14 2
v 16 w(fault)p 1449 1033 2 65 v 666 1035 784 2 v 665 1099 2
65 v 759 1080 a(15)p 828 1099 V 49 w(reserv)o(ed)p 1449 1099
V 666 1101 784 2 v 665 1165 2 65 v 759 1146 a(16)p 828 1165
V 49 w(copro)q(cessor)p 1084 1146 14 2 v 16 w(error)p 1449
1165 2 65 v 666 1167 784 2 v 665 1231 2 65 v 759 1212 a(17)p
828 1231 V 49 w(alignmen)o(t)p 1052 1212 14 2 v 17 w(c)o(hec)o(k)p
1449 1231 2 65 v 666 1233 784 2 v 665 1297 2 65 v 691 1278
a(18{48)p 828 1297 V 48 w(reserv)o(ed)p 1449 1297 V 666 1299
784 2 v 674 1376 a(Figure)16 b(3.3:)j(Initialization)f(of)c(in)o(terrupts)150
1514 y Fs(3.4)70 b(Ho)n(w)22 b(to)h(Add)h(Y)-6 b(our)24 b(Own)e(System)g
(Calls)206 1642 y FH(1.)g(Create)14 b(a)h(directory)h(under)f(the)h
(/usr/src/lin)o(ux/)f(directory)h(to)e(hold)i(y)o(our)f(co)q(de.)206
1743 y(2.)22 b(Put)15 b(an)o(y)g(include)i(\014les)f(in)g(/usr/include/sys/)h
(and)e(/usr/include/lin)o(ux/.)206 1845 y(3.)22 b(Add)f(the)g(relo)q(catable)
h(mo)q(dule)g(pro)q(duced)h(b)o(y)d(the)i(link)g(of)f(y)o(our)f(new)h(k)o
(ernel)h(co)q(de)g(to)e(the)264 1909 y FD(ARCHIVES)d FH(and)i(the)g(sub)q
(directory)g(to)g(the)f FD(SUBDIRS)g FH(lines)i(of)f(the)f(top)h(lev)o(el)h
(Mak)o(e\014le.)30 b(See)264 1974 y(fs/Mak)o(e\014le,)14 b(target)g(fs.o)h
(for)f(an)h(example.)206 2075 y(4.)22 b(Add)12 b(a)f FD(#define)p
588 2075 15 2 v 605 2075 V 57 w(NR)p 670 2075 V 17 w Fv(xx)h
FH(to)f(unistd.h)h(to)f(assign)h(a)f(call)i(n)o(um)o(b)q(er)f(for)e(y)o(our)i
(system)f(call,)i(where)264 2140 y Fv(xx)p FH(,)h(the)g(index,)h(is)g
(something)g(descriptiv)o(e)h(relating)e(to)g(y)o(our)g(system)g(call.)20
b(It)15 b(will)h(b)q(e)f(used)g(to)264 2204 y(set)g(up)g(the)h(v)o(ector)e
(through)h FD(sys)p 862 2204 V 17 w(call)p 975 2204 V 16 w(table)g
FH(to)f(in)o(v)o(ok)o(e)h(y)o(ou)g(co)q(de.)206 2306 y(5.)22
b(Add)c(an)g(en)o(try)g(p)q(oin)o(t)h(for)e(y)o(our)h(system)g(call)h(to)e
(the)i FD(sys)p 1310 2306 V 16 w(call)p 1422 2306 V 17 w(table)e
FH(in)i(sys.h.)29 b(It)18 b(should)264 2370 y(matc)o(h)9 b(the)i(index)g(\()p
Fv(xx)p FH(\))f(that)f(y)o(ou)h(assigned)h(in)g(the)g(previous)g(step.)18
b(The)11 b FD(NR)p 1580 2370 V 16 w(syscalls)f FH(v)m(ariable)264
2435 y(will)16 b(b)q(e)g(recalculated)h(automatically)l(.)p
eop
%%Page: 84 93
84 92 bop 150 -84 1800 3 v 150 -100 a FC(3.4.)42 b(Ho)o(w)17
b(to)h(Add)g(Y)l(our)g(Own)f(System)g(Calls)786 b FH(84)206
88 y(6.)22 b(Mo)q(dify)16 b(an)o(y)f(k)o(ernel)h(co)q(de)h(in)f(k)o
(ernel/fs/mm/,)f(etc.)g(to)g(tak)o(e)g(in)o(to)h(accoun)o(t)f(the)h(en)o
(vironmen)o(t)264 153 y(needed)g(to)f(supp)q(ort)g(y)o(our)g(new)g(co)q(de.)
206 254 y(7.)22 b(Run)15 b(mak)o(e)e(from)g(the)h(top)g(lev)o(el)h(to)f(pro)q
(duce)g(the)h(new)f(k)o(ernel)g(incorp)q(orating)h(y)o(our)f(new)g(co)q(de.)
150 392 y(A)o(t)20 b(this)h(p)q(oin)o(t,)h(y)o(ou)e(will)j(ha)o(v)o(e)d(to)g
(either)h(add)g(a)f(syscall)i(to)e(y)o(our)g(libraries,)j(or)d(use)h(the)g
(prop)q(er)p 150 456 15 2 v 164 456 a FD(syscall)p Fv(n)p FD(\(\))14
b FH(macro)g(in)h(y)o(our)g(user)f(program)g(for)g(y)o(our)g(programs)f(to)i
(access)f(the)h(new)g(system)f(call.)221 544 y(The)g FB(386D)o(X)h(Micr)n
(opr)n(o)n(c)n(essor)f(Pr)n(o)n(gr)n(ammer's)g(R)n(efer)n(enc)n(e)g(Manual)f
FH(is)h(a)g(helpful)i(reference,)e(as)f(is)150 609 y(James)h(T)l(urley's)h
FB(A)n(dvanc)n(e)n(d)f(80386)i(Pr)n(o)n(gr)n(amming)f(T)m(e)n(chniques.)k
FH(See)14 b(the)g(Annotated)g(bibliograph)o(y)150 673 y(in)i(App)q(endix)h
(A.)p eop
%%Page: 85 94
85 93 bop 150 438 a Fu(Chapter)34 b(4)150 686 y Fw(Lin)m(ux)40
b(Memory)g(Managemen)m(t)150 940 y FC([This)18 b(c)o(hapter)g(needs)f(to)g(b)
q(e)g(made)g(m)o(uc)o(h)f(friendlier.)26 b(I'd)18 b(hate)f(to)h(remo)o(v)o(e)
d(detail,)20 b(but)150 1004 y(it)15 b(needs)f(to)h(b)q(e)g(less)f(daun)o
(ting.)24 b(Man)o(y)14 b(ha)o(v)o(e)f(told)j(me)e(that)h(this)g(is)g(a)g
(daun)o(ting)g(c)o(hapter,)150 1069 y(and)h(it)g(need)f(not)g(b)q(e.)24
b(I'll)16 b(re-w)o(ork)g(it)g(later.)24 b(In)15 b(the)h(mean)o(time,)g
(please)f(b)q(ear)i(with)e(me.])150 1246 y Fs(4.1)70 b(Ov)n(erview)150
1379 y FH(The)22 b(Lin)o(ux)i(memory)d(manager)h(implemen)o(ts)h(demand)g
(paging)f(with)h(a)f(cop)o(y-on-write)g(strategy)150 1443 y(relying)f(on)f
(the)h(386's)d(paging)j(supp)q(ort.)35 b(A)20 b(pro)q(cess)g(acquires)h(its)f
(page)g(tables)h(from)e(its)h(paren)o(t)150 1508 y(\(during)d(a)g
FD(fork\(\))p FH(\))e(with)j(the)e(en)o(tries)i(mark)o(ed)e(as)g(read-only)i
(or)e(sw)o(app)q(ed.)25 b(Then,)18 b(if)f(the)g(pro)q(cess)150
1572 y(tries)d(to)g(write)g(to)g(that)f(memory)h(space,)g(and)h(the)f(page)g
(is)h(a)f(cop)o(y-on-write)g(page,)g(it)h(is)g(copied,)g(and)150
1636 y(the)f(page)f(is)h(mark)o(ed)f(read-write.)20 b(An)14
b FD(exec\(\))e FH(results)i(in)h(the)e(reading)i(in)f(of)f(a)g(page)h(or)f
(so)g(from)g(the)150 1701 y(executable.)21 b(The)16 b(pro)q(cess)f(then)h
(faults)f(in)h(an)o(y)f(other)g(pages)g(it)g(needs.)221 1788
y(Eac)o(h)10 b(pro)q(cess)i(has)f(a)f(page)h(directory)g(whic)o(h)h(means)f
(it)g(can)h(access)f(1)f(KB)i(of)f(page)f(tables)i(p)q(oin)o(ting)150
1853 y(to)k(1)g(MB)g(of)g(4)g(KB)h(pages)f(whic)o(h)h(is)g(4)f(GB)g(of)g
(memory)l(.)23 b(A)17 b(pro)q(cess')f(page)g(directory)h(is)g(initialized)150
1917 y(during)i(a)e(fork)g(b)o(y)h FD(copy)p 598 1917 15 2
v 17 w(page)p 711 1917 V 16 w(tables\(\))p FH(.)27 b(The)18
b(idle)h(pro)q(cess)f(has)g(its)g(page)g(directory)g(initialized)150
1982 y(during)e(the)f(initialization)k(sequence.)221 2069 y(Eac)o(h)d(user)h
(pro)q(cess)g(has)g(a)f(lo)q(cal)i(descriptor)f(table)g(that)g(con)o(tains)f
(a)h(co)q(de)g(segmen)o(t)g(and)f(data-)150 2134 y(stac)o(k)h(segmen)o(t.)27
b(These)18 b(user)g(segmen)o(ts)f(extend)h(from)f(0)h(to)f(3)g(GB)h
(\(0xc0000000\).)24 b(In)19 b(user)f(space)150 2198 y(linear)e(addresses)461
2182 y Fm(1)496 2198 y FH(and)g(logical)g(addresses)911 2182
y Fm(2)946 2198 y FH(are)f(iden)o(tical.)221 2286 y(The)c(k)o(ernel)h(co)q
(de)g(and)g(data)f(segmen)o(ts)g(are)g(priv)o(eleged)i(segmen)o(ts)e
(de\014ned)i(in)f(the)f(global)i(descrip-)p 150 2326 720 2
v 202 2352 a Fz(1)219 2368 y Fl(In)k(the)g(80386,)h(linear)g(address)g(run)f
(from)f(0GB)h(to)g(4GB.)g(A)f(linear)i(address)g(p)q(oin)o(ts)g(to)f(a)g
(particular)h(memory)150 2420 y(lo)q(cation)d(within)g(this)e(space.)18
b(A)13 b(linear)h(address)g(is)g Fh(not)f Fl(a)g(ph)o(ysical)i(address)f(|)f
(it)h(is)f(a)g(virtual)i(address.)202 2452 y Fz(2)219 2468
y Fl(A)g(logical)i(address)f(consists)h(of)e(a)g(selector)h(and)g(an)f
(o\013set.)24 b(The)15 b(selector)h(p)q(oin)o(ts)h(to)e(a)g(segmen)o(t)g(and)
h(the)f(o\013set)150 2520 y(tells)f(ho)o(w)f(far)g(in)o(to)h(that)f(segmen)o
(t)h(the)f(address)h(is)f(lo)q(cated.)1027 2678 y FH(85)p eop
%%Page: 86 95
86 94 bop 150 -84 1800 3 v 150 -100 a FC(4.1.)42 b(Ov)o(erview)1418
b FH(86)150 88 y(tor)15 b(table)g(and)h(extend)g(from)f(3)g(GB)g(to)g(4)g
(GB.)g(The)h(sw)o(app)q(er)f(page)g(directory)h(\()p FD(swapper)p
1753 88 15 2 v 16 w(page)p 1865 88 V 16 w(dir)150 153 y FH(is)g(set)f(up)g
(so)g(that)g(logical)h(addresses)f(and)h(ph)o(ysical)g(addresses)g(are)f
(iden)o(tical)i(in)f(k)o(ernel)g(space.)221 241 y(The)h(space)g(ab)q(o)o(v)o
(e)f(3)h(GB)f(app)q(ears)h(in)h(a)e(pro)q(cess')h(page)g(directory)g(as)f(p)q
(oin)o(ters)h(to)g(k)o(ernel)g(page)150 305 y(tables.)i(This)13
b(space)f(is)g(in)o(visible)j(to)c(the)h(pro)q(cess)g(in)h(user)f(mo)q(de)g
(but)g(the)g(mapping)h(b)q(ecomes)f(relev)m(an)o(t)150 369
y(when)k(privileged)h(mo)q(de)f(is)f(en)o(tered,)g(for)g(example,)h(to)e
(handle)j(a)e(system)f(call.)221 457 y(Sup)q(ervisor)j(mo)q(de)f(is)h(en)o
(tered)f(within)i(the)e(con)o(text)g(of)g(the)g(curren)o(t)g(pro)q(cess)g(so)
g(address)g(trans-)150 522 y(lation)f(o)q(ccurs)f(with)h(resp)q(ect)f(to)g
(the)g(pro)q(cess')g(page)g(directory)g(but)g(using)h(k)o(ernel)g(segmen)o
(ts.)k(This)14 b(is)150 586 y(iden)o(tically)g(the)e(mapping)g(pro)q(duced)h
(b)o(y)e(using)i(the)e FD(swapper)p 1239 586 V 16 w(pg)p 1303
586 V 17 w(dir)g FH(and)h(k)o(ernel)h(segmen)o(ts)e(as)g(b)q(oth)150
650 y(page)i(directories)i(use)f(the)f(same)h(page)f(tables)h(in)g(this)g
(space.)20 b(Only)14 b FD(task[0])f FH(\(the)g(idle)i(task)1802
634 y Fm(3)1835 650 y FC([This)150 715 y(should)j(b)q(e)g(do)q(cumen)o(ted)f
(earlier)j(in)e(this)g(guide)p FA(:)8 b(:)g(:)f FC(])p FH(\))15
b(uses)g(the)h FD(swapper)p 1585 715 V 16 w(pg)p 1649 715 V
17 w(dir)e FH(directly)l(.)218 835 y FG(\017)23 b FH(The)15
b(user)g(pro)q(cess')g FD(segment)p 795 835 V 17 w(base)f FH(=)i(0x00,)e
FD(page)p 1189 835 V 16 w(dir)h FH(priv)m(ate)h(to)f(the)g(pro)q(cess.)218
935 y FG(\017)23 b FH(user)15 b(pro)q(cess)h(mak)o(es)f(a)g(system)h(call:)21
b FD(segment)p 1118 935 V 17 w(base)p FH(=0xc0000000)13 b FD(page)p
1603 935 V 17 w(dir)i FH(=)h(same)f(user)264 999 y FD(page)p
363 999 V 16 w(dir)p FH(.)218 1099 y FG(\017)23 b FD(swapper)p
435 1099 V 16 w(pg)p 499 1099 V 17 w(dir)9 b FH(con)o(tains)i(a)f(mapping)g
(for)g(all)h(ph)o(ysical)g(pages)f(from)g(0xc0000000)e(to)h(0xc0000000)264
1163 y(+)14 b FD(end)p 388 1163 V 17 w(mem)p FH(,)f(so)h(the)g(\014rst)g(768)
f(en)o(tries)h(in)h FD(swapper)p 1174 1163 V 17 w(pg)p 1239
1163 V 17 w(dir)e FH(are)h(0's,)f(and)h(then)h(there)f(are)g(4)f(or)264
1227 y(more)h(that)h(p)q(oin)o(t)h(to)e(k)o(ernel)i(page)f(tables.)218
1327 y FG(\017)23 b FH(The)15 b(user)g(page)g(directories)i(ha)o(v)o(e)d(the)
i(same)f(en)o(tries)g(as)g(tt)f(sw)o(app)q(er)p 1493 1327 14
2 v 17 w(pg)p 1558 1327 V 16 w(dir)i(ab)q(o)o(v)o(e)f(768.)k(The)264
1391 y(\014rst)14 b(768)h(en)o(tries)g(map)g(the)h(user)f(space.)150
1512 y(The)k(upshot)g(is)g(that)g(whenev)o(er)g(the)g(linear)h(address)f(is)g
(ab)q(o)o(v)o(e)g(0xc0000000)d(ev)o(erything)k(uses)f(the)150
1576 y(same)c(k)o(ernel)h(page)f(tables.)221 1664 y(The)j(user)h(stac)o(k)e
(sits)h(at)g(the)g(top)g(of)g(the)g(user)h(data)f(segmen)o(t)f(and)i(gro)o
(ws)e(do)o(wn.)29 b(The)18 b(k)o(ernel)150 1728 y(stac)o(k)11
b(is)i(not)e(a)h(prett)o(y)f(data)h(structure)g(or)f(segmen)o(t)h(that)f(I)h
(can)g(p)q(oin)o(t)h(to)e(with)i(a)e(\\y)o(on)h(lies)h(the)f(k)o(ernel)150
1793 y(stac)o(k.")19 b(A)14 b FD(kernel)p 502 1793 15 2 v 17
w(stack)p 639 1793 V 16 w(frame)g FH(\(a)g(page\))h(is)g(asso)q(ciated)g
(with)g(eac)o(h)g(newly)g(created)g(pro)q(cess)g(and)150 1857
y(is)h(used)g(whenev)o(er)f(the)h(k)o(ernel)g(op)q(erates)f(within)h(the)f
(con)o(text)g(of)g(that)f(pro)q(cess.)21 b(Bad)15 b(things)h(w)o(ould)150
1921 y(happ)q(en)21 b(if)f(the)g(k)o(ernel)g(stac)o(k)f(w)o(ere)g(to)g(gro)o
(w)g(b)q(elo)o(w)h(its)g(curren)o(t)f(stac)o(k)g(frame.)32
b FC([Where)24 b(is)f(the)150 1986 y(k)o(ernel)e(stac)o(k)f(put?)33
b(I)21 b(kno)o(w)e(that)j(there)f(is)g(one)g(for)g(ev)o(ery)f(pro)q(cess,)i
(but)g(where)e(is)h(it)150 2050 y(stored)d(when)f(it's)i(not)f(b)q(eing)g
(used?])221 2138 y FH(User)c(pages)f(can)i(b)q(e)f(stolen)h(or)e(sw)o(app)q
(ed.)20 b(A)14 b(user)g(page)g(is)h(one)f(that)f(is)i(mapp)q(ed)g(b)q(elo)o
(w)g(3)e(GB)h(in)150 2202 y(a)h(user)g(page)g(table.)20 b(This)c(region)f(do)
q(es)h(not)f(con)o(tain)g(page)g(directories)h(or)e(page)h(tables.)21
b(Only)16 b(dirt)o(y)150 2266 y(pages)f(are)g(sw)o(app)q(ed.)221
2354 y(Minor)h(alterations)g(are)g(needed)h(in)g(some)f(places)h(\(tests)e
(for)g(pro)q(cess)i(memory)e(limits)j(comes)e(to)150 2419 y(mind\))g(to)e
(pro)o(vide)i(supp)q(ort)f(for)g(programmer)f(de\014ned)j(segmen)o(ts.)p
150 2459 720 2 v 202 2486 a Fz(3)219 2502 y Fl(Sometimes)j(called)f(the)g(sw)
o(app)q(er)g(task,)g(ev)o(en)g(though)g(it)g(has)f(nothing)i(to)e(do)h(with)f
(sw)o(apping)i(in)f(the)f Fd(Linux)150 2554 y Fl(implemen)o(tation,)e(for)d
(historical)i(reasons)p eop
%%Page: 87 96
87 95 bop 150 -84 1800 3 v 150 -100 a FC(4.2.)42 b(Ph)o(ysical)18
b(memory)1239 b FH(87)150 88 y Fs(4.2)70 b(Ph)n(ysical)21 b(memory)150
221 y FH(Here)16 b(is)g(a)g(map)f(of)g(ph)o(ysical)i(memory)e(b)q(efore)h(an)
o(y)g(user)g(pro)q(cesses)g(are)f(executed.)22 b(The)16 b(column)h(on)150
286 y(the)h(left)h(giv)o(es)f(the)g FC(starting)i FH(address)e(of)g(the)g
(item,)h(n)o(um)o(b)q(ers)f(in)h FB(italics)f FH(are)g(appro)o(ximate.)28
b(The)150 350 y(column)19 b(in)g(the)f(middle)i(names)e(the)g(item\(s\).)28
b(The)18 b(column)h(on)f(the)h(far)e(righ)o(t)h(giv)o(es)g(the)g(relev)m(an)o
(t)150 414 y(routine)e(or)e(v)m(ariable)j(name)e(or)g(explains)i(the)e(en)o
(try)l(.)p 150 452 1769 2 v 149 517 2 65 v 186 498 a FB(0x110000)p
393 517 V 251 w FH(FREE)p 968 517 V 250 w FD(memory)p 1141
498 15 2 v 16 w(end)g FH(or)g FD(high)p 1396 498 V 16 w(memory)p
1918 517 2 65 v 150 518 1769 2 v 149 583 2 65 v 393 583 V 601
564 a(mem)p 676 564 15 2 v 17 w(map)p 968 583 2 65 v 232 w(mem)p
1069 564 15 2 v 17 w(init\(\))p 1918 583 2 65 v 150 584 1769
2 v 149 649 2 65 v 393 649 V 554 630 a(inode)p 677 630 15 2
v 16 w(table)p 968 649 2 65 v 184 w(inode)p 1117 630 15 2 v
16 w(init\(\))p 1918 649 2 65 v 150 651 1769 2 v 149 715 2
65 v 393 715 V 569 696 a FH(device)h(data)p 968 715 V 199 w
FD(device)p 1141 696 15 2 v 16 w(init\(\))p FG(y)p 1918 715
2 65 v 150 717 1769 2 v 149 781 2 65 v 186 762 a FH(0x100000)p
393 781 V 153 w(more)e FD(pg)p 688 762 15 2 v 17 w(table)p
FH(s)p 968 781 2 65 v 154 w FD(paging)p 1141 762 15 2 v 16
w(init\(\))p 1918 781 2 65 v 150 783 1769 2 v 149 847 2 65
v 175 828 a FH(0x0A0000)p 393 847 V 186 w(RESER)-5 b(VED)p
968 847 V 1918 847 V 150 849 1769 2 v 149 913 2 65 v 186 894
a FB(0x060000)p 393 913 V 251 w FH(FREE)p 968 913 V 1918 913
V 150 915 1769 2 v 149 979 2 65 v 393 979 V 497 960 a FD(low)p
572 960 15 2 v 17 w(memory)p 733 960 V 17 w(start)p 968 979
2 65 v 1918 979 V 150 981 1769 2 v 149 1045 2 65 v 186 1026
a FH(0x006000)p 393 1045 V 122 w(k)o(ernel)16 b(co)q(de)g(+)f(data)p
968 1045 V 1918 1045 V 150 1047 1769 2 v 149 1111 2 65 v 393
1111 V 462 1092 a FD(floppy)p 609 1092 15 2 v 16 w(track)p
745 1092 V 17 w(buffer)p 968 1111 2 65 v 1918 1111 V 150 1113
1769 2 v 149 1241 2 129 v 393 1241 V 545 1158 a(bad)p 620 1158
15 2 v 17 w(pg)p 685 1158 V 17 w(table)590 1222 y(bad)p 665
1222 V 16 w(page)p 968 1241 2 129 v 994 1158 a FH(used)30 b(b)o(y)f
FD(page)p 1288 1158 15 2 v 17 w(fault)p 1425 1158 V 16 w(handler)p
FH(s)f(to)h(kill)i(pro-)994 1222 y(cesses)16 b(gracefully)g(when)f(out)g(of)g
(memory)l(.)p 1918 1241 2 129 v 150 1243 1769 2 v 149 1307
2 65 v 186 1288 a(0x002000)p 393 1307 V 275 w FD(pg0)p 968
1307 V 276 w FH(the)g(\014rst)g(k)o(ernel)h(page)f(table.)p
1918 1307 V 150 1309 1769 2 v 149 1373 2 65 v 186 1354 a(0x001000)p
393 1373 V 150 w FD(swapper)p 692 1354 15 2 v 17 w(pg)p 757
1354 V 16 w(dir)p 968 1373 2 65 v 152 w FH(the)g(k)o(ernel)h(page)f
(directory)l(.)p 1918 1373 V 150 1375 1769 2 v 149 1439 2 65
v 186 1420 a(0x000000)p 393 1439 V 220 w(n)o(ull)i(page)p 968
1439 V 1918 1439 V 150 1441 1769 2 v 150 1479 a FG(y)p FH(device-inits)25
b(that)d(acquire)h(memory)f(are\(main.c\):)33 b FD(profil)p
1291 1479 15 2 v 17 w(buffer)p FH(,)22 b FD(con)p 1559 1479
V 17 w(init)p FH(,)h FD(psaux)p 1828 1479 V 17 w(init)p FH(,)150
1544 y FD(rd)p 201 1544 V 17 w(init)p FH(,)h FD(scsi)p 447
1544 V 16 w(dev)p 535 1544 V 17 w(init)p FH(.)43 b(Note)22
b(that)g(all)i(memory)f(not)f(mark)o(ed)g(as)h(FREE)g(is)g(RESER)-5
b(VED)150 1620 y(\()p FD(mem)p 243 1620 V 16 w(init)p FH(\).)19
b(RESER)-5 b(VED)16 b(pages)f(b)q(elong)h(to)f(the)g(k)o(ernel)h(and)g(are)f
FC(nev)o(er)f FH(freed)i(or)f(sw)o(app)q(ed.)150 1862 y Fs(4.3)70
b(A)22 b(user)h(pro)r(cess')h(view)d(of)i(memory)p 150 1948
982 2 v 149 2012 2 65 v 177 1993 a FH(0xc0000000)p 428 2012
V 74 w(The)16 b(in)o(visible)i(k)o(ernel)p 919 2012 V 76 w(reserv)o(ed)p
1131 2012 V 150 2014 982 2 v 149 2078 2 65 v 428 2078 V 558
2059 a(initial)f(stac)o(k)p 919 2078 V 1131 2078 V 150 2080
982 2 v 149 2144 2 65 v 428 2144 V 453 2125 a(ro)q(om)e(for)f(stac)o(k)h(gro)
o(wth)p 919 2144 V 48 w(4)g(pages)p 1131 2144 V 150 2146 982
2 v 149 2210 2 65 v 175 2191 a(0x60000000)p 428 2210 V 116
w(shared)g(libraries)p 919 2210 V 1131 2210 V 150 2212 982
2 v 149 2276 2 65 v 332 2257 a FD(brk)p 428 2276 V 201 w FH(un)o(used)p
919 2276 V 1131 2276 V 150 2278 982 2 v 149 2342 2 65 v 428
2342 V 521 2323 a(mallo)q(c)h(memory)p 919 2342 V 1131 2342
V 150 2344 982 2 v 149 2408 2 65 v 219 2389 a FD(end)p 294
2389 15 2 v 17 w(data)p 428 2408 2 65 v 96 w FH(uninitialized)j(data)p
919 2408 V 1131 2408 V 150 2410 982 2 v 149 2474 2 65 v 219
2455 a FD(end)p 294 2455 15 2 v 17 w(code)p 428 2474 2 65 v
121 w FH(initialized)g(data)p 919 2474 V 1131 2474 V 150 2476
982 2 v 149 2540 2 65 v 175 2521 a(0x00000000)p 428 2540 V
228 w(text)p 919 2540 V 1131 2540 V 150 2542 982 2 v eop
%%Page: 88 97
88 96 bop 150 -84 1800 3 v 150 -100 a FC(4.4.)42 b(Memory)17
b(Managemen)o(t)g(data)i(in)f(the)g(pro)q(cess)g(table)545
b FH(88)221 88 y(Both)15 b(the)i(co)q(de)f(segmen)o(t)g(and)g(data)f(segmen)o
(t)h(extend)h(all)g(the)f(w)o(a)o(y)f(from)g(0x00)g(to)h(3)f(GB.)h(Cur-)150
153 y(ren)o(tly)f(the)h(page)f(fault)g(handler)h FD(do)p 788
153 15 2 v 17 w(wp)p 853 153 V 17 w(page)f FH(c)o(hec)o(ks)g(to)g(ensure)g
(that)g(a)g(pro)q(cess)g(do)q(es)h(not)e(write)i(to)150 217
y(its)g(co)q(de)g(space.)22 b(Ho)o(w)o(ev)o(er,)14 b(b)o(y)i(catc)o(hing)g
(the)g FD(SEGV)f FH(signal,)h(it)g(is)g(p)q(ossible)i(to)d(write)h(to)f(co)q
(de)h(space,)150 281 y(causing)g(a)e(cop)o(y-on-write)h(to)g(o)q(ccur.)20
b(The)15 b(handler)h FD(do)p 1138 281 V 17 w(no)p 1203 281
V 17 w(page)e FH(ensures)h(that)g(an)o(y)f(new)h(pages)g(the)150
346 y(pro)q(cess)j(acquires)g(b)q(elong)g(to)f(either)h(the)g(executable,)g
(a)g(shared)f(library)l(,)i(the)e(stac)o(k,)g(or)g(lie)i(within)150
410 y(the)c FD(brk)g FH(v)m(alue.)221 498 y(A)h(user)h(pro)q(cess)g(can)g
(reset)g(its)f FD(brk)h FH(v)m(alue)h(b)o(y)e(calling)j FD(sbrk\(\))p
FH(.)k(This)18 b(is)f(what)f FD(malloc\(\))g FH(do)q(es)150
562 y(when)i(it)g(needs)h(to.)26 b(The)18 b(text)f(and)h(data)f(p)q(ortions)h
(are)f(allo)q(cated)i(on)e(separate)h(pages)f(unless)i(one)150
627 y(c)o(ho)q(oses)14 b(the)h FD(-N)f FH(compiler)h(option.)20
b(Shared)15 b(library)g(load)g(addresses)f(are)g(curren)o(tly)h(tak)o(en)f
(from)g(the)150 691 y(shared)h(image)h(itself.)k(The)c(address)f(is)h(b)q(et)
o(w)o(een)f(1.5)g(GB)g(and)g(3)g(GB,)f(except)i(in)g(sp)q(ecial)h(cases.)150
779 y FC(User)h(pro)q(cess)g(Memory)f(Allo)q(cation)p 150 794
986 2 v 149 858 2 65 v 647 858 V 673 839 a FH(sw)o(appable)p
900 858 V 50 w(shareable)p 1135 858 V 150 860 986 2 v 149 924
2 65 v 175 905 a(a)e(few)g(co)q(de)h(pages)p 647 924 V 248
w(Y)p 900 924 V 210 w(Y)p 1135 924 V 150 926 986 2 v 149 990
2 65 v 175 971 a(a)f(few)g(data)f(pages)p 647 990 V 250 w(Y)p
900 990 V 200 w(N?)p 1135 990 V 150 992 986 2 v 149 1056 2
65 v 175 1037 a(stac)o(k)p 647 1056 V 480 w(Y)p 900 1056 V
210 w(N)p 1135 1056 V 150 1058 986 2 v 149 1122 2 65 v 175
1103 a FD(pg)p 226 1103 15 2 v 17 w(dir)p 647 1122 2 65 v 445
w FH(N)p 900 1122 V 210 w(N)p 1135 1122 V 150 1124 986 2 v
149 1188 2 65 v 175 1169 a(co)q(de/data)h FD(page)p 490 1169
15 2 v 16 w(table)p 647 1188 2 65 v 134 w FH(N)p 900 1188 V
210 w(N)p 1135 1188 V 150 1190 986 2 v 149 1254 2 65 v 175
1235 a(stac)o(k)f FD(page)p 390 1235 15 2 v 17 w(table)p 647
1254 2 65 v 233 w FH(N)p 900 1254 V 210 w(N)p 1135 1254 V 150
1256 986 2 v 149 1320 2 65 v 175 1301 a FD(task)p 274 1301
15 2 v 17 w(struct)p 647 1320 2 65 v 325 w FH(N)p 900 1320
V 210 w(N)p 1135 1320 V 150 1322 986 2 v 149 1386 2 65 v 175
1367 a FD(kernel)p 322 1367 15 2 v 16 w(stack)p 458 1367 V
17 w(frame)p 647 1386 2 65 v 165 w FH(N)p 900 1386 V 210 w(N)p
1135 1386 V 150 1388 986 2 v 149 1452 2 65 v 175 1433 a(shlib)j
FD(page)p 383 1433 15 2 v 16 w(table)p 647 1452 2 65 v 241
w FH(N)p 900 1452 V 210 w(N)p 1135 1452 V 150 1454 986 2 v
149 1518 2 65 v 175 1499 a(a)e(few)g(shlib)i(pages)p 647 1518
V 244 w(Y)p 900 1518 V 200 w(Y?)p 1135 1518 V 150 1520 986
2 v 221 1606 a FC([What)25 b(do)g(the)f(question)h(marks)f(mean?)44
b(Do)24 b(they)g(mean)h(that)g(they)f(migh)o(t)h(go)150 1671
y(either)18 b(w)o(a)o(y)l(,)e(or)h(that)h(y)o(ou)e(are)i(not)f(sure?])j
FH(The)15 b(stac)o(k,)f(shlibs)i(and)e(data)g(are)h(to)q(o)f(far)f(remo)o(v)o
(ed)150 1735 y(from)h(eac)o(h)g(other)g(to)g(b)q(e)h(spanned)g(b)o(y)g(one)f
(page)h(table.)20 b(All)15 b(k)o(ernel)h FD(page)p 1456 1735
15 2 v 16 w(table)p FH(s)e(are)g(shared)h(b)o(y)f(all)150 1800
y(pro)q(cesses)h(so)f(they)h(are)g(not)f(in)h(the)g(list.)21
b(Only)16 b(dirt)o(y)e(pages)h(are)f(sw)o(app)q(ed.)20 b(Clean)c(pages)e(are)
h(stolen)150 1864 y(so)d(the)h(pro)q(cess)f(can)h(read)g(them)f(bac)o(k)g(in)
i(from)d(the)i(executable)h(if)f(it)g(lik)o(es.)20 b(Mostly)12
b(only)h(clean)g(pages)150 1928 y(are)j(shared.)23 b(A)16 b(dirt)o(y)g(page)h
(ends)f(up)h(shared)f(across)g(a)g(fork)f(un)o(til)j(the)e(paren)o(t)g(or)g
(c)o(hild)h(c)o(ho)q(oses)g(to)150 1993 y(write)e(to)g(it)g(again.)150
2170 y Fs(4.4)70 b(Memory)23 b(Managemen)n(t)f(data)i(in)e(the)h(pro)r(cess)g
(table)150 2303 y FH(Here)15 b(is)h(a)f(summary)f(of)h(some)f(of)h(the)g
(data)f(k)o(ept)h(in)h(the)f(pro)q(cess)h(table)f(whic)o(h)h(is)f(used)h(for)
f(memory)150 2367 y(managmen)o(t:)k FC([These)e(should)g(b)q(e)h(m)o(uc)o(h)e
(b)q(etter)i(do)q(cumen)o(ted.)24 b(W)l(e)17 b(need)f(more)i(details.])218
2505 y FG(\017)23 b FH(Pro)q(cess)10 b(memory)f(limits:)19
b FD(ulong)k(start)p 1001 2505 V 17 w(code,)g(end)p 1233 2505
V 17 w(code,)g(end)p 1465 2505 V 17 w(data,)g(brk,)g(start)p
1864 2505 V 17 w(stack;)p eop
%%Page: 89 98
89 97 bop 150 -84 1800 3 v 150 -100 a FC(4.5.)42 b(Memory)17
b(initializa)q(ti)q(on)1140 b FH(89)218 88 y FG(\017)23 b FH(P)o(age)14
b(fault)h(coun)o(ting:)21 b FD(ulong)i(min)p 903 88 15 2 v
17 w(flt,)g(maj)p 1111 88 V 17 w(flt,)g(cmin)p 1343 88 V 17
w(flt,)g(cmaj)p 1575 88 V 17 w(flt)218 190 y FG(\017)g FH(Lo)q(cal)13
b(descriptor)g(table:)19 b FD(struct)k(desc)p 990 190 V 17
w(struct)g(ldt[32])12 b FH(is)h(the)g(lo)q(cal)g(descriptor)g(table)h(for)264
254 y(task.)218 356 y FG(\017)23 b FD(rss)p FH(:)c(n)o(um)o(b)q(er)d(of)e
(residen)o(t)i(pages.)218 458 y FG(\017)23 b FD(swappable)p
FH(:)18 b(if)e(0,)e(then)i(pro)q(cess's)f(pages)g(will)i(not)e(b)q(e)g(sw)o
(app)q(ed.)218 560 y FG(\017)23 b FD(kernel)p 411 560 V 16
w(stack)p 547 560 V 16 w(page)p FH(:)d(p)q(oin)o(ter)15 b(to)g(page)g(allo)q
(cated)h(in)g(fork.)218 661 y FG(\017)23 b FD(saved)p 387 661
V 16 w(kernel)p 547 661 V 16 w(stack)p FH(:)d(V86)14 b(mo)q(de)i(stu\013.)218
763 y FG(\017)23 b FD(struct)g(tss)315 865 y FC({)g FH(Stac)o(k)14
b(segmen)o(ts)364 946 y FD(esp0)22 b FH(k)o(ernel)16 b(stac)o(k)e(p)q(oin)o
(ter)i(\()p FD(kernel)p 1054 946 V 16 w(stack)p 1190 946 V
16 w(page)p FH(\))364 1018 y FD(ss0)22 b FH(k)o(ernel)16 b(stac)o(k)e(segmen)
o(t)h(\(0x10\))364 1091 y FD(esp1)22 b FH(=)15 b FD(ss1)g FH(=)h
FD(esp2)e FH(=)i FD(ss2)e FH(=)i(0)449 1155 y(un)o(used)g(priv)o(elege)g(lev)
o(els.)315 1236 y FC({)23 b FH(Segmen)o(t)15 b(selectors:)20
b FD(ds)j FH(=)i FD(es)e FH(=)h FD(fs)g FH(=)g FD(gs)g FH(=)g
FD(ss)g FH(=)g FD(0x17)p FH(,)14 b FD(cs)24 b FH(=)g FD(0x0f)364
1301 y FH(All)16 b(p)q(oin)o(t)g(to)e(segmen)o(ts)h(in)h(the)f(curren)o(t)g
FD(ldt[])p FH(.)315 1382 y FC({)23 b FD(cr3)p FH(:)c(p)q(oin)o(ts)d(to)e(the)
i(page)f(directory)g(for)g(this)g(pro)q(cess.)315 1463 y FC({)23
b FD(ldt)p FH(:)p 471 1463 V 36 w FD(LDT\(n\))15 b FH(selector)g(for)g
(curren)o(t)g(task's)f(LDT.)150 1640 y Fs(4.5)70 b(Memory)23
b(initial)o(i)o(zati)o(on)150 1773 y FH(In)16 b FD(start)p
330 1773 V 16 w(kernel\(\))e FH(\(main.c\))h(there)g(are)g(3)g(v)m(ariables)i
(related)e(to)g(memory)g(initialization:)245 1857 y FD(memory)p
392 1857 V 17 w(start)138 b FH(starts)14 b(out)g(at)h(1)g(MB.)g(Up)q(dated)g
(b)o(y)h(device)g(initialization.)245 1921 y FD(memory)p 392
1921 V 17 w(end)186 b FH(end)16 b(of)e(ph)o(ysical)j(memory:)i(8)c(MB,)g(16)f
(MB,)h(or)g(whatev)o(er.)245 1985 y FD(low)p 320 1985 V 17
w(memory)p 481 1985 V 17 w(start)49 b FH(end)16 b(of)e(the)i(k)o(ernel)g(co)q
(de)f(and)h(data)e(that)h(is)h(loaded)f(initially)l(.)221 2064
y(Eac)o(h)10 b(device)h(init)h(t)o(ypically)g(tak)o(es)d FD(memory)p
979 2064 V 17 w(start)g FH(and)i(returns)f(an)g(up)q(dated)h(v)m(alue)h(if)f
(it)f(allo)q(cates)150 2128 y(space)16 b(at)g FD(memory)p 476
2128 V 16 w(start)f FH(\(b)o(y)h(simply)h(grabbing)f(it\).)22
b FD(paging)p 1272 2128 V 17 w(init\(\))15 b FH(initializes)k(the)d(page)g
(tables)150 2193 y(in)i(the)f FD(swapper)p 456 2193 V 16 w(pg)p
520 2193 V 17 w(dir)f FH(\(starting)g(at)h(0xc0000000\))d(to)i(co)o(v)o(er)h
(all)h(of)e(the)h(ph)o(ysical)h(memory)f(from)150 2257 y FD(memory)p
297 2257 V 16 w(start)j FH(to)f FD(memory)p 657 2257 V 16 w(end)p
FH(.)34 b(Actually)22 b(the)e(\014rst)f(4)h(MB)g(is)g(done)h(in)g
FD(startup)p 1690 2257 V 16 w(32)f FH(\(head.S\).)150 2321
y FD(memory)p 297 2321 V 16 w(start)c FH(is)i(incremen)o(ted)g(if)f(an)o(y)f
(new)h FD(page)p 1076 2321 V 17 w(table)p FH(s)f(are)g(added.)25
b(The)17 b(\014rst)g(page)f(is)h(zero)q(ed)150 2386 y(to)e(trap)f(n)o(ull)j
(p)q(oin)o(ter)f(references)f(in)h(the)g(k)o(ernel.)221 2474
y(In)21 b FD(sched)p 406 2474 V 16 w(init\(\))f FH(the)g FD(ldt)g
FH(and)h FD(tss)f FH(descriptors)g(for)g FD(task[0])g FH(are)g(set)g(in)h
(the)g(GDT,)e(and)150 2538 y(loaded)f(in)o(to)f(the)g(TR)h(and)f(LDTR)h
(\(the)f(only)g(time)h(it's)f(done)g(explicitly\).)29 b(A)17
b(trap)f(gate)h(\(0x80\))e(is)p eop
%%Page: 90 99
90 98 bop 150 -84 1800 3 v 150 -100 a FC(4.5.)42 b(Memory)17
b(initializa)q(ti)q(on)1140 b FH(90)150 88 y(set)18 b(up)h(for)f
FD(system)p 513 88 15 2 v 17 w(call\(\))p FH(.)29 b(The)19
b(nested)g(task)f(\015ag)g(is)h(turned)g(o\013)g(in)g(preparation)g(for)f(en)
o(tering)150 153 y(user)f(mo)q(de.)23 b(The)17 b(timer)g(is)f(turned)h(on.)24
b(The)16 b FD(task)p 1081 153 V 17 w(struct)g FH(for)f FD(task[0])h
FH(app)q(ears)g(in)h(its)g(en)o(tiret)o(y)150 217 y(in)f FD(<linux/sched.h>)p
FH(.)221 305 y FD(mem)p 296 305 V 16 w(map)11 b FH(is)h(then)g(constructed)f
(b)o(y)g FD(mem)p 909 305 V 17 w(init\(\))f FH(to)h(re\015ect)h(the)f(curren)
o(t)g(usage)g(of)g(ph)o(ysical)i(pages.)150 369 y(This)j(is)f(the)h(state)e
(re\015ected)i(in)g(the)f(ph)o(ysical)i(memory)e(map)g(of)f(the)i(previous)g
(section.)221 457 y(Then)k FE(Linux)g FH(mo)o(v)o(es)f(in)o(to)h(user)g(mo)q
(de)h(with)f(an)g FD(iret)g FH(after)f(pushing)j(the)e(curren)o(t)g
FD(ss)p FH(,)h FD(esp)p FH(,)150 522 y(etc.)f(Of)14 b(course)g(the)g(user)g
(segmen)o(ts)f(for)h FD(task[0])f FH(are)g(mapp)q(ed)i(righ)o(t)f(o)o(v)o(er)
f(the)h(k)o(ernel)h(segmen)o(ts)e(so)150 586 y(execution)j(con)o(tin)o(ues)g
(exactly)g(where)f(it)g(left)h(o\013.)150 674 y FD(task[0])p
FH(:)218 795 y FG(\017)23 b FD(pg)p 315 795 V 17 w(dir)c FH(=)h
FD(swapper)p 646 795 V 17 w(pg)p 711 795 V 16 w(dir)g FH(whic)o(h)h(means)f
(the)g(the)g(only)g(addresses)h(mapp)q(ed)f(are)g(in)h(the)264
859 y(range)15 b(3)f(GB)h(to)g(3)g(GB)g(+)g FD(high)p 834 859
V 17 w(memory)p FH(.)218 959 y FG(\017)23 b FD(LDT[1])14 b
FH(=)h(user)h(co)q(de,)f(base=0xc0000000,)e(size)k(=)e(640K)218
1059 y FG(\017)23 b FD(LDT[2])14 b FH(=)h(user)h(data,)e(base=0xc0000000,)f
(size)j(=)g(640K)221 1180 y(The)j(\014rst)f FD(exec\(\))g FH(sets)g(the)h
(LDT)g(en)o(tries)g(for)f FD(task[1])g FH(to)g(the)h(user)g(v)m(alues)h(of)e
(base)h(=)g(0x0,)150 1244 y(limit)f(=)e(T)l(ASK)p 437 1244
14 2 v 18 w(SIZE)g(=)h(0xc0000000.)k(Thereafter,)16 b(no)h(pro)q(cess)f(sees)
h(the)f(k)o(ernel)i(segmen)o(ts)d(while)150 1308 y(in)h(user)f(mo)q(de.)150
1461 y Fp(4.5.1)55 b(Pro)r(cesses)18 b(and)h(the)f(Memory)f(Manager)150
1578 y FH(Memory-related)e(w)o(ork)f(done)i(b)o(y)f FD(fork\(\))p
FH(:)218 1699 y FG(\017)23 b FH(Memory)14 b(allo)q(cation)315
1799 y FC({)23 b FH(1)15 b(page)g(for)f(the)h FD(task)p 754
1799 15 2 v 17 w(struct)p FH(.)315 1878 y FC({)23 b FH(1)15
b(page)g(for)f(the)h(k)o(ernel)h(stac)o(k.)315 1957 y FC({)23
b FH(1)15 b(for)f(the)h FD(pg)p 600 1957 V 17 w(dir)g FH(and)g(some)g(for)g
FD(pg)p 1024 1957 V 17 w(table)p FH(s)f(\(cop)o(y)p 1302 1957
14 2 v 16 w(page)p 1409 1957 V 16 w(tables\))218 2057 y FG(\017)23
b FH(Other)15 b(c)o(hanges)315 2157 y FC({)23 b FD(ss0)14 b
FH(set)h(to)g(k)o(ernel)h(stac)o(k)e(segmen)o(t)h(\(0x10\))f(to)g(b)q(e)i
(sure?)315 2237 y FC({)23 b FD(esp0)14 b FH(set)h(to)g(top)g(of)f(the)i
(newly)g(allo)q(cated)g FD(kernel)p 1282 2237 15 2 v 16 w(stack)p
1418 2237 V 17 w(page)315 2316 y FC({)23 b FD(cr3)14 b FH(set)h(b)o(y)g
FD(copy)p 683 2316 V 17 w(page)p 796 2316 V 17 w(tables\(\))f
FH(to)g(p)q(oin)o(t)i(to)f(newly)h(allo)q(cated)g(page)f(directory)l(.)315
2395 y FC({)23 b FD(ldt)g(=)p 510 2395 V 41 w(LDT\(task)p 719
2395 V 16 w(nr\))15 b FH(creates)g(new)g(ldt)h(descriptor.)315
2474 y FC({)23 b FH(descriptors)15 b(set)g(in)h(gdt)f(for)g(new)g(tss)g(and)g
FD(ldt[])p FH(.)315 2554 y FC({)23 b FH(The)15 b(remaining)h(registers)f(are)
g(inherited)i(from)e(paren)o(t.)p eop
%%Page: 91 100
91 99 bop 150 -84 1800 3 v 150 -100 a FC(4.5.)42 b(Memory)17
b(initializa)q(ti)q(on)1140 b FH(91)150 88 y(The)17 b(pro)q(cesses)g(end)h
(up)f(sharing)g(their)h(co)q(de)f(and)g(data)f(segmen)o(ts)g(\(although)h
(they)g(ha)o(v)o(e)f(separate)150 153 y(lo)q(cal)f(desctriptor)g(tables,)f
(the)h(en)o(tries)f(p)q(oin)o(t)h(to)f(the)g(same)g(segmen)o(ts\).)19
b(The)c(stac)o(k)e(and)i(data)e(pages)150 217 y(will)k(b)q(e)f(copied)g(when)
g(the)f(paren)o(t)g(or)g(c)o(hild)h(writes)g(to)e(them)h(\(cop)o
(y-on-write\).)150 305 y(Memory-related)g(w)o(ork)f(done)i(b)o(y)f
FD(exec\(\))p FH(:)218 430 y FG(\017)23 b FH(memory)14 b(allo)q(cation)315
532 y FC({)23 b FH(1)15 b(page)g(for)f(exec)i(header)f(en)o(tire)h(\014le)g
(for)f(omagic)315 613 y FC({)23 b FH(1)15 b(page)g(or)f(more)h(for)g(stac)o
(k)f(\(MAX)p 994 613 14 2 v 16 w(AR)o(G)p 1112 613 V 16 w(P)l(A)o(GES\))218
715 y FG(\017)23 b FD(clear)p 387 715 15 2 v 16 w(page)p 499
715 V 17 w(tables\(\))14 b FH(used)i(to)e(remo)o(v)o(e)h(old)g(pages.)218
816 y FG(\017)23 b FD(change)p 411 816 V 16 w(ldt\(\))14 b
FH(sets)h(the)h(descriptors)f(in)h(the)g(new)f FD(LDT[])218
918 y FG(\017)23 b FD(ldt[1])14 b FH(=)h(co)q(de)h(base=0x00,)f(limit=T)l
(ASK)p 1072 918 14 2 v 19 w(SIZE)218 1020 y FG(\017)23 b FD(ldt[2])14
b FH(=)h(data)g(base=0x00,)f(limit=T)l(ASK)p 1070 1020 V 19
w(SIZE)264 1084 y(These)h(segmen)o(ts)g(are)g(DPL=3,)g(P=1,)f(S=1,)i(G=1.)j
(t)o(yp)q(e=a)d(\(co)q(de\))f(or)f(2)h(\(data\))218 1186 y
FG(\017)23 b FH(Up)17 b(to)e FD(MAX)p 471 1186 15 2 v 17 w(ARG)p
560 1186 V 17 w(PAGES)h FH(dirt)o(y)h(pages)f(of)g(argv)g(and)h(en)o(vp)g
(are)f(allo)q(cated)i(and)e(stashed)h(at)f(the)264 1250 y(top)e(of)h(the)g
(data)g(segmen)o(t)g(for)f(the)i(newly)g(created)f(user)g(stac)o(k.)218
1352 y FG(\017)23 b FH(Set)15 b(the)g(instruction)h(p)q(oin)o(ter)g(of)f(the)
g(caller)h FD(eip)24 b(=)g(ex.a)p 1301 1352 V 16 w(entry)218
1454 y FG(\017)f FH(Set)12 b(the)g(stac)o(k)g(p)q(oin)o(ter)g(of)g(the)g
(caller)i(to)d(the)i(stac)o(k)e(just)h(created)g(\(esp)g(=)h(stac)o(k)e(p)q
(oin)o(ter\))i(These)264 1518 y(will)j(b)q(e)g(p)q(opp)q(ed)h(o\013)e(the)h
(stac)o(k)e(when)i(the)f(caller)h(resumes.)218 1620 y FG(\017)23
b FH(up)q(date)15 b(memory)g(limits)264 1684 y FD(end)p 339
1684 V 16 w(code)24 b(=)f(ex.a)p 618 1684 V 17 w(text)264 1748
y(end)p 339 1748 V 16 w(data)h(=)f(end)p 594 1748 V 17 w(code)h(+)f(ex.a)p
874 1748 V 17 w(data)264 1813 y(brk)g(=)h(end)p 482 1813 V
17 w(data)f(+)h(ex.a)p 762 1813 V 16 w(bss)221 1938 y FH(In)o(terrupts)16
b(and)g(traps)f(are)h(handled)i(within)f(the)f(con)o(text)g(of)f(the)h
(curren)o(t)g(task.)22 b(In)17 b(particular,)150 2002 y(the)k(page)f
(directory)g(of)g(the)h(curren)o(t)f(pro)q(cess)h(is)g(used)g(in)g(address)g
(translation.)35 b(The)21 b(segmen)o(ts,)150 2067 y(ho)o(w)o(ev)o(er,)e(are)g
(k)o(ernel)i(segmen)o(ts)e(so)g(that)f(all)j(linear)f(addresses)g(p)q(oin)o
(t)g(in)o(to)f(k)o(ernel)h(memory)l(.)33 b(F)l(or)150 2131
y(example,)23 b(assume)e(a)f(user)h(pro)q(cess)g(in)o(v)o(ok)o(es)g(a)g
(system)f(call)i(and)f(the)g(k)o(ernel)h(w)o(an)o(ts)e(to)g(access)h(a)150
2195 y(v)m(ariable)15 b(at)f(address)g(0x01.)k(The)c(linear)h(address)f(is)h
(0xc0000001)d(\(using)i(k)o(ernel)h(segmen)o(ts\))e(and)h(the)150
2260 y(ph)o(ysical)j(address)f(is)h(0x01.)22 b(The)16 b(later)g(is)h(b)q
(ecause)g(the)f(pro)q(cess')g(page)g(directory)g(maps)g(this)g(range)150
2324 y(exactly)g(as)e FD(page)p 461 2324 V 17 w(pg)p 526 2324
V 17 w(dir)p FH(.)221 2412 y(The)21 b(k)o(ernel)g(space)g(\(0xc0000000)d(+)j
FD(high)p 1005 2412 V 17 w(memory)p FH(\))e(is)j(mapp)q(ed)f(b)o(y)g(the)g(k)
o(ernel)g(page)g(tables)150 2476 y(whic)o(h)e(are)f(themselv)o(es)h(part)e
(of)h(the)g(RESER)-5 b(VED)19 b(memory)l(.)28 b(They)19 b(are)f(therefore)g
(shared)g(b)o(y)g(all)150 2541 y(pro)q(cesses.)28 b(During)18
b(a)g(fork)f FD(copy)p 764 2541 V 17 w(page)p 877 2541 V 16
w(tables\(\))g FH(treats)g(RESER)-5 b(VED)18 b(page)g(tables)g(di\013eren)o
(tly)l(.)p eop
%%Page: 92 101
92 100 bop 150 -84 1800 3 v 150 -100 a FC(4.6.)42 b(Acquiring)20
b(and)d(F)l(reeing)i(Memory:)k(P)o(aging)18 b(P)o(olicy)561
b FH(92)150 88 y(It)16 b(sets)g(p)q(oin)o(ters)g(in)h(the)f(pro)q(cess)g
(page)g(directories)h(to)f(p)q(oin)o(t)g(to)g(k)o(ernel)g(page)g(tables)h
(and)f(do)q(es)g(not)150 153 y(actually)11 b(allo)q(cate)g(new)g(page)f
(tables)h(as)f(it)h(do)q(es)f(normally)l(.)19 b(As)11 b(an)f(example)h(the)g
FD(kernel)p 1705 153 15 2 v 16 w(stack)p 1841 153 V 17 w(page)150
217 y FH(\(whic)o(h)g(sits)g(somewhere)g(in)g(the)g(k)o(ernel)h(space\))f(do)
q(es)g(not)f(need)i(an)e(asso)q(ciated)h FD(page)p 1628 217
V 17 w(table)f FH(allo)q(cated)150 281 y(in)16 b(the)f(pro)q(cess')g
FD(pg)p 503 281 V 17 w(dir)g FH(to)g(map)g(it.)221 369 y(The)g(in)o(terrupt)g
(instruction)i(sets)d(the)i(stac)o(k)e(p)q(oin)o(ter)i(and)f(stac)o(k)g
(segmen)o(t)f(from)h(the)g(privilege)i(0)150 434 y(v)m(alues)e(sa)o(v)o(ed)d
(in)j(the)e(tss)g(of)g(the)h(curren)o(t)f(task.)18 b(Note)13
b(that)g(the)h(k)o(ernel)g(stac)o(k)e(is)i(a)f(really)i(fragmen)o(ted)150
498 y(ob)s(ject)f(|)h(it's)f(not)g(a)g(single)i(ob)s(ject,)d(but)i(rather)f
(a)g(bunc)o(h)h(of)f(stac)o(k)g(frames)f(eac)o(h)i(allo)q(cated)g(when)g(a)
150 562 y(pro)q(cess)e(is)f(created,)h(and)f(released)h(when)g(it)g(exits.)19
b(The)13 b(k)o(ernel)g(stac)o(k)e(should)i(nev)o(er)g(gro)o(w)e(so)h(rapidly)
150 627 y(within)k(a)f(pro)q(cess)h(con)o(text)e(that)h(it)g(extends)h(b)q
(elo)o(w)g(the)f(curren)o(t)g(frame.)150 804 y Fs(4.6)70 b(Acquiring)22
b(and)h(F)-6 b(reeing)23 b(Memory:)30 b(P)n(aging)24 b(P)n(olicy)150
937 y FH(When)17 b(an)o(y)f(k)o(ernel)i(routine)f(w)o(an)o(ts)e(memory)h(it)h
(ends)g(up)g(calling)h FD(get)p 1411 937 V 17 w(free)p 1524
937 V 17 w(page\(\))p FH(.)23 b(This)17 b(is)g(at)f(a)150 1001
y(lo)o(w)o(er)g(lev)o(el)h(than)f FD(kmalloc\(\))e FH(\(in)j(fact)e
FD(kmalloc\(\))g FH(uses)h FD(get)p 1276 1001 V 16 w(free)p
1388 1001 V 17 w(page\(\))f FH(when)i(it)f(needs)g(more)150
1065 y(memory\).)221 1153 y FD(get)p 296 1153 V 16 w(free)p
408 1153 V 17 w(page\(\))23 b FH(tak)o(es)f(one)i(parameter,)h(a)e(priorit)o
(y)l(.)45 b(P)o(ossible)25 b(v)m(alues)f(are)f FD(GFP)p 1780
1153 V 17 w(BUFFER)p FH(,)150 1218 y FD(GFP)p 225 1218 V 17
w(KERNEL)p FH(,)13 b(and)i FD(GFP)p 572 1218 V 17 w(ATOMIC)p
FH(.)f(It)h(tak)o(es)f(a)g(page)h(o\013)g(of)f(the)h FD(free)p
1357 1218 V 17 w(page)p 1470 1218 V 17 w(list)p FH(,)f(up)q(dates)h
FD(mem)p 1852 1218 V 17 w(map)p FH(,)150 1282 y(zero)q(es)g(the)g(page)g(and)
g(returns)f(the)h(ph)o(ysical)h(address)f(of)g(the)f(page)h(\(note)f(that)h
FD(kmalloc\(\))e FH(returns)150 1346 y(a)j(ph)o(ysical)h(address.)22
b(The)16 b(logic)g(of)g(the)g(mm)f(dep)q(ends)j(on)d(the)h(iden)o(tit)o(y)h
(map)f(b)q(et)o(w)o(een)g(logical)h(and)150 1411 y(ph)o(ysical)f
(addresses\).)221 1499 y(That)f(itself)i(is)g(simple)h(enough.)23
b(The)17 b(problem,)f(of)g(course,)g(is)h(that)e(the)i FD(free)p
1629 1499 V 16 w(page)p 1741 1499 V 17 w(list)f FH(ma)o(y)150
1563 y(b)q(e)d(empt)o(y)l(.)19 b(If)12 b(y)o(ou)g(did)h(not)f(request)g(an)h
(atomic)f(op)q(eration,)g(at)g(this)h(stage,)e(y)o(ou)h(en)o(ter)g(in)o(to)g
(the)h(realm)150 1627 y(of)h(page)f(stealing)i(whic)o(h)g(w)o(e'll)f(go)g(in)
o(to)g(in)h(a)e(momen)o(t.)19 b(As)14 b(a)f(last)h(resort)f(\(and)h(for)g
(atomic)f(requests\))150 1692 y(a)18 b(page)f(is)i(torn)e(o\013)h(from)g(the)
g FD(secondary)p 927 1692 V 15 w(page)p 1038 1692 V 17 w(list)f
FH(\(as)h(y)o(ou)f(ma)o(y)h(ha)o(v)o(e)f(guessed,)i(when)f(pages)150
1756 y(are)d(freed,)g(the)g FD(secondary)p 648 1756 V 16 w(page)p
760 1756 V 17 w(list)f FH(gets)h(\014lled)i(up)f(\014rst\).)221
1844 y(The)11 b(actual)h(manipulation)h(of)e(the)h FD(page)p
939 1844 V 16 w(list)p FH(s)f(and)h FD(mem)p 1237 1844 V 16
w(map)f FH(o)q(ccurs)h(in)h(this)e(m)o(ysterious)h(macro)150
1908 y(called)k FD(REMOVE)p 425 1908 V 17 w(FROM)p 538 1908
V 16 w(MEM)p 626 1908 V 17 w(QUEUE\(\))e FH(whic)o(h)h(y)o(ou)g(probably)g
(nev)o(er)g(w)o(an)o(t)e(to)i(lo)q(ok)g(in)o(to.)k(Su\016ce)d(it)f(to)150
1973 y(sa)o(y)h(that)h(in)o(terrupts)g(are)g(disabled.)27 b
FC([I)20 b(think)g(that)g(this)g(should)g(b)q(e)g(explained)h(here.)30
b(It)20 b(is)150 2037 y(not)e FB(that)g FC(hard)p FA(:)8 b(:)g(:)f
FC(])221 2125 y FH(No)o(w)16 b(bac)o(k)h(to)g(the)g(page)g(stealing)h(bit.)26
b FD(get)p 1018 2125 V 17 w(free)p 1131 2125 V 17 w(page\(\))16
b FH(calls)i FD(try)p 1483 2125 V 17 w(to)p 1548 2125 V 17
w(free)p 1661 2125 V 17 w(page\(\))e FH(whic)o(h)150 2189 y(rep)q(eatedly)j
(calls)h FD(shrink)p 627 2189 V 16 w(buffers\(\))d FH(and)i
FD(swap)p 1064 2189 V 16 w(out\(\))f FH(in)h(that)f(order)g(un)o(til)h(it)g
(is)f(successful)i(in)150 2254 y(freeing)h(a)g(page.)36 b(The)21
b(priorit)o(y)g(is)g(increased)h(on)e(eac)o(h)h(successiv)o(e)h(iteration)f
(so)f(that)g(these)h(t)o(w)o(o)150 2318 y(routines)16 b(run)f(through)g
(their)h(page)f(stealing)h(lo)q(ops)f(more)g(often.)221 2406
y(Here's)g(one)g(run)g(through)g FD(swap)p 796 2406 V 17 w(out\(\))p
FH(:)218 2531 y FG(\017)23 b FH(Run)16 b(through)f(the)g(pro)q(cess)g(table)h
(and)f(get)g(a)g(sw)o(appable)h(task)e(sa)o(y)h Fv(Q.)p eop
%%Page: 93 102
93 101 bop 150 -84 1800 3 v 150 -100 a FC(4.6.)42 b(Acquiring)20
b(and)d(F)l(reeing)i(Memory:)k(P)o(aging)18 b(P)o(olicy)561
b FH(93)218 88 y FG(\017)23 b FH(Find)16 b(a)e(user)i(page)f(table)h(\(not)e
(RESER)-5 b(VED\))16 b(in)g Fv(Q)p FH('s)f(space.)218 190 y
FG(\017)23 b FH(F)l(or)14 b(eac)o(h)h Fv(page)h FH(in)g(the)f(table)g
FD(try)p 873 190 15 2 v 17 w(to)p 938 190 V 17 w(swap)p 1051
190 V 17 w(out\()23 b Fv(page)h FD(\))p FH(.)218 292 y FG(\017)f
FH(Quit)16 b(when)f(a)g(page)g(is)h(freed.)150 417 y(Note)e(that)f
FD(swap)p 455 417 V 17 w(out\(\))g FH(\(called)i(b)o(y)f FD(try)p
884 417 V 17 w(to)p 949 417 V 17 w(free)p 1062 417 V 16 w(page\(\))p
FH(\))f(main)o(tains)i(static)e(v)m(ariables)j(so)d(it)i(ma)o(y)150
481 y(resume)g(the)h(searc)o(h)f(where)g(it)h(left)f(o\013)h(on)f(the)g
(previous)h(call.)150 582 y FD(try)p 225 582 V 17 w(to)p 290
582 V 17 w(swap)p 403 582 V 16 w(out\(\))k FH(scans)h(the)f(page)h(tables)g
(of)f(all)h(user)g(pro)q(cesses)g(and)g(enforces)g(the)f(stealing)150
646 y(p)q(olicy:)206 771 y(1.)i(Do)14 b(not)h(\014ddle)i(with)e(RESER)-5
b(VED)16 b(pages.)206 873 y(2.)22 b(Age)15 b(the)g(page)g(if)h(it)f(is)h
(mark)o(ed)f(accessed)h(\(1)e(bit\).)206 975 y(3.)22 b(Don't)14
b(tamp)q(er)h(with)g(recen)o(tly)h(acquired)g(pages)f(\()p
FD(last)p 1249 975 V 17 w(free)p 1362 975 V 16 w(pages[])p
FH(\).)206 1076 y(4.)22 b(Lea)o(v)o(e)15 b(dirt)o(y)g(pages)g(with)h
FD(map)p 806 1076 V 16 w(counts)f FA(>)g FH(1)g(alone.)206
1178 y(5.)22 b(Decremen)o(t)15 b(the)g FD(map)p 645 1178 V
17 w(count)f FH(of)h(clean)h(pages.)206 1280 y(6.)22 b(F)l(ree)15
b(clean)h(pages)f(if)h(they)f(are)g(unmapp)q(ed.)206 1382 y(7.)22
b(Sw)o(ap)15 b(dirt)o(y)g(pages)g(with)g(a)g FD(map)p 835 1382
V 17 w(count)f FH(of)h(1.)221 1507 y(Of)h(these)h(actions,)f(6)g(and)h(7)f
(will)i(stop)e(the)g(pro)q(cess)h(as)f(they)g(result)h(in)g(the)g(actual)f
(freeing)h(of)f(a)150 1571 y(ph)o(ysical)h(page.)23 b(Action)17
b(5)e(results)i(in)g(one)f(of)g(the)g(pro)q(cesses)h(losing)g(an)f(unshared)h
(clean)g(page)f(that)150 1635 y(w)o(as)11 b(not)h(accessed)h(recen)o(tly)g
(\(decremen)o(t)f Fv(Q)p FD(->rss)p FH(\))g(whic)o(h)h(is)g(not)f(all)h(that)
f(bad,)g(but)h(the)f(cum)o(ulativ)o(e)150 1700 y(e\013ects)19
b(of)g(a)f(few)h(iterations)g(can)g(slo)o(w)f(do)o(wn)h(a)f(pro)q(cess)h
(considerably)l(.)32 b(A)o(t)19 b(presen)o(t,)g(there)g(are)f(6)150
1764 y(iterations,)d(so)g(a)g(page)g(shared)g(b)o(y)g(6)g(pro)q(cesses)h(can)
f(get)g(stolen)g(if)h(it)f(is)h(clean.)221 1852 y(P)o(age)i(table)h(en)o
(tries)g(are)g(up)q(dated)g(and)g(the)g(TLB)g(in)o(v)m(alidated.)33
b FC([W)l(onder)22 b(ab)q(out)h(the)f(lat-)150 1916 y(ter.)j(It)18
b(seems)e(unnecessary)i(since)g(accessed)f(pages)h(aren't)i(o\013ed)e(and)g
(there)g(is)g(a)g(w)o(alk)150 1981 y(through)23 b(man)o(y)f(page)g(tables)i
(b)q(et)o(w)o(een)d(iterations)k FA(:)8 b(:)g(:)d FC(ma)o(y)22
b(b)q(e)g(in)h(case)g(an)f(in)o(terrupt)150 2045 y(came)c(along)g(and)g(w)o
(an)o(ted)f(the)h(most)f(recen)o(tly)h(axed)g(page?])221 2133
y FH(The)10 b(actual)g(w)o(ork)f(of)h(freeing)h(the)f(page)g(is)h(done)f(b)o
(y)g FD(free)p 1211 2133 V 17 w(page\(\))p FH(,)g(the)g(complemen)o(t)h(of)f
FD(get)p 1836 2133 V 17 w(free)p 1949 2133 V 16 w(page\(\))p
FH(.)150 2197 y(It)g(ignores)h(RESER)-5 b(VED)10 b(pages,)h(up)q(dates)g
FD(mem)p 976 2197 V 16 w(map)p FH(,)g(then)f(frees)g(the)h(page)f(and)g(up)q
(dates)h(the)f FD(page)p 1879 2197 V 16 w(list)p FH(s)150 2262
y(if)i(it)g(is)g(unmapp)q(ed.)20 b(F)l(or)11 b(sw)o(apping)g(\(in)h(6)f(ab)q
(o)o(v)o(e\),)h FD(write)p 1165 2262 V 16 w(swap)p 1277 2262
V 17 w(page\(\))e FH(gets)h(called)i(and)f(do)q(es)g(noth-)150
2326 y(ing)k(remark)m(able)g(from)e(the)h(memory)g(managemen)o(t)f(p)q(ersp)q
(ectiv)o(e.)221 2414 y(The)j(details)h(of)e FD(shrink)p 662
2414 V 17 w(buffers\(\))g FH(w)o(ould)h(tak)o(e)f(us)i(to)q(o)e(far)g
(a\014eld.)27 b(Essen)o(tially)18 b(it)f(lo)q(oks)h(for)150
2478 y(free)d(bu\013ers,)h(then)g(writes)f(out)g(dirt)o(y)g(bu\013ers,)h
(then)g(go)q(es)f(at)g(busy)g(bu\013ers)h(and)g(calls)g FD(free)p
1793 2478 V 17 w(page\(\))150 2543 y FH(when)g(its)f(able)h(to)f(free)g(all)h
(the)f(bu\013ers)h(on)f(a)g(page.)p eop
%%Page: 94 103
94 102 bop 150 -84 1800 3 v 150 -100 a FC(4.7.)42 b(The)18
b(page)g(fault)g(handlers)1090 b FH(94)221 88 y(Note)18 b(that)h(page)g
(directories)h(and)f(page)g(tables)h(along)f(with)h(RESER)-5
b(VED)20 b(pages)f(do)g(not)f(get)150 153 y(sw)o(app)q(ed,)d(stolen)h(or)f
(aged.)20 b(They)c(are)f(mapp)q(ed)h(in)g(the)f(pro)q(cess)h(page)f
(directory)h(through)f(reserv)o(ed)150 217 y(page)g(tables.)20
b(They)c(are)f(freed)g(only)h(on)f(exit)h(from)e(the)h(pro)q(cess.)150
394 y Fs(4.7)70 b(The)22 b(page)h(fault)g(handlers)150 527
y FH(When)16 b(a)g(pro)q(cess)g(is)g(created)g(via)g(fork,)f(it)h(starts)e
(out)i(with)g(a)f(page)h(directory)g(and)g(a)f(page)h(or)f(so)g(of)150
591 y(the)g(executable.)21 b(So)16 b(the)f(page)g(fault)g(handler)i(is)e(the)
h(source)f(of)g(most)f(of)h(a)g(pro)q(cesses')g(memory)l(.)221
679 y(The)e(page)g(fault)g(handler)h FD(do)p 734 679 15 2 v
17 w(page)p 847 679 V 16 w(fault\(\))e FH(retriev)o(es)h(the)g(faulting)h
(address)f(from)f(the)h(register)150 743 y(cr2.)29 b(The)19
b(error)f(co)q(de)h(\(retriev)o(ed)g(in)g(sys)p 903 743 14
2 v 16 w(call.S\))g(di\013eren)o(tiates)h(user/sup)q(ervisor)g(access)e(and)h
(the)150 808 y(reason)j(for)g(the)h(fault)f(|)h(write)g(protection)g(or)f(a)g
(missing)h(page.)42 b(The)23 b(former)f(is)h(handled)h(b)o(y)150
872 y FD(do)p 201 872 15 2 v 17 w(wp)p 266 872 V 17 w(page\(\))14
b FH(and)i(the)f(latter)g(b)o(y)g FD(do)p 843 872 V 17 w(no)p
908 872 V 17 w(page\(\))p FH(.)221 960 y(If)21 b(the)h(faulting)g(address)f
(is)h(greater)e(than)h(T)l(ASK)p 1149 960 14 2 v 18 w(SIZE)g(the)h(pro)q
(cess)f(receiv)o(es)h(a)f(SIGKILL.)150 1024 y FC([Wh)o(y)h(this)i(c)o(hec)o
(k?)37 b(This)24 b(can)f(only)g(happ)q(en)h(in)f(k)o(ernel)g(mo)q(de)g(b)q
(ecause)g(of)g(segmen)o(t)150 1088 y(lev)o(el)18 b(protection.])221
1176 y FH(These)c(routines)g(ha)o(v)o(e)g(some)f(subtleties)i(as)f(they)g
(can)g(get)f(called)j(from)d(an)h(in)o(terrupt.)19 b(Y)l(ou)c(can't)150
1241 y(assume)g(that)g(it)g(is)h(the)f(`curren)o(t')f(task)h(that)f(is)i
(executing.)221 1329 y FD(do)p 272 1329 15 2 v 16 w(no)p 336
1329 V 17 w(page\(\))f FH(handles)h(three)f(p)q(ossible)i(situations:)206
1451 y(1.)22 b(The)15 b(page)g(is)h(sw)o(app)q(ed.)206 1552
y(2.)22 b(The)15 b(page)g(b)q(elongs)h(to)f(the)g(executable)i(or)d(a)h
(shared)g(library)l(.)206 1653 y(3.)22 b(The)15 b(page)g(is)h(missing)g(|)g
(a)e(data)h(page)g(that)g(has)g(not)f(b)q(een)j(allo)q(cated.)221
1775 y(In)f(all)h(cases)e FD(get)p 531 1775 V 17 w(empty)p
668 1775 V 17 w(pgtable\(\))f FH(is)j(called)g(\014rst)e(to)h(ensure)g(the)g
(existence)h(of)e(a)h(page)g(table)150 1840 y(that)e(co)o(v)o(ers)f(the)i
(faulting)g(address.)20 b(In)15 b(case)f(3)h FD(get)p 1071
1840 V 16 w(empty)p 1207 1840 V 17 w(page\(\))e FH(is)i(called)h(to)e(pro)o
(vide)h(a)f(page)h(at)150 1904 y(the)g(required)i(address)e(and)g(in)h(case)f
(of)g(the)g(sw)o(app)q(ed)h(page,)f FD(swap)p 1339 1904 V 16
w(in\(\))g FH(is)h(called.)221 1992 y(In)d(case)g(2,)g(the)g(handler)h(calls)
g FD(share)p 878 1992 V 17 w(page\(\))e FH(to)g(see)i(if)f(the)g(page)g(is)h
(shareable)f(with)h(some)e(other)150 2056 y(pro)q(cess.)20
b(If)15 b(that)g(fails)h(it)f(reads)g(in)h(the)f(page)g(from)g(the)g
(executable)h(or)f(library)h(\(It)e(rep)q(eats)i(the)f(call)150
2120 y(to)d FD(share)p 326 2120 V 17 w(page\(\))f FH(in)j(case)f(another)f
(pro)q(cess)h(did)h(the)f(same)f(mean)o(while\).)20 b(An)o(y)13
b(p)q(ortion)g(of)f(the)h(page)150 2185 y(b)q(ey)o(ond)j(the)f(brk)g(v)m
(alue)i(is)e(zero)q(ed.)221 2273 y(A)f(page)h(read)f(in)i(from)d(the)i(disk)g
(is)g(coun)o(ted)g(as)f(a)h(ma)s(jor)e(fault)h(\()p FD(maj)p
1445 2273 V 17 w(flt)p FH(\).)19 b(This)c(happ)q(ens)h(with)150
2337 y(a)h FD(swap)p 289 2337 V 17 w(in\(\))f FH(or)h(when)h(it)f(is)h(read)f
(from)g(the)g(executable)i(or)d(a)h(library)l(.)27 b(Other)18
b(cases)f(are)g(deemed)150 2401 y(minor)e(faults)h(\()p FD(min)p
500 2401 V 16 w(flt)p FH(\).)221 2489 y(When)e(a)f(shareable)h(page)f(is)h
(found,)g(it)g(is)g(write-protected.)20 b(A)13 b(pro)q(cess)h(that)f(writes)h
(to)f(a)g(shared)150 2554 y(page)i(will)i(then)e(ha)o(v)o(e)g(to)g(go)f
(through)h FD(do)p 889 2554 V 17 w(wp)p 954 2554 V 17 w(page\(\))f
FH(whic)o(h)i(do)q(es)g(the)f(cop)o(y-on-write.)p eop
%%Page: 95 104
95 103 bop 150 -84 1800 3 v 150 -100 a FC(4.8.)42 b(P)o(aging)1478
b FH(95)150 88 y FD(do)p 201 88 15 2 v 17 w(wp)p 266 88 V 17
w(page\(\))14 b FH(do)q(es)i(the)f(follo)o(wing:)218 203 y
FG(\017)23 b FH(send)15 b(SIGSEGV)h(if)g(an)o(y)e(user)i(pro)q(cess)f(is)h
(writing)g(to)e(curren)o(t)h FD(code)p 1483 203 V 17 w(space)p
FH(.)218 300 y FG(\017)23 b FH(If)15 b(the)g(old)h(page)f(is)h(not)f(shared)g
(then)h(just)e(unprotect)i(it.)264 365 y(Else)i FD(get)p 438
365 V 17 w(free)p 551 365 V 16 w(page\(\))f FH(and)h FD(copy)p
915 365 V 16 w(page\(\))p FH(.)27 b(The)18 b(page)f(acquires)h(the)g(dirt)o
(y)g(\015ag)f(from)g(the)264 429 y(old)e(page.)20 b(Decremen)o(t)15
b(the)g(map)g(coun)o(t)g(of)g(the)h(old)f(page.)150 604 y Fs(4.8)70
b(P)n(aging)150 737 y FH(P)o(aging)16 b(is)g(sw)o(apping)g(on)g(a)g(page)g
(basis)g(rather)f(than)h(b)o(y)g(en)o(tire)g(pro)q(cesses.)23
b(W)l(e)16 b(will)h(use)g(sw)o(apping)150 801 y(here)h(to)e(refer)h(to)f
(paging,)i(since)g FE(Linux)f FH(only)g(pages,)g(and)h(do)q(es)f(not)g(sw)o
(ap,)g(and)g(p)q(eople)i(are)d(more)150 866 y(used)c(to)e(the)h(w)o(ord)f
(\\sw)o(ap")g(than)h(\\page.")17 b(Kernel)c(pages)e(are)f(nev)o(er)h(sw)o
(app)q(ed.)19 b(Clean)12 b(pages)e(are)h(also)150 930 y(not)16
b(written)g(to)g(sw)o(ap.)23 b(They)16 b(are)g(freed)h(and)f(reloaded)i(when)
e(required.)25 b(The)16 b(sw)o(app)q(er)h(main)o(tains)150
994 y(a)g(single)h(bit)g(of)f(aging)g(info)h(in)g(the)f FD(PAGE)p
894 994 V 17 w(ACCESSED)f FH(bit)i(of)f(the)g(page)g(table)h(en)o(tries.)26
b FC([What)21 b(are)150 1059 y(the)d(main)o(tainance)h(details?)25
b(Ho)o(w)16 b(is)i(it)g(used?])221 1147 y FE(Linux)g FH(supp)q(orts)h(m)o
(ultiple)i(sw)o(ap)e(\014les)h(or)f(devices)h(whic)o(h)h(ma)o(y)d(b)q(e)i
(turned)g(on)f(or)f(o\013)i(b)o(y)f(the)150 1211 y(sw)o(ap)q(on)10
b(and)g(sw)o(ap)q(o\013)g(system)g(calls.)19 b(Eac)o(h)10 b(sw)o(ap\014le)h
(or)e(device)j(is)f(describ)q(ed)h(b)o(y)e(a)g FD(struct)23
b(swap)p 1862 1211 V 16 w(info)p 1974 1211 V 17 w(struct)150
1275 y FH(\(sw)o(ap.c\).)264 1382 y Fr(static)d(struct)h(swap_info_struct)d
({)394 1439 y(unsigned)j(long)f(flags;)394 1496 y(struct)h(inode)g(*)g
(swap_file;)394 1553 y(unsigned)g(int)g(swap_device;)394 1609
y(unsigned)g(char)f(*)i(swap_map;)394 1666 y(char)f(*)h(swap_lockmap;)394
1723 y(int)g(lowest_bit;)394 1780 y(int)g(highest_bit;)264
1836 y(})f(swap_info[MAX_SWAP)o(FILES)o(];)221 1951 y FH(The)d(\015ags)g
(\014eld)i(\()p FD(SWP)p 619 1951 V 16 w(USED)e FH(or)g FD(SWP)p
880 1951 V 17 w(WRITEOK)p FH(\))f(is)i(used)g(to)f(con)o(trol)g(access)g(to)g
(the)h(sw)o(ap)e(\014les.)150 2015 y(When)h FD(SWP)p 360 2015
V 16 w(WRITEOK)f FH(is)g(o\013)h(space)f(will)i(not)e(b)q(e)h(allo)q(cated)g
(in)g(that)f(\014le.)27 b(This)17 b(is)h(used)g(b)o(y)f(sw)o(ap)q(o\013)150
2080 y(when)22 b(it)g(tries)g(to)f(un)o(use)h(a)g(\014le.)40
b(When)22 b(sw)o(ap)q(on)g(adds)g(a)f(new)h(sw)o(ap)f(\014le)i(it)f(sets)f
FD(SWP)p 1772 2080 V 17 w(USED)p FH(.)g(A)150 2144 y(static)d(v)m(ariable)i
FD(nr)p 502 2144 V 17 w(swapfiles)d FH(stores)g(the)i(n)o(um)o(b)q(er)f(of)g
(curren)o(tly)h(activ)o(e)f(sw)o(ap)g(\014les.)30 b(The)19
b(\014elds)150 2208 y FD(lowest)p 297 2208 V 16 w(bit)c FH(and)h
FD(highest)p 657 2208 V 16 w(bit)f FH(b)q(ound)h(the)f(free)g(region)h(in)g
(the)f(sw)o(ap)g(\014le)h(and)g(are)e(used)i(to)f(sp)q(eed)150
2273 y(up)h(the)f(searc)o(h)g(for)g(free)g(sw)o(ap)f(space.)221
2361 y(The)k(user)h(program)e(mksw)o(ap)h(initializes)j(a)d(sw)o(ap)g(device)
i(or)e(\014le.)31 b(The)18 b(\014rst)g(page)h(con)o(tains)f(a)150
2425 y(signature)12 b(\(`)p FD(SWAP-SPACE)p FH('\))c(in)k(the)g(last)f(10)g
(b)o(ytes,)h(and)f(holds)h(a)f(bitmap.)19 b(Initially)14 b(0's)d(in)h(the)g
(bitmap)150 2489 y(signal)18 b(bad)f(pages.)25 b(A)17 b(`1')e(in)j(the)f
(bitmap)g(means)g(the)g(corresp)q(onding)h(page)f(is)g(free.)25
b(This)18 b(page)e(is)150 2554 y(nev)o(er)f(allo)q(cated)i(so)d(the)i
(initialization)i(needs)e(to)e(b)q(e)i(done)g(just)f(once.)p
eop
%%Page: 96 105
96 104 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)1004 b FH(96)221 88 y(The)17 b(syscall)h
FD(swapon\(\))e FH(is)i(called)g(b)o(y)f(the)h(user)f(program)f(sw)o(ap)q(on)
h(t)o(ypically)h(from)f(/etc/rc.)25 b(A)150 153 y(couple)16
b(of)f(pages)g(of)g(memory)g(are)f(allo)q(cated)j(for)d FD(swap)p
1132 153 15 2 v 17 w(map)h FH(and)g FD(swap)p 1420 153 V 17
w(lockmap)p FH(.)221 241 y FD(swap)p 320 241 V 16 w(map)f FH(holds)h(a)f(b)o
(yte)g(for)g(eac)o(h)h(page)f(in)h(the)g(sw)o(ap\014le.)20
b(It)14 b(is)h(initialized)j(from)13 b(the)i(bitmap)g(to)150
305 y(con)o(tain)e(a)h(0)f(for)f(a)o(v)m(ailable)j(pages)e(and)h(128)e(for)h
(un)o(usable)i(pages.)k(It)13 b(is)h(used)g(to)e(main)o(tain)i(a)f(coun)o(t)g
(of)150 369 y(sw)o(ap)j(requests)g(on)g(eac)o(h)h(page)f(in)h(the)g(sw)o(ap)f
(\014le.)24 b FD(swap)p 1157 369 V 17 w(lockmap)15 b FH(holds)i(a)f(bit)h
(for)f(eac)o(h)g(page)h(that)150 434 y(is)f(used)f(to)g(ensure)h(m)o(utual)f
(exclusion)i(when)f(reading)g(or)e(writing)i(sw)o(ap)f(\014les.)221
522 y(When)f(a)f(page)h(of)f(memory)g(is)h(to)f(b)q(e)i(sw)o(app)q(ed)f(out)f
(an)h(index)h(to)e(the)g(sw)o(ap)h(lo)q(cation)g(is)g(obtained)150
586 y(b)o(y)f(a)g(call)i(to)d FD(get)p 457 586 V 17 w(swap)p
570 586 V 17 w(page\(\))p FH(.)18 b(This)c(index)h(is)f(then)f(stored)g(in)h
(bits)g(1{31)e(of)h(the)g(page)h(table)f(en)o(try)150 650 y(so)g(the)g(sw)o
(app)q(ed)g(page)g(ma)o(y)f(b)q(e)i(lo)q(cated)f(b)o(y)g(the)g(page)g(fault)g
(handler,)i FD(do)p 1450 650 V 16 w(no)p 1514 650 V 17 w(page\(\))e
FH(when)g(needed.)221 738 y(The)18 b(upp)q(er)g(7)g(bits)g(of)f(the)h(index)h
(giv)o(e)f(the)g(sw)o(ap\014le)g(\(or)f(device\))h(and)g(the)g(lo)o(w)o(er)f
(24)h(bits)g(giv)o(e)150 802 y(the)g(page)h(n)o(um)o(b)q(er)f(on)h(that)e
(device.)31 b(That)18 b(mak)o(es)g(as)g(man)o(y)g(as)g(128)f(sw)o(ap\014les,)
i(eac)o(h)g(with)g(ro)q(om)150 867 y(for)c(ab)q(out)g(64)g(GB,)g(but)g(the)h
(space)g(o)o(v)o(erhead)f(due)h(to)e(the)i FD(swap)p 1301 867
V 17 w(map)f FH(w)o(ould)g(b)q(e)h(large.)21 b(Instead)16 b(the)150
931 y(sw)o(ap\014le)g(size)g(is)g(limited)h(to)d(16)h(MB,)f(b)q(ecause)j(the)
e FD(swap)p 1170 931 V 16 w(map)g FH(then)h(tak)o(es)e(1)h(page.)221
1019 y(The)h(function)h FD(swap)p 593 1019 V 17 w(duplicate\(\))d
FH(is)j(used)g(b)o(y)f FD(copy)p 1200 1019 V 17 w(page)p 1313
1019 V 16 w(tables\(\))g FH(to)f(let)i(a)f(c)o(hild)i(pro)q(cess)150
1083 y(inherit)f(sw)o(app)q(ed)f(pages)g(during)g(a)f(fork.)21
b(It)16 b(just)f(incremen)o(ts)i(the)e(coun)o(t)h(main)o(tained)g(in)h
FD(swap)p 1865 1083 V 16 w(map)150 1148 y FH(for)e(that)f(page.)20
b(Eac)o(h)15 b(pro)q(cess)g(will)i(sw)o(ap)e(in)h(a)f(separate)f(cop)o(y)h
(of)g(the)g(page)g(when)h(it)g(accesses)f(it.)221 1236 y FD(swap)p
320 1236 V 16 w(free\(\))g FH(decremen)o(ts)i(the)f(coun)o(t)g(main)o(tained)
h(in)g FD(swap)p 1325 1236 V 17 w(map)p FH(.)22 b(When)16 b(the)h(coun)o(t)f
(drops)g(to)150 1300 y(0)d(the)h(page)f(can)g(b)q(e)h(reallo)q(cated)h(b)o(y)
e FD(get)p 874 1300 V 17 w(swap)p 987 1300 V 16 w(page\(\))p
FH(.)19 b(It)13 b(is)h(called)h(eac)o(h)f(time)f(a)g(sw)o(app)q(ed)h(page)f
(is)150 1364 y(read)g(in)o(to)g(memory)g(\()p FD(swap)p 630
1364 V 16 w(in\(\))p FH(\))f(or)h(when)h(a)e(page)h(is)h(to)f(b)q(e)g
(discarded)i(\()p FD(free)p 1554 1364 V 16 w(one)p 1642 1364
V 17 w(table\(\))p FH(,)d(etc.\).)150 1541 y Fs(4.9)70 b(80386)24
b(Memory)f(Mangamen)n(t)150 1674 y FH(A)c(logical)h(address)f(sp)q(eci\014ed)
i(in)e(an)g(instruction)h(is)f(\014rst)g(translated)f(to)h(a)f(linear)i
(address)f(b)o(y)g(the)150 1739 y(segmen)o(ting)f(hardw)o(are.)26
b(This)18 b(linear)g(address)g(is)g(then)g(translated)f(to)g(a)g(ph)o(ysical)
i(address)e(b)o(y)h(the)150 1803 y(paging)d(unit.)150 1956
y Fp(4.9.1)55 b(P)n(aging)20 b(on)e(the)h(386)150 2074 y FH(There)j(are)g(t)o
(w)o(o)e(lev)o(els)j(of)e(indirection)j(in)f(address)f(translation)g(b)o(y)f
(the)h(paging)g(unit.)41 b(A)21 b FC(page)150 2138 y(directory)g
FH(con)o(tains)d(p)q(oin)o(ters)i(to)e(1024)f(page)i(tables.)31
b(Eac)o(h)19 b FC(page)j(table)e FH(con)o(tains)e(p)q(oin)o(ters)i(to)150
2202 y(1024)14 b(pages.)19 b(The)c(register)g(CR3)g(con)o(tains)g(the)g(ph)o
(ysical)h(base)f(address)g(of)f(the)h(page)g(directory)g(and)150
2267 y(is)f(stored)e(as)h(part)f(of)h(the)g(TSS)g(in)h(the)f
FD(task)p 926 2267 V 17 w(struct)f FH(and)h(is)g(therefore)g(loaded)h(on)f
(eac)o(h)g(task)f(switc)o(h.)150 2379 y(A)j(32-bit)h(Linear)g(address)f(is)h
(divided)h(as)e(follo)o(ws:)p 150 2385 1391 2 v 149 2450 2
65 v 175 2430 a(31)330 b(22)p 620 2450 V 49 w(21)g(12)p 1091
2450 V 49 w(11)g(0)p 1540 2450 V 150 2451 1391 2 v 149 2516
2 65 v 343 2496 a(DIR)p 620 2516 V 352 w(T)l(ABLE)p 1091 2516
V 291 w(OFFSET)p 1540 2516 V 150 2517 1391 2 v eop
%%Page: 97 106
97 105 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)1004 b FH(97)150 88 y(Ph)o(ysical)16
b(address)f(is)h(then)g(computed)f(\(in)h(hardw)o(are\))e(as:)p
150 118 1005 2 v 149 182 2 65 v 357 163 a(CR3)h(+)h(DIR)p 620
182 V 50 w(p)q(oin)o(ts)g(to)e(the)h(table)p 1017 163 14 2
v 17 w(base.)p 1154 182 2 65 v 150 184 1005 2 v 149 248 2 65
v 175 229 a(table)p 276 229 14 2 v 17 w(base)g(+)h(T)l(ABLE)p
620 248 2 65 v 50 w(p)q(oin)o(ts)g(to)e(the)h(page)p 1010 229
14 2 v 17 w(base.)p 1154 248 2 65 v 150 250 1005 2 v 149 314
2 65 v 223 295 a(ph)o(ysical)p 384 295 14 2 v 18 w(address)g(=)p
620 314 2 65 v 50 w(page)p 740 295 14 2 v 16 w(base)h(+)f(OFFSET)p
1154 314 2 65 v 150 316 1005 2 v 221 403 a(P)o(age)j(directories)h(\(page)g
(tables\))g(are)f(page)h(aligned)h(so)e(the)h(lo)o(w)o(er)f(12)h(bits)g(are)f
(used)i(to)e(store)150 467 y(useful)e(information)g(ab)q(out)f(the)g(page)g
(table)h(\(page\))e(p)q(oin)o(ted)i(to)f(b)o(y)g(the)g(en)o(try)l(.)150
580 y(F)l(ormat)f(for)g(P)o(age)h(directory)g(and)h(P)o(age)e(table)i(en)o
(tries:)p 150 594 1444 2 v 149 659 2 65 v 175 640 a(31)330
b(12)p 620 659 V 49 w(11)30 b(9)p 768 659 V 49 w(8)50 b(7)55
b(6)62 b(5)55 b(4)49 b(3)80 b(2)119 b(1)94 b(0)p 1592 659 V
150 660 1444 2 v 149 725 2 65 v 276 706 a(ADDRESS)p 620 725
V 171 w(OS)p 768 725 V 69 w(0)50 b(0)f(D)h(A)g(0)f(0)h(U/S)g(R/W)f(P)p
1592 725 V 150 727 1444 2 v 243 788 a(D)h(1)15 b(means)g(page)g(is)g(dirt)o
(y)h(\(unde\014ned)g(for)f(page)g(directory)g(en)o(try\).)175
853 y(R/W)50 b(0)15 b(means)g(readonly)g(for)g(user.)196 917
y(U/S)50 b(1)15 b(means)g(user)g(page.)247 981 y(P)50 b(1)15
b(means)g(page)g(is)g(presen)o(t)h(in)g(memory)l(.)244 1046
y(A)50 b(1)15 b(means)g(page)g(has)g(b)q(een)h(accessed)g(\(set)f(to)f(0)h(b)
o(y)g(aging\).)217 1110 y(OS)51 b(bits)15 b(can)h(b)q(e)f(used)h(for)f(LR)o
(U)h(etc,)f(and)g(are)g(de\014ned)h(b)o(y)f(the)h(OS.)150 1165
y(The)f(corresp)q(onding)i(de\014nitions)g(for)d(Lin)o(ux)j(are)d(in)i
FD(<linux/mm.h>)p FH(.)221 1253 y(When)h(a)h(page)f(is)h(sw)o(app)q(ed,)g
(bits)g(1{31)e(of)i(the)f(page)g(table)h(en)o(try)g(are)f(used)h(to)f(mark)g
(where)g(a)150 1317 y(page)e(is)h(stored)f(in)h(sw)o(ap)e(\(bit)i(0)e(m)o
(ust)h(b)q(e)h(0\).)221 1405 y(P)o(aging)j(is)g(enabled)i(b)o(y)f(setting)f
(the)g(highest)h(bit)g(in)g(CR0.)33 b FC([in)23 b(head.S?])e
FH(A)o(t)d(eac)o(h)i(stage)e(of)150 1469 y(the)h(address)h(translation)f
(access)h(p)q(ermissions)h(are)e(v)o(eri\014ed)h(and)g(pages)f(not)g(presen)o
(t)g(in)i(memory)150 1534 y(and)14 b(protection)g(violations)h(result)f(in)h
(page)f(faults.)19 b(The)14 b(fault)g(handler)h(\(in)g(memory)l(.c\))e(then)h
(either)150 1598 y(brings)i(in)g(a)f(new)g(page)g(or)g(un)o(writeprotects)g
(a)g(page)g(or)f(do)q(es)i(whatev)o(er)f(needs)h(to)e(b)q(e)i(done.)150
1751 y Fp(P)n(age)j(F)-5 b(ault)19 b(handling)g(Information)218
1864 y FG(\017)k FH(The)15 b(register)g(CR2)g(con)o(tains)h(the)f(linear)h
(address)g(that)e(caused)i(the)f(last)g(page)g(fault.)218 1966
y FG(\017)23 b FH(P)o(age)14 b(F)l(ault)h(Error)g(Co)q(de)g(\(16)f(bits\):)p
264 1983 952 2 v 263 2047 2 65 v 289 2028 a(bit)p 368 2047
V 50 w(cleared)p 753 2047 V 246 w(set)p 1214 2047 V 264 2049
952 2 v 264 2059 V 263 2123 2 65 v 305 2104 a(0)p 368 2123
V 66 w(page)h(not)g(presen)o(t)p 753 2123 V 54 w(page)h(lev)o(el)g
(protection)p 1214 2123 V 264 2125 952 2 v 263 2189 2 65 v
305 2170 a(1)p 368 2189 V 66 w(fault)f(due)h(to)f(read)p 753
2189 V 49 w(fault)h(due)g(to)e(write)p 1214 2189 V 264 2191
952 2 v 263 2255 2 65 v 305 2236 a(2)p 368 2255 V 66 w(sup)q(ervisor)i(mo)q
(de)p 753 2255 V 59 w(user)g(mo)q(de)p 1214 2255 V 264 2257
952 2 v 264 2305 a(The)f(rest)g(are)g(unde\014ned.)21 b(These)16
b(are)f(extracted)g(in)h(sys)p 1271 2305 14 2 v 16 w(call.S.)221
2455 y(The)g(T)l(ranslation)h(Lo)q(ok)m(aside)h(Bu\013er)g(\(TLB\))e(is)h(a)g
(hardw)o(are)f(cac)o(he)h(for)f(ph)o(ysical)i(addresses)e(of)150
2519 y(the)e(most)g(recen)o(tly)h(used)f(virtual)h(addresses.)20
b(When)15 b(a)f(virtual)h(address)f(is)h(translated)f(the)g(386)f(\014rst)p
eop
%%Page: 98 107
98 106 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)1004 b FH(98)150 88 y(lo)q(oks)19 b(in)g(the)f(TLB)h
(to)e(see)i(if)g(the)f(information)h(it)f(needs)h(is)g(a)o(v)m(ailable.)31
b(If)19 b(not,)f(it)h(has)f(to)f(mak)o(e)h(a)150 153 y(couple)e(of)f(memory)g
(references)h(to)f(get)f(at)h(the)g(page)g(directory)h(and)f(then)h(the)f
(page)g(table)h(b)q(efore)g(it)150 217 y(can)g(actually)g(get)f(at)g(the)g
(page.)21 b(Three)15 b(ph)o(ysical)i(memory)e(references)h(for)f(address)g
(translation)h(for)150 281 y(ev)o(ery)f(logical)h(memory)f(reference)h(w)o
(ould)g(kill)h(the)e(system,)f(hence)j(the)e(TLB.)221 369 y(The)h(TLB)g(is)h
(\015ushed)g(if)g(CR3)f(loaded)g(or)g(b)o(y)g(task)f(switc)o(h)i(that)e(c)o
(hanges)h(CR0.)22 b(It)17 b(is)f(explicitly)150 434 y(\015ushed)g(in)g(Lin)o
(ux)h(b)o(y)e(calling)i FD(invalidate\(\))c FH(whic)o(h)j(just)f(reloads)h
(CR3.)150 587 y Fp(4.9.2)55 b(Segmen)n(ts)17 b(in)i(the)f(80386)150
704 y FH(Segmen)o(t)13 b(registers)h(are)f(used)h(in)g(address)g(translation)
f(to)g(generate)g(a)h(linear)g(address)g(from)f(a)g(logical)150
769 y(\(virtual\))i(address.)264 894 y Fr(linear)p 399 894
14 2 v 14 w(address)20 b(=)i(segment)p 785 894 V 14 w(base)f(+)h(logical)p
1106 894 V 14 w(address)150 1019 y FH(The)15 b(linear)i(address)e(is)h(then)f
(translated)g(in)o(to)h(a)e(ph)o(ysical)j(address)e(b)o(y)g(the)h(paging)f
(hardw)o(are.)221 1107 y(Eac)o(h)f(segmen)o(t)g(in)h(the)g(system)f(is)h
(describ)q(ed)h(b)o(y)f(a)f(8)g(b)o(yte)h(segmen)o(t)f(descriptor)h(whic)o(h)
g(con)o(tains)150 1171 y(all)h(p)q(ertinen)o(t)g(information)g(\(base,)e
(limit,)i(t)o(yp)q(e,)f(privilege\).)150 1284 y FC(The)j(segmen)o(ts)e(are:)
150 1348 y(Regular)j(segmen)o(ts)218 1498 y FG(\017)k FH(co)q(de)15
b(and)h(data)e(segmen)o(ts)150 1624 y FC(System)j(segmen)o(ts)218
1813 y FG(\017)23 b FH(\(TSS\))14 b(task)h(state)f(segmen)o(ts)218
1915 y FG(\017)23 b FH(\(LDT\))14 b(lo)q(cal)i(descriptor)g(tables)150
2065 y(Characteristics)f(of)g(system)g(segmen)o(ts:)218 2190
y FG(\017)23 b FH(System)15 b(segmen)o(ts)f(are)h(task)g(sp)q(eci\014c.)218
2292 y FG(\017)23 b FH(There)d(is)g(a)f(T)l(ask)h(State)f(Segmen)o(t)h
(\(TSS\))f(asso)q(ciated)h(with)g(eac)o(h)g(task)f(in)i(the)f(system.)33
b(It)264 2356 y(con)o(tains)13 b(the)h FD(tss)p 592 2356 15
2 v 16 w(struct)f FH(\(sc)o(hed.h\).)19 b(The)13 b(size)i(of)e(the)g(segmen)o
(t)g(is)h(that)f(of)g(the)g FD(tss)p 1793 2356 V 17 w(struct)264
2421 y FH(excluding)20 b(the)f FD(i387)p 651 2421 V 17 w(union)f
FH(\(232)f(b)o(ytes\).)30 b(It)19 b(con)o(tains)g(all)g(the)g(information)g
(necessary)g(to)264 2485 y(restart)14 b(the)h(task.)p eop
%%Page: 99 108
99 107 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)1004 b FH(99)218 88 y FG(\017)23 b
FH(The)16 b(LDT's)f(con)o(tain)h(regular)g(segmen)o(t)f(descriptors)h(that)f
(are)h(priv)m(ate)g(to)g(a)f(task.)21 b(In)c FE(Linux)264 153
y FH(there)c(is)g(one)g(LDT)g(p)q(er)g(task.)18 b(There)13
b(is)h(ro)q(om)e(for)g(32)g(descriptors)i(in)f(the)g(lin)o(ux)i
FD(task)p 1781 153 15 2 v 16 w(struct)p FH(.)264 217 y(The)j(normal)g(LDT)f
(generated)h(b)o(y)g(Lin)o(ux)h(has)f(a)f(size)i(of)e(24)h(b)o(ytes,)g(hence)
g(ro)q(om)g(for)f(only)h(3)264 281 y(en)o(tries)d(as)g(ab)q(o)o(v)o(e.)k(Its)
d(con)o(ten)o(ts)e(are:)315 382 y FC({)23 b FH(LDT[0])14 b(Null)i
(\(mandatory\))315 462 y FC({)23 b FH(LDT[1])14 b(user)h(co)q(de)h(segmen)o
(t)f(descriptor.)315 542 y FC({)23 b FH(LDT[2])14 b(user)h(data/stac)o(k)f
(segmen)o(t)g(descriptor.)218 642 y FG(\017)23 b FH(The)17
b(user)g(segmen)o(ts)g(all)h(ha)o(v)o(e)e(base=0x00)h(so)g(that)f(the)h
(linear)i(address)e(is)g(the)g(same)g(as)g(the)264 707 y(logical)f(address.)
221 829 y(T)l(o)f(k)o(eep)i(trac)o(k)e(of)g(all)i(these)f(segmen)o(ts,)g(the)
g(386)f(uses)h(a)g(global)g(descriptor)h(table)f(\(GDT\))f(that)150
894 y(is)22 b(setup)g(in)h(memory)e(b)o(y)h(the)f(system)h(\(lo)q(cated)g(b)o
(y)f(the)h(GDT)f(register\).)39 b(The)22 b(GDT)f(con)o(tains)150
958 y(a)f(segmen)o(t)g(descriptors)h(for)f(eac)o(h)g(task)g(state)f(segmen)o
(t,)i(eac)o(h)g(lo)q(cal)g(descriptor)g(tablet)f(and)h(also)150
1022 y(regular)15 b(segmen)o(ts.)20 b(The)15 b(Lin)o(ux)i(GDT)d(con)o(tains)h
(just)g(t)o(w)o(o)f(normal)h(segmen)o(t)g(en)o(tries:)218 1145
y FG(\017)23 b FH(GDT[0])13 b(is)j(the)f(n)o(ull)i(descriptor.)218
1245 y FG(\017)23 b FH(GDT[1])13 b(is)j(the)f(k)o(ernel)h(co)q(de)g(segmen)o
(t)e(descriptor.)218 1346 y FG(\017)23 b FH(GDT[2])13 b(is)j(the)f(k)o(ernel)
h(data/stac)o(k)d(segmen)o(t)i(descriptor.)150 1468 y(The)g(rest)g(of)g(the)g
(GDT)g(is)g(\014lled)i(with)f(TSS)f(and)h(LDT)f(system)g(descriptors:)218
1591 y FG(\017)23 b FH(GDT[3])13 b(???)218 1691 y FG(\017)23
b FH(GDT[4])13 b(=)i(TSS0,)g(GDT[5])f(=)h(LDT0,)218 1792 y
FG(\017)23 b FH(GDT[6])13 b(=)i(TSS1,)g(GDT[7])f(=)h(LDT1)218
1893 y FG(\017)23 b FA(:)8 b(:)g(:)d FH(etc)15 b FA(:)8 b(:)g(:)150
2015 y FC(Note)18 b(LDT[n])h(!=)e(LDTn)218 2137 y FG(\017)23
b FH(LDT[n])14 b(=)i(the)f(n)o(th)g(descriptor)h(in)g(the)f(LDT)g(of)g(the)g
(curren)o(t)g(task.)218 2238 y FG(\017)23 b FH(LDTn)15 b(=)h(a)e(descriptor)i
(in)g(the)f(GDT)g(for)f(the)i(LDT)f(of)f(the)i(n)o(th)f(task.)221
2361 y(A)o(t)h(presen)o(t)g(the)h(GDT)f(has)g(a)g(total)g(of)h(256)e(en)o
(tries)i(or)f(ro)q(om)g(for)g(as)g(man)o(y)h(as)f(126)f(tasks.)24
b(The)150 2425 y(k)o(ernel)19 b(segmen)o(ts)f(ha)o(v)o(e)g(base)g(0xc0000000)
f(whic)o(h)i(is)g(where)f(the)h(k)o(ernel)g(liv)o(es)h(in)f(the)f(linear)i
(view.)150 2489 y(Before)g(a)g(segmen)o(t)g(can)h(b)q(e)g(used,)h(the)e(con)o
(ten)o(ts)g(of)g(the)g(descriptor)h(for)f(that)g(segmen)o(t)f(m)o(ust)h(b)q
(e)150 2554 y(loaded)c(in)o(to)f(the)g(segmen)o(t)g(register.)20
b(The)15 b(386)g(has)g(a)g(complex)h(set)e(of)h(criteria)h(regarding)f
(access)h(to)p eop
%%Page: 100 109
100 108 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(100)150 88 y(segmen)o(ts)14
b(so)g(y)o(ou)g(can't)g(simply)i(load)f(a)f(descriptor)h(in)o(to)g(a)f
(segmen)o(t)g(register.)20 b(Also)15 b(these)f(segmen)o(t)150
153 y(registers)i(ha)o(v)o(e)g(programmer)f(in)o(visible)k(p)q(ortions.)24
b(The)16 b(visible)j(p)q(ortion)d(is)h(what)f(is)h(usually)g(called)150
217 y(a)e(segmen)o(t)g(register:)k(cs,)c(ds,)g(es,)g(fs,)g(gs,)f(and)i(ss.)
221 305 y(The)g(programmer)f(loads)h(one)g(of)f(these)i(registers)f(with)g(a)
g(16-bit)g(v)m(alue)h(called)g(a)f(selector.)23 b(The)150 369
y(selector)c(uniquely)h(iden)o(ti\014es)g(a)e(segmen)o(t)g(descriptor)h(in)g
(one)f(of)g(the)g(tables.)30 b(Access)19 b(is)f(v)m(alidated)150
434 y(and)d(the)h(corresp)q(onding)g(descriptor)f(loaded)h(b)o(y)g(the)f
(hardw)o(are.)221 522 y(Curren)o(tly)21 b FE(Linux)g FH(largely)h(ignores)g
(the)g(\(o)o(v)o(erly?\))38 b(complex)23 b(segmen)o(t)e(lev)o(el)i
(protection)e(af-)150 586 y(forded)16 b(b)o(y)g(the)g(386.)21
b(It)16 b(is)h(biased)g(to)o(w)o(ards)d(the)i(paging)g(hardw)o(are)f(and)i
(the)f(asso)q(ciated)g(page)g(lev)o(el)150 650 y(protection.)k(The)15
b(segmen)o(t)g(lev)o(el)i(rules)f(that)e(apply)i(to)f(user)g(pro)q(cesses)h
(are)206 775 y(1.)22 b(A)15 b(pro)q(cess)g(cannot)g(directly)i(access)e(the)g
(k)o(ernel)h(data)f(or)g(co)q(de)g(segmen)o(ts)206 877 y(2.)22
b(There)17 b(is)g(alw)o(a)o(ys)f(limit)j(c)o(hec)o(king)f(but)f(giv)o(en)g
(that)f(ev)o(ery)h(user)g(segmen)o(t)g(go)q(es)f(from)h(0x00)f(to)264
942 y(0xc0000000)j(it)i(is)h(unlik)o(ely)h(to)e(apply)l(.)39
b FC([This)25 b(has)g(c)o(hanged,)i(and)e(needs)e(up)q(dating,)264
1006 y(please.])150 1159 y Fp(4.9.3)55 b(Selectors)17 b(in)i(the)f(80386)150
1276 y FH(A)13 b(segmen)o(t)f(selector)h(is)g(loaded)g(in)o(to)f(a)h(segmen)o
(t)f(register)g(\(cs,)h(ds,)g(etc.\))18 b(to)12 b(select)h(one)g(of)f(the)h
(regular)150 1341 y(segmen)o(ts)i(in)h(the)f(system)g(as)g(the)g(one)g
(addressed)h(via)f(that)g(segmen)o(t)g(register.)150 1429 y(Segmen)o(t)g
(selector)h(F)l(ormat:)p 150 1443 852 2 v 149 1508 2 65 v 175
1488 a(15)480 b(3)p 747 1508 V 49 w(2)15 b(1)p 858 1508 V 85
w(0)p 1001 1508 V 150 1509 852 2 v 149 1574 2 65 v 395 1554
a(index)p 747 1574 V 278 w(TI)p 858 1574 V 56 w(RPL)p 1001
1574 V 150 1575 852 2 v 150 1684 a FC(TI)23 b FH(T)l(able)16
b(indicator:)264 1749 y(0)f(means)g(selector)g(indexes)i(in)o(to)e(GDT)264
1813 y(1)g(means)g(selector)g(indexes)i(in)o(to)e(LDT)150 1915
y FC(RPL)23 b FH(Priv)o(elege)16 b(lev)o(el.)22 b FE(Linux)14
b FH(uses)i(only)f(t)o(w)o(o)f(priv)o(elege)j(lev)o(els.)264
1979 y(0)e(means)g(k)o(ernel)264 2043 y(3)g(means)g(user)150
2169 y FC(Examples:)150 2294 y(Kernel)j(co)q(de)h(segmen)o(t)264
2358 y FH(TI=0,)c(index=1,)h(RPL=0,)g(therefore)e(selector)i(=)g(0x08)e
(\(GDT[1]\))150 2460 y FC(User)k(data)g(segmen)o(t)264 2524
y FH(TI=1,)d(index=2,)h(RPL=3,)g(therefore)e(selector)i(=)g(0x17)e
(\(LDT[2]\))p eop
%%Page: 101 110
101 109 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(101)150 88 y(Selectors)16
b(used)g(in)g FE(Linux)p FH(:)p 150 94 1258 2 v 149 159 2 65
v 175 139 a FC(TI)p 255 159 V 50 w(index)p 429 159 V 50 w(RPL)p
585 159 V 50 w(selector)p 809 159 V 51 w(segmen)o(t)p 1206
159 V 1407 159 V 150 160 1258 2 v 149 225 2 65 v 192 205 a
FH(0)p 255 225 V 66 w(1)p 429 225 V 151 w(0)p 585 225 V 133
w(0x08)p 809 225 V 131 w(k)o(ernel)g(co)q(de)p 1206 225 V 173
w(GDT[1])p 1407 225 V 150 226 1258 2 v 149 291 2 65 v 192 271
a(0)p 255 291 V 66 w(2)p 429 291 V 151 w(0)p 585 291 V 133
w(0x10)p 809 291 V 131 w(k)o(ernel)g(data/stac)o(k)p 1206 291
V 48 w(GDT[2])p 1407 291 V 150 292 1258 2 v 149 357 2 65 v
192 337 a(0)p 255 357 V 66 w(3)p 429 357 V 151 w(0)p 585 357
V 133 w(???)p 809 357 V 161 w(???)p 1206 357 V 333 w(GDT[3])p
1407 357 V 150 358 1258 2 v 149 423 2 65 v 192 403 a(1)p 255
423 V 66 w(1)p 429 423 V 151 w(3)p 585 423 V 133 w(0x0F)p 809
423 V 124 w(user)f(co)q(de)p 1206 423 V 211 w(LDT[1])p 1407
423 V 150 424 1258 2 v 149 489 2 65 v 192 469 a(1)p 255 489
V 66 w(2)p 429 489 V 151 w(3)p 585 489 V 133 w(0x17)p 809 489
V 131 w(user)g(data/stac)o(k)p 1206 489 V 86 w(LDT[2])p 1407
489 V 150 490 1258 2 v 150 538 a(Selectors)h(for)f(system)f(segmen)o(ts)h
(are)g(not)g(to)g(b)q(e)h(loaded)g(directly)g(in)o(to)g(segmen)o(t)f
(registers.)20 b(Instead)150 615 y(one)15 b(m)o(ust)g(load)g(the)h(TR)f(or)g
(LDTR.)150 728 y(On)h(en)o(try)f(in)o(to)g(syscall:)218 853
y FG(\017)23 b FH(ds)15 b(and)g(es)h(are)f(set)f(to)h(the)g(k)o(ernel)h(data)
f(segmen)o(t)g(\(0x10\))218 955 y FG(\017)23 b FH(fs)c(is)h(set)f(to)g(the)g
(user)h(data)e(segmen)o(t)h(\(0x17\))f(and)i(is)g(used)g(to)f(access)g(data)g
(p)q(oin)o(ted)h(to)f(b)o(y)264 1019 y(argumen)o(ts)14 b(to)h(the)g(system)g
(call.)218 1121 y FG(\017)23 b FH(The)14 b(stac)o(k)f(segmen)o(t)h(and)g(p)q
(oin)o(ter)g(are)g(automatically)h(set)e(to)h(ss0)f(and)i(esp0)f(b)o(y)g(the)
g(in)o(terrupt)264 1185 y(and)h(the)g(old)h(v)m(alues)g(restored)f(when)h
(the)f(syscall)h(returns.)150 1339 y Fp(4.9.4)55 b(Segmen)n(t)17
b(descriptors)150 1456 y FH(There)k(is)h(a)e(segmen)o(t)h(descriptor)g(used)g
(to)g(describ)q(e)h(eac)o(h)f(segmen)o(t)g(in)h(the)f(system.)36
b(There)21 b(are)150 1520 y(regular)15 b(descriptors)g(and)f(system)h
(descriptors.)20 b(Here's)14 b(a)g(descriptor)h(in)h(all)f(its)g(glory)l(.)20
b(The)15 b(strange)150 1585 y(format)f(is)i(essen)o(tally)g(to)e(main)o(tain)
i(compatibilit)o(y)h(with)e(the)g(286.)k(Note)c(that)g(it)g(tak)o(es)g(8)g(b)
o(ytes.)p 150 1599 1778 2 v 149 1656 2 57 v 175 1639 a Fj(63{54)p
303 1656 V 48 w(55)p 394 1656 V 50 w(54)p 485 1656 V 49 w(53)p
577 1656 V 49 w(52)p 668 1656 V 50 w(51{48)p 822 1656 V 48
w(47)p 913 1656 V 72 w(46)p 1049 1656 V 71 w(45)p 1140 1656
V 57 w(44{40)p 1307 1656 V 129 w(39{16)p 1609 1656 V 215 w(15{0)p
1926 1656 V 150 1658 1778 2 v 149 1715 2 57 v 184 1698 a(Base)p
303 1715 V 65 w(G)p 394 1715 V 59 w(D)p 485 1715 V 60 w(R)p
577 1715 V 60 w(U)p 668 1715 V 57 w(Limit)p 822 1715 V 56 w(P)p
913 1715 V 57 w(DPL)p 1049 1715 V 59 w(S)p 1140 1715 V 59 w(TYPE)p
1307 1715 V 50 w(Segmen)o(t)e(Base)p 1609 1715 V 51 w(Segmen)o(t)g(Limit)p
1926 1715 V 149 1771 V 175 1754 a(31{24)p 303 1771 V 394 1771
V 485 1771 V 577 1771 V 668 1771 V 414 w(19{16)p 822 1771 V
913 1771 V 1049 1771 V 1140 1771 V 1307 1771 V 619 w(23{0)p
1609 1771 V 225 w(15{0)p 1926 1771 V 150 1773 1778 2 v 150
1870 a FC(Explanation:)253 1928 y(R)50 b FH(reserv)o(ed)15
b(\(0\))185 1992 y FC(DPL)50 b FH(0)15 b(means)g(k)o(ernel,)g(3)g(means)g
(user)251 2056 y FC(G)50 b FH(1)15 b(means)g(4K)g(gran)o(ularit)o(y)g(\(Alw)o
(a)o(ys)f(set)h(in)h FE(Linux)p FH(\))252 2121 y FC(D)50 b
FH(1)15 b(means)g(default)g(op)q(erand)h(size)g(32bits)252
2185 y FC(U)50 b FH(programmer)14 b(de\014nable)256 2249 y
FC(P)50 b FH(1)15 b(means)g(presen)o(t)g(in)h(ph)o(ysical)g(memory)263
2314 y FC(S)50 b FH(0)15 b(means)g(system)f(segmen)o(t,)h(1)g(means)g(normal)
g(co)q(de)h(or)e(data)h(segmen)o(t.)175 2378 y FC(T)o(yp)q(e)50
b FH(There)15 b(are)g(man)o(y)g(p)q(ossibilities.)23 b(In)o(terpreted)15
b(di\013eren)o(tly)j(for)c(system)h(and)g(normal)g(descriptors.)150
2482 y FC(Lin)o(ux)j(system)e(descriptors:)150 2546 y FH(TSS:)f(P=1,)g
(DPL=0,)g(S=0,)g(t)o(yp)q(e=9,)g(limit)i(=)e(231)f(ro)q(om)h(for)f(1)h
FD(tss)p 1384 2546 15 2 v 17 w(struct)p FH(.)p eop
%%Page: 102 111
102 110 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(102)150 88 y(LDT:)15 b(P=1,)g(DPL=0,)f(S=0,)
i(t)o(yp)q(e=2,)f(limit)h(=)g(23)e(ro)q(om)h(for)f(3)h(segmen)o(t)g
(descriptors.)150 153 y(The)g(base)h(is)f(set)g(during)h FD(fork\(\))p
FH(.)j(There)d(is)g(a)e(TSS)i(and)f(LDT)g(for)g(eac)o(h)g(task.)150
265 y FC(Lin)o(ux)j(regular)h(k)o(ernel)f(descriptors:)k FH(\(head.S\))150
329 y(co)q(de:)e(P=1,)15 b(DPL=0,)g(S=1,)g(G=1,)g(D=1,)f(t)o(yp)q(e=a,)h
(base=0xc0000000,)f(limit=0x3\013\013)150 393 y(data:)19 b(P=1,)c(DPL=0,)g
(S=1,)g(G=1,)g(D=1,)f(t)o(yp)q(e=2,)h(base=0xc0000000,)e(limit=0x3\013\013)
150 570 y FC(The)18 b(LDT)g(for)g(task[0])h(con)o(tains:)i
FH(\(sc)o(hed.h\))150 634 y(co)q(de:)f(P=1,)15 b(DPL=3,)g(S=1,)g(G=1,)g(D=1,)
f(t)o(yp)q(e=a,)h(base=0xc0000000,)f(limit=0x9f)150 699 y(data:)19
b(P=1,)c(DPL=3,)g(S=1,)g(G=1,)g(D=1,)f(t)o(yp)q(e=2,)h(base=0xc0000000,)e
(limit=0x9f)150 875 y FC(The)18 b(default)g(LDT)h(for)f(the)g(remaining)h
(tasks:)h FH(\()p FD(exec\(\))p FH(\))150 939 y(co)q(de:)g(P=1,)15
b(DPL=3,)g(S=1,)g(G=1,)g(D=1,)f(t)o(yp)q(e=a,)h(base=0,)g(limit=)i
(0xb\013\013)150 1004 y(data:)i(P=1,)c(DPL=3,)g(S=1,)g(G=1,)g(D=1,)f(t)o(yp)q
(e=2,)h(base=0,)g(limit=)i(0xb\013\013)221 1180 y(The)e(size)h(of)f(the)g(k)o
(ernel)h(segmen)o(ts)e(is)i(0x40000)d(pages)i(\(4KB)g(pages)g(since)i(G=1)e
(=)g(1)g(Gigab)o(yte.)150 1244 y(The)j(t)o(yp)q(e)g(implies)i(that)e(the)g(p)
q(ermissions)h(on)f(the)g(co)q(de)h(segmen)o(t)e(is)i(read-exec)f(and)h(on)f
(the)g(data)150 1309 y(segmen)o(t)d(is)g(read-write.)150 1421
y FC(Registers)i(asso)q(ciated)g(with)f(segmen)o(tation.)21
b FH(F)l(ormat)13 b(of)g(segmen)o(t)g(register:)19 b(\(Only)c(the)f(selec-)
150 1485 y(tor)g(is)i(programmer)e(visible\))p 150 1502 1180
2 v 149 1567 2 65 v 192 1547 a(16-bit)p 348 1567 V 191 w(32-bit)p
765 1567 V 252 w(32-bit)p 1084 1567 V 1329 1567 V 150 1568
1180 2 v 149 1633 2 65 v 175 1613 a(selector)p 348 1633 V 50
w(ph)o(ysical)j(base)e(addr)p 765 1633 V 50 w(segmen)o(t)f(limit)p
1084 1633 V 52 w(attributes)p 1329 1633 V 150 1634 1180 2 v
150 1682 a(The)k(in)o(visible)j(p)q(ortion)d(of)f(the)h(segmen)o(t)f
(register)h(is)h(more)e(con)o(v)o(enien)o(tly)i(view)o(ed)g(in)f(terms)f(of)h
(the)150 1759 y(format)f(used)i(in)g(the)g(descriptor)f(table)h(en)o(tries)g
(that)f(the)g(programmer)f(sets)h(up.)30 b(The)19 b(descriptor)150
1823 y(tables)f(ha)o(v)o(e)g(registers)g(asso)q(ciated)g(with)g(them)g(that)f
(are)h(used)h(to)e(lo)q(cate)h(them)g(in)h(memory)l(.)28 b(The)150
1887 y(GDTR)19 b(\(and)f(IDTR\))h(are)g(initialized)j(at)c(startup)h(once)g
(the)g(tables)g(are)g(de\014ned.)32 b(The)19 b(LDTR)g(is)150
1952 y(loaded)d(on)f(eac)o(h)g(task)g(switc)o(h.)150 2064 y
FC(F)l(ormat)j(of)f(GDTR)i(\(and)f(IDTR\):)p 150 2081 642 2
v 149 2145 2 65 v 275 2126 a FH(32-bits)p 533 2145 V 187 w(16-bits)p
790 2145 V 150 2147 642 2 v 149 2211 2 65 v 175 2192 a(Linear)e(base)f(addr)p
533 2211 V 50 w(table)h(limit)p 790 2211 V 150 2213 642 2 v
221 2296 a(The)21 b(TR)g(and)f(LDTR)i(are)e(loaded)i(from)e(the)g(GDT)g(and)h
(so)g(ha)o(v)o(e)f(the)h(format)e(of)i(the)f(other)150 2361
y(segmen)o(t)11 b(registers.)18 b(The)12 b(task)f(register)g(\(TR\))g(con)o
(tains)g(the)h(descriptor)g(for)f(the)g(curren)o(tly)h(executing)150
2425 y(task's)j(TSS.)h(The)g(execution)h(of)f(a)g(jump)g(to)f(a)h(TSS)g
(selector)h(causes)f(the)g(state)f(to)h(b)q(e)g(sa)o(v)o(ed)g(in)h(the)150
2489 y(old)f(TSS,)g(the)g(TR)g(is)g(loaded)g(with)g(the)g(new)g(descriptor)g
(and)g(the)g(registers)f(are)h(restored)f(from)g(the)150 2554
y(new)i(TSS.)g(This)h(is)f(the)g(pro)q(cess)g(used)h(b)o(y)f(sc)o(hedule)h
(to)f(switc)o(h)g(to)f(v)m(arious)i(user)f(tasks.)24 b(Note)17
b(that)p eop
%%Page: 103 112
103 111 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(103)150 88 y(the)17 b(\014eld)i
FD(tss)p 406 88 15 2 v 17 w(struct.ldt)d FH(con)o(tains)h(a)g(selector)h(for)
e(the)i(LDT)f(of)g(that)f(task.)26 b(It)17 b(is)h(used)g(to)f(load)150
153 y(the)e(LDTR.)g(\(sc)o(hed.h\))150 306 y Fp(4.9.5)55 b(Macros)19
b(used)g(in)f(setting)g(up)h(descriptors)150 423 y FH(Some)f(assem)o(bler)g
(macros)e(are)i(de\014ned)h(in)f(sc)o(hed.h)g(and)g(system.h)f(to)g(ease)h
(access)g(and)g(setting)f(of)150 487 y(descriptors.)j(Eac)o(h)15
b(TSS)h(en)o(try)f(and)g(LDT)g(en)o(try)g(tak)o(es)f(8)h(b)o(ytes.)150
599 y FC(Manipulating)20 b(GDT)e(system)e(descriptors:)218
721 y FG(\017)p 267 721 V 40 w FD(TSS\(n\))p FH(,)p 264 786
V 278 786 a FD(LDT\(n\))e FH(These)i(pro)o(vide)g(the)f(index)h(in)o(to)g
(the)f(GDT)f(for)h(the)g(n'th)g(task.)218 886 y FG(\017)p 267
886 V 40 w FD(LDT\(n\))f FH(is)i(stored)f(in)h(the)f(the)g(ldt)h(\014eld)g
(of)f(the)g FD(tss)p 1205 886 V 17 w(struct)g FH(b)o(y)g(fork.)218
987 y FG(\017)p 267 987 V 40 w FD(set)p 356 987 V 17 w(tssldt)p
517 987 V 16 w(desc\(n,)23 b(addr,)g(limit,)g(type\))264 1051
y(ulong)g(*n)c FH(p)q(oin)o(ts)h(to)e(the)i(GDT)e(en)o(try)h(to)g(set)g
(\(see)g(fork.c\).)31 b(The)20 b(segmen)o(t)f(base)g(\(TSS)g(or)264
1116 y(LDT\))d(is)h(set)g(to)f(0xc0000000)f(+)i FD(addr)p FH(.)24
b(Sp)q(eci\014c)19 b(instances)f(of)e(the)h(ab)q(o)o(v)o(e)g(are,)f(where)h
(lt)o(yp)q(e)264 1180 y(refers)e(to)f(the)h(b)o(yte)g(con)o(taining)h(P)l(,)f
(DPL,)g(S)h(and)f(t)o(yp)q(e:)264 1292 y FD(set)p 339 1292
V 16 w(ldt)p 427 1292 V 17 w(desc\(n,)23 b(addr\))15 b FH(lt)o(yp)q(e)g(=)h
(0x82)564 1356 y(P=1,)i(DPL=0,)h(S=0,)g(t)o(yp)q(e=2)f(means)g(LDT)g(en)o
(try)l(.)29 b(limit)20 b(=)e(23)g(=>)h(ro)q(om)564 1421 y(for)14
b(3)h(segmen)o(t)g(descriptors.)264 1524 y FD(set)p 339 1524
V 16 w(tss)p 427 1524 V 17 w(desc\(n,)23 b(addr\))15 b FH(lt)o(yp)q(e)g(=)h
(0x89)564 1589 y(P=1,)e(DPL=0,)h(S=0,)f(t)o(yp)q(e)h(=)g(9,)f(means)h(a)o(v)m
(ailable)h(80386)e(TSS)h(limit)h(=)f(231)564 1653 y(ro)q(om)f(for)h(1)g(tss)p
846 1653 14 2 v 16 w(struct.)218 1765 y FG(\017)23 b FD(load)p
363 1765 15 2 v 16 w(TR\(n\))p FH(,)264 1829 y FD(load)p 363
1829 V 16 w(ldt\(n\))12 b FH(load)h(descriptors)f(for)g(task)g(n)o(um)o(b)q
(er)h(n)g(in)o(to)f(the)h(task)e(register)i(and)f(ldt)h(register.)218
1930 y FG(\017)23 b FD(ulong)g(get)p 482 1930 V 17 w(base)g(\(struct)g(desc)p
905 1930 V 16 w(struct)g(ldt\))15 b FH(gets)g(the)g(base)g(from)g(a)g
(descriptor.)218 2030 y FG(\017)23 b FD(ulong)g(get)p 482 2030
V 17 w(limit)g(\(ulong)g(segment\))d FH(gets)i(the)g(limit)h(\(size\))f(from)
f(a)h(segmen)o(t)f(selector.)264 2095 y(Returns)15 b(the)h(size)g(of)f(the)g
(segmen)o(t)g(in)h(b)o(ytes.)218 2195 y FG(\017)23 b FD(set)p
339 2195 V 16 w(base\(struct)g(desc)p 738 2195 V 16 w(struct)g(ldt,)h(ulong)f
(base\))p FH(,)264 2260 y FD(set)p 339 2260 V 16 w(limit\(struct)g(desc)p
762 2260 V 16 w(struct)g(ldt,)h(ulong)f(limit\))264 2324 y
FH(Will)17 b(set)e(the)h(base)g(and)f(limit)j(for)d(descriptors)h(\(4K)f
(gran)o(ular)g(segmen)o(ts\).)20 b(The)c(limit)h(here)f(is)264
2389 y(actually)g(the)f(size)h(in)g(b)o(ytes)f(of)g(the)g(segmen)o(t.)218
2489 y FG(\017)p 267 2489 V 40 w FD(set)p 356 2489 V 17 w(seg)p
445 2489 V 16 w(desc\(gate)p 677 2489 V 16 w(addr,)23 b(type,)h(dpl,)f(base,)
g(limit\))264 2554 y FH(Default)15 b(v)m(alues)h(0x00408000)d(=>)j(D=1,)e
(P=1,)h(G=0)p eop
%%Page: 104 113
104 112 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(104)264 88 y(Presen)o(t,)14
b(op)q(eration)i(size)g(is)f(32)g(bit)h(and)f(max)g(size)h(is)g(1M.)264
153 y FD(gate)p 363 153 15 2 v 16 w(addr)f FH(m)o(ust)g(b)q(e)g(a)g
FD(\(ulong)23 b(*\))p eop
%%Page: 105 114
105 113 bop 150 438 a Fu(App)s(endix)34 b(A)150 686 y Fw(Annotated)40
b(Bibli)q(ograph)m(y)150 940 y FH(This)21 b(bibliograph)o(y)h(co)o(v)o(ers)e
(b)q(o)q(oks)g(on)g(op)q(erating)h(system)f(theory)g(as)g(w)o(ell)h(as)f
(di\013eren)o(t)i(kinds)f(of)150 1004 y(programming)13 b(in)h(a)f
FE(un)p FA(?)p FE(x)g FH(en)o(vironmen)o(t.)19 b(The)14 b(price)g(mark)o(ed)f
(ma)o(y)g(or)g(ma)o(y)g(not)g(b)q(e)h(an)f(exact)g(price,)150
1069 y(but)j(should)h(b)q(e)f(close)h(enough)f(for)f(go)o(v)o(ernmen)o(t)g(w)
o(ork.)20 b FC([If)f(y)o(ou)e(ha)o(v)o(e)g(a)i(b)q(o)q(ok)g(that)g(y)o(ou)e
(think)150 1133 y(should)g(go)g(in)g(the)g(bibliograph)o(y)l(,)i(please)e
(write)g(a)g(short)h(review)e(of)h(it)g(and)g(send)g(all)h(the)150
1198 y(necessary)h(information)j(\(title,)g(author,)f(publisher,)h(ISBN,)d
(and)h(appro)o(ximate)g(price\))150 1262 y(and)e(the)g(review)f(to)h
FD(johnsonm@sunsite.unc.edu)p FC(])150 1437 y(Title:)238 b
FH(The)15 b(Design)h(of)f(the)g(UNIX)h(Op)q(erating)g(System)150
1513 y FC(Author:)182 b FH(Maurice)16 b(J.)f(Bac)o(h)150 1589
y FC(Publisher:)129 b FH(Pren)o(tice)16 b(Hall,)g(1986)150
1665 y FC(ISBN:)219 b FH(0-13-201799-7)150 1741 y FC(Appr.)19
b(Price:)77 b FH($65.00)264 1893 y(This)18 b(is)h(one)f(of)f(the)i(b)q(o)q
(oks)f(that)f(Lin)o(us)i(used)g(to)e(design)i FE(Linux)p FH(.)28
b(It)18 b(is)g(a)g(description)264 1957 y(of)e(the)g(data)g(structures)g
(used)h(in)g(the)g(System)f(V)g(k)o(ernel.)25 b(Man)o(y)15
b(of)h(the)h(names)f(of)g(the)264 2022 y(imp)q(ortan)o(t)g(functions)h(in)g
(the)g FE(Linux)e FH(source)i(come)f(from)g(this)h(b)q(o)q(ok,)f(and)h(are)f
(named)264 2086 y(after)g(the)h(algorithms)f(presen)o(ted)i(here.)25
b(F)l(or)16 b(instance,)h(if)h(y)o(ou)e(can't)g(quite)i(\014gure)f(out)264
2150 y(what)g(exactly)h(getblk\(\),)g(brelse\(\),)h(bread\(\),)e(breada\(\),)
h(and)g(b)o(write\(\))f(are,)h(c)o(hapter)g(3)264 2215 y(explains)e(v)o(ery)f
(w)o(ell.)332 2279 y(While)j(most)d(of)i(the)f(algorithms)h(are)f(similar)i
(or)e(the)g(same,)g(a)h(few)f(di\013erences)j(are)264 2344
y(w)o(orth)14 b(noting:)318 2425 y FG(\017)23 b FH(The)12 b
FE(Linux)g FH(bu\013er)h(cac)o(he)f(is)h(dynamically)h(resized,)g(so)e(the)g
(algorithm)g(for)g(dealing)364 2489 y(with)k(getting)f(new)i(bu\013ers)f(is)h
(a)e(bit)h(di\013eren)o(t.)23 b(Therefore)16 b(the)g(ab)q(o)o(v)o(e)f
(referenced)364 2554 y(explanation)h(of)f(getblk\(\))g(is)g(a)g(little)i
(di\013eren)o(t)f(than)f(the)h(getblk\(\))f(in)h FE(Linux)p
FH(.)1016 2678 y(105)p eop
%%Page: 106 115
106 114 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(106)318 88 y FG(\017)23 b
FE(Linux)e FH(do)q(es)h(not)g(curren)o(tly)g(use)h(streams,)f(and)g(if/when)h
(streams)e(are)h(imple-)364 153 y(men)o(ted)15 b(for)g FE(Linux)p
FH(,)f(they)h(are)g(lik)o(ely)i(to)d(ha)o(v)o(e)h(somewhat)g(di\013eren)o(t)h
(seman)o(tics.)318 231 y FG(\017)23 b FH(The)12 b(seman)o(tics)g(and)h
(calling)h(structure)e(for)f(device)j(driv)o(ers)f(is)f(di\013eren)o(t.)21
b(The)12 b(con-)364 296 y(cept)h(is)i(similar,)f(and)g(the)g(c)o(hapter)f(on)
h(device)h(driv)o(ers)e(is)i(still)g(w)o(orth)d(reading,)i(but)364
360 y(for)f(details)i(on)e(the)h(device)h(driv)o(er)g(structures,)e(the)h
FB(The)k FE(Linux)13 b FB(Kernel)h(Hackers')364 425 y(Guide)19
b FH(is)d(the)f(prop)q(er)g(reference.)318 503 y FG(\017)23
b FH(The)15 b(memory)g(managemen)o(t)f(algorithms)h(are)g(somewhat)g
(di\013eren)o(t.)264 585 y(There)g(are)f(other)h(small)g(di\013erences)i(as)e
(w)o(ell,)g(but)g(a)f(go)q(o)q(d)h(understanding)h(of)f(this)g(text)264
650 y(will)h(help)h(y)o(ou)e(understand)h(the)f FE(Linux)f
FH(source.)150 826 y FC(Title:)238 b FH(Adv)m(anced)17 b(Programming)d(in)i
(the)f(UNIX)h(En)o(vironmen)o(t)150 902 y FC(Author:)182 b
FH(W.)14 b(Ric)o(hard)j(Stev)o(ens)150 978 y FC(Publisher:)129
b FH(Addison)16 b(W)l(esley)l(,)g(1992)150 1054 y FC(ISBN:)219
b FH(0-201-56317-7)150 1130 y FC(Appr.)19 b(Price:)77 b FH($50.00)264
1283 y(This)16 b(excellen)o(t)h(tome)d(co)o(v)o(ers)h(the)g(stu\013)h(y)o(ou)
f FB(r)n(e)n(al)r(ly)g FH(ha)o(v)o(e)g(to)f(kno)o(w)h(to)g(write)g
FB(r)n(e)n(al)g FE(un)p FA(?)p FE(x)264 1348 y FH(programs.)j(It)c(includes)j
(a)c(discussion)j(of)e(the)g(v)m(arious)h(standards)e(for)h
FE(un)p FA(?)p FE(x)f FH(implemen-)264 1412 y(tations,)i(including)k(POSIX,)e
(X/Op)q(en)g(XPG3,)e(and)h(FIPS,)g(and)g(concen)o(trates)g(on)g(t)o(w)o(o)264
1476 y(implemen)o(tations,)e(SVR4)f(and)g(pre-release)g(4.4)f(BSD,)g(whic)o
(h)i(it)f(refers)f(to)g(as)g(4.3+BSD.)264 1541 y(The)j(b)q(o)q(ok)g(concen)o
(trates)f(hea)o(vily)i(on)f(application)h(and)f(fairly)g(complete)h(sp)q
(eci\014cation,)264 1605 y(and)f(notes)g(whic)o(h)h(features)f(relate)g(to)g
(whic)o(h)h(standards)f(and)g(releases.)332 1669 y(The)f(c)o(hapters)f
(include:)22 b(Unix)14 b(Standardization)h(and)f(Implemen)o(tations,)g(File)h
(I/O,)264 1734 y(Files)d(and)f(Directories,)h(Standard)e(I/O)i(Library)l(,)g
(System)f(Data)f(Files)i(and)f(Information,)264 1798 y(The)20
b(En)o(vironmen)o(t)g(of)f(a)h(Unix)g(Pro)q(cess,)h(Pro)q(cess)f(Con)o(trol,)
g(Pro)q(cess)f(Relationships,)264 1862 y(Signals,)f(T)l(erminal)g(I/O,)g(Adv)
m(anced)g(I/O)g(\(non-blo)q(c)o(king,)h(streams,)d(async,)i(memory-)264
1927 y(mapp)q(ed,)f(etc.\),)g(Daemon)f(Pro)q(cesses,)h(In)o(terpro)q(cess)h
(Comm)o(unication,)f(Adv)m(anced)i(In-)264 1991 y(terpro)q(cess)d(Comm)o
(unication,)g(and)h(some)f(example)h(applications,)h(including)h(c)o(hapters)
264 2055 y(on)14 b(A)g(Database)f(Library)l(,)i(Commm)o(unicating)g(with)f(a)
g(P)o(ostScript)g(Prin)o(ter,)g(A)g(Mo)q(dem)264 2120 y(Dialer,)h(and)h(then)
f(a)g(seemingly)i(misplaced)f(\014nal)g(c)o(hapter)f(on)h(Pseudo)f(T)l
(erminals.)332 2184 y(I)10 b(ha)o(v)o(e)g(found)h(that)e(this)i(b)q(o)q(ok)f
(mak)o(es)f(it)i(p)q(ossible)h(for)d(me)h(to)g(write)g(useable)i(programs)264
2249 y(for)i FE(un)p FA(?)p FE(x)p FH(.)19 b(It)c(will)i(help)f(y)o(ou)f(ac)o
(hiev)o(e)h(POSIX)g(compliance)g(in)g(w)o(a)o(ys)e(that)h(w)o(on't)e(break)
264 2313 y(SVR4)k(or)f(BSD,)g(as)h(a)f(general)h(rule.)26 b(This)17
b(b)q(o)q(ok)g(will)h(sa)o(v)o(e)e(y)o(ou)h(ten)f(times)h(its)g(cost)f(in)264
2377 y(frustration.)150 2554 y FC(Title:)238 b FH(Adv)m(anced)17
b(80386)c(Programming)i(T)l(ec)o(hniques)p eop
%%Page: 107 116
107 115 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(107)150 88 y FC(Author:)182
b FH(James)15 b(L.)g(T)l(urley)150 164 y FC(Publisher:)129
b FH(Osb)q(orne)16 b(McGra)o(w-Hill,)f(1988)150 241 y FC(ISBN:)219
b FH(0-07-881342-5)150 317 y FC(Appr.)19 b(Price:)77 b FH($22.95)264
471 y(This)13 b(b)q(o)q(ok)h(co)o(v)o(ers)e(the)h(80386)f(quite)i(w)o(ell,)g
(without)f(touc)o(hing)h(on)f(an)o(y)g(other)f(hardw)o(are.)264
535 y(Some)h(co)q(de)h(samples)g(are)g(included.)22 b(All)14
b(ma)s(jor)f(features)g(are)g(co)o(v)o(ered,)g(as)g(are)h(man)o(y)f(of)264
599 y(the)j(concepts)i(needed.)26 b(The)17 b(c)o(hapters)f(of)g(this)i(b)q(o)
q(ok)f(are:)22 b(Basics,)c(Memory)e(Segmen-)264 664 y(tation,)j(Privilege)i
(Lev)o(els,)g(P)o(aging,)e(Multitasking,)i(Comm)o(unicating)e(Among)g(T)l
(asks,)264 728 y(Handling)d(F)l(aults)f(and)f(In)o(terrupts,)h(80286)e(Em)o
(ulation,)i(8086)e(Em)o(ulation,)i(Debugging,)264 792 y(The)k(80387)g
(Numeric)h(Pro)q(cessor)f(Extension,)i(Programming)e(for)g(P)o(erformance,)h
(Re-)264 857 y(set)f(and)h(Real)g(Mo)q(de,)g(Hardw)o(are,)g(and)f(a)g(few)h
(app)q(endices,)i(including)g(tables)e(of)f(the)264 921 y(memory)14
b(managemen)o(t)h(structures)g(as)f(a)h(handy)h(reference.)332
986 y(The)e(author)g(has)g(a)g(go)q(o)q(d)g(writing)h(st)o(yle:)20
b(If)14 b(y)o(ou)g(are)g(tec)o(hnically)i(minded,)g(y)o(ou)e(will)264
1050 y(\014nd)i(y)o(ourself)f(caugh)o(t)g(up)h(just)f(reading)h(this)g(b)q(o)
q(ok.)21 b(One)16 b(strong)f(feature)g(of)g(this)h(b)q(o)q(ok)264
1114 y(for)j FE(Linux)g FH(is)h(that)f(the)h(author)f(is)h(v)o(ery)g(careful)
g(not)f(to)h(explain)h(ho)o(w)e(to)g(do)h(things)264 1179 y(under)d(DOS,)f
(nor)h(ho)o(w)f(to)g(deal)h(with)g(particular)g(hardw)o(are.)23
b(In)17 b(fact,)f(the)h(only)g(times)264 1243 y(he)g(men)o(tions)f(DOS)h(and)
g(PC-compatible)g(hardw)o(are)f(are)h(in)g(the)g(in)o(tro)q(duction,)g(where)
264 1307 y(he)e(promises)h(nev)o(er)f(to)g(men)o(tion)g(them)g(again.)150
1485 y FC(Title:)238 b FH(The)15 b(C)g(Programming)g(Language,)f(second)i
(edition)150 1561 y FC(Author:)182 b FH(Brian)16 b(W.)e(Kernighan)j(and)e
(Dennis)h(M.)f(Ritc)o(hie)150 1637 y FC(Publisher:)129 b FH(Pren)o(tice)16
b(Hall,)g(1988)150 1713 y FC(ISBN:)219 b FH(0-13-110362-8)13
b(\(pap)q(er\))i(0-13-110370-9)e(\(hard\))150 1789 y FC(Appr.)19
b(Price:)77 b FH($35.00)264 1943 y(The)18 b(C)g(programming)f(bible.)31
b(Includes)20 b(a)d(C)h(tutorial,)h FE(un)p FA(?)p FE(x)e FH(in)o(terface)h
(reference,)i(C)264 2007 y(reference,)15 b(and)h(standard)e(library)i
(reference.)332 2072 y(Y)l(ou)f(program)f(in)i(C,)f(y)o(ou)g(buy)g(this)h(b)q
(o)q(ok.)k(It's)15 b(that)f(simple.)150 2249 y FC(Title:)238
b FH(Op)q(erating)16 b(Systems:)k(Design)15 b(and)h(Implemen)o(tation)150
2325 y FC(Author:)182 b FH(Andrew)16 b(S.)f(T)l(anen)o(baum)150
2401 y FC(Publisher:)129 b FH(Pren)o(tice)16 b(Hall,)g(1987)150
2477 y FC(ISBN:)219 b FH(0-13-637406-9)150 2554 y FC(Appr.)19
b(Price:)77 b FH($50.00)p eop
%%Page: 108 117
108 116 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(108)264 88 y(This)16 b(b)q(o)q(ok,)f(while)i
(a)e(little)h(simplistic)i(in)e(sp)q(ots,)f(and)h(missing)g(some)f(imp)q
(ortan)o(t)g(ideas,)264 153 y(is)i(a)g(fairly)g(clear)g(exp)q(osition)i(of)d
(what)g(it)h(tak)o(es)g(to)f(write)h(an)f(op)q(erating)i(system.)24
b(Half)264 217 y(the)12 b(b)q(o)q(ok)h(is)g(tak)o(en)f(up)h(with)f(the)h
(source)g(co)q(de)g(to)e(a)i FE(un)p FA(?)p FE(x)e FH(clone)j(called)g
(Minix,)g(whic)o(h)f(is)264 281 y(based)i(on)g(a)f(microk)o(ernel,)i(unlik)o
(e)g FE(Linux)p FH(,)e(whic)o(h)i(sp)q(orts)f(a)f(monolithic)j(design.)j(It)
15 b(has)264 346 y(b)q(een)j(said)g(that)f(Minix)h(sho)o(ws)f(that)g(it)h(is)
f(p)q(ossible)j(to)c(to)h(write)h(a)f(microk)o(ernel-based)264
410 y FE(un)p FA(?)p FE(x)p FH(,)d(but)h(do)q(es)h(not)e(adequately)i
(explain)h FB(why)f FH(one)f(w)o(ould)h(do)f(so.)332 475 y
FE(Linux)21 b FH(w)o(as)g(originally)i(in)o(tended)g(to)e(b)q(e)i(a)e(free)h
(Minix)h(replacemen)o(t:)1633 458 y Fm(1)1686 475 y FH(In)f(fact,)264
539 y(it)d(w)o(as)f(originally)j(to)d(b)q(e)i(binary-compatible)h(with)e
(Minix-386.)32 b(Minix-386)19 b(w)o(as)f(the)264 603 y(dev)o(elopmen)o(t)23
b(en)o(vironmen)o(t)f(under)i(whic)o(h)f FE(Linux)f FH(w)o(as)f(b)q(o)q
(otstrapp)q(ed.)42 b(No)22 b(Minix)264 668 y(co)q(de)f(is)f(in)h
FE(Linux)p FH(,)g(but)f(v)o(esitiges)h(of)f(this)h(heritage)f(liv)o(e)i(on)e
(in)h(suc)o(h)g(things)f(as)g(the)264 732 y(minix)i(\014lesystem)f(in)h
FE(Linux)p FH(.)36 b(Early)21 b(in)g FE(Linux)p FH('s)f(existence,)j(Andrew)e
(T)l(anen)o(baum)264 796 y(started)16 b(a)h(\015ame)g(w)o(ar)f(with)i(Lin)o
(us)g(ab)q(out)f(OS)h(design,)g(whic)o(h)g(w)o(as)e(in)o(teresting,)i(if)g
(not)264 861 y(enligh)o(tening)p FA(:)8 b(:)g(:)332 925 y FH(Ho)o(w)o(ev)o
(er,)14 b(this)i(b)q(o)q(ok)f(migh)o(t)g(still)i(pro)o(v)o(e)e(w)o(orth)o
(while)g(for)g(those)g(who)g(w)o(an)o(t)g(a)g(basic)264 989
y(explanation)g(of)f(OS)g(concepts,)h(as)f(T)l(anen)o(baum's)g(explanations)h
(of)f(the)g(basic)h(concepts)264 1054 y(remain)e(some)g(of)g(the)g(clearer)h
(\(and)f(more)g(en)o(tertaining,)h(if)f(y)o(ou)g(lik)o(e)i(to)d(b)q(e)i(en)o
(tertained\))264 1118 y(a)o(v)m(ailable.)34 b(Unfortunately)l(,)21
b(basic)f(is)g(the)g(k)o(ey)f(w)o(ork)g(here,)i(as)e(man)o(y)g(things)h(suc)o
(h)g(as)264 1182 y(virtual)15 b(memory)g(are)g(not)g(co)o(v)o(ered)g(at)f
(all.)150 1361 y FC(Title:)238 b FH(Mo)q(dern)15 b(Op)q(erating)h(Systems)150
1437 y FC(Author:)182 b FH(Andrew)16 b(S.)f(T)l(anen)o(baum)150
1513 y FC(Publisher:)129 b FH(Pren)o(tice)16 b(Hall,)g(1992)150
1589 y FC(ISBN:)219 b FH(0-13-588187-0)150 1665 y FC(Appr.)19
b(Price:)77 b FH($51.75)264 1821 y(The)12 b(\014rst)f(half)i(of)e(this)h(b)q
(o)q(ok)g(is)h(a)e(rewrite)h(of)g(T)l(anen)o(baum's)f(earlier)i
FB(Op)n(er)n(ating)g(Systems)p FH(,)264 1885 y(but)i(this)g(b)q(o)q(ok)g(co)o
(v)o(ers)f(sev)o(eral)h(things)g(that)f(the)h(earlier)g(b)q(o)q(ok)g(missed,)
g(includin)q(g)i(suc)o(h)264 1949 y(things)d(as)f(virtual)i(memory)l(.)k
(Minix)c(is)f(not)g(included,)i(but)e(o)o(v)o(erviews)g(of)f(MS-DOS)h(and)264
2014 y(sev)o(eral)i(distributed)h(systems)f(are.)21 b(This)c(b)q(o)q(ok)f(is)
g(probably)h(more)e(useful)i(to)e(someone)264 2078 y(who)g(w)o(an)o(ts)f(to)g
(do)h(something)h(with)g(his)g(or)e(her)i(kno)o(wlege)f(than)g(T)l(anen)o
(baum's)g(earlier)264 2142 y FB(Op)n(er)n(ating)k(Systems:)29
b(Design)19 b(and)i(Implementation.)34 b FH(Some)19 b(clue)i(as)f(to)f(the)h
(reason)264 2207 y(ma)o(y)14 b(b)q(e)h(found)g(in)h(the)f(title)p
FA(:)8 b(:)g(:)21 b FH(Ho)o(w)o(ev)o(er,)14 b(what)g(DOS)h(is)g(doing)h(in)f
(a)g(b)q(o)q(ok)g(on)f FB(mo)n(dern)264 2271 y FH(op)q(erating)h(systems,)f
(man)o(y)h(ha)o(v)o(e)g(failed)h(to)f(disco)o(v)o(er.)150 2450
y FC(Title:)238 b FH(Op)q(erating)16 b(Systems)p 150 2489 720
2 v 202 2521 a Fz(1)219 2536 y Fl(Lin)o(us')e(Minix,)h(Lin)o(us)f(tells)g
(us.)p eop
%%Page: 109 118
109 117 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(109)150 88 y FC(Author:)182
b FH(William)17 b(Stallings)150 164 y FC(Publisher:)129 b FH(Macmillan,)16
b(1992)e(\(800-548-9939\))150 241 y FC(ISBN:)219 b FH(0-02-415481-4)150
317 y FC(Appr.)19 b(Price:)77 b FH($??.??)264 472 y(A)15 b(v)o(ery)f
(thorough)h(text)f(on)h(op)q(erating)g(systems,)g(this)g(b)q(o)q(ok)g(giv)o
(es)g(more)g(in-depth)i(co)o(v-)264 536 y(erage)d(of)h(the)g(topics)g(co)o(v)
o(ered)g(in)g(T)l(annebaum's)g(b)q(o)q(oks,)g(and)g(co)o(v)o(ers)f(more)h
(topics,)g(in)h(a)264 601 y(m)o(uc)o(h)c(brisk)o(er)g(st)o(yle.)19
b(This)12 b(b)q(o)q(ok)h(co)o(v)o(ers)e(all)i(the)f(ma)s(jor)e(topics)j(that)
e(y)o(ou)h(w)o(ould)g(need)h(to)264 665 y(kno)o(w)g(to)g(build)j(an)d(op)q
(erating)h(system,)f(and)h(do)q(es)g(so)f(in)i(a)e(clear)h(w)o(a)o(y)l(.)19
b(The)14 b(author)f(uses)264 729 y(examples)19 b(from)g(three)g(ma)s(jor)e
(systems,)i(comparing)g(and)h(con)o(trasting)e(them:)27 b FE(un)p
FA(?)p FE(x)p FH(,)264 794 y(OS/2,)17 b(and)h(MVS.)f(With)h(eac)o(h)g(topic)g
(co)o(v)o(ered,)f(these)h(example)h(systems)e(are)g(used)h(to)264
858 y(clarify)e(the)f(p)q(oin)o(ts)h(and)f(pro)o(vide)h(an)f(example)h(of)f
(an)g(implemen)o(tation.)332 922 y(T)l(opics)d(co)o(v)o(ered)f(in)h
FB(Op)n(er)n(ating)g(Systems)i FH(include)f(threads,)f(real-time)g(systems,)f
(m)o(ul-)264 987 y(tipro)q(cessor)16 b(sc)o(heduling,)i(distributed)g
(systems,)e(pro)q(cess)g(migration,)g(and)h(securit)o(y)l(,)g(as)264
1051 y(w)o(ell)f(as)f(the)h(standard)f(topics)h(lik)o(e)h(memory)e(managemen)
o(t)g(and)h(sc)o(heduling.)23 b(The)16 b(sec-)264 1115 y(tion)k(on)h
(distributed)h(pro)q(cessing)g(app)q(ears)e(to)g(b)q(e)i(up-to-date,)f(and)g
(I)g(found)g(it)g(v)o(ery)264 1180 y(helpful.)150 1358 y FC(Title:)238
b FH(UNIX)16 b(Net)o(w)o(ork)e(Programming)150 1434 y FC(Author:)182
b FH(W.)14 b(Ric)o(hard)j(Stev)o(ens)150 1511 y FC(Publisher:)129
b FH(Pren)o(tice)16 b(Hall,)g(1990)150 1587 y FC(ISBN:)219
b FH(0-13-949876-1)150 1663 y FC(Appr.)19 b(Price:)77 b FH($48.75)264
1818 y(This)20 b(b)q(o)q(ok)g(co)o(v)o(ers)f(sev)o(eral)g(kinds)i(of)e(net)o
(w)o(orking)h(under)g FE(un)p FA(?)p FE(x)p FH(,)g(and)g(pro)o(vides)g(v)o
(ery)264 1882 y(thorough)c(references)h(to)g(the)g(forms)f(of)g(net)o(w)o
(orking)h(that)f(it)h(do)q(es)g(not)g(co)o(v)o(er)f(directly)l(.)264
1947 y(It)e(co)o(v)o(ers)g(TCP/IP)g(and)h(XNS)g(most)f(hea)o(vily)l(,)h(and)g
(fairly)g(exhaustiv)o(ely)h(describ)q(es)g(ho)o(w)264 2011
y(all)h(the)g(calls)h(w)o(ork.)23 b(It)16 b(also)h(has)f(a)h(description)h
(and)f(sample)g(co)q(de)g(using)g(System)g(V's)264 2075 y(TLI,)f(and)h(prett)
o(y)e(complete)i(co)o(v)o(erage)f(of)g(System)g(V)g(IPC.)g(This)h(b)q(o)q(ok)
g(con)o(tains)f(a)g(lot)264 2140 y(of)f(source)h(co)q(de)g(examples)g(to)f
(get)h(y)o(ou)f(started,)f(and)i(man)o(y)f(useful)i(pro)q(ceedures.)23
b(One)264 2204 y(example)18 b(is)g(co)q(de)g(to)f(pro)o(vide)h(useable)h
(semaphores,)f(based)g(on)f(the)h(partially)g(brok)o(en)264
2268 y(implemen)o(tation)e(that)f(System)g(V)g(pro)o(vides.)150
2447 y FC(Title:)238 b FH(Programming)14 b(in)i(the)g(UNIX)f(en)o(vironmen)o
(t)150 2523 y FC(Author:)182 b FH(Brian)16 b(W.)e(Kernighan)j(and)e(Rob)q
(ert)h(Pik)o(e)p eop
%%Page: 110 119
110 118 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(110)150 88 y FC(Publisher:)129
b FH(Pren)o(tice)16 b(Hall,)g(1984)150 164 y FC(ISBN:)219 b
FH(0-13-937699)13 b(\(hardco)o(v)o(er\))h(0-13-937681-X)f(\(pap)q(erbac)o
(k\))150 241 y FC(Appr.)19 b(Price:)77 b FH($??.??)332 396
y FB(no)16 b(abstr)n(act)150 574 y FC(Title:)238 b FH(W)l(riting)16
b(UNIX)g(Device)g(Driv)o(ers)150 650 y FC(Author:)182 b FH(George)14
b(P)o(a)s(jari)150 726 y FC(Publisher:)129 b FH(Addison)16
b(W)l(esley)l(,)g(1992)150 803 y FC(ISBN:)219 b FH(0-201-52374-4)150
879 y FC(Appr.)19 b(Price:)77 b FH($32.95)332 1034 y(This)19
b(b)q(o)q(ok)f(is)h(written)g(b)o(y)f(the)g(Presiden)o(t)h(and)g(founder)g
(of)e(Driv)o(er)i(Design)f(Labs,)264 1098 y(a)f(compan)o(y)g(whic)o(h)i(sp)q
(ecializes)h(in)f(the)f(dev)o(elopmen)o(t)g(of)f FE(un)p FA(?)p
FE(x)g FH(device)i(driv)o(ers.)28 b(This)264 1162 y(b)q(o)q(ok)14
b(is)g(an)g(excellen)o(t)h(in)o(tro)q(duction)g(to)e(the)h(sometimes)g(w)o
(ac)o(ky)f(w)o(orld)g(of)h(device)h(driv)o(er)264 1227 y(design.)27
b(The)18 b(four)f(basic)h(t)o(yp)q(es)g(of)f(driv)o(ers)h(\(c)o(haracter,)f
(blo)q(c)o(k,)h(tt)o(y)l(,)f(STREAMS\))h(are)264 1291 y(\014rst)j(discussed)i
(brie\015y)l(.)40 b(Man)o(y)21 b(full)i(examples)f(of)g(device)h(driv)o(ers)e
(of)h(all)g(t)o(yp)q(es)g(are)264 1356 y(giv)o(en,)c(starting)g(with)g(the)g
(simplest)h(and)f(progressing)g(in)g(complexit)o(y)l(.)29 b(All)20
b(examples)264 1420 y(are)e(of)h(driv)o(ers)g(whic)o(h)h(deal)g(with)f
FE(un)p FA(?)p FE(x)g FH(on)g(PC-compatible)h(hardw)o(are.)31
b FC(Chapters)264 1484 y(include:)i FH(Character)20 b(Driv)o(ers)h(I:)g(A)g
(T)l(est)g(Data)f(Generator)g(Character)g(Driv)o(ers)h(I)q(I:)264
1549 y(An)f(A/D)g(Con)o(v)o(erter)f(Character)g(Driv)o(ers)h(I)q(I)q(I:)h(A)f
(Line)i(Prin)o(ter)e(Blo)q(c)o(k)g(Driv)o(ers)g(I:)g(A)264
1613 y(T)l(est)13 b(Data)f(Generator)h(Blo)q(c)o(k)h(Driv)o(ers)f(I)q(I:)i(A)
e(RAM)h(Disk)g(Driv)o(er)f(Blo)q(c)o(k)h(Driv)o(ers)f(I)q(I)q(I:)i(A)264
1677 y(SCSI)f(Disk)g(Driv)o(er)g(Character)e(Driv)o(ers)i(IV:)g(The)g(Ra)o(w)
f(Disk)h(Driv)o(er)g(T)l(erminal)h(Driv)o(ers)264 1742 y(I:)j(The)h(COM1)f(P)
o(ort)f(Character)g(Driv)o(ers)i(V:)f(A)g(T)l(ap)q(e)h(Driv)o(e)f(STREAMS)h
(Driv)o(ers)f(I:)264 1806 y(A)c(Lo)q(op-Bac)o(k)g(Driv)o(er)g(STREAMS)h(Driv)
o(ers)f(I)q(I:)h(The)f(COM1)g(P)o(ort)f(\(Revisited\))i(Driv)o(er)264
1870 y(Installation)h(Zen)f(and)h(the)f(Art)g(of)g(Device)h(Driv)o(er)f(W)l
(riting)332 1960 y(Although)g(man)o(y)f(of)g(the)h(calls)h(used)f(in)g(the)g
(b)q(o)q(ok)g(are)f(not)g FE(Linux)p FH(-compatible,)h(the)264
2024 y(general)g(idea)h(is)g(there,)f(and)g(man)o(y)g(of)g(the)g(ideas)h(map)
f(directly)i(in)o(to)e FE(Linux)p FH(.)150 2203 y FC(Title:)238
b FH(title)150 2279 y FC(Author:)182 b FH(author)150 2355 y
FC(Publisher:)129 b FH(pub,yr)150 2431 y FC(ISBN:)219 b FH(isbn)150
2507 y FC(Appr.)19 b(Price:)77 b FH($??.??)p eop
%%Page: 111 120
111 119 bop 150 -84 1800 3 v 150 -100 a FC(4.9.)42 b(80386)18
b(Memory)f(Mangamen)o(t)981 b FH(111)332 88 y FB(no)16 b(abstr)n(act)p
eop
%%Page: 112 121
112 120 bop 150 438 a Fu(App)s(endix)34 b(B)150 686 y Fw(The)40
b(GNU)g(General)h(Public)h(License)150 940 y FH(Prin)o(ted)13
b(b)q(elo)o(w)g(is)g(the)g(GNU)f(General)i(Public)g(License)g(\(the)f
FB(GPL)g FH(or)f FB(c)n(opyleft)p FH(\),)g(under)h(whic)o(h)h(Lin)o(ux)150
1004 y(is)h(licensed.)22 b(It)14 b(is)h(repro)q(duced)g(here)g(to)e(clear)i
(up)g(some)f(of)g(the)g(confusion)h(ab)q(out)f(Lin)o(ux's)h(cop)o(yrigh)o(t)
150 1069 y(status)e(|)h(Lin)o(ux)h(is)f FB(not)j FH(sharew)o(are,)c(and)h(it)
g(is)g FB(not)k FH(in)c(the)g(public)i(domain.)j(The)14 b(bulk)h(of)e(the)h
(Lin)o(ux)150 1133 y(k)o(ernel)f(is)g(cop)o(yrigh)o(t)534 1132
y(c)522 1133 y FG(\015)f FH(1993)g(b)o(y)g(Lin)o(us)h(T)l(orv)m(alds,)g(and)g
(other)f(soft)o(w)o(are)e(and)i(parts)g(of)g(the)g(k)o(ernel)h(are)150
1198 y(cop)o(yrigh)o(ted)h(b)o(y)g(their)g(authors.)19 b(Th)o(us,)13
b(Lin)o(ux)i FB(is)i FH(cop)o(yrigh)o(ted,)d(ho)o(w)o(ev)o(er,)f(y)o(ou)h(ma)
o(y)f(redistribute)i(it)150 1262 y(under)h(the)f(terms)g(of)g(the)g(GPL)g
(prin)o(ted)h(b)q(elo)o(w.)617 1363 y FC(GNU)i(GENERAL)h(PUBLIC)f(LICENSE)844
1427 y FH(V)l(ersion)e(2,)e(June)i(1991)150 1515 y(Cop)o(yrigh)o(t)g(\(C\))g
(1989,)f(1991)h(F)l(ree)h(Soft)o(w)o(are)e(F)l(oundation,)i(Inc.)25
b(675)16 b(Mass)g(Av)o(e,)h(Cam)o(bridge,)f(MA)150 1580 y(02139,)d(USA.)150
1644 y(Ev)o(ery)o(one)h(is)g(p)q(ermitted)h(to)f(cop)o(y)g(and)g(distribute)i
(v)o(erbatim)e(copies)h(of)f(this)g(license)i(do)q(cumen)o(t,)f(but)150
1708 y(c)o(hanging)h(it)f(is)h(not)f(allo)o(w)o(ed.)150 1882
y Fs(B.1)69 b(Pream)n(ble)150 2015 y FH(The)14 b(licenses)i(for)e(most)f
(soft)o(w)o(are)f(are)i(designed)h(to)e(tak)o(e)h(a)o(w)o(a)o(y)e(y)o(our)i
(freedom)f(to)h(share)g(and)g(c)o(hange)150 2080 y(it.)30 b(By)19
b(con)o(trast,)f(the)g(GNU)h(General)g(Public)h(License)g(is)f(in)o(tended)h
(to)e(guaran)o(tee)g(y)o(our)g(freedom)150 2144 y(to)f(share)g(and)g(c)o
(hange)g(free)h(soft)o(w)o(are{to)c(mak)o(e)j(sure)g(the)h(soft)o(w)o(are)d
(is)j(free)f(for)g(all)h(its)f(users.)26 b(This)150 2208 y(General)17
b(Public)h(License)g(applies)g(to)e(most)g(of)g(the)g(F)l(ree)h(Soft)o(w)o
(are)e(F)l(oundation's)h(soft)o(w)o(are)f(and)i(to)150 2273
y(an)o(y)10 b(other)h(program)e(whose)i(authors)f(commit)h(to)f(using)h(it.)
19 b(\(Some)10 b(other)h(F)l(ree)f(Soft)o(w)o(are)g(F)l(oundation)150
2337 y(soft)o(w)o(are)j(is)i(co)o(v)o(ered)g(b)o(y)f(the)h(GNU)f(Library)i
(General)f(Public)h(License)h(instead.\))j(Y)l(ou)14 b(can)h(apply)h(it)150
2401 y(to)f(y)o(our)f(programs,)g(to)q(o.)221 2489 y(When)k(w)o(e)g(sp)q(eak)
g(of)g(free)g(soft)o(w)o(are,)f(w)o(e)h(are)f(referring)i(to)e(freedom,)i
(not)e(price.)30 b(Our)19 b(General)150 2554 y(Public)g(Licenses)g(are)e
(designed)h(to)e(mak)o(e)h(sure)g(that)g(y)o(ou)f(ha)o(v)o(e)h(the)g(freedom)
g(to)g(distribute)h(copies)1016 2678 y(112)p eop
%%Page: 113 122
113 121 bop 150 -84 1800 3 v 150 -100 a FC(B.2.)42 b(T)l(erms)17
b(and)h(Conditions)1093 b FH(113)150 88 y(of)18 b(free)g(soft)o(w)o(are)e
(\(and)i(c)o(harge)g(for)f(this)i(service)g(if)g(y)o(ou)e(wish\),)i(that)f(y)
o(ou)f(receiv)o(e)j(source)e(co)q(de)g(or)150 153 y(can)f(get)g(it)h(if)g(y)o
(ou)f(w)o(an)o(t)f(it,)h(that)g(y)o(ou)g(can)g(c)o(hange)h(the)f(soft)o(w)o
(are)f(or)h(use)g(pieces)i(of)e(it)g(in)h(new)g(free)150 217
y(programs;)c(and)h(that)f(y)o(ou)h(kno)o(w)g(y)o(ou)g(can)g(do)g(these)h
(things.)221 305 y(T)l(o)j(protect)g(y)o(our)f(righ)o(ts,)i(w)o(e)f(need)i
(to)d(mak)o(e)h(restrictions)h(that)f(forbid)h(an)o(y)o(one)f(to)f(den)o(y)i
(y)o(ou)150 369 y(these)e(righ)o(ts)g(or)g(to)f(ask)h(y)o(ou)g(to)g
(surrender)g(the)h(righ)o(ts.)28 b(These)19 b(restrictions)f(translate)g(to)g
(certain)150 434 y(resp)q(onsibilitie)q(s)g(for)c(y)o(ou)h(if)h(y)o(ou)f
(distribute)h(copies)g(of)f(the)g(soft)o(w)o(are,)e(or)i(if)h(y)o(ou)e(mo)q
(dify)i(it.)221 522 y(F)l(or)d(example,)i(if)g(y)o(ou)e(distribute)j(copies)f
(of)f(suc)o(h)g(a)g(program,)f(whether)h(gratis)g(or)g(for)f(a)h(fee,)g(y)o
(ou)150 586 y(m)o(ust)i(giv)o(e)h(the)g(recipien)o(ts)h(all)g(the)f(righ)o
(ts)f(that)g(y)o(ou)h(ha)o(v)o(e.)24 b(Y)l(ou)17 b(m)o(ust)f(mak)o(e)g(sure)h
(that)f(they)l(,)h(to)q(o,)150 650 y(receiv)o(e)j(or)e(can)h(get)f(the)h
(source)g(co)q(de.)31 b(And)19 b(y)o(ou)g(m)o(ust)f(sho)o(w)g(them)h(these)g
(terms)f(so)h(they)f(kno)o(w)150 715 y(their)e(righ)o(ts.)221
802 y(W)l(e)d(protect)g(y)o(our)g(righ)o(ts)g(with)h(t)o(w)o(o)e(steps:)19
b(\(1\))12 b(cop)o(yrigh)o(t)i(the)f(soft)o(w)o(are,)f(and)h(\(2\))g(o\013er)
g(y)o(ou)h(this)150 867 y(license)j(whic)o(h)f(giv)o(es)g(y)o(ou)e(legal)j(p)
q(ermission)f(to)f(cop)o(y)l(,)g(distribute)h(and/or)f(mo)q(dify)g(the)h
(soft)o(w)o(are.)221 955 y(Also,)22 b(for)e(eac)o(h)g(author's)g(protection)h
(and)g(ours,)g(w)o(e)f(w)o(an)o(t)g(to)g(mak)o(e)g(certain)h(that)f(ev)o(ery)
o(one)150 1019 y(understands)c(that)f(there)g(is)h(no)g(w)o(arran)o(t)o(y)d
(for)i(this)h(free)g(soft)o(w)o(are.)j(If)d(the)f(soft)o(w)o(are)f(is)i(mo)q
(di\014ed)h(b)o(y)150 1083 y(someone)e(else)h(and)f(passed)g(on,)f(w)o(e)h(w)
o(an)o(t)f(its)h(recipien)o(ts)h(to)f(kno)o(w)f(that)g(what)g(they)h(ha)o(v)o
(e)g(is)g(not)g(the)150 1148 y(original,)g(so)f(that)g(an)o(y)g(problems)h
(in)o(tro)q(duced)h(b)o(y)e(others)h(will)h(not)e(re\015ect)g(on)h(the)f
(original)i(authors')150 1212 y(reputations.)221 1300 y(Finally)l(,)d(an)o(y)
e(free)h(program)e(is)i(threatened)g(constan)o(tly)f(b)o(y)h(soft)o(w)o(are)e
(paten)o(ts.)18 b(W)l(e)11 b(wish)h(to)f(a)o(v)o(oid)150 1364
y(the)k(danger)g(that)g(redistributors)g(of)g(a)g(free)g(program)f(will)j
(individually)i(obtain)c(paten)o(t)f(licenses,)j(in)150 1429
y(e\013ect)j(making)f(the)f(program)g(proprietary)l(.)31 b(T)l(o)19
b(prev)o(en)o(t)f(this,)i(w)o(e)e(ha)o(v)o(e)h(made)g(it)g(clear)g(that)f(an)
o(y)150 1493 y(paten)o(t)d(m)o(ust)f(b)q(e)i(licensed)i(for)c(ev)o(ery)o
(one's)h(free)g(use)h(or)e(not)h(licensed)i(at)e(all.)221 1581
y(The)g(precise)h(terms)f(and)g(conditions)i(for)d(cop)o(ying,)i
(distribution)h(and)e(mo)q(di\014cation)h(follo)o(w.)150 1758
y Fs(B.2)69 b(T)-6 b(erms)26 b(and)h(Conditions)e(for)i(Cop)n(ying,)h
(Distribution,)d(and)321 1843 y(Mo)r(di\014cation)206 1971
y FH(0.)d(This)e(License)h(applies)g(to)e(an)o(y)g(program)f(or)h(other)g(w)o
(ork)g(whic)o(h)h(con)o(tains)g(a)f(notice)h(placed)264 2036
y(b)o(y)15 b(the)g(cop)o(yrigh)o(t)g(holder)h(sa)o(ying)f(it)g(ma)o(y)f(b)q
(e)i(distributed)h(under)f(the)f(terms)f(of)h(this)h(General)264
2100 y(Public)k(License.)30 b(The)18 b(\\Program",)f(b)q(elo)o(w,)i(refers)f
(to)g(an)o(y)f(suc)o(h)i(program)e(or)g(w)o(ork,)h(and)g(a)264
2164 y(\\w)o(ork)11 b(based)i(on)f(the)h(Program")e(means)h(either)h(the)g
(Program)e(or)h(an)o(y)g(deriv)m(ativ)o(e)i(w)o(ork)d(under)264
2229 y(cop)o(yrigh)o(t)j(la)o(w:)19 b(that)13 b(is)i(to)e(sa)o(y)l(,)h(a)g(w)
o(ork)f(con)o(taining)i(the)f(Program)f(or)h(a)g(p)q(ortion)g(of)g(it,)g
(either)264 2293 y(v)o(erbatim)d(or)g(with)h(mo)q(di\014cations)h(and/or)e
(translated)g(in)o(to)h(another)f(language.)19 b(\(Hereinafter,)264
2357 y(translation)c(is)h(included)j(without)c(limitation)i(in)g(the)f(term)f
(\\mo)q(di\014cation".\))21 b(Eac)o(h)16 b(licensee)264 2422
y(is)f(addressed)h(as)f(\\y)o(ou".)264 2505 y(Activities)k(other)d(than)i
(cop)o(ying,)f(distribution)i(and)f(mo)q(di\014cation)g(are)f(not)g(co)o(v)o
(ered)g(b)o(y)h(this)p eop
%%Page: 114 123
114 122 bop 150 -84 1800 3 v 150 -100 a FC(B.2.)42 b(T)l(erms)17
b(and)h(Conditions)1093 b FH(114)264 88 y(License;)16 b(they)f(are)f(outside)
h(its)g(scop)q(e.)20 b(The)15 b(act)f(of)g(running)i(the)f(Program)e(is)i
(not)f(restricted,)264 153 y(and)19 b(the)h(output)f(from)f(the)i(Program)e
(is)h(co)o(v)o(ered)h(only)f(if)h(its)g(con)o(ten)o(ts)e(constitute)i(a)f(w)o
(ork)264 217 y(based)d(on)h(the)f(Program)f(\(indep)q(enden)o(t)k(of)d(ha)o
(ving)h(b)q(een)g(made)g(b)o(y)f(running)i(the)e(Program\).)264
281 y(Whether)f(that)f(is)i(true)f(dep)q(ends)i(on)e(what)g(the)g(Program)f
(do)q(es.)206 383 y(1.)22 b(Y)l(ou)d(ma)o(y)f(cop)o(y)h(and)g(distribute)h(v)
o(erbatim)e(copies)i(of)f(the)g(Program's)d(source)j(co)q(de)h(as)e(y)o(ou)
264 448 y(receiv)o(e)c(it,)g(in)g(an)o(y)f(medium,)h(pro)o(vided)g(that)f(y)o
(ou)g(conspicuously)i(and)f(appropriately)g(publish)264 512
y(on)g(eac)o(h)h(cop)o(y)f(an)h(appropriate)g(cop)o(yrigh)o(t)f(notice)h(and)
g(disclaimer)i(of)d(w)o(arran)o(t)o(y;)e(k)o(eep)j(in)o(tact)264
576 y(all)g(the)f(notices)h(that)f(refer)g(to)g(this)h(License)h(and)f(to)e
(the)i(absence)g(of)f(an)o(y)g(w)o(arran)o(t)o(y;)e(and)j(giv)o(e)264
641 y(an)o(y)f(other)h(recipien)o(ts)i(of)e(the)g(Program)f(a)h(cop)o(y)g(of)
f(this)i(License)h(along)e(with)h(the)f(Program.)264 724 y(Y)l(ou)f(ma)o(y)f
(c)o(harge)g(a)h(fee)g(for)f(the)h(ph)o(ysical)i(act)d(of)g(transferring)h(a)
g(cop)o(y)l(,)f(and)i(y)o(ou)e(ma)o(y)g(at)g(y)o(our)264 788
y(option)i(o\013er)g(w)o(arran)o(t)o(y)f(protection)h(in)h(exc)o(hange)f(for)
g(a)g(fee.)206 890 y(2.)22 b(Y)l(ou)13 b(ma)o(y)e(mo)q(dify)j(y)o(our)e(cop)o
(y)g(or)g(copies)i(of)e(the)h(Program)e(or)h(an)o(y)g(p)q(ortion)h(of)g(it,)g
(th)o(us)f(forming)264 954 y(a)18 b(w)o(ork)g(based)g(on)h(the)g(Program,)e
(and)i(cop)o(y)g(and)f(distribute)i(suc)o(h)f(mo)q(di\014cations)h(or)e(w)o
(ork)264 1018 y(under)12 b(the)f(terms)g(of)g(Section)h(1)f(ab)q(o)o(v)o(e,)g
(pro)o(vided)h(that)f(y)o(ou)g(also)g(meet)g(all)i(of)e(these)g(conditions:)
306 1133 y(a.)22 b(Y)l(ou)c(m)o(ust)g(cause)h(the)g(mo)q(di\014ed)g(\014les)h
(to)e(carry)g(prominen)o(t)g(notices)h(stating)g(that)e(y)o(ou)364
1197 y(c)o(hanged)e(the)g(\014les)i(and)e(the)g(date)g(of)g(an)o(y)g(c)o
(hange.)303 1278 y(b.)23 b(Y)l(ou)13 b(m)o(ust)g(cause)g(an)o(y)g(w)o(ork)f
(that)h(y)o(ou)f(distribute)j(or)d(publish,)k(that)c(in)i(whole)g(or)f(in)h
(part)364 1342 y(con)o(tains)h(or)g(is)h(deriv)o(ed)g(from)f(the)g(Program)f
(or)h(an)o(y)g(part)g(thereof,)g(to)g(b)q(e)h(licensed)h(as)e(a)364
1407 y(whole)g(at)g(no)g(c)o(harge)g(to)f(all)j(third)e(parties)h(under)g
(the)f(terms)g(of)f(this)i(License.)308 1488 y(c.)23 b(If)16
b(the)h(mo)q(di\014ed)h(program)e(normally)h(reads)f(commands)h(in)o
(teractiv)o(ely)g(when)g(run,)g(y)o(ou)364 1552 y(m)o(ust)12
b(cause)h(it,)g(when)g(started)e(running)j(for)e(suc)o(h)h(in)o(teractiv)o(e)
g(use)g(in)g(the)g(most)f(ordinary)364 1616 y(w)o(a)o(y)l(,)20
b(to)f(prin)o(t)i(or)f(displa)o(y)h(an)f(announcemen)o(t)h(including)i(an)d
(appropriate)g(cop)o(yrigh)o(t)364 1681 y(notice)15 b(and)g(a)g(notice)h
(that)e(there)h(is)g(no)g(w)o(arran)o(t)o(y)e(\(or)h(else,)i(sa)o(ying)f
(that)f(y)o(ou)h(pro)o(vide)g(a)364 1745 y(w)o(arran)o(t)o(y\))f(and)i(that)g
(users)g(ma)o(y)g(redistribute)h(the)f(program)g(under)h(these)f(conditions,)
364 1809 y(and)22 b(telling)h(the)f(user)g(ho)o(w)g(to)f(view)h(a)g(cop)o(y)f
(of)h(this)g(License.)42 b(\(Exception:)34 b(if)22 b(the)364
1874 y(Program)12 b(itself)j(is)f(in)o(teractiv)o(e)g(but)g(do)q(es)g(not)g
(normally)g(prin)o(t)g(suc)o(h)g(an)g(announcemen)o(t,)364
1938 y(y)o(our)g(w)o(ork)h(based)g(on)g(the)g(Program)f(is)i(not)f(required)h
(to)f(prin)o(t)g(an)g(announcemen)o(t.\))264 2052 y(These)k(requiremen)o(ts)h
(apply)g(to)e(the)h(mo)q(di\014ed)i(w)o(ork)d(as)h(a)f(whole.)33
b(If)19 b(iden)o(ti\014able)i(sections)264 2117 y(of)e(that)f(w)o(ork)h(are)g
(not)g(deriv)o(ed)h(from)f(the)g(Program,)g(and)g(can)h(b)q(e)g(reasonably)g
(considered)264 2181 y(indep)q(enden)o(t)g(and)e(separate)f(w)o(orks)g(in)i
(themselv)o(es,)g(then)f(this)g(License,)i(and)e(its)g(terms,)g(do)264
2245 y(not)f(apply)h(to)e(those)h(sections)h(when)g(y)o(ou)f(distribute)i
(them)e(as)g(separate)g(w)o(orks.)25 b(But)17 b(when)264 2310
y(y)o(ou)j(distribute)h(the)f(same)g(sections)h(as)f(part)g(of)f(a)h(whole)h
(whic)o(h)g(is)g(a)f(w)o(ork)f(based)i(on)f(the)264 2374 y(Program,)15
b(the)i(distribution)i(of)e(the)g(whole)g(m)o(ust)g(b)q(e)h(on)f(the)g(terms)
f(of)h(this)g(License,)i(whose)264 2438 y(p)q(ermissions)c(for)e(other)g
(licensees)j(extend)f(to)e(the)h(en)o(tire)g(whole,)g(and)g(th)o(us)g(to)f
(eac)o(h)h(and)g(ev)o(ery)264 2503 y(part)g(regardless)i(of)e(who)h(wrote)g
(it.)p eop
%%Page: 115 124
115 123 bop 150 -84 1800 3 v 150 -100 a FC(B.2.)42 b(T)l(erms)17
b(and)h(Conditions)1093 b FH(115)264 88 y(Th)o(us,)22 b(it)f(is)h(not)f(the)g
(in)o(ten)o(t)g(of)g(this)h(section)f(to)g(claim)h(righ)o(ts)f(or)g(con)o
(test)f(y)o(our)h(righ)o(ts)g(to)264 153 y(w)o(ork)14 b(written)h(en)o
(tirely)i(b)o(y)e(y)o(ou;)g(rather,)f(the)h(in)o(ten)o(t)h(is)g(to)e
(exercise)j(the)e(righ)o(t)g(to)g(con)o(trol)g(the)264 217
y(distribution)h(of)f(deriv)m(ativ)o(e)i(or)d(collectiv)o(e)j(w)o(orks)e
(based)g(on)g(the)g(Program.)264 300 y(In)d(addition,)g(mere)g(aggregation)e
(of)h(another)g(w)o(ork)f(not)h(based)h(on)f(the)g(Program)f(with)i(the)f
(Pro-)264 365 y(gram)i(\(or)g(with)h(a)f(w)o(ork)g(based)h(on)g(the)g
(Program\))e(on)i(a)f(v)o(olume)h(of)g(a)f(storage)g(or)g(distribution)264
429 y(medium)j(do)q(es)f(not)g(bring)h(the)f(other)g(w)o(ork)f(under)i(the)g
(scop)q(e)f(of)g(this)h(License.)206 531 y(3.)22 b(Y)l(ou)17
b(ma)o(y)f(cop)o(y)h(and)g(distribute)i(the)e(Program)e(\(or)h(a)h(w)o(ork)f
(based)i(on)f(it,)g(under)h(Section)g(2\))264 595 y(in)c(ob)s(ject)f(co)q(de)
h(or)g(executable)h(form)d(under)j(the)f(terms)f(of)g(Sections)h(1)g(and)g(2)
f(ab)q(o)o(v)o(e)g(pro)o(vided)264 659 y(that)h(y)o(ou)h(also)g(do)g(one)h
(of)e(the)i(follo)o(wing:)306 773 y(a.)22 b(Accompan)o(y)c(it)h(with)g(the)g
(complete)g(corresp)q(onding)h(mac)o(hine-readable)g(source)f(co)q(de,)364
838 y(whic)o(h)11 b(m)o(ust)f(b)q(e)i(distributed)g(under)g(the)e(terms)h(of)
f(Sections)i(1)e(and)h(2)f(ab)q(o)o(v)o(e)h(on)f(a)h(medium)364
902 y(customarily)k(used)h(for)f(soft)o(w)o(are)e(in)o(terc)o(hange;)i(or,)
303 983 y(b.)23 b(Accompan)o(y)12 b(it)h(with)f(a)g(written)h(o\013er,)g(v)m
(alid)h(for)d(at)h(least)h(three)f(y)o(ears,)g(to)g(giv)o(e)g(an)o(y)g(third)
364 1048 y(part)o(y)l(,)g(for)g(a)h(c)o(harge)g(no)g(more)f(than)h(y)o(our)g
(cost)f(of)h(ph)o(ysically)h(p)q(erforming)g(source)f(distri-)364
1112 y(bution,)f(a)e(complete)i(mac)o(hine-readable)g(cop)o(y)f(of)f(the)h
(corresp)q(onding)h(source)e(co)q(de,)i(to)e(b)q(e)364 1176
y(distributed)16 b(under)f(the)g(terms)f(of)g(Sections)h(1)f(and)h(2)f(ab)q
(o)o(v)o(e)g(on)h(a)f(medium)i(customarily)364 1241 y(used)f(for)g(soft)o(w)o
(are)e(in)o(terc)o(hange;)j(or,)308 1322 y(c.)23 b(Accompan)o(y)d(it)h(with)g
(the)g(information)g(y)o(ou)g(receiv)o(ed)g(as)g(to)f(the)h(o\013er)g(to)f
(distribute)364 1386 y(corresp)q(onding)d(source)f(co)q(de.)23
b(\(This)16 b(alternativ)o(e)g(is)h(allo)o(w)o(ed)f(only)h(for)e
(noncommercial)364 1450 y(distribution)k(and)f(only)g(if)g(y)o(ou)f(receiv)o
(ed)i(the)f(program)e(in)i(ob)s(ject)f(co)q(de)i(or)e(executable)364
1515 y(form)d(with)i(suc)o(h)f(an)g(o\013er,)g(in)h(accord)f(with)h
(Subsection)g(b)g(ab)q(o)o(v)o(e.\))264 1629 y(The)i(source)f(co)q(de)i(for)e
(a)g(w)o(ork)g(means)h(the)g(preferred)g(form)f(of)g(the)h(w)o(ork)f(for)g
(making)h(mo)q(d-)264 1693 y(i\014cations)h(to)e(it.)29 b(F)l(or)17
b(an)h(executable)h(w)o(ork,)f(complete)g(source)g(co)q(de)h(means)f(all)h
(the)f(source)264 1758 y(co)q(de)j(for)e(all)j(mo)q(dules)f(it)g(con)o
(tains,)g(plus)g(an)o(y)f(asso)q(ciated)h(in)o(terface)g(de\014nition)h
(\014les,)g(plus)264 1822 y(the)17 b(scripts)g(used)h(to)f(con)o(trol)g
(compilation)h(and)g(installation)g(of)f(the)g(executable.)27
b(Ho)o(w)o(ev)o(er,)264 1886 y(as)15 b(a)h(sp)q(ecial)i(exception,)f(the)f
(source)g(co)q(de)h(distributed)h(need)f(not)e(include)k(an)o(ything)d(that)f
(is)264 1951 y(normally)20 b(distributed)h(\(in)g(either)f(source)g(or)f
(binary)i(form\))e(with)h(the)g(ma)s(jor)e(comp)q(onen)o(ts)264
2015 y(\(compiler,)f(k)o(ernel,)h(and)f(so)g(on\))f(of)g(the)h(op)q(erating)g
(system)g(on)f(whic)o(h)i(the)f(executable)h(runs,)264 2079
y(unless)e(that)e(comp)q(onen)o(t)i(itself)g(accompanies)g(the)f(executable.)
264 2162 y(If)j(distribution)h(of)f(executable)h(or)f(ob)s(ject)f(co)q(de)h
(is)h(made)f(b)o(y)g(o\013ering)h(access)f(to)f(cop)o(y)h(from)264
2227 y(a)e(designated)i(place,)g(then)f(o\013ering)h(equiv)m(alen)o(t)h
(access)e(to)f(cop)o(y)h(the)g(source)g(co)q(de)h(from)e(the)264
2291 y(same)i(place)h(coun)o(ts)f(as)g(distribution)i(of)e(the)g(source)h(co)
q(de,)g(ev)o(en)g(though)f(third)h(parties)f(are)264 2355 y(not)c(comp)q
(elled)k(to)c(cop)o(y)h(the)h(source)f(along)g(with)h(the)f(ob)s(ject)g(co)q
(de.)206 2457 y(4.)22 b(Y)l(ou)15 b(ma)o(y)g(not)g(cop)o(y)l(,)h(mo)q(dify)l
(,)g(sublicense,)h(or)e(distribute)i(the)f(Program)e(except)i(as)f(expressly)
264 2522 y(pro)o(vided)k(under)g(this)g(License.)32 b(An)o(y)18
b(attempt)g(otherwise)h(to)f(cop)o(y)l(,)h(mo)q(dify)l(,)h(sublicense)g(or)p
eop
%%Page: 116 125
116 124 bop 150 -84 1800 3 v 150 -100 a FC(B.2.)42 b(T)l(erms)17
b(and)h(Conditions)1093 b FH(116)264 88 y(distribute)20 b(the)f(Program)f(is)
h(v)o(oid,)h(and)f(will)i(automatically)e(terminate)g(y)o(our)g(righ)o(ts)f
(under)264 153 y(this)h(License.)31 b(Ho)o(w)o(ev)o(er,)18
b(parties)h(who)g(ha)o(v)o(e)f(receiv)o(ed)h(copies,)h(or)e(righ)o(ts,)h
(from)f(y)o(ou)g(under)264 217 y(this)e(License)i(will)g(not)d(ha)o(v)o(e)h
(their)g(licenses)i(terminated)f(so)e(long)h(as)g(suc)o(h)g(parties)h(remain)
f(in)264 281 y(full)g(compliance.)206 383 y(5.)22 b(Y)l(ou)17
b(are)g(not)g(required)h(to)f(accept)h(this)f(License,)i(since)g(y)o(ou)e(ha)
o(v)o(e)g(not)g(signed)h(it.)26 b(Ho)o(w)o(ev)o(er,)264 448
y(nothing)15 b(else)g(gran)o(ts)e(y)o(ou)i(p)q(ermission)h(to)d(mo)q(dify)j
(or)e(distribute)h(the)g(Program)e(or)h(its)h(deriv)m(a-)264
512 y(tiv)o(e)k(w)o(orks.)31 b(These)20 b(actions)f(are)g(prohibited)i(b)o(y)
e(la)o(w)h(if)f(y)o(ou)g(do)g(not)g(accept)h(this)g(License.)264
576 y(Therefore,)14 b(b)o(y)h(mo)q(difying)h(or)f(distributing)h(the)f
(Program)f(\(or)g(an)o(y)g(w)o(ork)g(based)i(on)e(the)h(Pro-)264
641 y(gram\),)i(y)o(ou)h(indicate)i(y)o(our)d(acceptance)i(of)f(this)g
(License)i(to)e(do)g(so,)g(and)h(all)g(its)f(terms)g(and)264
705 y(conditions)e(for)f(cop)o(ying,)g(distributing)i(or)d(mo)q(difying)j
(the)e(Program)f(or)h(w)o(orks)f(based)h(on)g(it.)206 807 y(6.)22
b(Eac)o(h)d(time)g(y)o(ou)g(redistribute)h(the)g(Program)d(\(or)i(an)o(y)g(w)
o(ork)f(based)h(on)h(the)f(Program\),)f(the)264 871 y(recipien)o(t)d
(automatically)g(receiv)o(es)g(a)e(license)j(from)e(the)g(original)h
(licensor)g(to)f(cop)o(y)l(,)g(distribute)264 935 y(or)i(mo)q(dify)h(the)g
(Program)e(sub)s(ject)h(to)g(these)h(terms)f(and)h(conditions.)25
b(Y)l(ou)17 b(ma)o(y)f(not)g(imp)q(ose)264 1000 y(an)o(y)h(further)g
(restrictions)h(on)f(the)g(recipien)o(ts')i(exercise)f(of)f(the)g(righ)o(ts)g
(gran)o(ted)g(herein.)28 b(Y)l(ou)264 1064 y(are)15 b(not)f(resp)q(onsible)k
(for)c(enforcing)i(compliance)h(b)o(y)e(third)h(parties)f(to)g(this)g
(License.)206 1166 y(7.)22 b(If,)12 b(as)f(a)h(consequence)h(of)e(a)h(court)f
(judgmen)o(t)h(or)f(allegation)i(of)e(paten)o(t)g(infringemen)o(t)i(or)e(for)
g(an)o(y)264 1230 y(other)16 b(reason)h(\(not)f(limited)i(to)f(paten)o(t)f
(issues\),)h(conditions)h(are)f(imp)q(osed)h(on)f(y)o(ou)f(\(whether)264
1295 y(b)o(y)c(court)h(order,)f(agreemen)o(t)g(or)g(otherwise\))h(that)f(con)
o(tradict)g(the)h(conditions)h(of)e(this)i(License,)264 1359
y(they)i(do)g(not)g(excuse)h(y)o(ou)f(from)g(the)g(conditions)i(of)d(this)i
(License.)25 b(If)17 b(y)o(ou)f(cannot)g(distribute)264 1423
y(so)21 b(as)h(to)f(satisfy)g(sim)o(ultaneously)i(y)o(our)f(obligations)g
(under)h(this)f(License)i(and)e(an)o(y)f(other)264 1488 y(p)q(ertinen)o(t)c
(obligations,)g(then)g(as)f(a)g(consequence)h(y)o(ou)f(ma)o(y)g(not)g
(distribute)h(the)g(Program)e(at)264 1552 y(all.)30 b(F)l(or)17
b(example,)j(if)e(a)g(paten)o(t)g(license)i(w)o(ould)f(not)e(p)q(ermit)i(ro)o
(y)o(alt)o(y-free)f(redistribution)h(of)264 1616 y(the)d(Program)f(b)o(y)h
(all)h(those)f(who)g(receiv)o(e)h(copies)g(directly)g(or)f(indirectly)i
(through)e(y)o(ou,)g(then)264 1681 y(the)h(only)h(w)o(a)o(y)e(y)o(ou)h(could)
i(satisfy)e(b)q(oth)g(it)h(and)g(this)g(License)h(w)o(ould)e(b)q(e)h(to)f
(refrain)h(en)o(tirely)264 1745 y(from)c(distribution)j(of)e(the)g(Program.)
264 1828 y(If)20 b(an)o(y)f(p)q(ortion)h(of)g(this)g(section)g(is)h(held)g
(in)o(v)m(alid)h(or)d(unenforceable)i(under)g(an)o(y)e(particular)264
1892 y(circumstance,)i(the)f(balance)h(of)f(the)g(section)g(is)h(in)o(tended)
g(to)e(apply)i(and)f(the)g(section)h(as)e(a)264 1957 y(whole)c(is)h(in)o
(tended)h(to)d(apply)i(in)g(other)f(circumstances.)264 2040
y(It)j(is)i(not)e(the)h(purp)q(ose)g(of)g(this)g(section)g(to)f(induce)j(y)o
(ou)d(to)g(infringe)i(an)o(y)f(paten)o(ts)f(or)g(other)264
2104 y(prop)q(ert)o(y)g(righ)o(t)g(claims)h(or)f(to)f(con)o(test)h(v)m
(alidit)o(y)i(of)e(an)o(y)g(suc)o(h)h(claims;)h(this)f(section)g(has)f(the)
264 2169 y(sole)13 b(purp)q(ose)h(of)e(protecting)i(the)f(in)o(tegrit)o(y)g
(of)f(the)h(free)h(soft)o(w)o(are)d(distribution)j(system,)f(whic)o(h)264
2233 y(is)j(implemen)o(ted)h(b)o(y)f(public)i(license)g(practices.)k(Man)o(y)
15 b(p)q(eople)i(ha)o(v)o(e)e(made)h(generous)g(con)o(tri-)264
2297 y(butions)g(to)f(the)h(wide)h(range)f(of)f(soft)o(w)o(are)f(distributed)
k(through)d(that)g(system)h(in)h(reliance)g(on)264 2362 y(consisten)o(t)f
(application)i(of)e(that)f(system;)h(it)g(is)h(up)g(to)e(the)i(author/donor)e
(to)g(decide)j(if)f(he)f(or)264 2426 y(she)h(is)g(willing)j(to)c(distribute)i
(soft)o(w)o(are)d(through)i(an)o(y)f(other)h(system)f(and)h(a)g(licensee)i
(cannot)264 2490 y(imp)q(ose)d(that)e(c)o(hoice.)p eop
%%Page: 117 126
117 125 bop 150 -84 1800 3 v 150 -100 a FC(B.2.)42 b(T)l(erms)17
b(and)h(Conditions)1093 b FH(117)264 88 y(This)12 b(section)h(is)f(in)o
(tended)h(to)f(mak)o(e)f(thoroughly)h(clear)g(what)g(is)g(b)q(eliev)o(ed)i
(to)d(b)q(e)i(a)f(consequence)264 153 y(of)i(the)i(rest)e(of)h(this)h
(License.)206 254 y(8.)22 b(If)16 b(the)f(distribution)j(and/or)d(use)h(of)f
(the)h(Program)e(is)i(restricted)g(in)h(certain)f(coun)o(tries)g(either)264
319 y(b)o(y)f(paten)o(ts)g(or)h(b)o(y)f(cop)o(yrigh)o(ted)h(in)o(terfaces,)g
(the)g(original)h(cop)o(yrigh)o(t)e(holder)i(who)e(places)i(the)264
383 y(Program)d(under)i(this)h(License)g(ma)o(y)e(add)h(an)g(explicit)i
(geographical)e(distribution)i(limitation)264 448 y(excluding)c(those)e(coun)
o(tries,)h(so)f(that)f(distribution)j(is)f(p)q(ermitted)g(only)g(in)g(or)f
(among)g(coun)o(tries)264 512 y(not)i(th)o(us)g(excluded.)22
b(In)15 b(suc)o(h)h(case,)e(this)h(License)i(incorp)q(orates)d(the)h
(limitation)h(as)f(if)g(written)264 576 y(in)h(the)f(b)q(o)q(dy)h(of)f(this)g
(License.)206 678 y(9.)22 b(The)11 b(F)l(ree)h(Soft)o(w)o(are)e(F)l
(oundation)h(ma)o(y)g(publish)j(revised)e(and/or)f(new)g(v)o(ersions)h(of)f
(the)h(General)264 742 y(Public)19 b(License)g(from)d(time)h(to)g(time.)26
b(Suc)o(h)18 b(new)f(v)o(ersions)g(will)i(b)q(e)f(similar)g(in)g(spirit)g(to)
f(the)264 807 y(presen)o(t)e(v)o(ersion,)g(but)g(ma)o(y)g(di\013er)h(in)g
(detail)h(to)d(address)h(new)h(problems)g(or)e(concerns.)264
890 y(Eac)o(h)20 b(v)o(ersion)h(is)g(giv)o(en)h(a)e(distinguishing)k(v)o
(ersion)d(n)o(um)o(b)q(er.)37 b(If)21 b(the)f(Program)g(sp)q(eci\014es)i(a)
264 954 y(v)o(ersion)16 b(n)o(um)o(b)q(er)h(of)e(this)i(License)h(whic)o(h)f
(applies)h(to)e(it)g(and)h(\\an)o(y)e(later)h(v)o(ersion",)g(y)o(ou)g(ha)o(v)
o(e)264 1018 y(the)f(option)g(of)f(follo)o(wing)i(the)e(terms)h(and)g
(conditions)h(either)f(of)g(that)f(v)o(ersion)h(or)f(of)g(an)o(y)h(later)264
1083 y(v)o(ersion)h(published)j(b)o(y)d(the)g(F)l(ree)g(Soft)o(w)o(are)f(F)l
(oundation.)22 b(If)17 b(the)f(Program)f(do)q(es)h(not)g(sp)q(ecify)264
1147 y(a)g(v)o(ersion)h(n)o(um)o(b)q(er)g(of)f(this)h(License,)h(y)o(ou)e(ma)
o(y)g(c)o(ho)q(ose)h(an)o(y)f(v)o(ersion)h(ev)o(er)f(published)j(b)o(y)e(the)
264 1212 y(F)l(ree)e(Soft)o(w)o(are)f(F)l(oundation.)183 1313
y(10.)22 b(If)16 b(y)o(ou)g(wish)h(to)f(incorp)q(orate)h(parts)e(of)h(the)h
(Program)e(in)o(to)h(other)g(free)h(programs)e(whose)h(dis-)264
1378 y(tribution)22 b(conditions)i(are)d(di\013eren)o(t,)k(write)d(to)f(the)h
(author)g(to)f(ask)h(for)f(p)q(ermission.)42 b(F)l(or)264 1442
y(soft)o(w)o(are)19 b(whic)o(h)j(is)f(cop)o(yrigh)o(ted)h(b)o(y)f(the)g(F)l
(ree)g(Soft)o(w)o(are)f(F)l(oundation,)i(write)f(to)g(the)g(F)l(ree)264
1506 y(Soft)o(w)o(are)c(F)l(oundation;)j(w)o(e)e(sometimes)h(mak)o(e)f
(exceptions)i(for)e(this.)31 b(Our)19 b(decision)h(will)g(b)q(e)264
1571 y(guided)i(b)o(y)e(the)h(t)o(w)o(o)e(goals)i(of)f(preserving)h(the)g
(free)g(status)f(of)g(all)h(deriv)m(ativ)o(es)h(of)e(our)h(free)264
1635 y(soft)o(w)o(are)13 b(and)i(of)g(promoting)g(the)g(sharing)h(and)f
(reuse)h(of)e(soft)o(w)o(are)g(generally)l(.)853 1749 y FE(NO)k(W)-5
b(ARRANTY)183 1851 y FH(11.)22 b(BECA)o(USE)17 b(THE)h(PR)o(OGRAM)f(IS)i
(LICENSED)f(FREE)f(OF)h(CHAR)o(GE,)f(THERE)g(IS)i(NO)264 1915
y(W)-5 b(ARRANTY)19 b(F)o(OR)f(THE)g(PR)o(OGRAM,)h(TO)f(THE)g(EXTENT)g
(PERMITTED)g(BY)h(AP-)264 1980 y(PLICABLE)j(LA)-5 b(W.)21 b(EX)o(CEPT)g(WHEN)
g(OTHER)-5 b(WISE)22 b(ST)l(A)l(TED)f(IN)h(WRITING)g(THE)264
2044 y(COPYRIGHT)10 b(HOLDERS)i(AND/OR)e(OTHER)h(P)l(AR)l(TIES)g(PR)o(O)o
(VIDE)g(THE)f(PR)o(OGRAM)264 2108 y(\\AS)j(IS")h(WITHOUT)f(W)-5
b(ARRANTY)14 b(OF)f(ANY)h(KIND,)f(EITHER)h(EXPRESSED)g(OR)g(IM-)264
2173 y(PLIED,)19 b(INCLUDING,)h(BUT)g(NOT)f(LIMITED)h(TO,)f(THE)h(IMPLIED)g
(W)-5 b(ARRANTIES)264 2237 y(OF)12 b(MER)o(CHANT)l(ABILITY)h(AND)f(FITNESS)g
(F)o(OR)g(A)g(P)l(AR)l(TICULAR)i(PURPOSE.)e(THE)264 2301 y(ENTIRE)21
b(RISK)i(AS)e(TO)h(THE)f(QUALITY)h(AND)f(PERF)o(ORMANCE)g(OF)g(THE)g(PR)o(O-)
264 2366 y(GRAM)d(IS)i(WITH)e(YOU.)h(SHOULD)h(THE)f(PR)o(OGRAM)g(PR)o(O)o(VE)
g(DEFECTIVE,)e(YOU)264 2430 y(ASSUME)12 b(THE)h(COST)g(OF)f(ALL)i(NECESSAR)l
(Y)f(SER)-5 b(VICING,)14 b(REP)l(AIR)g(OR)f(CORREC-)264 2495
y(TION.)p eop
%%Page: 118 127
118 126 bop 150 -84 1800 3 v 150 -100 a FC(B.3.)42 b(Ho)o(w)17
b(to)h(Apply)g(These)f(T)l(erms)964 b FH(118)183 88 y(12.)22
b(IN)11 b(NO)g(EVENT)g(UNLESS)h(REQUIRED)h(BY)e(APPLICABLE)h(LA)-5
b(W)11 b(OR)h(A)o(GREED)e(TO)h(IN)264 153 y(WRITING)16 b(WILL)h(ANY)f
(COPYRIGHT)g(HOLDER,)g(OR)h(ANY)f(OTHER)g(P)l(AR)l(TY)h(WHO)264
217 y(MA)l(Y)22 b(MODIFY)g(AND/OR)h(REDISTRIBUTE)g(THE)f(PR)o(OGRAM)h(AS)f
(PERMITTED)264 281 y(ABO)o(VE,)16 b(BE)h(LIABLE)h(TO)f(YOU)g(F)o(OR)g(D)o
(AMA)o(GES,)e(INCLUDING)j(ANY)f(GENERAL,)264 346 y(SPECIAL,)f(INCIDENT)l(AL)i
(OR)f(CONSEQUENTIAL)h(D)o(AMA)o(GES)d(ARISING)i(OUT)g(OF)264
410 y(THE)i(USE)i(OR)f(INABILITY)i(TO)e(USE)g(THE)g(PR)o(OGRAM)g(\(INCLUDING)
h(BUT)f(NOT)264 475 y(LIMITED)12 b(TO)h(LOSS)g(OF)g(D)o(A)l(T)l(A)f(OR)h(D)o
(A)l(T)l(A)f(BEING)h(RENDERED)f(INA)o(CCURA)l(TE)h(OR)264 539
y(LOSSES)19 b(SUST)l(AINED)g(BY)f(YOU)h(OR)f(THIRD)h(P)l(AR)l(TIES)g(OR)g(A)f
(F)-5 b(AILURE)19 b(OF)f(THE)264 603 y(PR)o(OGRAM)f(TO)f(OPERA)l(TE)i(WITH)f
(ANY)f(OTHER)i(PR)o(OGRAMS\),)e(EVEN)h(IF)g(SUCH)264 668 y(HOLDER)e(OR)g
(OTHER)g(P)l(AR)l(TY)h(HAS)e(BEEN)h(AD)o(VISED)f(OF)h(THE)f(POSSIBILITY)j(OF)
264 732 y(SUCH)e(D)o(AMA)o(GES.)619 846 y FE(END)h(OF)i(TERMS)f(AND)g
(CONDITIONS)150 1023 y Fs(B.3)69 b(App)r(endix:)39 b(Ho)n(w)27
b(to)g(Apply)g(These)g(T)-6 b(erms)26 b(to)i(Y)-6 b(our)28
b(New)321 1108 y(Programs)150 1241 y FH(If)11 b(y)o(ou)f(dev)o(elop)h(a)f
(new)h(program,)f(and)h(y)o(ou)f(w)o(an)o(t)f(it)i(to)f(b)q(e)h(of)f(the)g
(greatest)g(p)q(ossible)i(use)f(to)f(the)g(public,)150 1306
y(the)k(b)q(est)g(w)o(a)o(y)f(to)g(ac)o(hiev)o(e)i(this)f(is)h(to)e(mak)o(e)h
(it)g(free)g(soft)o(w)o(are)e(whic)o(h)j(ev)o(ery)o(one)e(can)i(redistribute)
g(and)150 1370 y(c)o(hange)g(under)h(these)g(terms.)221 1458
y(T)l(o)e(do)g(so,)f(attac)o(h)g(the)i(follo)o(wing)g(notices)g(to)e(the)h
(program.)19 b(It)14 b(is)h(safest)e(to)h(attac)o(h)f(them)h(to)g(the)150
1522 y(start)h(of)h(eac)o(h)g(source)h(\014le)g(to)f(most)f(e\013ectiv)o(ely)
j(con)o(v)o(ey)e(the)h(exclusion)h(of)e(w)o(arran)o(t)o(y;)e(and)j(eac)o(h)f
(\014le)150 1587 y(should)g(ha)o(v)o(e)f(at)g(least)g(the)g(\\cop)o(yrigh)o
(t")f(line)j(and)f(a)f(p)q(oin)o(ter)g(to)g(where)g(the)h(full)g(notice)g(is)
g(found.)264 1724 y FG(h)p Fv(one)c(line)i(to)d(giv)o(e)i(the)f(program's)f
(name)h(and)g(a)g(brief)h(idea)g(of)f(what)g(it)g(do)q(es.)p
FG(i)g FH(Cop)o(yrigh)o(t)276 1788 y(c)264 1789 y FG(\015)j
FH(19yy)g FG(h)p Fv(name)g(of)f(author)p FG(i)264 1872 y FH(This)19
b(program)e(is)i(free)f(soft)o(w)o(are;)g(y)o(ou)g(can)g(redistribute)i(it)e
(and/or)g(mo)q(dify)h(it)g(under)264 1936 y(the)13 b(terms)g(of)g(the)g(GNU)g
(General)h(Public)h(License)g(as)e(published)j(b)o(y)d(the)g(F)l(ree)h(Soft)o
(w)o(are)264 2000 y(F)l(oundation;)f(either)f(v)o(ersion)h(2)e(of)h(the)g
(License,)i(or)d(\(at)g(y)o(our)h(option\))g(an)o(y)f(later)h(v)o(ersion.)264
2083 y(This)17 b(program)e(is)i(distributed)h(in)f(the)g(hop)q(e)g(that)f(it)
h(will)h(b)q(e)f(useful,)g(but)g(WITHOUT)264 2148 y(ANY)e(W)-5
b(ARRANTY;)15 b(without)g(ev)o(en)g(the)g(implied)j(w)o(arran)o(t)o(y)13
b(of)h(MER)o(CHANT)l(ABIL-)264 2212 y(ITY)20 b(or)f(FITNESS)i(F)o(OR)f(A)g(P)
l(AR)l(TICULAR)i(PURPOSE.)e(See)h(the)f(GNU)g(General)264 2277
y(Public)d(License)g(for)d(more)h(details.)264 2360 y(Y)l(ou)f(should)g(ha)o
(v)o(e)g(receiv)o(ed)h(a)e(cop)o(y)h(of)f(the)h(GNU)g(General)g(Public)i
(License)f(along)f(with)264 2424 y(this)f(program;)g(if)g(not,)g(write)g(to)g
(the)g(F)l(ree)g(Soft)o(w)o(are)f(F)l(oundation,)h(Inc.,)h(675)e(Mass)h(Av)o
(e,)264 2488 y(Cam)o(bridge,)h(MA)h(02139,)f(USA.)p eop
%%Page: 119 128
119 127 bop 150 -84 1800 3 v 150 -100 a FC(B.3.)42 b(Ho)o(w)17
b(to)h(Apply)g(These)f(T)l(erms)964 b FH(119)221 88 y(Also)15
b(add)g(information)h(on)f(ho)o(w)g(to)f(con)o(tact)h(y)o(ou)f(b)o(y)i
(electronic)g(and)g(pap)q(er)f(mail.)221 176 y(If)f(the)f(program)g(is)h(in)o
(teractiv)o(e,)h(mak)o(e)e(it)h(output)f(a)h(short)f(notice)h(lik)o(e)h(this)
g(when)f(it)g(starts)e(in)j(an)150 241 y(in)o(teractiv)o(e)h(mo)q(de:)264
378 y Fr(Gnomovision)j(version)h(69,)i(Copyright)e(\(C\))h(19yy)g(name)g(of)g
(author)g(Gnomovision)e(comes)264 443 y(with)i(ABSOLUTELY)e(NO)j(WARRANTY;)e
(for)h(details)f(type)h(`show)g(w'.)43 b(This)21 b(is)g(free)g(software,)264
507 y(and)g(you)g(are)g(welcome)f(to)i(redistribute)d(it)j(under)e(certain)h
(conditions;)e(type)i(`show)264 571 y(c')g(for)g(details.)221
709 y FH(The)c(h)o(yp)q(othetical)h(commands)e(`sho)o(w)g(w')h(and)g(`sho)o
(w)f(c')g(should)i(sho)o(w)f(the)g(appropriate)g(parts)150
773 y(of)e(the)h(General)g(Public)h(License.)23 b(Of)15 b(course,)h(the)f
(commands)h(y)o(ou)f(use)h(ma)o(y)e(b)q(e)j(called)g(something)150
838 y(other)10 b(than)g(`sho)o(w)g(w')g(and)g(`sho)o(w)g(c';)h(they)g(could)g
(ev)o(en)g(b)q(e)g(mouse-clic)o(ks)h(or)e(men)o(u)h(items)g(|)g(whatev)o(er)
150 902 y(suits)16 b(y)o(our)e(program.)221 990 y(Y)l(ou)f(should)i(also)e
(get)g(y)o(our)g(emplo)o(y)o(er)h(\(if)f(y)o(ou)g(w)o(ork)g(as)g(a)g
(programmer\))f(or)h(y)o(our)g(sc)o(ho)q(ol,)h(if)f(an)o(y)l(,)150
1054 y(to)j(sign)h(a)g(\\cop)o(yrigh)o(t)f(disclaimer")i(for)e(the)h
(program,)f(if)h(necessary)l(.)25 b(Here)17 b(is)g(a)f(sample;)i(alter)f(the)
150 1119 y(names:)264 1256 y(Y)l(o)o(y)o(o)q(dyne,)d(Inc.,)h(hereb)o(y)g
(disclaims)i(all)e(cop)o(yrigh)o(t)g(in)o(terest)f(in)i(the)f(program)e
(`Gnomo-)264 1321 y(vision')j(\(whic)o(h)f(mak)o(es)g(passes)g(at)g
(compilers\))h(written)f(b)o(y)g(James)g(Hac)o(k)o(er.)264
1404 y FG(h)p Fv(signature)g(of)f(T)o(y)h(Co)q(on)p FG(i)p
FH(,)f(1)h(April)i(1989)d(T)o(y)h(Co)q(on,)f(Presiden)o(t)i(of)f(Vice)221
1541 y(This)j(General)g(Public)h(License)h(do)q(es)e(not)f(p)q(ermit)h
(incorp)q(orating)g(y)o(our)f(program)g(in)o(to)g(propri-)150
1606 y(etary)g(programs.)24 b(If)18 b(y)o(our)e(program)g(is)i(a)f
(subroutine)h(library)l(,)g(y)o(ou)f(ma)o(y)g(consider)h(it)f(more)g(useful)
150 1670 y(to)e(p)q(ermit)h(linking)h(proprietary)f(applications)h(with)f
(the)f(library)l(.)22 b(If)15 b(this)h(is)g(what)f(y)o(ou)g(w)o(an)o(t)g(to)f
(do,)150 1734 y(use)i(the)f(GNU)g(Library)h(General)f(Public)i(License)g
(instead)f(of)f(this)g(License.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
