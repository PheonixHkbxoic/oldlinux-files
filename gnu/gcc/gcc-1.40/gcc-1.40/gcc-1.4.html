<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on January, 23  2003 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Using and Porting GNU CC: </TITLE>

<META NAME="description" CONTENT="Using and Porting GNU CC: ">
<META NAME="keywords" CONTENT="Using and Porting GNU CC: ">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC_Top"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1>Using and Porting GNU CC</H1>@ichapter Introduction
</P><P>

This manual documents how to run, install and port the GNU C compiler, as
well as its new features and incompatibilities, and how to report bugs.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC1">GNU GENERAL PUBLIC LICENSE</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">GNU General Public License says
                     how you can copy and share GNU CC.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC4">Contributors to GNU CC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">People who have contributed to GNU CC.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC5">1. Protect Your Freedom--Fight "Look And Feel"</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Protect your freedom--fight "look and feel".</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC6">2. GNU CC Command Options</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Command options supported by <SAMP>`gcc'</SAMP>.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC7">3. Installing GNU CC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to configure, compile and install GNU CC.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC15">4. Known Causes of Trouble with GNU CC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">If you have trouble installing GNU CC.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC16">5. How To Get Help with GNU CC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to find suppliers of services for GNU CC users.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC18">7. GNU Extensions to the C Language</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">GNU extensions to the C language.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC40">8. Reporting Bugs</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to report bugs (if you want to get them fixed).</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC43">9. GNU CC and Portability</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Goals of GNU CC's portability features.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC44">10. Interfacing to GNU CC Output</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Function-call interface of GNU CC output.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC45">11. Passes and Files of the Compiler</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Order of passes, what they do, and what each file is for.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC46">12. RTL Representation</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The intermediate representation that most passes work on.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC64">13. Machine Descriptions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to write machine description instruction patterns.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC82">14. Machine Description Macros</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to write the machine description C macros.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC95">15. The Configuration File</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Writing the <TT>`xm-<VAR>machine</VAR>.h'</TT> file.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<HR SIZE=1>
<A NAME="SEC1"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC2"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC4"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<A NAME="Copying"></A>
<H1> GNU GENERAL PUBLIC LICENSE </H1>
<!--docid::SEC1::-->
<center>
 Version 1, February 1989
</center>
<P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif">Copyright (C) 1989 Free Software Foundation, Inc.
675 Mass Ave, Cambridge, MA 02139, USA

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></td></tr></table></P><P>

<HR SIZE="6">
<A NAME="SEC2"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC1"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC3"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> Preamble </H2>
<!--docid::SEC2::-->
<P>

  The license agreements of most software companies try to keep users
at the mercy of those companies.  By contrast, our General Public
License is intended to guarantee your freedom to share and change free
software--to make sure the software is free for all its users.  The
General Public License applies to the Free Software Foundation's
software and to any other program whose authors commit to using it.
You can use it for your programs, too.
</P><P>

  When we speak of free software, we are referring to freedom, not
price.  Specifically, the General Public License is designed to make
sure that you have the freedom to give away or sell copies of free
software, that you receive source code or can get it if you want it,
that you can change the software or use pieces of it in new free
programs; and that you know you can do these things.
</P><P>

  To protect your rights, we need to make restrictions that forbid
anyone to deny you these rights or to ask you to surrender the rights.
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.
</P><P>

  For example, if you distribute copies of a such a program, whether
gratis or for a fee, you must give the recipients all the rights that
you have.  You must make sure that they, too, receive or can get the
source code.  And you must tell them their rights.
</P><P>

  We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.
</P><P>

  Also, for each author's protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors' reputations.
</P><P>

  The precise terms and conditions for copying, distribution and
modification follow.
</P><P>

<center>
 TERMS AND CONDITIONS
</center>
</P><P>

<OL>
<LI>
This License Agreement applies to any program or other work which
contains a notice placed by the copyright holder saying it may be
distributed under the terms of this General Public License.  The
"Program", below, refers to any such program or work, and a "work based
on the Program" means either the Program or any work containing the
Program or a portion of it, either verbatim or with modifications.  Each
licensee is addressed as "you".
<P>

<LI>
You may copy and distribute verbatim copies of the Program's source
code as you receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice and
disclaimer of warranty; keep intact all the notices that refer to this
General Public License and to the absence of any warranty; and give any
other recipients of the Program a copy of this General Public License
along with the Program.  You may charge a fee for the physical act of
transferring a copy.
<P>

<LI>
You may modify your copy or copies of the Program or any portion of
it, and copy and distribute such modifications under the terms of Paragraph
1 above, provided that you also do the following:
<P>

<UL>
<LI>
cause the modified files to carry prominent notices stating that
you changed the files and the date of any change; and
<P>

<LI>
cause the whole of any work that you distribute or publish, that
in whole or in part contains the Program or any part thereof, either
with or without modifications, to be licensed at no charge to all
third parties under the terms of this General Public License (except
that you may choose to grant warranty protection to some or all
third parties, at your option).
<P>

<LI>
If the modified program normally reads commands interactively when
run, you must cause it, when started running for such interactive use
in the simplest and most usual way, to print or display an
announcement including an appropriate copyright notice and a notice
that there is no warranty (or else, saying that you provide a
warranty) and that users may redistribute the program under these
conditions, and telling the user how to view a copy of this General
Public License.
<P>

<LI>
You may charge a fee for the physical act of transferring a
copy, and you may at your option offer warranty protection in
exchange for a fee.
</UL>
<P>

Mere aggregation of another independent work with the Program (or its
derivative) on a volume of a storage or distribution medium does not bring
the other work under the scope of these terms.
</P><P>

<LI>
You may copy and distribute the Program (or a portion or derivative of
it, under Paragraph 2) in object code or executable form under the terms of
Paragraphs 1 and 2 above provided that you also do one of the following:
<P>

<UL>
<LI>
accompany it with the complete corresponding machine-readable
source code, which must be distributed under the terms of
Paragraphs 1 and 2 above; or,
<P>

<LI>
accompany it with a written offer, valid for at least three
years, to give any third party free (except for a nominal charge
for the cost of distribution) a complete machine-readable copy of the
corresponding source code, to be distributed under the terms of
Paragraphs 1 and 2 above; or,
<P>

<LI>
accompany it with the information you received as to where the
corresponding source code may be obtained.  (This alternative is
allowed only for noncommercial distribution and only if you
received the program in object code or executable form alone.)
</UL>
<P>

Source code for a work means the preferred form of the work for making
modifications to it.  For an executable file, complete source code means
all the source code for all modules it contains; but, as a special
exception, it need not include source code for modules which are standard
libraries that accompany the operating system on which the executable
file runs, or for standard header files or definitions files that
accompany that operating system.
</P><P>

<LI>
You may not copy, modify, sublicense, distribute or transfer the
Program except as expressly provided under this General Public License.
Any attempt otherwise to copy, modify, sublicense, distribute or transfer
the Program is void, and will automatically terminate your rights to use
the Program under this License.  However, parties who have received
copies, or rights to use copies, from you under this General Public
License will not have their licenses terminated so long as such parties
remain in full compliance.
<P>

<LI>
By copying, distributing or modifying the Program (or any work based
on the Program) you indicate your acceptance of this license to do so,
and all its terms and conditions.
<P>

<LI>
Each time you redistribute the Program (or any work based on the
Program), the recipient automatically receives a license from the original
licensor to copy, distribute or modify the Program subject to these
terms and conditions.  You may not impose any further restrictions on the
recipients' exercise of the rights granted herein.
<P>

<LI>
The Free Software Foundation may publish revised and/or new versions
of the General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.
<P>

Each version is given a distinguishing version number.  If the Program
specifies a version number of the license which applies to it and "any
later version", you have the option of following the terms and conditions
either of that version or of any later version published by the Free
Software Foundation.  If the Program does not specify a version number of
the license, you may choose any version ever published by the Free Software
Foundation.
</P><P>

<LI>
If you wish to incorporate parts of the Program into other free
programs whose distribution conditions are different, write to the author
to ask for permission.  For software which is copyrighted by the Free
Software Foundation, write to the Free Software Foundation; we sometimes
make exceptions for this.  Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software and
of promoting the sharing and reuse of software generally.
<P>

<center>
 NO WARRANTY
</center>
</P><P>

<LI>
BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
REPAIR OR CORRECTION.
<P>

<LI>
IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL
ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT
LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES
SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE
WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN
ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
</OL>
<P>

<center>
 END OF TERMS AND CONDITIONS
</center>
</P><P>

<HR SIZE="6">
<A NAME="SEC3"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC2"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC4"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> Appendix: How to Apply These Terms to Your New Programs </H2>
<!--docid::SEC3::-->
<P>

  If you develop a new program, and you want it to be of the greatest
possible use to humanity, the best way to achieve this is to make it
free software which everyone can redistribute and change under these
terms.
</P><P>

  To do so, attach the following notices to the program.  It is safest to
attach them to the start of each source file to most effectively convey
the exclusion of warranty; and each file should have at least the
"copyright" line and a pointer to where the full notice is found.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre><VAR>one line to give the program's name and a brief idea of what it does.</VAR>
Copyright (C) 19<VAR>yy</VAR>  <VAR>name of author</VAR>

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 1, or (at your option)
any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
</FONT></pre></td></tr></table></P><P>

Also add information on how to contact you by electronic and paper mail.
</P><P>

If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Gnomovision version 69, Copyright (C) 19<VAR>yy</VAR> <VAR>name of author</VAR>
Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
This is free software, and you are welcome to redistribute it
under certain conditions; type `show c' for details.
</FONT></pre></td></tr></table></P><P>

The hypothetical commands `show w' and `show c' should show the
appropriate parts of the General Public License.  Of course, the
commands you use may be called something other than `show w' and `show
c'; they could even be mouse-clicks or menu items--whatever suits your
program.
</P><P>

You should also get your employer (if you work as a programmer) or your
school, if any, to sign a "copyright disclaimer" for the program, if
necessary.  Here a sample; alter the names:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Yoyodyne, Inc., hereby disclaims all copyright interest in the
program `Gnomovision' (a program to direct compilers to make passes
at assemblers) written by James Hacker.

<VAR>signature of Ty Coon</VAR>, 1 April 1989
Ty Coon, President of Vice
</pre></td></tr></table></P><P>

That's all there is to it!
</P><P>

<A NAME="Contributors"></A>
<HR SIZE="6">
<A NAME="SEC4"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC3"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC5"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC1"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC5"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> Contributors to GNU CC </H1>
<!--docid::SEC4::-->
<P>

In addition to Richard Stallman, several people have written parts
of GNU CC.
</P><P>

<UL>
<LI>
The idea of using RTL and some of the optimization ideas came from the
U. of Arizona Portable Optimizer, written by Jack Davidson and
Christopher Fraser.  See "Register Allocation and Exhaustive Peephole
Optimization", Software Practice and Experience 14 (9), Sept. 1984,
857-866.
<P>

<LI>
Paul Rubin wrote most of the preprocessor.
<P>

<LI>
Leonard Tower wrote parts of the parser, RTL generator, and RTL
definitions, and of the Vax machine description.
<P>

<LI>
Ted Lemon wrote parts of the RTL reader and printer.
<P>

<LI>
Jim Wilson implemented loop strength reduction and some other
loop optimizations.
<P>

<LI>
Nobuyuki Hikichi of Software Research Associates, Tokyo, contributed
the support for the Sony NEWS machine.
<P>

<LI>
Charles LaBrec contributed the support for the Integrated Solutions
68020 system.
<P>

<LI>
Michael Tiemann of MCC wrote most of the description of the National
Semiconductor 32000 series cpu.  He also wrote the code for inline
function integration and for the SPARC cpu and Motorola 88000 cpu
and part of the Sun FPA support.
<P>

<LI>
Jan Stein of the Chalmers Computer Society provided support for
Genix, as well as part of the 32000 machine description.
<P>

<LI>
Randy Smith finished the Sun FPA support.
<P>

<LI>
Robert Brown implemented the support for Encore 32000 systems.
<P>

<LI>
David Kashtan of SRI adapted GNU CC to the Vomit-Making System.
<P>

<LI>
Alex Crain provided changes for the 3b1.
<P>

<LI>
Greg Satz and Chris Hanson assisted in making GNU CC work on HP-UX for
the 9000 series 300.
<P>

<LI>
William Schelter did most of the work on the Intel 80386 support.
<P>

<LI>
Christopher Smith did the port for Convex machines.
<P>

<LI>
Paul Petersen wrote the machine description for the Alliant FX/8.
<P>

<LI>
Alain Lichnewsky ported GNU CC to the Mips cpu.
<P>

<LI>
Devon Bowen, Dale Wiles and Kevin Zachmann ported GNU CC to the Tahoe.
<P>

<LI>
Jonathan Stone wrote the machine description for the Pyramid computer.
</UL>
<P>

<A NAME="Boycott"></A>
<HR SIZE="6">
<A NAME="SEC5"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC4"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC6"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC4"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC6"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 1. Protect Your Freedom--Fight "Look And Feel" </H1>
<!--docid::SEC5::-->
<P>

<BLOCKQUOTE>
<I>This section is a political message from the League for Programming
Freedom to the users of GNU CC.  It is included here as an expression
of support for the League on the part of the Free Software Foundation
and Richard Stallman.</I>
</BLOCKQUOTE>
<P>

Ashton-Tate, Apple, Lotus and Xerox are trying to create a new form of
legal monopoly: a copyright on a class of user interfaces.  These
monopolies would cause serious problems for users and developers of
computer software and systems.
</P><P>

Until a few years ago, the law seemed clear: no one could restrict
others from using a user interface; programmers were free to implement
any interface they chose.  Imitating interfaces, sometimes with changes,
was standard practice in the computer field.  The interfaces we know
evolved gradually in this way; for example, the Macintosh user interface
drew ideas from the Xerox interface, which in turn drew on work done at
Stanford and SRI.  1-2-3 imitated VisiCalc, and dBase imitated a
database program from JPL.
</P><P>

Most computer companies, and nearly all computer users, were happy with
this state of affairs.  The companies that are suing say it does not
offer "enough incentive" to develop their products, but they must have
considered it "enough" when they made their decision to do so.  It
seems they are not satisfied with the opportunity to continue to compete
in the marketplace--not even with a head start.
</P><P>

If Xerox, Lotus, Apple and Ashton-Tate are permitted to make law through
the courts, the precedent will hobble the software industry:
</P><P>

<UL>
<LI>
Gratuitous incompatibilities will burden users.  Imagine if each
car manufacturer had to arrange the pedals in a different order.
<P>

<LI>
Software will become and remain more expensive.  Users will be
"locked in" to proprietary interfaces, for which there is no real
competition.
<P>

<LI>
Large companies have an unfair advantage wherever lawsuits become
commonplace.  Since they can easily afford to sue, they can intimidate
small companies with threats even when they don't really have a case.
<P>

<LI>
User interface improvements will come slower, since incremental
evolution through creative imitation will no longer be permitted.
<P>

<LI>
Even Apple, etc., will find it harder to make improvements if
they can no longer adapt the good ideas that others introduce, for
fear of weakening their own legal positions.  Some users suggest that
this stagnation may already have started.
<P>

<LI>
If you use GNU software, you might find it of some concern that user
interface copyright will make it hard for the Free Software Foundation
to develop programs compatible with the interfaces that you already
know.
</UL>
<P>

To protect our freedom from lawsuits like these, a group of programmers
and users have formed a new grass-roots political organization, the
League for Programming Freedom.
</P><P>

The purpose of the League is to oppose new monopolistic practices such
as user-interface copyright and software patents; it calls for a return
to the legal policies of the recent past, in which these practices were
not allowed.  The League is not concerned with free software as an
issue, and not affiliated with the Free Software Foundation.
</P><P>

The League's membership rolls include John McCarthy, inventor of Lisp,
Marvin Minsky, founder of the Artificial Intelligence lab, Guy L.
Steele, Jr., author of well-known books on Lisp and C, as well as
Richard Stallman, the developer of GNU CC.  Please join and add your
name to the list.  Membership dues in the League are $42 per year for
programmers, managers and professionals; $10.50 for students; $21 for
others.
</P><P>

The League needs both activist members and members who only pay their
dues.
</P><P>

To join, or for more information, phone (617) 492-0023 or write to:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>League for Programming Freedom
1 Kendall Square #143
P.O. Box 9171
Cambridge, MA 02139       league@prep.ai.mit.edu
</pre></td></tr></table></P><P>

Here are some suggestions from the League for how you can protect your
freedom to write programs:
</P><P>

<UL>
<LI>
Don't buy from Xerox, Lotus, Apple or Ashton-Tate.  Buy from their
competitors or from the defendants they are suing.
<P>

<LI>
Don't develop software to work with the systems made by these companies.
<P>

<LI>
Port your existing software to competing systems, so that you encourage
users to switch.
<P>

<LI>
Write letters to company presidents to let them know their conduct
is unacceptable.
<P>

<LI>
Tell your friends and colleagues about this issue and how it threatens
to ruin the computer industry.
<P>

<LI>
Above all, don't work for the look-and-feel plaintiffs, and don't
accept contracts from them.
<P>

<LI>
Write to Congress to explain the importance of this issue.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>House Subcommittee on Intellectual Property
2137 Rayburn Bldg
Washington, DC 20515

Senate Subcommittee on Patents, Trademarks and Copyrights
United States Senate
Washington, DC 20510
</pre></td></tr></table></UL>
<P>

Express your opinion!  You can make a difference.
</P><P>

<A NAME="Options"></A>
<HR SIZE="6">
<A NAME="SEC6"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC5"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC5"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 2. GNU CC Command Options </H1>
<!--docid::SEC6::-->
<P>

The GNU C compiler uses a command syntax much like the Unix C compiler.
The <CODE>gcc</CODE> program accepts options and file names as operands.
Multiple single-letter options may <EM>not</EM> be grouped: <SAMP>`-dr'</SAMP> is
very different from <SAMP>`-d -r'</SAMP>.
</P><P>

When you invoke GNU CC, it normally does preprocessing, compilation,
assembly and linking.  File names which end in <SAMP>`.c'</SAMP> are taken as C
source to be preprocessed and compiled; file names ending in <SAMP>`.i'</SAMP>
are taken as preprocessor output to be compiled; compiler output files
plus any input files with names ending in <SAMP>`.s'</SAMP> are assembled; then
the resulting object files, plus any other input files, are linked
together to produce an executable.
</P><P>

Command options allow you to stop this process at an intermediate stage.
For example, the <SAMP>`-c'</SAMP> option says not to run the linker.  Then the
output consists of object files output by the assembler.
</P><P>

Other command options are passed on to one stage of processing.  Some
options control the preprocessor and others the compiler itself.  Yet
other options control the assembler and linker; these are not documented
here, but you rarely need to use any of them.
</P><P>

Here are the options to control the overall compilation process, including
those that say whether to link, whether to assemble, and so on.
</P><P>

<DL COMPACT>
<DT><SAMP>`-o <VAR>file</VAR>'</SAMP>
<DD>Place output in file <VAR>file</VAR>.  This applies regardless to whatever
sort of output is being produced, whether it be an executable file,
an object file, an assembler file or preprocessed C code.
<P>

If <SAMP>`-o'</SAMP> is not specified, the default is to put an executable file
in <TT>`a.out'</TT>, the object file <TT>`<VAR>source</VAR>.c'</TT> in
<TT>`<VAR>source</VAR>.o'</TT>, an assembler file in <TT>`<VAR>source</VAR>.s'</TT>, and
preprocessed C on standard output.</P><P>

<DT><SAMP>`-c'</SAMP>
<DD>Compile or assemble the source files, but do not link.  Produce object
files with names made by replacing <SAMP>`.c'</SAMP> or <SAMP>`.s'</SAMP> with
<SAMP>`.o'</SAMP> at the end of the input file names.  Do nothing at all for
object files specified as input.
<P>

<DT><SAMP>`-S'</SAMP>
<DD>Compile into assembler code but do not assemble.  The assembler output
file name is made by replacing <SAMP>`.c'</SAMP> with <SAMP>`.s'</SAMP> at the end of
the input file name.  Do nothing at all for assembler source files or
object files specified as input.
<P>

<DT><SAMP>`-E'</SAMP>
<DD>Run only the C preprocessor.  Preprocess all the C source files
specified and output the results to standard output.
<P>

<DT><SAMP>`-v'</SAMP>
<DD>Compiler driver program prints the commands it executes as it runs
the preprocessor, compiler proper, assembler and linker.  Some of
these are directed to print their own version numbers.
<P>

<DT><SAMP>`-pipe'</SAMP>
<DD>Use pipes rather than temporary files for communication between the
various stages of compilation.  This fails to work on some systems
where the assembler is unable to read from a pipe; but the GNU
assembler has no trouble.
<P>

<DT><SAMP>`-B<VAR>prefix</VAR>'</SAMP>
<DD>Compiler driver program tries <VAR>prefix</VAR> as a prefix for each
program it tries to run.  These programs are <TT>`cpp'</TT>, <TT>`cc1'</TT>,
<TT>`as'</TT> and <TT>`ld'</TT>.
<P>

For each subprogram to be run, the compiler driver first tries the
<SAMP>`-B'</SAMP> prefix, if any.  If that name is not found, or if <SAMP>`-B'</SAMP>
was not specified, the driver tries two standard prefixes, which are
<TT>`/usr/lib/gcc-'</TT> and <TT>`/usr/local/lib/gcc-'</TT>.  If neither of
those results in a file name that is found, the unmodified program
name is searched for using the directories specified in your
<SAMP>`PATH'</SAMP> environment variable.
</P><P>

The run-time support file <TT>`gnulib'</TT> is also searched for using
the <SAMP>`-B'</SAMP> prefix, if needed.  If it is not found there, the two
standard prefixes above are tried, and that is all.  The file is left
out of the link if it is not found by those means.  Most of the time,
on most machines, you can do without it.
</P><P>

You can get a similar result from the environment variable;
<CODE>GCC_EXEC_PREFIX</CODE> if it is defined, its value is used as a prefix
in the same way.  If both the <SAMP>`-B'</SAMP> option and the
<CODE>GCC_EXEC_PREFIX</CODE> variable are present, the <SAMP>`-B'</SAMP> option is
used first and the environment variable value second.
</P><P>

<DT><SAMP>`-b<VAR>prefix</VAR>'</SAMP>
<DD>The argument <VAR>prefix</VAR> is used as a second prefix for the compiler
executables and libraries.  This prefix is optional: the compiler tries
each file first with it, then without it.  This prefix follows the
prefix specified with <SAMP>`-B'</SAMP> or the default prefixes.
<P>

Thus, <SAMP>`-bvax- -Bcc/'</SAMP> in the presence of environment variable
<CODE>GCC_EXEC_PREFIX</CODE> with definition <TT>`/u/foo/'</TT> causes GNU CC to
try the following file names for the preprocessor executable:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>cc/vax-cpp
cc/cpp
/u/foo/vax-cpp
/u/foo/cpp
/usr/local/lib/gcc-vax-cpp
/usr/local/lib/gcc-cpp
/usr/lib/gcc-vax-cpp
/usr/lib/gcc-cpp
</pre></td></tr></table></DL>
<P>

These options control the details of C compilation itself.
</P><P>

<DL COMPACT>
<DT><SAMP>`-ansi'</SAMP>
<DD>Support all ANSI standard C programs.
<P>

This turns off certain features of GNU C that are incompatible with
ANSI C, such as the <CODE>asm</CODE>, <CODE>inline</CODE> and <CODE>typeof</CODE>
keywords, and predefined macros such as <CODE>unix</CODE> and <CODE>vax</CODE>
that identify the type of system you are using.  It also enables the
undesirable and rarely used ANSI trigraph feature.
</P><P>

The alternate keywords <CODE>__asm__</CODE>, <CODE>__inline__</CODE> and
<CODE>__typeof__</CODE> continue to work despite <SAMP>`-ansi'</SAMP>.  You would not
want to use them in an ANSI C program, of course, but it useful to put
them in header files that might be included in compilations done with
<SAMP>`-ansi'</SAMP>.  Alternate predefined macros such as <CODE>__unix__</CODE> and
<CODE>__vax__</CODE> are also available, with or without <SAMP>`-ansi'</SAMP>.
</P><P>

The <SAMP>`-ansi'</SAMP> option does not cause non-ANSI programs to be
rejected gratuitously.  For that, <SAMP>`-pedantic'</SAMP> is required in
addition to <SAMP>`-ansi'</SAMP>.
</P><P>

The macro <CODE>__STRICT_ANSI__</CODE> is predefined when the <SAMP>`-ansi'</SAMP>
option is used.  Some header files may notice this macro and refrain
from declaring certain functions or defining certain macros that the
ANSI standard doesn't call for; this is to avoid interfering with any
programs that might use these names for other things.
</P><P>

<DT><SAMP>`-traditional'</SAMP>
<DD>Attempt to support some aspects of traditional C compilers.
Specifically:
<P>

<UL>
<LI>
All <CODE>extern</CODE> declarations take effect globally even if they
are written inside of a function definition.  This includes implicit
declarations of functions.
<P>

<LI>
The keywords <CODE>typeof</CODE>, <CODE>inline</CODE>, <CODE>signed</CODE>, <CODE>const</CODE>
and <CODE>volatile</CODE> are not recognized.  (You can still use the alternative
keywords such as <CODE>__typeof__</CODE>, <CODE>__inline__</CODE>, and so on.)
<P>

<LI>
Comparisons between pointers and integers are always allowed.
<P>

<LI>
Integer types <CODE>unsigned short</CODE> and <CODE>unsigned char</CODE> promote
to <CODE>unsigned int</CODE>.
<P>

<LI>
Out-of-range floating point literals are not an error.
<P>

<LI>
String "constants" are not necessarily constant; they are stored in
writable space, and identical looking constants are allocated
separately.
<P>

<LI>
All automatic variables not declared <CODE>register</CODE> are preserved by
<CODE>longjmp</CODE>.  Ordinarily, GNU C follows ANSI C: automatic variables
not declared <CODE>volatile</CODE> may be clobbered.
<P>

<LI>
In the preprocessor, comments convert to nothing at all, rather than
to a space.  This allows traditional token concatenation.
<P>

<LI>
In the preprocessor, macro arguments are recognized within string
constants in a macro definition (and their values are stringified,
though without additional quote marks, when they appear in such a
context).  The preprocessor always considers a string constant to end
at a newline.
<P>

<LI>
The predefined macro <CODE>__STDC__</CODE> is not defined when you use
<SAMP>`-traditional'</SAMP>, but <CODE>__GNUC__</CODE> is (since the GNU extensions
which <CODE>__GNUC__</CODE> indicates are not affected by
<SAMP>`-traditional'</SAMP>).  If you need to write header files that work
differently depending on whether <SAMP>`-traditional'</SAMP> is in use, by
testing both of these predefined macros you can distinguish four
situations: GNU C, traditional GNU C, other ANSI C compilers, and
other old C compilers.
</UL>
<P>

<DT><SAMP>`-O'</SAMP>
<DD>Optimize.  Optimizing compilation takes somewhat more time, and a lot
more memory for a large function.
<P>

Without <SAMP>`-O'</SAMP>, the compiler's goal is to reduce the cost of
compilation and to make debugging produce the expected results.
Statements are independent: if you stop the program with a breakpoint
between statements, you can then assign a new value to any variable or
change the program counter to any other statement in the function and
get exactly the results you would expect from the source code.
</P><P>

Without <SAMP>`-O'</SAMP>, only variables declared <CODE>register</CODE> are
allocated in registers.  The resulting compiled code is a little worse
than produced by PCC without <SAMP>`-O'</SAMP>.
</P><P>

With <SAMP>`-O'</SAMP>, the compiler tries to reduce code size and execution
time.
</P><P>

Some of the <SAMP>`-f'</SAMP> options described below turn specific kinds of
optimization on or off.
</P><P>

<DT><SAMP>`-g'</SAMP>
<DD>Produce debugging information in the operating system's native format
(for DBX or SDB).  GDB also can work with this debugging information.
<P>

Unlike most other C compilers, GNU CC allows you to use <SAMP>`-g'</SAMP> with
<SAMP>`-O'</SAMP>.  The shortcuts taken by optimized code may occasionally
produce surprising results: some variables you declared may not exist
at all; flow of control may briefly move where you did not expect it;
some statements may not be executed because they compute constant
results or their values were already at hand; some statements may
execute in different places because they were moved out of loops.
Nevertheless it proves possible to debug optimized output.  This makes
it reasonable to use the optimizer for programs that might have bugs.
</P><P>

<DT><SAMP>`-gg'</SAMP>
<DD>Produce debugging information in the old GDB format.  This is obsolete.
<P>

<DT><SAMP>`-w'</SAMP>
<DD>Inhibit all warning messages.
<P>

<DT><SAMP>`-W'</SAMP>
<DD>Print extra warning messages for these events:
<P>

<UL>
<LI>
An automatic variable is used without first being initialized.
<P>

These warnings are possible only in optimizing compilation,
because they require data flow information that is computed only
when optimizing.  If you don't specify <SAMP>`-O'</SAMP>, you simply won't
get these warnings.
</P><P>

These warnings occur only for variables that are candidates for
register allocation.  Therefore, they do not occur for a variable that
is declared <CODE>volatile</CODE>, or whose address is taken, or whose size
is other than 1, 2, 4 or 8 bytes.  Also, they do not occur for
structures, unions or arrays, even when they are in registers.
</P><P>

Note that there may be no warning about a variable that is used only
to compute a value that itself is never used, because such
computations may be deleted by data flow analysis before the warnings
are printed.
</P><P>

These warnings are made optional because GNU CC is not smart
enough to see all the reasons why the code might be correct
despite appearing to have an error.  Here is one example of how
this can happen:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>{
  int x;
  switch (y)
    {
    case 1: x = 1;
      break;
    case 2: x = 4;
      break;
    case 3: x = 5;
    }
  foo (x);
}
</pre></td></tr></table></P><P>

If the value of <CODE>y</CODE> is always 1, 2 or 3, then <CODE>x</CODE> is
always initialized, but GNU CC doesn't know this.  Here is
another common case:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>{
  int save_y;
  if (change_y) save_y = y, y = new_y;
  <small>...</small>
  if (change_y) y = save_y;
}
</pre></td></tr></table></P><P>

This has no bug because <CODE>save_y</CODE> is used only if it is set.
</P><P>

Some spurious warnings can be avoided if you declare as
<CODE>volatile</CODE> all the functions you use that never return.
See section <A HREF="gcc.html#SEC30">7.12 Declaring Attributes of Functions</A>.
</P><P>

<LI>
A nonvolatile automatic variable might be changed by a call to
<CODE>longjmp</CODE>.  These warnings as well are possible only in
optimizing compilation.
<P>

The compiler sees only the calls to <CODE>setjmp</CODE>.  It cannot know
where <CODE>longjmp</CODE> will be called; in fact, a signal handler could
call it at any point in the code.  As a result, you may get a warning
even when there is in fact no problem because <CODE>longjmp</CODE> cannot
in fact be called at the place which would cause a problem.
</P><P>

<LI>
A function can return either with or without a value.  (Falling
off the end of the function body is considered returning without
a value.)  For example, this function would evoke such a
warning:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>foo (a)
{
  if (a &#62; 0)
    return a;
}
</pre></td></tr></table></P><P>

Spurious warnings can occur because GNU CC does not realize that
certain functions (including <CODE>abort</CODE> and <CODE>longjmp</CODE>)
will never return.
</P><P>

<LI>
An expression-statement contains no side effects.
</UL>
<P>

In the future, other useful warnings may also be enabled by this
option.
</P><P>

<DT><SAMP>`-Wimplicit'</SAMP>
<DD>Warn whenever a function is implicitly declared.
<P>

<DT><SAMP>`-Wreturn-type'</SAMP>
<DD>Warn whenever a function is defined with a return-type that defaults
to <CODE>int</CODE>.  Also warn about any <CODE>return</CODE> statement with no
return-value in a function whose return-type is not <CODE>void</CODE>.
<P>

<DT><SAMP>`-Wunused'</SAMP>
<DD>Warn whenever a local variable is unused aside from its declaration,
whenever a function is declared static but never defined, and whenever
a statement computes a result that is explicitly not used.
<P>

<DT><SAMP>`-Wswitch'</SAMP>
<DD>Warn whenever a <CODE>switch</CODE> statement has an index of enumeral type
and lacks a <CODE>case</CODE> for one or more of the named codes of that
enumeration.  (The presence of a <CODE>default</CODE> label prevents this
warning.)  <CODE>case</CODE> labels outside the enumeration range also
provoke warnings when this option is used.
<P>

<DT><SAMP>`-Wcomment'</SAMP>
<DD>Warn whenever a comment-start sequence <SAMP>`/*'</SAMP> appears in a comment.
<P>

<DT><SAMP>`-Wtrigraphs'</SAMP>
<DD>Warn if any trigraphs are encountered (assuming they are enabled).
<P>

<DT><SAMP>`-Wall'</SAMP>
<DD>All of the above <SAMP>`-W'</SAMP> options combined.  These are all the
options which pertain to usage that we recommend avoiding and that we
believe is easy to avoid, even in conjunction with macros.
<P>

The other <SAMP>`-W<small>...</small>'</SAMP> options below are not implied by <SAMP>`-Wall'</SAMP>
because certain kinds of useful macros are almost impossible to write
without causing those warnings.
</P><P>

<DT><SAMP>`-Wshadow'</SAMP>
<DD>Warn whenever a local variable shadows another local variable.
<P>

<DT><SAMP>`-Wid-clash-<VAR>len</VAR>'</SAMP>
<DD>Warn whenever two distinct identifiers match in the first <VAR>len</VAR>
characters.  This may help you prepare a program that will compile
with certain obsolete, brain-damaged compilers.
<P>

<DT><SAMP>`-Wpointer-arith'</SAMP>
<DD>Warn about anything that depends on the "size of" a function type or
of <CODE>void</CODE>.  GNU C assigns these types a size of 1, for
convenience in calculations with <CODE>void *</CODE> pointers and pointers
to functions.
<P>

<DT><SAMP>`-Wcast-qual'</SAMP>
<DD>Warn whenever a pointer is cast so as to remove a type qualifier from
the target type.  For example, warn if a <CODE>const char *</CODE> is cast
to an ordinary <CODE>char *</CODE>.
<P>

<DT><SAMP>`-Wwrite-strings'</SAMP>
<DD>Give string constants the type <CODE>const char[<VAR>length</VAR>]</CODE> so that
copying the address of one into a non-<CODE>const</CODE> <CODE>char *</CODE>
pointer will get a warning.  These warnings will help you find at
compile time code that can try to write into a string constant, but
only if you have been very careful about using <CODE>const</CODE> in
declarations and prototypes.  Otherwise, it will just be a nuisance;
this is why we did not make <SAMP>`-Wall'</SAMP> request these warnings.
<P>

<DT><SAMP>`-p'</SAMP>
<DD>Generate extra code to write profile information suitable for the
analysis program <CODE>prof</CODE>.
<P>

<DT><SAMP>`-pg'</SAMP>
<DD>Generate extra code to write profile information suitable for the
analysis program <CODE>gprof</CODE>.
<P>

<DT><SAMP>`-a'</SAMP>
<DD>Generate extra code to write profile information for basic blocks, which
will record the number of times each basic block is executed.  This data
could be analyzed by a program like <CODE>tcov</CODE>.  Note, however, that
the format of the data is not what <CODE>tcov</CODE> expects.  Eventually GNU
<CODE>gprof</CODE> should be extended to process this data.
<P>

<DT><SAMP>`-l<VAR>library</VAR>'</SAMP>
<DD>Search a standard list of directories for a library named
<VAR>library</VAR>, which is actually a file named
<TT>`lib<VAR>library</VAR>.a'</TT>.  The linker uses this file as if it
had been specified precisely by name.
<P>

The directories searched include several standard system directories
plus any that you specify with <SAMP>`-L'</SAMP>.
</P><P>

Normally the files found this way are library files--archive files
whose members are object files.  The linker handles an archive file by
scanning through it for members which define symbols that have so far
been referenced but not defined.  But if the file that is found is an
ordinary object file, it is linked in the usual fashion.  The only
difference between using an <SAMP>`-l'</SAMP> option and specifying a file name
is that <SAMP>`-l'</SAMP> searches several directories.
</P><P>

<DT><SAMP>`-L<VAR>dir</VAR>'</SAMP>
<DD>Add directory <VAR>dir</VAR> to the list of directories to be searched
for <SAMP>`-l'</SAMP>.
<P>

<DT><SAMP>`-nostdlib'</SAMP>
<DD>Don't use the standard system libraries and startup files when linking.
Only the files you specify will be passed to the linker.
<P>

<DT><SAMP>`-m<VAR>machinespec</VAR>'</SAMP>
<DD>Machine-dependent option specifying something about the type of target
machine.  These options are defined by the macro
<CODE>TARGET_SWITCHES</CODE> in the machine description.  The default for
the options is also defined by that macro, which enables you to change
the defaults.<P>

These are the <SAMP>`-m'</SAMP> options defined in the 68000 machine
description:
</P><P>

<DL COMPACT>
<DT><SAMP>`-m68020'</SAMP>
<DD><DT><SAMP>`-mc68020'</SAMP>
<DD>Generate output for a 68020 (rather than a 68000).  This is the
default if you use the unmodified sources.
<P>

<DT><SAMP>`-m68000'</SAMP>
<DD><DT><SAMP>`-mc68000'</SAMP>
<DD>Generate output for a 68000 (rather than a 68020).
<P>

<DT><SAMP>`-m68881'</SAMP>
<DD>Generate output containing 68881 instructions for floating point.
This is the default if you use the unmodified sources.
<P>

<DT><SAMP>`-mfpa'</SAMP>
<DD>Generate output containing Sun FPA instructions for floating point.
<P>

<DT><SAMP>`-msoft-float'</SAMP>
<DD>Generate output containing library calls for floating point.
<P>

<DT><SAMP>`-mshort'</SAMP>
<DD>Consider type <CODE>int</CODE> to be 16 bits wide, like <CODE>short int</CODE>.
<P>

<DT><SAMP>`-mnobitfield'</SAMP>
<DD>Do not use the bit-field instructions.  <SAMP>`-m68000'</SAMP> implies
<SAMP>`-mnobitfield'</SAMP>.
<P>

<DT><SAMP>`-mbitfield'</SAMP>
<DD>Do use the bit-field instructions.  <SAMP>`-m68020'</SAMP> implies
<SAMP>`-mbitfield'</SAMP>.  This is the default if you use the unmodified
sources.
<P>

<DT><SAMP>`-mrtd'</SAMP>
<DD>Use a different function-calling convention, in which functions
that take a fixed number of arguments return with the <CODE>rtd</CODE>
instruction, which pops their arguments while returning.  This
saves one instruction in the caller since there is no need to pop
the arguments there.
<P>

This calling convention is incompatible with the one normally
used on Unix, so you cannot use it if you need to call libraries
compiled with the Unix compiler.
</P><P>

Also, you must provide function prototypes for all functions that
take variable numbers of arguments (including <CODE>printf</CODE>);
otherwise incorrect code will be generated for calls to those
functions.
</P><P>

In addition, seriously incorrect code will result if you call a
function with too many arguments.  (Normally, extra arguments are
harmlessly ignored.)
</P><P>

The <CODE>rtd</CODE> instruction is supported by the 68010 and 68020
processors, but not by the 68000.
</DL>
<P>

These <SAMP>`-m'</SAMP> options are defined in the Vax machine description:
</P><P>

<DL COMPACT>
<DT><SAMP>`-munix'</SAMP>
<DD>Do not output certain jump instructions (<CODE>aobleq</CODE> and so on)
that the Unix assembler for the Vax cannot handle across long
ranges.
<P>

<DT><SAMP>`-mgnu'</SAMP>
<DD>Do output those jump instructions, on the assumption that you
will assemble with the GNU assembler.
<P>

<DT><SAMP>`-mg'</SAMP>
<DD>Output code for g-format floating point numbers instead of d-format.
</DL>
<P>

These <SAMP>`-m'</SAMP> switches are supported on the Sparc:
</P><P>

<DL COMPACT>
<DT><SAMP>`-mfpu'</SAMP>
<DD>Generate output containing floating point instructions.  This is the
default if you use the unmodified sources.
<P>

<DT><SAMP>`-mno-epilogue'</SAMP>
<DD>Generate separate return instructions for <CODE>return</CODE> statements.
This has both advantages and disadvantages; I don't recall what they
are.
</DL>
<P>

These <SAMP>`-m'</SAMP> options are defined in the Convex machine description:
</P><P>

<DL COMPACT>
<DT><SAMP>`-mc1'</SAMP>
<DD>Generate output for a C1.  This is the default when the compiler is
configured for a C1.
<P>

<DT><SAMP>`-mc2'</SAMP>
<DD>Generate output for a C2.  This is the default when the compiler is
configured for a C2.
<P>

<DT><SAMP>`-margcount'</SAMP>
<DD>Generate code which puts an argument count in the word preceding each
argument list.  Some nonportable Convex and Vax programs need this
word.  (Debuggers don't; this info is in the symbol table.)
<P>

<DT><SAMP>`-mnoargcount'</SAMP>
<DD>Omit the argument count word.  This is the default if you use the
unmodified sources.
</DL>
<P>

<DT><SAMP>`-f<VAR>flag</VAR>'</SAMP>
<DD>Specify machine-independent flags.  Most flags have both positive and
negative forms; the negative form of <SAMP>`-ffoo'</SAMP> would be
<SAMP>`-fno-foo'</SAMP>.  In the table below, only one of the forms is
listed--the one which is not the default.  You can figure out the
other form by either removing <SAMP>`no-'</SAMP> or adding it.
<P>

<DL COMPACT>
<DT><SAMP>`-fpcc-struct-return'</SAMP>
<DD>Use the same convention for returning <CODE>struct</CODE> and <CODE>union</CODE>
values that is used by the usual C compiler on your system.  This
convention is less efficient for small structures, and on many
machines it fails to be reentrant; but it has the advantage of
allowing intercallability between GCC-compiled code and PCC-compiled
code.
<P>

<DT><SAMP>`-ffloat-store'</SAMP>
<DD>Do not store floating-point variables in registers.  This
prevents undesirable excess precision on machines such as the
68000 where the floating registers (of the 68881) keep more
precision than a <CODE>double</CODE> is supposed to have.
<P>

For most programs, the excess precision does only good, but a few
programs rely on the precise definition of IEEE floating point.
Use <SAMP>`-ffloat-store'</SAMP> for such programs.
</P><P>

<DT><SAMP>`-fno-asm'</SAMP>
<DD>Do not recognize <CODE>asm</CODE>, <CODE>inline</CODE> or <CODE>typeof</CODE> as a
keyword.  These words may then be used as identifiers.  You can
use <CODE>__asm__</CODE>, <CODE>__inline__</CODE> and <CODE>__typeof__</CODE> instead.
<P>

<DT><SAMP>`-fno-defer-pop'</SAMP>
<DD>Always pop the arguments to each function call as soon as that
function returns.  Normally the compiler (when optimizing) lets
arguments accumulate on the stack for several function calls and
pops them all at once.
<P>

<DT><SAMP>`-fstrength-reduce'</SAMP>
<DD>Perform the optimizations of loop strength reduction and
elimination of iteration variables.
<P>

<DT><SAMP>`-fcombine-regs'</SAMP>
<DD>Allow the combine pass to combine an instruction that copies one
register into another.  This might or might not produce better
code when used in addition to <SAMP>`-O'</SAMP>.  I am interested in
hearing about the difference this makes.
<P>

<DT><SAMP>`-fforce-mem'</SAMP>
<DD>Force memory operands to be copied into registers before doing
arithmetic on them.  This may produce better code by making all
memory references potential common subexpressions.  When they are
not common subexpressions, instruction combination should
eliminate the separate register-load.  I am interested in hearing
about the difference this makes.
<P>

<DT><SAMP>`-fforce-addr'</SAMP>
<DD>Force memory address constants to be copied into registers before
doing arithmetic on them.  This may produce better code just as
<SAMP>`-fforce-mem'</SAMP> may.  I am interested in hearing about the
difference this makes.
<P>

<DT><SAMP>`-fomit-frame-pointer'</SAMP>
<DD>Don't keep the frame pointer in a register for functions that
don't need one.  This avoids the instructions to save, set up and
restore frame pointers; it also makes an extra register available
in many functions.  <STRONG>It also makes debugging impossible.</STRONG>
<P>

On some machines, such as the Vax, this flag has no effect,
because the standard calling sequence automatically handles the
frame pointer and nothing is saved by pretending it doesn't
exist.  The machine-description macro
<CODE>FRAME_POINTER_REQUIRED</CODE> controls whether a target machine
supports this flag.  See section <A HREF="gcc.html#SEC85">14.3 Register Usage</A>.</P><P>

<DT><SAMP>`-finline-functions'</SAMP>
<DD>Integrate all simple functions into their callers.  The compiler
heuristically decides which functions are simple enough to be
worth integrating in this way.
<P>

If all calls to a given function are integrated, and the function
is declared <CODE>static</CODE>, then the function is normally not
output as assembler code in its own right.
</P><P>

<DT><SAMP>`-fcaller-saves'</SAMP>
<DD>Enable values to be allocated in registers that will be clobbered by
function calls, by emitting extra instructions to save and restore the
registers around such calls.  Such allocation is done only when it
seems to result in better code than would otherwise be produced.
<P>

This option is enabled by default on certain machines, usually those
which have no call-preserved registers to use instead.
</P><P>

<DT><SAMP>`-fkeep-inline-functions'</SAMP>
<DD>Even if all calls to a given function are integrated, and the
function is declared <CODE>static</CODE>, nevertheless output a
separate run-time callable version of the function.
<P>

<DT><SAMP>`-fwritable-strings'</SAMP>
<DD>Store string constants in the writable data segment and don't uniquize
them.  This is for compatibility with old programs which assume they can
write into string constants.  <SAMP>`-traditional'</SAMP> also has this effect.
<P>

Writing into string constants is a very bad idea; "constants" should
be constant.
</P><P>

<DT><SAMP>`-fcond-mismatch'</SAMP>
<DD>Allow conditional expressions with mismatched types in the second and
third arguments.  The value of such an expression is void.
<P>

<DT><SAMP>`-fno-function-cse'</SAMP>
<DD>Do not put function addresses in registers; make each instruction
that calls a constant function contain the function's address
explicitly.
<P>

This option results in less efficient code, but some strange
hacks that alter the assembler output may be confused by the
optimizations performed when this option is not used.
</P><P>

<DT><SAMP>`-fvolatile'</SAMP>
<DD>Consider all memory references through pointers to be volatile.
<P>

<DT><SAMP>`-fshared-data'</SAMP>
<DD>Requests that the data and non-<CODE>const</CODE> variables of this
compilation be shared data rather than private data.  The distinction
makes sense only on certain operating systems, where shared data is
shared between processes running the same program, while private data
exists in one copy per process.
<P>

<DT><SAMP>`-funsigned-char'</SAMP>
<DD>Let the type <CODE>char</CODE> be the unsigned, like <CODE>unsigned char</CODE>.
<P>

Each kind of machine has a default for what <CODE>char</CODE> should
be.  It is either like <CODE>unsigned char</CODE> by default or like
<CODE>signed char</CODE> by default.  (Actually, at present, the
default is always signed.)
</P><P>

The type <CODE>char</CODE> is always a distinct type from either
<CODE>signed char</CODE> or <CODE>unsigned char</CODE>, even though its
behavior is always just like one of those two.
</P><P>

Note that this is equivalent to <SAMP>`-fno-signed-char'</SAMP>, which is the
negative form of <SAMP>`-fsigned-char'</SAMP>.
</P><P>

<DT><SAMP>`-fsigned-char'</SAMP>
<DD>Let the type <CODE>char</CODE> be signed, like <CODE>signed char</CODE>.
<P>

Note that this is equivalent to <SAMP>`-fno-unsigned-char'</SAMP>, which is
the negative form of <SAMP>`-funsigned-char'</SAMP>.
</P><P>

<DT><SAMP>`-fdelayed-branch'</SAMP>
<DD>If supported for the target machine, attempt to reorder instructions
to exploit instruction slots available after delayed branch
instructions.
<P>

<DT><SAMP>`-ffixed-<VAR>reg</VAR>'</SAMP>
<DD>Treat the register named <VAR>reg</VAR> as a fixed register; generated
code should never refer to it (except perhaps as a stack pointer,
frame pointer or in some other fixed role).
<P>

<VAR>reg</VAR> must be the name of a register.  The register names
accepted are machine-specific and are defined in the
<CODE>REGISTER_NAMES</CODE> macro in the machine description macro
file.
</P><P>

This flag does not have a negative form, because it specifies a
three-way choice.
</P><P>

<DT><SAMP>`-fcall-used-<VAR>reg</VAR>'</SAMP>
<DD>Treat the register named <VAR>reg</VAR> as an allocatable register
that is clobbered by function calls.  It may be allocated for
temporaries or variables that do not live across a call.
Functions compiled this way will not save and restore the
register <VAR>reg</VAR>.
<P>

Use of this flag for a register that has a fixed pervasive role
in the machine's execution model, such as the stack pointer or
frame pointer, will produce disastrous results.
</P><P>

This flag does not have a negative form, because it specifies a
three-way choice.
</P><P>

<DT><SAMP>`-fcall-saved-<VAR>reg</VAR>'</SAMP>
<DD>Treat the register named <VAR>reg</VAR> as an allocatable register
saved by functions.  It may be allocated even for temporaries or
variables that live across a call.  Functions compiled this way
will save and restore the register <VAR>reg</VAR> if they use it.
<P>

Use of this flag for a register that has a fixed pervasive role
in the machine's execution model, such as the stack pointer or
frame pointer, will produce disastrous results.
</P><P>

A different sort of disaster will result from the use of this
flag for a register in which function values may be returned.
</P><P>

This flag does not have a negative form, because it specifies a
three-way choice.
</DL>
<P>

<DT><SAMP>`-d<VAR>letters</VAR>'</SAMP>
<DD>Says to make debugging dumps at times specified by <VAR>letters</VAR>.
Here are the possible letters:
<P>

<DL COMPACT>
<DT><SAMP>`r'</SAMP>
<DD>Dump after RTL generation.
<DT><SAMP>`j'</SAMP>
<DD>Dump after first jump optimization.
<DT><SAMP>`s'</SAMP>
<DD>Dump after CSE (including the jump optimization that sometimes
follows CSE).
<DT><SAMP>`L'</SAMP>
<DD>Dump after loop optimization.
<DT><SAMP>`f'</SAMP>
<DD>Dump after flow analysis.
<DT><SAMP>`c'</SAMP>
<DD>Dump after instruction combination.
<DT><SAMP>`l'</SAMP>
<DD>Dump after local register allocation.
<DT><SAMP>`g'</SAMP>
<DD>Dump after global register allocation.
<DT><SAMP>`d'</SAMP>
<DD>Dump after delayed branch scheduling.
<DT><SAMP>`J'</SAMP>
<DD>Dump after last jump optimization.
<DT><SAMP>`m'</SAMP>
<DD>Print statistics on memory usage, at the end of the run.
</DL>
<P>

<DT><SAMP>`-pedantic'</SAMP>
<DD>Issue all the warnings demanded by strict ANSI standard C; reject
all programs that use forbidden extensions.
<P>

Valid ANSI standard C programs should compile properly with or without
this option (though a rare few will require <SAMP>`-ansi'</SAMP>).  However,
without this option, certain GNU extensions and traditional C features
are supported as well.  With this option, they are rejected.  There is
no reason to <I>use</I> this option; it exists only to satisfy pedants.
</P><P>

<SAMP>`-pedantic'</SAMP> does not cause warning messages for use of the
alternate keywords whose names begin and end with <SAMP>`__'</SAMP>.
See section <A HREF="gcc.html#SEC39">7.19 Alternate Keywords</A>.
</P><P>

<DT><SAMP>`-static'</SAMP>
<DD>On Suns running version 4, this prevents linking with the shared
libraries.  (<SAMP>`-g'</SAMP> has the same effect.)
</DL>
<P>

These options control the C preprocessor, which is run on each C source
file before actual compilation.  If you use the <SAMP>`-E'</SAMP> option, nothing
is done except C preprocessing.  Some of these options make sense only
together with <SAMP>`-E'</SAMP> because they request preprocessor output that is
not suitable for actual compilation.
</P><P>

<DL COMPACT>
<DT><SAMP>`-C'</SAMP>
<DD>Tell the preprocessor not to discard comments.  Used with the
<SAMP>`-E'</SAMP> option.
<P>

<DT><SAMP>`-I<VAR>dir</VAR>'</SAMP>
<DD>Search directory <VAR>dir</VAR> for include files.
<P>

<DT><SAMP>`-I-'</SAMP>
<DD>Any directories specified with <SAMP>`-I'</SAMP> options before the <SAMP>`-I-'</SAMP>
option are searched only for the case of <SAMP>`#include "<VAR>file</VAR>"'</SAMP>;
they are not searched for <SAMP>`#include &#60;<VAR>file</VAR>&#62;'</SAMP>.
<P>

If additional directories are specified with <SAMP>`-I'</SAMP> options after
the <SAMP>`-I-'</SAMP>, these directories are searched for all <SAMP>`#include'</SAMP>
directives.  (Ordinarily <EM>all</EM> <SAMP>`-I'</SAMP> directories are used
this way.)
</P><P>

In addition, the <SAMP>`-I-'</SAMP> option inhibits the use of the current
directory (where the current input file came from) as the first search
directory for <SAMP>`#include "<VAR>file</VAR>"'</SAMP>.  There is no way to override
this effect of <SAMP>`-I-'</SAMP>.  With <SAMP>`-I.'</SAMP> you can specify searching
the directory which was current when the compiler was invoked.  That is
not exactly the same as what the preprocessor does by default, but it is
often satisfactory.
</P><P>

<SAMP>`-I-'</SAMP> does not inhibit the use of the standard system directories
for header files.  Thus, <SAMP>`-I-'</SAMP> and <SAMP>`-nostdinc'</SAMP> are
independent.
</P><P>

<DT><SAMP>`-i <VAR>file</VAR>'</SAMP>
<DD>Process <VAR>file</VAR> as input, discarding the resulting output, before
processing the regular input file.  Because the output generated from
<VAR>file</VAR> is discarded, the only effect of <SAMP>`-i <VAR>file</VAR>'</SAMP> is to
make the macros defined in <VAR>file</VAR> available for use in the main
input.
<P>

<DT><SAMP>`-nostdinc'</SAMP>
<DD>Do not search the standard system directories for header files.  Only
the directories you have specified with <SAMP>`-I'</SAMP> options (and the
current directory, if appropriate) are searched.
<P>

Between <SAMP>`-nostdinc'</SAMP> and <SAMP>`-I-'</SAMP>, you can eliminate all
directories from the search path except those you specify.
</P><P>

<DT><SAMP>`-M'</SAMP>
<DD>Tell the preprocessor to output a rule suitable for <CODE>make</CODE>
describing the dependencies of each object file.  For each source
file, the preprocessor outputs one <CODE>make</CODE>-rule whose target is
the object file name for that source file and whose dependencies are
all the files <SAMP>`#include'</SAMP>d in it.  This rule may be a single line
or may be continued with <SAMP>`\'</SAMP>-newline if it is long.
<P>

<SAMP>`-M'</SAMP> implies <SAMP>`-E'</SAMP>.
</P><P>

<DT><SAMP>`-MM'</SAMP>
<DD>Like <SAMP>`-M'</SAMP> but the output mentions only the user-header files
included with <SAMP>`#include "<VAR>file</VAR>"'</SAMP>.  System header files
included with <SAMP>`#include &#60;<VAR>file</VAR>&#62;'</SAMP> are omitted.
<P>

<SAMP>`-MM'</SAMP> implies <SAMP>`-E'</SAMP>.
</P><P>

<DT><SAMP>`-D<VAR>macro</VAR>'</SAMP>
<DD>Define macro <VAR>macro</VAR> with the  string <SAMP>`1'</SAMP> as its definition.
<P>

<DT><SAMP>`-D<VAR>macro</VAR>=<VAR>defn</VAR>'</SAMP>
<DD>Define macro <VAR>macro</VAR> as <VAR>defn</VAR>.
<P>

<DT><SAMP>`-U<VAR>macro</VAR>'</SAMP>
<DD>Undefine macro <VAR>macro</VAR>.
<P>

<DT><SAMP>`-trigraphs'</SAMP>
<DD>Support ANSI C trigraphs.  You don't want to know about this
brain-damage.  The <SAMP>`-ansi'</SAMP> option also has this effect.
</DL>
<P>

<A NAME="Installation"></A>
<HR SIZE="6">
<A NAME="SEC7"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC6"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC8"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC6"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 3. Installing GNU CC </H1>
<!--docid::SEC7::-->
<P>

Here is the procedure for installing GNU CC on a Unix system.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC8">3.1 Compilation in a Separate Directory</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Compiling in a separate directory (not where the source is).</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC9">3.2 Installing GNU CC on the Sun</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">See below for installation on the Sun.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC11">3.4 Installing GNU CC on SCO System V 3.2</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">See below for installation on SCO System V 3.2.  (Or ESIX.)</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC12">3.5 Installing GNU CC on VMS</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">See below for installation on VMS.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC13">3.6 Installing GNU CC on HPUX</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">See below for installation on HPUX.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC14">3.7 Installing GNU CC on an NCR Tower</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">See below for installation on an NCR Tower.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<OL>
<LI>
Edit <TT>`Makefile'</TT>.  If you are using HPUX, or any form of system V,
you must make a few changes described in comments at the beginning of
the file.  Genix requires changes also, and so does the Pyramid.
<P>

<LI>
On a Sequent system, go to the Berkeley universe.
<P>

<LI>
Choose configuration files.  The easy way to do this is to run the
command file <TT>`config.gcc'</TT> with a single argument, which specifies
the type of machine (and in some cases which operating system).
<P>

Here is a list of the possible arguments:
</P><P>

<DL COMPACT>
<DT><SAMP>`vax'</SAMP>
<DD>Vaxes running BSD.
<DT><SAMP>`vms'</SAMP>
<DD>Vaxes running VMS.
<DT><SAMP>`vax-sysv'</SAMP>
<DD>Vaxes running system V.
<DT><SAMP>`i386-sysv'</SAMP>
<DD>Intel 386 PCs running system V.
<DT><SAMP>`i386-sysv-gas'</SAMP>
<DD>Intel 386 PCs running system V, using the GNU assembler and GNU
linker.
<DT><SAMP>`sequent-i386'</SAMP>
<DD>Sequent with Intel 386 processors.
<DT><SAMP>`i386-aix'</SAMP>
<DD>Intel 386 PCs or PS/2s running AIX.
<DT><SAMP>`sun2'</SAMP>
<DD>Sun 2 running system version 2 or 3.
<DT><SAMP>`sun3'</SAMP>
<DD>Sun 3 running system version 4, with 68881.
Note there we do not provide a configuration file to use an FPA
by default, because programs that establish signal handlers for
floating point traps inherently cannot work with the FPA.
<DT><SAMP>`sun3-nfp'</SAMP>
<DD>Sun 3 running system version 4, without 68881.
<DT><SAMP>`sun4'</SAMP>
<DD>Sun 4 running system version 4.  See section <A HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A>,
for calling convention incompatibilities on the Sun 4 (sparc).
<DT><SAMP>`sun2-os4'</SAMP>
<DD>Sun 2 running system version 4.
<DT><SAMP>`sun3-os3'</SAMP>
<DD>Sun 3 running system version 2 or 3, with 68881.
<DT><SAMP>`sun3-nfp-os3'</SAMP>
<DD>Sun 3 running system version 2 or 3, without 68881.
<DT><SAMP>`sun4-os3'</SAMP>
<DD>Sun 4 running system version 2 or 3.  See section <A HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A>,
for calling convention incompatibilities on the Sun 4 (sparc).
<DT><SAMP>`sun386'</SAMP>
<DD>Sun 386 ("roadrunner").
<DT><SAMP>`alliant'</SAMP>
<DD>Alliant FX/8 computer.  Note that the standard installed C compiler in
Concentrix 5.0 has a bug which prevent it from compiling GNU CC
correctly.  You can patch the compiler bug as follows:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>cp /bin/pcc ./pcc
adb -w ./pcc - &#60;&#60; EOF
15f6?w 6610
EOF
</pre></td></tr></table></P><P>

Then you must use the <SAMP>`-ip12'</SAMP> option when compiling GNU CC
with the patched compiler, as shown here:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make CC="./pcc -ip12" CFLAGS=-w
</pre></td></tr></table></P><P>

Note also that Alliant's version of DBX does not manage to work with the
output from GNU CC.
<DT><SAMP>`tahoe'</SAMP>
<DD>The tahoe computer (running BSD, and using DBX).
<DT><SAMP>`decstation'</SAMP>
<DD>The DEC 3100 Mips machine ("pmax").  Note that GNU CC cannot generate
debugging information in the unusual format used on the Mips.
<DT><SAMP>`mips-sysv'</SAMP>
<DD>The Mips computer, RS series, with the System V environment as default.
Note that GNU CC cannot generate debugging information in the unusual
format used on the Mips.
<DT><SAMP>`mips-bsd43'</SAMP>
<DD>The Mips computer, RS series, with the BSD 4.3 environment as default.
Note that GNU CC cannot generate debugging information in the unusual
format used on the Mips.
<DT><SAMP>`mips'</SAMP>
<DD>The Mips computer, M series.  Note that GNU CC cannot generate debugging
information in the unusual format used on the Mips.
<DT><SAMP>`iris'</SAMP>
<DD>Another variant of the Mips computer, the Silicon Graphics Iris 4D.
Note that GNU CC cannot generate debugging information in the unusual
format used on the Mips.
<DT><SAMP>`convex-c1'</SAMP>
<DD>Convex C1 computer.  With operating system version 9, use <SAMP>`cc -pcc'</SAMP>
as the compilation command when building stage 1 of GNU CC.
<DT><SAMP>`convex-c2'</SAMP>
<DD>Convex C2 computer.  With operating system version 9, use <SAMP>`cc -pcc'</SAMP>
as the compilation command when building stage 1 of GNU CC.
<DT><SAMP>`pyramid'</SAMP>
<DD>Pyramid computer.
<DT><SAMP>`hp9k320'</SAMP>
<DD>HP 9000 series 300 using HPUX assembler.  Note there is no
support in GNU CC for HP's debugger; thus, <SAMP>`-g'</SAMP> is not
available in this configuration.
<DT><SAMP>`hp9k320-gas'</SAMP>
<DD>HP 9000 series 300 using GNU assembler, linker and debugger.
This requires the HP-adapt package, which is available along with
the GNU linker as part of the "binutils" distribution.
This is on the GNU CC distribution tape.
<DT><SAMP>`hp9k320-old'</SAMP>
<DD>HP 9000 series 300 using HPUX assembler, in operating system versions
older than 6.5.  Note there is no support in GNU CC for HP's debugger;
thus, <SAMP>`-g'</SAMP> is not available in this configuration.
<DT><SAMP>`hp9k320-bsd'</SAMP>
<DD>HP 9000 series 300 running BSD.
<DT><SAMP>`hp9k200-bsd'</SAMP>
<DD>HP 9000 series 200 running BSD.  Note that the C compiler that comes
with this system cannot compile GNU CC; contact <CODE>law@super.org</CODE> to
get binaries of GNU CC for bootstrapping.  Additionally, a minor patch
is necessary if you wish to build kernels with GNU CC; contact
<CODE>law@super.org</CODE> to get a copy of the patch.
<DT><SAMP>`isi68'</SAMP>
<DD>ISI 68000 or 68020 system with a 68881.
<DT><SAMP>`isi68-nfp'</SAMP>
<DD>ISI 68000 or 68020 system without a 68881.
<DT><SAMP>`news800'</SAMP>
<DD>Sony NEWS 68020 system.
<DT><SAMP>`next'</SAMP>
<DD>NeXT system.
<DT><SAMP>`tower'</SAMP>
<DD>NCR Tower 32 system.
<DT><SAMP>`altos'</SAMP>
<DD>Altos 3068.  Note that you must use the GNU assembler, linker and
debugger, with COFF-encapsulation.  Also, you must fix a kernel
bug.  Details in the file <TT>`ALTOS-README'</TT>.
<DT><SAMP>`3b1'</SAMP>
<DD>AT&#38;T 3b1, a.k.a. 7300 PC.  Note that special procedures are needed
to compile GNU CC with this machine's standard C compiler, due to
bugs in that compiler.  See section <A HREF="gcc.html#SEC10">3.3 Installing GNU CC on the 3b1</A>.  You can bootstrap it
more easily with previous versions of GNU CC if you have them.
<DT><SAMP>`3b1-gas'</SAMP>
<DD>AT&#38;T 3b1 using the GNU assembler.
<DT><SAMP>`sequent-ns32k'</SAMP>
<DD>Sequent containing ns32000 processors.
<DT><SAMP>`encore'</SAMP>
<DD>Encore ns32000 system.
<DT><SAMP>`genix'</SAMP>
<DD>National Semiconductor ns32000 system.
<DT><SAMP>`88000'</SAMP>
<DD>Motorola 88000 processor.  This port is not finished.
</DL>
<P>

Here we spell out what files need to be set up:
</P><P>

<UL>
<LI>
Make a symbolic link named <TT>`config.h'</TT> to the top-level
config file for the machine you are using (see section <A HREF="gcc.html#SEC95">15. The Configuration File</A>).  This
file is responsible for defining information about the host
machine.  It includes <TT>`tm.h'</TT>.
<P>

The file is located in the subdirectory <TT>`config'</TT>.  Its name
should be <TT>`xm-<VAR>machine</VAR>.h'</TT>, with these exceptions:
</P><P>

<DL COMPACT>
<DT><TT>`xm-vms.h'</TT>
<DD>for vaxen running VMS.
<DT><TT>`xm-vaxv.h'</TT>
<DD>for vaxen running system V.
<DT><TT>`xm-i386v.h'</TT>
<DD>for Intel 80386's running system V.
<DT><TT>`xm-sun386i.h'</TT>
<DD>for Sun roadrunner running any version of the operating system.
<DT><TT>`xm-hp9k320.h'</TT>
<DD>for the HP 9000 series 300.
<DT><TT>`xm-genix.h'</TT>
<DD>for the ns32000 running Genix
</DL>
<P>

If your system does not support symbolic links, you might want to
set up <TT>`config.h'</TT> to contain a <SAMP>`#include'</SAMP> command which
refers to the appropriate file.
</P><P>

<LI>
Make a symbolic link named <TT>`tm.h'</TT> to the machine-description
macro file for your machine.  It should be in the subdirectory
<TT>`config'</TT> and its name should be <TT>`tm-<VAR>machine</VAR>.h'</TT>.
<P>

If your system is a 68000, don't use the file <TT>`tm-m68k.h'</TT>
directly.  Instead, use one of these files:
</P><P>

<DL COMPACT>
<DT><TT>`tm-sun3.h'</TT>
<DD>for Sun 3 machines with 68881.
<DT><TT>`tm-sun3-nfp.h'</TT>
<DD>for Sun 3 machines with no hardware floating point.
<DT><TT>`tm-sun3os3.h'</TT>
<DD>for Sun 3 machines with 68881, running Sunos version 3.
<DT><TT>`tm-sun3os3nf.h'</TT>
<DD>for Sun 3 machines with no hardware floating point, running Sunos
version 3.
<DT><TT>`tm-sun2.h'</TT>
<DD>for Sun 2 machines.
<DT><TT>`tm-3b1.h'</TT>
<DD>for AT&#38;T 3b1 (aka 7300 Unix PC).
<DT><TT>`tm-isi68.h'</TT>
<DD>for Integrated Solutions systems.  This file assumes you
use the GNU assembler.
<DT><TT>`tm-isi68-nfp.h'</TT>
<DD>for Integrated Solutions systems without a 68881.  This file assumes you
use the GNU assembler.
<DT><TT>`tm-news800.h'</TT>
<DD>for Sony NEWS systems.
<DT><TT>`tm-hp9k320.h'</TT>
<DD>for HPUX systems, if you are using GNU CC with the system's
assembler and linker.
<DT><TT>`tm-hp9k320g.h'</TT>
<DD>for HPUX systems, if you are using the GNU assembler, linker and
other utilities.  Not all of the pieces of GNU software needed
for this mode of operation are as yet in distribution; full
instructions will appear here in the future.<DT><TT>`tm-tower-as.h'</TT>
<DD>for NCR Tower 32 systems, using the standard system assembler.
</DL>
<P>

For the vax, use <TT>`tm-vax.h'</TT> on BSD Unix, <TT>`tm-vaxv.h'</TT> on
system V, or <TT>`tm-vms.h'</TT> on VMS.</P><P>

For the Motorola 88000, use <TT>`tm-m88k.h'</TT>.  The support for the
88000 does not currently work; it requires extensive changes which
we hope to reconcile in version 2.
</P><P>

For the 80386, don't use <TT>`tm-i386.h'</TT> directly.  Use
<TT>`tm-i386v.h'</TT> if the target machine is running system V,
<TT>`tm-i386gas.h'</TT> if it is running system V but you are using the
GNU assembler and linker, <TT>`tm-seq386.h'</TT> for a Sequent 386 system,
or <TT>`tm-compaq.h'</TT> for a Compaq, or <TT>`tm-sun386i.h'</TT> for a Sun
386 system.
</P><P>

For the Mips computer, there are five choices: <TT>`tm-mips.h'</TT> for the
M series, <TT>`tm-mips-bsd.h'</TT> for the RS series with BSD,
<TT>`tm-mips-sysv.h'</TT> for the RS series with System V, <TT>`tm-iris.h'</TT>
for the Iris version of the machine, and <TT>`tm-decstatn.h'</TT> for the
Decstation.
</P><P>

For the 32000, use <TT>`tm-sequent.h'</TT> if you are using a Sequent
machine, or <TT>`tm-encore.h'</TT> for an Encore machine, or
<TT>`tm-genix.h'</TT> if you are using Genix version 3; otherwise, perhaps
<TT>`tm-ns32k.h'</TT> will work for you.
</P><P>

Note that Genix has bugs in <CODE>alloca</CODE> and <CODE>malloc</CODE>; you must
get the compiled versions of these from GNU Emacs and edit GNU CC's
<TT>`Makefile'</TT> to use them.
</P><P>

Note that Encore systems are supported only under BSD.
</P><P>

For Sparc (Sun 4) machines, use <TT>`tm-sparc.h'</TT> with operating system
version 4, and <TT>`tm-sun4os3.h'</TT> with system version 3.
</P><P>

For Convex systems before version 8.1, use <TT>`tm-conv1os7.h'</TT> or
<TT>`tm-conv2os7.h'</TT>.  For versions 8.1 and greater, use <TT>`tm-convex1.h'</TT>
or <TT>`tm-convex2.h'</TT>.  You should also bootstrap GCC with <CODE>pcc</CODE>
rather than <CODE>cc</CODE>; one way to do this is with the following commands.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>ln -s /bin/pcc ./cc
set path = (. $path)
</pre></td></tr></table></P><P>

<LI>
Make a symbolic link named <TT>`md'</TT> to the machine description
pattern file.  It should be in the <TT>`config'</TT> subdirectory and its
name should be <TT>`<VAR>machine</VAR>.md'</TT>; but <VAR>machine</VAR> is often not
the same as the name used in the <TT>`tm.h'</TT> file because the
<TT>`md'</TT> files are more general.
<P>

<LI>
Make a symbolic link named <TT>`aux-output.c'</TT> to the output
subroutine file for your machine.  It should be in the <TT>`config'</TT>
subdirectory and its name should be <TT>`out-<VAR>machine</VAR>.c'</TT>.
</UL>
<P>

<LI>
Make sure the Bison parser generator is installed.  (This is
unnecessary if the Bison output files <TT>`c-parse.tab.c'</TT> and
<TT>`cexp.c'</TT> are more recent than <TT>`c-parse.y'</TT> and <TT>`cexp.y'</TT>
and you do not plan to change the <SAMP>`.y'</SAMP> files.)
<P>

Bison versions older than Sept 8, 1988 will produce incorrect output
for <TT>`c-parse.tab.c'</TT>.
</P><P>

<LI>
If you have a previous version of GCC installed, then chances are
you can compile the new version with that.  Do the following:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make CC="gcc -O"
</pre></td></tr></table></P><P>

Since this produces an optimized executable right away, there is no need
to bootstrap the result with itself except to test it.  Therefore, you can
skip directly to the <SAMP>`make install'</SAMP> step below.
</P><P>

<LI>
Build the compiler.  Just type <SAMP>`make'</SAMP> in the compiler directory.
<P>

Ignore any warnings you may see about "statement not reached" in the
<TT>`insn-emit.c'</TT>; they are normal.  Any other compilation errors may
represent bugs in the port to your machine or operating system, and
should be investigated and reported (see section <A HREF="gcc.html#SEC40">8. Reporting Bugs</A>).
</P><P>

Some commercial compilers fail to compile GNU CC because they have bugs
or limitations.  For example, the Microsoft compiler is said to run out
of macro space.  Some Ultrix compilers run out of expression space; then
you need to break up the statement where the problem happens.
</P><P>

<LI>
If you are using COFF-encapsulation, you must convert <TT>`gnulib'</TT> to
a GNU-format library at this point.  See the file <TT>`README-ENCAP'</TT>
in the directory containing the GNU binary file utilities, for
directions.
<P>

<LI>
Move the first-stage object files and executables into a subdirectory
with this command:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make stage1
</pre></td></tr></table></P><P>

The files are moved into a subdirectory named <TT>`stage1'</TT>.
Once installation is complete, you may wish to delete these files
with <CODE>rm -r stage1</CODE>.
</P><P>

<LI>
Recompile the compiler with itself, with this command:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make CC=stage1/gcc CFLAGS="-g -O -Bstage1/"
</pre></td></tr></table></P><P>

This is called making the stage 2 compiler.
</P><P>

On a 68000 or 68020 system lacking floating point hardware,
unless you have selected a <TT>`tm.h'</TT> file that expects by default
that there is no such hardware, do this instead:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make CC=stage1/gcc CFLAGS="-g -O -Bstage1/ -msoft-float"
</pre></td></tr></table></P><P>

<LI>
If you wish to test the compiler by compiling it with itself one more
time, do this (in C shell):
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make stage2
make CC=stage2/gcc CFLAGS="-g -O -Bstage2/"
foreach file (*.o)
cmp $file stage2/$file
end
</pre></td></tr></table></P><P>

This is called making the stage 3 compiler.  Aside from the <SAMP>`-B'</SAMP>
option, the options should be the same as when you made the stage 2
compiler.
</P><P>

The <CODE>foreach</CODE> command (written in C shell) will notify you if any of
these stage 3 object files differs from those of stage 2.  On BSD systems,
any difference, no matter how innocuous, indicates that the stage 2
compiler has compiled GNU CC incorrectly, and is therefore a potentially
serious bug which you should investigate and report (see section <A HREF="gcc.html#SEC40">8. Reporting Bugs</A>).
</P><P>

On systems that use COFF object files, bytes 5 to 8 will always be
different, since it is a timestamp.  On these systems, you can do the
comparison as follows (in Bourne shell):
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>for file in *.o; do
echo $file
tail +10c $file &#62; foo1
tail +10c stage2/$file &#62; foo2
cmp foo1 foo2
done
</pre></td></tr></table></P><P>

On MIPS machines, you should use the shell script <TT>`ecoff-cmp'</TT>
to compare two object files.
</P><P>

<LI>
Install the compiler driver, the compiler's passes and run-time support.
You can use the following command:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make install
</pre></td></tr></table></P><P>

This copies the files <TT>`cc1'</TT>, <TT>`cpp'</TT> and <TT>`gnulib'</TT> to
files <TT>`gcc-cc1'</TT>, <TT>`gcc-cpp'</TT> and <TT>`gcc-gnulib'</TT> in
directory <TT>`/usr/local/lib'</TT>, which is where the compiler driver
program looks for them.  It also copies the driver program <TT>`gcc'</TT>
into the directory <TT>`/usr/local/bin'</TT>, so that it appears in typical
execution search paths.</P><P>

<STRONG>Warning: there is a bug in <CODE>alloca</CODE> in the Sun library.
To avoid this bug, install the binaries of GNU CC that were compiled
by GNU CC.  They use <CODE>alloca</CODE> as a built-in function and never
the one in the library.</STRONG>
</P><P>

<STRONG>Warning: the GNU CPP may not work for <TT>`ioctl.h'</TT>,
<TT>`ttychars.h'</TT> and other system header files unless the
<SAMP>`-traditional'</SAMP> option is used.</STRONG>  The bug is in the header files:
at least on some machines, they rely on behavior that is incompatible
with ANSI C.  This behavior consists of substituting for macro
argument names when they appear inside of character constants.  The
<SAMP>`-traditional'</SAMP> option tells GNU CC to behave the way these
headers expect.
</P><P>

Because of this problem, you might prefer to configure GNU CC to use
the system's own C preprocessor.  To do so, make the file
<TT>`/usr/local/lib/gcc-cpp'</TT> a link to <TT>`/lib/cpp'</TT>.
</P><P>

Alternatively, on Sun systems and 4.3BSD at least, you can correct the
include files by running the shell script <TT>`fixincludes'</TT>.  This
installs modified, corrected copies of the files <TT>`ioctl.h'</TT>,
<TT>`ttychars.h'</TT> and many others, in a special directory where only
GNU CC will normally look for them.  This script will work on various
systems because it chooses the files by searching all the system
headers for the problem cases that we know about.
</P><P>

Use the following command to do this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make includes
</pre></td></tr></table></P><P>

If you selected a different directory for GNU CC installation when you
installed it, by specifying the Make variable <CODE>prefix</CODE> or
<CODE>libdir</CODE>, specify it the same way in this command.
</P><P>

Note that some systems are starting to come with ANSI C system header
files.  On these systems, don't run <TT>`fixincludes'</TT>; it may not work,
and is certainly not necessary.
</P><P>

<STRONG>Warning:</STRONG> <TT>`fixincludes'</TT> does not work on many MIPS systems,
because those systems come with circular symbolic links which cause
<SAMP>`ls -lR'</SAMP> to go into an infinite loop.
</OL>
<P>

If you cannot install the compiler's passes and run-time support in
<TT>`/usr/local/lib'</TT>, you can alternatively use the <SAMP>`-B'</SAMP> option to
specify a prefix by which they may be found.  The compiler concatenates
the prefix with the names  <TT>`cpp'</TT>, <TT>`cc1'</TT> and <TT>`gnulib'</TT>.
Thus, you can put the files in a directory <TT>`/usr/foo/gcc'</TT> and
specify <SAMP>`-B/usr/foo/gcc/'</SAMP> when you run GNU CC.
</P><P>

Also, you can specify an alternative default directory for these files
by setting the Make variable <CODE>libdir</CODE> when you make GNU CC.
</P><P>

<A NAME="Other Dir"></A>
<HR SIZE="6">
<A NAME="SEC8"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC9"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.1 Compilation in a Separate Directory </H2>
<!--docid::SEC8::-->
<P>

If you wish to build the object files and executables in a directory
other than the one containing the source files, here is what you must
do differently:
</P><P>

<OL>
<LI>
Go to that directory before running <TT>`config.gcc'</TT>:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>mkdir gcc-sun3
cd gcc-sun3
</pre></td></tr></table></P><P>

On systems that do not support symbolic links, this directory must be
on the same file system as the source code directory.
</P><P>

<LI>
Specify where to find <TT>`config.gcc'</TT> when you run it:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>../gcc-1.36/config.gcc <small>...</small>
</pre></td></tr></table></P><P>

<LI>
Specify where to find the sources, as an argument to <TT>`config.gcc'</TT>:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>../gcc-1.36/config.gcc -srcdir=../gcc-1.36 sun3
</pre></td></tr></table></P><P>

The <SAMP>`-srcdir=<VAR>dir</VAR>'</SAMP> option is not needed when the source
directory is the parent of the current directory, because
<TT>`config.gcc'</TT> detects that case automatically.
</OL>
<P>

Now, you can run <CODE>make</CODE> in that directory.  You need not repeat the
configuration steps shown above, when ordinary source files change.  You
must, however, run <CODE>config.gcc</CODE> again when the configuration files
change, if your system does not support symbolic links.
</P><P>

<A NAME="Sun Install"></A>
<HR SIZE="6">
<A NAME="SEC9"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC8"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC10"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.2 Installing GNU CC on the Sun </H2>
<!--docid::SEC9::-->
<P>

Make sure the environment variable <CODE>FLOAT_OPTION</CODE> is not set when
you compile <TT>`gnulib'</TT>.  If this option were set to <CODE>f68881</CODE>
when <TT>`gnulib'</TT> is compiled, the resulting code would demand to be
linked with a special startup file and would not link properly without
special pains.  
</P><P>

There is a bug in <CODE>alloca</CODE> in certain versions of the Sun library. 
To avoid this bug, install the binaries of GNU CC that were compiled by
GNU CC.  They use <CODE>alloca</CODE> as a built-in function and never the one
in the library.  
</P><P>

Some versions of the Sun compiler crash when compiling GNU CC, with a
segmentation fault in cpp.  This can sometimes be due to the bulk of
data in the environment variables.  You may be able to avoid it by using
the following command to compile GNU CC with Sun CC:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make CC="TERMCAP=x OBJS=x LIBFUNCS=x STAGESTUFF=x cc"
</pre></td></tr></table></P><P>

Another problem that often happens on Suns is that you get a crash when
building stage 2, when <CODE>genflags</CODE> is run.
</P><P>

One reason for such as crash is if you configured GNU CC for the wrong
version of SunOS.  Starting with version 1.38, configurations <CODE>sun3</CODE>
and <CODE>sun4</CODE> are for SunOS 4, so this problem should no longer happen.
</P><P>

Another cause of the same symptom is having installed the GNU linker
with an earlier version of SunOS.  The version that worked before
stopped working due to a change in the format of executables in SunOS
4.1.  Many sites have installed the GNU linker as
<TT>`/usr/local/lib/gcc-ld'</TT>, often as part of installing GNU C++.  So
if you get such crashes and you have used the proper configuration, try
deleting <TT>`/usr/local/lib/gcc-ld'</TT>.
</P><P>

The current version of the GNU linker, found in the current binutils
release, does work with SunOS 4.1.
</P><P>

<A NAME="3b1 Install"></A>
<HR SIZE="6">
<A NAME="SEC10"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC9"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC11"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.3 Installing GNU CC on the 3b1 </H2>
<!--docid::SEC10::-->
<P>

Installing GNU CC on the 3b1 is difficult if you do not already have
GNU CC running, due to bugs in the installed C compiler.  However,
the following procedure might work.  We are unable to test it.
</P><P>

<OL>
<LI>
Comment out the <SAMP>`#include "config.h"'</SAMP> line on line 37 of
<TT>`cccp.c'</TT> and do <SAMP>`make cpp'</SAMP>.  This makes a preliminary version
of GNU cpp.  
<P>

<LI>
Save the old <TT>`/lib/cpp'</TT> and copy the preliminary GNU cpp to that
file name.  
<P>

<LI>
Undo your change in <TT>`cccp.c'</TT>, or reinstall the original version,
and do <SAMP>`make cpp'</SAMP> again.  
<P>

<LI>
Copy this final version of GNU cpp into <TT>`/lib/cpp'</TT>.
<P>

<LI>
Replace every occurrence of <CODE>obstack_free</CODE> in <TT>`tree.c'</TT>
with <CODE>_obstack_free</CODE>.  
<P>

<LI>
Run <CODE>make</CODE> to get the first-stage GNU CC.
<P>

<LI>
Reinstall the original version of <TT>`/lib/cpp'</TT>.
<P>

<LI>
Now you can compile GNU CC with itself and install it in the normal
fashion.
</OL>
<P>

If you have installed an earlier version of GCC, you can compile the
newer version with that.  However, you will run into trouble compiling
<TT>`gnulib'</TT>, since that is normally compiled with CC.  To solve the
problem, uncomment this line in <TT>`Makefile'</TT>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>CCLIBFLAGS = -B/usr/local/lib/gcc- -tp -Wp,-traditional
</pre></td></tr></table></P><P>

<A NAME="SCO Install"></A>
<HR SIZE="6">
<A NAME="SEC11"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC10"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC12"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.4 Installing GNU CC on SCO System V 3.2 </H2>
<!--docid::SEC11::-->
<P>

The compiler that comes with this system does not work properly with
<SAMP>`-O'</SAMP>.  Therefore, you should redefine the Make variable
<CODE>CCLIBFLAGS</CODE> not to use <SAMP>`-O'</SAMP>.
</P><P>

You should also edit <TT>`Makefile'</TT> to enable the lines that set
<CODE>CLIB</CODE> to <CODE>-lPW</CODE>, and the ones specifically labeled as being
for SCO, that set <CODE>RANLIB</CODE>, and that set <CODE>CC</CODE> and <CODE>OLDCC</CODE>
to <CODE>rcc</CODE>.
</P><P>

Also, edit the definition of <CODE>USER_H</CODE> to remove the file <TT>`limits.h'</TT>.
</P><P>

Then you can run <SAMP>`config.gcc i386-sco'</SAMP> and finish building GNU CC
normally.
</P><P>

The same recipe should work on ESIX, but use <SAMP>`config.gcc i386-esix'</SAMP>
instead.
</P><P>

<A NAME="VMS Install"></A>
<HR SIZE="6">
<A NAME="SEC12"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC11"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC13"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.5 Installing GNU CC on VMS </H2>
<!--docid::SEC12::-->
<P>

The VMS version of GNU CC is distributed in a backup saveset containing
both source code and precompiled binaries.
</P><P>

To install the <TT>`gcc'</TT> command so you can use the compiler easily, in
the same manner as you use the VMS C compiler, you must install the VMS CLD
file for GNU CC as follows:
</P><P>

<OL>
<LI>
Define the VMS logical names <SAMP>`GNU_CC'</SAMP> and <SAMP>`GNU_CC_INCLUDE'</SAMP>
to point to the directories where the GNU CC executables
(<TT>`gcc-cpp'</TT>, <TT>`gcc-cc1'</TT>, etc.) and the C include files are
kept.  This should be done with the commands:<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ assign /super /system disk:[gcc.] gnu_cc
$ assign /super /system disk:[gcc.include.] gnu_cc_include
</pre></td></tr></table></P><P>

with the appropriate disk and directory names.  These commands can be
placed in your system startup file so they will be executed whenever
the machine is rebooted.  You may, if you choose, do this via the
<TT>`GCC_INSTALL.COM'</TT> script in the <TT>`[GCC]'</TT> directory.
</P><P>

<LI>
Install the <TT>`GCC'</TT> command with the command line:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ set command /table=sys$library:dcltables gnu_cc:[000000]gcc
</pre></td></tr></table></P><P>

<LI>
To install the help file, do the following:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ lib/help sys$library:helplib.hlb gcc.hlp
</pre></td></tr></table></P><P>

Now you can invoke the compiler with a command like <SAMP>`gcc /verbose
file.c'</SAMP>, which is equivalent to the command <SAMP>`gcc -v -c file.c'</SAMP> in
Unix.
</OL>
<P>

We try to put corresponding binaries and sources on the VMS distribution
tape.  But sometimes the binaries will be from an older version that the
sources, because we don't always have time to update them.  (Use the
<SAMP>`/verbose'</SAMP> option to determine the version number of the binaries and
compare it with the source file <TT>`version.c'</TT> to tell whether this is
so.)  In this case, you should use the binaries you get to recompile the
sources.  If you must recompile, here is how:
</P><P>

<OL>
<LI>
Copy the file <TT>`tm-vms.h'</TT> to <TT>`tm.h'</TT>, <TT>`xm-vms.h'</TT> to
<TT>`config.h'</TT>, <TT>`vax.md'</TT> to <TT>`md.'</TT> and <TT>`out-vax.c'</TT>
to <TT>`aux-output.c'</TT>.  The files to be copied are found in the
subdirectory named <TT>`config'</TT>; they should be copied to the
main directory of GNU CC.<P>

<LI>
Setup the logical names and command tables as defined above.  In
addition, define the vms logical name <SAMP>`GNU_BISON'</SAMP> to point at the
to the directories where the Bison executable is kept.  This should be
done with the command:<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ assign /super /system disk:[bison.] gnu_bison
</pre></td></tr></table></P><P>

You may, if you choose, use the <TT>`INSTALL_BISON.COM'</TT> script in the
<TT>`[BISON]'</TT> directory.
</P><P>

<LI>
Install the <SAMP>`BISON'</SAMP> command with the command line:<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ set command /table=sys$library:dcltables gnu_bison:[000000]bison
</pre></td></tr></table></P><P>

<LI>
Type <SAMP>`@make'</SAMP> to do recompile everything.
<P>

If you are compiling with a version of GNU CC older than 1.33, specify
<SAMP>`/DEFINE=("inline=")'</SAMP> as an option in all the compilations.  This
requires editing all the <CODE>gcc</CODE> commands in <TT>`make-cc1.com'</TT>.
(The older versions had problems supporting <CODE>inline</CODE>.)  Once you
have a working 1.33 or newer GNU CC, you can change this file back.
</OL>
<P>

Due to the differences between the filesystems of Unix and VMS, the
preprocessor attempts to translate the names of include files into
something that VMS will understand.  The basic strategy is to prepend a
prefix to the specification of the include file, convert the whole
filename to a VMS filename, and then try to open the file.  The
preprocessor tries various prefixes until one of them succeeds.
</P><P>

The first prefix is the <SAMP>`GNU_CC_INCLUDE:'</SAMP> logical name: this is
where GNU_C header files are traditionally stored.  If a header file is
not found there, <SAMP>`SYS$SYSROOT:[SYSLIB.]'</SAMP> is tried next.  If the
preprocessor is still unable to locate the file, it then assumes that
the include file specification is a valid VMS filename all by itself,
and it uses this filename to attempt to open the include file.  If none
of these strategies succeeds, the preprocessor reports an error.
</P><P>

If you wish to store header files in non-standard locations, then you
can assign the logical <SAMP>`GNU_CC_INCLUDE'</SAMP> to be a search list, where
each element of the list is suitable for use with a rooted logical.
</P><P>

With this version of GNU CC, <CODE>const</CODE> global variables now work
properly.  Unless, however, the <CODE>const</CODE> modifier is also specified
in every external declaration of the variable in all of the source files
that use that variable, the linker will issue warnings about conflicting
attributes for the variable, since the linker does not know if the
variable should be read-only.  The program will still work, but the
variable will be placed in writable storage.
</P><P>

Due to an assembler bug, offsets to static constants are sometimes
incorrectly evaluated.  This bug is present in GAS 1.38.1, and should be
fixed in the next version.
</P><P>

Under previous versions of GNU CC, the generated code would occasionally
give strange results when linked to the sharable <TT>`VAXCRTL'</TT> library.
Now this should work.
</P><P>

Even with this version, however, GNU CC itself should not be linked to the
sharable <TT>`VAXCRTL'</TT>. The <TT>`qsort'</TT> routine supplied with <TT>`VAXCRTL'</TT>
has a bug which can cause a compiler crash.
</P><P>

Similarly, the preprocessor should not be linked to the sharable
<TT>`VAXCRTL'</TT>. The <CODE>strncat</CODE> routine supplied with <TT>`VAXCRTL'</TT> has a
bug which can cause the preprocessor to go into an infinite loop. 
</P><P>

It should be pointed out that if you attempt to link to the sharable
<TT>`VAXCRTL'</TT>, the VMS linker will strongly resist any effort to force
it to use the <CODE>qsort</CODE> and <CODE>strncat</CODE> routines from
<TT>`gcclib'</TT>.  Until the bugs in <TT>`VAXCRTL'</TT> have been fixed,
linking any of the compiler components to the sharable VAXCRTL is not
recommended.  (These routines can be bypassed by placing duplicate copies
of <CODE>qsort</CODE> and <CODE>strncat</CODE> in <TT>`gcclib'</TT> under different
names, and patching the compiler sources to use these routines).  Both
of the bugs in <TT>`VAXCRTL'</TT> are still present in VMS version 5.4-1,
which is the most recent version as of this writing.
</P><P>

The executables that are generated by <TT>`make-cc1.com'</TT> and
<TT>`make-cccp.com'</TT> use the non-shared version of <TT>`VAXCRTL'</TT> (and
thus use the <CODE>qsort</CODE> and <CODE>strncat</CODE> routines from
<TT>`gcclib.olb'</TT>).
</P><P>

Note that GNU CC on VMS now generates debugging information to describe
the programs symbols to the VMS debugger.  However, you need version 1.37
or later of GAS in order to output them properly in the object file.
</P><P>

The VMS linker does not distinguish between upper and lower case letters
in function and variable names.  However, usual practice in C is to
distinguish case.  Normally GNU C (by means of the assembler GAS)
implements usual C behavior by augmenting each name that is not all
lower-case.  A name is augmented by truncating it to at most 23
characters and then adding more characters at the end which encode the
case pattern the rest.
</P><P>

Name augmentation yields bad results for programs that use precompiled
libraries (such as Xlib) which were generated by another compiler.  Use
the compiler option <SAMP>`/NOCASE_HACK'</SAMP> to inhibits augmentation; it
makes external C functions and variables case-independent as is usual on
VMS.  Alternatively, you could write all references to the functions and
variables in such libraries using lower case; this will work on VMS, but
is not portable to other systems.  In cases where you need to
selectively inhibit augmentation, you can define a macro for each mixed
case symbol for which you wish to inhibit augmentation, where the macro
expands into the lower case equivalent of the name.
</P><P>

<A NAME="HPUX Install"></A>
<HR SIZE="6">
<A NAME="SEC13"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC12"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC14"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.6 Installing GNU CC on HPUX </H2>
<!--docid::SEC13::-->
<P>

To install GNU CC on HPUX, you must start by editing the file
<TT>`Makefile'</TT>.  Search for the string <SAMP>`HPUX'</SAMP> to find comments
saying what to change.  You need to change some variable definitions and
(if you are using GAS) some lines in the rule for the target
<SAMP>`gnulib'</SAMP>.
</P><P>

To avoid errors when linking programs with <SAMP>`-g'</SAMP>, create an empty
library named <TT>`libg.a'</TT>.  An easy way to do this is:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>ar rc /usr/local/lib/libg.a
</pre></td></tr></table></P><P>

To compile with the HPUX C compiler, you must specify get the file
<TT>`alloca.c'</TT> from GNU Emacs.  Then, when you run <CODE>make</CODE>, use
this argument:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make ALLOCA=alloca.o
</pre></td></tr></table></P><P>

When recompiling GNU CC with itself, do not define <CODE>ALLOCA</CODE>.
Instead, an <SAMP>`-I'</SAMP> option needs to be added to <CODE>CFLAGS</CODE> as
follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make CC=stage1/gcc CFLAGS="-g -O -Bstage1/ -I../binutils/hp-include"
</pre></td></tr></table></P><P>

<A NAME="Tower Install"></A>
<HR SIZE="6">
<A NAME="SEC14"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC13"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.7 Installing GNU CC on an NCR Tower </H2>
<!--docid::SEC14::-->
<P>

On an NCR Tower model 4x0 or 6x0, you may have trouble because the
default maximum virtual address size of a process is just 1 Mb.  Most
often you will find this problem while compiling GNU CC with itself.
</P><P>

The only way to solve the problem is to reconfigure the kernel.
Add a line such as this to the configuration file:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>MAXUMEM = 4096
</pre></td></tr></table></P><P>

and then relink the kernel and reboot the machine.
</P><P>

<A NAME="Trouble"></A>
<HR SIZE="6">
<A NAME="SEC15"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC14"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC16"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC7"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC16"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 4. Known Causes of Trouble with GNU CC </H1>
<!--docid::SEC15::-->
<P>

Here are some of the things that have caused trouble for people installing
or using GNU CC.
</P><P>

<UL>
<LI>
On certain systems, defining certain environment variables such as
<CODE>CC</CODE> can interfere with the functioning of <CODE>make</CODE>.
<P>

<LI>
Cross compilation can run into trouble for certain machines because
some target machines' assemblers require floating point numbers to be
written as <EM>integer</EM> constants in certain contexts.
<P>

The compiler writes these integer constants by examining the floating
point value as an integer and printing that integer, because this is
simple to write and independent of the details of the floating point
representation.  But this does not work if the compiler is running on
a different machine with an incompatible floating point format, or
even a different byte-ordering.
</P><P>

In addition, correct constant folding of floating point values
requires representing them in the target machine's format.
(The C standard does not quite require this, but in practice
it is the only way to win.)
</P><P>

It is now possible to overcome these problems by defining macros such
as <CODE>REAL_VALUE_TYPE</CODE>.  But doing so is a substantial amount of
work for each target machine.  See section <A HREF="gcc.html#SEC92">14.10 Cross Compilation and Floating-Point Format</A>.
</P><P>

<LI>
Users often think it is a bug when GNU CC reports an error for code
like this:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>int foo (short);

int foo (x)
     short x;
{<small>...</small>}
</pre></td></tr></table></P><P>

The error message is correct: this code really is erroneous, because the
old-style non-prototype definition passes subword integers in their
promoted types.  In other words, the argument is really an <CODE>int</CODE>,
not a <CODE>short</CODE>.  The correct prototype is this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>int foo (int);
</pre></td></tr></table></P><P>

<LI>
Users often think it is a bug when GNU CC reports an error for code
like this:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>int foo (struct mumble *);

struct mumble { <small>...</small> };

int foo (struct mumble *x)
{ <small>...</small> }
</pre></td></tr></table></P><P>

This code really is erroneous, because the scope of <CODE>struct
mumble</CODE> the prototype is limited to the argument list containing it.
It does not refer to the <CODE>struct mumble</CODE> defined with file scope
immediately below--they are two unrelated types with similar names in
different scopes.
</P><P>

But in the definition of <CODE>foo</CODE>, the file-scope type is used
because that is available to be inherited.  Thus, the definition and
the prototype do not match, and you get an error.
</P><P>

This behavior may seem silly, but it's what the ANSI standard
specifies.  It is easy enough for you to make your code work by moving
the definition of <CODE>struct mumble</CODE> above the prototype.  I don't
think it's worth being incompatible for.
</UL>
<P>

Additional problems are described in <A HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A>.
</P><P>

<A NAME="Service"></A>
<HR SIZE="6">
<A NAME="SEC16"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC17"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC15"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC17"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 5. How To Get Help with GNU CC </H1>
<!--docid::SEC16::-->
<P>

If you need help installing, using or changing GNU CC, there are two
ways to find it:
</P><P>

<UL>
<LI>
Send a message to a suitable network mailing list.  First try
<CODE>bug-gcc@prep.ai.mit.edu</CODE>, and if that brings no response, try
<CODE>help-gcc@prep.ai.mit.edu</CODE>.
<P>

<LI>
Look in the service directory for someone who might help you for a fee.
The service directory is found in the file named <TT>`SERVICE'</TT> in the
GNU CC distribution.
</UL>
<P>

<A NAME="Incompatibilities"></A>
<HR SIZE="6">
<A NAME="SEC17"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC16"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC16"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 6. Incompatibilities of GNU CC </H1>
<!--docid::SEC17::-->
<P>

There are several noteworthy incompatibilities between GNU C and most
existing (non-ANSI) versions of C.  The <SAMP>`-traditional'</SAMP> option
eliminates most of these incompatibilities, <EM>but not all</EM>, by
telling GNU C to behave like older C compilers.
</P><P>

<UL>
<LI>
GNU CC normally makes string constants read-only.  If several
identical-looking string constants are used, GNU CC stores only one
copy of the string.
<P>

One consequence is that you cannot call <CODE>mktemp</CODE> with a string
constant argument.  The function <CODE>mktemp</CODE> always alters the
string its argument points to.
</P><P>

Another consequence is that <CODE>sscanf</CODE> does not work on some
systems when passed a string constant as its format control string.
This is because <CODE>sscanf</CODE> incorrectly tries to write into the
string constant.  Likewise <CODE>fscanf</CODE> and <CODE>scanf</CODE>.
</P><P>

The best solution to these problems is to change the program to use
<CODE>char</CODE>-array variables with initialization strings for these
purposes instead of string constants.  But if this is not possible,
you can use the <SAMP>`-fwritable-strings'</SAMP> flag, which directs GNU CC
to handle string constants the same way most C compilers do.
<SAMP>`-traditional'</SAMP> also has this effect, among others.
</P><P>

<LI>
GNU CC does not substitute macro arguments when they appear inside of
string constants.  For example, the following macro in GNU CC
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define foo(a) "a"
</pre></td></tr></table></P><P>

will produce output <CODE>"a"</CODE> regardless of what the argument <VAR>a</VAR> is.
</P><P>

The <SAMP>`-traditional'</SAMP> option directs GNU CC to handle such cases
(among others) in the old-fashioned (non-ANSI) fashion.
</P><P>

<LI>
When you use <CODE>setjmp</CODE> and <CODE>longjmp</CODE>, the only automatic
variables guaranteed to remain valid are those declared
<CODE>volatile</CODE>.  This is a consequence of automatic register
allocation.  Consider this function:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>jmp_buf j;

foo ()
{
  int a, b;

  a = fun1 ();
  if (setjmp (j))
    return a;

  a = fun2 ();
  /* <CODE>longjmp (j)</CODE> may be occur in <CODE>fun3</CODE>. */
  return a + fun3 ();
}
</pre></td></tr></table></P><P>

Here <CODE>a</CODE> may or may not be restored to its first value when the
<CODE>longjmp</CODE> occurs.  If <CODE>a</CODE> is allocated in a register, then
its first value is restored; otherwise, it keeps the last value stored
in it.
</P><P>

If you use the <SAMP>`-W'</SAMP> option with the <SAMP>`-O'</SAMP> option, you will
get a warning when GNU CC thinks such a problem might be possible.
</P><P>

The <SAMP>`-traditional'</SAMP> option directs GNU C to put variables in
the stack by default, rather than in registers, in functions that
call <CODE>setjmp</CODE>.  This results in the behavior found in
traditional C compilers.
</P><P>

<LI>
Declarations of external variables and functions within a block apply
only to the block containing the declaration.  In other words, they
have the same scope as any other declaration in the same place.
<P>

In some other C compilers, a <CODE>extern</CODE> declaration affects all the
rest of the file even if it happens within a block.
</P><P>

The <SAMP>`-traditional'</SAMP> option directs GNU C to treat all <CODE>extern</CODE>
declarations as global, like traditional compilers.
</P><P>

<LI>
In traditional C, you can combine <CODE>long</CODE>, etc., with a typedef name,
as shown here:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>typedef int foo;
typedef long foo bar;
</pre></td></tr></table></P><P>

In ANSI C, this is not allowed: <CODE>long</CODE> and other type modifiers
require an explicit <CODE>int</CODE>.  Because this criterion is expressed
by Bison grammar rules rather than C code, the <SAMP>`-traditional'</SAMP>
flag cannot alter it.
</P><P>

<LI>
PCC allows typedef names to be used as function parameters.  The
difficulty described immediately above applies here too.
<P>

<LI>
PCC allows whitespace in the middle of compound assignment operators
such as <SAMP>`+='</SAMP>.  GNU CC, following the ANSI standard, does not
allow this.  The difficulty described immediately above applies here
too.
<P>

<LI>
GNU CC will flag unterminated character constants inside of preprocessor
conditionals that fail.  Some programs have English comments enclosed in
conditionals that are guaranteed to fail; if these comments contain
apostrophes, GNU CC will probably report an error.  For example,
this code would produce an error:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#if 0
You can't expect this to work.
#endif
</pre></td></tr></table></P><P>

The best solution to such a problem is to put the text into an actual
C comment delimited by <SAMP>`/*<small>...</small>*/'</SAMP>.  However,
<SAMP>`-traditional'</SAMP> suppresses these error messages.
</P><P>

<LI>
When compiling functions that return <CODE>float</CODE>, PCC converts it to
a double.  GNU CC actually returns a <CODE>float</CODE>.  If you are concerned
with PCC compatibility, you should declare your functions to return
<CODE>double</CODE>; you might as well say what you mean.
<P>

<LI>
When compiling functions that return structures or unions, GNU CC
output code normally uses a method different from that used on most
versions of Unix.  As a result, code compiled with GNU CC cannot call
a structure-returning function compiled with PCC, and vice versa.
<P>

The method used by GNU CC is as follows: a structure or union which is 1,
2, 4 or 8 bytes long is returned like a scalar.  A structure or union
with any other size is stored into an address supplied by the caller
in a special, fixed register.
</P><P>

PCC usually handles all sizes of structures and unions by returning
the address of a block of static storage containing the value.  This
method is not used in GNU CC because it is slower and nonreentrant.
</P><P>

You can tell GNU CC to use the PCC convention with the option
<SAMP>`-fpcc-struct-return'</SAMP>.
</UL>
<P>

There are also system-specific incompatibilities.
</P><P>

<UL>
<LI>
On the Sparc, GNU CC uses an incompatible calling convention for
structures.  It passes them by including their contents in the argument
list, whereas the standard compiler passes them effectively by
reference.
<P>

This really ought to be fixed, but such calling conventions are not
yet supported in GNU CC, so it isn't straightforward to fix it.
GNU CC version 2 will use a compatible calling convention.
</P><P>

The convention for structure returning is also incompatible, and
<SAMP>`-fpcc-struct-return'</SAMP> does not help.
</P><P>

<LI>
The Sparc version of <CODE>setjmp</CODE> interacts badly with unexpected stack
adjustments.  With rare exceptions, you cannot use <CODE>setjmp</CODE> in a
function which moves the stack pointer.
<P>

In the current version of GNU CC, there are three ways that the stack
pointer can change value: (1) calls to <CODE>alloca</CODE>, (2) use of
variable-sized objects, and (3) calls to functions with parameters that
do not all fit in the argument-passing registers (e.g., more than 6
parameters).  You should avoid all three in functions that call
<CODE>setjmp</CODE>.
</P><P>

The cause of the problem is the way that Sun implemented register
windows.  The 64 bytes at addresses <CODE>%sp</CODE> through <CODE>%sp+63</CODE>
correspond to the register window save area.  When a register window
must be spilled, its stack pointer is located, and the registers are
dumped starting at that address.  Similarly, when a register window must
be restored, its stack pointer is located, and the registers are
restored from that address.
</P><P>

When <CODE>setjmp</CODE> is called, the current register window's registers
are saved into the register save area, and when <CODE>longjmp</CODE> is
called, they are restored (actually, <EM>all</EM> register windows are
restored from all valid register windows at the time <CODE>longjmp</CODE> is
called).  If there is a change in the value of the stack pointer bewteen
the <CODE>setjmp</CODE> and <CODE>longjmp</CODE> calls, when the registers are
restored, they are restored with random values.
</P><P>

<LI>
On Ultrix, the Fortran compiler expects registers 2 through 5 to be saved
by function calls.  We have not been able to tell whether the C compiler
agrees with the Fortran compiler.  Currently, GNU CC treats these registers
as temporaries on the Vax, which is compatible with BSD Unix.
<P>

If we learn for certain that Ultrix has departed from the traditional
BSD calling convention, we will change GNU CC for Ultrix to fit.  In the
mean time, you can use these options to produce code compatible with the
Fortran compiler:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>-fcall-saved-r2 -fcall-saved-r3 -fcall-saved-r4 -fcall-saved-r5
</pre></td></tr></table></P><P>

<LI>
DBX rejects some files produced by GNU CC, though it accepts similar
constructs in output from PCC.  Until someone can supply a coherent
description of what is valid DBX input and what is not, there is
nothing I can do about these problems.  You are on your own.
</UL>
<P>

<A NAME="Extensions"></A>
<HR SIZE="6">
<A NAME="SEC18"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC17"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC19"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC17"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 7. GNU Extensions to the C Language </H1>
<!--docid::SEC18::-->
<P>

GNU C provides several language features not found in ANSI standard C.
(The <SAMP>`-pedantic'</SAMP> option directs GNU CC to print a warning message if
any of these features is used.)  To test for the availability of these
features in conditional compilation, check for a predefined macro
<CODE>__GNUC__</CODE>, which is always defined under GNU CC.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC19">7.1 Statements and Declarations inside of Expressions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Putting statements and declarations inside expressions.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC20">7.2 Naming an Expression's Type</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Giving a name to the type of some expression.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC21">7.3 Referring to a Type with <CODE>typeof</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"><CODE>typeof</CODE>: referring to the type of an expression.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC22">7.4 Generalized Lvalues</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Using <SAMP>`?:'</SAMP>, <SAMP>`,'</SAMP> and casts in lvalues.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC23">7.5 Conditional Expressions with Omitted Middle-Operands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Omitting the middle operand of a <SAMP>`?:'</SAMP> expression.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC24">7.6 Arrays of Length Zero</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Zero-length arrays.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC25">7.7 Arrays of Variable Length</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Arrays whose length is computed at run time.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC26">7.8 Non-Lvalue Arrays May Have Subscripts</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Any array can be subscripted, even if not an lvalue.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC27">7.9 Arithmetic on <CODE>void</CODE>-Pointers and Function Pointers</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Arithmetic on <CODE>void</CODE>-pointers and function pointers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC28">7.10 Non-Constant Initializers</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Non-constant initializers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC29">7.11 Constructor Expressions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Constructor expressions give structures, unions
                         or arrays as values.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC30">7.12 Declaring Attributes of Functions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Declaring that functions have no side effects,
                         or that they can never return.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC31">7.13 Dollar Signs in Identifier Names</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Dollar sign is allowed in identifiers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC32">7.14 Inquiring about the Alignment of a Type or Variable</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Inquiring about the alignment of a type or variable.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC33">7.15 An Inline Function is As Fast As a Macro</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining inline functions (as fast as macros).</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC34">7.16 Assembler Instructions with C Expression Operands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Assembler instructions with C expressions as operands.</TD></TR>
</TABLE>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(With&nbsp;them&nbsp;you&nbsp;can&nbsp;define&nbsp;"built-in"&nbsp;functions.)
<br>
<TABLE BORDER=0 CELLSPACING=0>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC35">7.17 Controlling Names Used in Assembler Code</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Specifying the assembler name to use for a C symbol.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC36">7.18 Variables in Specified Registers</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining variables residing in specified registers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC39">7.19 Alternate Keywords</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"><CODE>__const__</CODE>, <CODE>__asm__</CODE>, etc., for header files.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Statement Exprs"></A>
<HR SIZE="6">
<A NAME="SEC19"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC20"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.1 Statements and Declarations inside of Expressions </H2>
<!--docid::SEC19::-->
<P>

A compound statement in parentheses may appear inside an expression in GNU
C.  This allows you to declare variables within an expression.  For
example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>({ int y = foo (); int z;
   if (y &#62; 0) z = y;
   else z = - y;
   z; })
</pre></td></tr></table></P><P>

is a valid (though slightly more complex than necessary) expression
for the absolute value of <CODE>foo ()</CODE>.
</P><P>

This feature is especially useful in making macro definitions "safe" (so
that they evaluate each operand exactly once).  For example, the
"maximum" function is commonly defined as a macro in standard C as
follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define max(a,b) ((a) &#62; (b) ? (a) : (b))
</pre></td></tr></table></P><P>

But this definition computes either <VAR>a</VAR> or <VAR>b</VAR> twice, with bad
results if the operand has side effects.  In GNU C, if you know the
type of the operands (here let's assume <CODE>int</CODE>), you can define
the macro safely as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define maxint(a,b) \
  ({int _a = (a), _b = (b); _a &#62; _b ? _a : _b; })
</pre></td></tr></table></P><P>

Embedded statements are not allowed in constant expressions, such as
the value of an enumeration constant, the width of a bit field, or
the initial value of a static variable.
</P><P>

If you don't know the type of the operand, you can still do this, but you
must use <CODE>typeof</CODE> (see section <A HREF="gcc.html#SEC21">7.3 Referring to a Type with <CODE>typeof</CODE></A>) or type naming (see section <A HREF="gcc.html#SEC20">7.2 Naming an Expression's Type</A>).
</P><P>

<A NAME="Naming Types"></A>
<HR SIZE="6">
<A NAME="SEC20"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC19"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC21"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.2 Naming an Expression's Type </H2>
<!--docid::SEC20::-->
<P>

You can give a name to the type of an expression using a <CODE>typedef</CODE>
declaration with an initializer.  Here is how to define <VAR>name</VAR> as a
type name for the type of <VAR>exp</VAR>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>typedef <VAR>name</VAR> = <VAR>exp</VAR>;
</pre></td></tr></table></P><P>

This is useful in conjunction with the statements-within-expressions
feature.  Here is how the two together can be used to define a safe
"maximum" macro that operates on any arithmetic type:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define max(a,b) \
  ({typedef _ta = (a), _tb = (b);  \
    _ta _a = (a); _tb _b = (b);     \
    _a &#62; _b ? _a : _b; })
</pre></td></tr></table></P><P>

The reason for using names that start with underscores for the local
variables is to avoid conflicts with variable names that occur within the
expressions that are substituted for <CODE>a</CODE> and <CODE>b</CODE>.  Eventually we
hope to design a new form of declaration syntax that allows you to declare
variables whose scopes start only after their initializers; this will be a
more reliable way to prevent such conflicts.
</P><P>

<A NAME="Typeof"></A>
<HR SIZE="6">
<A NAME="SEC21"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC20"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC22"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.3 Referring to a Type with <CODE>typeof</CODE> </H2>
<!--docid::SEC21::-->
<P>

Another way to refer to the type of an expression is with <CODE>typeof</CODE>.
The syntax of using of this keyword looks like <CODE>sizeof</CODE>, but the
construct acts semantically like a type name defined with <CODE>typedef</CODE>.
</P><P>

There are two ways of writing the argument to <CODE>typeof</CODE>: with an
expression or with a type.  Here is an example with an expression:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>typeof (x[0](1))
</pre></td></tr></table></P><P>

This assumes that <CODE>x</CODE> is an array of functions; the type described
is that of the values of the functions.
</P><P>

Here is an example with a typename as the argument:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>typeof (int *)
</pre></td></tr></table></P><P>

Here the type described is that of pointers to <CODE>int</CODE>.
</P><P>

If you are writing a header file that must work when included in ANSI C
programs, write <CODE>__typeof__</CODE> instead of <CODE>typeof</CODE>.
See section <A HREF="gcc.html#SEC39">7.19 Alternate Keywords</A>.
</P><P>

A <CODE>typeof</CODE>-construct can be used anywhere a typedef name could be
used.  For example, you can use it in a declaration, in a cast, or inside
of <CODE>sizeof</CODE> or <CODE>typeof</CODE>.
</P><P>

<UL>
<LI>
This declares <CODE>y</CODE> with the type of what <CODE>x</CODE> points to.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>typeof (*x) y;
</pre></td></tr></table></P><P>

<LI>
This declares <CODE>y</CODE> as an array of such values.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>typeof (*x) y[4];
</pre></td></tr></table></P><P>

<LI>
This declares <CODE>y</CODE> as an array of pointers to characters:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>typeof (typeof (char *)[4]) y;
</pre></td></tr></table></P><P>

It is equivalent to the following traditional C declaration:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>char *y[4];
</pre></td></tr></table></P><P>

To see the meaning of the declaration using <CODE>typeof</CODE>, and why it
might be a useful way to write, let's rewrite it with these macros:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define pointer(T)  typeof(T *)
#define array(T, N) typeof(T [N])
</pre></td></tr></table></P><P>

Now the declaration can be rewritten this way:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>array (pointer (char), 4) y;
</pre></td></tr></table></P><P>

Thus, <CODE>array (pointer (char), 4)</CODE> is the type of arrays of 4
pointers to <CODE>char</CODE>.
</UL>
<P>

<A NAME="Lvalues"></A>
<HR SIZE="6">
<A NAME="SEC22"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC21"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC23"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.4 Generalized Lvalues </H2>
<!--docid::SEC22::-->
<P>

Compound expressions, conditional expressions and casts are allowed as
lvalues provided their operands are lvalues.  This means that you can take
their addresses or store values into them.
</P><P>

For example, a compound expression can be assigned, provided the last
expression in the sequence is an lvalue.  These two expressions are
equivalent:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(a, b) += 5
a, (b += 5)
</pre></td></tr></table></P><P>

Similarly, the address of the compound expression can be taken.  These two
expressions are equivalent:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#38;(a, b)
a, &#38;b
</pre></td></tr></table></P><P>

A conditional expression is a valid lvalue if its type is not void and the
true and false branches are both valid lvalues.  For example, these two
expressions are equivalent:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(a ? b : c) = 5
(a ? b = 5 : (c = 5))
</pre></td></tr></table></P><P>

A cast is a valid lvalue if its operand is valid.  Taking the address of
the cast is the same as taking the address without a cast, except for the
type of the result.  For example, these two expressions are equivalent (but
the second may be valid when the type of <CODE>a</CODE> does not permit a cast to
<CODE>int *</CODE>).
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#38;(int *)a
(int **)&#38;a
</pre></td></tr></table></P><P>

A simple assignment whose left-hand side is a cast works by converting the
right-hand side first to the specified type, then to the type of the inner
left-hand side expression.  After this is stored, the value is converter
back to the specified type to become the value of the assignment.  Thus, if
<CODE>a</CODE> has type <CODE>char *</CODE>, the following two expressions are
equivalent:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(int)a = 5
(int)(a = (char *)5)
</pre></td></tr></table></P><P>

An assignment-with-arithmetic operation such as <SAMP>`+='</SAMP> applied to a cast
performs the arithmetic using the type resulting from the cast, and then
continues as in the previous case.  Therefore, these two expressions are
equivalent:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(int)a += 5
(int)(a = (char *) ((int)a + 5))
</pre></td></tr></table></P><P>

<A NAME="Conditionals"></A>
<HR SIZE="6">
<A NAME="SEC23"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC22"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC24"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.5 Conditional Expressions with Omitted Middle-Operands </H2>
<!--docid::SEC23::-->
<P>

The middle operand in a conditional expression may be omitted.  Then
if the first operand is nonzero, its value is the value of the conditional
expression.
</P><P>

Therefore, the expression
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>x ? : y
</pre></td></tr></table></P><P>

has the value of <CODE>x</CODE> if that is nonzero; otherwise, the value of
<CODE>y</CODE>.
</P><P>

This example is perfectly equivalent to
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>x ? x : y
</pre></td></tr></table></P><P>

In this simple case, the ability to omit the middle operand is not
especially useful.  When it becomes useful is when the first operand does,
or may (if it is a macro argument), contain a side effect.  Then repeating
the operand in the middle would perform the side effect twice.  Omitting
the middle operand uses the value already computed without the undesirable
effects of recomputing it.
</P><P>

<A NAME="Zero-Length"></A>
<HR SIZE="6">
<A NAME="SEC24"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC23"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC25"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.6 Arrays of Length Zero </H2>
<!--docid::SEC24::-->
<P>

Zero-length arrays are allowed in GNU C.  They are very useful as the last
element of a structure which is really a header for a variable-length
object:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>struct line {
  int length;
  char contents[0];
};

{
  struct line *thisline 
    = (struct line *) malloc (sizeof (struct line) + this_length);
  thisline-&#62;length = this_length;
}
</pre></td></tr></table></P><P>

In standard C, you would have to give <CODE>contents</CODE> a length of 1, which
means either you waste space or complicate the argument to <CODE>malloc</CODE>.
</P><P>

<A NAME="Variable-Length"></A>
<HR SIZE="6">
<A NAME="SEC25"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC24"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC26"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.7 Arrays of Variable Length </H2>
<!--docid::SEC25::-->
<P>

Variable-length automatic arrays are allowed in GNU C.  These arrays are
declared like any other automatic arrays, but with a length that is not a
constant expression.  The storage is allocated at that time and
deallocated when the brace-level is exited.  For example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>FILE *concat_fopen (char *s1, char *s2, char *mode)
{
  char str[strlen (s1) + strlen (s2) + 1];
  strcpy (str, s1);
  strcat (str, s2);
  return fopen (str, mode);
}
</pre></td></tr></table></P><P>

You can also use variable-length arrays as arguments to functions:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>struct entry
tester (int len, char data[len])
{
  <small>...</small>
}
</pre></td></tr></table></P><P>

The length of an array is computed on entry to the brace-level where the
array is declared and is remembered for the scope of the array in case you
access it with <CODE>sizeof</CODE>.
</P><P>

Jumping or breaking out of the scope of the array name will also deallocate
the storage.  Jumping into the scope is not allowed; you will get an error
message for it.
</P><P>

You can use the function <CODE>alloca</CODE> to get an effect much like
variable-length arrays.  The function <CODE>alloca</CODE> is available in
many other C implementations (but not in all).  On the other hand,
variable-length arrays are more elegant.
</P><P>

There are other differences between these two methods.  Space allocated
with <CODE>alloca</CODE> exists until the containing <EM>function</EM> returns.
The space for a variable-length array is deallocated as soon as the array
name's scope ends.  (If you use both variable-length arrays and
<CODE>alloca</CODE> in the same function, deallocation of a variable-length array
will also deallocate anything more recently allocated with <CODE>alloca</CODE>.)
</P><P>

<A NAME="Subscripting"></A>
<HR SIZE="6">
<A NAME="SEC26"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC25"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC27"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.8 Non-Lvalue Arrays May Have Subscripts </H2>
<!--docid::SEC26::-->
<P>

Subscripting is allowed on arrays that are not lvalues, even though the
unary <SAMP>`&#38;'</SAMP> operator is not.  For example, this is valid in GNU C though
not valid in other C dialects:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>struct foo {int a[4];};

struct foo f();

bar (int index)
{
  return f().a[index];
}
</pre></td></tr></table></P><P>

<A NAME="Pointer Arith"></A>
<HR SIZE="6">
<A NAME="SEC27"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC26"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC28"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.9 Arithmetic on <CODE>void</CODE>-Pointers and Function Pointers </H2>
<!--docid::SEC27::-->
<P>

In GNU C, addition and subtraction operations are supported on pointers to
<CODE>void</CODE> and on pointers to functions.  This is done by treating the
size of a <CODE>void</CODE> or of a function as 1.
</P><P>

A consequence of this is that <CODE>sizeof</CODE> is also allowed on <CODE>void</CODE>
and on function types, and returns 1.
</P><P>

The option <SAMP>`-Wpointer-arith'</SAMP> requests a warning if these extensions
are used.
</P><P>

<A NAME="Initializers"></A>
<HR SIZE="6">
<A NAME="SEC28"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC27"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC29"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.10 Non-Constant Initializers </H2>
<!--docid::SEC28::-->
<P>

The elements of an aggregate initializer for an automatic variable are
not required to be constant expressions in GNU C.  Here is an example of
an initializer with run-time varying elements:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>foo (float f, float g)
{
  float beat_freqs[2] = { f-g, f+g };
  <small>...</small>
}
</pre></td></tr></table></P><P>

<A NAME="Constructors"></A>
<HR SIZE="6">
<A NAME="SEC29"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC28"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC30"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.11 Constructor Expressions </H2>
<!--docid::SEC29::-->
<P>

GNU C supports constructor expressions.  A constructor looks like a cast
containing an initializer.  Its value is an object of the type specified in
the cast, containing the elements specified in the initializer.  The type
must be a structure, union or array type.
</P><P>

Assume that <CODE>struct foo</CODE> and <CODE>structure</CODE> are declared as shown:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>struct foo {int a; char b[2];} structure;
</pre></td></tr></table></P><P>

Here is an example of constructing a <CODE>struct foo</CODE> with a constructor:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>structure = ((struct foo) {x + y, 'a', 0});
</pre></td></tr></table></P><P>

This is equivalent to writing the following:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>{
  struct foo temp = {x + y, 'a', 0};
  structure = temp;
}
</pre></td></tr></table></P><P>

You can also construct an array.  If all the elements of the constructor
are (made up of) simple constant expressions, suitable for use in
initializers, then the constructor is an lvalue and can be coerced to a
pointer to its first element, as shown here:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>char **foo = (char *[]) { "x", "y", "z" };
</pre></td></tr></table></P><P>

Array constructors whose elements are not simple constants are not very
useful, because the constructor is not an lvalue.  There are only two valid
ways to use it: to subscript it, or initialize an array variable with it.
The former is probably slower than a <CODE>switch</CODE> statement, while the
latter does the same thing an ordinary C initializer would do.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>output = ((int[]) { 2, x, 28 }) [input];
</pre></td></tr></table></P><P>

<A NAME="Function Attributes"></A>
<HR SIZE="6">
<A NAME="SEC30"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC29"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC31"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.12 Declaring Attributes of Functions </H2>
<!--docid::SEC30::-->
<P>

In GNU C, you declare certain things about functions called in your program
which help the compiler optimize function calls.
</P><P>

A few functions, such as <CODE>abort</CODE> and <CODE>exit</CODE>, cannot return.
These functions should be declared <CODE>volatile</CODE>.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>extern volatile void abort ();
</pre></td></tr></table></P><P>

tells the compiler that it can assume that <CODE>abort</CODE> will not return.
This makes slightly better code, but more importantly it helps avoid
spurious warnings of uninitialized variables.
</P><P>

Many functions do not examine any values except their arguments, and
have no effects except the return value.  Such a function can be subject
to common subexpression elimination and loop optimization just as an
arithmetic operator would be.  These functions should be declared
<CODE>const</CODE>.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>extern const void square ();
</pre></td></tr></table></P><P>

says that the hypothetical function <CODE>square</CODE> is safe to call
fewer times than the program says.
</P><P>

Note that a function that has pointer arguments and examines the data
pointed to must <EM>not</EM> be declared <CODE>const</CODE>.  Likewise, a
function that calls a non-<CODE>const</CODE> function usually must not be
<CODE>const</CODE>.
</P><P>

Some people object to this feature, claiming that ANSI C's <CODE>#pragma</CODE>
should be used instead.  There are two reasons I did not do this.
</P><P>

<OL>
<LI>
It is impossible to generate <CODE>#pragma</CODE> commands from a macro.
<P>

<LI>
The <CODE>#pragma</CODE> command is just as likely as these keywords to mean
something else in another compiler.
</OL>
<P>

These two reasons apply to <EM>any</EM> application whatever: as far as
I can see, <CODE>#pragma</CODE> is never useful.
</P><P>

<A NAME="Dollar Signs"></A>
<HR SIZE="6">
<A NAME="SEC31"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC30"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC32"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.13 Dollar Signs in Identifier Names </H2>
<!--docid::SEC31::-->
<P>

In GNU C, you may use dollar signs in identifier names.  This is because
many traditional C implementations allow such identifiers.
</P><P>

Dollar signs are allowed if you specify <SAMP>`-traditional'</SAMP>; they are
not allowed if you specify <SAMP>`-ansi'</SAMP>.  Whether they are allowed by
default depends on the target machine; usually, they are not.
</P><P>

<A NAME="Alignment"></A>
<HR SIZE="6">
<A NAME="SEC32"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC31"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC33"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.14 Inquiring about the Alignment of a Type or Variable </H2>
<!--docid::SEC32::-->
<P>

The keyword <CODE>__alignof__</CODE> allows you to inquire about how an object
is aligned, or the minimum alignment usually required by a type.  Its
syntax is just like <CODE>sizeof</CODE>.
</P><P>

For example, if the target machine requires a <CODE>double</CODE> value to be
aligned on an 8-byte boundary, then <CODE>__alignof__ (double)</CODE> is 8.
This is true on many RISC machines.  On more traditional machine
designs, <CODE>__alignof__ (double)</CODE> is 4 or even 2.
</P><P>

Some machines never actually require alignment; they allow reference to any
data type even at an odd addresses.  For these machines, <CODE>__alignof__</CODE>
reports the <EM>recommended</EM> alignment of a type.
</P><P>

When the operand of <CODE>__alignof__</CODE> is an lvalue rather than a type, the
value is the largest alignment that the lvalue is known to have.  It may
have this alignment as a result of its data type, or because it is part of
a structure and inherits alignment from that structure. For example, after
this declaration:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>struct foo { int x; char y; } foo1;
</pre></td></tr></table></P><P>

the value of <CODE>__alignof__ (foo1.y)</CODE> is probably 2 or 4, the same as
<CODE>__alignof__ (int)</CODE>, even though the data type of <CODE>foo1.y</CODE>
does not itself demand any alignment.</P><P>

<A NAME="Inline"></A>
<HR SIZE="6">
<A NAME="SEC33"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC32"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC34"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.15 An Inline Function is As Fast As a Macro </H2>
<!--docid::SEC33::-->
<P>

By declaring a function <CODE>inline</CODE>, you can direct GNU CC to integrate
that function's code into the code for its callers.  This makes execution
faster by eliminating the function-call overhead; in addition, if any of
the actual argument values are constant, their known values may permit
simplifications at compile time so that not all of the inline function's
code needs to be included.
</P><P>

To declare a function inline, use the <CODE>inline</CODE> keyword in its
declaration, like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>inline int
inc (int *a)
{
  (*a)++;
}
</pre></td></tr></table></P><P>

(If you are writing a header file to be included in ANSI C programs, write
<CODE>__inline__</CODE> instead of <CODE>inline</CODE>.  See section <A HREF="gcc.html#SEC39">7.19 Alternate Keywords</A>.)
</P><P>

You can also make all "simple enough" functions inline with the option
<SAMP>`-finline-functions'</SAMP>.  Note that certain usages in a function
definition can make it unsuitable for inline substitution.
</P><P>

When a function is both inline and <CODE>static</CODE>, if all calls to the
function are integrated into the caller, and the function's address is
never used, then the function's own assembler code is never referenced.
In this case, GNU CC does not actually output assembler code for the
function, unless you specify the option <SAMP>`-fkeep-inline-functions'</SAMP>.
Some calls cannot be integrated for various reasons (in particular,
calls that precede the function's definition cannot be integrated, and
neither can recursive calls within the definition).  If there is a
nonintegrated call, then the function is compiled to assembler code as
usual.  The function must also be compiled as usual if the program
refers to its address, because that can't be inlined.
</P><P>

When an inline function is not <CODE>static</CODE>, then the compiler must assume
that there may be calls from other source files; since a global symbol can
be defined only once in any program, the function must not be defined in
the other source files, so the calls therein cannot be integrated.
Therefore, a non-<CODE>static</CODE> inline function is always compiled on its
own in the usual fashion.
</P><P>

If you specify both <CODE>inline</CODE> and <CODE>extern</CODE> in the function
definition, then the definition is used only for inlining.  In no case
is the function compiled on its own, not even if you refer to its
address explicitly.  Such an address becomes an external reference, as
if you had only declared the function, and had not defined it.
</P><P>

This combination of <CODE>inline</CODE> and <CODE>extern</CODE> has almost the
effect of a macro.  The way to use it is to put a function definition in
a header file with these keywords, and put another copy of the
definition (lacking <CODE>inline</CODE> and <CODE>extern</CODE>) in a library file.
The definition in the header file will cause most calls to the function
to be inlined.  If any uses of the function remain, they will refer to
the single copy in the library.
</P><P>

<A NAME="Extended Asm"></A>
<HR SIZE="6">
<A NAME="SEC34"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC33"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC35"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.16 Assembler Instructions with C Expression Operands </H2>
<!--docid::SEC34::-->
<P>

In an assembler instruction using <CODE>asm</CODE>, you can now specify the
operands of the instruction using C expressions.  This means no more
guessing which registers or memory locations will contain the data you want
to use.
</P><P>

You must specify an assembler instruction template much like what appears
in a machine description, plus an operand constraint string for each
operand.
</P><P>

For example, here is how to use the 68881's <CODE>fsinx</CODE> instruction:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>asm ("fsinx %1,%0" : "=f" (result) : "f" (angle));
</pre></td></tr></table></P><P>

Here <CODE>angle</CODE> is the C expression for the input operand while
<CODE>result</CODE> is that of the output operand.  Each has <SAMP>`"f"'</SAMP> as its
operand constraint, saying that a floating-point register is required.  The
<SAMP>`='</SAMP> in <SAMP>`=f'</SAMP> indicates that the operand is an output; all output
operands' constraints must use <SAMP>`='</SAMP>.  The constraints use the same
language used in the machine description (see section <A HREF="gcc.html#SEC70">13.6 Operand Constraints</A>).
</P><P>

Each operand is described by an operand-constraint string followed by the C
expression in parentheses.  A colon separates the assembler template from
the first output operand, and another separates the last output operand
from the first input, if any.  Commas separate output operands and separate
inputs.  The total number of operands is limited to the maximum number of
operands in any instruction pattern in the machine description.
</P><P>

If there are no output operands, and there are input operands, then there
must be two consecutive colons surrounding the place where the output
operands would go.
</P><P>

Output operand expressions must be lvalues; the compiler can check this.
The input operands need not be lvalues.  The compiler cannot check whether
the operands have data types that are reasonable for the instruction being
executed.  It does not parse the assembler instruction template and does
not know what it means, or whether it is valid assembler input.  The
extended <CODE>asm</CODE> feature is most often used for machine instructions
that the compiler itself does not know exist.
</P><P>

The output operands must be write-only; GNU CC will assume that the values
in these operands before the instruction are dead and need not be
generated.  Extended asm does not support input-output or read-write
operands.  For this reason, the constraint character <SAMP>`+'</SAMP>, which
indicates such an operand, may not be used.
</P><P>

When the assembler instruction has a read-write operand, or an operand
in which only some of the bits are to be changed, you must logically
split its function into two separate operands, one input operand and one
write-only output operand.  The connection between them is expressed by
constraints which say they need to be in the same location when the
instruction executes.  You can use the same C expression for both
operands, or different expressions.  For example, here we write the
(fictitious) <SAMP>`combine'</SAMP> instruction with <CODE>bar</CODE> as its read-only
source operand and <CODE>foo</CODE> as its read-write destination:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>asm ("combine %2,%0" : "=r" (foo) : "0" (foo), "g" (bar));
</pre></td></tr></table></P><P>

The constraint <SAMP>`"0"'</SAMP> for operand 1 says that it must occupy the same
location as operand 0.  A digit in constraint is allowed only in an input
operand, and it must refer to an output operand.
</P><P>

Only a digit in the constraint can guarantee that one operand will be in
the same place as another.  The mere fact that <CODE>foo</CODE> is the value of
both operands is not enough to guarantee that they will be in the same
place in the generated assembler code.  The following would not work:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>asm ("combine %2,%0" : "=r" (foo) : "r" (foo), "g" (bar));
</pre></td></tr></table></P><P>

Various optimizations or reloading could cause operands 0 and 1 to be in
different registers; GNU CC knows no reason not to do so.  For example, the
compiler might find a copy of the value of <CODE>foo</CODE> in one register and
use it for operand 1, but generate the output operand 0 in a different
register (copying it afterward to <CODE>foo</CODE>'s own address).  Of course,
since the register for operand 1 is not even mentioned in the assembler
code, the result will not work, but GNU CC can't tell that.
</P><P>

Unless an output operand has the <SAMP>`&#38;'</SAMP> constraint modifier, GNU CC may
allocate it in the same register as an unrelated input operand, on the
assumption that the inputs are consumed before the outputs are produced.
This assumption may be false if the assembler code actually consists of
more than one instruction.  In such a case, use <SAMP>`&#38;'</SAMP> for each output
operand that may not overlap an input.  See section <A HREF="gcc.html#SEC74">13.6.4 Constraint Modifier Characters</A>.
</P><P>

Some instructions clobber specific hard registers.  To describe this, write
a third colon after the input operands, followed by the names of the
clobbered hard registers (given as strings).  Here is a realistic example
for the vax:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>asm volatile ("movc3 %0,%1,%2"
              : /* no outputs */
              : "g" (from), "g" (to), "g" (count)
              : "r0", "r1", "r2", "r3", "r4", "r5");
</pre></td></tr></table></P><P>

You can put multiple assembler instructions together in a single <CODE>asm</CODE>
template, separated either with newlines (written as <SAMP>`\n'</SAMP>) or with
semicolons if the assembler allows such semicolons.  The GNU assembler
allows semicolons and all Unix assemblers seem to do so.  The input
operands are guaranteed not to use any of the clobbered registers, and
neither will the output operands' addresses, so you can read and write the
clobbered registers as many times as you like.  Here is an example of
multiple instructions in a template; it assumes that the subroutine
<CODE>_foo</CODE> accepts arguments in registers 9 and 10:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>asm ("movl %0,r9;movl %1,r10;call _foo"
     : /* no outputs */
     : "g" (from), "g" (to)
     : "r9", "r10");
</pre></td></tr></table></P><P>

If you want to test the condition code produced by an assembler instruction,
you must include a branch and a label in the <CODE>asm</CODE> construct, as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>asm ("clr %0;frob %1;beq 0f;mov #1,%0;0:"
     : "g" (result)
     : "g" (input));
</pre></td></tr></table></P><P>

This assumes your assembler supports local labels, as the GNU assembler
and most Unix assemblers do.
</P><P>

Usually the most convenient way to use these <CODE>asm</CODE> instructions is to
encapsulate them in macros that look like functions.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define sin(x)       \
({ double __value, __arg = (x);   \
   asm ("fsinx %1,%0": "=f" (__value): "f" (__arg));  \
   __value; })
</pre></td></tr></table></P><P>

Here the variable <CODE>__arg</CODE> is used to make sure that the instruction
operates on a proper <CODE>double</CODE> value, and to accept only those
arguments <CODE>x</CODE> which can convert automatically to a <CODE>double</CODE>.
</P><P>

Another way to make sure the instruction operates on the correct data type
is to use a cast in the <CODE>asm</CODE>.  This is different from using a
variable <CODE>__arg</CODE> in that it converts more different types.  For
example, if the desired type were <CODE>int</CODE>, casting the argument to
<CODE>int</CODE> would accept a pointer with no complaint, while assigning the
argument to an <CODE>int</CODE> variable named <CODE>__arg</CODE> would warn about
using a pointer unless the caller explicitly casts it.
</P><P>

If an <CODE>asm</CODE> has output operands, GNU CC assumes for optimization
purposes that the instruction has no side effects except to change the
output operands.  This does not mean that instructions with a side effect
cannot be used, but you must be careful, because the compiler may eliminate
them if the output operands aren't used, or move them out of loops, or
replace two with one if they constitute a common subexpression.  Also, if
your instruction does have a side effect on a variable that otherwise
appears not to change, the old value of the variable may be reused later if
it happens to be found in a register.
</P><P>

You can prevent an <CODE>asm</CODE> instruction from being deleted, moved or
combined by writing the keyword <CODE>volatile</CODE> after the <CODE>asm</CODE>.  For
example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define set_priority(x)  \
asm volatile ("set_priority %0": /* no outputs */ : "g" (x))
</pre></td></tr></table></P><P>

(However, an instruction without output operands will not be deleted
or moved, regardless, unless it is unreachable.)
</P><P>

It is a natural idea to look for a way to give access to the condition
code left by the assembler instruction.  However, when we attempted to
implement this, we found no way to make it work reliably.  The problem
is that output operands might need reloading, which would result in
additional following "store" instructions.  On most machines, these
instructions would alter the condition code before there was time to
test it.  This problem doesn't arise for ordinary "test" and
"compare" instructions because they don't have any output operands.
</P><P>

If you are writing a header file that should be includable in ANSI C
programs, write <CODE>__asm__</CODE> instead of <CODE>asm</CODE>.  See section <A HREF="gcc.html#SEC39">7.19 Alternate Keywords</A>.
</P><P>

<A NAME="Asm Labels"></A>
<HR SIZE="6">
<A NAME="SEC35"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC34"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC36"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.17 Controlling Names Used in Assembler Code </H2>
<!--docid::SEC35::-->
<P>

You can specify the name to be used in the assembler code for a C
function or variable by writing the <CODE>asm</CODE> (or <CODE>__asm__</CODE>)
keyword after the declarator as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>int foo asm ("myfoo") = 2;
</pre></td></tr></table></P><P>

This specifies that the name to be used for the variable <CODE>foo</CODE> in
the assembler code should be <SAMP>`myfoo'</SAMP> rather than the usual
<SAMP>`_foo'</SAMP>.
</P><P>

On systems where an underscore is normally prepended to the name of a C
function or variable, this feature allows you to define names for the
linker that do not start with an underscore.
</P><P>

You cannot use <CODE>asm</CODE> in this way in a function <EM>definition</EM>; but
you can get the same effect by writing a declaration for the function
before its definition and putting <CODE>asm</CODE> there, like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>extern func () asm ("FUNC");

func (x, y)
     int x, y;
<small>...</small>
</pre></td></tr></table></P><P>

It is up to you to make sure that the assembler names you choose do not
conflict with any other assembler symbols.  Also, you must not use a
register name; that would produce completely invalid assembler code.  GNU
CC does not as yet have the ability to store static variables in registers.
Perhaps that will be added.
</P><P>

<A NAME="Explicit Reg Vars"></A>
<HR SIZE="6">
<A NAME="SEC36"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC35"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC37"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC39"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.18 Variables in Specified Registers </H2>
<!--docid::SEC36::-->
<P>

GNU C allows you to put a few global variables into specified hardware
registers.  You can also specify the register in which an ordinary
register variable should be allocated.
</P><P>

<UL>
<LI>
Global register variables reserve registers throughout the program.
This may be useful in programs such as programming language
interpreters which have a couple of global variables that are accessed
very often.
<P>

<LI>
Local register variables in specific registers do not reserve the
registers.  The compiler's data flow analysis is capable of
determining where the specified registers contain live values, and
where they are available for other uses.  These local variables are
sometimes convenient for use with the extended <CODE>asm</CODE> feature
(see section <A HREF="gcc.html#SEC34">7.16 Assembler Instructions with C Expression Operands</A>).
</UL>
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC37">7.18.1 Defining Global Register Variables</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC38">7.18.2 Specifying Registers for Local Variables</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Global Reg Vars"></A>
<HR SIZE="6">
<A NAME="SEC37"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC36"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC38"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC35"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC36"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC39"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.18.1 Defining Global Register Variables </H3>
<!--docid::SEC37::-->
<P>

You can define a global register variable in GNU C like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>register int *foo asm ("a5");
</pre></td></tr></table></P><P>

Here <CODE>a5</CODE> is the name of the register which should be used.  Choose a
register which is normally saved and restored by function calls on your
machine, so that library routines will not clobber it.
</P><P>

Naturally the register name is cpu-dependent, so you would need to
conditionalize your program according to cpu type.  The register
<CODE>a5</CODE> would be a good choice on a 68000 for a variable of pointer
type.  On machines with register windows, be sure to choose a "global"
register that is not affected magically by the function call mechanism.
</P><P>

In addition, operating systems on one type of cpu may differ in how they
name the registers; then you would need additional conditionals.  For
example, some 68000 operating systems call this register <CODE>%a5</CODE>.
</P><P>

Eventually there may be a way of asking the compiler to choose a register
automatically, but first we need to figure out how it should choose and
how to enable you to guide the choice.  No solution is evident.
</P><P>

Defining a global register variable in a certain register reserves that
register entirely for this use, at least within the current compilation.
The register will not be allocated for any other purpose in the functions
in the current compilation.  The register will not be saved and restored by
these functions.  Stores into this register are never deleted even if they
would appear to be dead, but references may be deleted or moved or
simplified.
</P><P>

It is not safe to access the global register variables from signal
handlers, or from more than one thread of control, because the system
library routines may temporarily use the register for other things (unless
you recompile them specially for the task at hand).
</P><P>

It is not safe for one function that uses a global register variable to
call another such function <CODE>foo</CODE> by way of a third function
<CODE>lose</CODE> that was compiled without knowledge of this variable (i.e. in a
different source file in which the variable wasn't declared).  This is
because <CODE>lose</CODE> might save the register and put some other value there.
For example, you can't expect a global register variable to be available in
the comparison-function that you pass to <CODE>qsort</CODE>, since <CODE>qsort</CODE>
might have put something else in that register.  (If you are prepared to
recompile <CODE>qsort</CODE> with the same global register variable, you can
solve this problem.)
</P><P>

If you want to recompile <CODE>qsort</CODE> or other source files which do not
actually use your global register variable, so that they will not use that
register for any other purpose, then it suffices to specify the compiler
option <SAMP>`-ffixed-<VAR>reg</VAR>'</SAMP>.  You need not actually add a global
register declaration to their source code.
</P><P>

A function which can alter the value of a global register variable cannot
safely be called from a function compiled without this variable, because it
could clobber the value the caller expects to find there on return.
Therefore, the function which is the entry point into the part of the
program that uses the global register variable must explicitly save and
restore the value which belongs to its caller.
</P><P>

On most machines, <CODE>longjmp</CODE> will restore to each global register
variable the value it had at the time of the <CODE>setjmp</CODE>.  On some
machines, however, <CODE>longjmp</CODE> will not change the value of global
register variables.  To be portable, the function that called <CODE>setjmp</CODE>
should make other arrangements to save the values of the global register
variables, and to restore them in a <CODE>longjmp</CODE>.  This way, the same
thing will happen regardless of what <CODE>longjmp</CODE> does.
</P><P>

All global register variable declarations must precede all function
definitions.  If such a declaration could appear after function
definitions, the declaration would be too late to prevent the register from
being used for other purposes in the preceding functions.
</P><P>

Global register variables may not have initial values, because an
executable file has no means to supply initial contents for a register.
</P><P>

<A NAME="Local Reg Vars"></A>
<HR SIZE="6">
<A NAME="SEC38"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC37"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC39"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC35"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC36"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC39"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.18.2 Specifying Registers for Local Variables </H3>
<!--docid::SEC38::-->
<P>

You can define a local register variable with a specified register
like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>register int *foo asm ("a5");
</pre></td></tr></table></P><P>

Here <CODE>a5</CODE> is the name of the register which should be used.  Note
that this is the same syntax used for defining global register
variables, but for a local variable it would appear within a function.
</P><P>

Naturally the register name is cpu-dependent, but this is not a
problem, since specific registers are most often useful with explicit
assembler instructions (see section <A HREF="gcc.html#SEC34">7.16 Assembler Instructions with C Expression Operands</A>).  Both of these things
generally require that you conditionalize your program according to
cpu type.
</P><P>

In addition, operating systems on one type of cpu may differ in how they
name the registers; then you would need additional conditionals.  For
example, some 68000 operating systems call this register <CODE>%a5</CODE>.
</P><P>

Eventually there may be a way of asking the compiler to choose a register
automatically, but first we need to figure out how it should choose and
how to enable you to guide the choice.  No solution is evident.
</P><P>

Defining such a register variable does not reserve the register; it
remains available for other uses in places where flow control determines
the variable's value is not live.  However, these registers are made
unavailable for use in the reload pass.  I would not be surprised if
excessive use of this feature leaves the compiler too few available
registers to compile certain functions.
</P><P>

<A NAME="Alternate Keywords"></A>
<HR SIZE="6">
<A NAME="SEC39"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC38"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC36"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.19 Alternate Keywords </H2>
<!--docid::SEC39::-->
<P>

The option <SAMP>`-traditional'</SAMP> disables certain keywords; <SAMP>`-ansi'</SAMP>
disables certain others.  This causes trouble when you want to use GNU C
extensions, or ANSI C features, in a general-purpose header file that
should be usable by all programs, including ANSI C programs and traditional
ones.  The keywords <CODE>asm</CODE>, <CODE>typeof</CODE> and <CODE>inline</CODE> cannot be
used since they won't work in a program compiled with <SAMP>`-ansi'</SAMP>, while
the keywords <CODE>const</CODE>, <CODE>volatile</CODE>, <CODE>signed</CODE>, <CODE>typeof</CODE>
and <CODE>inline</CODE> won't work in a program compiled with
<SAMP>`-traditional'</SAMP>.</P><P>

The way to solve these problems is to put <SAMP>`__'</SAMP> at the beginning and
end of each problematical keyword.  For example, use <CODE>__asm__</CODE>
instead of <CODE>asm</CODE>, <CODE>__const__</CODE> instead of <CODE>const</CODE>, and
<CODE>__inline__</CODE> instead of <CODE>inline</CODE>.
</P><P>

Other C compilers won't accept these alternative keywords; if you want to
compile with another compiler, you can define the alternate keywords as
macros to replace them with the customary keywords.  It looks like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#ifndef __GNUC__
#define __asm__ asm
#endif
</pre></td></tr></table></P><P>

<A NAME="Bugs"></A>
<HR SIZE="6">
<A NAME="SEC40"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC39"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC41"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC43"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 8. Reporting Bugs </H1>
<!--docid::SEC40::-->
<P>

Your bug reports play an essential role in making GNU CC reliable.
</P><P>

When you encounter a problem, the first thing to do is to see if it is
already known.  See section <A HREF="gcc.html#SEC15">4. Known Causes of Trouble with GNU CC</A>.  Also look in <A HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A>.
If it isn't known, then you should report the problem.
</P><P>

Reporting a bug may help you by bringing a solution to your problem, or
it may not.  (If it does not, look in the service directory; see
<A HREF="gcc.html#SEC16">5. How To Get Help with GNU CC</A>.)  In any case, the principal function of a bug report
is to help the entire community by making the next version of GNU CC
work better.  Bug reports are your contribution to the maintenance of
GNU CC.
</P><P>

In order for a bug report to serve its purpose, you must include the
information that makes for fixing the bug.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC41">8.1 Have You Found a Bug?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Have you really found a bug?</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC42">8.2 How to Report Bugs</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to report a bug effectively.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Bug Criteria"></A>
<HR SIZE="6">
<A NAME="SEC41"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC42"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC43"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 8.1 Have You Found a Bug? </H2>
<!--docid::SEC41::-->
<P>

If you are not sure whether you have found a bug, here are some guidelines:
</P><P>

<UL>
<LI>
If the compiler gets a fatal signal, for any input whatever, that is a
compiler bug.  Reliable compilers never crash.
<P>

<LI>
If the compiler produces invalid assembly code, for any input whatever
(except an <CODE>asm</CODE> statement), that is a compiler bug, unless the
compiler reports errors (not just warnings) which would ordinarily
prevent the assembler from being run.
<P>

<LI>
If the compiler produces valid assembly code that does not correctly
execute the input source code, that is a compiler bug.
<P>

However, you must double-check to make sure, because you may have run
into an incompatibility between GNU C and traditional C
(see section <A HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A>).  These incompatibilities might be considered
bugs, but they are inescapable consequences of valuable features.
</P><P>

Or you may have a program whose behavior is undefined, which happened
by chance to give the desired results with another C compiler.
</P><P>

For example, in many nonoptimizing compilers, you can write <SAMP>`x;'</SAMP>
at the end of a function instead of <SAMP>`return x;'</SAMP>, with the same
results.  But the value of the function is undefined if <CODE>return</CODE>
is omitted; it is not a bug when GNU CC produces different results.
</P><P>

Problems often result from expressions with two increment operators,
as in <CODE>f (*p++, *p++)</CODE>.  Your previous compiler might have
interpreted that expression the way you intended; GNU CC might
interpret it another way.  Neither compiler is wrong.  The bug is
in your code.
</P><P>

After you have localized the error to a single source line, it should
be easy to check for these things.  If your program is correct and
well defined, you have found a compiler bug.
</P><P>

<LI>
If the compiler produces an error message for valid input, that is a
compiler bug.
<P>

Note that the following is not valid input, and the error message for
it is not a bug:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>int foo (char);

int
foo (x)
     char x;
{ <small>...</small> }
</pre></td></tr></table></P><P>

The prototype says to pass a <CODE>char</CODE>, while the definition says to
pass an <CODE>int</CODE> and treat the value as a <CODE>char</CODE>.  This is what
the ANSI standard says, and it makes sense.
</P><P>

<LI>
If the compiler does not produce an error message for invalid input,
that is a compiler bug.  However, you should note that your idea of
"invalid input" might be my idea of "an extension" or "support
for traditional practice".
<P>

<LI>
If you are an experienced user of C compilers, your suggestions
for improvement of GNU CC are welcome in any case.
</UL>
<P>

<A NAME="Bug Reporting"></A>
<HR SIZE="6">
<A NAME="SEC42"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC41"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC43"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC43"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 8.2 How to Report Bugs </H2>
<!--docid::SEC42::-->
<P>

Send bug reports for GNU C to one of these addresses:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>bug-gcc@prep.ai.mit.edu
{ucbvax|mit-eddie|uunet}!prep.ai.mit.edu!bug-gcc
</pre></td></tr></table></P><P>

<STRONG>Do not send bug reports to <SAMP>`help-gcc'</SAMP>, or to the newsgroup
<SAMP>`gnu.gcc.help'</SAMP>.</STRONG>  Most users of GNU CC do not want to receive bug
reports.  Those that do, have asked to be on <SAMP>`bug-gcc'</SAMP>.
</P><P>

The mailing list <SAMP>`bug-gcc'</SAMP> has a newsgroup which serves as a
repeater.  The mailing list and the newsgroup carry exactly the same
messages.  Often people think of posting bug reports to the newsgroup
instead of mailing them.  This appears to work, but it has one problem
which can be crucial: a newsgroup posting does not contain a mail path
back to the sender.  Thus, if I need to ask for more information, I
may be unable to reach you.  For this reason, it is better to send bug
reports to the mailing list.
</P><P>

As a last resort, send bug reports on paper to:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>GNU Compiler Bugs
Free Software Foundation
675 Mass Ave
Cambridge, MA 02139
</pre></td></tr></table></P><P>

The fundamental principle of reporting bugs usefully is this:
<STRONG>report all the facts</STRONG>.  If you are not sure whether to state a
fact or leave it out, state it!
</P><P>

Often people omit facts because they think they know what causes the
problem and they conclude that some details don't matter.  Thus, you might
assume that the name of the variable you use in an example does not matter.
Well, probably it doesn't, but one cannot be sure.  Perhaps the bug is a
stray memory reference which happens to fetch from the location where that
name is stored in memory; perhaps, if the name were different, the contents
of that location would fool the compiler into doing the right thing despite
the bug.  Play it safe and give a specific, complete example.  That is the
easiest thing for you to do, and the most helpful.
</P><P>

Keep in mind that the purpose of a bug report is to enable me to fix
the bug if it is not known.  It isn't very important what happens if
the bug is already known.  Therefore, always write your bug reports on
the assumption that the bug is not known.
</P><P>

Sometimes people give a few sketchy facts and ask, "Does this ring a
bell?"  Those bug reports are useless, and I urge everyone to
<EM>refuse to respond to them</EM> except to chide the sender to report
bugs properly.
</P><P>

To enable me to fix the bug, you should include all these things:
</P><P>

<UL>
<LI>
The version of GNU CC.  You can get this by running it with the
<SAMP>`-v'</SAMP> option.
<P>

Without this, I won't know whether there is any point in looking for
the bug in the current version of GNU CC.
</P><P>

<LI>
A complete input file that will reproduce the bug.  If the bug is in
the C preprocessor, send me a source file and any header files that it
requires.  If the bug is in the compiler proper (<TT>`cc1'</TT>), run your
source file through the C preprocessor by doing <SAMP>`gcc -E
<VAR>sourcefile</VAR> &#62; <VAR>outfile</VAR>'</SAMP>, then include the contents of
<VAR>outfile</VAR> in the bug report.  (Any <SAMP>`-I'</SAMP>, <SAMP>`-D'</SAMP> or
<SAMP>`-U'</SAMP> options that you used in actual compilation should also be
used when doing this.)
<P>

A single statement is not enough of an example.  In order to compile
it, it must be embedded in a function definition; and the bug might
depend on the details of how this is done.
</P><P>

Without a real example I can compile, all I can do about your bug
report is wish you luck.  It would be futile to try to guess how to
provoke the bug.  For example, bugs in register allocation and
reloading frequently depend on every little detail of the function
they happen in.
</P><P>

<LI>
The command arguments you gave GNU CC to compile that example and
observe the bug.  For example, did you use <SAMP>`-O'</SAMP>?  To guarantee
you won't omit something important, list them all.
<P>

If I were to try to guess the arguments, I would probably guess wrong
and then I would not encounter the bug.
</P><P>

<LI>
The names of the files that you used for <TT>`tm.h'</TT> and <TT>`md'</TT>
when you installed the compiler.
<P>

<LI>
The type of machine you are using, and the operating system name and
version number.
<P>

<LI>
A description of what behavior you observe that you believe is
incorrect.  For example, "It gets a fatal signal," or, "There is an
incorrect assembler instruction in the output."
<P>

Of course, if the bug is that the compiler gets a fatal signal, then I
will certainly notice it.  But if the bug is incorrect output, I might
not notice unless it is glaringly wrong.  I won't study all the
assembler code from a 50-line C program just on the off chance that it
might be wrong.
</P><P>

Even if the problem you experience is a fatal signal, you should still
say so explicitly.  Suppose something strange is going on, such as,
your copy of the compiler is out of synch, or you have encountered a
bug in the C library on your system.  (This has happened!)  Your copy
might crash and mine would not.  If you <I>told</I> me to expect a crash,
then when mine fails to crash, I would know that the bug was not
happening for me.  If you had not told me to expect a crash, then I
would not be able to draw any conclusion from my observations.
</P><P>

Often the observed symptom is incorrect output when your program is run.
Sad to say, this is not enough information for me unless the program is
short and simple.  If you send me a large program, I don't have time to
figure out how it would work if compiled correctly, much less which line
of it was compiled wrong.  So you will have to do that.  Tell me which
source line it is, and what incorrect result happens when that line is
executed.  A person who understands the test program can find this as
easily as a bug in the program itself.
</P><P>

<LI>
If you send me examples of output from GNU CC, please use <SAMP>`-g'</SAMP>
when you make them.  The debugging information includes source line
numbers which are essential for correlating the output with the input.
<P>

<LI>
If you wish to suggest changes to the GNU CC source, send me context
diffs.  If you even discuss something in the GNU CC source, refer to
it by context, not by line number.
<P>

The line numbers in my development sources don't match those in your
sources.  Your line numbers would convey no useful information to me.
</P><P>

<LI>
Additional information from a debugger might enable me to find
a problem on a machine which I do not have available myself.
However, you need to think when you collect this information if
you want it to have any chance of being useful.
<P>

For example, many people send just a backtrace, but that is never
useful by itself.  A simple backtrace with arguments conveys little
about GNU CC because the compiler is largely data-driven; the same
functions are called over and over for different RTL insns, doing
different things depending on the details of the insn.
</P><P>

Most of the arguments listed in the backtrace are useless because they
are pointers to RTL list structure.  The numeric values of the
pointers, which the debugger prints in the backtrace, have no
significance whatever; all that matters is the contents of the objects
they point to (and most of the contents are other such pointers).
</P><P>

In addition, most compiler passes consist of one or more loops that
scan the RTL insn sequence.  The most vital piece of information about
such a loop--which insn it has reached--is usually in a local variable,
not in an argument.
</P><P>

What you need to provide in addition to a backtrace are the values of
the local variables for several stack frames up.  When a local
variable or an argument is an RTX, first print its value and then use
the GDB command <CODE>pr</CODE> to print the RTL expression that it points
to.  (If GDB doesn't run on your machine, use your debugger to call
the function <CODE>debug_rtx</CODE> with the RTX as an argument.)  In
general, whenever a variable is a pointer, its value is no use
without the data it points to.
</P><P>

In addition, include a debugging dump from just before the pass
in which the crash happens.  Most bugs involve a series of insns,
not just one.
</UL>
<P>

Here are some things that are not necessary:
</P><P>

<UL>
<LI>
A description of the envelope of the bug.
<P>

Often people who encounter a bug spend a lot of time investigating
which changes to the input file will make the bug go away and which
changes will not affect it.
</P><P>

This is often time consuming and not very useful, because the way I
will find the bug is by running a single example under the debugger
with breakpoints, not by pure deduction from a series of examples.
I recommend that you save your time for something else.
</P><P>

Of course, if you can find a simpler example to report <EM>instead</EM>
of the original one, that is a convenience for me.  Errors in the
output will be easier to spot, running under the debugger will take
less time, etc.  Most GNU CC bugs involve just one function, so the
most straightforward way to simplify an example is to delete all the
function definitions except the one where the bug occurs.  Those
earlier in the file may be replaced by external declarations if the
crucial function depends on them.  (Exception: inline functions may
affect compilation of functions defined later in the file.)
</P><P>

However, simplification is not vital; if you don't want to do this,
report the bug anyway and send me the entire test case you used.
</P><P>

<LI>
A patch for the bug.
<P>

A patch for the bug does help me if it is a good one.  But don't omit
the necessary information, such as the test case, on the assumption that
a patch is all I need.  I might see problems with your patch and decide
to fix the problem another way, or I might not understand it at all.
</P><P>

Sometimes with a program as complicated as GNU CC it is very hard to
construct an example that will make the program follow a certain path
through the code.  If you don't send me the example, I won't be able
to construct one, so I won't be able to verify that the bug is fixed.
</P><P>

And if I can't understand what bug you are trying to fix, or why your
patch should be an improvement, I won't install it.  A test case will
help me to understand.
</P><P>

<LI>
A guess about what the bug is or what it depends on.
<P>

Such guesses are usually wrong.  Even I can't guess right about such
things without first using the debugger to find the facts.
</UL>
<P>

<A NAME="Portability"></A>
<HR SIZE="6">
<A NAME="SEC43"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC42"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC44"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC40"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC44"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 9. GNU CC and Portability </H1>
<!--docid::SEC43::-->
<P>

The main goal of GNU CC was to make a good, fast compiler for machines in
the class that the GNU system aims to run on: 32-bit machines that address
8-bit bytes and have several general registers.  Elegance, theoretical
power and simplicity are only secondary.
</P><P>

GNU CC gets most of the information about the target machine from a machine
description which gives an algebraic formula for each of the machine's
instructions.  This is a very clean way to describe the target.  But when
the compiler needs information that is difficult to express in this
fashion, I have not hesitated to define an ad-hoc parameter to the machine
description.  The purpose of portability is to reduce the total work needed
on the compiler; it was not of interest for its own sake.
</P><P>

GNU CC does not contain machine dependent code, but it does contain code
that depends on machine parameters such as endianness (whether the most
significant byte has the highest or lowest address of the bytes in a word)
and the availability of autoincrement addressing.  In the RTL-generation
pass, it is often necessary to have multiple strategies for generating code
for a particular kind of syntax tree, strategies that are usable for different
combinations of parameters.  Often I have not tried to address all possible
cases, but only the common ones or only the ones that I have encountered.
As a result, a new target may require additional strategies.  You will know
if this happens because the compiler will call <CODE>abort</CODE>.  Fortunately,
the new strategies can be added in a machine-independent fashion, and will
affect only the target machines that need them.
</P><P>

<A NAME="Interface"></A>
<HR SIZE="6">
<A NAME="SEC44"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC43"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC45"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC43"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC45"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 10. Interfacing to GNU CC Output </H1>
<!--docid::SEC44::-->
<P>

GNU CC is normally configured to use the same function calling convention
normally in use on the target system.  This is done with the
machine-description macros described (see section <A HREF="gcc.html#SEC82">14. Machine Description Macros</A>).
</P><P>

However, returning of structure and union values is done differently on
some target machines.  As a result, functions compiled with PCC
returning such types cannot be called from code compiled with GNU CC,
and vice versa.  This does not cause trouble often because few Unix
library routines return structures or unions.
</P><P>

GNU CC code returns structures and unions that are 1, 2, 4 or 8 bytes
long in the same registers used for <CODE>int</CODE> or <CODE>double</CODE> return
values.  (GNU CC typically allocates variables of such types in
registers also.)  Structures and unions of other sizes are returned by
storing them into an address passed by the caller (usually in a
register).  The machine-description macros <CODE>STRUCT_VALUE</CODE> and
<CODE>STRUCT_INCOMING_VALUE</CODE> tell GNU CC where to pass this address.
</P><P>

By contrast, PCC on most target machines returns structures and unions
of any size by copying the data into an area of static storage, and then
returning the address of that storage as if it were a pointer value.
The caller must copy the data from that memory area to the place where
the value is wanted.  This is slower than the method used by GNU CC, and
fails to be reentrant.
</P><P>

On some target machines, such as RISC machines and the 80386, the
standard system convention is to pass to the subroutine the address of
where to return the value.  On these machines, GNU CC has been
configured to be compatible with the standard compiler, when this method
is used.  It may not be compatible for structures of 1, 2, 4 or 8 bytes.
</P><P>

GNU CC uses the system's standard convention for passing arguments.  On
some machines, the first few arguments are passed in registers; in
others, all are passed on the stack.  It would be possible to use
registers for argument passing on any machine, and this would probably
result in a significant speedup.  But the result would be complete
incompatibility with code that follows the standard convention.  So this
change is practical only if you are switching to GNU CC as the sole C
compiler for the system.  We may implement register argument passing on
certain machines once we have a complete GNU system so that we can
compile the libraries with GNU CC.
</P><P>

If you use <CODE>longjmp</CODE>, beware of automatic variables.  ANSI C says that
automatic variables that are not declared <CODE>volatile</CODE> have undefined
values after a <CODE>longjmp</CODE>.  And this is all GNU CC promises to do,
because it is very difficult to restore register variables correctly, and
one of GNU CC's features is that it can put variables in registers without
your asking it to.
</P><P>

If you want a variable to be unaltered by <CODE>longjmp</CODE>, and you don't
want to write <CODE>volatile</CODE> because old C compilers don't accept it,
just take the address of the variable.  If a variable's address is ever
taken, even if just to compute it and ignore it, then the variable cannot
go in a register:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>{
  int careful;
  &#38;careful;
  <small>...</small>
}
</pre></td></tr></table></P><P>

Code compiled with GNU CC may call certain library routines.  Most of
them handle arithmetic for which there are no instructions.  This
includes multiply and divide on some machines, and floating point
operations on any machine for which floating point support is disabled
with <SAMP>`-msoft-float'</SAMP>.  Some standard parts of the C library, such as
<CODE>bcopy</CODE> or <CODE>memcpy</CODE>, are also called automatically.  The usual
function call interface is used for calling the library routines.
</P><P>

These library routines should be defined in the library <TT>`gnulib'</TT>,
which GNU CC automatically searches whenever it links a program.  On
machines that have multiply and divide instructions, if hardware
floating point is in use, normally <TT>`gnulib'</TT> is not needed, but it
is searched just in case.
</P><P>

Each arithmetic function is defined in <TT>`gnulib.c'</TT> to use the
corresponding C arithmetic operator.  As long as the file is compiled
with another C compiler, which supports all the C arithmetic operators,
this file will work portably.  However, <TT>`gnulib.c'</TT> does not work if
compiled with GNU CC, because each arithmetic function would compile
into a call to itself!
</P><P>

<A NAME="Passes"></A>
<HR SIZE="6">
<A NAME="SEC45"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC44"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC44"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 11. Passes and Files of the Compiler </H1>
<!--docid::SEC45::-->
<P>

The overall control structure of the compiler is in <TT>`toplev.c'</TT>.  This
file is responsible for initialization, decoding arguments, opening and
closing files, and sequencing the passes.
</P><P>

The parsing pass is invoked only once, to parse the entire input.  The RTL
intermediate code for a function is generated as the function is parsed, a
statement at a time.  Each statement is read in as a syntax tree and then
converted to RTL; then the storage for the tree for the statement is
reclaimed.  Storage for types (and the expressions for their sizes),
declarations, and a representation of the binding contours and how they nest,
remains until the function is finished being compiled; these are all needed
to output the debugging information.
</P><P>

Each time the parsing pass reads a complete function definition or
top-level declaration, it calls the function
<CODE>rest_of_compilation</CODE> or <CODE>rest_of_decl_compilation</CODE> in
<TT>`toplev.c'</TT>, which are responsible for all further processing
necessary, ending with output of the assembler language.  All other
compiler passes run, in sequence, within <CODE>rest_of_compilation</CODE>.
When that function returns from compiling a function definition, the
storage used for that function definition's compilation is entirely
freed, unless it is an inline function (see section <A HREF="gcc.html#SEC33">7.15 An Inline Function is As Fast As a Macro</A>).
</P><P>

Here is a list of all the passes of the compiler and their source files.
Also included is a description of where debugging dumps can be requested
with <SAMP>`-d'</SAMP> options.
</P><P>

<UL>
<LI>
Parsing.  This pass reads the entire text of a function definition,
constructing partial syntax trees.  This and RTL generation are no longer
truly separate passes (formerly they were), but it is easier to think
of them as separate.
<P>

The tree representation does not entirely follow C syntax, because it is
intended to support other languages as well.
</P><P>

C data type analysis is also done in this pass, and every tree node
that represents an expression has a data type attached.  Variables are
represented as declaration nodes.
</P><P>

Constant folding and associative-law simplifications are also done
during this pass.
</P><P>

The source files for parsing are <TT>`c-parse.y'</TT>, <TT>`c-decl.c'</TT>,
<TT>`c-typeck.c'</TT>, <TT>`c-convert.c'</TT>, <TT>`stor-layout.c'</TT>,
<TT>`fold-const.c'</TT>, and <TT>`tree.c'</TT>.  The last three files are
intended to be language-independent.  There are also header files
<TT>`c-parse.h'</TT>, <TT>`c-tree.h'</TT>, <TT>`tree.h'</TT> and <TT>`tree.def'</TT>.
The last two define the format of the tree representation.</P><P>

<LI>
RTL generation.  This is the conversion of syntax tree into RTL code.
It is actually done statement-by-statement during parsing, but for
most purposes it can be thought of as a separate pass.
<P>

This is where the bulk of target-parameter-dependent code is found,
since often it is necessary for strategies to apply only when certain
standard kinds of instructions are available.  The purpose of named
instruction patterns is to provide this information to the RTL
generation pass.
</P><P>

Optimization is done in this pass for <CODE>if</CODE>-conditions that are
comparisons, boolean operations or conditional expressions.  Tail
recursion is detected at this time also.  Decisions are made about how
best to arrange loops and how to output <CODE>switch</CODE> statements.
</P><P>

The source files for RTL generation are <TT>`stmt.c'</TT>, <TT>`expr.c'</TT>,
<TT>`explow.c'</TT>, <TT>`expmed.c'</TT>, <TT>`optabs.c'</TT> and <TT>`emit-rtl.c'</TT>.
Also, the file <TT>`insn-emit.c'</TT>, generated from the machine description
by the program <CODE>genemit</CODE>, is used in this pass.  The header files
<TT>`expr.h'</TT> is used for communication within this pass.</P><P>

The header files <TT>`insn-flags.h'</TT> and <TT>`insn-codes.h'</TT>,
generated from the machine description by the programs <CODE>genflags</CODE>
and <CODE>gencodes</CODE>, tell this pass which standard names are available
for use and which patterns correspond to them.</P><P>

Aside from debugging information output, none of the following passes
refers to the tree structure representation of the function (only
part of which is saved).
</P><P>

The decision of whether the function can and should be expanded inline
in its subsequent callers is made at the end of rtl generation.  The
function must meet certain criteria, currently related to the size of
the function and the types and number of parameters it has.  Note that
this function may contain loops, recursive calls to itself
(tail-recursive functions can be inlined!), gotos, in short, all
constructs supported by GNU CC.
</P><P>

The option <SAMP>`-dr'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.rtl'</SAMP> to
the input file name.
</P><P>

<LI>
Jump optimization.  This pass simplifies jumps to the following
instruction, jumps across jumps, and jumps to jumps.  It deletes
unreferenced labels and unreachable code, except that unreachable code
that contains a loop is not recognized as unreachable in this pass.
(Such loops are deleted later in the basic block analysis.)
<P>

Jump optimization is performed two or three times.  The first time is
immediately following RTL generation.  The second time is after CSE,
but only if CSE says repeated jump optimization is needed.  The
last time is right before the final pass.  That time, cross-jumping
and deletion of no-op move instructions are done together with the
optimizations described above.
</P><P>

The source file of this pass is <TT>`jump.c'</TT>.
</P><P>

The option <SAMP>`-dj'</SAMP> causes a debugging dump of the RTL code after
this pass is run for the first time.  This dump file's name is made by
appending <SAMP>`.jump'</SAMP> to the input file name.
</P><P>

<LI>
Register scan.  This pass finds the first and last use of each
register, as a guide for common subexpression elimination.  Its source
is in <TT>`regclass.c'</TT>.
<P>

<LI>
Common subexpression elimination.  This pass also does constant
propagation.  Its source file is <TT>`cse.c'</TT>.  If constant
propagation causes conditional jumps to become unconditional or to
become no-ops, jump optimization is run again when CSE is finished.
<P>

The option <SAMP>`-ds'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.cse'</SAMP> to
the input file name.
</P><P>

<LI>
Loop optimization.  This pass moves constant expressions out of loops,
and optionally does strength-reduction as well.  Its source file is
<TT>`loop.c'</TT>.
<P>

The option <SAMP>`-dL'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.loop'</SAMP> to
the input file name.
</P><P>

<LI>
Stupid register allocation is performed at this point in a
nonoptimizing compilation.  It does a little data flow analysis as
well.  When stupid register allocation is in use, the next pass
executed is the reloading pass; the others in between are skipped.
The source file is <TT>`stupid.c'</TT>.
<P>

<LI>
Data flow analysis (<TT>`flow.c'</TT>).  This pass divides the program
into basic blocks (and in the process deletes unreachable loops); then
it computes which pseudo-registers are live at each point in the
program, and makes the first instruction that uses a value point at
the instruction that computed the value.
<P>

This pass also deletes computations whose results are never used, and
combines memory references with add or subtract instructions to make
autoincrement or autodecrement addressing.
</P><P>

The option <SAMP>`-df'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.flow'</SAMP> to
the input file name.  If stupid register allocation is in use, this
dump file reflects the full results of such allocation.
</P><P>

<LI>
Instruction combination (<TT>`combine.c'</TT>).  This pass attempts to
combine groups of two or three instructions that are related by data
flow into single instructions.  It combines the RTL expressions for
the instructions by substitution, simplifies the result using algebra,
and then attempts to match the result against the machine description.
<P>

The option <SAMP>`-dc'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.combine'</SAMP>
to the input file name.
</P><P>

<LI>
Register class preferencing.  The RTL code is scanned to find out
which register class is best for each pseudo register.  The source
file is <TT>`regclass.c'</TT>.
<P>

<LI>
Local register allocation (<TT>`local-alloc.c'</TT>).  This pass allocates
hard registers to pseudo registers that are used only within one basic
block.  Because the basic block is linear, it can use fast and
powerful techniques to do a very good job.
<P>

The option <SAMP>`-dl'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.lreg'</SAMP> to
the input file name.
</P><P>

<LI>
Global register allocation (<TT>`global-alloc.c'</TT>).  This pass
allocates hard registers for the remaining pseudo registers (those
whose life spans are not contained in one basic block).
<P>

<LI>
Reloading.  This pass renumbers pseudo registers with the hardware
registers numbers they were allocated.  Pseudo registers that did not
get hard registers are replaced with stack slots.  Then it finds
instructions that are invalid because a value has failed to end up in
a register, or has ended up in a register of the wrong kind.  It fixes
up these instructions by reloading the problematical values
temporarily into registers.  Additional instructions are generated to
do the copying.
<P>

Source files are <TT>`reload.c'</TT> and <TT>`reload1.c'</TT>, plus the header
<TT>`reload.h'</TT> used for communication between them.
</P><P>

The option <SAMP>`-dg'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.greg'</SAMP> to
the input file name.
</P><P>

<LI>
Jump optimization is repeated, this time including cross-jumping
and deletion of no-op move instructions.
<P>

The option <SAMP>`-dJ'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.jump2'</SAMP>
to the input file name.
</P><P>

<LI>
Delayed branch scheduling may be done at this point.  The source file
name is <TT>`dbranch.c'</TT>.
<P>

The option <SAMP>`-dd'</SAMP> causes a debugging dump of the RTL code after
this pass.  This dump file's name is made by appending <SAMP>`.dbr'</SAMP>
to the input file name.
</P><P>

<LI>
Final.  This pass outputs the assembler code for the function.  It is
also responsible for identifying spurious test and compare
instructions.  Machine-specific peephole optimizations are performed
at the same time.  The function entry and exit sequences are generated
directly as assembler code in this pass; they never exist as RTL.
<P>

The source files are <TT>`final.c'</TT> plus <TT>`insn-output.c'</TT>; the
latter is generated automatically from the machine description by the
tool <TT>`genoutput'</TT>.  The header file <TT>`conditions.h'</TT> is used
for communication between these files.
</P><P>

<LI>
Debugging information output.  This is run after final because it must
output the stack slot offsets for pseudo registers that did not get
hard registers.  Source files are <TT>`dbxout.c'</TT> for DBX symbol table
format and <TT>`symout.c'</TT> for GDB's own symbol table format.
</UL>
<P>

Some additional files are used by all or many passes:
</P><P>

<UL>
<LI>
Every pass uses <TT>`machmode.def'</TT>, which defines the machine modes.
<P>

<LI>
All the passes that work with RTL use the header files <TT>`rtl.h'</TT>
and <TT>`rtl.def'</TT>, and subroutines in file <TT>`rtl.c'</TT>.  The tools
<CODE>gen*</CODE> also use these files to read and work with the machine
description RTL.
<P>

<LI>
Several passes refer to the header file <TT>`insn-config.h'</TT> which
contains a few parameters (C macro definitions) generated
automatically from the machine description RTL by the tool
<CODE>genconfig</CODE>.
<P>

<LI>
Several passes use the instruction recognizer, which consists of
<TT>`recog.c'</TT> and <TT>`recog.h'</TT>, plus the files <TT>`insn-recog.c'</TT>
and <TT>`insn-extract.c'</TT> that are generated automatically from the
machine description by the tools <TT>`genrecog'</TT> and
<TT>`genextract'</TT>.<P>

<LI>
Several passes use the header files <TT>`regs.h'</TT> which defines the
information recorded about pseudo register usage, and <TT>`basic-block.h'</TT>
which defines the information recorded about basic blocks.
<P>

<LI>
<TT>`hard-reg-set.h'</TT> defines the type <CODE>HARD_REG_SET</CODE>, a bit-vector
with a bit for each hard register, and some macros to manipulate it.
This type is just <CODE>int</CODE> if the machine has few enough hard registers;
otherwise it is an array of <CODE>int</CODE> and some of the macros expand
into loops.
</UL>
<P>

<A NAME="RTL"></A>
<HR SIZE="6">
<A NAME="SEC46"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC45"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC47"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC45"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 12. RTL Representation </H1>
<!--docid::SEC46::-->
<P>

Most of the work of the compiler is done on an intermediate representation
called register transfer language.  In this language, the instructions to be
output are described, pretty much one by one, in an algebraic form that
describes what the instruction does.
</P><P>

RTL is inspired by Lisp lists.  It has both an internal form, made up of
structures that point at other structures, and a textual form that is used
in the machine description and in printed debugging dumps.  The textual
form uses nested parentheses to indicate the pointers in the internal form.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC47">12.1 RTL Object Types</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expressions vs vectors vs strings vs integers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC48">12.2 Access to Operands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Macros to access expression operands or vector elts.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC49">12.3 Flags in an RTL Expression</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Other flags in an RTL expression.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC50">12.4 Machine Modes</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Describing the size and format of a datum.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC51">12.5 Constant Expression Types</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expressions with constant values.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC52">12.6 Registers and Memory</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expressions representing register contents or memory.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC53">12.7 RTL Expressions for Arithmetic</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expressions representing arithmetic on other expressions.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC54">12.8 Comparison Operations</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expressions representing comparison of expressions.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC55">12.9 Bit-fields</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expressions representing bit-fields in memory or reg.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC56">12.10 Conversions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Extending, truncating, floating or fixing.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC57">12.11 Declarations</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Declaring volatility, constancy, etc.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC58">12.12 Side Effect Expressions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expressions for storing in registers, etc.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC59">12.13 Embedded Side-Effects on Addresses</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Embedded side-effects for autoincrement addressing.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC60">12.14 Assembler Instructions as Expressions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Representing <CODE>asm</CODE> with operands.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC61">12.15 Insns</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expression types for entire insns.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC62">12.16 RTL Representation of Function-Call Insns</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">RTL representation of function call insns.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC63">12.17 Structure Sharing Assumptions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Some expressions are unique; others *must* be copied.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="RTL Objects"></A>
<HR SIZE="6">
<A NAME="SEC47"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC48"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.1 RTL Object Types </H2>
<!--docid::SEC47::-->
<P>

RTL uses four kinds of objects: expressions, integers, strings and vectors.
Expressions are the most important ones.  An RTL expression ("RTX", for
short) is a C structure, but it is usually referred to with a pointer; a
type that is given the typedef name <CODE>rtx</CODE>.
</P><P>

An integer is simply an <CODE>int</CODE>, and a string is a <CODE>char *</CODE>.
Within RTL code, strings appear only inside <CODE>symbol_ref</CODE> expressions,
but they appear in other contexts in the RTL expressions that make up
machine descriptions.  Their written form uses decimal digits.
</P><P>

A string is a sequence of characters.  In core it is represented as a
<CODE>char *</CODE> in usual C fashion, and it is written in C syntax as well.
However, strings in RTL may never be null.  If you write an empty string in
a machine description, it is represented in core as a null pointer rather
than as a pointer to a null character.  In certain contexts, these null
pointers instead of strings are valid.
</P><P>

A vector contains an arbitrary, specified number of pointers to
expressions.  The number of elements in the vector is explicitly present in
the vector.  The written form of a vector consists of square brackets
(<SAMP>`[<small>...</small>]'</SAMP>) surrounding the elements, in sequence and with
whitespace separating them.  Vectors of length zero are not created; null
pointers are used instead.
</P><P>

Expressions are classified by <EM>expression codes</EM> (also called RTX
codes).  The expression code is a name defined in <TT>`rtl.def'</TT>, which is
also (in upper case) a C enumeration constant.  The possible expression
codes and their meanings are machine-independent.  The code of an RTX can
be extracted with the macro <CODE>GET_CODE (<VAR>x</VAR>)</CODE> and altered with
<CODE>PUT_CODE (<VAR>x</VAR>, <VAR>newcode</VAR>)</CODE>.
</P><P>

The expression code determines how many operands the expression contains,
and what kinds of objects they are.  In RTL, unlike Lisp, you cannot tell
by looking at an operand what kind of object it is.  Instead, you must know
from its context--from the expression code of the containing expression.
For example, in an expression of code <CODE>subreg</CODE>, the first operand is
to be regarded as an expression and the second operand as an integer.  In
an expression of code <CODE>plus</CODE>, there are two operands, both of which
are to be regarded as expressions.  In a <CODE>symbol_ref</CODE> expression,
there is one operand, which is to be regarded as a string.
</P><P>

Expressions are written as parentheses containing the name of the
expression type, its flags and machine mode if any, and then the operands
of the expression (separated by spaces).
</P><P>

Expression code names in the <SAMP>`md'</SAMP> file are written in lower case,
but when they appear in C code they are written in upper case.  In this
manual, they are shown as follows: <CODE>const_int</CODE>.
</P><P>

In a few contexts a null pointer is valid where an expression is normally
wanted.  The written form of this is <CODE>(nil)</CODE>.
</P><P>

<A NAME="Accessors"></A>
<HR SIZE="6">
<A NAME="SEC48"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC47"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC49"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.2 Access to Operands </H2>
<!--docid::SEC48::-->
<P>

For each expression type <TT>`rtl.def'</TT> specifies the number of contained
objects and their kinds, with four possibilities: <SAMP>`e'</SAMP> for expression
(actually a pointer to an expression), <SAMP>`i'</SAMP> for integer, <SAMP>`s'</SAMP> for
string, and <SAMP>`E'</SAMP> for vector of expressions.  The sequence of letters
for an expression code is called its <EM>format</EM>.  Thus, the format of
<CODE>subreg</CODE> is <SAMP>`ei'</SAMP>.</P><P>

Two other format characters are used occasionally: <SAMP>`u'</SAMP> and <SAMP>`0'</SAMP>.
<SAMP>`u'</SAMP> is equivalent to <SAMP>`e'</SAMP> except that it is printed differently in
debugging dumps, and <SAMP>`0'</SAMP> means a slot whose contents do not fit any
normal category.  <SAMP>`0'</SAMP> slots are not printed at all in dumps, and are
often used in special ways by small parts of the compiler.</P><P>

There are macros to get the number of operands and the format of an
expression code:
</P><P>

<DL COMPACT>
<DT><CODE>GET_RTX_LENGTH (<VAR>code</VAR>)</CODE>
<DD>Number of operands of an RTX of code <VAR>code</VAR>.
<P>

<DT><CODE>GET_RTX_FORMAT (<VAR>code</VAR>)</CODE>
<DD>The format of an RTX of code <VAR>code</VAR>, as a C string.
</DL>
<P>

Operands of expressions are accessed using the macros <CODE>XEXP</CODE>,
<CODE>XINT</CODE> and <CODE>XSTR</CODE>.  Each of these macros takes two arguments: an
expression-pointer (RTX) and an operand number (counting from zero).
Thus,</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>XEXP (<VAR>x</VAR>, 2)
</pre></td></tr></table></P><P>

accesses operand 2 of expression <VAR>x</VAR>, as an expression.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>XINT (<VAR>x</VAR>, 2)
</pre></td></tr></table></P><P>

accesses the same operand as an integer.  <CODE>XSTR</CODE>, used in the same
fashion, would access it as a string.
</P><P>

Any operand can be accessed as an integer, as an expression or as a string.
You must choose the correct method of access for the kind of value actually
stored in the operand.  You would do this based on the expression code of
the containing expression.  That is also how you would know how many
operands there are.
</P><P>

For example, if <VAR>x</VAR> is a <CODE>subreg</CODE> expression, you know that it has
two operands which can be correctly accessed as <CODE>XEXP (<VAR>x</VAR>, 0)</CODE>
and <CODE>XINT (<VAR>x</VAR>, 1)</CODE>.  If you did <CODE>XINT (<VAR>x</VAR>, 0)</CODE>, you
would get the address of the expression operand but cast as an integer;
that might occasionally be useful, but it would be cleaner to write
<CODE>(int) XEXP (<VAR>x</VAR>, 0)</CODE>.  <CODE>XEXP (<VAR>x</VAR>, 1)</CODE> would also
compile without error, and would return the second, integer operand cast as
an expression pointer, which would probably result in a crash when
accessed.  Nothing stops you from writing <CODE>XEXP (<VAR>x</VAR>, 28)</CODE> either,
but this will access memory past the end of the expression with
unpredictable results.</P><P>

Access to operands which are vectors is more complicated.  You can use the
macro <CODE>XVEC</CODE> to get the vector-pointer itself, or the macros
<CODE>XVECEXP</CODE> and <CODE>XVECLEN</CODE> to access the elements and length of a
vector.
</P><P>

<DL COMPACT>
<DT><CODE>XVEC (<VAR>exp</VAR>, <VAR>idx</VAR>)</CODE>
<DD>Access the vector-pointer which is operand number <VAR>idx</VAR> in <VAR>exp</VAR>.
<P>

<DT><CODE>XVECLEN (<VAR>exp</VAR>, <VAR>idx</VAR>)</CODE>
<DD>Access the length (number of elements) in the vector which is
in operand number <VAR>idx</VAR> in <VAR>exp</VAR>.  This value is an <CODE>int</CODE>.
<P>

<DT><CODE>XVECEXP (<VAR>exp</VAR>, <VAR>idx</VAR>, <VAR>eltnum</VAR>)</CODE>
<DD>Access element number <VAR>eltnum</VAR> in the vector which is
in operand number <VAR>idx</VAR> in <VAR>exp</VAR>.  This value is an RTX.
<P>

It is up to you to make sure that <VAR>eltnum</VAR> is not negative
and is less than <CODE>XVECLEN (<VAR>exp</VAR>, <VAR>idx</VAR>)</CODE>.
</DL>
<P>

All the macros defined in this section expand into lvalues and therefore
can be used to assign the operands, lengths and vector elements as well as
to access them.
</P><P>

<A NAME="Flags"></A>
<HR SIZE="6">
<A NAME="SEC49"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC48"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC50"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.3 Flags in an RTL Expression </H2>
<!--docid::SEC49::-->
<P>

RTL expressions contain several flags (one-bit bit-fields) that are used
in certain types of expression.  Most often they are accessed with the
following macros:
</P><P>

<DL COMPACT>
<DT><CODE>EXTERNAL_SYMBOL_P (<VAR>x</VAR>)</CODE>
<DD>In a <CODE>symbol_ref</CODE> expression, nonzero if it corresponds to a variable
declared extern in the users code.  Zero for all other variables. Stored in
the <CODE>volatil</CODE> field and printed as <SAMP>`/v'</SAMP>.
<P>

<DT><CODE>MEM_VOLATILE_P (<VAR>x</VAR>)</CODE>
<DD>In <CODE>mem</CODE> expressions, nonzero for volatile memory references.
Stored in the <CODE>volatil</CODE> field and printed as <SAMP>`/v'</SAMP>.
<P>

<DT><CODE>MEM_IN_STRUCT_P (<VAR>x</VAR>)</CODE>
<DD>In <CODE>mem</CODE> expressions, nonzero for reference to an entire
structure, union or array, or to a component of one.  Zero for
references to a scalar variable or through a pointer to a scalar.
Stored in the <CODE>in_struct</CODE> field and printed as <SAMP>`/s'</SAMP>.
<P>

<DT><CODE>REG_USER_VAR_P (<VAR>x</VAR>)</CODE>
<DD>In a <CODE>reg</CODE>, nonzero if it corresponds to a variable present in
the user's source code.  Zero for temporaries generated internally by
the compiler.  Stored in the <CODE>volatil</CODE> field and printed as
<SAMP>`/v'</SAMP>.
<P>

<DT><CODE>REG_FUNCTION_VALUE_P (<VAR>x</VAR>)</CODE>
<DD>Nonzero in a <CODE>reg</CODE> if it is the place in which this function's
value is going to be returned.  (This happens only in a hard
register.)  Stored in the <CODE>integrated</CODE> field and printed as
<SAMP>`/i'</SAMP>.
<P>

The same hard register may be used also for collecting the values of
functions called by this one, but <CODE>REG_FUNCTION_VALUE_P</CODE> is zero
in this kind of use.
</P><P>

<DT><CODE>RTX_UNCHANGING_P (<VAR>x</VAR>)</CODE>
<DD>Nonzero in a <CODE>reg</CODE> or <CODE>mem</CODE> if the value is not changed
explicitly by the current function.  (If it is a memory reference then
it may be changed by other functions or by aliasing.)  Stored in the
<CODE>unchanging</CODE> field and printed as <SAMP>`/u'</SAMP>.
<P>

<DT><CODE>RTX_INTEGRATED_P (<VAR>insn</VAR>)</CODE>
<DD>Nonzero in an insn if it resulted from an in-line function call.
Stored in the <CODE>integrated</CODE> field and printed as <SAMP>`/i'</SAMP>.  This
may be deleted; nothing currently depends on it.
<P>

<DT><CODE>INSN_DELETED_P (<VAR>insn</VAR>)</CODE>
<DD>In an insn, nonzero if the insn has been deleted.  Stored in the
<CODE>volatil</CODE> field and printed as <SAMP>`/v'</SAMP>.
<P>

<DT><CODE>CONSTANT_POOL_ADDRESS_P (<VAR>x</VAR>)</CODE>
<DD>Nonzero in a <CODE>symbol_ref</CODE> if it refers to part of the current
function's "constants pool".  These are addresses close to the
beginning of the function, and GNU CC assumes they can be addressed
directly (perhaps with the help of base registers).  Stored in the
<CODE>unchanging</CODE> field and printed as <SAMP>`/u'</SAMP>.
</DL>
<P>

These are the fields which the above macros refer to:
</P><P>

<DL COMPACT>
<DT><CODE>used</CODE>
<DD>This flag is used only momentarily, at the end of RTL generation for a
function, to count the number of times an expression appears in insns.
Expressions that appear more than once are copied, according to the
rules for shared structure (see section <A HREF="gcc.html#SEC63">12.17 Structure Sharing Assumptions</A>).
<P>

<DT><CODE>volatil</CODE>
<DD>This flag is used in <CODE>mem</CODE>,<CODE>symbol_ref</CODE> and <CODE>reg</CODE> expressions
and in insns.  In RTL dump files, it is printed as <SAMP>`/v'</SAMP>.
<P>

In a <CODE>mem</CODE> expression, it is 1 if the memory reference is volatile.
Volatile memory references may not be deleted, reordered or combined.
</P><P>

In a <CODE>reg</CODE> expression, it is 1 if the value is a user-level variable.
0 indicates an internal compiler temporary.
</P><P>

In a <CODE>symbol_ref</CODE> expression, it is 1 if the symbol is declared
<CODE>extern</CODE>.
</P><P>

In an insn, 1 means the insn has been deleted.
</P><P>

<DT><CODE>in_struct</CODE>
<DD>This flag is used in <CODE>mem</CODE> expressions.  It is 1 if the memory
datum referred to is all or part of a structure or array; 0 if it is (or
might be) a scalar variable.  A reference through a C pointer has 0
because the pointer might point to a scalar variable.
<P>

This information allows the compiler to determine something about possible
cases of aliasing.
</P><P>

In an RTL dump, this flag is represented as <SAMP>`/s'</SAMP>.
</P><P>

<DT><CODE>unchanging</CODE>
<DD>This flag is used in <CODE>reg</CODE> and <CODE>mem</CODE> expressions.  1 means
that the value of the expression never changes (at least within the
current function).
<P>

In an RTL dump, this flag is represented as <SAMP>`/u'</SAMP>.
</P><P>

<DT><CODE>integrated</CODE>
<DD>In some kinds of expressions, including insns, this flag means the
rtl was produced by procedure integration.
<P>

In a <CODE>reg</CODE> expression, this flag indicates the register
containing the value to be returned by the current function.  On
machines that pass parameters in registers, the same register number
may be used for parameters as well, but this flag is not set on such
uses.
</DL>
<P>

<A NAME="Machine Modes"></A>
<HR SIZE="6">
<A NAME="SEC50"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC49"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC51"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.4 Machine Modes </H2>
<!--docid::SEC50::-->
<P>

A machine mode describes a size of data object and the representation used
for it.  In the C code, machine modes are represented by an enumeration
type, <CODE>enum machine_mode</CODE>, defined in <TT>`machmode.def'</TT>.  Each RTL
expression has room for a machine mode and so do certain kinds of tree
expressions (declarations and types, to be precise).
</P><P>

In debugging dumps and machine descriptions, the machine mode of an RTL
expression is written after the expression code with a colon to separate
them.  The letters <SAMP>`mode'</SAMP> which appear at the end of each machine mode
name are omitted.  For example, <CODE>(reg:SI 38)</CODE> is a <CODE>reg</CODE>
expression with machine mode <CODE>SImode</CODE>.  If the mode is
<CODE>VOIDmode</CODE>, it is not written at all.
</P><P>

Here is a table of machine modes.
</P><P>

<DL COMPACT>
<DT><CODE>QImode</CODE>
<DD>"Quarter-Integer" mode represents a single byte treated as an integer.
<P>

<DT><CODE>HImode</CODE>
<DD>"Half-Integer" mode represents a two-byte integer.
<P>

<DT><CODE>PSImode</CODE>
<DD>"Partial Single Integer" mode represents an integer which occupies
four bytes but which doesn't really use all four.  On some machines,
this is the right mode to use for pointers.
<P>

<DT><CODE>SImode</CODE>
<DD>"Single Integer" mode represents a four-byte integer.
<P>

<DT><CODE>PDImode</CODE>
<DD>"Partial Double Integer" mode represents an integer which occupies
eight bytes but which doesn't really use all eight.  On some machines,
this is the right mode to use for certain pointers.
<P>

<DT><CODE>DImode</CODE>
<DD>"Double Integer" mode represents an eight-byte integer.
<P>

<DT><CODE>TImode</CODE>
<DD>"Tetra Integer" (?) mode represents a sixteen-byte integer.
<P>

<DT><CODE>SFmode</CODE>
<DD>"Single Floating" mode represents a single-precision (four byte) floating
point number.
<P>

<DT><CODE>DFmode</CODE>
<DD>"Double Floating" mode represents a double-precision (eight byte) floating
point number.
<P>

<DT><CODE>XFmode</CODE>
<DD>"Extended Floating" mode represents a triple-precision (twelve byte)
floating point number.  This mode is used for IEEE extended floating
point.
<P>

<DT><CODE>TFmode</CODE>
<DD>"Tetra Floating" mode represents a quadruple-precision (sixteen byte)
floating point number.
<P>

<DT><CODE>BLKmode</CODE>
<DD>"Block" mode represents values that are aggregates to which none of
the other modes apply.  In RTL, only memory references can have this mode,
and only if they appear in string-move or vector instructions.  On machines
which have no such instructions, <CODE>BLKmode</CODE> will not appear in RTL.
<P>

<DT><CODE>VOIDmode</CODE>
<DD>Void mode means the absence of a mode or an unspecified mode.
For example, RTL expressions of code <CODE>const_int</CODE> have mode
<CODE>VOIDmode</CODE> because they can be taken to have whatever mode the context
requires.  In debugging dumps of RTL, <CODE>VOIDmode</CODE> is expressed by
the absence of any mode.
<P>

<DT><CODE>EPmode</CODE>
<DD>"Entry Pointer" mode is intended to be used for function variables in
Pascal and other block structured languages.  Such values contain
both a function address and a static chain pointer for access to
automatic variables of outer levels.  This mode is only partially
implemented since C does not use it.
<P>

<DT><CODE>CSImode, <small>...</small></CODE>
<DD>"Complex Single Integer" mode stands for a complex number represented
as a pair of <CODE>SImode</CODE> integers.  Any of the integer and floating modes
may have <SAMP>`C'</SAMP> prefixed to its name to obtain a complex number mode.
For example, there are <CODE>CQImode</CODE>, <CODE>CSFmode</CODE>, and <CODE>CDFmode</CODE>.
Since C does not support complex numbers, these machine modes are only
partially implemented.
<P>

<DT><CODE>BImode</CODE>
<DD>This is the machine mode of a bit-field in a structure.  It is used
only in the syntax tree, never in RTL, and in the syntax tree it appears
only in declaration nodes.  In C, it appears only in <CODE>FIELD_DECL</CODE>
nodes for structure fields defined with a bit size.
</DL>
<P>

The machine description defines <CODE>Pmode</CODE> as a C macro which expands
into the machine mode used for addresses.  Normally this is <CODE>SImode</CODE>.
</P><P>

The only modes which a machine description <I>must</I> support are
<CODE>QImode</CODE>, <CODE>SImode</CODE>, <CODE>SFmode</CODE> and <CODE>DFmode</CODE>.  The
compiler will attempt to use <CODE>DImode</CODE> for two-word structures and
unions, but this can be prevented by overriding the definition of
<CODE>MAX_FIXED_MODE_SIZE</CODE>.  Likewise, you can arrange for the C type
<CODE>short int</CODE> to avoid using <CODE>HImode</CODE>.  In the long term it
might be desirable to make the set of available machine modes
machine-dependent and eliminate all assumptions about specific machine
modes or their uses from the machine-independent code of the compiler.
</P><P>

To help begin this process, the machine modes are divided into mode
classes.  These are represented by the enumeration type <CODE>enum
mode_class</CODE> defined in <TT>`rtl.h'</TT>.  The possible mode classes are:
</P><P>

<DL COMPACT>
<DT><CODE>MODE_INT</CODE>
<DD>Integer modes.  By default these are <CODE>QImode</CODE>, <CODE>HImode</CODE>,
<CODE>SImode</CODE>, <CODE>DImode</CODE>, <CODE>TImode</CODE>, and also <CODE>BImode</CODE>.
<P>

<DT><CODE>MODE_FLOAT</CODE>
<DD>Floating-point modes.  By default these are <CODE>QFmode</CODE>,
<CODE>HFmode</CODE>, <CODE>SFmode</CODE>, <CODE>DFmode</CODE> and <CODE>TFmode</CODE>, but the
MC68881 also defines <CODE>XFmode</CODE> to be an 80-bit extended-precision
floating-point mode.
<P>

<DT><CODE>MODE_COMPLEX_INT</CODE>
<DD>Complex integer modes.  By default these are <CODE>CQImode</CODE>,
<CODE>CHImode</CODE>, <CODE>CSImode</CODE>, <CODE>CDImode</CODE> and <CODE>CTImode</CODE>.
<P>

<DT><CODE>MODE_COMPLEX_FLOAT</CODE>
<DD>Complex floating-point modes.  By default these are <CODE>CQFmode</CODE>,
<CODE>CHFmode</CODE>, <CODE>CSFmode</CODE>, <CODE>CDFmode</CODE> and <CODE>CTFmode</CODE>,
<P>

<DT><CODE>MODE_FUNCTION</CODE>
<DD>Algol or Pascal function variables including a static chain.
(These are not currently implemented).
<P>

<DT><CODE>MODE_RANDOM</CODE>
<DD>This is a catchall mode class for modes which don't fit into the above
classes.  Currently <CODE>VOIDmode</CODE>, <CODE>BLKmode</CODE> and <CODE>EPmode</CODE>
are in <CODE>MODE_RANDOM</CODE>.
</DL>
<P>

Here are some C macros that relate to machine modes:
</P><P>

<DL COMPACT>
<DT><CODE>GET_MODE (<VAR>x</VAR>)</CODE>
<DD>Returns the machine mode of the RTX <VAR>x</VAR>.
<P>

<DT><CODE>PUT_MODE (<VAR>x</VAR>, <VAR>newmode</VAR>)</CODE>
<DD>Alters the machine mode of the RTX <VAR>x</VAR> to be <VAR>newmode</VAR>.
<P>

<DT><CODE>NUM_MACHINE_MODES</CODE>
<DD>Stands for the number of machine modes available on the target
machine.  This is one greater than the largest numeric value of any
machine mode.
<P>

<DT><CODE>GET_MODE_NAME (<VAR>m</VAR>)</CODE>
<DD>Returns the name of mode <VAR>m</VAR> as a string.
<P>

<DT><CODE>GET_MODE_CLASS (<VAR>m</VAR>)</CODE>
<DD>Returns the mode class of mode <VAR>m</VAR>.
<P>

<DT><CODE>GET_MODE_SIZE (<VAR>m</VAR>)</CODE>
<DD>Returns the size in bytes of a datum of mode <VAR>m</VAR>.
<P>

<DT><CODE>GET_MODE_BITSIZE (<VAR>m</VAR>)</CODE>
<DD>Returns the size in bits of a datum of mode <VAR>m</VAR>.
<P>

<DT><CODE>GET_MODE_UNIT_SIZE (<VAR>m</VAR>)</CODE>
<DD>Returns the size in bits of the subunits of a datum of mode <VAR>m</VAR>.
This is the same as <CODE>GET_MODE_SIZE</CODE> except in the case of
complex modes and <CODE>EPmode</CODE>.  For them, the unit size is the
size of the real or imaginary part, or the size of the function
pointer or the context pointer.
</DL>
<P>

<A NAME="Constants"></A>
<HR SIZE="6">
<A NAME="SEC51"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC50"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC52"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.5 Constant Expression Types </H2>
<!--docid::SEC51::-->
<P>

The simplest RTL expressions are those that represent constant values.
</P><P>

<DL COMPACT>
<DT><CODE>(const_int <VAR>i</VAR>)</CODE>
<DD>This type of expression represents the integer value <VAR>i</VAR>.  <VAR>i</VAR>
is customarily accessed with the macro <CODE>INTVAL</CODE> as in
<CODE>INTVAL (<VAR>exp</VAR>)</CODE>, which is equivalent to <CODE>XINT (<VAR>exp</VAR>, 0)</CODE>.
<P>

There is only one expression object for the integer value zero;
it is the value of the variable <CODE>const0_rtx</CODE>.  Likewise, the
only expression for integer value one is found in <CODE>const1_rtx</CODE>.
Any attempt to create an expression of code <CODE>const_int</CODE> and
value zero or one will return <CODE>const0_rtx</CODE> or <CODE>const1_rtx</CODE>
as appropriate.
</P><P>

<DT><CODE>(const_double:<VAR>m</VAR> <VAR>i0</VAR> <VAR>i1</VAR>)</CODE>
<DD>Represents a 64-bit constant of mode <VAR>m</VAR>.  All floating point
constants are represented in this way, and so are 64-bit <CODE>DImode</CODE>
integer constants.
<P>

The two integers <VAR>i0</VAR> and <VAR>i1</VAR> together contain the bits of
the value.  If the constant is floating point (either single or double
precision), then they represent a <CODE>double</CODE>.  To convert them to a
<CODE>double</CODE>, do
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>union { double d; int i[2];} u;
u.i[0] = CONST_DOUBLE_LOW(x);
u.i[1] = CONST_DOUBLE_HIGH(x);
</pre></td></tr></table></P><P>

and then refer to <CODE>u.d</CODE>.
</P><P>

The global variables <CODE>dconst0_rtx</CODE> and <CODE>fconst0_rtx</CODE> hold
<CODE>const_double</CODE> expressions with value 0, in modes <CODE>DFmode</CODE>
and <CODE>SFmode</CODE>, respectively.  The macro <CODE>CONST0_RTX
(<VAR>mode</VAR>)</CODE> refers to a <CODE>const_double</CODE> expression with value 0
in mode <VAR>mode</VAR>.  The mode <VAR>mode</VAR> must be of mode class
<CODE>MODE_FLOAT</CODE>.
</P><P>

<DT><CODE>(symbol_ref <VAR>symbol</VAR>)</CODE>
<DD>Represents the value of an assembler label for data.  <VAR>symbol</VAR> is
a string that describes the name of the assembler label.  If it starts
with a <SAMP>`*'</SAMP>, the label is the rest of <VAR>symbol</VAR> not including
the <SAMP>`*'</SAMP>.  Otherwise, the label is <VAR>symbol</VAR>, prefixed with
<SAMP>`_'</SAMP>.
<P>

<DT><CODE>(label_ref <VAR>label</VAR>)</CODE>
<DD>Represents the value of an assembler label for code.  It contains one
operand, an expression, which must be a <CODE>code_label</CODE> that appears
in the instruction sequence to identify the place where the label
should go.
<P>

The reason for using a distinct expression type for code label
references is so that jump optimization can distinguish them.
</P><P>

<DT><CODE>(const <VAR>exp</VAR>)</CODE>
<DD>Represents a constant that is the result of an assembly-time
arithmetic computation.  The operand, <VAR>exp</VAR>, is an expression that
contains only constants (<CODE>const_int</CODE>, <CODE>symbol_ref</CODE> and
<CODE>label_ref</CODE> expressions) combined with <CODE>plus</CODE> and
<CODE>minus</CODE>.  However, not all combinations are valid, since the
assembler cannot do arbitrary arithmetic on relocatable symbols.
</DL>
<P>

<A NAME="Regs and Memory"></A>
<HR SIZE="6">
<A NAME="SEC52"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC51"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC53"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.6 Registers and Memory </H2>
<!--docid::SEC52::-->
<P>

Here are the RTL expression types for describing access to machine
registers and to main memory.
</P><P>

<DL COMPACT>
<DT><CODE>(reg:<VAR>m</VAR> <VAR>n</VAR>)</CODE>
<DD>For small values of the integer <VAR>n</VAR> (less than
<CODE>FIRST_PSEUDO_REGISTER</CODE>), this stands for a reference to machine
register number <VAR>n</VAR>: a <EM>hard register</EM>.  For larger values of
<VAR>n</VAR>, it stands for a temporary value or <EM>pseudo register</EM>.
The compiler's strategy is to generate code assuming an unlimited
number of such pseudo registers, and later convert them into hard
registers or into memory references.
<P>

The symbol <CODE>FIRST_PSEUDO_REGISTER</CODE> is defined by the machine
description, since the number of hard registers on the machine is an
invariant characteristic of the machine.  Note, however, that not
all of the machine registers must be general registers.  All the
machine registers that can be used for storage of data are given
hard register numbers, even those that can be used only in certain
instructions or can hold only certain types of data.
</P><P>

Each pseudo register number used in a function's RTL code is
represented by a unique <CODE>reg</CODE> expression.
</P><P>

<VAR>m</VAR> is the machine mode of the reference.  It is necessary because
machines can generally refer to each register in more than one mode.
For example, a register may contain a full word but there may be
instructions to refer to it as a half word or as a single byte, as
well as instructions to refer to it as a floating point number of
various precisions.
</P><P>

Even for a register that the machine can access in only one mode,
the mode must always be specified.
</P><P>

A hard register may be accessed in various modes throughout one
function, but each pseudo register is given a natural mode
and is accessed only in that mode.  When it is necessary to describe
an access to a pseudo register using a nonnatural mode, a <CODE>subreg</CODE>
expression is used.
</P><P>

A <CODE>reg</CODE> expression with a machine mode that specifies more than
one word of data may actually stand for several consecutive registers.
If in addition the register number specifies a hardware register, then
it actually represents several consecutive hardware registers starting
with the specified one.
</P><P>

Such multi-word hardware register <CODE>reg</CODE> expressions must not be live
across the boundary of a basic block.  The lifetime analysis pass does not
know how to record properly that several consecutive registers are
actually live there, and therefore register allocation would be confused.
The CSE pass must go out of its way to make sure the situation does
not arise.
</P><P>

<DT><CODE>(subreg:<VAR>m</VAR> <VAR>reg</VAR> <VAR>wordnum</VAR>)</CODE>
<DD><CODE>subreg</CODE> expressions are used to refer to a register in a machine
mode other than its natural one, or to refer to one register of
a multi-word <CODE>reg</CODE> that actually refers to several registers.
<P>

Each pseudo-register has a natural mode.  If it is necessary to
operate on it in a different mode--for example, to perform a fullword
move instruction on a pseudo-register that contains a single
byte--the pseudo-register must be enclosed in a <CODE>subreg</CODE>.  In
such a case, <VAR>wordnum</VAR> is zero.
</P><P>

The other use of <CODE>subreg</CODE> is to extract the individual registers
of a multi-register value.  Machine modes such as <CODE>DImode</CODE> and
<CODE>EPmode</CODE> indicate values longer than a word, values which usually
require two consecutive registers.  To access one of the registers,
use a <CODE>subreg</CODE> with mode <CODE>SImode</CODE> and a <VAR>wordnum</VAR> that
says which register.
</P><P>

The compilation parameter <CODE>WORDS_BIG_ENDIAN</CODE>, if defined, says
that word number zero is the most significant part; otherwise, it is
the least significant part.
</P><P>

Between the combiner pass and the reload pass, it is possible to have
a <CODE>subreg</CODE> which contains a <CODE>mem</CODE> instead of a <CODE>reg</CODE> as
its first operand.  The reload pass eliminates these cases by
reloading the <CODE>mem</CODE> into a suitable register.
</P><P>

Note that it is not valid to access a <CODE>DFmode</CODE> value in <CODE>SFmode</CODE>
using a <CODE>subreg</CODE>.  On some machines the most significant part of a
<CODE>DFmode</CODE> value does not have the same format as a single-precision
floating value.
</P><P>

<DT><CODE>(cc0)</CODE>
<DD>This refers to the machine's condition code register.  It has no
operands and may not have a machine mode.  There are two ways to use it:
<P>

<UL>
<LI>
To stand for a complete set of condition code flags.  This is best on
most machines, where each comparison sets the entire series of flags.
<P>

With this technique, <CODE>(cc0)</CODE> may be validly used in only two
contexts: as the destination of an assignment (in test and compare
instructions) and in comparison operators comparing against zero
(<CODE>const_int</CODE> with value zero; that is to say, <CODE>const0_rtx</CODE>).
</P><P>

<LI>
To stand for a single flag that is the result of a single condition.
This is useful on machines that have only a single flag bit, and in
which comparison instructions must specify the condition to test.
<P>

With this technique, <CODE>(cc0)</CODE> may be validly used in only two
contexts: as the destination of an assignment (in test and compare
instructions) where the source is a comparison operator, and as the
first operand of <CODE>if_then_else</CODE> (in a conditional branch).
</UL>
<P>

There is only one expression object of code <CODE>cc0</CODE>; it is the
value of the variable <CODE>cc0_rtx</CODE>.  Any attempt to create an
expression of code <CODE>cc0</CODE> will return <CODE>cc0_rtx</CODE>.
</P><P>

One special thing about the condition code register is that
instructions can set it implicitly.  On many machines, nearly all
instructions set the condition code based on the value that they
compute or store.  It is not necessary to record these actions
explicitly in the RTL because the machine description includes a
prescription for recognizing the instructions that do so (by means of
the macro <CODE>NOTICE_UPDATE_CC</CODE>).  Only instructions whose sole
purpose is to set the condition code, and instructions that use the
condition code, need mention <CODE>(cc0)</CODE>.
</P><P>

In some cases, better code may result from recognizing combinations or
peepholes that include instructions that set the condition codes, even
in cases where some reloading is inevitable.  For examples, search for
<SAMP>`addcc'</SAMP> and <SAMP>`andcc'</SAMP> in <TT>`sparc.md'</TT>.
</P><P>

<DT><CODE>(pc)</CODE>
<DD>This represents the machine's program counter.  It has no operands and
may not have a machine mode.  <CODE>(pc)</CODE> may be validly used only in
certain specific contexts in jump instructions.
<P>

There is only one expression object of code <CODE>pc</CODE>; it is the value
of the variable <CODE>pc_rtx</CODE>.  Any attempt to create an expression of
code <CODE>pc</CODE> will return <CODE>pc_rtx</CODE>.
</P><P>

All instructions that do not jump alter the program counter implicitly
by incrementing it, but there is no need to mention this in the RTL.
</P><P>

<DT><CODE>(mem:<VAR>m</VAR> <VAR>addr</VAR>)</CODE>
<DD>This RTX represents a reference to main memory at an address
represented by the expression <VAR>addr</VAR>.  <VAR>m</VAR> specifies how large
a unit of memory is accessed.
</DL>
<P>

<A NAME="Arithmetic"></A>
<HR SIZE="6">
<A NAME="SEC53"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC52"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC54"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.7 RTL Expressions for Arithmetic </H2>
<!--docid::SEC53::-->
<P>

<DL COMPACT>
<DT><CODE>(plus:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Represents the sum of the values represented by <VAR>x</VAR> and <VAR>y</VAR>
carried out in machine mode <VAR>m</VAR>.  This is valid only if
<VAR>x</VAR> and <VAR>y</VAR> both are valid for mode <VAR>m</VAR>.
<P>

<DT><CODE>(minus:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>plus</CODE> but represents subtraction.
<P>

<DT><CODE>(compare <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Represents the result of subtracting <VAR>y</VAR> from <VAR>x</VAR>
for purposes of comparison.  The absence of a machine mode
in the <CODE>compare</CODE> expression indicates that the result is
computed without overflow, as if with infinite precision.
<P>

Of course, machines can't really subtract with infinite precision.
However, they can pretend to do so when only the sign of the
result will be used, which is the case when the result is stored
in <CODE>(cc0)</CODE>.  And that is the only way this kind of expression
may validly be used: as a value to be stored in the condition codes.
</P><P>

<DT><CODE>(neg:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the negation (subtraction from zero) of the value
represented by <VAR>x</VAR>, carried out in mode <VAR>m</VAR>.  <VAR>x</VAR> must be
valid for mode <VAR>m</VAR>.
<P>

<DT><CODE>(mult:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Represents the signed product of the values represented by <VAR>x</VAR> and
<VAR>y</VAR> carried out in machine mode <VAR>m</VAR>.  If
<VAR>x</VAR> and <VAR>y</VAR> are both valid for mode <VAR>m</VAR>, this is ordinary
size-preserving multiplication.  Alternatively, both <VAR>x</VAR> and <VAR>y</VAR>
may be valid for a different, narrower mode.  This represents the
kind of multiplication that generates a product wider than the operands.
Widening multiplication and same-size multiplication are completely
distinct and supported by different machine instructions; machines may
support one but not the other.<P>

<CODE>mult</CODE> may be used for floating point multiplication as well.
Then <VAR>m</VAR> is a floating point machine mode.
</P><P>

<DT><CODE>(umult:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>mult</CODE> but represents unsigned multiplication.  It may be
used in both same-size and widening forms, like <CODE>mult</CODE>.
<CODE>umult</CODE> is used only for fixed-point multiplication.
<P>

<DT><CODE>(div:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Represents the quotient in signed division of <VAR>x</VAR> by <VAR>y</VAR>,
carried out in machine mode <VAR>m</VAR>.  If <VAR>m</VAR> is a floating-point
mode, it represents the exact quotient; otherwise, the integerized
quotient.  If <VAR>x</VAR> and <VAR>y</VAR> are both valid for mode <VAR>m</VAR>,
this is ordinary size-preserving division.  Some machines have
division instructions in which the operands and quotient widths are
not all the same; such instructions are represented by <CODE>div</CODE>
expressions in which the machine modes are not all the same.
<P>

<DT><CODE>(udiv:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>div</CODE> but represents unsigned division.
<P>

<DT><CODE>(mod:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD><DT><CODE>(umod:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>div</CODE> and <CODE>udiv</CODE> but represent the remainder instead of
the quotient.
<P>

<DT><CODE>(not:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the bitwise complement of the value represented by <VAR>x</VAR>,
carried out in mode <VAR>m</VAR>, which must be a fixed-point machine mode.
<VAR>x</VAR> must be valid for mode <VAR>m</VAR>, which must be a fixed-point mode.
<P>

<DT><CODE>(and:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Represents the bitwise logical-and of the values represented by
<VAR>x</VAR> and <VAR>y</VAR>, carried out in machine mode <VAR>m</VAR>.  This is
valid only if <VAR>x</VAR> and <VAR>y</VAR> both are valid for mode <VAR>m</VAR>,
which must be a fixed-point mode.
<P>

<DT><CODE>(ior:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Represents the bitwise inclusive-or of the values represented by
<VAR>x</VAR> and <VAR>y</VAR>, carried out in machine mode <VAR>m</VAR>.  This is
valid only if <VAR>x</VAR> and <VAR>y</VAR> both are valid for mode <VAR>m</VAR>,
which must be a fixed-point mode.
<P>

<DT><CODE>(xor:<VAR>m</VAR> <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Represents the bitwise exclusive-or of the values represented by
<VAR>x</VAR> and <VAR>y</VAR>, carried out in machine mode <VAR>m</VAR>.  This is
valid only if <VAR>x</VAR> and <VAR>y</VAR> both are valid for mode <VAR>m</VAR>,
which must be a fixed-point mode.
<P>

<DT><CODE>(lshift:<VAR>m</VAR> <VAR>x</VAR> <VAR>c</VAR>)</CODE>
<DD>Represents the result of logically shifting <VAR>x</VAR> left by <VAR>c</VAR>
places.  <VAR>x</VAR> must be valid for the mode <VAR>m</VAR>, a fixed-point
machine mode.  <VAR>c</VAR> must be valid for a fixed-point mode;
which mode is determined by the mode called for in the machine
description entry for the left-shift instruction.  For example,
on the Vax, the mode of <VAR>c</VAR> is <CODE>QImode</CODE> regardless of <VAR>m</VAR>.
<P>

On some machines, negative values of <VAR>c</VAR> may be meaningful; this
is why logical left shift and arithmetic left shift are distinguished.
For example, Vaxes have no right-shift instructions, and right shifts
are represented as left-shift instructions whose counts happen
to be negative constants or else computed (in a previous instruction)
by negation.
</P><P>

<DT><CODE>(ashift:<VAR>m</VAR> <VAR>x</VAR> <VAR>c</VAR>)</CODE>
<DD>Like <CODE>lshift</CODE> but for arithmetic left shift.
<P>

<DT><CODE>(lshiftrt:<VAR>m</VAR> <VAR>x</VAR> <VAR>c</VAR>)</CODE>
<DD><DT><CODE>(ashiftrt:<VAR>m</VAR> <VAR>x</VAR> <VAR>c</VAR>)</CODE>
<DD>Like <CODE>lshift</CODE> and <CODE>ashift</CODE> but for right shift.
<P>

<DT><CODE>(rotate:<VAR>m</VAR> <VAR>x</VAR> <VAR>c</VAR>)</CODE>
<DD><DT><CODE>(rotatert:<VAR>m</VAR> <VAR>x</VAR> <VAR>c</VAR>)</CODE>
<DD>Similar but represent left and right rotate.
<P>

<DT><CODE>(abs:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the absolute value of <VAR>x</VAR>, computed in mode <VAR>m</VAR>.
<VAR>x</VAR> must be valid for <VAR>m</VAR>.
<P>

<DT><CODE>(sqrt:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the square root of <VAR>x</VAR>, computed in mode <VAR>m</VAR>.
<VAR>x</VAR> must be valid for <VAR>m</VAR>.  Most often <VAR>m</VAR> will be
a floating point mode.
<P>

<DT><CODE>(ffs:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents one plus the index of the least significant 1-bit in
<VAR>x</VAR>, represented as an integer of mode <VAR>m</VAR>.  (The value is
zero if <VAR>x</VAR> is zero.)  The mode of <VAR>x</VAR> need not be <VAR>m</VAR>;
depending on the target machine, various mode combinations may be
valid.
</DL>
<P>

<A NAME="Comparisons"></A>
<HR SIZE="6">
<A NAME="SEC54"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC53"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC55"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.8 Comparison Operations </H2>
<!--docid::SEC54::-->
<P>

Comparison operators test a relation on two operands and are considered
to represent a machine-dependent nonzero value (<CODE>STORE_FLAG_VALUE</CODE>)
if the relation holds, or zero if it does not.  The mode of the
comparison is determined by the operands; they must both be valid for a
common machine mode.  A comparison with both operands constant would be
invalid as the machine mode could not be deduced from it, but such a
comparison should never exist in RTL due to constant folding.
</P><P>

Inequality comparisons come in two flavors, signed and unsigned.  Thus,
there are distinct expression codes <CODE>gt</CODE> and <CODE>gtu</CODE> for signed and
unsigned greater-than.  These can produce different results for the same
pair of integer values: for example, 1 is signed greater-than -1 but not
unsigned greater-than, because -1 when regarded as unsigned is actually
<CODE>0xffffffff</CODE> which is greater than 1.
</P><P>

The signed comparisons are also used for floating point values.  Floating
point comparisons are distinguished by the machine modes of the operands.
</P><P>

The comparison operators may be used to compare the condition codes
<CODE>(cc0)</CODE> against zero, as in <CODE>(eq (cc0) (const_int 0))</CODE>.  Such a
construct actually refers to the result of the preceding instruction in
which the condition codes were set.  The above example stands for 1 if the
condition codes were set to say "zero" or "equal", 0 otherwise.
Although the same comparison operators are used for this as may be used in
other contexts on actual data, no confusion can result since the machine
description would never allow both kinds of uses in the same context.
</P><P>

<DL COMPACT>
<DT><CODE>(eq <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>1 if the values represented by <VAR>x</VAR> and <VAR>y</VAR> are equal,
otherwise 0.
<P>

<DT><CODE>(ne <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>1 if the values represented by <VAR>x</VAR> and <VAR>y</VAR> are not equal,
otherwise 0.
<P>

<DT><CODE>(gt <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>1 if the <VAR>x</VAR> is greater than <VAR>y</VAR>.  If they are fixed-point,
the comparison is done in a signed sense.
<P>

<DT><CODE>(gtu <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>gt</CODE> but does unsigned comparison, on fixed-point numbers only.
<P>

<DT><CODE>(lt <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD><DT><CODE>(ltu <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>gt</CODE> and <CODE>gtu</CODE> but test for "less than".
<P>

<DT><CODE>(ge <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD><DT><CODE>(geu <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>gt</CODE> and <CODE>gtu</CODE> but test for "greater than or equal".
<P>

<DT><CODE>(le <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD><DT><CODE>(leu <VAR>x</VAR> <VAR>y</VAR>)</CODE>
<DD>Like <CODE>gt</CODE> and <CODE>gtu</CODE> but test for "less than or equal".
<P>

<DT><CODE>(if_then_else <VAR>cond</VAR> <VAR>then</VAR> <VAR>else</VAR>)</CODE>
<DD>This is not a comparison operation but is listed here because it is
always used in conjunction with a comparison operation.  To be
precise, <VAR>cond</VAR> is a comparison expression.  This expression
represents a choice, according to <VAR>cond</VAR>, between the value
represented by <VAR>then</VAR> and the one represented by <VAR>else</VAR>.
<P>

On most machines, <CODE>if_then_else</CODE> expressions are valid only
to express conditional jumps.
</DL>
<P>

<A NAME="Bit Fields"></A>
<HR SIZE="6">
<A NAME="SEC55"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC54"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC56"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.9 Bit-fields </H2>
<!--docid::SEC55::-->
<P>

Special expression codes exist to represent bit-field instructions.
These types of expressions are lvalues in RTL; they may appear
on the left side of an assignment, indicating insertion of a value
into the specified bit field.
</P><P>

<DL COMPACT>
<DT><CODE>(sign_extract:SI <VAR>loc</VAR> <VAR>size</VAR> <VAR>pos</VAR>)</CODE>
<DD>This represents a reference to a sign-extended bit-field contained or
starting in <VAR>loc</VAR> (a memory or register reference).  The bit field
is <VAR>size</VAR> bits wide and starts at bit <VAR>pos</VAR>.  The compilation
option <CODE>BITS_BIG_ENDIAN</CODE> says which end of the memory unit
<VAR>pos</VAR> counts from.
<P>

Which machine modes are valid for <VAR>loc</VAR> depends on the machine,
but typically <VAR>loc</VAR> should be a single byte when in memory
or a full word in a register.
</P><P>

<DT><CODE>(zero_extract:SI <VAR>loc</VAR> <VAR>size</VAR> <VAR>pos</VAR>)</CODE>
<DD>Like <CODE>sign_extract</CODE> but refers to an unsigned or zero-extended
bit field.  The same sequence of bits are extracted, but they
are filled to an entire word with zeros instead of by sign-extension.
</DL>
<P>

<A NAME="Conversions"></A>
<HR SIZE="6">
<A NAME="SEC56"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC55"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC57"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.10 Conversions </H2>
<!--docid::SEC56::-->
<P>

All conversions between machine modes must be represented by
explicit conversion operations.  For example, an expression
which is the sum of a byte and a full word cannot be written as
<CODE>(plus:SI (reg:QI 34) (reg:SI 80))</CODE> because the <CODE>plus</CODE>
operation requires two operands of the same machine mode.
Therefore, the byte-sized operand is enclosed in a conversion
operation, as in
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(plus:SI (sign_extend:SI (reg:QI 34)) (reg:SI 80))
</pre></td></tr></table></P><P>

The conversion operation is not a mere placeholder, because there
may be more than one way of converting from a given starting mode
to the desired final mode.  The conversion operation code says how
to do it.
</P><P>

<DL COMPACT>
<DT><CODE>(sign_extend:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of sign-extending the value <VAR>x</VAR>
to machine mode <VAR>m</VAR>.  <VAR>m</VAR> must be a fixed-point mode
and <VAR>x</VAR> a fixed-point value of a mode narrower than <VAR>m</VAR>.
<P>

<DT><CODE>(zero_extend:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of zero-extending the value <VAR>x</VAR>
to machine mode <VAR>m</VAR>.  <VAR>m</VAR> must be a fixed-point mode
and <VAR>x</VAR> a fixed-point value of a mode narrower than <VAR>m</VAR>.
<P>

<DT><CODE>(float_extend:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of extending the value <VAR>x</VAR>
to machine mode <VAR>m</VAR>.  <VAR>m</VAR> must be a floating point mode
and <VAR>x</VAR> a floating point value of a mode narrower than <VAR>m</VAR>.
<P>

<DT><CODE>(truncate:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of truncating the value <VAR>x</VAR>
to machine mode <VAR>m</VAR>.  <VAR>m</VAR> must be a fixed-point mode
and <VAR>x</VAR> a fixed-point value of a mode wider than <VAR>m</VAR>.
<P>

<DT><CODE>(float_truncate:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of truncating the value <VAR>x</VAR>
to machine mode <VAR>m</VAR>.  <VAR>m</VAR> must be a floating point mode
and <VAR>x</VAR> a floating point value of a mode wider than <VAR>m</VAR>.
<P>

<DT><CODE>(float:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of converting fixed point value <VAR>x</VAR>,
regarded as signed, to floating point mode <VAR>m</VAR>.
<P>

<DT><CODE>(unsigned_float:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of converting fixed point value <VAR>x</VAR>,
regarded as unsigned, to floating point mode <VAR>m</VAR>.
<P>

<DT><CODE>(fix:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>When <VAR>m</VAR> is a fixed point mode, represents the result of
converting floating point value <VAR>x</VAR> to mode <VAR>m</VAR>, regarded as
signed.  How rounding is done is not specified, so this operation may
be used validly in compiling C code only for integer-valued operands.
<P>

<DT><CODE>(unsigned_fix:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the result of converting floating point value <VAR>x</VAR> to
fixed point mode <VAR>m</VAR>, regarded as unsigned.  How rounding is done
is not specified.
<P>

<DT><CODE>(fix:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>When <VAR>m</VAR> is a floating point mode, represents the result of
converting floating point value <VAR>x</VAR> (valid for mode <VAR>m</VAR>) to an
integer, still represented in floating point mode <VAR>m</VAR>, by rounding
towards zero.
</DL>
<P>

<A NAME="RTL Declarations"></A>
<HR SIZE="6">
<A NAME="SEC57"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC56"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC58"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.11 Declarations </H2>
<!--docid::SEC57::-->
<P>

Declaration expression codes do not represent arithmetic operations
but rather state assertions about their operands.
</P><P>

<DL COMPACT>
<DT><CODE>(strict_low_part (subreg:<VAR>m</VAR> (reg:<VAR>n</VAR> <VAR>r</VAR>) 0))</CODE>
<DD>This expression code is used in only one context: operand 0 of a
<CODE>set</CODE> expression.  In addition, the operand of this expression
must be a <CODE>subreg</CODE> expression.
<P>

The presence of <CODE>strict_low_part</CODE> says that the part of the
register which is meaningful in mode <VAR>n</VAR>, but is not part of
mode <VAR>m</VAR>, is not to be altered.  Normally, an assignment to such
a subreg is allowed to have undefined effects on the rest of the
register when <VAR>m</VAR> is less than a word.
</DL>
<P>

<A NAME="Side Effects"></A>
<HR SIZE="6">
<A NAME="SEC58"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC57"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC59"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.12 Side Effect Expressions </H2>
<!--docid::SEC58::-->
<P>

The expression codes described so far represent values, not actions.
But machine instructions never produce values; they are meaningful
only for their side effects on the state of the machine.  Special
expression codes are used to represent side effects.
</P><P>

The body of an instruction is always one of these side effect codes;
the codes described above, which represent values, appear only as
the operands of these.
</P><P>

<DL COMPACT>
<DT><CODE>(set <VAR>lval</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the action of storing the value of <VAR>x</VAR> into the place
represented by <VAR>lval</VAR>.  <VAR>lval</VAR> must be an expression
representing a place that can be stored in: <CODE>reg</CODE> (or
<CODE>subreg</CODE> or <CODE>strict_low_part</CODE>), <CODE>mem</CODE>, <CODE>pc</CODE> or
<CODE>cc0</CODE>.<P>

If <VAR>lval</VAR> is a <CODE>reg</CODE>, <CODE>subreg</CODE> or <CODE>mem</CODE>, it has a
machine mode; then <VAR>x</VAR> must be valid for that mode.</P><P>

If <VAR>lval</VAR> is a <CODE>reg</CODE> whose machine mode is less than the full
width of the register, then it means that the part of the register
specified by the machine mode is given the specified value and the
rest of the register receives an undefined value.  Likewise, if
<VAR>lval</VAR> is a <CODE>subreg</CODE> whose machine mode is narrower than
<CODE>SImode</CODE>, the rest of the register can be changed in an undefined way.
</P><P>

If <VAR>lval</VAR> is a <CODE>strict_low_part</CODE> of a <CODE>subreg</CODE>, then the
part of the register specified by the machine mode of the
<CODE>subreg</CODE> is given the value <VAR>x</VAR> and the rest of the register
is not changed.</P><P>

If <VAR>lval</VAR> is <CODE>(cc0)</CODE>, it has no machine mode, and <VAR>x</VAR> may
have any mode.  This represents a "test" or "compare" instruction.</P><P>

If <VAR>lval</VAR> is <CODE>(pc)</CODE>, we have a jump instruction, and the
possibilities for <VAR>x</VAR> are very limited.  It may be a
<CODE>label_ref</CODE> expression (unconditional jump).  It may be an
<CODE>if_then_else</CODE> (conditional jump), in which case either the
second or the third operand must be <CODE>(pc)</CODE> (for the case which
does not jump) and the other of the two must be a <CODE>label_ref</CODE>
(for the case which does jump).  <VAR>x</VAR> may also be a <CODE>mem</CODE> or
<CODE>(plus:SI (pc) <VAR>y</VAR>)</CODE>, where <VAR>y</VAR> may be a <CODE>reg</CODE> or a
<CODE>mem</CODE>; these unusual patterns are used to represent jumps through
branch tables.</P><P>

<DT><CODE>(return)</CODE>
<DD>Represents a return from the current function, on machines where this
can be done with one instruction, such as Vaxes.  On machines where a
multi-instruction "epilogue" must be executed in order to return
from the function, returning is done by jumping to a label which
precedes the epilogue, and the <CODE>return</CODE> expression code is never
used.
<P>

<DT><CODE>(call <VAR>function</VAR> <VAR>nargs</VAR>)</CODE>
<DD>Represents a function call.  <VAR>function</VAR> is a <CODE>mem</CODE> expression
whose address is the address of the function to be called.
<VAR>nargs</VAR> is an expression which can be used for two purposes: on
some machines it represents the number of bytes of stack argument; on
others, it represents the number of argument registers.
<P>

Each machine has a standard machine mode which <VAR>function</VAR> must
have.  The machine description defines macro <CODE>FUNCTION_MODE</CODE> to
expand into the requisite mode name.  The purpose of this mode is to
specify what kind of addressing is allowed, on machines where the
allowed kinds of addressing depend on the machine mode being
addressed.
</P><P>

<DT><CODE>(clobber <VAR>x</VAR>)</CODE>
<DD>Represents the storing or possible storing of an unpredictable,
undescribed value into <VAR>x</VAR>, which must be a <CODE>reg</CODE> or
<CODE>mem</CODE> expression.
<P>

One place this is used is in string instructions that store standard
values into particular hard registers.  It may not be worth the
trouble to describe the values that are stored, but it is essential to
inform the compiler that the registers will be altered, lest it
attempt to keep data in them across the string instruction.
</P><P>

<VAR>x</VAR> may also be null--a null C pointer, no expression at all.
Such a <CODE>(clobber (null))</CODE> expression means that all memory
locations must be presumed clobbered.
</P><P>

Note that the machine description classifies certain hard registers as
"call-clobbered".  All function call instructions are assumed by
default to clobber these registers, so there is no need to use
<CODE>clobber</CODE> expressions to indicate this fact.  Also, each function
call is assumed to have the potential to alter any memory location,
unless the function is declared <CODE>const</CODE>.
</P><P>

When a <CODE>clobber</CODE> expression for a register appears inside a
<CODE>parallel</CODE> with other side effects, GNU CC guarantees that the
register is unoccupied both before and after that insn.  Therefore, it
is safe for the assembler code produced by the insn to use the
register as a temporary.  You can clobber either a specific hard
register or a pseudo register; in the latter case, GNU CC will
allocate a hard register that is available there for use as a
temporary.
</P><P>

If you clobber a pseudo register in this way, use a pseudo register
which appears nowhere else--generate a new one each time.  Otherwise,
you may confuse CSE.
</P><P>

There is one other known use for clobbering a pseudo register in a
<CODE>parallel</CODE>: when one of the input operands of the insn is also
clobbered by the insn.  In this case, using the same pseudo register in
the clobber and elsewhere in the insn produces the expected results.
</P><P>

<DT><CODE>(use <VAR>x</VAR>)</CODE>
<DD>Represents the use of the value of <VAR>x</VAR>.  It indicates that the
value in <VAR>x</VAR> at this point in the program is needed, even though
it may not be apparent why this is so.  Therefore, the compiler will
not attempt to delete previous instructions whose only effect is to
store a value in <VAR>x</VAR>.  <VAR>x</VAR> must be a <CODE>reg</CODE> expression.
<P>

<DT><CODE>(parallel [<VAR>x0</VAR> <VAR>x1</VAR> <small>...</small>])</CODE>
<DD>Represents several side effects performed in parallel.  The square
brackets stand for a vector; the operand of <CODE>parallel</CODE> is a
vector of expressions.  <VAR>x0</VAR>, <VAR>x1</VAR> and so on are individual
side effect expressions--expressions of code <CODE>set</CODE>, <CODE>call</CODE>,
<CODE>return</CODE>, <CODE>clobber</CODE> or <CODE>use</CODE>.<P>

"In parallel" means that first all the values used in the individual
side-effects are computed, and second all the actual side-effects are
performed.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(parallel [(set (reg:SI 1) (mem:SI (reg:SI 1)))
           (set (mem:SI (reg:SI 1)) (reg:SI 1))])
</pre></td></tr></table></P><P>

says unambiguously that the values of hard register 1 and the memory
location addressed by it are interchanged.  In both places where
<CODE>(reg:SI 1)</CODE> appears as a memory address it refers to the value
in register 1 <EM>before</EM> the execution of the insn.
</P><P>

It follows that it is <EM>incorrect</EM> to use <CODE>parallel</CODE> and
expect the result of one <CODE>set</CODE> to be available for the next one.
For example, people sometimes attempt to represent a jump-if-zero
instruction this way:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(parallel [(set (cc0) (reg:SI 34))
           (set (pc) (if_then_else
                        (eq (cc0) (const_int 0))
                        (label_ref <small>...</small>)
                        (pc)))])
</pre></td></tr></table></P><P>

But this is incorrect, because it says that the jump condition depends
on the condition code value <EM>before</EM> this instruction, not on the
new value that is set by this instruction.
</P><P>

Peephole optimization, which takes place in together with final assembly
code output, can produce insns whose patterns consist of a <CODE>parallel</CODE>
whose elements are the operands needed to output the resulting
assembler code--often <CODE>reg</CODE>, <CODE>mem</CODE> or constant expressions.
This would not be well-formed RTL at any other stage in compilation,
but it is ok then because no further optimization remains to be done.
However, the definition of the macro <CODE>NOTICE_UPDATE_CC</CODE> must
deal with such insns if you define any peephole optimizations.
</P><P>

<DT><CODE>(sequence [<VAR>insns</VAR> <small>...</small>])</CODE>
<DD>Represents a sequence of insns.  Each of the <VAR>insns</VAR> that appears
in the vector is suitable for appearing in the chain of insns, so it
must be an <CODE>insn</CODE>, <CODE>jump_insn</CODE>, <CODE>call_insn</CODE>,
<CODE>code_label</CODE>, <CODE>barrier</CODE> or <CODE>note</CODE>.
<P>

A <CODE>sequence</CODE> RTX never appears in an actual insn.  It represents
the sequence of insns that result from a <CODE>define_expand</CODE>
<EM>before</EM> those insns are passed to <CODE>emit_insn</CODE> to insert
them in the chain of insns.  When actually inserted, the individual
sub-insns are separated out and the <CODE>sequence</CODE> is forgotten.
</DL>
<P>

Three expression codes appear in place of a side effect, as the body of an
insn, though strictly speaking they do not describe side effects as such:
</P><P>

<DL COMPACT>
<DT><CODE>(asm_input <VAR>s</VAR>)</CODE>
<DD>Represents literal assembler code as described by the string <VAR>s</VAR>.
<P>

<DT><CODE>(addr_vec:<VAR>m</VAR> [<VAR>lr0</VAR> <VAR>lr1</VAR> <small>...</small>])</CODE>
<DD>Represents a table of jump addresses.  The vector elements <VAR>lr0</VAR>,
etc., are <CODE>label_ref</CODE> expressions.  The mode <VAR>m</VAR> specifies
how much space is given to each address; normally <VAR>m</VAR> would be
<CODE>Pmode</CODE>.
<P>

<DT><CODE>(addr_diff_vec:<VAR>m</VAR> <VAR>base</VAR> [<VAR>lr0</VAR> <VAR>lr1</VAR> <small>...</small>])</CODE>
<DD>Represents a table of jump addresses expressed as offsets from
<VAR>base</VAR>.  The vector elements <VAR>lr0</VAR>, etc., are <CODE>label_ref</CODE>
expressions and so is <VAR>base</VAR>.  The mode <VAR>m</VAR> specifies how much
space is given to each address-difference.</DL>
<P>

<A NAME="Incdec"></A>
<HR SIZE="6">
<A NAME="SEC59"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC58"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC60"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.13 Embedded Side-Effects on Addresses </H2>
<!--docid::SEC59::-->
<P>

Four special side-effect expression codes appear as memory addresses.
</P><P>

<DL COMPACT>
<DT><CODE>(pre_dec:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the side effect of decrementing <VAR>x</VAR> by a standard
amount and represents also the value that <VAR>x</VAR> has after being
decremented.  <VAR>x</VAR> must be a <CODE>reg</CODE> or <CODE>mem</CODE>, but most
machines allow only a <CODE>reg</CODE>.  <VAR>m</VAR> must be the machine mode
for pointers on the machine in use.  The amount <VAR>x</VAR> is decremented
by is the length in bytes of the machine mode of the containing memory
reference of which this expression serves as the address.  Here is an
example of its use:<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(mem:DF (pre_dec:SI (reg:SI 39)))
</pre></td></tr></table></P><P>

This says to decrement pseudo register 39 by the length of a <CODE>DFmode</CODE>
value and use the result to address a <CODE>DFmode</CODE> value.
</P><P>

<DT><CODE>(pre_inc:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Similar, but specifies incrementing <VAR>x</VAR> instead of decrementing it.
<P>

<DT><CODE>(post_dec:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Represents the same side effect as <CODE>pre_dec</CODE> but a different
value.  The value represented here is the value <VAR>x</VAR> has <I>before</I>
being decremented.
<P>

<DT><CODE>(post_inc:<VAR>m</VAR> <VAR>x</VAR>)</CODE>
<DD>Similar, but specifies incrementing <VAR>x</VAR> instead of decrementing it.
</DL>
<P>

These embedded side effect expressions must be used with care.  Instruction
patterns may not use them.  Until the <SAMP>`flow'</SAMP> pass of the compiler,
they may occur only to represent pushes onto the stack.  The <SAMP>`flow'</SAMP>
pass finds cases where registers are incremented or decremented in one
instruction and used as an address shortly before or after; these cases are
then transformed to use pre- or post-increment or -decrement.
</P><P>

Explicit popping of the stack could be represented with these embedded
side effect operators, but that would not be safe; the instruction
combination pass could move the popping past pushes, thus changing
the meaning of the code.
</P><P>

An instruction that can be represented with an embedded side effect
could also be represented using <CODE>parallel</CODE> containing an additional
<CODE>set</CODE> to describe how the address register is altered.  This is not
done because machines that allow these operations at all typically
allow them wherever a memory address is called for.  Describing them as
additional parallel stores would require doubling the number of entries
in the machine description.
</P><P>

<A NAME="Assembler"></A>
<HR SIZE="6">
<A NAME="SEC60"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC59"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC61"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.14 Assembler Instructions as Expressions </H2>
<!--docid::SEC60::-->
<P>

The RTX code <CODE>asm_operands</CODE> represents a value produced by a
user-specified assembler instruction.  It is used to represent
an <CODE>asm</CODE> statement with arguments.  An <CODE>asm</CODE> statement with
a single output operand, like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>asm ("foo %1,%2,%0" : "=a" (outputvar) : "g" (x + y), "di" (*z));
</pre></td></tr></table></P><P>

is represented using a single <CODE>asm_operands</CODE> RTX which represents
the value that is stored in <CODE>outputvar</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set <VAR>rtx-for-outputvar</VAR>
     (asm_operands "foo %1,%2,%0" "a" 0
                   [<VAR>rtx-for-addition-result</VAR> <VAR>rtx-for-*z</VAR>]
                   [(asm_input:<VAR>m1</VAR> "g")
                    (asm_input:<VAR>m2</VAR> "di")]))
</pre></td></tr></table></P><P>

Here the operands of the <CODE>asm_operands</CODE> RTX are the assembler
template string, the output-operand's constraint, the index-number of the
output operand among the output operands specified, a vector of input
operand RTX's, and a vector of input-operand modes and constraints.  The
mode <VAR>m1</VAR> is the mode of the sum <CODE>x+y</CODE>; <VAR>m2</VAR> is that of
<CODE>*z</CODE>.
</P><P>

When an <CODE>asm</CODE> statement has multiple output values, its insn has
several such <CODE>set</CODE> RTX's inside of a <CODE>parallel</CODE>.  Each <CODE>set</CODE>
contains a <CODE>asm_operands</CODE>; all of these share the same assembler
template and vectors, but each contains the constraint for the respective
output operand.  They are also distinguished by the output-operand index
number, which is 0, 1, <small>...</small> for successive output operands.
</P><P>

<A NAME="Insns"></A>
<HR SIZE="6">
<A NAME="SEC61"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC60"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC62"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.15 Insns </H2>
<!--docid::SEC61::-->
<P>

The RTL representation of the code for a function is a doubly-linked
chain of objects called <EM>insns</EM>.  Insns are expressions with
special codes that are used for no other purpose.  Some insns are
actual instructions; others represent dispatch tables for <CODE>switch</CODE>
statements; others represent labels to jump to or various sorts of
declarative information.
</P><P>

In addition to its own specific data, each insn must have a unique id-number
that distinguishes it from all other insns in the current function, and
chain pointers to the preceding and following insns.  These three fields
occupy the same position in every insn, independent of the expression code
of the insn.  They could be accessed with <CODE>XEXP</CODE> and <CODE>XINT</CODE>,
but instead three special macros are always used:
</P><P>

<DL COMPACT>
<DT><CODE>INSN_UID (<VAR>i</VAR>)</CODE>
<DD>Accesses the unique id of insn <VAR>i</VAR>.
<P>

<DT><CODE>PREV_INSN (<VAR>i</VAR>)</CODE>
<DD>Accesses the chain pointer to the insn preceding <VAR>i</VAR>.
If <VAR>i</VAR> is the first insn, this is a null pointer.
<P>

<DT><CODE>NEXT_INSN (<VAR>i</VAR>)</CODE>
<DD>Accesses the chain pointer to the insn following <VAR>i</VAR>.
If <VAR>i</VAR> is the last insn, this is a null pointer.
</DL>
<P>

The <CODE>NEXT_INSN</CODE> and <CODE>PREV_INSN</CODE> pointers must always
correspond: if <VAR>insn</VAR> is not the first insn,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>NEXT_INSN (PREV_INSN (<VAR>insn</VAR>)) == <VAR>insn</VAR>
</pre></td></tr></table></P><P>

is always true.
</P><P>

Every insn has one of the following six expression codes:
</P><P>

<DL COMPACT>
<DT><CODE>insn</CODE>
<DD>The expression code <CODE>insn</CODE> is used for instructions that do not jump
and do not do function calls.  Insns with code <CODE>insn</CODE> have four
additional fields beyond the three mandatory ones listed above.
These four are described in a table below.
<P>

<DT><CODE>jump_insn</CODE>
<DD>The expression code <CODE>jump_insn</CODE> is used for instructions that may jump
(or, more generally, may contain <CODE>label_ref</CODE> expressions).
<CODE>jump_insn</CODE> insns have the same extra fields as <CODE>insn</CODE> insns,
accessed in the same way.  If there is an instruction to return from the
current function, it is recorded as a <CODE>jump_insn</CODE>.
<P>

<DT><CODE>call_insn</CODE>
<DD>The expression code <CODE>call_insn</CODE> is used for instructions that may do
function calls.  It is important to distinguish these instructions because
they imply that certain registers and memory locations may be altered
unpredictably.
<P>

<CODE>call_insn</CODE> insns have the same extra fields as <CODE>insn</CODE> insns,
accessed in the same way.
</P><P>

<DT><CODE>code_label</CODE>
<DD>A <CODE>code_label</CODE> insn represents a label that a jump insn can jump to.
It contains one special field of data in addition to the three standard ones.
It is used to hold the <EM>label number</EM>, a number that identifies this
label uniquely among all the labels in the compilation (not just in the
current function).  Ultimately, the label is represented in the assembler
output as an assembler label <SAMP>`L<VAR>n</VAR>'</SAMP> where <VAR>n</VAR> is the label number.
<P>

<DT><CODE>barrier</CODE>
<DD>Barriers are placed in the instruction stream after unconditional
jump instructions to indicate that the jumps are unconditional.
They contain no information beyond the three standard fields.
<P>

<DT><CODE>note</CODE>
<DD><CODE>note</CODE> insns are used to represent additional debugging and
declarative information.  They contain two nonstandard fields, an
integer which is accessed with the macro <CODE>NOTE_LINE_NUMBER</CODE> and a
string accessed with <CODE>NOTE_SOURCE_FILE</CODE>.
<P>

If <CODE>NOTE_LINE_NUMBER</CODE> is positive, the note represents the
position of a source line and <CODE>NOTE_SOURCE_FILE</CODE> is the source file name
that the line came from.  These notes control generation of line
number data in the assembler output.
</P><P>

Otherwise, <CODE>NOTE_LINE_NUMBER</CODE> is not really a line number but a
code with one of the following values (and <CODE>NOTE_SOURCE_FILE</CODE>
must contain a null pointer):
</P><P>

<DL COMPACT>
<DT><CODE>NOTE_INSN_DELETED</CODE>
<DD>Such a note is completely ignorable.  Some passes of the compiler
delete insns by altering them into notes of this kind.
<P>

<DT><CODE>NOTE_INSN_BLOCK_BEG</CODE>
<DD><DT><CODE>NOTE_INSN_BLOCK_END</CODE>
<DD>These types of notes indicate the position of the beginning and end
of a level of scoping of variable names.  They control the output
of debugging information.
<P>

<DT><CODE>NOTE_INSN_LOOP_BEG</CODE>
<DD><DT><CODE>NOTE_INSN_LOOP_END</CODE>
<DD>These types of notes indicate the position of the beginning and end
of a <CODE>while</CODE> or <CODE>for</CODE> loop.  They enable the loop optimizer
to find loops quickly.
<DT><CODE>NOTE_INSN_FUNCTION_END</CODE>
<DD>Appears near the end of the function body, just before the label that
<CODE>return</CODE> statements jump to (on machine where a single instruction
does not suffice for returning).  This note may be deleted by jump
optimization.
<DT><CODE>NOTE_INSN_SETJMP</CODE>
<DD>Appears following each call to <CODE>setjmp</CODE> or a related function.
<P>

<DT><CODE>NOTE_INSN_LOOP_CONT</CODE>
<DD>Appears at the place in a loop that <CODE>continue</CODE> statements jump to.
</DL>
<P>

These codes are printed symbolically when they appear in debugging dumps.
</DL>
<P>

The machine mode of an insn is normally zero (<CODE>VOIDmode</CODE>), but the
reload pass sets it to <CODE>QImode</CODE> if the insn needs reloading.
</P><P>

Here is a table of the extra fields of <CODE>insn</CODE>, <CODE>jump_insn</CODE>
and <CODE>call_insn</CODE> insns:
</P><P>

<DL COMPACT>
<DT><CODE>PATTERN (<VAR>i</VAR>)</CODE>
<DD>An expression for the side effect performed by this insn.
<P>

<DT><CODE>INSN_CODE (<VAR>i</VAR>)</CODE>
<DD>An integer that says which pattern in the machine description matches
this insn, or -1 if the matching has not yet been attempted.
<P>

Such matching is never attempted and this field is not used on an insn
whose pattern consists of a single <CODE>use</CODE>, <CODE>clobber</CODE>,
<CODE>asm</CODE>, <CODE>addr_vec</CODE> or <CODE>addr_diff_vec</CODE> expression.
</P><P>

<DT><CODE>LOG_LINKS (<VAR>i</VAR>)</CODE>
<DD>A list (chain of <CODE>insn_list</CODE> expressions) of previous "related"
insns: insns which store into registers values that are used for the
first time in this insn.  (An additional constraint is that neither a
jump nor a label may come between the related insns).  This list is
set up by the flow analysis pass; it is a null pointer until then.
<P>

<DT><CODE>REG_NOTES (<VAR>i</VAR>)</CODE>
<DD>A list (chain of <CODE>expr_list</CODE> expressions) giving information
about the usage of registers in this insn.  This list is set up by the
flow analysis pass; it is a null pointer until then.
</DL>
<P>

The <CODE>LOG_LINKS</CODE> field of an insn is a chain of <CODE>insn_list</CODE>
expressions.  Each of these has two operands: the first is an insn,
and the second is another <CODE>insn_list</CODE> expression (the next one in
the chain).  The last <CODE>insn_list</CODE> in the chain has a null pointer
as second operand.  The significant thing about the chain is which
insns appear in it (as first operands of <CODE>insn_list</CODE>
expressions).  Their order is not significant.
</P><P>

The <CODE>REG_NOTES</CODE> field of an insn is a similar chain but of
<CODE>expr_list</CODE> expressions instead of <CODE>insn_list</CODE>.  There are
several kinds of register notes, which are distinguished by the machine
mode of the <CODE>expr_list</CODE>, which in a register note is really
understood as being an <CODE>enum reg_note</CODE>.  The first operand <VAR>op</VAR>
of the <CODE>expr_list</CODE> is data whose meaning depends on the kind of
note.  Here are the kinds of register note:
</P><P>

<DL COMPACT>
<DT><CODE>REG_DEAD</CODE>
<DD>The register <VAR>op</VAR> dies in this insn; that is to say, altering the
value immediately after this insn would not affect the future behavior
of the program.
<P>

<DT><CODE>REG_INC</CODE>
<DD>The register <VAR>op</VAR> is incremented (or decremented; at this level
there is no distinction) by an embedded side effect inside this insn.
This means it appears in a <CODE>post_inc</CODE>, <CODE>pre_inc</CODE>,
<CODE>post_dec</CODE> or <CODE>pre_dec</CODE> RTX.
<P>

<DT><CODE>REG_EQUIV</CODE>
<DD>The register that is set by this insn will be equal to <VAR>op</VAR> at run
time, and could validly be replaced in all its occurrences by
<VAR>op</VAR>.  ("Validly" here refers to the data flow of the program;
simple replacement may make some insns invalid.)
<P>

The value which the insn explicitly copies into the register may look
different from <VAR>op</VAR>, but they will be equal at run time.
</P><P>

For example, when a constant is loaded into a register that is never
assigned any other value, this kind of note is used.
</P><P>

When a parameter is copied into a pseudo-register at entry to a function,
a note of this kind records that the register is equivalent to the stack
slot where the parameter was passed.  Although in this case the register
may be set by other insns, it is still valid to replace the register
by the stack slot throughout the function.
</P><P>

<DT><CODE>REG_EQUAL</CODE>
<DD>The register that is set by this insn will be equal to <VAR>op</VAR> at run
time at the end of this insn (but not necessarily elsewhere in the
function).
<P>

The RTX <VAR>op</VAR> is typically an arithmetic expression.  For example,
when a sequence of insns such as a library call is used to perform an
arithmetic operation, this kind of note is attached to the insn that
produces or copies the final value.  It tells the CSE pass how to
think of that value.
</P><P>

<DT><CODE>REG_RETVAL</CODE>
<DD>This insn copies the value of a library call, and <VAR>op</VAR> is the
first insn that was generated to set up the arguments for the library
call.
<P>

Flow analysis uses this note to delete all of a library call whose
result is dead.
</P><P>

<DT><CODE>REG_WAS_0</CODE>
<DD>The register <VAR>op</VAR> contained zero before this insn.  You can rely
on this note if it is present; its absence implies nothing.
<P>

<DT><CODE>REG_LIBCALL</CODE>
<DD>This is the inverse of <CODE>REG_RETVAL</CODE>: it is placed on the first
insn of a library call, and it points to the last one.
<P>

Loop optimization uses this note to move an entire library call out
of a loop when its value is constant.
</P><P>

<DT><CODE>REG_NONNEG</CODE>
<DD>The register <VAR>op</VAR> is known to have nonnegative value when this
insn is reached.
</DL>
<P>

For convenience, the machine mode in an <CODE>insn_list</CODE> or
<CODE>expr_list</CODE> is printed using these symbolic codes in debugging dumps.
</P><P>

The only difference between the expression codes <CODE>insn_list</CODE> and
<CODE>expr_list</CODE> is that the first operand of an <CODE>insn_list</CODE> is
assumed to be an insn and is printed in debugging dumps as the insn's
unique id; the first operand of an <CODE>expr_list</CODE> is printed in the
ordinary way as an expression.
</P><P>

<A NAME="Calls"></A>
<HR SIZE="6">
<A NAME="SEC62"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC61"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC63"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.16 RTL Representation of Function-Call Insns </H2>
<!--docid::SEC62::-->
<P>

Insns that call subroutines have the RTL expression code <CODE>call_insn</CODE>.
These insns must satisfy special rules, and their bodies must use a special
RTL expression code, <CODE>call</CODE>.
</P><P>

A <CODE>call</CODE> expression has two operands, as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(call (mem:<VAR>fm</VAR> <VAR>addr</VAR>) <VAR>nbytes</VAR>)
</pre></td></tr></table></P><P>

Here <VAR>nbytes</VAR> is an operand that represents the number of bytes of
argument data being passed to the subroutine, <VAR>fm</VAR> is a machine mode
(which must equal as the definition of the <CODE>FUNCTION_MODE</CODE> macro in
the machine description) and <VAR>addr</VAR> represents the address of the
subroutine.
</P><P>

For a subroutine that returns no value, the <CODE>call</CODE> RTX as shown above
is the entire body of the insn.
</P><P>

For a subroutine that returns a value whose mode is not <CODE>BLKmode</CODE>,
the value is returned in a hard register.  If this register's number is
<VAR>r</VAR>, then the body of the call insn looks like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (reg:<VAR>m</VAR> <VAR>r</VAR>)
     (call (mem:<VAR>fm</VAR> <VAR>addr</VAR>) <VAR>nbytes</VAR>))
</pre></td></tr></table></P><P>

This RTL expression makes it clear (to the optimizer passes) that the
appropriate register receives a useful value in this insn.
</P><P>

Immediately after RTL generation, if the value of the subroutine is
actually used, this call insn is always followed closely by an insn which
refers to the register <VAR>r</VAR>.  This remains true through all the
optimizer passes until cross jumping occurs.
</P><P>

The following insn has one of two forms.  Either it copies the value into a
pseudo-register, like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (reg:<VAR>m</VAR> <VAR>p</VAR>) (reg:<VAR>m</VAR> <VAR>r</VAR>))
</pre></td></tr></table></P><P>

or (in the case where the calling function will simply return whatever
value the call produced, and no operation is needed to do this):
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(use (reg:<VAR>m</VAR> <VAR>r</VAR>))
</pre></td></tr></table></P><P>

Between the call insn and this following insn there may intervene only a
stack-adjustment insn (and perhaps some <CODE>note</CODE> insns).
</P><P>

When a subroutine returns a <CODE>BLKmode</CODE> value, it is handled by
passing to the subroutine the address of a place to store the value.
So the call insn itself does not "return" any value, and it has the
same RTL form as a call that returns nothing.
</P><P>

<A NAME="Sharing"></A>
<HR SIZE="6">
<A NAME="SEC63"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC62"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 12.17 Structure Sharing Assumptions </H2>
<!--docid::SEC63::-->
<P>

The compiler assumes that certain kinds of RTL expressions are unique;
there do not exist two distinct objects representing the same value.
In other cases, it makes an opposite assumption: that no RTL expression
object of a certain kind appears in more than one place in the
containing structure.
</P><P>

These assumptions refer to a single function; except for the RTL
objects that describe global variables and external functions,
no RTL objects are common to two functions.
</P><P>

<UL>
<LI>
Each pseudo-register has only a single <CODE>reg</CODE> object to represent it,
and therefore only a single machine mode.
<P>

<LI>
For any symbolic label, there is only one <CODE>symbol_ref</CODE> object
referring to it.
<P>

<LI>
There is only one <CODE>const_int</CODE> expression with value zero,
and only one with value one.
<P>

<LI>
There is only one <CODE>pc</CODE> expression.
<P>

<LI>
There is only one <CODE>cc0</CODE> expression.
<P>

<LI>
There is only one <CODE>const_double</CODE> expression with mode
<CODE>SFmode</CODE> and value zero, and only one with mode <CODE>DFmode</CODE> and
value zero.
<P>

<LI>
No <CODE>label_ref</CODE> appears in more than one place in the RTL
structure; in other words, it is safe to do a tree-walk of all the
insns in the function and assume that each time a <CODE>label_ref</CODE> is
seen it is distinct from all others that are seen.
<P>

<LI>
Only one <CODE>mem</CODE> object is normally created for each static
variable or stack slot, so these objects are frequently shared in all
the places they appear.  However, separate but equal objects for these
variables are occasionally made.
<P>

<LI>
When a single <CODE>asm</CODE> statement has multiple output operands,
a distinct <CODE>asm_operands</CODE> RTX is made for each output operand.
However, these all share the vector which contains the sequence of
input operands.  Because this sharing is used later on to test whether
two <CODE>asm_operands</CODE> RTX's come from the same statement, the sharing
must be guaranteed to be preserved.
<P>

<LI>
No RTL object appears in more than one place in the RTL structure
except as described above.  Many passes of the compiler rely on this
by assuming that they can modify RTL objects in place without unwanted
side-effects on other insns.
<P>

<LI>
During initial RTL generation, shared structure is freely introduced.
After all the RTL for a function has been generated, all shared
structure is copied by <CODE>unshare_all_rtl</CODE> in <TT>`emit-rtl.c'</TT>,
after which the above rules are guaranteed to be followed.
<P>

<LI>
During the combiner pass, shared structure with an insn can exist
temporarily.  However, the shared structure is copied before the
combiner is finished with the insn.  This is done by
<CODE>copy_substitutions</CODE> in <TT>`combine.c'</TT>.
</UL>
<P>

<A NAME="Machine Desc"></A>
<HR SIZE="6">
<A NAME="SEC64"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC63"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC65"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC46"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 13. Machine Descriptions </H1>
<!--docid::SEC64::-->
<P>

A machine description has two parts: a file of instruction patterns
(<TT>`.md'</TT> file) and a C header file of macro definitions.
</P><P>

The <TT>`.md'</TT> file for a target machine contains a pattern for each
instruction that the target machine supports (or at least each instruction
that is worth telling the compiler about).  It may also contain comments.
A semicolon causes the rest of the line to be a comment, unless the semicolon
is inside a quoted string.
</P><P>

See the next chapter for information on the C header file.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC65">13.1 Everything about Instruction Patterns</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to write instruction patterns.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC66">13.2 Example of <CODE>define_insn</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">An explained example of a <CODE>define_insn</CODE> pattern.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC67">13.3 RTL Template for Generating and Recognizing Insns</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The RTL template defines what insns match a pattern.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC68">13.4 Output Templates and Operand Substitution</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The output template says how to make assembler code
                          from such an insn.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC69">13.5 C Statements for Generating Assembler Output</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">For more generality, write C code to output 
                          the assembler code.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC70">13.6 Operand Constraints</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">When not all operands are general operands.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC76">13.7 Standard Names for Patterns Used in Generation</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Names mark patterns to use for code generation.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC77">13.8 When the Order of Patterns Matters</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">When the order of patterns makes a difference.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC78">13.9 Interdependence of Patterns</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Having one pattern may make you need another.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC79">13.10 Defining Jump Instruction Patterns</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Special considerations for patterns for jump insns.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC80">13.11 Defining Machine-Specific Peephole Optimizers</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining machine-specific peephole optimizations.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC81">13.12 Defining RTL Sequences for Code Generation</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Generating a sequence of several RTL insns
                         for a standard operation.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Patterns"></A>
<HR SIZE="6">
<A NAME="SEC65"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC66"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.1 Everything about Instruction Patterns </H2>
<!--docid::SEC65::-->
<P>

Each instruction pattern contains an incomplete RTL expression, with pieces
to be filled in later, operand constraints that restrict how the pieces can
be filled in, and an output pattern or C code to generate the assembler
output, all wrapped up in a <CODE>define_insn</CODE> expression.
</P><P>

A <CODE>define_insn</CODE> is an RTL expression containing four or five operands:
</P><P>

<OL>
<LI>
An optional name.  The presence of a name indicate that this instruction
pattern can perform a certain standard job for the RTL-generation
pass of the compiler.  This pass knows certain names and will use
the instruction patterns with those names, if the names are defined
in the machine description.
<P>

The absence of a name is indicated by writing an empty string
where the name should go.  Nameless instruction patterns are never
used for generating RTL code, but they may permit several simpler insns
to be combined later on.
</P><P>

Names that are not thus known and used in RTL-generation have no
effect; they are equivalent to no name at all.
</P><P>

<LI>
The <EM>RTL template</EM> (see section <A HREF="gcc.html#SEC67">13.3 RTL Template for Generating and Recognizing Insns</A>) is a vector of
incomplete RTL expressions which show what the instruction should look
like.  It is incomplete because it may contain <CODE>match_operand</CODE>
and <CODE>match_dup</CODE> expressions that stand for operands of the
instruction.
<P>

If the vector has only one element, that element is the template for the
instruction pattern.  If the vector has multiple elements, then the
instruction pattern is a <CODE>parallel</CODE> expression containing the
elements described.
</P><P>

<LI>
A condition.  This is a string which contains a C expression that is
the final test to decide whether an insn body matches this pattern.
<P>

For a named pattern, the condition (if present) may not depend on
the data in the insn being matched, but only the target-machine-type
flags.  The compiler needs to test these conditions during
initialization in order to learn exactly which named instructions are
available in a particular run.
</P><P>

For nameless patterns, the condition is applied only when matching an
individual insn, and only after the insn has matched the pattern's
recognition template.  The insn's operands may be found in the vector
<CODE>operands</CODE>.
</P><P>

<LI>
The <EM>output template</EM>: a string that says how to output matching
insns as assembler code.  <SAMP>`%'</SAMP> in this string specifies where
to substitute the value of an operand.  See section <A HREF="gcc.html#SEC68">13.4 Output Templates and Operand Substitution</A>.
<P>

When simple substitution isn't general enough, you can specify a piece
of C code to compute the output.  See section <A HREF="gcc.html#SEC69">13.5 C Statements for Generating Assembler Output</A>.
</P><P>

<LI>
Optionally, some <EM>machine-specific information</EM>.  The meaning
of this information is defined only by an individual machine description;
typically it might say whether this insn alters the condition codes,
or how many bytes of output it generates.
<P>

This operand is written as a string containing a C initializer
(complete with braces) for the structure type <CODE>INSN_MACHINE_INFO</CODE>,
whose definition is up to you (see section <A HREF="gcc.html#SEC93">14.11 Miscellaneous Parameters</A>).
</OL>
<P>

<A NAME="Example"></A>
<HR SIZE="6">
<A NAME="SEC66"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC65"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC67"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.2 Example of <CODE>define_insn</CODE> </H2>
<!--docid::SEC66::-->
<P>

Here is an actual example of an instruction pattern, for the 68000/68020.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn "tstsi"
  [(set (cc0)
        (match_operand:SI 0 "general_operand" "rm"))]
  ""
  "*
{ if (TARGET_68020 || ! ADDRESS_REG_P (operands[0]))
    return \"tstl %0\";
  return \"cmpl #0,%0\"; }")
</pre></td></tr></table></P><P>

This is an instruction that sets the condition codes based on the value of
a general operand.  It has no condition, so any insn whose RTL description
has the form shown may be handled according to this pattern.  The name
<SAMP>`tstsi'</SAMP> means "test a <CODE>SImode</CODE> value" and tells the RTL generation
pass that, when it is necessary to test such a value, an insn to do so
can be constructed using this pattern.
</P><P>

The output control string is a piece of C code which chooses which
output template to return based on the kind of operand and the specific
type of CPU for which code is being generated.
</P><P>

<SAMP>`"rm"'</SAMP> is an operand constraint.  Its meaning is explained below.
</P><P>

<A NAME="RTL Template"></A>
<HR SIZE="6">
<A NAME="SEC67"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC66"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC68"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.3 RTL Template for Generating and Recognizing Insns </H2>
<!--docid::SEC67::-->
<P>

The RTL template is used to define which insns match the particular pattern
and how to find their operands.  For named patterns, the RTL template also
says how to construct an insn from specified operands.
</P><P>

Construction involves substituting specified operands into a copy of the
template.  Matching involves determining the values that serve as the
operands in the insn being matched.  Both of these activities are
controlled by special expression types that direct matching and
substitution of the operands.
</P><P>

<DL COMPACT>
<DT><CODE>(match_operand:<VAR>m</VAR> <VAR>n</VAR> <VAR>pred</VAR> <VAR>constraint</VAR>)</CODE>
<DD>This expression is a placeholder for operand number <VAR>n</VAR> of
the insn.  When constructing an insn, operand number <VAR>n</VAR>
will be substituted at this point.  When matching an insn, whatever
appears at this position in the insn will be taken as operand
number <VAR>n</VAR>; but it must satisfy <VAR>pred</VAR> or this instruction
pattern will not match at all.
<P>

Operand numbers must be chosen consecutively counting from zero in
each instruction pattern.  There may be only one <CODE>match_operand</CODE>
expression in the pattern for each operand number.  Usually operands
are numbered in the order of appearance in <CODE>match_operand</CODE>
expressions.
</P><P>

<VAR>pred</VAR> is a string that is the name of a C function that accepts
two arguments, an expression and a machine mode.  During matching, the
function will be called with the putative operand as the expression
and <VAR>m</VAR> as the mode argument.  If it returns zero, this
instruction pattern fails to match.  <VAR>pred</VAR> may be an empty
string; then it means no test is to be done on the operand,
so anything which occurs in this position is valid.
</P><P>

<VAR>constraint</VAR> controls reloading and the choice of the best register
class to use for a value, as explained later (see section <A HREF="gcc.html#SEC70">13.6 Operand Constraints</A>).
</P><P>

People are often unclear on the difference between the constraint and the
predicate.  The predicate helps decide whether a given insn matches the
pattern.  The constraint plays no role in this decision; instead, it
controls various decisions in the case of an insn which does match.
</P><P>

Most often, <VAR>pred</VAR> is <CODE>"general_operand"</CODE>.  This function checks
that the putative operand is either a constant, a register or a memory
reference, and that it is valid for mode <VAR>m</VAR>.
</P><P>

For an operand that must be a register, <VAR>pred</VAR> should be
<CODE>"register_operand"</CODE>.  It would be valid to use
<CODE>"general_operand"</CODE>, since the reload pass would copy any
non-register operands through registers, but this would make GNU CC do
extra work, and it would prevent the register allocator from doing the
best possible job.
</P><P>

For an operand that must be a constant, either <VAR>pred</VAR> should be
<CODE>"immediate_operand"</CODE>, or the instruction pattern's extra
condition should check for constants, or both.  You cannot expect the
constraints to do this work!  If the constraints allow only constants,
but the predicate allows something else, the compiler will crash when
that case arises.
</P><P>

<DT><CODE>(match_dup <VAR>n</VAR>)</CODE>
<DD>This expression is also a placeholder for operand number <VAR>n</VAR>.
It is used when the operand needs to appear more than once in the
insn.
<P>

In construction, <CODE>match_dup</CODE> behaves exactly like
<CODE>match_operand</CODE>: the operand is substituted into the insn being
constructed.  But in matching, <CODE>match_dup</CODE> behaves differently.
It assumes that operand number <VAR>n</VAR> has already been determined by
a <CODE>match_operand</CODE> appearing earlier in the recognition template,
and it matches only an identical-looking expression.
</P><P>

<DT><CODE>(match_operator:<VAR>m</VAR> <VAR>n</VAR> "<VAR>predicate</VAR>" [<VAR>operands</VAR><small>...</small>])</CODE>
<DD>This pattern is a kind of placeholder for a variable RTL expression
code.
<P>

When constructing an insn, it stands for an RTL expression whose
expression code is taken from that of operand <VAR>n</VAR>, and whose
operands are constructed from the patterns <VAR>operands</VAR>.
</P><P>

When matching an expression, it matches an expression if the function
<VAR>predicate</VAR> returns nonzero on that expression <EM>and</EM> the
patterns <VAR>operands</VAR> match the operands of the expression.
</P><P>

Suppose that the function <CODE>commutative_operator</CODE> is defined as
follows, to match any expression whose operator is one of the six
commutative arithmetic operators of RTL and whose mode is <VAR>mode</VAR>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>int
commutative_operator (x, mode)
     rtx x;
     enum machine_mode mode;
{
  enum rtx_code code = GET_CODE (x);
  if (GET_MODE (x) != mode)
    return 0;
  return (code == PLUS || code == MULT || code == UMULT
          || code == AND || code == IOR || code == XOR);
}
</pre></td></tr></table></P><P>

Then the following pattern will match any RTL expression consisting
of a commutative operator applied to two general operands:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(match_operator:SI 2 "commutative_operator"
  [(match_operand:SI 3 "general_operand" "g")
   (match_operand:SI 4 "general_operand" "g")])
</pre></td></tr></table></P><P>

Here the vector <CODE>[<VAR>operands</VAR><small>...</small>]</CODE> contains two patterns
because the expressions to be matched all contain two operands.
</P><P>

When this pattern does match, the two operands of the commutative
operator are recorded as operands 3 and 4 of the insn.  (This is done
by the two instances of <CODE>match_operand</CODE>.)  Operand 2 of the insn
will be the entire commutative expression: use <CODE>GET_CODE
(operands[2])</CODE> to see which commutative operator was used.
</P><P>

The machine mode <VAR>m</VAR> of <CODE>match_operator</CODE> works like that of
<CODE>match_operand</CODE>: it is passed as the second argument to the
predicate function, and that function is solely responsible for
deciding whether the expression to be matched "has" that mode.
</P><P>

When constructing an insn, argument 2 of the gen-function will specify
the operation (i.e. the expression code) for the expression to be
made.  It should be an RTL expression, whose expression code is copied
into a new expression whose operands are arguments 3 and 4 of the
gen-function.  The subexpressions of argument 2 are not used;
only its expression code matters.
</P><P>

There is no way to specify constraints in <CODE>match_operator</CODE>.  The
operand of the insn which corresponds to the <CODE>match_operator</CODE>
never has any constraints because it is never reloaded as a whole.
However, if parts of its <VAR>operands</VAR> are matched by
<CODE>match_operand</CODE> patterns, those parts may have constraints of
their own.
</P><P>

<DT><CODE>(address (match_operand:<VAR>m</VAR> <VAR>n</VAR> "address_operand" ""))</CODE>
<DD>This complex of expressions is a placeholder for an operand number
<VAR>n</VAR> in a "load address" instruction: an operand which specifies
a memory location in the usual way, but for which the actual operand
value used is the address of the location, not the contents of the
location.
<P>

<CODE>address</CODE> expressions never appear in RTL code, only in machine
descriptions.  And they are used only in machine descriptions that do
not use the operand constraint feature.  When operand constraints are
in use, the letter <SAMP>`p'</SAMP> in the constraint serves this purpose.
</P><P>

<VAR>m</VAR> is the machine mode of the <EM>memory location being
addressed</EM>, not the machine mode of the address itself.  That mode is
always the same on a given target machine (it is <CODE>Pmode</CODE>, which
normally is <CODE>SImode</CODE>), so there is no point in mentioning it;
thus, no machine mode is written in the <CODE>address</CODE> expression.  If
some day support is added for machines in which addresses of different
kinds of objects appear differently or are used differently (such as
the PDP-10), different formats would perhaps need different machine
modes and these modes might be written in the <CODE>address</CODE>
expression.
</DL>
<P>

<A NAME="Output Template"></A>
<HR SIZE="6">
<A NAME="SEC68"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC67"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC69"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.4 Output Templates and Operand Substitution </H2>
<!--docid::SEC68::-->
<P>

The <EM>output template</EM> is a string which specifies how to output the
assembler code for an instruction pattern.  Most of the template is a
fixed string which is output literally.  The character <SAMP>`%'</SAMP> is used
to specify where to substitute an operand; it can also be used to
identify places where different variants of the assembler require
different syntax.
</P><P>

In the simplest case, a <SAMP>`%'</SAMP> followed by a digit <VAR>n</VAR> says to output
operand <VAR>n</VAR> at that point in the string.
</P><P>

<SAMP>`%'</SAMP> followed by a letter and a digit says to output an operand in an
alternate fashion.  Four letters have standard, built-in meanings described
below.  The machine description macro <CODE>PRINT_OPERAND</CODE> can define
additional letters with nonstandard meanings.
</P><P>

<SAMP>`%c<VAR>digit</VAR>'</SAMP> can be used to substitute an operand that is a
constant value without the syntax that normally indicates an immediate
operand.
</P><P>

<SAMP>`%n<VAR>digit</VAR>'</SAMP> is like <SAMP>`%c<VAR>digit</VAR>'</SAMP> except that the value of
the constant is negated before printing.
</P><P>

<SAMP>`%a<VAR>digit</VAR>'</SAMP> can be used to substitute an operand as if it were a
memory reference, with the actual operand treated as the address.  This may
be useful when outputting a "load address" instruction, because often the
assembler syntax for such an instruction requires you to write the operand
as if it were a memory reference.
</P><P>

<SAMP>`%l<VAR>digit</VAR>'</SAMP> is used to substitute a <CODE>label_ref</CODE> into a jump
instruction.
</P><P>

<SAMP>`%'</SAMP> followed by a punctuation character specifies a substitution that
does not use an operand.  Only one case is standard: <SAMP>`%%'</SAMP> outputs a
<SAMP>`%'</SAMP> into the assembler code.  Other nonstandard cases can be
defined in the <CODE>PRINT_OPERAND</CODE> macro.  You must also define
which punctuation characters are valid with the
<CODE>PRINT_OPERAND_PUNCT_VALID_P</CODE> macro.
</P><P>

The template may generate multiple assembler instructions.  Write the text
for the instructions, with <SAMP>`\;'</SAMP> between them.
</P><P>

When the RTL contains two operands which are required by constraint to match
each other, the output template must refer only to the lower-numbered operand.
Matching operands are not always identical, and the rest of the compiler
arranges to put the proper RTL expression for printing into the lower-numbered
operand.
</P><P>

One use of nonstandard letters or punctuation following <SAMP>`%'</SAMP> is to
distinguish between different assembler languages for the same machine; for
example, Motorola syntax versus MIT syntax for the 68000.  Motorola syntax
requires periods in most opcode names, while MIT syntax does not.  For
example, the opcode <SAMP>`movel'</SAMP> in MIT syntax is <SAMP>`move.l'</SAMP> in Motorola
syntax.  The same file of patterns is used for both kinds of output syntax,
but the character sequence <SAMP>`%.'</SAMP> is used in each place where Motorola
syntax wants a period.  The <CODE>PRINT_OPERAND</CODE> macro for Motorola syntax
defines the sequence to output a period; the macro for MIT syntax defines
it to do nothing.
</P><P>

<A NAME="Output Statement"></A>
<HR SIZE="6">
<A NAME="SEC69"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC68"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.5 C Statements for Generating Assembler Output </H2>
<!--docid::SEC69::-->
<P>

Often a single fixed template string cannot produce correct and efficient
assembler code for all the cases that are recognized by a single
instruction pattern.  For example, the opcodes may depend on the kinds of
operands; or some unfortunate combinations of operands may require extra
machine instructions.
</P><P>

If the output control string starts with a <SAMP>`*'</SAMP>, then it is not an
output template but rather a piece of C program that should compute a
template.  It should execute a <CODE>return</CODE> statement to return the
template-string you want.  Most such templates use C string literals, which
require doublequote characters to delimit them.  To include these
doublequote characters in the string, prefix each one with <SAMP>`\'</SAMP>.
</P><P>

The operands may be found in the array <CODE>operands</CODE>, whose C data type
is <CODE>rtx []</CODE>.
</P><P>

It is possible to output an assembler instruction and then go on to output
or compute more of them, using the subroutine <CODE>output_asm_insn</CODE>.  This
receives two arguments: a template-string and a vector of operands.  The
vector may be <CODE>operands</CODE>, or it may be another array of <CODE>rtx</CODE>
that you declare locally and initialize yourself.
</P><P>

When an insn pattern has multiple alternatives in its constraints, often
the appearance of the assembler code is determined mostly by which alternative
was matched.  When this is so, the C code can test the variable
<CODE>which_alternative</CODE>, which is the ordinal number of the alternative
that was actually satisfied (0 for the first, 1 for the second alternative,
etc.).
</P><P>

For example, suppose there are two opcodes for storing zero, <SAMP>`clrreg'</SAMP>
for registers and <SAMP>`clrmem'</SAMP> for memory locations.  Here is how
a pattern could use <CODE>which_alternative</CODE> to choose between them:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn ""
  [(set (match_operand:SI 0 "general_operand" "r,m")
        (const_int 0))]
  ""
  "*
  return (which_alternative == 0
          ? \"clrreg %0\" : \"clrmem %0\");
  ")
</pre></td></tr></table></P><P>

<A NAME="Constraints"></A>
<HR SIZE="6">
<A NAME="SEC70"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC69"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC71"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.6 Operand Constraints </H2>
<!--docid::SEC70::-->
<P>

Each <CODE>match_operand</CODE> in an instruction pattern can specify a
constraint for the type of operands allowed.  Constraints can say whether
an operand may be in a register, and which kinds of register; whether the
operand can be a memory reference, and which kinds of address; whether the
operand may be an immediate constant, and which possible values it may
have.  Constraints can also require two operands to match.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC71">13.6.1 Simple Constraints</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Basic use of constraints.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC72">13.6.2 Multiple Alternative Constraints</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">When an insn has two alternative constraint-patterns.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC73">13.6.3 Register Class Preferences</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Constraints guide which hard register to put things in.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC74">13.6.4 Constraint Modifier Characters</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">More precise control over effects of constraints.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC75">13.6.5 Not Using Constraints</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Describing a clean machine without constraints.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Simple Constraints"></A>
<HR SIZE="6">
<A NAME="SEC71"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC72"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC69"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 13.6.1 Simple Constraints </H3>
<!--docid::SEC71::-->
<P>

The simplest kind of constraint is a string full of letters, each of
which describes one kind of operand that is permitted.  Here are
the letters that are allowed:
</P><P>

<DL COMPACT>
<DT><SAMP>`m'</SAMP>
<DD>A memory operand is allowed, with any kind of address that the machine
supports in general.
<P>

<DT><SAMP>`o'</SAMP>
<DD>A memory operand is allowed, but only if the address is
<EM>offsettable</EM>.  This means that adding a small integer (actually,
the width in bytes of the operand, as determined by its machine mode)
may be added to the address and the result is also a valid memory
address.
<P>

For example, an address which is constant is offsettable; so is an
address that is the sum of a register and a constant (as long as a
slightly larger constant is also within the range of address-offsets
supported by the machine); but an autoincrement or autodecrement
address is not offsettable.  More complicated indirect/indexed
addresses may or may not be offsettable depending on the other
addressing modes that the machine supports.
</P><P>

Note that in an output operand which can be matched by another
operand, the constraint letter <SAMP>`o'</SAMP> is valid only when accompanied
by both <SAMP>`&#60;'</SAMP> (if the target machine has predecrement addressing)
and <SAMP>`&#62;'</SAMP> (if the target machine has preincrement addressing).
</P><P>

When the constraint letter <SAMP>`o'</SAMP> is used, the reload pass may
generate instructions which copy a nonoffsettable address into an index
register.  The idea is that the register can be used as a replacement
offsettable address.  But this method requires that there be patterns
to copy any kind of address into a register.  Auto-increment
and auto-decrement addresses are an exception; there need not be an
instruction that can copy such an address into a register, because
reload handles these cases specially.
</P><P>

Most older machine designs have "load address" instructions which do
just what is needed here.  Some RISC machines do not advertise such
instructions, but the possible addresses on these machines are very
limited, so it is easy to fake them.
</P><P>

<DT><SAMP>`&#60;'</SAMP>
<DD>A memory operand with autodecrement addressing (either predecrement or
postdecrement) is allowed.
<P>

<DT><SAMP>`&#62;'</SAMP>
<DD>A memory operand with autoincrement addressing (either preincrement or
postincrement) is allowed.
<P>

<DT><SAMP>`r'</SAMP>
<DD>A register operand is allowed provided that it is in a general
register.
<P>

<DT><SAMP>`d'</SAMP>, <SAMP>`a'</SAMP>, <SAMP>`f'</SAMP>, <small>...</small>
<DD>Other letters can be defined in machine-dependent fashion to stand for
particular classes of registers.  <SAMP>`d'</SAMP>, <SAMP>`a'</SAMP> and <SAMP>`f'</SAMP> are
defined on the 68000/68020 to stand for data, address and floating
point registers.
<P>

<DT><SAMP>`i'</SAMP>
<DD>An immediate integer operand (one with constant value) is allowed.
This includes symbolic constants whose values will be known only at
assembly time.
<P>

<DT><SAMP>`n'</SAMP>
<DD>An immediate integer operand with a known numeric value is allowed.
Many systems cannot support assembly-time constants for operands less
than a word wide.  Constraints for these operands should use <SAMP>`n'</SAMP>
rather than <SAMP>`i'</SAMP>.
<P>

<DT><SAMP>`I'</SAMP>, <SAMP>`J'</SAMP>, <SAMP>`K'</SAMP>, <small>...</small>
<DD>Other letters in the range <SAMP>`I'</SAMP> through <SAMP>`M'</SAMP> may be defined in
a machine-dependent fashion to permit immediate integer operands with
explicit integer values in specified ranges.  For example, on the
68000, <SAMP>`I'</SAMP> is defined to stand for the range of values 1 to 8.
This is the range permitted as a shift count in the shift
instructions.
<P>

<DT><SAMP>`F'</SAMP>
<DD>An immediate floating operand (expression code <CODE>const_double</CODE>) is
allowed.
<P>

<DT><SAMP>`G'</SAMP>, <SAMP>`H'</SAMP>
<DD><SAMP>`G'</SAMP> and <SAMP>`H'</SAMP> may be defined in a machine-dependent fashion to
permit immediate floating operands in particular ranges of values.
<P>

<DT><SAMP>`s'</SAMP>
<DD>An immediate integer operand whose value is not an explicit integer is
allowed.
<P>

This might appear strange; if an insn allows a constant operand with a
value not known at compile time, it certainly must allow any known
value.  So why use <SAMP>`s'</SAMP> instead of <SAMP>`i'</SAMP>?  Sometimes it allows
better code to be generated.
</P><P>

For example, on the 68000 in a fullword instruction it is possible to
use an immediate operand; but if the immediate value is between -128
and 127, better code results from loading the value into a register and
using the register.  This is because the load into the register can be
done with a <SAMP>`moveq'</SAMP> instruction.  We arrange for this to happen
by defining the letter <SAMP>`K'</SAMP> to mean "any integer outside the
range -128 to 127", and then specifying <SAMP>`Ks'</SAMP> in the operand
constraints.
</P><P>

<DT><SAMP>`g'</SAMP>
<DD>Any register, memory or immediate integer operand is allowed, except for
registers that are not general registers.
<P>

<DT><SAMP>`<VAR>n</VAR>'</SAMP> (a digit)
<DD>An operand that matches operand number <VAR>n</VAR> is allowed.
If a digit is used together with letters, the digit should come last.
<P>

This is called a <EM>matching constraint</EM> and what it really means is
that the assembler has only a single operand that fills two roles
considered separate in the RTL insn.  For example, an add insn has two
input operands and one output operand in the RTL, but on most machines
an add instruction really has only two operands, one of them an
input-output operand.
</P><P>

Matching constraints work only in circumstances like that add insn.
More precisely, the matching constraint must appear in an input-only
operand and the operand that it matches must be an output-only operand
with a lower number.  Thus, operand <VAR>n</VAR> must have <SAMP>`='</SAMP> in its
constraint.
</P><P>

For operands to match in a particular case usually means that they
are identical-looking RTL expressions.  But in a few special cases
specific kinds of dissimilarity are allowed.  For example, <CODE>*x</CODE>
as an input operand will match <CODE>*x++</CODE> as an output operand.
For proper results in such cases, the output template should always
use the output-operand's number when printing the operand.
</P><P>

<DT><SAMP>`p'</SAMP>
<DD>An operand that is a valid memory address is allowed.  This is
for "load address" and "push address" instructions.
<P>

<SAMP>`p'</SAMP> in the constraint must be accompanies by <CODE>address_operand</CODE>
as the predicate in the <CODE>match_operand</CODE>.
</DL>
<P>

In order to have valid assembler code, each operand must satisfy
its constraint.  But a failure to do so does not prevent the pattern
from applying to an insn.  Instead, it directs the compiler to modify
the code so that the constraint will be satisfied.  Usually this is
done by copying an operand into a register.
</P><P>

Contrast, therefore, the two instruction patterns that follow:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn ""
  [(set (match_operand:SI 0 "general_operand" "r")
        (plus:SI (match_dup 0)
                 (match_operand:SI 1 "general_operand" "r")))]
  ""
  "<small>...</small>")
</pre></td></tr></table></P><P>

which has two operands, one of which must appear in two places, and
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn ""
  [(set (match_operand:SI 0 "general_operand" "r")
        (plus:SI (match_operand:SI 1 "general_operand" "0")
                 (match_operand:SI 2 "general_operand" "r")))]
  ""
  "<small>...</small>")
</pre></td></tr></table></P><P>

which has three operands, two of which are required by a constraint to be
identical.  If we are considering an insn of the form
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(insn <VAR>n</VAR> <VAR>prev</VAR> <VAR>next</VAR>
  (set (reg:SI 3)
       (plus:SI (reg:SI 6) (reg:SI 109)))
  <small>...</small>)
</pre></td></tr></table></P><P>

the first pattern would not apply at all, because this insn does not
contain two identical subexpressions in the right place.  The pattern would
say, "That does not look like an add instruction; try other patterns."
The second pattern would say, "Yes, that's an add instruction, but there
is something wrong with it."  It would direct the reload pass of the
compiler to generate additional insns to make the constraint true.  The
results might look like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(insn <VAR>n2</VAR> <VAR>prev</VAR> <VAR>n</VAR>
  (set (reg:SI 3) (reg:SI 6))
  <small>...</small>)

(insn <VAR>n</VAR> <VAR>n2</VAR> <VAR>next</VAR>
  (set (reg:SI 3)
       (plus:SI (reg:SI 3) (reg:SI 109)))
  <small>...</small>)
</pre></td></tr></table></P><P>

It is up to you to make sure that each operand, in each pattern, has
constraints that can handle any RTL expression that could be present for
that operand.  (When multiple alternatives are in use, each pattern must,
for each possible combination of operand expressions, have at least one
alternative which can handle that combination of operands.)  The
constraints don't need to <EM>allow</EM> any possible operand--when this is
the case, they do not constrain--but they must at least point the way to
reloading any possible operand so that it will fit.
</P><P>

<UL>
<LI>
If the constraint accepts whatever operands the predicate permits,
there is no problem: reloading is never necessary for this operand.
<P>

For example, an operand whose constraints permit everything except
registers is safe provided its predicate rejects registers.
</P><P>

An operand whose predicate accepts only constant values is safe
provided its constraints include the letter <SAMP>`i'</SAMP>.  If any possible
constant value is accepted, then nothing less than <SAMP>`i'</SAMP> will do;
if the predicate is more selective, then the constraints may also be
more selective.
</P><P>

<LI>
Any operand expression can be reloaded by copying it into a register.
So if an operand's constraints allow some kind of register, it is
certain to be safe.  It need not permit all classes of registers; the
compiler knows how to copy a register into another register of the
proper class in order to make an instruction valid.
<P>

<LI>
A nonoffsettable memory reference can be reloaded by copying the
address into a register.  So if the constraint uses the letter
<SAMP>`o'</SAMP>, all memory references are taken care of.
<P>

<LI>
A constant operand can be reloaded by allocating space in memory to
hold it as preinitialized data.  Then the memory reference can be used
in place of the constant.  So if the constraint uses the letters
<SAMP>`o'</SAMP> or <SAMP>`m'</SAMP>, constant operands are not a problem.
</UL>
<P>

If the operand's predicate can recognize registers, but the constraint does
not permit them, it can make the compiler crash.  When this operand happens
to be a register, the reload pass will be stymied, because it does not know
how to copy a register temporarily into memory.
</P><P>

<A NAME="Multi-Alternative"></A>
<HR SIZE="6">
<A NAME="SEC72"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC71"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC73"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC69"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 13.6.2 Multiple Alternative Constraints </H3>
<!--docid::SEC72::-->
<P>

Sometimes a single instruction has multiple alternative sets of possible
operands.  For example, on the 68000, a logical-or instruction can combine
register or an immediate value into memory, or it can combine any kind of
operand into a register; but it cannot combine one memory location into
another.
</P><P>

These constraints are represented as multiple alternatives.  An alternative
can be described by a series of letters for each operand.  The overall
constraint for an operand is made from the letters for this operand
from the first alternative, a comma, the letters for this operand from
the second alternative, a comma, and so on until the last alternative.
Here is how it is done for fullword logical-or on the 68000:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn "iorsi3"
  [(set (match_operand:SI 0 "general_operand" "=m,d")
        (ior:SI (match_operand:SI 1 "general_operand" "%0,0")
                (match_operand:SI 2 "general_operand" "dKs,dmKs")))]
  <small>...</small>)
</pre></td></tr></table></P><P>

The first alternative has <SAMP>`m'</SAMP> (memory) for operand 0, <SAMP>`0'</SAMP> for
operand 1 (meaning it must match operand 0), and <SAMP>`dKs'</SAMP> for operand
2.  The second alternative has <SAMP>`d'</SAMP> (data register) for operand 0,
<SAMP>`0'</SAMP> for operand 1, and <SAMP>`dmKs'</SAMP> for operand 2.  The <SAMP>`='</SAMP> and
<SAMP>`%'</SAMP> in the constraints apply to all the alternatives; their meaning
is explained in the next section.
</P><P>

If all the operands fit any one alternative, the instruction is valid.
Otherwise, for each alternative, the compiler counts how many instructions
must be added to copy the operands so that that alternative applies.
The alternative requiring the least copying is chosen.  If two alternatives
need the same amount of copying, the one that comes first is chosen.
These choices can be altered with the <SAMP>`?'</SAMP> and <SAMP>`!'</SAMP> characters:
</P><P>

<DL COMPACT>
<DT><SAMP>`?'</SAMP>
<DD>Disparage slightly the alternative that the <SAMP>`?'</SAMP> appears in,
as a choice when no alternative applies exactly.  The compiler regards
this alternative as one unit more costly for each <SAMP>`?'</SAMP> that appears
in it.
<P>

<DT><SAMP>`!'</SAMP>
<DD>Disparage severely the alternative that the <SAMP>`!'</SAMP> appears in.
When operands must be copied into registers, the compiler will
never choose this alternative as the one to strive for.
</DL>
<P>

When an insn pattern has multiple alternatives in its constraints, often
the appearance of the assembler code is determined mostly by which
alternative was matched.  When this is so, the C code for writing the
assembler code can use the variable <CODE>which_alternative</CODE>, which is
the ordinal number of the alternative that was actually satisfied (0 for
the first, 1 for the second alternative, etc.).  For example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn ""
  [(set (match_operand:SI 0 "general_operand" "r,m")
        (const_int 0))]
  ""
  "*
  return (which_alternative == 0
          ? \"clrreg %0\" : \"clrmem %0\");
  ")
</pre></td></tr></table></P><P>

<A NAME="Class Preferences"></A>
<HR SIZE="6">
<A NAME="SEC73"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC72"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC74"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC69"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 13.6.3 Register Class Preferences </H3>
<!--docid::SEC73::-->
<P>

The operand constraints have another function: they enable the compiler
to decide which kind of hardware register a pseudo register is best
allocated to.  The compiler examines the constraints that apply to the
insns that use the pseudo register, looking for the machine-dependent
letters such as <SAMP>`d'</SAMP> and <SAMP>`a'</SAMP> that specify classes of registers.
The pseudo register is put in whichever class gets the most "votes".
The constraint letters <SAMP>`g'</SAMP> and <SAMP>`r'</SAMP> also vote: they vote in
favor of a general register.  The machine description says which registers
are considered general.
</P><P>

Of course, on some machines all registers are equivalent, and no register
classes are defined.  Then none of this complexity is relevant.
</P><P>

<A NAME="Modifiers"></A>
<HR SIZE="6">
<A NAME="SEC74"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC73"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC75"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC69"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 13.6.4 Constraint Modifier Characters </H3>
<!--docid::SEC74::-->
<P>

<DL COMPACT>
<DT><SAMP>`='</SAMP>
<DD>Means that this operand is write-only for this instruction: the previous
value is discarded and replaced by output data.
<P>

<DT><SAMP>`+'</SAMP>
<DD>Means that this operand is both read and written by the instruction.
<P>

When the compiler fixes up the operands to satisfy the constraints,
it needs to know which operands are inputs to the instruction and
which are outputs from it.  <SAMP>`='</SAMP> identifies an output; <SAMP>`+'</SAMP>
identifies an operand that is both input and output; all other operands
are assumed to be input only.
</P><P>

<DT><SAMP>`&#38;'</SAMP>
<DD>Means (in a particular alternative) that this operand is written
before the instruction is finished using the input operands.
Therefore, this operand may not lie in a register that is used as an
input operand or as part of any memory address.
<P>

<SAMP>`&#38;'</SAMP> applies only to the alternative in which it is written.  In
constraints with multiple alternatives, sometimes one alternative
requires <SAMP>`&#38;'</SAMP> while others do not.  See, for example, the
<SAMP>`movdf'</SAMP> insn of the 68000.
</P><P>

<SAMP>`&#38;'</SAMP> does not obviate the need to write <SAMP>`='</SAMP>.
</P><P>

<DT><SAMP>`%'</SAMP>
<DD>Declares the instruction to be commutative for this operand and the
following operand.  This means that the compiler may interchange the
two operands if that is the cheapest way to make all operands fit the
constraints.  This is often used in patterns for addition instructions
that really have only two operands: the result must go in one of the
arguments.  Here for example, is how the 68000 halfword-add
instruction is defined:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn "addhi3"
  [(set (match_operand:HI 0 "general_operand" "=m,r")
     (plus:HI (match_operand:HI 1 "general_operand" "%0,0")
              (match_operand:HI 2 "general_operand" "di,g")))]
  <small>...</small>)
</pre></td></tr></table></P><P>

Note that in previous versions of GNU CC the <SAMP>`%'</SAMP> constraint
modifier always applied to operands 1 and 2 regardless of which
operand it was written in.  The usual custom was to write it in
operand 0.  Now it must be in operand 1 if the operands to be
exchanged are 1 and 2.
</P><P>

<DT><SAMP>`#'</SAMP>
<DD>Says that all following characters, up to the next comma, are to be
ignored as a constraint.  They are significant only for choosing
register preferences.
<P>

<DT><SAMP>`*'</SAMP>
<DD>Says that the following character should be ignored when choosing
register preferences.  <SAMP>`*'</SAMP> has no effect on the meaning of the
constraint as a constraint.
<P>

Here is an example: the 68000 has an instruction to sign-extend a
halfword in a data register, and can also sign-extend a value by
copying it into an address register.  While either kind of register is
acceptable, the constraints on an address-register destination are
less strict, so it is best if register allocation makes an address
register its goal.  Therefore, <SAMP>`*'</SAMP> is used so that the <SAMP>`d'</SAMP>
constraint letter (for data register) is ignored when computing
register preferences.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn "extendhisi2"
  [(set (match_operand:SI 0 "general_operand" "=*d,a")
        (sign_extend:SI
         (match_operand:HI 1 "general_operand" "0,g")))]
  <small>...</small>)
</pre></td></tr></table></DL>
<P>

<A NAME="No Constraints"></A>
<HR SIZE="6">
<A NAME="SEC75"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC74"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC69"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 13.6.5 Not Using Constraints </H3>
<!--docid::SEC75::-->
<P>

Some machines are so clean that operand constraints are not required.  For
example, on the Vax, an operand valid in one context is valid in any other
context.  On such a machine, every operand constraint would be <SAMP>`g'</SAMP>,
excepting only operands of "load address" instructions which are
written as if they referred to a memory location's contents but actual
refer to its address.  They would have constraint <SAMP>`p'</SAMP>.
</P><P>

For such machines, instead of writing <SAMP>`g'</SAMP> and <SAMP>`p'</SAMP> for all
the constraints, you can choose to write a description with empty constraints.
Then you write <SAMP>`""'</SAMP> for the constraint in every <CODE>match_operand</CODE>.
Address operands are identified by writing an <CODE>address</CODE> expression
around the <CODE>match_operand</CODE>, not by their constraints.
</P><P>

When the machine description has just empty constraints, certain parts
of compilation are skipped, making the compiler faster.  However,
few machines actually do not need constraints; all machine descriptions
now in existence use constraints.
</P><P>

<A NAME="Standard Names"></A>
<HR SIZE="6">
<A NAME="SEC76"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC75"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC77"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC70"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.7 Standard Names for Patterns Used in Generation </H2>
<!--docid::SEC76::-->
<P>

Here is a table of the instruction names that are meaningful in the RTL
generation pass of the compiler.  Giving one of these names to an
instruction pattern tells the RTL generation pass that it can use the
pattern in to accomplish a certain task.
</P><P>

<DL COMPACT>
<DT><SAMP>`mov<VAR>m</VAR>'</SAMP>
<DD>Here <VAR>m</VAR> stands for a two-letter machine mode name, in lower case.
This instruction pattern moves data with that machine mode from operand
1 to operand 0.  For example, <SAMP>`movsi'</SAMP> moves full-word data.
<P>

If operand 0 is a <CODE>subreg</CODE> with mode <VAR>m</VAR> of a register whose
own mode is wider than <VAR>m</VAR>, the effect of this instruction is
to store the specified value in the part of the register that corresponds
to mode <VAR>m</VAR>.  The effect on the rest of the register is undefined.
</P><P>

This class of patterns is special in several ways.  First of all, each
of these names <EM>must</EM> be defined, because there is no other way
to copy a datum from one place to another.
</P><P>

Second, these patterns are not used solely in the RTL generation pass.
Even the reload pass can generate move insns to copy values from stack
slots into temporary registers.  When it does so, one of the operands is
a hard register and the other is an operand that can need to be reloaded
into a register.
</P><P>

Therefore, when given such a pair of operands, the pattern must generate
RTL which needs no reloading and needs no temporary registers--no
registers other than the operands.  For example, if you support the
pattern with a <CODE>define_expand</CODE>, then in such a case the
<CODE>define_expand</CODE> mustn't call <CODE>force_reg</CODE> or any other such
function which might generate new pseudo registers.
</P><P>

This requirement exists even for subword modes on a RISC machine where
fetching those modes from memory normally requires several insns and
some temporary registers.  Look in <TT>`spur.md'</TT> to see how the
requirement can be satisfied.
</P><P>

The variety of operands that have reloads depends on the rest of the
machine description, but typically on a RISC machine these can only be
pseudo registers that did not get hard registers, while on other
machines explicit memory references will get optional reloads.
</P><P>

The constraints on a <SAMP>`move<VAR>m</VAR>'</SAMP> must allow any hard register to
be moved to any other hard register (provided that
<CODE>HARD_REGNO_MODE_OK</CODE> permits mode <VAR>m</VAR> in both registers).
</P><P>

It is obligatory to support floating point <SAMP>`move<VAR>m</VAR>'</SAMP>
instructions into and out of any registers that can hold fixed point
values, because unions and structures (which have modes <CODE>SImode</CODE> or
<CODE>DImode</CODE>) can be in those registers and they may have floating
point members.
</P><P>

There may also be a need to support fixed point <SAMP>`move<VAR>m</VAR>'</SAMP>
instructions in and out of floating point registers.  Unfortunately, I
have forgotten why this was so, and I don't know whether it is still
true.  If <CODE>HARD_REGNO_MODE_OK</CODE> rejects fixed point values in
floating point registers, then the constraints of the fixed point
<SAMP>`move<VAR>m</VAR>'</SAMP> instructions must be designed to avoid ever trying to
reload into a floating point register.
</P><P>

<DT><SAMP>`movstrict<VAR>m</VAR>'</SAMP>
<DD>Like <SAMP>`mov<VAR>m</VAR>'</SAMP> except that if operand 0 is a <CODE>subreg</CODE>
with mode <VAR>m</VAR> of a register whose natural mode is wider,
the <SAMP>`movstrict<VAR>m</VAR>'</SAMP> instruction is guaranteed not to alter
any of the register except the part which belongs to mode <VAR>m</VAR>.
<P>

<DT><SAMP>`add<VAR>m</VAR>3'</SAMP>
<DD>Add operand 2 and operand 1, storing the result in operand 0.  All operands
must have mode <VAR>m</VAR>.  This can be used even on two-address machines, by
means of constraints requiring operands 1 and 0 to be the same location.
<P>

<DT><SAMP>`sub<VAR>m</VAR>3'</SAMP>, <SAMP>`mul<VAR>m</VAR>3'</SAMP>, <SAMP>`umul<VAR>m</VAR>3'</SAMP>, <SAMP>`div<VAR>m</VAR>3'</SAMP>, <SAMP>`udiv<VAR>m</VAR>3'</SAMP>, <SAMP>`mod<VAR>m</VAR>3'</SAMP>, <SAMP>`umod<VAR>m</VAR>3'</SAMP>, <SAMP>`and<VAR>m</VAR>3'</SAMP>, <SAMP>`ior<VAR>m</VAR>3'</SAMP>, <SAMP>`xor<VAR>m</VAR>3'</SAMP>
<DD>Similar, for other arithmetic operations.
<P>

There are special considerations for register classes for logical-and
instructions, affecting also the macro <CODE>PREFERRED_RELOAD_CLASS</CODE>.
They apply not only to the patterns with these standard names, but to
any patterns that will match such an instruction.  See section <A HREF="gcc.html#SEC86">14.4 Register Classes</A>.
</P><P>

<DT><SAMP>`mulhisi3'</SAMP>
<DD>Multiply operands 1 and 2, which have mode <CODE>HImode</CODE>, and store
a <CODE>SImode</CODE> product in operand 0.
<P>

<DT><SAMP>`mulqihi3'</SAMP>, <SAMP>`mulsidi3'</SAMP>
<DD>Similar widening-multiplication instructions of other widths.
<P>

<DT><SAMP>`umulqihi3'</SAMP>, <SAMP>`umulhisi3'</SAMP>, <SAMP>`umulsidi3'</SAMP>
<DD>Similar widening-multiplication instructions that do unsigned
multiplication.
<P>

<DT><SAMP>`divmod<VAR>m</VAR>4'</SAMP>
<DD>Signed division that produces both a quotient and a remainder.
Operand 1 is divided by operand 2 to produce a quotient stored
in operand 0 and a remainder stored in operand 3.
<P>

<DT><SAMP>`udivmod<VAR>m</VAR>4'</SAMP>
<DD>Similar, but does unsigned division.
<P>

<DT><SAMP>`ashl<VAR>m</VAR>3'</SAMP>
<DD>Arithmetic-shift operand 1 left by a number of bits specified by
operand 2, and store the result in operand 0.  Operand 2 has
mode <CODE>SImode</CODE>, not mode <VAR>m</VAR>.
<P>

<DT><SAMP>`ashr<VAR>m</VAR>3'</SAMP>, <SAMP>`lshl<VAR>m</VAR>3'</SAMP>, <SAMP>`lshr<VAR>m</VAR>3'</SAMP>, <SAMP>`rotl<VAR>m</VAR>3'</SAMP>, <SAMP>`rotr<VAR>m</VAR>3'</SAMP>
<DD>Other shift and rotate instructions.
<P>

Logical and arithmetic left shift are the same.  Machines that do not
allow negative shift counts often have only one instruction for
shifting left.  On such machines, you should define a pattern named
<SAMP>`ashl<VAR>m</VAR>3'</SAMP> and leave <SAMP>`lshl<VAR>m</VAR>3'</SAMP> undefined.
</P><P>

There are special considerations for register classes for shift
instructions, affecting also the macro <CODE>PREFERRED_RELOAD_CLASS</CODE>.
They apply not only to the patterns with these standard names, but to
any patterns that will match such an instruction.  See section <A HREF="gcc.html#SEC86">14.4 Register Classes</A>.
</P><P>

<DT><SAMP>`neg<VAR>m</VAR>2'</SAMP>
<DD>Negate operand 1 and store the result in operand 0.
<P>

<DT><SAMP>`abs<VAR>m</VAR>2'</SAMP>
<DD>Store the absolute value of operand 1 into operand 0.
<P>

<DT><SAMP>`sqrt<VAR>m</VAR>2'</SAMP>
<DD>Store the square root of operand 1 into operand 0.
<P>

<DT><SAMP>`ffs<VAR>m</VAR>2'</SAMP>
<DD>Store into operand 0 one plus the index of the least significant 1-bit
of operand 1.  If operand 1 is zero, store zero.  <VAR>m</VAR> is the mode
of operand 0; operand 1's mode is specified by the instruction
pattern, and the compiler will convert the operand to that mode before
generating the instruction.
<P>

<DT><SAMP>`one_cmpl<VAR>m</VAR>2'</SAMP>
<DD>Store the bitwise-complement of operand 1 into operand 0.
<P>

<DT><SAMP>`cmp<VAR>m</VAR>'</SAMP>
<DD>Compare operand 0 and operand 1, and set the condition codes.
The RTL pattern should look like this:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (cc0) (compare (match_operand:<VAR>m</VAR> 0 <small>...</small>)
                    (match_operand:<VAR>m</VAR> 1 <small>...</small>)))
</pre></td></tr></table></P><P>

Each such definition in the machine description, for integer mode
<VAR>m</VAR>, must have a corresponding <SAMP>`tst<VAR>m</VAR>'</SAMP> pattern, because
optimization can simplify the compare into a test when operand 1 is
zero.
</P><P>

<DT><SAMP>`tst<VAR>m</VAR>'</SAMP>
<DD>Compare operand 0 against zero, and set the condition codes.
The RTL pattern should look like this:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (cc0) (match_operand:<VAR>m</VAR> 0 <small>...</small>))
</pre></td></tr></table></P><P>

<DT><SAMP>`movstr<VAR>m</VAR>'</SAMP>
<DD>Block move instruction.  The addresses of the destination and source
strings are the first two operands, and both are in mode <CODE>Pmode</CODE>.
The number of bytes to move is the third operand, in mode <VAR>m</VAR>.
The fourth operand is the known shared alignment of the source and
destination, in the form of a <CODE>const_int</CODE> rtx.
<P>

<DT><SAMP>`cmpstr<VAR>m</VAR>'</SAMP>
<DD>Block compare instruction, with operands like <SAMP>`movstr<VAR>m</VAR>'</SAMP>
except that the two memory blocks are compared byte by byte
in lexicographic order.  The effect of the instruction is to set
the condition codes.
<P>

<DT><SAMP>`float<VAR>m</VAR><VAR>n</VAR>2'</SAMP>
<DD>Convert signed integer operand 1 (valid for fixed point mode <VAR>m</VAR>) to
floating point mode <VAR>n</VAR> and store in operand 0 (which has mode
<VAR>n</VAR>).
<P>

<DT><SAMP>`floatuns<VAR>m</VAR><VAR>n</VAR>2'</SAMP>
<DD>Convert unsigned integer operand 1 (valid for fixed point mode <VAR>m</VAR>)
to floating point mode <VAR>n</VAR> and store in operand 0 (which has mode
<VAR>n</VAR>).
<P>

<DT><SAMP>`fix<VAR>m</VAR><VAR>n</VAR>2'</SAMP>
<DD>Convert operand 1 (valid for floating point mode <VAR>m</VAR>) to fixed
point mode <VAR>n</VAR> as a signed number and store in operand 0 (which
has mode <VAR>n</VAR>).  This instruction's result is defined only when
the value of operand 1 is an integer.
<P>

<DT><SAMP>`fixuns<VAR>m</VAR><VAR>n</VAR>2'</SAMP>
<DD>Convert operand 1 (valid for floating point mode <VAR>m</VAR>) to fixed
point mode <VAR>n</VAR> as an unsigned number and store in operand 0 (which
has mode <VAR>n</VAR>).  This instruction's result is defined only when the
value of operand 1 is an integer.
<P>

<DT><SAMP>`ftrunc<VAR>m</VAR>2'</SAMP>
<DD>Convert operand 1 (valid for floating point mode <VAR>m</VAR>) to an
integer value, still represented in floating point mode <VAR>m</VAR>, and
store it in operand 0 (valid for floating point mode <VAR>m</VAR>).
<P>

<DT><SAMP>`fix_trunc<VAR>m</VAR><VAR>n</VAR>2'</SAMP>
<DD>Like <SAMP>`fix<VAR>m</VAR><VAR>n</VAR>2'</SAMP> but works for any floating point value
of mode <VAR>m</VAR> by converting the value to an integer.
<P>

<DT><SAMP>`fixuns_trunc<VAR>m</VAR><VAR>n</VAR>2'</SAMP>
<DD>Like <SAMP>`fixuns<VAR>m</VAR><VAR>n</VAR>2'</SAMP> but works for any floating point
value of mode <VAR>m</VAR> by converting the value to an integer.
<P>

<DT><SAMP>`trunc<VAR>m</VAR><VAR>n</VAR>'</SAMP>
<DD>Truncate operand 1 (valid for mode <VAR>m</VAR>) to mode <VAR>n</VAR> and
store in operand 0 (which has mode <VAR>n</VAR>).  Both modes must be fixed
point or both floating point.
<P>

<DT><SAMP>`extend<VAR>m</VAR><VAR>n</VAR>'</SAMP>
<DD>Sign-extend operand 1 (valid for mode <VAR>m</VAR>) to mode <VAR>n</VAR> and
store in operand 0 (which has mode <VAR>n</VAR>).  Both modes must be fixed
point or both floating point.
<P>

<DT><SAMP>`zero_extend<VAR>m</VAR><VAR>n</VAR>'</SAMP>
<DD>Zero-extend operand 1 (valid for mode <VAR>m</VAR>) to mode <VAR>n</VAR> and
store in operand 0 (which has mode <VAR>n</VAR>).  Both modes must be fixed
point.
<P>

<DT><SAMP>`extv'</SAMP>
<DD>Extract a bit-field from operand 1 (a register or memory operand),
where operand 2 specifies the width in bits and operand 3 the starting
bit, and store it in operand 0.  Operand 0 must have <CODE>SImode</CODE>.
Operand 1 may have mode <CODE>QImode</CODE> or <CODE>SImode</CODE>; often
<CODE>SImode</CODE> is allowed only for registers.  Operands 2 and 3 must be
valid for <CODE>SImode</CODE>.
<P>

The RTL generation pass generates this instruction only with constants
for operands 2 and 3.
</P><P>

The bit-field value is sign-extended to a full word integer
before it is stored in operand 0.
</P><P>

<DT><SAMP>`extzv'</SAMP>
<DD>Like <SAMP>`extv'</SAMP> except that the bit-field value is zero-extended.
<P>

<DT><SAMP>`insv'</SAMP>
<DD>Store operand 3 (which must be valid for <CODE>SImode</CODE>) into a
bit-field in operand 0, where operand 1 specifies the width in bits
and operand 2 the starting bit.  Operand 0 may have mode <CODE>QImode</CODE>
or <CODE>SImode</CODE>; often <CODE>SImode</CODE> is allowed only for registers.
Operands 1 and 2 must be valid for <CODE>SImode</CODE>.
<P>

The RTL generation pass generates this instruction only with constants
for operands 1 and 2.
</P><P>

<DT><SAMP>`s<VAR>cond</VAR>'</SAMP>
<DD>Store zero or nonzero in the operand according to the condition codes.
Value stored is nonzero iff the condition <VAR>cond</VAR> is true.
<VAR>cond</VAR> is the name of a comparison operation expression code, such
as <CODE>eq</CODE>, <CODE>lt</CODE> or <CODE>leu</CODE>.
<P>

You specify the mode that the operand must have when you write the
<CODE>match_operand</CODE> expression.  The compiler automatically sees
which mode you have used and supplies an operand of that mode.
</P><P>

The value stored for a true condition must have 1 as its low bit, or
else must be negative.  Otherwise the instruction is not suitable and
must be omitted from the machine description.  You must tell the
compiler exactly which value is stored by defining the macro
<CODE>STORE_FLAG_VALUE</CODE>.
</P><P>

<DT><SAMP>`b<VAR>cond</VAR>'</SAMP>
<DD>Conditional branch instruction.  Operand 0 is a <CODE>label_ref</CODE>
that refers to the label to jump to.  Jump if the condition codes
meet condition <VAR>cond</VAR>.
<P>

<DT><SAMP>`call'</SAMP>
<DD>Subroutine call instruction returning no value.  Operand 0 is the
function to call; operand 1 is the number of bytes of arguments pushed
(in mode <CODE>SImode</CODE>, except it is normally a <CODE>const_int</CODE>);
operand 2 is the number of registers used as operands.
<P>

On most machines, operand 2 is not actually stored into the RTL
pattern.  It is supplied for the sake of some RISC machines which need
to put this information into the assembler code; they can put it in
the RTL instead of operand 1.
</P><P>

Operand 0 should be a <CODE>mem</CODE> RTX whose address is the address of
the function.
</P><P>

<DT><SAMP>`call_value'</SAMP>
<DD>Subroutine call instruction returning a value.  Operand 0 is the hard
register in which the value is returned.  There are three more
operands, the same as the three operands of the <SAMP>`call'</SAMP>
instruction (but with numbers increased by one).
<P>

Subroutines that return <CODE>BLKmode</CODE> objects use the <SAMP>`call'</SAMP>
insn.
</P><P>

<DT><SAMP>`return'</SAMP>
<DD>Subroutine return instruction.  This instruction pattern name should be
defined only if a single instruction can do all the work of returning
from a function.
<P>

<DT><SAMP>`nop'</SAMP>
<DD>No-op instruction.  This instruction pattern name should always be defined
to output a no-op in assembler code.  <CODE>(const_int 0)</CODE> will do as an
RTL pattern.
<P>

<DT><SAMP>`casesi'</SAMP>
<DD>Instruction to jump through a dispatch table, including bounds checking.
This instruction takes five operands:
<P>

<OL>
<LI>
The index to dispatch on, which has mode <CODE>SImode</CODE>.
<P>

<LI>
The lower bound for indices in the table, an integer constant.
<P>

<LI>
The total range of indices in the table--the largest index
minus the smallest one (both inclusive).
<P>

<LI>
A label to jump to if the index has a value outside the bounds.
(If the machine-description macro <CODE>CASE_DROPS_THROUGH</CODE> is defined,
then an out-of-bounds index drops through to the code following
the jump table instead of jumping to this label.  In that case,
this label is not actually used by the <SAMP>`casesi'</SAMP> instruction,
but it is always provided as an operand.)
<P>

<LI>
A label that precedes the table itself.
</OL>
<P>

The table is a <CODE>addr_vec</CODE> or <CODE>addr_diff_vec</CODE> inside of a
<CODE>jump_insn</CODE>.  The number of elements in the table is one plus the
difference between the upper bound and the lower bound.
</P><P>

<DT><SAMP>`tablejump'</SAMP>
<DD>Instruction to jump to a variable address.  This is a low-level
capability which can be used to implement a dispatch table when there
is no <SAMP>`casesi'</SAMP> pattern.
<P>

This pattern requires two operands: the address or offset, and a label
which should immediately precede the jump table.  If the macro
<CODE>CASE_VECTOR_PC_RELATIVE</CODE> is defined then the first operand is an
offset that counts from the address of the table; otherwise, it is an
absolute address to jump to.
</P><P>

The <SAMP>`tablejump'</SAMP> insn is always the last insn before the jump
table it uses.  Its assembler code normally has no need to use the
second operand, but you should incorporate it in the RTL pattern so
that the jump optimizer will not delete the table as unreachable code.
</DL>
<P>

<A NAME="Pattern Ordering"></A>
<HR SIZE="6">
<A NAME="SEC77"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC76"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC78"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.8 When the Order of Patterns Matters </H2>
<!--docid::SEC77::-->
<P>

Sometimes an insn can match more than one instruction pattern.  Then the
pattern that appears first in the machine description is the one used.
Therefore, more specific patterns (patterns that will match fewer things)
and faster instructions (those that will produce better code when they
do match) should usually go first in the description.
</P><P>

In some cases the effect of ordering the patterns can be used to hide
a pattern when it is not valid.  For example, the 68000 has an
instruction for converting a fullword to floating point and another
for converting a byte to floating point.  An instruction converting
an integer to floating point could match either one.  We put the
pattern to convert the fullword first to make sure that one will
be used rather than the other.  (Otherwise a large integer might
be generated as a single-byte immediate quantity, which would not work.)
Instead of using this pattern ordering it would be possible to make the
pattern for convert-a-byte smart enough to deal properly with any
constant value.
</P><P>

<A NAME="Dependent Patterns"></A>
<HR SIZE="6">
<A NAME="SEC78"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC77"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC79"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.9 Interdependence of Patterns </H2>
<!--docid::SEC78::-->
<P>

Every machine description must have a named pattern for each of the
conditional branch names <SAMP>`b<VAR>cond</VAR>'</SAMP>.  The recognition template
must always have the form
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (pc)
     (if_then_else (<VAR>cond</VAR> (cc0) (const_int 0))
                   (label_ref (match_operand 0 "" ""))
                   (pc)))
</pre></td></tr></table></P><P>

In addition, every machine description must have an anonymous pattern
for each of the possible reverse-conditional branches.  These patterns
look like
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (pc)
     (if_then_else (<VAR>cond</VAR> (cc0) (const_int 0))
                   (pc)
                   (label_ref (match_operand 0 "" ""))))
</pre></td></tr></table></P><P>

They are necessary because jump optimization can turn direct-conditional
branches into reverse-conditional branches.
</P><P>

The compiler does more with RTL than just create it from patterns
and recognize the patterns: it can perform arithmetic expression codes
when constant values for their operands can be determined.  As a result,
sometimes having one pattern can require other patterns.  For example, the
Vax has no `and' instruction, but it has `and not' instructions.  Here
is the definition of one of them:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn "andcbsi2"
  [(set (match_operand:SI 0 "general_operand" "")
        (and:SI (match_dup 0)
                (not:SI (match_operand:SI
                          1 "general_operand" ""))))]
  ""
  "bicl2 %1,%0")
</pre></td></tr></table></P><P>

If operand 1 is an explicit integer constant, an instruction constructed
using that pattern can be simplified into an `and' like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (reg:SI 41)
     (and:SI (reg:SI 41)
             (const_int 0xffff7fff)))
</pre></td></tr></table></P><P>

(where the integer constant is the one's complement of what
appeared in the original instruction).
</P><P>

To avoid a fatal error, the compiler must have a pattern that recognizes
such an instruction.  Here is what is used:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn ""
  [(set (match_operand:SI 0 "general_operand" "")
        (and:SI (match_dup 0)
                (match_operand:SI 1 "general_operand" "")))]
  "GET_CODE (operands[1]) == CONST_INT"
  "*
{ operands[1]
    = gen_rtx (CONST_INT, VOIDmode, ~INTVAL (operands[1]));
  return \"bicl2 %1,%0\";
}")
</pre></td></tr></table></P><P>

Whereas a pattern to match a general `and' instruction is impossible to
support on the Vax, this pattern is possible because it matches only a
constant second argument: a special case that can be output as an `and not'
instruction.
</P><P>

A "compare" instruction whose RTL looks like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (cc0) (compare <VAR>operand</VAR> (const_int 0)))
</pre></td></tr></table></P><P>

may be simplified by optimization into a "test" like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (cc0) <VAR>operand</VAR>)
</pre></td></tr></table></P><P>

So in the machine description, each "compare" pattern for an integer
mode must have a corresponding "test" pattern that will match the
result of such simplification.
</P><P>

In some cases machines support instructions identical except for the
machine mode of one or more operands.  For example, there may be
"sign-extend halfword" and "sign-extend byte" instructions whose
patterns are
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (match_operand:SI 0 <small>...</small>)
     (extend:SI (match_operand:HI 1 <small>...</small>)))

(set (match_operand:SI 0 <small>...</small>)
     (extend:SI (match_operand:QI 1 <small>...</small>)))
</pre></td></tr></table></P><P>

Constant integers do not specify a machine mode, so an instruction to
extend a constant value could match either pattern.  The pattern it
actually will match is the one that appears first in the file.  For correct
results, this must be the one for the widest possible mode (<CODE>HImode</CODE>,
here).  If the pattern matches the <CODE>QImode</CODE> instruction, the results
will be incorrect if the constant value does not actually fit that mode.
</P><P>

Such instructions to extend constants are rarely generated because they are
optimized away, but they do occasionally happen in nonoptimized
compilations.
</P><P>

When an instruction has the constraint letter <SAMP>`o'</SAMP>, the reload
pass may generate instructions which copy a nonoffsettable address into
an index register.  The idea is that the register can be used as a
replacement offsettable address.  In order for these generated
instructions to work, there must be patterns to copy any kind of valid
address into a register.
</P><P>

Most older machine designs have "load address" instructions which do
just what is needed here.  Some RISC machines do not advertise such
instructions, but the possible addresses on these machines are very
limited, so it is easy to fake them.
</P><P>

Auto-increment and auto-decrement addresses are an exception; there
need not be an instruction that can copy such an address into a
register, because reload handles these cases in a different manner.
</P><P>

<A NAME="Jump Patterns"></A>
<HR SIZE="6">
<A NAME="SEC79"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC78"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC80"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.10 Defining Jump Instruction Patterns </H2>
<!--docid::SEC79::-->
<P>

GNU CC assumes that the machine has a condition code.  A comparison insn
sets the condition code, recording the results of both signed and unsigned
comparison of the given operands.  A separate branch insn tests the
condition code and branches or not according its value.  The branch insns
come in distinct signed and unsigned flavors.  Many common machines, such
as the Vax, the 68000 and the 32000, work this way.
</P><P>

Some machines have distinct signed and unsigned compare instructions, and
only one set of conditional branch instructions.  The easiest way to handle
these machines is to treat them just like the others until the final stage
where assembly code is written.  At this time, when outputting code for the
compare instruction, peek ahead at the following branch using
<CODE>NEXT_INSN (insn)</CODE>.  (The variable <CODE>insn</CODE> refers to the insn
being output, in the output-writing code in an instruction pattern.)  If
the RTL says that is an unsigned branch, output an unsigned compare;
otherwise output a signed compare.  When the branch itself is output, you
can treat signed and unsigned branches identically.
</P><P>

The reason you can do this is that GNU CC always generates a pair of
consecutive RTL insns, one to set the condition code and one to test it,
and keeps the pair inviolate until the end.
</P><P>

To go with this technique, you must define the machine-description macro
<CODE>NOTICE_UPDATE_CC</CODE> to do <CODE>CC_STATUS_INIT</CODE>; in other words, no
compare instruction is superfluous.
</P><P>

Some machines have compare-and-branch instructions and no condition code.
A similar technique works for them.  When it is time to "output" a
compare instruction, record its operands in two static variables.  When
outputting the branch-on-condition-code instruction that follows, actually
output a compare-and-branch instruction that uses the remembered operands.
</P><P>

It also works to define patterns for compare-and-branch instructions.
In optimizing compilation, the pair of compare and branch instructions
will be combined according to these patterns.  But this does not happen
if optimization is not requested.  So you must use one of the solutions
above in addition to any special patterns you define.
</P><P>

<A NAME="Peephole Definitions"></A>
<HR SIZE="6">
<A NAME="SEC80"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC79"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC81"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.11 Defining Machine-Specific Peephole Optimizers </H2>
<!--docid::SEC80::-->
<P>

In addition to instruction patterns the <TT>`md'</TT> file may contain
definitions of machine-specific peephole optimizations.
</P><P>

The combiner does not notice certain peephole optimizations when the data
flow in the program does not suggest that it should try them.  For example,
sometimes two consecutive insns related in purpose can be combined even
though the second one does not appear to use a register computed in the
first one.  A machine-specific peephole optimizer can detect such
opportunities.
</P><P>

A definition looks like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_peephole
  [<VAR>insn-pattern-1</VAR>
   <VAR>insn-pattern-2</VAR>
   <small>...</small>]
  "<VAR>condition</VAR>"
  "<VAR>template</VAR>"
  "<VAR>machine-specific info</VAR>")
</pre></td></tr></table></P><P>

The last string operand may be omitted if you are not using any
machine-specific information in this machine description.  If present,
it must obey the same rules as in a <CODE>define_insn</CODE>.
</P><P>

In this skeleton, <VAR>insn-pattern-1</VAR> and so on are patterns to match
consecutive insns.  The optimization applies to a sequence of insns when
<VAR>insn-pattern-1</VAR> matches the first one, <VAR>insn-pattern-2</VAR> matches
the next, and so on.</P><P>

Each of the insns matched by a peephole must also match a
<CODE>define_insn</CODE>.  Peepholes are checked only at the last stage just
before code generation, and only optionally.  Therefore, any insn which
would match a peephole but no <CODE>define_insn</CODE> will cause a crash in code
generation in an unoptimized compilation, or at various optimization
stages.
</P><P>

The operands of the insns are matched with <CODE>match_operands</CODE> and
<CODE>match_dup</CODE>, as usual.  What is not usual is that the operand numbers
apply to all the insn patterns in the definition.  So, you can check for
identical operands in two insns by using <CODE>match_operand</CODE> in one insn
and <CODE>match_dup</CODE> in the other.
</P><P>

The operand constraints used in <CODE>match_operand</CODE> patterns do not have
any direct effect on the applicability of the peephole, but they will
be validated afterward, so make sure your constraints are general enough
to apply whenever the peephole matches.  If the peephole matches
but the constraints are not satisfied, the compiler will crash.
</P><P>

It is safe to omit constraints in all the operands of the peephole; or
you can write constraints which serve as a double-check on the criteria
previously tested.
</P><P>

Once a sequence of insns matches the patterns, the <VAR>condition</VAR> is
checked.  This is a C expression which makes the final decision whether to
perform the optimization (we do so if the expression is nonzero).  If
<VAR>condition</VAR> is omitted (in other words, the string is empty) then the
optimization is applied to every sequence of insns that matches the
patterns.
</P><P>

The defined peephole optimizations are applied after register allocation
is complete.  Therefore, the peephole definition can check which
operands have ended up in which kinds of registers, just by looking at
the operands.
</P><P>

The way to refer to the operands in <VAR>condition</VAR> is to write
<CODE>operands[<VAR>i</VAR>]</CODE> for operand number <VAR>i</VAR> (as matched by
<CODE>(match_operand <VAR>i</VAR> <small>...</small>)</CODE>).  Use the variable <CODE>insn</CODE> to
refer to the last of the insns being matched; use <CODE>PREV_INSN</CODE> to find
the preceding insns (but be careful to skip over any <CODE>note</CODE> insns that
intervene).</P><P>

When optimizing computations with intermediate results, you can use
<VAR>condition</VAR> to match only when the intermediate results are not used
elsewhere.  Use the C expression <CODE>dead_or_set_p (<VAR>insn</VAR>,
<VAR>op</VAR>)</CODE>, where <VAR>insn</VAR> is the insn in which you expect the value to
be used for the last time (from the value of <CODE>insn</CODE>, together with use
of <CODE>PREV_INSN</CODE>), and <VAR>op</VAR> is the intermediate value (from
<CODE>operands[<VAR>i</VAR>]</CODE>).</P><P>

Applying the optimization means replacing the sequence of insns with one
new insn.  The <VAR>template</VAR> controls ultimate output of assembler code
for this combined insn.  It works exactly like the template of a
<CODE>define_insn</CODE>.  Operand numbers in this template are the same ones
used in matching the original sequence of insns.
</P><P>

The result of a defined peephole optimizer does not need to match any of
the insn patterns in the machine description; it does not even have an
opportunity to match them.  The peephole optimizer definition itself serves
as the insn pattern to control how the insn is output.
</P><P>

Defined peephole optimizers are run as assembler code is being output,
so the insns they produce are never combined or rearranged in any way.
</P><P>

Here is an example, taken from the 68000 machine description:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_peephole
  [(set (reg:SI 15) (plus:SI (reg:SI 15) (const_int 4)))
   (set (match_operand:DF 0 "register_operand" "f")
        (match_operand:DF 1 "register_operand" "ad"))]
  "FP_REG_P (operands[0]) &&#38; ! FP_REG_P (operands[1])"
  "*
{
  rtx xoperands[2];
  xoperands[1] = gen_rtx (REG, SImode, REGNO (operands[1]) + 1);
#ifdef MOTOROLA
  output_asm_insn (\"move.l %1,(sp)\", xoperands);
  output_asm_insn (\"move.l %1,-(sp)\", operands);
  return \"fmove.d (sp)+,%0\";
#else
  output_asm_insn (\"movel %1,sp@\", xoperands);
  output_asm_insn (\"movel %1,sp@-\", operands);
  return \"fmoved sp@+,%0\";
#endif
}
")
</pre></td></tr></table></P><P>

The effect of this optimization is to change
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>jbsr _foobar
addql #4,sp
movel d1,sp@-
movel d0,sp@-
fmoved sp@+,fp0
</pre></td></tr></table></P><P>

into
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>jbsr _foobar
movel d1,sp@
movel d0,sp@-
fmoved sp@+,fp0
</pre></td></tr></table></P><P>

<VAR>insn-pattern-1</VAR> and so on look <EM>almost</EM> like the second
operand of <CODE>define_insn</CODE>.  There is one important difference: the
second operand of <CODE>define_insn</CODE> consists of one or more RTX's
enclosed in square brackets.  Usually, there is only one: then the same
action can be written as an element of a <CODE>define_peephole</CODE>.  But
when there are multiple actions in a <CODE>define_insn</CODE>, they are
implicitly enclosed in a <CODE>parallel</CODE>.  Then you must explicitly
write the <CODE>parallel</CODE>, and the square brackets within it, in the
<CODE>define_peephole</CODE>.  Thus, if an insn pattern looks like this,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_insn "divmodsi4"
  [(set (match_operand:SI 0 "general_operand" "=d")
        (div:SI (match_operand:SI 1 "general_operand" "0")
                (match_operand:SI 2 "general_operand" "dmsK")))
   (set (match_operand:SI 3 "general_operand" "=d")
        (mod:SI (match_dup 1) (match_dup 2)))]
  "TARGET_68020"
  "divsl%.l %2,%3:%0")
</pre></td></tr></table></P><P>

then the way to mention this insn in a peephole is as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_peephole
  [<small>...</small>
   (parallel
    [(set (match_operand:SI 0 "general_operand" "=d")
          (div:SI (match_operand:SI 1 "general_operand" "0")
                  (match_operand:SI 2 "general_operand" "dmsK")))
     (set (match_operand:SI 3 "general_operand" "=d")
          (mod:SI (match_dup 1) (match_dup 2)))])
   <small>...</small>]
  <small>...</small>)
</pre></td></tr></table></P><P>

<A NAME="Expander Definitions"></A>
<HR SIZE="6">
<A NAME="SEC81"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC80"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 13.12 Defining RTL Sequences for Code Generation </H2>
<!--docid::SEC81::-->
<P>

On some target machines, some standard pattern names for RTL generation
cannot be handled with single insn, but a sequence of RTL insns can
represent them.  For these target machines, you can write a
<CODE>define_expand</CODE> to specify how to generate the sequence of RTL.
</P><P>

A <CODE>define_expand</CODE> is an RTL expression that looks almost like a
<CODE>define_insn</CODE>; but, unlike the latter, a <CODE>define_expand</CODE> is used
only for RTL generation and it can produce more than one RTL insn.
</P><P>

A <CODE>define_expand</CODE> RTX has four operands:
</P><P>

<UL>
<LI>
The name.  Each <CODE>define_expand</CODE> must have a name, since the only
use for it is to refer to it by name.
<P>

<LI>
The RTL template.  This is just like the RTL template for a
<CODE>define_peephole</CODE> in that it is a vector of RTL expressions
each being one insn.
<P>

<LI>
The condition, a string containing a C expression.  This expression is
used to express how the availability of this pattern depends on
subclasses of target machine, selected by command-line options when
GNU CC is run.  This is just like the condition of a
<CODE>define_insn</CODE> that has a standard name.
<P>

<LI>
The preparation statements, a string containing zero or more C
statements which are to be executed before RTL code is generated from
the RTL template.
<P>

Usually these statements prepare temporary registers for use as
internal operands in the RTL template, but they can also generate RTL
insns directly by calling routines such as <CODE>emit_insn</CODE>, etc.
Any such insns precede the ones that come from the RTL template.
</UL>
<P>

Every RTL insn emitted by a <CODE>define_expand</CODE> must match some
<CODE>define_insn</CODE> in the machine description.  Otherwise, the compiler
will crash when trying to generate code for the insn or trying to optimize
it.
</P><P>

The RTL template, in addition to controlling generation of RTL insns,
also describes the operands that need to be specified when this pattern
is used.  In particular, it gives a predicate for each operand.
</P><P>

A true operand, which need to be specified in order to generate RTL from
the pattern, should be described with a <CODE>match_operand</CODE> in its first
occurrence in the RTL template.  This enters information on the operand's
predicate into the tables that record such things.  GNU CC uses the
information to preload the operand into a register if that is required for
valid RTL code.  If the operand is referred to more than once, subsequent
references should use <CODE>match_dup</CODE>.
</P><P>

The RTL template may also refer to internal "operands" which are
temporary registers or labels used only within the sequence made by the
<CODE>define_expand</CODE>.  Internal operands are substituted into the RTL
template with <CODE>match_dup</CODE>, never with <CODE>match_operand</CODE>.  The
values of the internal operands are not passed in as arguments by the
compiler when it requests use of this pattern.  Instead, they are computed
within the pattern, in the preparation statements.  These statements
compute the values and store them into the appropriate elements of
<CODE>operands</CODE> so that <CODE>match_dup</CODE> can find them.
</P><P>

There are two special macros defined for use in the preparation statements:
<CODE>DONE</CODE> and <CODE>FAIL</CODE>.  Use them with a following semicolon,
as a statement.
</P><P>

<DL COMPACT>
<DT><CODE>DONE</CODE>
<DD>Use the <CODE>DONE</CODE> macro to end RTL generation for the pattern.  The
only RTL insns resulting from the pattern on this occasion will be
those already emitted by explicit calls to <CODE>emit_insn</CODE> within the
preparation statements; the RTL template will not be generated.
<P>

<DT><CODE>FAIL</CODE>
<DD>Make the pattern fail on this occasion.  When a pattern fails, it means
that the pattern was not truly available.  The calling routines in the
compiler will try other strategies for code generation using other patterns.
<P>

Failure is currently supported only for binary operations (addition,
multiplication, shifting, etc.).
</P><P>

Do not emit any insns explicitly with <CODE>emit_insn</CODE> before failing.
</DL>
<P>

Here is an example, the definition of left-shift for the SPUR chip:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_expand "ashlsi3"
  [(set (match_operand:SI 0 "register_operand" "")
        (ashift:SI
          (match_operand:SI 1 "register_operand" "")
          (match_operand:SI 2 "nonmemory_operand" "")))]
  ""
  "
{
  if (GET_CODE (operands[2]) != CONST_INT
      || (unsigned) INTVAL (operands[2]) &#62; 3)
    FAIL;
}")
</pre></td></tr></table></P><P>

This example uses <CODE>define_expand</CODE> so that it can generate an RTL insn
for shifting when the shift-count is in the supported range of 0 to 3 but
fail in other cases where machine insns aren't available.  When it fails,
the compiler tries another strategy using different patterns (such as, a
library call).
</P><P>

If the compiler were able to handle nontrivial condition-strings in
patterns with names, then it would be possible to use a
<CODE>define_insn</CODE> in that case.  Here is another case (zero-extension
on the 68000) which makes more use of the power of <CODE>define_expand</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_expand "zero_extendhisi2"
  [(set (match_operand:SI 0 "general_operand" "")
        (const_int 0))
   (set (strict_low_part 
          (subreg:HI
            (match_dup 0)
            0))
        (match_operand:HI 1 "general_operand" ""))]
  ""
  "operands[1] = make_safe_from (operands[1], operands[0]);")
</pre></td></tr></table></P><P>

Here two RTL insns are generated, one to clear the entire output operand
and the other to copy the input operand into its low half.  This sequence
is incorrect if the input operand refers to [the old value of] the output
operand, so the preparation statement makes sure this isn't so.  The
function <CODE>make_safe_from</CODE> copies the <CODE>operands[1]</CODE> into a
temporary register if it refers to <CODE>operands[0]</CODE>.  It does this
by emitting another RTL insn.
</P><P>

Finally, a third example shows the use of an internal operand.
Zero-extension on the SPUR chip is done by <CODE>and</CODE>-ing the result
against a halfword mask.  But this mask cannot be represented by a
<CODE>const_int</CODE> because the constant value is too large to be legitimate
on this machine.  So it must be copied into a register with
<CODE>force_reg</CODE> and then the register used in the <CODE>and</CODE>.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define_expand "zero_extendhisi2"
  [(set (match_operand:SI 0 "register_operand" "")
        (and:SI (subreg:SI
                  (match_operand:HI 1 "register_operand" "")
                  0)
                (match_dup 2)))]
  ""
  "operands[2]
     = force_reg (SImode, gen_rtx (CONST_INT,
                                   VOIDmode, 65535)); ")
</pre></td></tr></table></P><P>

<STRONG>Note:</STRONG> If the <CODE>define_expand</CODE> is used to serve a standard
binary or unary arithmetic operation, then the last insn it generates
must not be a <CODE>code_label</CODE>, <CODE>barrier</CODE> or <CODE>note</CODE>.  It must
be an <CODE>insn</CODE>, <CODE>jump_insn</CODE> or <CODE>call_insn</CODE>.
</P><P>

<A NAME="Machine Macros"></A>
<HR SIZE="6">
<A NAME="SEC82"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC81"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC83"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC64"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 14. Machine Description Macros </H1>
<!--docid::SEC82::-->
<P>

The other half of the machine description is a C header file conventionally
given the name <TT>`tm-<VAR>machine</VAR>.h'</TT>.  The file <TT>`tm.h'</TT> should be a
link to it.  The header file <TT>`config.h'</TT> includes <TT>`tm.h'</TT> and most
compiler source files include <TT>`config.h'</TT>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC83">14.1 Run-time Target Specification</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining <SAMP>`-m'</SAMP> options like <SAMP>`-m68000'</SAMP> and <SAMP>`-m68020'</SAMP>.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC84">14.2 Storage Layout</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining sizes and alignments of data types.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC85">14.3 Register Usage</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Naming and describing the hardware registers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC86">14.4 Register Classes</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining the classes of hardware registers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC87">14.5 Describing Stack Layout</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining which way the stack grows and by how much.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC88">14.6 Implicit Use of Library Routines</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Specifying how to call certain library routines.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC89">14.7 Addressing Modes</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining addressing modes valid for memory operands.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC90">14.8 Parameters for Delayed Branch Optimization</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Do branches execute the following instruction?</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC91">14.9 Condition Code Information</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining how insns update the condition code.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC92">14.10 Cross Compilation and Floating-Point Format</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Handling floating point for cross-compilers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC93">14.11 Miscellaneous Parameters</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Everything else.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gcc.html#SEC94">14.12 Output of Assembler Code</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining how to write insns and pseudo-ops to output.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Run-time Target"></A>
<HR SIZE="6">
<A NAME="SEC83"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC84"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.1 Run-time Target Specification </H2>
<!--docid::SEC83::-->
<P>

<DL COMPACT>
<DT><CODE>CPP_PREDEFINES</CODE>
<DD>Define this to be a string constant containing <SAMP>`-D'</SAMP> options to
define the predefined macros that identify this machine and system.
These macros will be predefined unless the <SAMP>`-ansi'</SAMP> option is
specified.
<P>

In addition, a parallel set of macros are predefined, whose names are
made by appending <SAMP>`__'</SAMP> at the beginning and at the end.  These
<SAMP>`__'</SAMP> macros are permitted by the ANSI standard, so they are
predefined regardless of whether <SAMP>`-ansi'</SAMP> is specified.
</P><P>

For example, on the Sun, one can use the following value:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>"-Dmc68000 -Dsun -Dunix"
</pre></td></tr></table></P><P>

The result is to define the macros <CODE>__mc68000__</CODE>, <CODE>__sun__</CODE>
and <CODE>__unix__</CODE> unconditionally, and the macros <CODE>mc68000</CODE>,
<CODE>sun</CODE> and <CODE>unix</CODE> provided <SAMP>`-ansi'</SAMP> is not specified.
</P><P>

<DT><CODE>CPP_SPEC</CODE>
<DD>A C string constant that tells the GNU CC driver program options to
pass to CPP.  It can also specify how to translate options you
give to GNU CC into options for GNU CC to pass to the CPP.
<P>

Do not define this macro if it does not need to do anything.
</P><P>

<DT><CODE>CC1_SPEC</CODE>
<DD>A C string constant that tells the GNU CC driver program options to
pass to CC1.  It can also specify how to translate options you
give to GNU CC into options for GNU CC to pass to the CC1.
<P>

Do not define this macro if it does not need to do anything.
</P><P>

<DT><CODE>extern int target_flags;</CODE>
<DD>This declaration should be present.
<P>

<DT><CODE>TARGET_<small>...</small></CODE>
<DD>This series of macros is to allow compiler command arguments to
enable or disable the use of optional features of the target machine.
For example, one machine description serves both the 68000 and
the 68020; a command argument tells the compiler whether it should
use 68020-only instructions or not.  This command argument works
by means of a macro <CODE>TARGET_68020</CODE> that tests a bit in
<CODE>target_flags</CODE>.
<P>

Define a macro <CODE>TARGET_<VAR>featurename</VAR></CODE> for each such option.
Its definition should test a bit in <CODE>target_flags</CODE>; for example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define TARGET_68020 (target_flags &#38; 1)
</pre></td></tr></table></P><P>

One place where these macros are used is in the condition-expressions
of instruction patterns.  Note how <CODE>TARGET_68020</CODE> appears
frequently in the 68000 machine description file, <TT>`m68k.md'</TT>.
Another place they are used is in the definitions of the other
macros in the <TT>`tm-<VAR>machine</VAR>.h'</TT> file.
</P><P>

<DT><CODE>TARGET_SWITCHES</CODE>
<DD>This macro defines names of command options to set and clear
bits in <CODE>target_flags</CODE>.  Its definition is an initializer
with a subgrouping for each command option.
<P>

Each subgrouping contains a string constant, that defines the option
name, and a number, which contains the bits to set in
<CODE>target_flags</CODE>.  A negative number says to clear bits instead;
the negative of the number is which bits to clear.  The actual option
name is made by appending <SAMP>`-m'</SAMP> to the specified name.
</P><P>

One of the subgroupings should have a null string.  The number in
this grouping is the default value for <CODE>target_flags</CODE>.  Any
target options act starting with that value.
</P><P>

Here is an example which defines <SAMP>`-m68000'</SAMP> and <SAMP>`-m68020'</SAMP>
with opposite meanings, and picks the latter as the default:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define TARGET_SWITCHES \
  { { "68020", 1},      \
    { "68000", -1},     \
    { "", 1}}
</pre></td></tr></table></P><P>

<DT><CODE>OVERRIDE_OPTIONS</CODE>
<DD>Sometimes certain combinations of command options do not make sense on
a particular target machine.  You can define a macro
<CODE>OVERRIDE_OPTIONS</CODE> to take account of this.  This macro, if
defined, is executed once just after all the command options have been
parsed.
</DL>
<P>

<A NAME="Storage Layout"></A>
<HR SIZE="6">
<A NAME="SEC84"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC83"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC85"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.2 Storage Layout </H2>
<!--docid::SEC84::-->
<P>

Note that the definitions of the macros in this table which are sizes or
alignments measured in bits do not need to be constant.  They can be C
expressions that refer to static variables, such as the <CODE>target_flags</CODE>.
See section <A HREF="gcc.html#SEC83">14.1 Run-time Target Specification</A>.
</P><P>

<DL COMPACT>
<DT><CODE>BITS_BIG_ENDIAN</CODE>
<DD>Define this macro if the most significant bit in a byte has the lowest
number.  This means that bit-field instructions count from the most
significant bit.  If the machine has no bit-field instructions, this
macro is irrelevant.
<P>

This macro does not affect the way structure fields are packed into
bytes or words; that is controlled by <CODE>BYTES_BIG_ENDIAN</CODE>.
</P><P>

<DT><CODE>BYTES_BIG_ENDIAN</CODE>
<DD>Define this macro if the most significant byte in a word has the
lowest number.
<P>

<DT><CODE>WORDS_BIG_ENDIAN</CODE>
<DD>Define this macro if, in a multiword object, the most significant
word has the lowest number.
<P>

<DT><CODE>BITS_PER_UNIT</CODE>
<DD>Number of bits in an addressable storage unit (byte); normally 8.
<P>

<DT><CODE>BITS_PER_WORD</CODE>
<DD>Number of bits in a word; normally 32.
<P>

<DT><CODE>UNITS_PER_WORD</CODE>
<DD>Number of storage units in a word; normally 4.
<P>

<DT><CODE>POINTER_SIZE</CODE>
<DD>Width of a pointer, in bits.
<P>

<DT><CODE>POINTER_BOUNDARY</CODE>
<DD>Alignment required for pointers stored in memory, in bits.
<P>

<DT><CODE>PARM_BOUNDARY</CODE>
<DD>Normal alignment required for function parameters on the stack, in
bits.  All stack parameters receive least this much alignment
regardless of data type.  On most machines, this is the same as the
size of an integer.
<P>

<DT><CODE>MAX_PARM_BOUNDARY</CODE>
<DD>Largest alignment required for any stack parameters, in bits.  If the
data type of the parameter calls for more alignment than
<CODE>PARM_BOUNDARY</CODE>, then it is given extra padding up to this limit.
<P>

Don't define this macro if it would be equal to <CODE>PARM_BOUNDARY</CODE>;
in other words, if the alignment of a stack parameter should not
depend on its data type (as is the case on most machines).
</P><P>

<DT><CODE>STACK_BOUNDARY</CODE>
<DD>Define this macro if you wish to preserve a certain alignment for
the stack pointer at all times.  The definition is a C expression
for the desired alignment (measured in bits).
<P>

<DT><CODE>FUNCTION_BOUNDARY</CODE>
<DD>Alignment required for a function entry point, in bits.
<P>

<DT><CODE>BIGGEST_ALIGNMENT</CODE>
<DD>Biggest alignment that any data type can require on this machine, in bits.
<P>

<DT><CODE>CONSTANT_ALIGNMENT (<VAR>code</VAR>, <VAR>typealign</VAR>)</CODE>
<DD>A C expression to compute the alignment for a constant.  The argument
<VAR>typealign</VAR> is the alignment required for the constant's data type.
<VAR>code</VAR> is the tree code of the constant itself.
<P>

If this macro is not defined, the default is to use <VAR>typealign</VAR>.  If
you do define this macro, the value must be a multiple of
<VAR>typealign</VAR>.
</P><P>

The purpose of defining this macro is usually to cause string constants
to be word aligned so that <TT>`dhrystone'</TT> can be made to run faster.
</P><P>

<DT><CODE>EMPTY_FIELD_BOUNDARY</CODE>
<DD>Alignment in bits to be given to a structure bit field that follows an
empty field such as <CODE>int : 0;</CODE>.
<P>

<DT><CODE>STRUCTURE_SIZE_BOUNDARY</CODE>
<DD>Number of bits which any structure or union's size must be a multiple of.
Each structure or union's size is rounded up to a multiple of this.
<P>

If you do not define this macro, the default is the same as
<CODE>BITS_PER_UNIT</CODE>.
</P><P>

<DT><CODE>STRICT_ALIGNMENT</CODE>
<DD>Define this if instructions will fail to work if given data not
on the nominal alignment.  If instructions will merely go slower
in that case, do not define this macro.
<P>

<DT><CODE>PCC_BITFIELD_TYPE_MATTERS</CODE>
<DD>Define this if you wish to imitate a certain bizarre behavior pattern
of some instances of PCC: a bit field whose declared type is
<CODE>int</CODE> has the same effect on the size and alignment of a
structure as an actual <CODE>int</CODE> would have.
<P>

If the macro is defined, then its definition should be a C expression; 
a nonzero value for the expression enables PCC-compatible behavior.
</P><P>

Just what effect that is in GNU CC depends on other parameters, but on
most machines it would force the structure's alignment and size to a
multiple of 32 or <CODE>BIGGEST_ALIGNMENT</CODE> bits.
</P><P>

<DT><CODE>MAX_FIXED_MODE_SIZE</CODE>
<DD>An integer expression for the largest integer machine mode that should
actually be used.  All integer machine modes of this size or smaller
can be used for structures and unions with the appropriate sizes.
<P>

<DT><CODE>CHECK_FLOAT_VALUE (<VAR>mode</VAR>, <VAR>value</VAR>)</CODE>
<DD>A C statement to validate the value <VAR>value</VAR> (or type
<CODE>double</CODE>) for mode <VAR>mode</VAR>.  This means that you check whether
<VAR>value</VAR> fits within the possible range of values for mode
<VAR>mode</VAR> on this target machine.  The mode <VAR>mode</VAR> is always
<CODE>SFmode</CODE> or <CODE>DFmode</CODE>.
<P>

If <VAR>value</VAR> is not valid, you should call <CODE>error</CODE> to print an
error message and then assign some valid value to <VAR>value</VAR>.
Allowing an invalid value to go through the compiler can produce
incorrect assembler code which may even cause Unix assemblers to
crash.
</P><P>

This macro need not be defined if there is no work for it to do.
</DL>
<P>

<A NAME="Registers"></A>
<HR SIZE="6">
<A NAME="SEC85"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC84"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC86"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.3 Register Usage </H2>
<!--docid::SEC85::-->
<P>

<DL COMPACT>
<DT><CODE>FIRST_PSEUDO_REGISTER</CODE>
<DD>Number of hardware registers known to the compiler.  They receive
numbers 0 through <CODE>FIRST_PSEUDO_REGISTER-1</CODE>; thus, the first
pseudo register's number really is assigned the number
<CODE>FIRST_PSEUDO_REGISTER</CODE>.
<P>

<DT><CODE>FIXED_REGISTERS</CODE>
<DD>An initializer that says which registers are used for fixed purposes
all throughout the compiled code and are therefore not available for
general allocation.  These would include the stack pointer, the frame
pointer (except on machines where that can be used as a general
register when no frame pointer is needed), the program counter on
machines where that is considered one of the addressable registers,
and any other numbered register with a standard use.
<P>

This information is expressed as a sequence of numbers, separated by
commas and surrounded by braces.  The <VAR>n</VAR>th number is 1 if
register <VAR>n</VAR> is fixed, 0 otherwise.
</P><P>

The table initialized from this macro, and the table initialized by
the following one, may be overridden at run time either automatically,
by the actions of the macro <CODE>CONDITIONAL_REGISTER_USAGE</CODE>, or by
the user with the command options <SAMP>`-ffixed-<VAR>reg</VAR>'</SAMP>,
<SAMP>`-fcall-used-<VAR>reg</VAR>'</SAMP> and <SAMP>`-fcall-saved-<VAR>reg</VAR>'</SAMP>.
</P><P>

<DT><CODE>CALL_USED_REGISTERS</CODE>
<DD>Like <CODE>FIXED_REGISTERS</CODE> but has 1 for each register that is
clobbered (in general) by function calls as well as for fixed
registers.  This macro therefore identifies the registers that are not
available for general allocation of values that must live across
function calls.
<P>

If a register has 0 in <CODE>CALL_USED_REGISTERS</CODE>, the compiler
automatically saves it on function entry and restores it on function
exit, if the register is used within the function.
</P><P>

<DT><CODE>DEFAULT_CALLER_SAVES</CODE>
<DD>Define this macro if function calls on the target machine do not preserve
any registers; in other words, if <CODE>CALL_USED_REGISTERS</CODE> has 1
for all registers.  This macro enables <SAMP>`-fcaller-saves'</SAMP> by default.
Eventually that option will be enabled by default on all machines and both
the option and this macro will be eliminated.
<P>

<DT><CODE>CONDITIONAL_REGISTER_USAGE</CODE>
<DD>Zero or more C statements that may conditionally modify two variables
<CODE>fixed_regs</CODE> and <CODE>call_used_regs</CODE> (both of type <CODE>char
[]</CODE>) after they have been initialized from the two preceding macros.
<P>

This is necessary in case the fixed or call-clobbered registers depend
on target flags.
</P><P>

You need not define this macro if it has no work to do.
</P><P>

If the usage of an entire class of registers depends on the target
flags, you may indicate this to GCC by using this macro to modify
<CODE>fixed_regs</CODE> and <CODE>call_used_regs</CODE> to 1 for each of the
registers in the classes which should not be used by GCC.  Also define
the macro <CODE>REG_CLASS_FROM_LETTER</CODE> to return <CODE>NO_REGS</CODE> if it
is called with a letter for a class that shouldn't be used.
</P><P>

(However, if this class is not included in <CODE>GENERAL_REGS</CODE> and all
of the insn patterns whose constraints permit this class are
controlled by target switches, then GCC will automatically avoid using
these registers when the target switches are opposed to them.)
</P><P>

<DT><CODE>OVERLAPPING_REGNO_P (<VAR>regno</VAR>)</CODE>
<DD>If defined, this is a C expression whose value is nonzero if hard
register number <VAR>regno</VAR> is an overlapping register.  This means a
hard register which overlaps a hard register with a different number.
(Such overlap is undesirable, but occasionally it allows a machine to
be supported which otherwise could not be.)  This macro must return
nonzero for <EM>all</EM> the registers which overlap each other.  GNU CC
can use an overlapping register only in certain limited ways.  It can
be used for allocation within a basic block, and may be spilled for
reloading; that is all.
<P>

If this macro is not defined, it means that none of the hard registers
overlap each other.  This is the usual situation.
</P><P>

<DT><CODE>INSN_CLOBBERS_REGNO_P (<VAR>insn</VAR>, <VAR>regno</VAR>)</CODE>
<DD>If defined, this is a C expression whose value should be nonzero if
the insn <VAR>insn</VAR> has the effect of mysteriously clobbering the
contents of hard register number <VAR>regno</VAR>.  By "mysterious" we
mean that the insn's RTL expression doesn't describe such an effect.
<P>

If this macro is not defined, it means that no insn clobbers registers
mysteriously.  This is the usual situation; all else being equal,
it is best for the RTL expression to show all the activity.
</P><P>

<DT><CODE>PRESERVE_DEATH_INFO_REGNO_P (<VAR>regno</VAR>)</CODE>
<DD>If defined, this is a C expression whose value is nonzero if accurate
<CODE>REG_DEAD</CODE> notes are needed for hard register number <VAR>regno</VAR>
at the time of outputting the assembler code.  When this is so, a few
optimizations that take place after register allocation and could
invalidate the death notes are not done when this register is
involved.
<P>

You would arrange to preserve death info for a register when some of the
code in the machine description which is executed to write the assembler
code looks at the death notes.  This is necessary only when the actual
hardware feature which GNU CC thinks of as a register is not actually a
register of the usual sort.  (It might, for example, be a hardware
stack.)
</P><P>

If this macro is not defined, it means that no death notes need to be
preserved.  This is the usual situation.
</P><P>

<DT><CODE>HARD_REGNO_NREGS (<VAR>regno</VAR>, <VAR>mode</VAR>)</CODE>
<DD>A C expression for the number of consecutive hard registers, starting
at register number <VAR>regno</VAR>, required to hold a value of mode
<VAR>mode</VAR>.
<P>

On a machine where all registers are exactly one word, a suitable
definition of this macro is
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define HARD_REGNO_NREGS(REGNO, MODE)            \
   ((GET_MODE_SIZE (MODE) + UNITS_PER_WORD - 1)  \
    / UNITS_PER_WORD))
</pre></td></tr></table></P><P>

<DT><CODE>HARD_REGNO_MODE_OK (<VAR>regno</VAR>, <VAR>mode</VAR>)</CODE>
<DD>A C expression that is nonzero if it is permissible to store a value
of mode <VAR>mode</VAR> in hard register number <VAR>regno</VAR> (or in several
registers starting with that one).  For a machine where all registers
are equivalent, a suitable definition is
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define HARD_REGNO_MODE_OK(REGNO, MODE) 1
</pre></td></tr></table></P><P>

It is not necessary for this macro to check for the numbers of fixed
registers, because the allocation mechanism considers them to be always
occupied.
</P><P>

On some machines, double-precision values must be kept in even/odd
register pairs.  The way to implement that is to define this macro
to reject odd register numbers for such modes.
</P><P>

GNU CC assumes that it can always move values between registers and
(suitably addressed) memory locations.  If it is impossible to move a
value of a certain mode between memory and certain registers, then
<CODE>HARD_REGNO_MODE_OK</CODE> must not allow this mode in those registers.
</P><P>

Many machines have special registers for floating point arithmetic.
Often people assume that floating point machine modes are allowed only
in floating point registers.  This is not true.  Any registers that
can hold integers can safely <EM>hold</EM> a floating point machine
mode, whether or not floating arithmetic can be done on it in those
registers.
</P><P>

On some machines, though, the converse is true: fixed-point machine
modes may not go in floating registers.  This is true if the floating
registers normalize any value stored in them, because storing a
non-floating value there would garble it.  In this case,
<CODE>HARD_REGNO_MODE_OK</CODE> should reject fixed-point machine modes in
floating registers.  But if the floating registers do not automatically
normalize, if you can store any bit pattern in one and retrieve it
unchanged without a trap, then any machine mode may go in a floating
register and this macro should say so.
</P><P>

The primary significance of special floating registers is rather that
they are the registers acceptable in floating point arithmetic
instructions.  However, this is of no concern to
<CODE>HARD_REGNO_MODE_OK</CODE>.  You handle it by writing the proper
constraints for those instructions.
</P><P>

On some machines, the floating registers are especially slow to access,
so that it is better to store a value in a stack frame than in such a
register if floating point arithmetic is not being done.  As long as the
floating registers are not in class <CODE>GENERAL_REGS</CODE>, they will not
be used unless some insn's constraint asks for one.
</P><P>

<DT><CODE>MODES_TIEABLE_P (<VAR>mode1</VAR>, <VAR>mode2</VAR>)</CODE>
<DD>A C expression that is nonzero if it is desirable to choose register
allocation so as to avoid move instructions between a value of mode
<VAR>mode1</VAR> and a value of mode <VAR>mode2</VAR>.
<P>

If <CODE>HARD_REGNO_MODE_OK (<VAR>r</VAR>, <VAR>mode1</VAR>)</CODE> and
<CODE>HARD_REGNO_MODE_OK (<VAR>r</VAR>, <VAR>mode2</VAR>)</CODE> are ever different
for any <VAR>r</VAR>, then <CODE>MODES_TIEABLE_P (<VAR>mode1</VAR>,
<VAR>mode2</VAR>)</CODE> must be zero.
</P><P>

<DT><CODE>PC_REGNUM</CODE>
<DD>If the program counter has a register number, define this as that
register number.  Otherwise, do not define it.
<P>

<DT><CODE>STACK_POINTER_REGNUM</CODE>
<DD>The register number of the stack pointer register, which must also be
a fixed register according to <CODE>FIXED_REGISTERS</CODE>.  On many
machines, the hardware determines which register this is.
<P>

<DT><CODE>FRAME_POINTER_REGNUM</CODE>
<DD>The register number of the frame pointer register, which is used to
access automatic variables in the stack frame.  On some machines, the
hardware determines which register this is.  On other machines, you
can choose any register you wish for this purpose.
<P>

<DT><CODE>FRAME_POINTER_REQUIRED</CODE>
<DD>A C expression which is nonzero if a function must have and use a frame
pointer.  This expression is evaluated twice: at the beginning of
generating RTL, and in the reload pass.  If its value is nonzero at
either time, then the function will have a frame pointer.
<P>

The expression can in principle examine the current function and decide
according to the facts, but on most machines the constant 0 or the
constant 1 suffices.  Use 0 when the machine allows code to be generated
with no frame pointer, and doing so saves some time or space.  Use 1
when there is no possible advantage to avoiding a frame pointer.
</P><P>

In certain cases, the compiler does not know how to produce valid code
without a frame pointer.  The compiler recognizes those cases and
automatically gives the function a frame pointer regardless of what
<CODE>FRAME_POINTER_REQUIRED</CODE> says.  You don't need to worry about
them.</P><P>

In a function that does not require a frame pointer, the frame pointer
register can be allocated for ordinary usage, unless you mark it as a
fixed register.  See <CODE>FIXED_REGISTERS</CODE> for more information.
</P><P>

<DT><CODE>ARG_POINTER_REGNUM</CODE>
<DD>The register number of the arg pointer register, which is used to
access the function's argument list.  On some machines, this is the
same as the frame pointer register.  On some machines, the hardware
determines which register this is.  On other machines, you can choose
any register you wish for this purpose.  If this is not the same
register as the frame pointer register, then you must mark it as a
fixed register according to <CODE>FIXED_REGISTERS</CODE>.
<P>

<DT><CODE>STATIC_CHAIN_REGNUM</CODE>
<DD>The register number used for passing a function's static chain
pointer.  This is needed for languages such as Pascal and Algol where
functions defined within other functions can access the local
variables of the outer functions; it is not currently used because C
does not provide this feature, but you must define the macro.
<P>

The static chain register need not be a fixed register.
</P><P>

<DT><CODE>STRUCT_VALUE_REGNUM</CODE>
<DD>When a function's value's mode is <CODE>BLKmode</CODE>, the value is not
returned according to <CODE>FUNCTION_VALUE</CODE>.  Instead, the caller
passes the address of a block of memory in which the value should be
stored.
<P>

If this value is passed in a register, then <CODE>STRUCT_VALUE_REGNUM</CODE>
should be the number of that register.
</P><P>

<DT><CODE>STRUCT_VALUE</CODE>
<DD>If the structure value address is not passed in a register, define
<CODE>STRUCT_VALUE</CODE> as an expression returning an RTX for the place
where the address is passed.  If it returns a <CODE>mem</CODE> RTX, the
address is passed as an "invisible" first argument.
<P>

<DT><CODE>STRUCT_VALUE_INCOMING_REGNUM</CODE>
<DD>On some architectures the place where the structure value address
is found by the called function is not the same place that the
caller put it.  This can be due to register windows, or it could
be because the function prologue moves it to a different place.
<P>

If the incoming location of the structure value address is in a
register, define this macro as the register number.
</P><P>

<DT><CODE>STRUCT_VALUE_INCOMING</CODE>
<DD>If the incoming location is not a register, define
<CODE>STRUCT_VALUE_INCOMING</CODE> as an expression for an RTX for where the
called function should find the value.  If it should find the value on
the stack, define this to create a <CODE>mem</CODE> which refers to the
frame pointer.  If the value is a <CODE>mem</CODE>, the compiler assumes it
is for an invisible first argument, and leaves space for it when
finding the first real argument.
<P>

<DT><CODE>REG_ALLOC_ORDER</CODE>
<DD>If defined, an initializer for a vector of integers, containing the
numbers of hard registers in the order in which the GNU CC should
prefer to use them (from most preferred to least).
<P>

If this macro is not defined, registers are used lowest numbered first
(all else being equal).
</P><P>

One use of this macro is on the 360, where the highest numbered
registers must always be saved and the save-multiple-registers
instruction supports only sequences of consecutive registers.  This
macro is defined to cause the highest numbered allocatable registers
to be used first.
</DL>
<P>

<A NAME="Register Classes"></A>
<HR SIZE="6">
<A NAME="SEC86"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC85"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC87"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.4 Register Classes </H2>
<!--docid::SEC86::-->
<P>

On many machines, the numbered registers are not all equivalent.
For example, certain registers may not be allowed for indexed addressing;
certain registers may not be allowed in some instructions.  These machine
restrictions are described to the compiler using <EM>register classes</EM>.
</P><P>

You define a number of register classes, giving each one a name and saying
which of the registers belong to it.  Then you can specify register classes
that are allowed as operands to particular instruction patterns.
</P><P>

In general, each register will belong to several classes.  In fact, one
class must be named <CODE>ALL_REGS</CODE> and contain all the registers.  Another
class must be named <CODE>NO_REGS</CODE> and contain no registers.  Often the
union of two classes will be another class; however, this is not required.
</P><P>

One of the classes must be named <CODE>GENERAL_REGS</CODE>.  There is nothing
terribly special about the name, but the operand constraint letters
<SAMP>`r'</SAMP> and <SAMP>`g'</SAMP> specify this class.  If <CODE>GENERAL_REGS</CODE> is
the same as <CODE>ALL_REGS</CODE>, just define it as a macro which expands
to <CODE>ALL_REGS</CODE>.
</P><P>

The way classes other than <CODE>GENERAL_REGS</CODE> are specified in operand
constraints is through machine-dependent operand constraint letters.
You can define such letters to correspond to various classes, then use
them in operand constraints.
</P><P>

You should define a class for the union of two classes whenever some
instruction allows both classes.  For example, if an instruction allows
either a floating-point (coprocessor) register or a general register for a
certain operand, you should define a class <CODE>FLOAT_OR_GENERAL_REGS</CODE>
which includes both of them.  Otherwise you will get suboptimal code.
</P><P>

You must also specify certain redundant information about the register
classes: for each class, which classes contain it and which ones are
contained in it; for each pair of classes, the largest class contained
in their union.
</P><P>

When a value occupying several consecutive registers is expected in a
certain class, all the registers used must belong to that class.
Therefore, register classes cannot be used to enforce a requirement for
a register pair to start with an even-numbered register.  The way to
specify this requirement is with <CODE>HARD_REGNO_MODE_OK</CODE>.
</P><P>

Register classes used for input-operands of bitwise-and or shift
instructions have a special requirement: each such class must have, for
each fixed-point machine mode, a subclass whose registers can transfer that
mode to or from memory.  For example, on some machines, the operations for
single-byte values (<CODE>QImode</CODE>) are limited to certain registers.  When
this is so, each register class that is used in a bitwise-and or shift
instruction must have a subclass consisting of registers from which
single-byte values can be loaded or stored.  This is so that
<CODE>PREFERRED_RELOAD_CLASS</CODE> can always have a possible value to return.
</P><P>

<DL COMPACT>
<DT><CODE>enum reg_class</CODE>
<DD>An enumeral type that must be defined with all the register class names
as enumeral values.  <CODE>NO_REGS</CODE> must be first.  <CODE>ALL_REGS</CODE>
must be the last register class, followed by one more enumeral value,
<CODE>LIM_REG_CLASSES</CODE>, which is not a register class but rather
tells how many classes there are.
<P>

Each register class has a number, which is the value of casting
the class name to type <CODE>int</CODE>.  The number serves as an index
in many of the tables described below.
</P><P>

<DT><CODE>N_REG_CLASSES</CODE>
<DD>The number of distinct register classes, defined as follows:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define N_REG_CLASSES (int) LIM_REG_CLASSES
</pre></td></tr></table></P><P>

<DT><CODE>REG_CLASS_NAMES</CODE>
<DD>An initializer containing the names of the register classes as C string
constants.  These names are used in writing some of the debugging dumps.
<P>

<DT><CODE>REG_CLASS_CONTENTS</CODE>
<DD>An initializer containing the contents of the register classes, as integers
which are bit masks.  The <VAR>n</VAR>th integer specifies the contents of class
<VAR>n</VAR>.  The way the integer <VAR>mask</VAR> is interpreted is that
register <VAR>r</VAR> is in the class if <CODE><VAR>mask</VAR> &#38; (1 &#60;&#60; <VAR>r</VAR>)</CODE> is 1.
<P>

When the machine has more than 32 registers, an integer does not suffice.
Then the integers are replaced by sub-initializers, braced groupings containing
several integers.  Each sub-initializer must be suitable as an initializer
for the type <CODE>HARD_REG_SET</CODE> which is defined in <TT>`hard-reg-set.h'</TT>.
</P><P>

<DT><CODE>REGNO_REG_CLASS (<VAR>regno</VAR>)</CODE>
<DD>A C expression whose value is a register class containing hard register
<VAR>regno</VAR>.  In general there is more that one such class; choose a class
which is <EM>minimal</EM>, meaning that no smaller class also contains the
register.
<P>

<DT><CODE>BASE_REG_CLASS</CODE>
<DD>A macro whose definition is the name of the class to which a valid
base register must belong.  A base register is one used in an address
which is the register value plus a displacement.
<P>

<DT><CODE>INDEX_REG_CLASS</CODE>
<DD>A macro whose definition is the name of the class to which a valid
index register must belong.  An index register is one used in an
address where its value is either multiplied by a scale factor or
added to another register (as well as added to a displacement).
<P>

<DT><CODE>REG_CLASS_FROM_LETTER (<VAR>char</VAR>)</CODE>
<DD>A C expression which defines the machine-dependent operand constraint
letters for register classes.  If <VAR>char</VAR> is such a letter, the
value should be the register class corresponding to it.  Otherwise,
the value should be <CODE>NO_REGS</CODE>.
<P>

<DT><CODE>REGNO_OK_FOR_BASE_P (<VAR>num</VAR>)</CODE>
<DD>A C expression which is nonzero if register number <VAR>num</VAR> is
suitable for use as a base register in operand addresses.  It may be
either a suitable hard register or a pseudo register that has been
allocated such a hard register.
<P>

<DT><CODE>REGNO_OK_FOR_INDEX_P (<VAR>num</VAR>)</CODE>
<DD>A C expression which is nonzero if register number <VAR>num</VAR> is
suitable for use as an index register in operand addresses.  It may be
either a suitable hard register or a pseudo register that has been
allocated such a hard register.
<P>

The difference between an index register and a base register is that
the index register may be scaled.  If an address involves the sum of
two registers, neither one of them scaled, then either one may be
labeled the "base" and the other the "index"; but whichever
labeling is used must fit the machine's constraints of which registers
may serve in each capacity.  The compiler will try both labelings,
looking for one that is valid, and will reload one or both registers
only if neither labeling works.
</P><P>

<DT><CODE>PREFERRED_RELOAD_CLASS (<VAR>x</VAR>, <VAR>class</VAR>)</CODE>
<DD>A C expression that places additional restrictions on the register class
to use when it is necessary to copy value <VAR>x</VAR> into a register in class
<VAR>class</VAR>.  The value is a register class; perhaps <VAR>class</VAR>, or perhaps
another, smaller class.  On many machines, the definition
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define PREFERRED_RELOAD_CLASS(X,CLASS) CLASS
</pre></td></tr></table></P><P>

is safe.
</P><P>

Sometimes returning a more restrictive class makes better code.  For
example, on the 68000, when <VAR>x</VAR> is an integer constant that is in range
for a <SAMP>`moveq'</SAMP> instruction, the value of this macro is always
<CODE>DATA_REGS</CODE> as long as <VAR>class</VAR> includes the data registers.
Requiring a data register guarantees that a <SAMP>`moveq'</SAMP> will be used.
</P><P>

If <VAR>x</VAR> is a <CODE>const_double</CODE>, by returning <CODE>NO_REGS</CODE>
you can force <VAR>x</VAR> into a memory constant.  This is useful on
certain machines where immediate floating values cannot be loaded into
certain kinds of registers.
</P><P>

In a shift instruction or a bitwise-and instruction, the mode of <VAR>x</VAR>,
the value being reloaded, may not be the same as the mode of the
instruction's operand.  (They will both be fixed-point modes, however.)  In
such a case, <VAR>class</VAR> may not be a safe value to return.  <VAR>class</VAR> is
certainly valid for the instruction, but it may not be valid for reloading
<VAR>x</VAR>.  This problem can occur on machines such as the 68000 and 80386
where some registers can handle full-word values but cannot handle
single-byte values.
</P><P>

On such machines, this macro must examine the mode of <VAR>x</VAR> and return a
subclass of <VAR>class</VAR> which can handle loads and stores of that mode.  On
the 68000, where address registers cannot handle <CODE>QImode</CODE>, if <VAR>x</VAR>
has <CODE>QImode</CODE> then you must return <CODE>DATA_REGS</CODE>.  If <VAR>class</VAR> is
<CODE>ADDR_REGS</CODE>, then there is no correct value to return; but the shift
and bitwise-and instructions don't use <CODE>ADDR_REGS</CODE>, so this fatal case
never arises.
</P><P>

<DT><CODE>CLASS_MAX_NREGS (<VAR>class</VAR>, <VAR>mode</VAR>)</CODE>
<DD>A C expression for the maximum number of consecutive registers
of class <VAR>class</VAR> needed to hold a value of mode <VAR>mode</VAR>.
<P>

This is closely related to the macro <CODE>HARD_REGNO_NREGS</CODE>.
In fact, the value of the macro <CODE>CLASS_MAX_NREGS (<VAR>class</VAR>, <VAR>mode</VAR>)</CODE>
should be the maximum value of <CODE>HARD_REGNO_NREGS (<VAR>regno</VAR>, <VAR>mode</VAR>)</CODE>
for all <VAR>regno</VAR> values in the class <VAR>class</VAR>.
</P><P>

This macro helps control the handling of multiple-word values
in the reload pass.
</DL>
<P>

Two other special macros describe which constants fit which constraint
letters.
</P><P>

<DL COMPACT>
<DT><CODE>CONST_OK_FOR_LETTER_P (<VAR>value</VAR>, <VAR>c</VAR>)</CODE>
<DD>A C expression that defines the machine-dependent operand constraint letters
that specify particular ranges of integer values.  If <VAR>c</VAR> is one
of those letters, the expression should check that <VAR>value</VAR>, an integer,
is in the appropriate range and return 1 if so, 0 otherwise.  If <VAR>c</VAR> is
not one of those letters, the value should be 0 regardless of <VAR>value</VAR>.
<P>

<DT><CODE>CONST_DOUBLE_OK_FOR_LETTER_P (<VAR>value</VAR>, <VAR>c</VAR>)</CODE>
<DD>A C expression that defines the machine-dependent operand constraint
letters that specify particular ranges of floating values.  If <VAR>c</VAR> is
one of those letters, the expression should check that <VAR>value</VAR>, an RTX
of code <CODE>const_double</CODE>, is in the appropriate range and return 1 if
so, 0 otherwise.  If <VAR>c</VAR> is not one of those letters, the value should
be 0 regardless of <VAR>value</VAR>.
</DL>
<P>

<A NAME="Stack Layout"></A>
<HR SIZE="6">
<A NAME="SEC87"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC86"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC88"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.5 Describing Stack Layout </H2>
<!--docid::SEC87::-->
<P>

<DL COMPACT>
<DT><CODE>STACK_GROWS_DOWNWARD</CODE>
<DD>Define this macro if pushing a word onto the stack moves the stack
pointer to a smaller address.
<P>

When we say, "define this macro if <small>...</small>," it means that the
compiler checks this macro only with <CODE>#ifdef</CODE> so the precise
definition used does not matter.
</P><P>

<DT><CODE>FRAME_GROWS_DOWNWARD</CODE>
<DD>Define this macro if the addresses of local variable slots are at negative
offsets from the frame pointer.
<P>

<DT><CODE>STARTING_FRAME_OFFSET</CODE>
<DD>Offset from the frame pointer to the first local variable slot to be allocated.
<P>

If <CODE>FRAME_GROWS_DOWNWARD</CODE>, the next slot's offset is found by
subtracting the length of the first slot from <CODE>STARTING_FRAME_OFFSET</CODE>.
Otherwise, it is found by adding the length of the first slot to
the value <CODE>STARTING_FRAME_OFFSET</CODE>.
</P><P>

<DT><CODE>PUSH_ROUNDING (<VAR>npushed</VAR>)</CODE>
<DD>A C expression that is the number of bytes actually pushed onto the
stack when an instruction attempts to push <VAR>npushed</VAR> bytes.
<P>

If the target machine does not have a push instruction, do not define
this macro.  That directs GNU CC to use an alternate strategy: to
allocate the entire argument block and then store the arguments into
it.
</P><P>

On some machines, the definition
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define PUSH_ROUNDING(BYTES) (BYTES)
</pre></td></tr></table></P><P>

will suffice.  But on other machines, instructions that appear
to push one byte actually push two bytes in an attempt to maintain
alignment.  Then the definition should be
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define PUSH_ROUNDING(BYTES) (((BYTES) + 1) &#38; ~1)
</pre></td></tr></table></P><P>

<DT><CODE>FIRST_PARM_OFFSET (<VAR>fundecl</VAR>)</CODE>
<DD>Offset from the argument pointer register to the first argument's
address.  On some machines it may depend on the data type of the
function.  (In the next version of GNU CC, the argument will be
changed to the function data type rather than its declaration.)
<P>

<DT><CODE>FIRST_PARM_CALLER_OFFSET (<VAR>fundecl</VAR>)</CODE>
<DD>Define this macro on machines where register parameters have shadow
locations on the stack, at addresses below the nominal parameter.
This matters because certain arguments cannot be passed on the stack.
On these machines, such arguments must be stored into the shadow
locations.
<P>

This macro should expand into a C expression whose value is the offset
of the first parameter's shadow location from the nominal stack
pointer value.  (That value is itself computed by adding the value of
<CODE>STACK_POINTER_OFFSET</CODE> to the stack pointer register.)
</P><P>

<DT><CODE>REG_PARM_STACK_SPACE</CODE>
<DD>Define this macro if functions should assume that stack space has been
allocated for arguments even when their values are passed in
registers.
<P>

The actual allocation of such space would be done either by
the call instruction or by the function prologue, or by
defining <CODE>FIRST_PARM_CALLER_OFFSET</CODE>.
</P><P>

<DT><CODE>STACK_ARGS_ADJUST (<VAR>size</VAR>)</CODE>
<DD>Define this macro if the machine requires padding on the stack for
certain function calls.  This is padding on a per-function-call basis,
not padding for individual arguments.
<P>

The argument <VAR>size</VAR> will be a C variable of type <CODE>struct
arg_data</CODE> which contains two fields, an integer named <CODE>constant</CODE>
and an RTX named <CODE>var</CODE>.  These together represent a size measured
in bytes which is the sum of the integer and the RTX.  Most of the
time <CODE>var</CODE> is 0, which means that the size is simply the integer.
</P><P>

The definition should be a C statement or compound statement
which alters the variable supplied in whatever way you wish.
</P><P>

Note that the value you leave in the variable <CODE>size</CODE> will
ultimately be rounded up to a multiple of <CODE>STACK_BOUNDARY</CODE> bits.
</P><P>

This macro is not fully implemented for machines which have push
instructions (i.e., on which <CODE>PUSH_ROUNDING</CODE> is defined).
</P><P>

<DT><CODE>RETURN_POPS_ARGS (<VAR>funtype</VAR>)</CODE>
<DD>A C expression that should be 1 if a function pops its own arguments
on returning, or 0 if the function pops no arguments and the caller
must therefore pop them all after the function returns.
<P>

<VAR>funtype</VAR> is a C variable whose value is a tree node that
describes the function in question.  Normally it is a node of type
<CODE>FUNCTION_TYPE</CODE> that describes the data type of the function.
From this it is possible to obtain the data types of the value and
arguments (if known).
</P><P>

When a call to a library function is being considered, <VAR>funtype</VAR>
will contain an identifier node for the library function.  Thus, if
you need to distinguish among various library functions, you can do so
by their names.  Note that "library function" in this context means
a function used to perform arithmetic, whose name is known specially
in the compiler and was not mentioned in the C code being compiled.
</P><P>

On the Vax, all functions always pop their arguments, so the
definition of this macro is 1.  On the 68000, using the standard
calling convention, no functions pop their arguments, so the value of
the macro is always 0 in this case.  But an alternative calling
convention is available in which functions that take a fixed number of
arguments pop them but other functions (such as <CODE>printf</CODE>) pop
nothing (the caller pops all).  When this convention is in use,
<VAR>funtype</VAR> is examined to determine whether a function takes a
fixed number of arguments.
</P><P>

When this macro returns nonzero, the macro <CODE>FRAME_POINTER_REQUIRED</CODE>
must also return nonzero for proper operation.
</P><P>

<DT><CODE>FUNCTION_VALUE (<VAR>valtype</VAR>, <VAR>func</VAR>)</CODE>
<DD>A C expression to create an RTX representing the place where a
function returns a value of data type <VAR>valtype</VAR>.  <VAR>valtype</VAR> is
a tree node representing a data type.  Write <CODE>TYPE_MODE
(<VAR>valtype</VAR>)</CODE> to get the machine mode used to represent that type.
On many machines, only the mode is relevant.  (Actually, on most
machines, scalar values are returned in the same place regardless of
mode).<P>

If the precise function being called is known, <VAR>func</VAR> is a tree
node (<CODE>FUNCTION_DECL</CODE>) for it; otherwise, <VAR>func</VAR> is a null
pointer.  This makes it possible to use a different value-returning
convention for specific functions when all their calls are
known.</P><P>

<DT><CODE>FUNCTION_OUTGOING_VALUE (<VAR>valtype</VAR>, <VAR>func</VAR>)</CODE>
<DD>Define this macro if the target machine has "register windows"
so that the register in which a function returns its value is not
the same as the one in which the caller sees the value.
<P>

For such machines, <CODE>FUNCTION_VALUE</CODE> computes the register in
which the caller will see the value, and
<CODE>FUNCTION_OUTGOING_VALUE</CODE> should be defined in a similar fashion
to tell the function where to put the value.</P><P>

If <CODE>FUNCTION_OUTGOING_VALUE</CODE> is not defined,
<CODE>FUNCTION_VALUE</CODE> serves both purposes.</P><P>

<DT><CODE>RETURN_IN_MEMORY (<VAR>type</VAR>)</CODE>
<DD>A C expression which can inhibit the returning of certain function
values in registers, based on the type of value.  A nonzero value says
to return the function value in memory, just as large structures are
always returned.  Here <VAR>type</VAR> will be a C expression of type
<CODE>tree</CODE>, representing the data type of the value.
<P>

Note that values of mode <CODE>BLKmode</CODE> are returned in memory
regardless of this macro.  Also, the option <SAMP>`-fpcc-struct-return'</SAMP>
takes effect regardless of this macro.  On most systems, it is
possible to leave the macro undefined; this causes a default
definition to be used, whose value is the constant 0.
</P><P>

<DT><CODE>LIBCALL_VALUE (<VAR>mode</VAR>)</CODE>
<DD>A C expression to create an RTX representing the place where a library
function returns a value of mode <VAR>mode</VAR>.  If the precise function
being called is known, <VAR>func</VAR> is a tree node
(<CODE>FUNCTION_DECL</CODE>) for it; otherwise, <VAR>func</VAR> is a null
pointer.  This makes it possible to use a different value-returning
convention for specific functions when all their calls are
known.<P>

Note that "library function" in this context means a compiler
support routine, used to perform arithmetic, whose name is known
specially by the compiler and was not mentioned in the C code being
compiled.
</P><P>

<DT><CODE>FUNCTION_VALUE_REGNO_P (<VAR>regno</VAR>)</CODE>
<DD>A C expression that is nonzero if <VAR>regno</VAR> is the number of a hard
register in which the values of called function may come back.
<P>

A register whose use for returning values is limited to serving as the
second of a pair (for a value of type <CODE>double</CODE>, say) need not be
recognized by this macro.  So for most machines, this definition
suffices:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define FUNCTION_VALUE_REGNO_P(N) ((N) == 0)
</pre></td></tr></table></P><P>

If the machine has register windows, so that the caller and the called
function use different registers for the return value, this macro
should recognize only the caller's register numbers.
</P><P>

<DT><CODE>FUNCTION_ARG (<VAR>cum</VAR>, <VAR>mode</VAR>, <VAR>type</VAR>, <VAR>named</VAR>)</CODE>
<DD>A C expression that controls whether a function argument is passed
in a register, and which register.
<P>

The arguments are <VAR>cum</VAR>, which summarizes all the previous
arguments; <VAR>mode</VAR>, the machine mode of the argument; <VAR>type</VAR>,
the data type of the argument as a tree node or 0 if that is not known
(which happens for C support library functions); and <VAR>named</VAR>,
which is 1 for an ordinary argument and 0 for nameless arguments that
correspond to <SAMP>`<small>...</small>'</SAMP> in the called function's prototype.
</P><P>

The value of the expression should either be a <CODE>reg</CODE> RTX for the
hard register in which to pass the argument, or zero to pass the
argument on the stack.
</P><P>

For the Vax and 68000, where normally all arguments are pushed, zero
suffices as a definition.
</P><P>

The usual way to make the ANSI library <TT>`stdarg.h'</TT> work on a machine
where some arguments are usually passed in registers, is to cause
nameless arguments to be passed on the stack instead.  This is done
by making <CODE>FUNCTION_ARG</CODE> return 0 whenever <VAR>named</VAR> is 0.
</P><P>

<DT><CODE>FUNCTION_INCOMING_ARG (<VAR>cum</VAR>, <VAR>mode</VAR>, <VAR>type</VAR>, <VAR>named</VAR>)</CODE>
<DD>Define this macro if the target machine has "register windows", so
that the register in which a function sees an arguments is not
necessarily the same as the one in which the caller passed the
argument.
<P>

For such machines, <CODE>FUNCTION_ARG</CODE> computes the register in which
the caller passes the value, and <CODE>FUNCTION_INCOMING_ARG</CODE> should
be defined in a similar fashion to tell the function being called
where the arguments will arrive.
</P><P>

If <CODE>FUNCTION_INCOMING_ARG</CODE> is not defined, <CODE>FUNCTION_ARG</CODE>
serves both purposes.</P><P>

<DT><CODE>FUNCTION_ARG_PARTIAL_NREGS (<VAR>cum</VAR>, <VAR>mode</VAR>, <VAR>type</VAR>, <VAR>named</VAR>)</CODE>
<DD>A C expression for the number of words, at the beginning of an
argument, must be put in registers.  The value must be zero for
arguments that are passed entirely in registers or that are entirely
pushed on the stack.
<P>

On some machines, certain arguments must be passed partially in
registers and partially in memory.  On these machines, typically the
first <VAR>n</VAR> words of arguments are passed in registers, and the rest
on the stack.  If a multi-word argument (a <CODE>double</CODE> or a
structure) crosses that boundary, its first few words must be passed
in registers and the rest must be pushed.  This macro tells the
compiler when this occurs, and how many of the words should go in
registers.
</P><P>

<CODE>FUNCTION_ARG</CODE> for these arguments should return the first
register to be used by the caller for this argument; likewise
<CODE>FUNCTION_INCOMING_ARG</CODE>, for the called function.
</P><P>

<DT><CODE>CUMULATIVE_ARGS</CODE>
<DD>A C type for declaring a variable that is used as the first argument
of <CODE>FUNCTION_ARG</CODE> and other related values.  For some target
machines, the type <CODE>int</CODE> suffices and can hold the number of
bytes of argument so far.
<P>

<DT><CODE>INIT_CUMULATIVE_ARGS (<VAR>cum</VAR>, <VAR>fntype</VAR>)</CODE>
<DD>A C statement (sans semicolon) for initializing the variable <VAR>cum</VAR>
for the state at the beginning of the argument list.  The variable has
type <CODE>CUMULATIVE_ARGS</CODE>.  The value of <VAR>fntype</VAR> is the tree node
for the data type of the function which will receive the args, or 0
if the args are to a compiler support library function.
<P>

<DT><CODE>FUNCTION_ARG_ADVANCE (<VAR>cum</VAR>, <VAR>mode</VAR>, <VAR>type</VAR>, <VAR>named</VAR>)</CODE>
<DD>A C statement (sans semicolon) to update the summarizer variable
<VAR>cum</VAR> to advance past an argument in the argument list.  The
values <VAR>mode</VAR>, <VAR>type</VAR> and <VAR>named</VAR> describe that argument.
Once this is done, the variable <VAR>cum</VAR> is suitable for analyzing
the <EM>following</EM> argument with <CODE>FUNCTION_ARG</CODE>, etc.<P>

<DT><CODE>FUNCTION_ARG_REGNO_P (<VAR>regno</VAR>)</CODE>
<DD>A C expression that is nonzero if <VAR>regno</VAR> is the number of a hard
register in which function arguments are sometimes passed.  This does
<EM>not</EM> include implicit arguments such as the static chain and
the structure-value address.  On many machines, no registers can be
used for this purpose since all function arguments are pushed on the
stack.
<P>

<DT><CODE>FUNCTION_ARG_PADDING (<VAR>mode</VAR>, <VAR>size</VAR>)</CODE>
<DD>If defined, a C expression which determines whether, and in which direction,
to pad out an argument with extra space.  The value should be of type
<CODE>enum direction</CODE>: either <CODE>upward</CODE> to pad above the argument,
<CODE>downward</CODE> to pad below, or <CODE>none</CODE> to inhibit padding.
<P>

The argument <VAR>size</VAR> is an RTX which describes the size of the
argument, in bytes.  It should be used only if <VAR>mode</VAR> is
<CODE>BLKmode</CODE>.  Otherwise, <VAR>size</VAR> is 0.
</P><P>

This macro does not control the <EM>amount</EM> of padding; that is
always just enough to reach the next multiple of <CODE>PARM_BOUNDARY</CODE>.
</P><P>

This macro has a default definition which is right for most systems.
For little-endian machines, the default is to pad upward.  For
big-endian machines, the default is to pad downward for an argument of
constant size shorter than an <CODE>int</CODE>, and upward otherwise.
</P><P>

<DT><CODE>FUNCTION_PROLOGUE (<VAR>file</VAR>, <VAR>size</VAR>)</CODE>
<DD>A C compound statement that outputs the assembler code for entry to a
function.  The prologue is responsible for setting up the stack frame,
initializing the frame pointer register, saving registers that must be
saved, and allocating <VAR>size</VAR> additional bytes of storage for the
local variables.  <VAR>size</VAR> is an integer.  <VAR>file</VAR> is a stdio
stream to which the assembler code should be output.
<P>

The label for the beginning of the function need not be output by this
macro.  That has already been done when the macro is run.
</P><P>

To determine which registers to save, the macro can refer to the array
<CODE>regs_ever_live</CODE>: element <VAR>r</VAR> is nonzero if hard register
<VAR>r</VAR> is used anywhere within the function.  This implies the
function prologue should save register <VAR>r</VAR>, but not if it is one
of the call-used registers.
</P><P>

On machines where functions may or may not have frame-pointers, the
function entry code must vary accordingly; it must set up the frame
pointer if one is wanted, and not otherwise.  To determine whether a
frame pointer is in wanted, the macro can refer to the variable
<CODE>frame_pointer_needed</CODE>.  The variable's value will be 1 at run
time in a function that needs a frame pointer.
</P><P>

On machines where an argument may be passed partly in registers and
partly in memory, this macro must examine the variable
<CODE>current_function_pretend_args_size</CODE>, and allocate that many bytes
of uninitialized space on the stack just underneath the first argument
arriving on the stack.  (This may not be at the very end of the stack,
if the calling sequence has pushed anything else since pushing the stack
arguments.  But usually, on such machines, nothing else has been pushed
yet, because the function prologue itself does all the pushing.)
</P><P>

<DT><CODE>FUNCTION_PROFILER (<VAR>file</VAR>, <VAR>labelno</VAR>)</CODE>
<DD>A C statement or compound statement to output to <VAR>file</VAR> some
assembler code to call the profiling subroutine <CODE>mcount</CODE>.
Before calling, the assembler code must load the address of a
counter variable into a register where <CODE>mcount</CODE> expects to
find the address.  The name of this variable is <SAMP>`LP'</SAMP> followed
by the number <VAR>labelno</VAR>, so you would generate the name using
<SAMP>`LP%d'</SAMP> in a <CODE>fprintf</CODE>.
<P>

The details of how the address should be passed to <CODE>mcount</CODE> are
determined by your operating system environment, not by GNU CC.  To
figure them out, compile a small program for profiling using the
system's installed C compiler and look at the assembler code that
results.
</P><P>

<DT><CODE>FUNCTION_BLOCK_PROFILER (<VAR>file</VAR>, <VAR>labelno</VAR>)</CODE>
<DD>A C statement or compound statement to output to <VAR>file</VAR> some
assembler code to initialize basic-block profiling for the current
object module.  This code should call the subroutine
<CODE>__bb_init_func</CODE> once per object module, passing it as its sole
argument the address of a block allocated in the object module.
<P>

The name of the block is a local symbol made with this statement:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>ASM_GENERATE_INTERNAL_LABEL (<VAR>buffer</VAR>, "LPBX", 0);
</pre></td></tr></table></P><P>

Of course, since you are writing the definition of
<CODE>ASM_GENERATE_INTERNAL_LABEL</CODE> as well as that of this macro, you
can take a short cut in the definition of this macro and use the name
that you know will result.
</P><P>

The first word of this block is a flag which will be nonzero if the
object module has already been initialized.  So test this word first,
and do not call <CODE>__bb_init_func</CODE> if the flag is nonzero.
</P><P>

<DT><CODE>BLOCK_PROFILER (<VAR>file</VAR>, <VAR>blockno</VAR>)</CODE>
<DD>A C statement or compound statement to increment the count associated
with the basic block number <VAR>blockno</VAR>.  Basic blocks are numbered
separately from zero within each compilation.  The count associated
with block number <VAR>blockno</VAR> is at index <VAR>blockno</VAR> in a vector
of words; the name of this array is a local symbol made with this
statement:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>ASM_GENERATE_INTERNAL_LABEL (<VAR>buffer</VAR>, "LPBX", 2);
</pre></td></tr></table></P><P>

Of course, since you are writing the definition of
<CODE>ASM_GENERATE_INTERNAL_LABEL</CODE> as well as that of this macro, you
can take a short cut in the definition of this macro and use the name
that you know will result.
</P><P>

<DT><CODE>EXIT_IGNORE_STACK</CODE>
<DD>Define this macro as a C expression that is nonzero if the return
instruction or the function epilogue ignores the value of the stack
pointer; in other words, if it is safe to delete an instruction to
adjust the stack pointer before a return from the function.
<P>

Note that this macro's value is relevant only for functions for which
frame pointers are maintained.  It is never safe to delete a final
stack adjustment in a function that has no frame pointer, and the
compiler knows this regardless of <CODE>EXIT_IGNORE_STACK</CODE>.
</P><P>

<DT><CODE>FUNCTION_EPILOGUE (<VAR>file</VAR>, <VAR>size</VAR>)</CODE>
<DD>A C compound statement that outputs the assembler code for exit from a
function.  The epilogue is responsible for restoring the saved
registers and stack pointer to their values when the function was
called, and returning control to the caller.  This macro takes the
same arguments as the macro <CODE>FUNCTION_PROLOGUE</CODE>, and the
registers to restore are determined from <CODE>regs_ever_live</CODE> and
<CODE>CALL_USED_REGISTERS</CODE> in the same way.
<P>

On some machines, there is a single instruction that does all the work
of returning from the function.  On these machines, give that
instruction the name <SAMP>`return'</SAMP> and do not define the macro
<CODE>FUNCTION_EPILOGUE</CODE> at all.
</P><P>

Do not define a pattern named <SAMP>`return'</SAMP> if you want the
<CODE>FUNCTION_EPILOGUE</CODE> to be used.  If you want the target switches
to control whether return instructions or epilogues are used, define a
<SAMP>`return'</SAMP> pattern with a validity condition that tests the target
switches appropriately.  If the <SAMP>`return'</SAMP> pattern's validity
condition is false, epilogues will be used.
</P><P>

On machines where functions may or may not have frame-pointers, the
function exit code must vary accordingly.  Sometimes the code for
these two cases is completely different.  To determine whether a frame
pointer is in wanted, the macro can refer to the variable
<CODE>frame_pointer_needed</CODE>.  The variable's value will be 1 at run
time in a function that needs a frame pointer.
</P><P>

On some machines, some functions pop their arguments on exit while
others leave that for the caller to do.  For example, the 68020 when
given <SAMP>`-mrtd'</SAMP> pops arguments in functions that take a fixed
number of arguments.
</P><P>

Your definition of the macro <CODE>RETURN_POPS_ARGS</CODE> decides which
functions pop their own arguments.  <CODE>FUNCTION_EPILOGUE</CODE> needs to
know what was decided.  The variable <CODE>current_function_pops_args</CODE>
is nonzero if the function should pop its own arguments.  If so, use
the variable <CODE>current_function_args_size</CODE> as the number of bytes
to pop.
</P><P>

<DT><CODE>FIX_FRAME_POINTER_ADDRESS (<VAR>addr</VAR>, <VAR>depth</VAR>)</CODE>
<DD>A C compound statement to alter a memory address that uses the frame
pointer register so that it uses the stack pointer register instead.
This must be done in the instructions that load parameter values into
registers, when the reload pass determines that a frame pointer is not
necessary for the function.  <VAR>addr</VAR> will be a C variable name, and
the updated address should be stored in that variable.  <VAR>depth</VAR>
will be the current depth of stack temporaries (number of bytes of
arguments currently pushed).  The change in offset between a
frame-pointer-relative address and a stack-pointer-relative address
must include <VAR>depth</VAR>.
<P>

Even if your machine description specifies there will always be a
frame pointer in the frame pointer register, you must still define
<CODE>FIX_FRAME_POINTER_ADDRESS</CODE>, but the definition will never be
executed at run time, so it may be empty.
</P><P>

<DT><CODE>LONGJMP_RESTORE_FROM_STACK</CODE>
<DD>Define this macro if the <CODE>longjmp</CODE> function restores registers
from the stack frames, rather than from those saved specifically by
<CODE>setjmp</CODE>.  Certain quantities must not be kept in registers
across a call to <CODE>setjmp</CODE> on such machines.
</DL>
<P>

<A NAME="Library Calls"></A>
<HR SIZE="6">
<A NAME="SEC88"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC87"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC89"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.6 Implicit Use of Library Routines </H2>
<!--docid::SEC88::-->
<P>

<DL COMPACT>
<DT><CODE>MULSI3_LIBCALL</CODE>
<DD>A C string constant giving the name of the function to call for
multiplication of one signed full-word by another.  If you do not
define this macro, the default name is used, which is <CODE>__mulsi3</CODE>,
a function defined in <TT>`gnulib'</TT>.
<P>

<DT><CODE>UMULSI3_LIBCALL</CODE>
<DD>A C string constant giving the name of the function to call for
multiplication of one unsigned full-word by another.  If you do not
define this macro, the default name is used, which is
<CODE>__umulsi3</CODE>, a function defined in <TT>`gnulib'</TT>.
<P>

<DT><CODE>DIVSI3_LIBCALL</CODE>
<DD>A C string constant giving the name of the function to call for
division of one signed full-word by another.  If you do not define
this macro, the default name is used, which is <CODE>__divsi3</CODE>, a
function defined in <TT>`gnulib'</TT>.
<P>

<DT><CODE>UDIVSI3_LIBCALL</CODE>
<DD>A C string constant giving the name of the function to call for
division of one unsigned full-word by another.  If you do not define
this macro, the default name is used, which is <CODE>__udivsi3</CODE>, a
function defined in <TT>`gnulib'</TT>.
<P>

<DT><CODE>MODSI3_LIBCALL</CODE>
<DD>A C string constant giving the name of the function to call for the
remainder in division of one signed full-word by another.  If you do
not define this macro, the default name is used, which is
<CODE>__modsi3</CODE>, a function defined in <TT>`gnulib'</TT>.
<P>

<DT><CODE>UMODSI3_LIBCALL</CODE>
<DD>A C string constant giving the name of the function to call for the
remainder in division of one unsigned full-word by another.  If you do
not define this macro, the default name is used, which is
<CODE>__umodsi3</CODE>, a function defined in <TT>`gnulib'</TT>.
<P>

<DT><CODE>TARGET_MEM_FUNCTIONS</CODE>
<DD>Define this macro if GNU CC should generate calls to the System V
(and ANSI C) library functions <CODE>memcpy</CODE> and <CODE>memset</CODE>
rather than the BSD functions <CODE>bcopy</CODE> and <CODE>bzero</CODE>.
<P>

<DT><CODE>GNULIB_NEEDS_DOUBLE</CODE>
<DD>Define this macro if only <CODE>float</CODE> arguments cannot be passed to
library routines (so they must be converted to <CODE>double</CODE>).  This
macro affects both how library calls are generated and how the library
routines in <TT>`gnulib.c'</TT> accept their arguments.  It is useful on
machines where floating and fixed point arguments are passed
differently, such as the i860.
</DL>
<P>

<A NAME="Addressing Modes"></A>
<HR SIZE="6">
<A NAME="SEC89"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC88"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC90"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.7 Addressing Modes </H2>
<!--docid::SEC89::-->
<P>

<DL COMPACT>
<DT><CODE>HAVE_POST_INCREMENT</CODE>
<DD>Define this macro if the machine supports post-increment addressing.
<P>

<DT><CODE>HAVE_PRE_INCREMENT</CODE>
<DD><DT><CODE>HAVE_POST_DECREMENT</CODE>
<DD><DT><CODE>HAVE_PRE_DECREMENT</CODE>
<DD>Similar for other kinds of addressing.
<P>

<DT><CODE>CONSTANT_ADDRESS_P (<VAR>x</VAR>)</CODE>
<DD>A C expression that is 1 if the RTX <VAR>x</VAR> is a constant whose value
is an integer.  This includes integers whose values are not explicitly
known, such as <CODE>symbol_ref</CODE> and <CODE>label_ref</CODE> expressions and
<CODE>const</CODE> arithmetic expressions.
<P>

On most machines, this can be defined as <CODE>CONSTANT_P (<VAR>x</VAR>)</CODE>,
but a few machines are more restrictive in which constant addresses
are supported.
</P><P>

<DT><CODE>MAX_REGS_PER_ADDRESS</CODE>
<DD>A number, the maximum number of registers that can appear in a valid
memory address.  Note that it is up to you to specify a value equal to
the maximum number that <CODE>go_if_legitimate_address</CODE> would ever
accept.
<P>

<DT><CODE>GO_IF_LEGITIMATE_ADDRESS (<VAR>mode</VAR>, <VAR>x</VAR>, <VAR>label</VAR>)</CODE>
<DD>A C compound statement with a conditional <CODE>goto <VAR>label</VAR>;</CODE>
executed if <VAR>x</VAR> (an RTX) is a legitimate memory address on the
target machine for a memory operand of mode <VAR>mode</VAR>.
<P>

It usually pays to define several simpler macros to serve as
subroutines for this one.  Otherwise it may be too complicated to
understand.
</P><P>

This macro must exist in two variants: a strict variant and a
non-strict one.  The strict variant is used in the reload pass.  It
must be defined so that any pseudo-register that has not been
allocated a hard register is considered a memory reference.  In
contexts where some kind of register is required, a pseudo-register
with no hard register must be rejected.
</P><P>

The non-strict variant is used in other passes.  It must be defined to
accept all pseudo-registers in every context where some kind of
register is required.
</P><P>

Compiler source files that want to use the strict variant of this
macro define the macro <CODE>REG_OK_STRICT</CODE>.  You should use an
<CODE>#ifdef REG_OK_STRICT</CODE> conditional to define the strict variant
in that case and the non-strict variant otherwise.
</P><P>

Typically among the subroutines used to define
<CODE>GO_IF_LEGITIMATE_ADDRESS</CODE> are subroutines to check for
acceptable registers for various purposes (one for base registers, one
for index registers, and so on).  Then only these subroutine macros
need have two variants; the higher levels of macros may be the same
whether strict or not.</P><P>

Normally, constant addresses which are the sum of a <CODE>symbol_ref</CODE>
and an integer are stored inside a <CODE>const</CODE> RTX to mark them as
constant.  Therefore, there is no need to recognize such sums as
legitimate addresses.
</P><P>

Usually <CODE>PRINT_OPERAND_ADDRESS</CODE> is not prepared to handle constant
sums that are not marked with  <CODE>const</CODE>.  It assumes that a naked
<CODE>plus</CODE> indicates indexing.  If so, then you <EM>must</EM> reject such
naked constant sums as illegitimate addresses, so that none of them will
be given to <CODE>PRINT_OPERAND_ADDRESS</CODE>.</P><P>

<DT><CODE>REG_OK_FOR_BASE_P (<VAR>x</VAR>)</CODE>
<DD>A C expression that is nonzero if <VAR>x</VAR> (assumed to be a <CODE>reg</CODE>
RTX) is valid for use as a base register.  For hard registers, it
should always accept those which the hardware permits and reject the
others.  Whether the macro accepts or rejects pseudo registers must be
controlled by <CODE>REG_OK_STRICT</CODE> as described above.  This usually
requires two variant definitions, of which <CODE>REG_OK_STRICT</CODE>
controls the one actually used.
<P>

<DT><CODE>REG_OK_FOR_INDEX_P (<VAR>x</VAR>)</CODE>
<DD>A C expression that is nonzero if <VAR>x</VAR> (assumed to be a <CODE>reg</CODE>
RTX) is valid for use as an index register.
<P>

The difference between an index register and a base register is that
the index register may be scaled.  If an address involves the sum of
two registers, neither one of them scaled, then either one may be
labeled the "base" and the other the "index"; but whichever
labeling is used must fit the machine's constraints of which registers
may serve in each capacity.  The compiler will try both labelings,
looking for one that is valid, and will reload one or both registers
only if neither labeling works.
</P><P>

<DT><CODE>LEGITIMIZE_ADDRESS (<VAR>x</VAR>, <VAR>oldx</VAR>, <VAR>mode</VAR>, <VAR>win</VAR>)</CODE>
<DD>A C compound statement that attempts to replace <VAR>x</VAR> with a valid
memory address for an operand of mode <VAR>mode</VAR>.  <VAR>win</VAR> will be a
C statement label elsewhere in the code; the macro definition may use
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>GO_IF_LEGITIMATE_ADDRESS (<VAR>mode</VAR>, <VAR>x</VAR>, <VAR>win</VAR>);
</pre></td></tr></table></P><P>

to avoid further processing if the address has become legitimate.
</P><P>

<VAR>x</VAR> will always be the result of a call to <CODE>break_out_memory_refs</CODE>,
and <VAR>oldx</VAR> will be the operand that was given to that function to produce
<VAR>x</VAR>.
</P><P>

The code generated by this macro should not alter the substructure of
<VAR>x</VAR>.  If it transforms <VAR>x</VAR> into a more legitimate form, it
should assign <VAR>x</VAR> (which will always be a C variable) a new value.
</P><P>

It is not necessary for this macro to come up with a legitimate
address.  The compiler has standard ways of doing so in all cases.  In
fact, it is safe for this macro to do nothing.  But often a
machine-dependent strategy can generate better code.
</P><P>

<DT><CODE>GO_IF_MODE_DEPENDENT_ADDRESS (<VAR>addr</VAR>, <VAR>label</VAR>)</CODE>
<DD>A C statement or compound statement with a conditional <CODE>goto
<VAR>label</VAR>;</CODE> executed if memory address <VAR>x</VAR> (an RTX) can have
different meanings depending on the machine mode of the memory
reference it is used for.
<P>

Autoincrement and autodecrement addresses typically have mode-dependent
effects because the amount of the increment or decrement is the size
of the operand being addressed.  Some machines have other mode-dependent
addresses.  Many RISC machines have no mode-dependent addresses.
</P><P>

You may assume that <VAR>addr</VAR> is a valid address for the machine.
</P><P>

<DT><CODE>LEGITIMATE_CONSTANT_P (<VAR>x</VAR>)</CODE>
<DD>A C expression that is nonzero if <VAR>x</VAR> is a legitimate constant for
an immediate operand on the target machine.  You can assume that
either <VAR>x</VAR> is a <CODE>const_double</CODE> or it satisfies
<CODE>CONSTANT_P</CODE>, so you need not check these things.  In fact,
<SAMP>`1'</SAMP> is a suitable definition for this macro on machines where any
<CODE>const_double</CODE> is valid and anything <CODE>CONSTANT_P</CODE> is valid.</DL>
<P>

<A NAME="Delayed Branch"></A>
<HR SIZE="6">
<A NAME="SEC90"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC89"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC91"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.8 Parameters for Delayed Branch Optimization </H2>
<!--docid::SEC90::-->
<P>

<DL COMPACT>
<DT><CODE>HAVE_DELAYED_BRANCH</CODE>
<DD>Define this macro if the target machine has delayed branches, that is,
a branch does not take effect immediately, and the actual branch
instruction may be followed by one or more instructions that will be
issued before the PC is actually changed.
<P>

If defined, this allows a special scheduling pass to be run after the
second jump optimization to attempt to reorder instructions to exploit
this.  Defining this macro also requires the definition of certain
other macros described below.
</P><P>

<DT><CODE>DBR_SLOTS_AFTER (<VAR>insn</VAR>)</CODE>
<DD>This macro must be defined if <CODE>HAVE_DELAYED_BRANCH</CODE> is defined.
Its definition should be a C expression returning the number of
available delay slots following the instruction(s) output by the
pattern for <VAR>insn</VAR>.  The definition of "slot" is
machine-dependent, and may denote instructions, bytes, or whatever.
<P>

<DT><CODE>DBR_INSN_SLOTS (<VAR>insn</VAR>)</CODE>
<DD>This macro must be defined if <CODE>HAVE_DELAYED_BRANCH</CODE> is defined.
It should be a C expression returning the number of slots (typically
the number of machine instructions) consumed by <VAR>insn</VAR>.
<P>

You may assume that <VAR>insn</VAR> is truly an insn, not a note, label,
barrier, dispatch table, <CODE>use</CODE>, or <CODE>clobber</CODE>.
</P><P>

<DT><CODE>DBR_INSN_ELIGIBLE_P (<VAR>insn</VAR>, <VAR>dinsn</VAR>)</CODE>
<DD>A C expression whose value is non-zero if it is legitimate to put
<VAR>insn</VAR> in the delay slot following <VAR>dinsn</VAR>.
<P>

You do not need to take account of data flow considerations in the
definition of this macro, because the delayed branch optimizer always
does that.  This macro is needed only when certain insns may not be
placed in certain delay slots for reasons not evident from the RTL
expressions themselves.  If there are no such problems, you don't need
to define this macro.
</P><P>

You may assume that <VAR>insn</VAR> is truly an insn, not a note, label,
barrier, dispatch table, <CODE>use</CODE>, or <CODE>clobber</CODE>.  You may
assume that <VAR>dinsn</VAR> is a jump insn with a delay slot.
</P><P>

<DT><CODE>DBR_OUTPUT_SEQEND(<VAR>file</VAR>)</CODE>
<DD>A C statement, to be executed after all slot-filler instructions have
been output.  If necessary, call <CODE>dbr_sequence_length</CODE> to
determine the number of slots filled in a sequence (zero if not
currently outputting a sequence), to decide how many no-ops to output,
or whatever.
<P>

Don't define this macro if it has nothing to do, but it is helpful in
reading assembly output if the extent of the delay sequence is made
explicit (e.g. with white space).
</P><P>

Note that output routines for instructions with delay slots must be
prepared to deal with not being output as part of a sequence (i.e.
when the scheduling pass is not run, or when no slot fillers could be
found.)  The variable <CODE>final_sequence</CODE> is null when not
processing a sequence, otherwise it contains the <CODE>sequence</CODE> rtx
being output.
</DL>
<P>

<A NAME="Condition Code"></A>
<HR SIZE="6">
<A NAME="SEC91"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC90"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC92"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.9 Condition Code Information </H2>
<!--docid::SEC91::-->
<P>

The file <TT>`conditions.h'</TT> defines a variable <CODE>cc_status</CODE> to
describe how the condition code was computed (in case the interpretation of
the condition code depends on the instruction that it was set by).  This
variable contains the RTL expressions on which the condition code is
currently based, and several standard flags.
</P><P>

Sometimes additional machine-specific flags must be defined in the machine
description header file.  It can also add additional machine-specific
information by defining <CODE>CC_STATUS_MDEP</CODE>.
</P><P>

<DL COMPACT>
<DT><CODE>CC_STATUS_MDEP</CODE>
<DD>C code for a data type which is used for declaring the <CODE>mdep</CODE>
component of <CODE>cc_status</CODE>.  It defaults to <CODE>int</CODE>.
<P>

<DT><CODE>CC_STATUS_MDEP_INIT</CODE>
<DD>A C expression to initialize the <CODE>mdep</CODE> field to "empty".
The default definition does nothing, since most machines don't use
the field anyway.  If you want to use the field, you should probably
define this macro to initialize it.
<P>

<DT><CODE>NOTICE_UPDATE_CC (<VAR>exp</VAR>, <VAR>insn</VAR>)</CODE>
<DD>A C compound statement to set the components of <CODE>cc_status</CODE>
appropriately for an insn <VAR>insn</VAR> whose body is <VAR>exp</VAR>.  It is
this macro's responsibility to recognize insns that set the condition
code as a byproduct of other activity as well as those that explicitly
set <CODE>(cc0)</CODE>.
<P>

If there are insn that do not set the condition code but do alter
other machine registers, this macro must check to see whether they
invalidate the expressions that the condition code is recorded as
reflecting.  For example, on the 68000, insns that store in address
registers do not set the condition code, which means that usually
<CODE>NOTICE_UPDATE_CC</CODE> can leave <CODE>cc_status</CODE> unaltered for such
insns.  But suppose that the previous insn set the condition code
based on location <SAMP>`a4@(102)'</SAMP> and the current insn stores a new
value in <SAMP>`a4'</SAMP>.  Although the condition code is not changed by
this, it will no longer be true that it reflects the contents of
<SAMP>`a4@(102)'</SAMP>.  Therefore, <CODE>NOTICE_UPDATE_CC</CODE> must alter
<CODE>cc_status</CODE> in this case to say that nothing is known about the
condition code value.
</P><P>

The definition of <CODE>NOTICE_UPDATE_CC</CODE> must be prepared to deal
with the results of peephole optimization: insns whose patterns are
<CODE>parallel</CODE> RTXs containing various <CODE>reg</CODE>, <CODE>mem</CODE> or
constants which are just the operands.  The RTL structure of these
insns is not sufficient to indicate what the insns actually do.  What
<CODE>NOTICE_UPDATE_CC</CODE> should do when it sees one is just to run
<CODE>CC_STATUS_INIT</CODE>.
</DL>
<P>

<A NAME="Cross-compilation"></A>
<HR SIZE="6">
<A NAME="SEC92"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC91"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC93"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.10 Cross Compilation and Floating-Point Format </H2>
<!--docid::SEC92::-->
<P>

While all modern machines use 2's complement representation for integers,
there are a variety of representations for floating point numbers.  This
means that in a cross-compiler the representation of floating point numbers
in the compiled program may be different from that used in the machine
doing the compilation.
</P><P>

Because different representation systems may offer different amounts of
range and precision, the cross compiler cannot safely use the host
machine's floating point arithmetic.  Therefore, floating point constants
must be represented in the target machine's format.  This means that the
cross compiler cannot use <CODE>atof</CODE> to parse a floating point constant;
it must have its own special routine to use instead.  Also, constant
folding must emulate the target machine's arithmetic (or must not be done
at all).
</P><P>

The macros in the following table should be defined only if you are cross
compiling between different floating point formats.
</P><P>

Otherwise, don't define them. Then default definitions will be set up which
use <CODE>double</CODE> as the data type, <CODE>==</CODE> to test for equality, etc.
</P><P>

You don't need to worry about how many times you use an operand of any
of these macros.  The compiler never uses operands which have side effects.
</P><P>

<DL COMPACT>
<DT><CODE>REAL_VALUE_TYPE</CODE>
<DD>A macro for the C data type to be used to hold a floating point value
in the target machine's format.  Typically this would be a
<CODE>struct</CODE> containing an array of <CODE>int</CODE>.
<P>

<DT><CODE>REAL_VALUES_EQUAL (<VAR>x</VAR>, <VAR>y</VAR>)</CODE>
<DD>A macro for a C expression which compares for equality the two values,
<VAR>x</VAR> and <VAR>y</VAR>, both of type <CODE>REAL_VALUE_TYPE</CODE>.
<P>

<DT><CODE>REAL_VALUES_LESS (<VAR>x</VAR>, <VAR>y</VAR>)</CODE>
<DD>A macro for a C expression which tests whether <VAR>x</VAR> is less than
<VAR>y</VAR>, both values being of type <CODE>REAL_VALUE_TYPE</CODE> and
interpreted as floating point numbers in the target machine's
representation.
<P>

<DT><CODE>REAL_VALUE_LDEXP (<VAR>x</VAR>, <VAR>scale</VAR>)</CODE>
<DD>A macro for a C expression which performs the standard library
function <CODE>ldexp</CODE>, but using the target machine's floating point
representation.  Both <VAR>x</VAR> and the value of the expression have
type <CODE>REAL_VALUE_TYPE</CODE>.  The second argument, <VAR>scale</VAR>, is an
integer.
<P>

<DT><CODE>REAL_VALUE_ATOF (<VAR>string</VAR>)</CODE>
<DD>A macro for a C expression which converts <VAR>string</VAR>, an expression
of type <CODE>char *</CODE>, into a floating point number in the target
machine's representation.  The value has type <CODE>REAL_VALUE_TYPE</CODE>.
</DL>
<P>

Define the following additional macros if you want to make floating
point constant folding work while cross compiling.  If you don't
define them, cross compilation is still possible, but constant folding
will not happen for floating point values.
</P><P>

<DL COMPACT>
<DT><CODE>REAL_ARITHMETIC (<VAR>output</VAR>, <VAR>code</VAR>, <VAR>x</VAR>, <VAR>y</VAR>)</CODE>
<DD>A macro for a C statement which calculates an arithmetic operation of
the two floating point values <VAR>x</VAR> and <VAR>y</VAR>, both of type
<CODE>REAL_VALUE_TYPE</CODE> in the target machine's representation, to
produce a result of the same type and representation which is stored
in <VAR>output</VAR> (which will be a variable).
<P>

The operation to be performed is specified by <VAR>code</VAR>, a tree code
which will always be one of the following: <CODE>PLUS_EXPR</CODE>,
<CODE>MINUS_EXPR</CODE>, <CODE>MULT_EXPR</CODE>, <CODE>RDIV_EXPR</CODE>,
<CODE>MAX_EXPR</CODE>, <CODE>MIN_EXPR</CODE>.</P><P>

The expansion of this macro is responsible for checking for overflow.
If overflow happens, the macro expansion should execute the statement
<CODE>return 0;</CODE>, which indicates the inability to perform the
arithmetic operation requested.
</P><P>

<DT><CODE>REAL_VALUE_NEGATE (<VAR>x</VAR>)</CODE>
<DD>A macro for a C expression which returns the negative of the floating
point value <VAR>x</VAR>.  Both <VAR>x</VAR> and the value of the expression
have type <CODE>REAL_VALUE_TYPE</CODE> and are in the target machine's
floating point representation.
<P>

There is no way for this macro to report overflow, since overflow
can't happen in the negation operation.
</P><P>

<DT><CODE>REAL_VALUE_TO_INT (<VAR>low</VAR>, <VAR>high</VAR>, <VAR>x</VAR>)</CODE>
<DD>A macro for a C expression which converts a floating point value
<VAR>x</VAR> into a double-precision integer which is then stored into
<VAR>low</VAR> and <VAR>high</VAR>, two variables of type <VAR>int</VAR>.
<P>

<DT><CODE>REAL_VALUE_FROM_INT (<VAR>x</VAR>, <VAR>low</VAR>, <VAR>high</VAR>)</CODE>
<DD>A macro for a C expression which converts a double-precision integer
found in <VAR>low</VAR> and <VAR>high</VAR>, two variables of type <VAR>int</VAR>,
into a floating point value which is then stored into <VAR>x</VAR>.
</DL>
<P>

<A NAME="Misc"></A>
<HR SIZE="6">
<A NAME="SEC93"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC92"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC94"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.11 Miscellaneous Parameters </H2>
<!--docid::SEC93::-->
<P>

<DL COMPACT>
<DT><CODE>CASE_VECTOR_MODE</CODE>
<DD>An alias for a machine mode name.  This is the machine mode that
elements of a jump-table should have.
<P>

<DT><CODE>CASE_VECTOR_PC_RELATIVE</CODE>
<DD>Define this macro if jump-tables should contain relative addresses.
<P>

<DT><CODE>CASE_DROPS_THROUGH</CODE>
<DD>Define this if control falls through a <CODE>case</CODE> insn when the index
value is out of range.  This means the specified default-label is
actually ignored by the <CODE>case</CODE> insn proper.
<P>

<DT><CODE>IMPLICIT_FIX_EXPR</CODE>
<DD>An alias for a tree code that should be used by default for conversion
of floating point values to fixed point.  Normally,
<CODE>FIX_ROUND_EXPR</CODE> is used.<P>

<DT><CODE>FIXUNS_TRUNC_LIKE_FIX_TRUNC</CODE>
<DD>Define this macro if the same instructions that convert a floating
point number to a signed fixed point number also convert validly to an
unsigned one.
<P>

<DT><CODE>EASY_DIV_EXPR</CODE>
<DD>An alias for a tree code that is the easiest kind of division to
compile code for in the general case.  It may be
<CODE>TRUNC_DIV_EXPR</CODE>, <CODE>FLOOR_DIV_EXPR</CODE>, <CODE>CEIL_DIV_EXPR</CODE> or
<CODE>ROUND_DIV_EXPR</CODE>.  These four division operators differ in how
they round the result to an integer.  <CODE>EASY_DIV_EXPR</CODE> is used
when it is permissible to use any of those kinds of division and the
choice should be made on the basis of efficiency.<P>

<DT><CODE>DEFAULT_SIGNED_CHAR</CODE>
<DD>An expression whose value is 1 or 0, according to whether the type
<CODE>char</CODE> should be signed or unsigned by default.  The user can
always override this default with the options <SAMP>`-fsigned-char'</SAMP>
and <SAMP>`-funsigned-char'</SAMP>.
<P>

<DT><CODE>SCCS_DIRECTIVE</CODE>
<DD>Define this if the preprocessor should ignore <CODE>#sccs</CODE> directives
and print no error message.
<P>

<DT><CODE>HAVE_VPRINTF</CODE>
<DD>Define this if the library function <CODE>vprintf</CODE> is available on your
system.
<P>

<DT><CODE>MOVE_MAX</CODE>
<DD>The maximum number of bytes that a single instruction can move quickly
from memory to memory.
<P>

<DT><CODE>INT_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>int</CODE> on the
target machine.  If you don't define this, the default is one word.
<P>

<DT><CODE>SHORT_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>short</CODE> on the
target machine.  If you don't define this, the default is half a word.
(If this would be less than one storage unit, it is rounded up to one
unit.)
<P>

<DT><CODE>LONG_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>long</CODE> on the
target machine.  If you don't define this, the default is one word.
<P>

<DT><CODE>LONG_LONG_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>long long</CODE> on the
target machine.  If you don't define this, the default is two
words.
<P>

<DT><CODE>CHAR_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>char</CODE> on the
target machine.  If you don't define this, the default is one quarter
of a word.  (If this would be less than one storage unit, it is rounded up
to one unit.)
<P>

<DT><CODE>FLOAT_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>float</CODE> on the
target machine.  If you don't define this, the default is one word.
<P>

<DT><CODE>DOUBLE_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>double</CODE> on the
target machine.  If you don't define this, the default is two
words.
<P>

<DT><CODE>LONG_DOUBLE_TYPE_SIZE</CODE>
<DD>A C expression for the size in bits of the type <CODE>long double</CODE> on
the target machine.  If you don't define this, the default is two
words.
<P>

<DT><CODE>SLOW_BYTE_ACCESS</CODE>
<DD>Define this macro as a C expression which is nonzero if accessing less
than a word of memory (i.e. a <CODE>char</CODE> or a <CODE>short</CODE>) is slow
(requires more than one instruction).
<P>

<DT><CODE>SLOW_ZERO_EXTEND</CODE>
<DD>Define this macro if zero-extension (of a <CODE>char</CODE> or <CODE>short</CODE>
to an <CODE>int</CODE>) can be done faster if the destination is a register
that is known to be zero.
<P>

If you define this macro, you must have instruction patterns that
recognize RTL structures like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set (strict-low-part (subreg:QI (reg:SI <small>...</small>) 0)) <small>...</small>)
</pre></td></tr></table></P><P>

and likewise for <CODE>HImode</CODE>.
</P><P>

<DT><CODE>SHIFT_COUNT_TRUNCATED</CODE>
<DD>Define this macro if shift instructions ignore all but the lowest few
bits of the shift count.  It implies that a sign-extend or zero-extend
instruction for the shift count can be omitted.
<P>

<DT><CODE>TRULY_NOOP_TRUNCATION (<VAR>outprec</VAR>, <VAR>inprec</VAR>)</CODE>
<DD>A C expression which is nonzero if on this machine it is safe to
"convert" an integer of <VAR>inprec</VAR> bits to one of <VAR>outprec</VAR>
bits (where <VAR>outprec</VAR> is smaller than <VAR>inprec</VAR>) by merely
operating on it as if it had only <VAR>outprec</VAR> bits.
<P>

On many machines, this expression can be 1.
</P><P>

<DT><CODE>NO_FUNCTION_CSE</CODE>
<DD>Define this macro if it is as good or better to call a constant
function address than to call an address kept in a register.
<P>

<DT><CODE>PROMOTE_PROTOTYPES</CODE>
<DD>Define this macro if an argument declared as <CODE>char</CODE> or
<CODE>short</CODE> in a prototype should actually be passed as an
<CODE>int</CODE>.  In addition to avoiding errors in certain cases of
mismatch, it also makes for better code on certain machines.
<P>

<DT><CODE>STORE_FLAG_VALUE</CODE>
<DD>A C expression for the value stored by a store-flag instruction
(<CODE>s<VAR>cond</VAR></CODE>) when the condition is true.  This is usually 1 or
-1; it is required to be an odd number or a negative number.
<P>

Do not define <CODE>STORE_FLAG_VALUE</CODE> if the machine has no store-flag
instructions.
</P><P>

<DT><CODE>Pmode</CODE>
<DD>An alias for the machine mode for pointers.  Normally the definition
can be
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define Pmode SImode
</pre></td></tr></table></P><P>

<DT><CODE>FUNCTION_MODE</CODE>
<DD>An alias for the machine mode used for memory references to functions
being called, in <CODE>call</CODE> RTL expressions.  On most machines this
should be <CODE>QImode</CODE>.
<P>

<DT><CODE>INSN_MACHINE_INFO</CODE>
<DD>This macro should expand into a C structure type to use for the
machine-dependent info field specified with the optional last argument
in <CODE>define_insn</CODE> and <CODE>define_peephole</CODE> patterns.  For example,
it might expand into <CODE>struct machine_info</CODE>; then it would be up
to you to define this structure in the <TT>`tm.h'</TT> file.
<P>

You do not need to define this macro if you do not write the optional
last argument in any of the patterns in the machine description.
</P><P>

<DT><CODE>DEFAULT_MACHINE_INFO</CODE>
<DD>This macro should expand into a C initializer to use to initialize
the machine-dependent info for one insn pattern.  It is used for patterns
that do not specify the machine-dependent info.
<P>

If you do not define this macro, zero is used.
</P><P>

<DT><CODE>CONST_COSTS (<VAR>x</VAR>, <VAR>code</VAR>)</CODE>
<DD>A part of a C <CODE>switch</CODE> statement that describes the relative
costs of constant RTL expressions.  It must contain <CODE>case</CODE> labels
for expression codes <CODE>const_int</CODE>, <CODE>const</CODE>, <CODE>symbol_ref</CODE>, <CODE>label_ref</CODE>
and <CODE>const_double</CODE>.  Each case must ultimately reach a
<CODE>return</CODE> statement to return the relative cost of the use of that
kind of constant value in an expression.  The cost may depend on the
precise value of the constant, which is available for examination in
<VAR>x</VAR>.
<P>

<VAR>code</VAR> is the expression code--redundant, since it can be
obtained with <CODE>GET_CODE (<VAR>x</VAR>)</CODE>.
</P><P>

<DT><CODE>DOLLARS_IN_IDENTIFIERS</CODE>
<DD>Define this to be nonzero if the character <SAMP>`$'</SAMP> should be allowed
by default in identifier names.
</DL>
<P>

<A NAME="Assembler Format"></A>
<HR SIZE="6">
<A NAME="SEC94"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC93"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC95"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 14.12 Output of Assembler Code </H2>
<!--docid::SEC94::-->
<P>

<DL COMPACT>
<DT><CODE>ASM_SPEC</CODE>
<DD>A C string constant that tells the GNU CC driver program options to
pass to the assembler.  It can also specify how to translate options
you give to GNU CC into options for GNU CC to pass to the assembler.
See the file <TT>`tm-sun3.h'</TT> for an example of this.
<P>

Do not define this macro if it does not need to do anything.
</P><P>

<DT><CODE>LINK_SPEC</CODE>
<DD>A C string constant that tells the GNU CC driver program options to
pass to the linker.  It can also specify how to translate options you
give to GNU CC into options for GNU CC to pass to the linker.
<P>

Do not define this macro if it does not need to do anything.
</P><P>

<DT><CODE>LIB_SPEC</CODE>
<DD>Another C string constant used much like <CODE>LINK_SPEC</CODE>.  The difference
between the two is that <CODE>LIBS_SPEC</CODE> is used at the end of the
command given to the linker.
<P>

If this macro is not defined, a default is provided that
loads the standard C library from the usual place.  See <TT>`gcc.c'</TT>.
</P><P>

<DT><CODE>LIBG_SPEC</CODE>
<DD>Another C string constant used much like <CODE>LINK_SPEC</CODE>.
This controls whether to link <TT>`libg.a'</TT> when debugging.
Some systems expect this; others do not have any <TT>`libg.a'</TT>.
<P>

If this macro is not defined, a default is provided that loads the
<TT>`libg.a'</TT> provided <SAMP>`-g'</SAMP> is specified.  See <TT>`gcc.c'</TT>.
</P><P>

<DT><CODE>STARTFILE_SPEC</CODE>
<DD>Another C string constant used much like <CODE>LINK_SPEC</CODE>.  The
difference between the two is that <CODE>STARTFILE_SPEC</CODE> is used at
the very beginning of the command given to the linker.
<P>

If this macro is not defined, a default is provided that loads the
standard C startup file from the usual place.  See <TT>`gcc.c'</TT>.
</P><P>

<DT><CODE>STANDARD_EXEC_PREFIX</CODE>
<DD>Define this macro as a C string constant if you wish to override the
standard choice of <TT>`/usr/local/lib/gcc-'</TT> as the default prefix to
try when searching for the executable files of the compiler.
<P>

The prefix specified by the <SAMP>`-B'</SAMP> option, if any, is tried before
the default prefix.  After the default prefix, if the executable is
not found that way, <TT>`/usr/lib/gcc-'</TT> is tried next; then the
directories in your search path for shell commands are searched.
</P><P>

<DT><CODE>STANDARD_STARTFILE_PREFIX</CODE>
<DD>Define this macro as a C string constant if you wish to override the
standard choice of <TT>`/usr/local/lib/'</TT> as the default prefix to try
when searching for startup files such as <TT>`crt0.o'</TT>.
<P>

In this search, all the prefixes tried for executable files are tried
first.  Then comes the default startfile prefix specified by this
macro, followed by the prefixes <TT>`/lib/'</TT> and <TT>`/usr/lib/'</TT> as
last resorts.
</P><P>

<DT><CODE>ASM_FILE_START (<VAR>stream</VAR>)</CODE>
<DD>A C expression which outputs to the stdio stream <VAR>stream</VAR>
some appropriate text to go at the start of an assembler file.
<P>

Normally this macro is defined to output a line containing
<SAMP>`#NO_APP'</SAMP>, which is a comment that has no effect on most
assemblers but tells the GNU assembler that it can save time by not
checking for certain assembler constructs.
</P><P>

On systems that use SDB, it is necessary to output certain commands;
see <TT>`tm-attasm.h'</TT>.
</P><P>

<DT><CODE>ASM_FILE_END (<VAR>stream</VAR>)</CODE>
<DD>A C expression which outputs to the stdio stream <VAR>stream</VAR>
some appropriate text to go at the end of an assembler file.
<P>

If this macro is not defined, the default is to output nothing
special at the end of the file.  Most systems don't require any
definition.
</P><P>

On systems that use SDB, it is necessary to output certain commands;
see <TT>`tm-attasm.h'</TT>.
</P><P>

<DT><CODE>ASM_IDENTIFY_GCC (<VAR>file</VAR>)</CODE>
<DD>A C statement to output assembler commands which will identify
the object file as having been compiled with GNU CC (or another
GNU compiler).
<P>

If you don't define this macro, the string <SAMP>`gcc_compiled.:'</SAMP>
is output.  This string is calculated to define a symbol which,
on BSD systems, will never be defined for any other reason.
GDB checks for the presence of this symbol when reading the
symbol table of an executable.
</P><P>

On non-BSD systems, you must arrange communication with GDB in
some other fashion.  If GDB is not used on your system, you can
define this macro with an empty body.
</P><P>

<DT><CODE>ASM_APP_ON</CODE>
<DD>A C string constant for text to be output before each <CODE>asm</CODE>
statement or group of consecutive ones.  Normally this is
<CODE>"#APP"</CODE>, which is a comment that has no effect on most
assemblers but tells the GNU assembler that it must check the lines
that follow for all valid assembler constructs.
<P>

<DT><CODE>ASM_APP_OFF</CODE>
<DD>A C string constant for text to be output after each <CODE>asm</CODE>
statement or group of consecutive ones.  Normally this is
<CODE>"#NO_APP"</CODE>, which tells the GNU assembler to resume making the
time-saving assumptions that are valid for ordinary compiler output.
<P>

<DT><CODE>TEXT_SECTION_ASM_OP</CODE>
<DD>A C string constant for the assembler operation that should precede
instructions and read-only data.  Normally <CODE>".text"</CODE> is right.
<P>

<DT><CODE>DATA_SECTION_ASM_OP</CODE>
<DD>A C string constant for the assembler operation to identify the
following data as writable initialized data.  Normally <CODE>".data"</CODE>
is right.
<P>

<DT><CODE>EXTRA_SECTIONS</CODE>
<DD>A list of names for sections other than the standard two, which are
<CODE>in_text</CODE> and <CODE>in_data</CODE>.  You need not define this macro
on a system with no other sections (that GCC needs to use).
<P>

<DT><CODE>EXTRA_SECTION_FUNCTIONS</CODE>
<DD>One or more functions to be defined in <TT>`varasm.c'</TT>.  These
functions should do jobs analogous to those of <CODE>text_section</CODE> and
<CODE>data_section</CODE>, for your additional sections.  Do not define this
macro if you do not define <CODE>EXTRA_SECTIONS</CODE>.
<P>

<DT><CODE>SELECT_SECTION (<VAR>exp</VAR>)</CODE>
<DD>A C statement or statements to switch to the appropriate section for
output of <VAR>exp</VAR>.  You can assume that <VAR>exp</VAR> is either a
<CODE>VAR_DECL</CODE> node or a constant of some sort.  Select the section
by calling <CODE>text_section</CODE> or one of the alternatives for other
sections.
<P>

Do not define this macro if you use only the standard two sections
and put all read-only variables and constants in the text section.
</P><P>

<DT><CODE>SELECT_RTX_SECTION (<VAR>mode</VAR>, <VAR>rtx</VAR>)</CODE>
<DD>A C statement or statements to switch to the appropriate section for
output of <VAR>rtx</VAR> in mode <VAR>mode</VAR>.  You can assume that <VAR>rtx</VAR>
is some kind of constant in RTL.  The argument <VAR>mode</VAR> is redundant
except in the case of a <CODE>const_int</CODE> rtx.  Select the section by
calling <CODE>text_section</CODE> or one of the alternatives for other
sections.  
<P>

Do not define this macro if you use only the standard two sections and
put all constants in the text section.  
</P><P>

<DT><CODE>REGISTER_NAMES</CODE>
<DD>A C initializer containing the assembler's names for the machine
registers, each one as a C string constant.  This is what translates
register numbers in the compiler into assembler language.
<P>

<DT><CODE>DBX_REGISTER_NUMBER (<VAR>regno</VAR>)</CODE>
<DD>A C expression that returns the DBX register number for the compiler
register number <VAR>regno</VAR>.  In simple cases, the value of this
expression may be <VAR>regno</VAR> itself.  But sometimes there are some
registers that the compiler knows about and DBX does not, or vice
versa.  In such cases, some register may need to have one number in
the compiler and another for DBX.
<P>

<DT><CODE>DBX_DEBUGGING_INFO</CODE>
<DD>Define this macro if GNU CC should produce debugging output for DBX
in response to the <SAMP>`-g'</SAMP> option.
<P>

<DT><CODE>SDB_DEBUGGING_INFO</CODE>
<DD>Define this macro if GNU CC should produce debugging output for SDB
in response to the <SAMP>`-g'</SAMP> option.
<P>

<DT><CODE>PUT_SDB_<VAR>op</VAR></CODE>
<DD>Define these macros to override the assembler syntax for the special
SDB assembler directives.  See <TT>`sdbout.c'</TT> for a list of these
macros and their arguments.  If the standard syntax is used, you need
not define them yourself.
<P>

<DT><CODE>SDB_GENERATE_FAKE</CODE>
<DD>Define this macro to override the usual method of constructing a dummy
name for anonymous structure and union types.  See <TT>`sdbout.c'</TT> for
more information.
<P>

<DT><CODE>DBX_NO_XREFS</CODE>
<DD>Define this macro if DBX on your system does not support the construct
<SAMP>`xs<VAR>tagname</VAR>'</SAMP>.  On some systems, this construct is used to
describe a forward reference to a structure named <VAR>tagname</VAR>.
On other systems, this construct is not supported at all.
<P>

<DT><CODE>DBX_CONTIN_LENGTH</CODE>
<DD>A symbol name in DBX-format debugging information is normally
continued (split into two separate <CODE>.stabs</CODE> directives) when it
exceeds a certain length (by default, 80 characters).  On some
operating systems, DBX requires this splitting; on others, splitting
must not be done.  You can inhibit splitting by defining this macro
with the value zero.  You can override the default splitting-length by
defining this macro as an expression for the length you desire.
<P>

<DT><CODE>DBX_CONTIN_CHAR</CODE>
<DD>Normally continuation is indicated by adding a <SAMP>`\'</SAMP> character to
the end of a <CODE>.stabs</CODE> string when a continuation follows.  To use
a different character instead, define this macro as a character
constant for the character you want to use.  Do not define this macro
if backslash is correct for your system.
<P>

<DT><CODE>DBX_STATIC_STAB_DATA_SECTION</CODE>
<DD>Define this macro if it is necessary to go to the data section before
outputting the <SAMP>`.stabs'</SAMP> pseudo-op for a non-global static
variable.
<P>

<DT><CODE>ASM_OUTPUT_LABEL (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE>
<DD>A C statement (sans semicolon) to output to the stdio stream
<VAR>stream</VAR> the assembler definition of a label named <VAR>name</VAR>.
Use the expression <CODE>assemble_name (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE> to
output the name itself; before and after that, output the additional
assembler syntax for defining the name, and a newline.
<P>

<DT><CODE>ASM_DECLARE_FUNCTION_NAME (<VAR>stream</VAR>, <VAR>name</VAR>, <VAR>decl</VAR>)</CODE>
<DD>A C statement (sans semicolon) to output to the stdio stream
<VAR>stream</VAR> any text necessary for declaring the name <VAR>name</VAR> of a
function which is being defined.  This macro is responsible for
outputting the label definition (perhaps using
<CODE>ASM_OUTPUT_LABEL</CODE>).  The argument <VAR>decl</VAR> is the
<CODE>FUNCTION_DECL</CODE> tree node representing the function.
<P>

If this macro is not defined, then the function name is defined in the
usual manner as a label (by means of <CODE>ASM_OUTPUT_LABEL</CODE>).
</P><P>

<DT><CODE>ASM_GLOBALIZE_LABEL (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE>
<DD>A C statement (sans semicolon) to output to the stdio stream
<VAR>stream</VAR> some commands that will make the label <VAR>name</VAR> global;
that is, available for reference from other files.  Use the expression
<CODE>assemble_name (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE> to output the name
itself; before and after that, output the additional assembler syntax
for making that name global, and a newline.
<P>

<DT><CODE>ASM_OUTPUT_EXTERNAL (<VAR>stream</VAR>, <VAR>decl</VAR>, <VAR>name</VAR>)</CODE>
<DD>A C statement (sans semicolon) to output to the stdio stream
<VAR>stream</VAR> any text necessary for declaring the name of an external
symbol named <VAR>name</VAR> which is referenced in this compilation but
not defined.  The value of <VAR>decl</VAR> is the tree node for the
declaration.
<P>

This macro need not be defined if it does not need to output anything.
The GNU assembler and most Unix assemblers don't require anything.
</P><P>

<DT><CODE>ASM_OUTPUT_LABELREF (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> a reference
in assembler syntax to a label named <VAR>name</VAR>.  The character
<SAMP>`_'</SAMP> should be added to the front of the name, if that is
customary on your operating system, as it is in most Berkeley Unix
systems.  This macro is used in <CODE>assemble_name</CODE>.
<P>

<DT><CODE>ASM_GENERATE_INTERNAL_LABEL (<VAR>string</VAR>, <VAR>prefix</VAR>, <VAR>num</VAR>)</CODE>
<DD>A C statement to store into the string <VAR>string</VAR> a label whose name
is made from the string <VAR>prefix</VAR> and the number <VAR>num</VAR>.
<P>

This string, when output subsequently by <CODE>ASM_OUTPUT_LABELREF</CODE>,
should produce the same output that <CODE>ASM_OUTPUT_INTERNAL_LABEL</CODE>
would produce with the same <VAR>prefix</VAR> and <VAR>num</VAR>.
</P><P>

<DT><CODE>ASM_OUTPUT_INTERNAL_LABEL (<VAR>stream</VAR>, <VAR>prefix</VAR>, <VAR>num</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> a label whose
name is made from the string <VAR>prefix</VAR> and the number <VAR>num</VAR>.
These labels are used for internal purposes, and there is no reason
for them to appear in the symbol table of the object file.  On many
systems, the letter <SAMP>`L'</SAMP> at the beginning of a label has this
effect.  The usual definition of this macro is as follows:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>fprintf (<VAR>stream</VAR>, "L%s%d:\n", <VAR>prefix</VAR>, <VAR>num</VAR>)
</pre></td></tr></table></P><P>

<DT><CODE>ASM_OUTPUT_CASE_LABEL (<VAR>stream</VAR>, <VAR>prefix</VAR>, <VAR>num</VAR>, <VAR>table</VAR>)</CODE>
<DD>Define this if the label before a jump-table needs to be output
specially.  The first three arguments are the same as for
<CODE>ASM_OUTPUT_INTERNAL_LABEL</CODE>; the fourth argument is the
jump-table which follows (a <CODE>jump_insn</CODE> containing an
<CODE>addr_vec</CODE> or <CODE>addr_diff_vec</CODE>).
<P>

This feature is used on system V to output a <CODE>swbeg</CODE> statement
for the table.
</P><P>

If this macro is not defined, these labels are output with
<CODE>ASM_OUTPUT_INTERNAL_LABEL</CODE>.
</P><P>

<DT><CODE>ASM_OUTPUT_CASE_END (<VAR>stream</VAR>, <VAR>num</VAR>, <VAR>table</VAR>)</CODE>
<DD>Define this if something special must be output at the end of a
jump-table.  The definition should be a C statement to be executed
after the assembler code for the table is written.  It should write
the appropriate code to stdio stream <VAR>stream</VAR>.  The argument
<VAR>table</VAR> is the jump-table insn, and <VAR>num</VAR> is the label-number
of the preceding label.
<P>

If this macro is not defined, nothing special is output at the end of
the jump-table.
</P><P>

<DT><CODE>ASM_OUTPUT_ALIGN_CODE (<VAR>file</VAR>)</CODE>
<DD>A C expression to output text to align the location counter in the way
that is desirable at a point in the code that is reached only by
jumping.
<P>

This macro need not be defined if you don't want any special alignment
to be done at such a time.  Most machine descriptions do not currently
define the macro.
</P><P>

<DT><CODE>ASM_FORMAT_PRIVATE_NAME (<VAR>outvar</VAR>, <VAR>name</VAR>, <VAR>number</VAR>)</CODE>
<DD>A C expression to assign to <VAR>outvar</VAR> (which is a variable of type
<CODE>char *</CODE>) a newly allocated string made from the string
<VAR>name</VAR> and the number <VAR>number</VAR>, with some suitable punctuation
added.  Use <CODE>alloca</CODE> to get space for the string.
<P>

This string will be used as the argument to <CODE>ASM_OUTPUT_LABELREF</CODE>
to produce an assembler label for an internal static variable whose
name is <VAR>name</VAR>.  Therefore, the string must be such as to result
in valid assembler code.  The argument <VAR>number</VAR> is different each
time this macro is executed; it prevents conflicts between
similarly-named internal static variables in different scopes.
</P><P>

Ideally this string should not be a valid C identifier, to prevent any
conflict with the user's own symbols.  Most assemblers allow periods
or percent signs in assembler symbols; putting at least one of these
between the name and the number will suffice.
</P><P>

<DT><CODE>ASM_OUTPUT_REG_PUSH (<VAR>stream</VAR>, <VAR>regno</VAR>)</CODE>
<DD>A C expression to output to <VAR>stream</VAR> some assembler code
which will push hard register number <VAR>regno</VAR> onto the stack.
The code need not be optimal, since this macro is used only when
profiling.
<P>

<DT><CODE>ASM_OUTPUT_REG_POP (<VAR>stream</VAR>, <VAR>regno</VAR>)</CODE>
<DD>A C expression to output to <VAR>stream</VAR> some assembler code
which will pop hard register number <VAR>regno</VAR> off of the stack.
The code need not be optimal, since this macro is used only when
profiling.
<P>

<DT><CODE>ASM_OUTPUT_ADDR_DIFF_ELT (<VAR>stream</VAR>, <VAR>value</VAR>, <VAR>rel</VAR>)</CODE>
<DD>This macro should be provided on machines where the addresses
in a dispatch table are relative to the table's own address.
<P>

The definition should be a C statement to output to the stdio stream
<VAR>stream</VAR> an assembler pseudo-instruction to generate a difference
between two labels.  <VAR>value</VAR> and <VAR>rel</VAR> are the numbers of two
internal labels.  The definitions of these labels are output using
<CODE>ASM_OUTPUT_INTERNAL_LABEL</CODE>, and they must be printed in the same
way here.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>fprintf (<VAR>stream</VAR>, "\t.word L%d-L%d\n",
         <VAR>value</VAR>, <VAR>rel</VAR>)
</pre></td></tr></table></P><P>

<DT><CODE>ASM_OUTPUT_ADDR_VEC_ELT (<VAR>stream</VAR>, <VAR>value</VAR>)</CODE>
<DD>This macro should be provided on machines where the addresses
in a dispatch table are absolute.
<P>

The definition should be a C statement to output to the stdio stream
<VAR>stream</VAR> an assembler pseudo-instruction to generate a reference to
a label.  <VAR>value</VAR> is the number of an internal label whose
definition is output using <CODE>ASM_OUTPUT_INTERNAL_LABEL</CODE>.
For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>fprintf (<VAR>stream</VAR>, "\t.word L%d\n", <VAR>value</VAR>)
</pre></td></tr></table></P><P>

<DT><CODE>ASM_OUTPUT_DOUBLE (<VAR>stream</VAR>, <VAR>value</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to assemble a <CODE>double</CODE> constant whose value is
<VAR>value</VAR>.  <VAR>value</VAR> will be a C expression of type
<CODE>double</CODE>.
<P>

<DT><CODE>ASM_OUTPUT_FLOAT (<VAR>stream</VAR>, <VAR>value</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to assemble a <CODE>float</CODE> constant whose value is
<VAR>value</VAR>.  <VAR>value</VAR> will be a C expression of type <CODE>float</CODE>.
<P>

<DT><CODE>ASM_OUTPUT_INT (<VAR>stream</VAR>, <VAR>exp</VAR>)</CODE>
<DD><DT><CODE>ASM_OUTPUT_SHORT (<VAR>stream</VAR>, <VAR>exp</VAR>)</CODE>
<DD><DT><CODE>ASM_OUTPUT_CHAR (<VAR>stream</VAR>, <VAR>exp</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to assemble a <CODE>int</CODE>, <CODE>short</CODE> or <CODE>char</CODE>
constant whose value is <VAR>value</VAR>.  The argument <VAR>exp</VAR> will be an
RTL expression which represents a constant value.  Use
<SAMP>`output_addr_const (<VAR>stream</VAR>, <VAR>exp</VAR>)'</SAMP> to output this value
as an assembler expression.<P>

<DT><CODE>ASM_OUTPUT_DOUBLE_INT (<VAR>stream</VAR>, <VAR>exp</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to assemble a <CODE>long long</CODE> constant whose value is
<VAR>exp</VAR>.  The argument <VAR>exp</VAR> will be an RTL expression which
represents a constant value.  It may be a <CODE>const_double</CODE> RTX,
or it may be an ordinary single-precision constant.  In the latter
case, you should zero-extend it.
<P>

<DT><CODE>ASM_OUTPUT_BYTE (<VAR>stream</VAR>, <VAR>value</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to assemble a single byte containing the number <VAR>value</VAR>.
<P>

<DT><CODE>ASM_OUTPUT_ASCII (<VAR>stream</VAR>, <VAR>ptr</VAR>, <VAR>len</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to assemble a string constant containing the <VAR>len</VAR>
bytes at <VAR>ptr</VAR>.  <VAR>ptr</VAR> will be a C expression of type
<CODE>char *</CODE> and <VAR>len</VAR> a C expression of type <CODE>int</CODE>.
<P>

If the assembler has a <CODE>.ascii</CODE> pseudo-op as found in the
Berkeley Unix assembler, do not define the macro
<CODE>ASM_OUTPUT_ASCII</CODE>.
</P><P>

<DT><CODE>ASM_OUTPUT_SKIP (<VAR>stream</VAR>, <VAR>nbytes</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to advance the location counter by <VAR>nbytes</VAR> bytes.
<VAR>nbytes</VAR> will be a C expression of type <CODE>int</CODE>.
<P>

<DT><CODE>ASM_OUTPUT_ALIGN (<VAR>stream</VAR>, <VAR>power</VAR>)</CODE>
<DD>A C statement to output to the stdio stream <VAR>stream</VAR> an assembler
instruction to advance the location counter to a multiple of 2 to the
<VAR>power</VAR> bytes.  <VAR>power</VAR> will be a C expression of type <CODE>int</CODE>.
<P>

<DT><CODE>ASM_OUTPUT_COMMON (<VAR>stream</VAR>, <VAR>name</VAR>, <VAR>size</VAR>, <VAR>rounded</VAR>)</CODE>
<DD>A C statement (sans semicolon) to output to the stdio stream
<VAR>stream</VAR> the assembler definition of a common-label named
<VAR>name</VAR> whose size is <VAR>size</VAR> bytes.  The variable <VAR>rounded</VAR>
is the size rounded up to whatever alignment the caller wants.
<P>

Use the expression <CODE>assemble_name (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE> to
output the name itself; before and after that, output the additional
assembler syntax for defining the name, and a newline.
</P><P>

This macro controls how the assembler definitions of uninitialized
global variables are output.
</P><P>

<DT><CODE>ASM_OUTPUT_LOCAL (<VAR>stream</VAR>, <VAR>name</VAR>, <VAR>size</VAR>, <VAR>rounded</VAR>)</CODE>
<DD>A C statement (sans semicolon) to output to the stdio stream
<VAR>stream</VAR> the assembler definition of a local-common-label named
<VAR>name</VAR> whose size is <VAR>size</VAR> bytes.  The variable <VAR>rounded</VAR>
is the size rounded up to whatever alignment the caller wants.
<P>

Use the expression <CODE>assemble_name (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE> to
output the name itself; before and after that, output the additional
assembler syntax for defining the name, and a newline.
</P><P>

This macro controls how the assembler definitions of uninitialized
static variables are output.
</P><P>

<DT><CODE>ASM_OUTPUT_SOURCE_FILENAME (<VAR>stream</VAR>, <VAR>name</VAR>)</CODE>
<DD>A C statment to output DBX or SDB debugging information which indicates
that filename <VAR>name</VAR> is the current source file to the stdio stream
<VAR>stream</VAR>.
<P>

This macro need not be defined if the standard form of debugging
information for the debugger in use is appropriate.
</P><P>

<DT><CODE>ASM_OUTPUT_SOURCE_LINE (<VAR>stream</VAR>, <VAR>line</VAR>)</CODE>
<DD>A C statment to output DBX or SDB debugging information before code
for line number <VAR>line</VAR> of the current source file to the
stdio stream <VAR>stream</VAR>.
<P>

This macro need not be defined if the standard form of debugging
information for the debugger in use is appropriate.
</P><P>

<DT><CODE>ASM_OUTPUT_IDENT (<VAR>stream</VAR>, <VAR>string</VAR>)</CODE>
<DD>A C statement to output something to the assembler file to handle a
<SAMP>`#ident'</SAMP> directive containing the text <VAR>string</VAR>.  If this
macro is not defined, nothing is output for a <SAMP>`#ident'</SAMP> directive.
<P>

<DT><CODE>TARGET_BELL</CODE>
<DD>A C constant expression for the integer value for escape sequence
<SAMP>`\a'</SAMP>.
<P>

<DT><CODE>TARGET_BS</CODE>
<DD><DT><CODE>TARGET_TAB</CODE>
<DD><DT><CODE>TARGET_NEWLINE</CODE>
<DD>C constant expressions for the integer values for escape sequences
<SAMP>`\b'</SAMP>, <SAMP>`\t'</SAMP> and <SAMP>`\n'</SAMP>.
<P>

<DT><CODE>TARGET_VT</CODE>
<DD><DT><CODE>TARGET_FF</CODE>
<DD><DT><CODE>TARGET_CR</CODE>
<DD>C constant expressions for the integer values for escape sequences
<SAMP>`\v'</SAMP>, <SAMP>`\f'</SAMP> and <SAMP>`\r'</SAMP>.
<P>

<DT><CODE>ASM_OUTPUT_OPCODE (<VAR>stream</VAR>, <VAR>ptr</VAR>)</CODE>
<DD>Define this macro if you are using an unusual assembler that
requires different names for the machine instructions.
<P>

The definition is a C statement or statements which output an
assembler instruction opcode to the stdio stream <VAR>stream</VAR>.  The
macro-operand <VAR>ptr</VAR> is a variable of type <CODE>char *</CODE> which
points to the opcode name in its "internal" form--the form that is
written in the machine description.  The definition should output the
opcode name to <VAR>stream</VAR>, performing any translation you desire, and
increment the variable <VAR>ptr</VAR> to point at the end of the opcode
so that it will not be output twice.
</P><P>

In fact, your macro definition may process less than the entire opcode
name, or more than the opcode name; but if you want to process text
that includes <SAMP>`%'</SAMP>-sequences to substitute operands, you must take
care of the substitution yourself.  Just be sure to increment
<VAR>ptr</VAR> over whatever text should not be output normally.
</P><P>

If you need to look at the operand values, they can be found as the
elements of <CODE>recog_operand</CODE>.
</P><P>

If the macro definition does nothing, the instruction is output
in the usual way.
</P><P>

<DT><CODE>FINAL_PRESCAN_INSN (<VAR>insn</VAR>, <VAR>opvec</VAR>, <VAR>noperands</VAR>)</CODE>
<DD>If defined, a C statement to be executed just prior to the output of
assembler code for <VAR>insn</VAR>, to modify the extracted operands so
they will be output differently.
<P>

Here the argument <VAR>opvec</VAR> is the vector containing the operands
extracted from <VAR>insn</VAR>, and <VAR>noperands</VAR> is the number of
elements of the vector which contain meaningful data for this insn.
The contents of this vector are what will be used to convert the insn
template into assembler code, so you can change the assembler output
by changing the contents of the vector.
</P><P>

This macro is useful when various assembler syntaxes share a single
file of instruction patterns; by defining this macro differently, you
can cause a large class of instructions to be output differently (such
as with rearranged operands).  Naturally, variations in assembler
syntax affecting individual insn patterns ought to be handled by
writing conditional output routines in those patterns.
</P><P>

If this macro is not defined, it is equivalent to a null statement.
</P><P>

<DT><CODE>PRINT_OPERAND (<VAR>stream</VAR>, <VAR>x</VAR>, <VAR>code</VAR>)</CODE>
<DD>A C compound statement to output to stdio stream <VAR>stream</VAR> the
assembler syntax for an instruction operand <VAR>x</VAR>.  <VAR>x</VAR> is an
RTL expression.
<P>

<VAR>code</VAR> is a value that can be used to specify one of several ways
of printing the operand.  It is used when identical operands must be
printed differently depending on the context.  <VAR>code</VAR> comes from
the <SAMP>`%'</SAMP> specification that was used to request printing of the
operand.  If the specification was just <SAMP>`%<VAR>digit</VAR>'</SAMP> then
<VAR>code</VAR> is 0; if the specification was <SAMP>`%<VAR>ltr</VAR>
<VAR>digit</VAR>'</SAMP> then <VAR>code</VAR> is the ASCII code for <VAR>ltr</VAR>.
</P><P>

If <VAR>x</VAR> is a register, this macro should print the register's name.
The names can be found in an array <CODE>reg_names</CODE> whose type is
<CODE>char *[]</CODE>.  <CODE>reg_names</CODE> is initialized from
<CODE>REGISTER_NAMES</CODE>.
</P><P>

When the machine description has a specification <SAMP>`%<VAR>punct</VAR>'</SAMP>
(a <SAMP>`%'</SAMP> followed by a punctuation character), this macro is called
with a null pointer for <VAR>x</VAR> and the punctuation character for
<VAR>code</VAR>.
</P><P>

<DT><CODE>PRINT_OPERAND_PUNCT_VALID_P (<VAR>code</VAR>)</CODE>
<DD>A C expression which evaluates to true if <VAR>code</VAR> is a valid
punctuation character for use in the <CODE>PRINT_OPERAND</CODE> macro.  If
<CODE>PRINT_OPERAND_PUNCT_VALID_P</CODE> is not defined, it means that no
punctuation characters (except for the standard one, <SAMP>`%'</SAMP>) are used
in this way.
<P>

<DT><CODE>PRINT_OPERAND_ADDRESS (<VAR>stream</VAR>, <VAR>x</VAR>)</CODE>
<DD>A C compound statement to output to stdio stream <VAR>stream</VAR> the
assembler syntax for an instruction operand that is a memory reference
whose address is <VAR>x</VAR>.  <VAR>x</VAR> is an RTL expression.
<P>

<DT><CODE>ASM_OPEN_PAREN</CODE>
<DD><DT><CODE>ASM_CLOSE_PAREN</CODE>
<DD>These macros are defined as C string constant, describing the syntax
in the assembler for grouping arithmetic expressions.  The following
definitions are correct for most assemblers:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#define ASM_OPEN_PAREN "("
#define ASM_CLOSE_PAREN ")"
</pre></td></tr></table></DL>
<P>

<A NAME="Config"></A>
<HR SIZE="6">
<A NAME="SEC95"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC94"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC82"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 15. The Configuration File </H1>
<!--docid::SEC95::-->
<P>

The configuration file <TT>`xm-<VAR>machine</VAR>.h'</TT> contains macro definitions
that describe the machine and system on which the compiler is running.
Most of the values in it are actually the same on all machines that GNU CC
runs on, so large parts of all configuration files are identical.  But
there are some macros that vary:
</P><P>

<DL COMPACT>
<DT><CODE>FAILURE_EXIT_CODE</CODE>
<DD>A C expression for the status code to be returned when the compiler
exits after serious errors.
<P>

<DT><CODE>SUCCESS_EXIT_CODE</CODE>
<DD>A C expression for the status code to be returned when the compiler
exits without serious errors.
<P>

<DT><CODE>USE_C_ALLOCA</CODE>
<DD>Define this macro to indicate that the compiler is running with the
<CODE>alloca</CODE> implemented in C.  This version of <CODE>alloca</CODE> can be
found in the file <TT>`alloca.c'</TT>; to use it, you must also alter the
<TT>`Makefile'</TT> variable <CODE>ALLOCA</CODE>.
<P>

This macro, unlike most, describes the machine that the compiler is
running on, rather than the one the compiler is compiling for.
Therefore, it should be set in the <TT>`xm-<VAR>machine</VAR>.h'</TT> file
rather than in the <TT>`tm-<VAR>machine</VAR>.h'</TT> file.
</P><P>

If you do define this macro, you should probably do it as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#ifndef __GNUC__
#define USE_C_ALLOCA
#else
#define alloca __builtin_alloca
#endif
</pre></td></tr></table></P><P>

so that when the compiler is compiled with GNU CC it uses the more
efficient built-in <CODE>alloca</CODE> function.
</DL>
<P>

In addition, configuration files for system V define <CODE>bcopy</CODE>,
<CODE>bzero</CODE> and <CODE>bcmp</CODE> as aliases.  Some files define <CODE>alloca</CODE>
as a macro when compiled with GNU CC, in order to take advantage of the
benefit of GNU CC's built-in <CODE>alloca</CODE>.
</P><P>

<HR SIZE="6">
<A NAME="SEC_Contents"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1>Table of Contents</H1>
<UL>
<A NAME="TOC1" HREF="gcc.html#SEC1">GNU GENERAL PUBLIC LICENSE</A>
<BR>
<UL>
<A NAME="TOC2" HREF="gcc.html#SEC2">Preamble</A>
<BR>
<A NAME="TOC3" HREF="gcc.html#SEC3">Appendix: How to Apply These Terms to Your New Programs</A>
<BR>
</UL>
<A NAME="TOC4" HREF="gcc.html#SEC4">Contributors to GNU CC</A>
<BR>
<A NAME="TOC5" HREF="gcc.html#SEC5">1. Protect Your Freedom--Fight "Look And Feel"</A>
<BR>
<A NAME="TOC6" HREF="gcc.html#SEC6">2. GNU CC Command Options</A>
<BR>
<A NAME="TOC7" HREF="gcc.html#SEC7">3. Installing GNU CC</A>
<BR>
<UL>
<A NAME="TOC8" HREF="gcc.html#SEC8">3.1 Compilation in a Separate Directory</A>
<BR>
<A NAME="TOC9" HREF="gcc.html#SEC9">3.2 Installing GNU CC on the Sun</A>
<BR>
<A NAME="TOC10" HREF="gcc.html#SEC10">3.3 Installing GNU CC on the 3b1</A>
<BR>
<A NAME="TOC11" HREF="gcc.html#SEC11">3.4 Installing GNU CC on SCO System V 3.2</A>
<BR>
<A NAME="TOC12" HREF="gcc.html#SEC12">3.5 Installing GNU CC on VMS</A>
<BR>
<A NAME="TOC13" HREF="gcc.html#SEC13">3.6 Installing GNU CC on HPUX</A>
<BR>
<A NAME="TOC14" HREF="gcc.html#SEC14">3.7 Installing GNU CC on an NCR Tower</A>
<BR>
</UL>
<A NAME="TOC15" HREF="gcc.html#SEC15">4. Known Causes of Trouble with GNU CC</A>
<BR>
<A NAME="TOC16" HREF="gcc.html#SEC16">5. How To Get Help with GNU CC</A>
<BR>
<A NAME="TOC17" HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A>
<BR>
<A NAME="TOC18" HREF="gcc.html#SEC18">7. GNU Extensions to the C Language</A>
<BR>
<UL>
<A NAME="TOC19" HREF="gcc.html#SEC19">7.1 Statements and Declarations inside of Expressions</A>
<BR>
<A NAME="TOC20" HREF="gcc.html#SEC20">7.2 Naming an Expression's Type</A>
<BR>
<A NAME="TOC21" HREF="gcc.html#SEC21">7.3 Referring to a Type with <CODE>typeof</CODE></A>
<BR>
<A NAME="TOC22" HREF="gcc.html#SEC22">7.4 Generalized Lvalues</A>
<BR>
<A NAME="TOC23" HREF="gcc.html#SEC23">7.5 Conditional Expressions with Omitted Middle-Operands</A>
<BR>
<A NAME="TOC24" HREF="gcc.html#SEC24">7.6 Arrays of Length Zero</A>
<BR>
<A NAME="TOC25" HREF="gcc.html#SEC25">7.7 Arrays of Variable Length</A>
<BR>
<A NAME="TOC26" HREF="gcc.html#SEC26">7.8 Non-Lvalue Arrays May Have Subscripts</A>
<BR>
<A NAME="TOC27" HREF="gcc.html#SEC27">7.9 Arithmetic on <CODE>void</CODE>-Pointers and Function Pointers</A>
<BR>
<A NAME="TOC28" HREF="gcc.html#SEC28">7.10 Non-Constant Initializers</A>
<BR>
<A NAME="TOC29" HREF="gcc.html#SEC29">7.11 Constructor Expressions</A>
<BR>
<A NAME="TOC30" HREF="gcc.html#SEC30">7.12 Declaring Attributes of Functions</A>
<BR>
<A NAME="TOC31" HREF="gcc.html#SEC31">7.13 Dollar Signs in Identifier Names</A>
<BR>
<A NAME="TOC32" HREF="gcc.html#SEC32">7.14 Inquiring about the Alignment of a Type or Variable</A>
<BR>
<A NAME="TOC33" HREF="gcc.html#SEC33">7.15 An Inline Function is As Fast As a Macro</A>
<BR>
<A NAME="TOC34" HREF="gcc.html#SEC34">7.16 Assembler Instructions with C Expression Operands</A>
<BR>
<A NAME="TOC35" HREF="gcc.html#SEC35">7.17 Controlling Names Used in Assembler Code</A>
<BR>
<A NAME="TOC36" HREF="gcc.html#SEC36">7.18 Variables in Specified Registers</A>
<BR>
<UL>
<A NAME="TOC37" HREF="gcc.html#SEC37">7.18.1 Defining Global Register Variables</A>
<BR>
<A NAME="TOC38" HREF="gcc.html#SEC38">7.18.2 Specifying Registers for Local Variables</A>
<BR>
</UL>
<A NAME="TOC39" HREF="gcc.html#SEC39">7.19 Alternate Keywords</A>
<BR>
</UL>
<A NAME="TOC40" HREF="gcc.html#SEC40">8. Reporting Bugs</A>
<BR>
<UL>
<A NAME="TOC41" HREF="gcc.html#SEC41">8.1 Have You Found a Bug?</A>
<BR>
<A NAME="TOC42" HREF="gcc.html#SEC42">8.2 How to Report Bugs</A>
<BR>
</UL>
<A NAME="TOC43" HREF="gcc.html#SEC43">9. GNU CC and Portability</A>
<BR>
<A NAME="TOC44" HREF="gcc.html#SEC44">10. Interfacing to GNU CC Output</A>
<BR>
<A NAME="TOC45" HREF="gcc.html#SEC45">11. Passes and Files of the Compiler</A>
<BR>
<A NAME="TOC46" HREF="gcc.html#SEC46">12. RTL Representation</A>
<BR>
<UL>
<A NAME="TOC47" HREF="gcc.html#SEC47">12.1 RTL Object Types</A>
<BR>
<A NAME="TOC48" HREF="gcc.html#SEC48">12.2 Access to Operands</A>
<BR>
<A NAME="TOC49" HREF="gcc.html#SEC49">12.3 Flags in an RTL Expression</A>
<BR>
<A NAME="TOC50" HREF="gcc.html#SEC50">12.4 Machine Modes</A>
<BR>
<A NAME="TOC51" HREF="gcc.html#SEC51">12.5 Constant Expression Types</A>
<BR>
<A NAME="TOC52" HREF="gcc.html#SEC52">12.6 Registers and Memory</A>
<BR>
<A NAME="TOC53" HREF="gcc.html#SEC53">12.7 RTL Expressions for Arithmetic</A>
<BR>
<A NAME="TOC54" HREF="gcc.html#SEC54">12.8 Comparison Operations</A>
<BR>
<A NAME="TOC55" HREF="gcc.html#SEC55">12.9 Bit-fields</A>
<BR>
<A NAME="TOC56" HREF="gcc.html#SEC56">12.10 Conversions</A>
<BR>
<A NAME="TOC57" HREF="gcc.html#SEC57">12.11 Declarations</A>
<BR>
<A NAME="TOC58" HREF="gcc.html#SEC58">12.12 Side Effect Expressions</A>
<BR>
<A NAME="TOC59" HREF="gcc.html#SEC59">12.13 Embedded Side-Effects on Addresses</A>
<BR>
<A NAME="TOC60" HREF="gcc.html#SEC60">12.14 Assembler Instructions as Expressions</A>
<BR>
<A NAME="TOC61" HREF="gcc.html#SEC61">12.15 Insns</A>
<BR>
<A NAME="TOC62" HREF="gcc.html#SEC62">12.16 RTL Representation of Function-Call Insns</A>
<BR>
<A NAME="TOC63" HREF="gcc.html#SEC63">12.17 Structure Sharing Assumptions</A>
<BR>
</UL>
<A NAME="TOC64" HREF="gcc.html#SEC64">13. Machine Descriptions</A>
<BR>
<UL>
<A NAME="TOC65" HREF="gcc.html#SEC65">13.1 Everything about Instruction Patterns</A>
<BR>
<A NAME="TOC66" HREF="gcc.html#SEC66">13.2 Example of <CODE>define_insn</CODE></A>
<BR>
<A NAME="TOC67" HREF="gcc.html#SEC67">13.3 RTL Template for Generating and Recognizing Insns</A>
<BR>
<A NAME="TOC68" HREF="gcc.html#SEC68">13.4 Output Templates and Operand Substitution</A>
<BR>
<A NAME="TOC69" HREF="gcc.html#SEC69">13.5 C Statements for Generating Assembler Output</A>
<BR>
<A NAME="TOC70" HREF="gcc.html#SEC70">13.6 Operand Constraints</A>
<BR>
<UL>
<A NAME="TOC71" HREF="gcc.html#SEC71">13.6.1 Simple Constraints</A>
<BR>
<A NAME="TOC72" HREF="gcc.html#SEC72">13.6.2 Multiple Alternative Constraints</A>
<BR>
<A NAME="TOC73" HREF="gcc.html#SEC73">13.6.3 Register Class Preferences</A>
<BR>
<A NAME="TOC74" HREF="gcc.html#SEC74">13.6.4 Constraint Modifier Characters</A>
<BR>
<A NAME="TOC75" HREF="gcc.html#SEC75">13.6.5 Not Using Constraints</A>
<BR>
</UL>
<A NAME="TOC76" HREF="gcc.html#SEC76">13.7 Standard Names for Patterns Used in Generation</A>
<BR>
<A NAME="TOC77" HREF="gcc.html#SEC77">13.8 When the Order of Patterns Matters</A>
<BR>
<A NAME="TOC78" HREF="gcc.html#SEC78">13.9 Interdependence of Patterns</A>
<BR>
<A NAME="TOC79" HREF="gcc.html#SEC79">13.10 Defining Jump Instruction Patterns</A>
<BR>
<A NAME="TOC80" HREF="gcc.html#SEC80">13.11 Defining Machine-Specific Peephole Optimizers</A>
<BR>
<A NAME="TOC81" HREF="gcc.html#SEC81">13.12 Defining RTL Sequences for Code Generation</A>
<BR>
</UL>
<A NAME="TOC82" HREF="gcc.html#SEC82">14. Machine Description Macros</A>
<BR>
<UL>
<A NAME="TOC83" HREF="gcc.html#SEC83">14.1 Run-time Target Specification</A>
<BR>
<A NAME="TOC84" HREF="gcc.html#SEC84">14.2 Storage Layout</A>
<BR>
<A NAME="TOC85" HREF="gcc.html#SEC85">14.3 Register Usage</A>
<BR>
<A NAME="TOC86" HREF="gcc.html#SEC86">14.4 Register Classes</A>
<BR>
<A NAME="TOC87" HREF="gcc.html#SEC87">14.5 Describing Stack Layout</A>
<BR>
<A NAME="TOC88" HREF="gcc.html#SEC88">14.6 Implicit Use of Library Routines</A>
<BR>
<A NAME="TOC89" HREF="gcc.html#SEC89">14.7 Addressing Modes</A>
<BR>
<A NAME="TOC90" HREF="gcc.html#SEC90">14.8 Parameters for Delayed Branch Optimization</A>
<BR>
<A NAME="TOC91" HREF="gcc.html#SEC91">14.9 Condition Code Information</A>
<BR>
<A NAME="TOC92" HREF="gcc.html#SEC92">14.10 Cross Compilation and Floating-Point Format</A>
<BR>
<A NAME="TOC93" HREF="gcc.html#SEC93">14.11 Miscellaneous Parameters</A>
<BR>
<A NAME="TOC94" HREF="gcc.html#SEC94">14.12 Output of Assembler Code</A>
<BR>
</UL>
<A NAME="TOC95" HREF="gcc.html#SEC95">15. The Configuration File</A>
<BR>
</UL>
<HR SIZE=1>
<A NAME="SEC_OVERVIEW"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1>Short Table of Contents</H1>
<BLOCKQUOTE>
<A NAME="TOC1" HREF="gcc.html#SEC1">GNU GENERAL PUBLIC LICENSE</A>
<BR>
<A NAME="TOC4" HREF="gcc.html#SEC4">Contributors to GNU CC</A>
<BR>
<A NAME="TOC5" HREF="gcc.html#SEC5">1. Protect Your Freedom--Fight "Look And Feel"</A>
<BR>
<A NAME="TOC6" HREF="gcc.html#SEC6">2. GNU CC Command Options</A>
<BR>
<A NAME="TOC7" HREF="gcc.html#SEC7">3. Installing GNU CC</A>
<BR>
<A NAME="TOC15" HREF="gcc.html#SEC15">4. Known Causes of Trouble with GNU CC</A>
<BR>
<A NAME="TOC16" HREF="gcc.html#SEC16">5. How To Get Help with GNU CC</A>
<BR>
<A NAME="TOC17" HREF="gcc.html#SEC17">6. Incompatibilities of GNU CC</A>
<BR>
<A NAME="TOC18" HREF="gcc.html#SEC18">7. GNU Extensions to the C Language</A>
<BR>
<A NAME="TOC40" HREF="gcc.html#SEC40">8. Reporting Bugs</A>
<BR>
<A NAME="TOC43" HREF="gcc.html#SEC43">9. GNU CC and Portability</A>
<BR>
<A NAME="TOC44" HREF="gcc.html#SEC44">10. Interfacing to GNU CC Output</A>
<BR>
<A NAME="TOC45" HREF="gcc.html#SEC45">11. Passes and Files of the Compiler</A>
<BR>
<A NAME="TOC46" HREF="gcc.html#SEC46">12. RTL Representation</A>
<BR>
<A NAME="TOC64" HREF="gcc.html#SEC64">13. Machine Descriptions</A>
<BR>
<A NAME="TOC82" HREF="gcc.html#SEC82">14. Machine Description Macros</A>
<BR>
<A NAME="TOC95" HREF="gcc.html#SEC95">15. The Configuration File</A>
<BR>

</BLOCKQUOTE>
<HR SIZE=1>
<A NAME="SEC_About"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1>About this document</H1>
This document was generated by <I>root</I> on <I>January, 23  2003</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>
<P></P>  
The buttons in the navigation panels have the following meaning:
<P></P>
<table border = "1">
<TR>
<TH> Button </TH>
<TH> Name </TH>
<TH> Go to </TH>
<TH> From 1.2.3 go to</TH>
</TR>
<TR>
<TD ALIGN="CENTER">
 [ &lt; ] </TD>
<TD ALIGN="CENTER">
Back
</TD>
<TD>
previous section in reading order
</TD>
<TD>
1.2.2
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [ &gt; ] </TD>
<TD ALIGN="CENTER">
Forward
</TD>
<TD>
next section in reading order
</TD>
<TD>
1.2.4
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [ &lt;&lt; ] </TD>
<TD ALIGN="CENTER">
FastBack
</TD>
<TD>
previous or up-and-previous section 
</TD>
<TD>
1.1
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [ Up ] </TD>
<TD ALIGN="CENTER">
Up
</TD>
<TD>
up section
</TD>
<TD>
1.2
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [ &gt;&gt; ] </TD>
<TD ALIGN="CENTER">
FastForward
</TD>
<TD>
next or up-and-next section
</TD>
<TD>
1.3
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [Top] </TD>
<TD ALIGN="CENTER">
Top
</TD>
<TD>
cover (top) of document
</TD>
<TD>
 &nbsp; 
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [Contents] </TD>
<TD ALIGN="CENTER">
Contents
</TD>
<TD>
table of contents
</TD>
<TD>
 &nbsp; 
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [Index] </TD>
<TD ALIGN="CENTER">
Index
</TD>
<TD>
concept index
</TD>
<TD>
 &nbsp; 
</TD>
</TR>
<TR>
<TD ALIGN="CENTER">
 [ ? ] </TD>
<TD ALIGN="CENTER">
About
</TD>
<TD>
this page
</TD>
<TD>
 &nbsp; 
</TD>
</TR>
</TABLE>
<P></P>
where the <STRONG> Example </STRONG> assumes that the current position 
is at <STRONG> Subsubsection One-Two-Three </STRONG> of a document of 
the following structure:
<UL>
<LI> 1. Section One  </LI>
<UL>
<LI>1.1 Subsection One-One</LI>
<UL>
<LI> ... </LI>
</UL>
<LI>1.2 Subsection One-Two</LI>
<UL>
<LI>1.2.1 Subsubsection One-Two-One
</LI><LI>1.2.2 Subsubsection One-Two-Two
</LI><LI>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp; <STRONG>
&lt;== Current Position </STRONG>
</LI><LI>1.2.4 Subsubsection One-Two-Four
</LI></UL>
<LI>1.3 Subsection One-Three</LI>
<UL>
<LI> ... </LI>
</UL>
<LI>1.4 Subsection One-Four</LI>
</UL>
</UL>

<HR SIZE=1>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>root</I> on <I>January, 23  2003</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
