<html><!-- This HTML file has been created by texi2html 1.29
     from syscalls.texi on 4 June 1994 -->

<TITLE>Syscall specifications of Linux - fstatfs</TITLE>
<P>Go to the <A HREF="syscalls_13.html" tppabs="http://www.infran.ru/TechInfo/syscalls/syscalls_13.html">previous</A>, <A HREF="syscalls_15.html" tppabs="http://www.infran.ru/TechInfo/syscalls/syscalls_15.html">next</A> section.<P>
<H2><A NAME="SEC14" HREF="syscalls_toc.html#SEC14" tppabs="http://www.infran.ru/TechInfo/syscalls/syscalls_toc.html#SEC14">fstatfs and statfs</A></H2>
<P>
<H3>SYNOPSIS</H3>
<P>
<CODE>int fstatfs(int <VAR>fd</VAR>, struct statfs *<VAR>buf</VAR>);</CODE>
<P>
<CODE>int statfs(char *<VAR>path</VAR>, struct statfs *<VAR>buf</VAR>);</CODE>
<P>
<H3>PARAMETERS</H3>
<P>
<VAR>fd</VAR>: [in] the file descriptor we want to get the information from.
<P>
<VAR>path</VAR>: [in] the file path we want to get the information from.
<P>
<VAR>buf</VAR>: [out] points to the buffer that will contain the information.
<P>
<H3>DESCRIPTION</H3>
<P>
Those calls return information about the file systems on which the files
<VAR>fd</VAR> or <VAR>path</VAR> resides. The buffer has the following format:
<P>
<PRE>
struct statfs {
        long f_type;       /* file system type */
        long f_bsize;      /* block size */
        long f_blocks;     /* total number of blocks */
        long f_bfree;      /* total number of free blocks */
        long f_bavail;     /* number of free blocks for normal user */
        long f_files;      /* number of file nodes */
        long f_ffree;      /* number of free file nodes */
        fsid_t f_fsid;     /* file system id */
        long f_namelen;    /* maximum file name length */
        long f_spare[6];   /* unused */
};
</PRE>
<P>
<H3>RETURN VALUE</H3>
<P>
On success zero is returned. On error, -1 is returned and <CODE>errno</CODE> is
set to one of the following values:
<P>
In the case of <CODE>fstatfs</CODE>:
<P>
<UL>
<LI><CODE>EBADFS</CODE>, <CODE>EFAULT</CODE>, <CODE>ENOSYS</CODE> or <CODE>EIO</CODE>.
</UL>
<P>
In the case of <CODE>statfs</CODE>:
<P>
<UL>
<LI><CODE>EINVAL</CODE>: path contains a caracter outside the ASCII 0-127 range.
<LI><CODE>ENOTDIR</CODE>, <CODE>ENAMETOOLONG</CODE>, <CODE>ENOENT</CODE>,
<CODE>EACCESS</CODE>, <CODE>ELOOP</CODE>, <CODE>EFAULT</CODE>, <CODE>ENOSYS</CODE> or <CODE>EIO</CODE>.
</UL>
<P>
<P>Go to the <A HREF="syscalls_13.html" tppabs="http://www.infran.ru/TechInfo/syscalls/syscalls_13.html">previous</A>, <A HREF="syscalls_15.html" tppabs="http://www.infran.ru/TechInfo/syscalls/syscalls_15.html">next</A> section.<P>
