From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Wed, 17 Nov 93 06:26:47 EST
Subject:  Linux-Admin Digest #159

Linux-Admin Digest #159, Volume #1               Wed, 17 Nov 93 06:26:47 EST

Contents:
  GIF compression (was: Getting Net Stats) (Harald Milz)
  Re: lpfilter (Harald Milz)
  Re: [Q] Smail, changing mail header from UUCP to INET addressing style (yuan tzeng)
  Re: Network reliability? (Alan Cox)
  Re: Slackware 1.1.0 & Adaptec 1542 extended mapping (Eric Youngdale)
  Re: Slackware 1.1.0 is good! (dup binaries) (Ramiro Estrugo)
  Source code for Unix password-encryption scheme? (pstlb@aurora.alaska.edu)
  Major/Minor numbers for Ethernet (Maxim Matveev)
  "New" directory structure... (Itai Zukerman)
  Re: filesystem for archive disks (Scott D. Heavner)
  Default shell on login (Clifton Koch)

----------------------------------------------------------------------------

Crossposted-To: comp.os.linux.help
From: hm@seneca.ix.de (Harald Milz)
Subject: GIF compression (was: Getting Net Stats)
Date: Tue, 16 Nov 1993 06:56:03 GMT
Reply-To: hm@seneca.ix.de

Sarr J. Blumson (sarr@citi.umich.edu) wrote:
: > My SLIP connection is now working reliablym with no problems not caused by
: > my own confusion but...its slower than I hoped (eg 12-14kbps effective on a
: > nominal 38.4kps connection, on GIFS which should compress fairly well). 

Huh, which modems are you using? I don't remember 38400 bps modems, except
for the DTE rate. On the line side, you won't be able to get more than
14400 bps transmitted with 14400 modems. And plus, if memory serves, the
GIF format was invented to provide for maximum compression on the harddisk
side. Even gzip -9 won't be able to compress GIFs much. Example: sunsite.
unc.edu:/pub/Linux/logos/linus1.gif: 107452 bytes original, 107125 after 
gzip -9. 

Hope this helps.

Ciao,
hm

-- 
Harald Milz (hm@seneca.ix.de)

------------------------------

From: hm@seneca.ix.de (Harald Milz)
Subject: Re: lpfilter
Date: Tue, 16 Nov 1993 06:59:21 GMT
Reply-To: hm@seneca.ix.de

hkennedy@mercury.ncat.edu wrote:
: > In article <CGI3v8.DGJ@poly.edu> leos@poly.edu (Leo Staschover) writes:
: > >
: > >can someone please email me (or mime me) a copy of "lpfilter" for a laserjet
: > >type printer?
: > >Leo Staschover
: > >leos@poly.edu
: > >

: > Could you please send me any information you have on setting up a laserjet
: > (iip if possible)? I can't get a hp laserjet going for nothing.

All this information can be found in sunsite.unc.edu:/pub/Linux/docs/HOWTO/
Printing-HOWTO. 

Ciao,
hm


-- 
Harald Milz (hm@seneca.ix.de)

------------------------------

From: t90yuan@mp.cs.niu.edu (yuan tzeng)
Subject: Re: [Q] Smail, changing mail header from UUCP to INET addressing style
Date: Tue, 16 Nov 1993 18:25:20 GMT

In article <1993Nov15.213339.27528@mp.cs.niu.edu> t90yuan@mp.cs.niu.edu (yuan tzeng) writes:

 First of all, I didn't get the solution that I need yet. Anyone?
At the end of the follow-up, I post a message from <jeschke@cs.indiana.edu>


>I want to change the header in outcoming message from UUCP style
>to Internet style. According to smail manpage(5), I set up 
>/usr/lib/smail/transports file to this:
>-------------------------------------------------------------
>uux:    driver =pipe,
>        inet,                     # change to Internet stype addressing from
>        from,                           # supply a From_ envelope line
>        max_addrs = 50,                 # at most 5 addresses per invocation
>        max_chars = 200;                # at most 200 chars of addresses
>        remove_header="${if origin:local:Reply-To:}",
>        remove_header="${if origin:local:From:}",
>       append_header="${if origin:local:From: $sender%tyuan@mp.cs.niu.edu ($fulname)}",
>        cmd = "/usr/bin/uux - -r -g$grade $host!rmail $((${strip:user})$)",
>        umask = 0022,
>        pipe_as_sender
>---------------- The error message when sending mail ----------------
>[~]# smail: /usr/lib/smail/transports: remove_header: unknown attribute
>smail: mail moved to /usr/spool/smail/error/0oz5nF-0002CbC
>
>---------------------------------------------------------------------
>I read the man page, "remove_header" & "append_header" attribute
>are available, but it's not there.
>Hope someone can help. I use Slackware's smail3.1.28 with Taylor's UUCP 1.04.
>Thanks a lot.
=========================================================================

Eric Jeschke states:
| I'm sorry I don't have the answer, but could you please post or
| (preferably) mail the solution if you get it working?  I need to
| do the same thing.
| eric%marmot@moose.cs.indiana.edu

Since I am not a registered site either UUCP or Internet, I need
to reformat the mail message header just like you case --
eric%marmot@moose.cs.inciana.edu, instead of marmot!eric or
eric@marmot.UUCP. Too bad like Slackware's Smail3.1.28 doesn't
work as its manpage states.

A not-too-solution I made is talk to my smarthost's system adminer.
(The same one who gave you UUCP dialup). After making some  chnage
on the smarthost (which relays my incoming/outcoming message) side,
my outcoming messages are being *replieable* for sites from BITNET,
UUCP and Internet, but not all.
Thanks.

Again, the help is still needed, anyone?


For those seeking my no-too-solution, send mail to 

        Linux%tyuan@mp.cs.niu.edu
-- 
[Tzeng Ruey Yuan] --yuan

------------------------------

From: iiitac@swan.pyr (Alan Cox)
Subject: Re: Network reliability?
Date: Tue, 16 Nov 1993 18:01:07 GMT

In article <CGF3GL.8E3@world.std.com> entropy@world.std.com (Lawrence Foard) writes:
>How good or bad have the latest versions of the net stuff turned out
>to be on the internet? I'm at the point where I need to start hooking
>a number of Linux machines up with TCP/IP and do very large high speed
>file transfers.
I think we have the worst of it licked at last. PL14 should be much better
(fingers crossed). BSD as your boss suggests does have fairly functional
networking now - certainly far better than the Linux pl13 offering. It has
some silly BSD'isms as you expect since it is BSD but it certainly stays up.

I'm running pl13q (and a bit 8-)) on a 4Mb machine on a very busy lan with
currently 8-10 users on it most of the day (since the other machine is 
currently down because some ethernet cable demonstratd its remarkable 
properties as drainpipe). Last time I looked we had one crash in the week
caused by a power supply spike when someone unplug an X.25 pad. Try pl13r
alpha and see how well it goes. If its giving you hiccups let me know,
if you need >4K packets eg big NFS packets then for now go BSD.

>BTW-
> Has anyone hacked sockets that work by calling KA9Q for Linux?
Yeuch..... also for you case that would be dubious since KA9Q is for
educational and amateur radio use only and I believe the old code that
Linux ka9q is derived from also has this license (although the package
maker or a previous interation thereof has lost the license files).

Alan

------------------------------

From: eric@tantalus.nrl.navy.mil (Eric Youngdale)
Subject: Re: Slackware 1.1.0 & Adaptec 1542 extended mapping
Date: Tue, 16 Nov 1993 20:16:37 GMT

In article <2c9h2m$s3a@nic.umass.edu> rperron@twain.ucs.umass.edu (Richard T Perron) writes:
>: Fine, say, does this version run with the extended mapping feature of the  
>: Adaptec 1542C or 1542B with new Bios and Mcode?
> 
>Has anyone tried to install Slackware on a system with an Adaptec 1542B and
>one hard drive that is over a gig?  Both a friend and I have identical hard
>drives from Maxtor with an Adaptec 1542B.  Neither of us can boot the Slackware
>bootfloppy. It seems to hang when it displays the info of the HD.
>We think it may be due to the HD having >1024 cyls. If I pull just the HD and
>replace it with a 120meg IDE, but leave the Adaptec and the scsi tape and CD,
>things seem to work fine.  
>
>It all worked fine with SLS 1.03 distribution.
>Has anyone installed Slackware on a >1gig drive?  How similar are SLS and 
>Slackware as far as the Adaptec driver go?

        I feel like a broken record....<click>  record...<click>
record...<click>.  :-).  (This is a FAQ, if you have not figure it out yet).

        Do NOT enable the > 1Gb firmware on the 1542 if you want to use Linux.
This is not a supported configuration as Adaptec only recommends that this be
used on DOS only systems.  For mixed systems, you must have all of your boot
partitions and all of your DOS partitions below the 1Gb mark.  Non DOS systems
have no trouble using disks larger than 1Gb.

        Now if the disk were larger than 4Gb, you would run into other
problems, but that is a story for another day.

-Eric
-- 
"The woods are lovely, dark and deep.  But I have promises to keep,
And lines to code before I sleep, And lines to code before I sleep."

------------------------------

From: restrugo@netcom.com (Ramiro Estrugo)
Subject: Re: Slackware 1.1.0 is good! (dup binaries)
Date: Tue, 16 Nov 1993 19:48:19 GMT

Michael Callahan (callahan%peruvian.cs.utah.edu@cs.utah.edu) wrote:
: I installed slackware as well.  I had a question about what was
: in the /bin directory and the /usr/bin directories though.  It seems
: a good number of the programs are duplicated.  There is a /bin/cmp and
: a /usr/bin/cmp for example.  The binaries aren't exactly the same.
: If I were just to guess, I would think that some came in gnu packages
: and others did not. ???

: I was just wondering which binaries I need and wich ones I should
: get rid of?  (If I have to, I'll just get rid of them all and make
: a custom setup for the hell of it.)

:   mike


        The /usr/bin/ls binary is a color ls, the /bin/ls file is a
more traditional ls.  I guess the differences between the rest of the
duplicated binaries would be compile time options.

restrugo@netcom.com

------------------------------

From: pstlb@aurora.alaska.edu
Subject: Source code for Unix password-encryption scheme?
Date: Tue, 16 Nov 1993 21:13:35 GMT


  I have a question (who doesn't :).....

  Can someone send me, or tell me where I can find, a copy of the Unix
password-encryption source code?  I'm designing an operating system, and want
to include this as its password-encryption scheme.....

  Please Email me any answers, as homework is crushing me like a bug.  :)



/---------------------------------------x--------------------------------------\
|        Theron L. Bair                 |  a.k.a. "Szechuan Death", a.k.a.     |
|     pstlb@acad3.alaska.edu            |  "Kungfu", a.k.a. "Yokohama Banzai", |
|           /======|-                   |  a.k.a. "Deathrider Deluxe", etc...  |
|   "There is no shame in not knowing;  +--------------------------------------+
|    only in not finding out." -unknown |   Opinions mine, noone else's        |
\------------------------------------------------------------------------------/

------------------------------

From: mmatveev@boi.hp.com (Maxim Matveev)
Subject: Major/Minor numbers for Ethernet
Date: Tue, 16 Nov 1993 22:48:33 GMT

Hi,

Can anyone say me the correct major/minor pairs for LANCE and DE-600
pocket Ethernet adapter. I run SLS 1.03 with 0.99pl13. ANd only 
devices for WD and 3Com cards are in /dev/. I read NET-2-HOWTO - no
information.

--
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Max Matveev                            (208) 396-7900 (work)
mmatveev@hpbs669.boi.hp.com            (208) 385-9103 (home)

------------------------------

From: zukerman@rosarita.berkeley.edu (Itai Zukerman)
Subject: "New" directory structure...
Date: 16 Nov 1993 23:55:33 GMT

i've seen mentioned in several places that "linux" is moving to a
new directory arrangement, specifically involving the creation of
/sbin, some shifts in /etc and possibly other changes.  (i realize
this is also a matter of taste, hence the quotes).  for example, the
lilo documentation comes with QuickInst.new (or somesuch) supporting
the so-called "new" structure.

has there been discussion of this?  have i missed it?  are there
references?  where can i read about the pros and cons of different
directory arrangements?

-new, inexperienced linux user
-itai

------------------------------

From: sdh@fishmonger.nouucp (Scott D. Heavner)
Subject: Re: filesystem for archive disks
Date: Tue, 16 Nov 1993 18:34:31 GMT
Reply-To: sdh@po.cwru.edu

Rene COUGNENC (rene@renux.frmug.fr.net) wrote:
> Ce brave Davor Cubranic ecrit:
> > Since I don't have a tape drive (and don't have much chance of buying
> > one anytime soon) and do have a stack of HD floppies, I'm using floppies
> > for archiving software packages I get on internet.  For example,
> > I FRP some GNU stuff at the computer lab, take it home, install it on
> > my Linux machine, and have it at the same time archived should I need
> > to reinstall it.  The question I have is which filesystem should I use
> > on those floppies: with msdos I can't have long filenames, but with
> > ext2 (i.e. ext2fs) I'm loosing 5% of disk space that is reserved for

        The smallest file system is the Minix fs (I think).  I have
a patched mkfs.c  which allows you to specify the number of inodes on the
fs.  For a backup floppy, 32 inodes gives you 31 free inodes (1 for root)
which means you can put 31 directories, files, or symbolic links on the
fs.  (Each inode is 32 bytes long and 32 inodes = 1024k, if you need more
than 32 jump right to 64 inodes -- same cost more inodes.)

This is all you need to know:

        mkfs -n30 -i 32 -c /dev/fd1H1440 1440

Details:

Where disk space goes under the Minix fs: (1k = 1024 bytes = 1 BLOCK --
presumably, the size of a block could be changed, but don't do it).

        1 BLOCK = Super Block
        1 BLOCK = Inode maps (map used/unused inodes)
        1 BLOCK = Block (Zone?) map (maps used/unused zones)
        1 BLOCK = Inode table (inode entries, 32 inodes per block)
        1 BLOCK = Root directory (holds 32 entries per block)
                  (2 entries are used . and .. so there are 30 free
                   without using another block).

Thus you lose 5k vs. tar'ing it directly to a floppy, but it is slightly
better than the 14k default.

                                        Scott

        A patch follows, or there is a binary in my fsck-lde-2.0.1.tgz
package which should have appeared in c.o.l.annouce.  lde is a curses
based disk editor (read-only) for the Minux fs.

Patch vs. mkfs in utile-1.5:
===========================================================================
*** utile-1.5/mkfs.c    Sun Feb 28 14:55:10 1993
--- mkfs.c      Mon Nov 15 00:39:06 1993
***************
*** 20,31 ****
   * 28.02.93  -  added support for other namelengths than the original
   *            14 characters so that I can test the new kernel routines..
   *
!  * Usage:  mkfs [-c] [-nXX] device size-in-blocks
   *         mkfs [-l filename ] device size-in-blocks
   *
   *    -c for readablility checking (SLOW!)
   *      -l for getting a list of bad blocks from a file.
   *    -n for namelength (currently the kernel only uses 14 or 30)
   *
   * The device may be a block device or a image of one, but this isn't
   * enforced (but it's not much fun on a character device :-). 
--- 20,36 ----
   * 28.02.93  -  added support for other namelengths than the original
   *            14 characters so that I can test the new kernel routines..
   *
!  * 31.10.93  -  added inode request feature, for backup floppies: use
!  *              32 inodes, for a news partition use more.
!  *              (Scott Heavner, sdh@po.cwru.edu)
!  *
!  * Usage:  mkfs [-c] [-nXX] -i XX device size-in-blocks
   *         mkfs [-l filename ] device size-in-blocks
   *
   *    -c for readablility checking (SLOW!)
   *      -l for getting a list of bad blocks from a file.
   *    -n for namelength (currently the kernel only uses 14 or 30)
+  *      -i for number of inodes 
   *
   * The device may be a block device or a image of one, but this isn't
   * enforced (but it's not much fun on a character device :-). 
***************
*** 97,102 ****
--- 102,108 ----
  
  static unsigned short good_blocks_table[MAX_GOOD_BLOCKS];
  static int used_good_blocks = 0;
+ static unsigned long req_nr_inodes = 0;
  
  #define bitop(name,op) \
  static inline int name(char * addr,unsigned int nr) \
***************
*** 132,138 ****
        exit(1);
  }
  
! #define usage() fatal_error("Usage: %s [-c | -l filename] [-nXX] /dev/name blocks\n")
  #define die(str) fatal_error("%s: " str "\n")
  
  void write_tables(void)
--- 138,144 ----
        exit(1);
  }
  
! #define usage() fatal_error("Usage: %s [-c | -l filename] [-i #inodes] [-nXX] /dev/name blocks\n")
  #define die(str) fatal_error("%s: " str "\n")
  
  void write_tables(void)
***************
*** 275,281 ****
        MAXSIZE = (7+512+512*512)*1024;
        ZONES = BLOCKS;
  /* some magic nrs: 1 inode / 3 blocks */
!       INODES = BLOCKS/3;
  /* I don't want some off-by-one errors, so this hack... */
        if ((INODES & 8191) > 8188)
                INODES -= 5;
--- 281,290 ----
        MAXSIZE = (7+512+512*512)*1024;
        ZONES = BLOCKS;
  /* some magic nrs: 1 inode / 3 blocks */
!       if ( req_nr_inodes == 0 ) 
!               INODES = BLOCKS/3;
!       else
!               INODES = req_nr_inodes;
  /* I don't want some off-by-one errors, so this hack... */
        if ((INODES & 8191) > 8188)
                INODES -= 5;
***************
*** 411,423 ****
                                }
                        } else
                                device_name = argv[0];
!               else { 
!                       if(argv[0][1] == 'l') {
                                listfile = argv[1];
                                argv++;
                                if (!(argc--))
                                        usage();
!                       } else {
                                while (*(++argv[0])) {
                                        switch (argv[0][0]) {
                                                case 'c': check=1; break;
--- 420,436 ----
                                }
                        } else
                                device_name = argv[0];
!               else if(argv[0][1] == 'l') {
                                listfile = argv[1];
                                argv++;
                                if (!(argc--))
                                        usage();
!               } else { if(argv[0][1] == 'i') {
!                               req_nr_inodes = (unsigned long) atol(argv[1]);
!                               argv++;
!                               if (!(argc--))
!                                       usage();
!               } else {
                                while (*(++argv[0])) {
                                        switch (argv[0][0]) {
                                                case 'c': check=1; break;



        

------------------------------

From: koch@rtsg.mot.com (Clifton Koch)
Subject: Default shell on login
Date: 16 Nov 93 20:39:36 GMT

  I'm having a really stupid problem that probably has a really stupid
answer, but I can't seem to solve it so far.  How is the default shell
set up on login?  I'm having a problem with on my system where it
appears that the shell entry in passwd is being ignored, and sh is being
run by default.  My account has the following passwd entry (I use shadow
passwords):

koch:*:2571:19::/home/koch:/bin/bash

  It appears that bash is not getting run at login because my .bashrc is
not being executed.  If I manually type 'bash' after login, the .bashrc
is executed and everything is fine.  Bash is in /bin, and /bin/bash is in
/etc/shells.

  This used to work, and I'm not sure when it stopped.  Probably after
upgrading some of the binutils, but I haven't been able to figure out
what the culprit is yet.  It's a minor problem, but annoying just the
same.

  Any ideas?

Cliff
-- 
=============================================================================
    Cliff Koch
    Motorola Cellular Infrastructure Division
    koch@rtsg.mot.com

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
