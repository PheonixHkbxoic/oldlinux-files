From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Sat, 28 Aug 93 14:13:39 EDT
Subject:  Linux-Admin Digest #22

Linux-Admin Digest #22, Volume #1                Sat, 28 Aug 93 14:13:39 EDT

Contents:
  Re: Why use shadow? <Actually, how do AI *UN* shadow my Linux box?> (Chris Patti)
  Backup to QIC-80 tape drive (Colorado) (Mark Kassab)
  Re: MAKEDEV for SCSI TAPE (Hal N. Brooks)
  Re: swap "weirdness," ... SOLVED! (Don &)
  booting .99P12 (new kernel) (Bill Heiser)
  Re: Backup to QIC-80 tape drive (Colorado) (Charles Hedrick)
  Re: Linux bbs software? (Ed Carp)
  re: permissions on msdos mounted FS's (Joel M. Hoffman)
  top, kmem ps, compressed kernels (David Liebert)
  Re: Linux bbs software? (greg naber)
  Re: booting .99P12 (new kernel) (Kyr Velusian)
  [SOURCE] Re: Sample DIP scripts (Andreas Neubacher)

----------------------------------------------------------------------------

From: feoh@gnu.ai.mit.edu (Chris Patti)
Subject: Re: Why use shadow? <Actually, how do AI *UN* shadow my Linux box?>
Date: 27 Aug 1993 21:01:13 GMT


Hi.

I think shadow passwords are a big win for any multi user system, however
My linux box is totally single user, non networked <Unless you count a loopback
tcp> with noone logging in but me.

I was saddled with the SLS dist which uses shadow passwords. I normally
wouldn't care, but things *break* because of this <xdm, etc> which IMHO
is a lose considering once again that shadow paswording gives me *NO* benefit.

Does anyone know how I can safely un-shadow my Linux box?

Thanks,

Chris Patti
feoh@gnu.ai.mit.edu

P.S. I know you can make xdtm etc work by re-compiling with shadow libs linked
in/etc but this just plain isn't worth the effort in my case.
-- 
Chris Patti                                              feoh@gnu.ai.mit.edu
=============================================================================
"I live in that solitude which is painful in youth, but delicious in the 
 years of maturity."    -- Albert Einstein

------------------------------

Crossposted-To: comp.os.linux.help
From: mark@macs.ee.mcgill.ca (Mark Kassab)
Subject: Backup to QIC-80 tape drive (Colorado)
Reply-To: mark@macs.ee.mcgill.ca
Date: Fri, 27 Aug 1993 22:20:47 GMT


Hi,

As the subject explains, I have a Colorado tape drive (QIC-80) which I was to
be able to use for backups in Linux.

Are there any programs/drivers/etc... which can be useful?  I'm sure you guys
out there backup your systems (??), so how do you do it?

The only thing I've seen so far was ftape-0.9, but with all the warnings in
the README file about it being alpha code, etc..., etc..., I haven't dare
install it.  Is it the only thing out there?

I'm running SLS 1.03 with 0.99pl12.

By the way, how come "dump" isn't bundles with SLS?  Is it available
somewhere?

Thanks,
Mark

===============================================================================
Mark Kassab       | Lab  : (514)398-3937           | Keep  stress  out  of your
MACS Laboratory   | Home : (514)934-3718           | life.   Give  it to others
McGill University | Email: mark@macs.ee.mcgill.ca  | instead.
Montreal, Canada  |        m.kassab@ieee.org       |
===============================================================================


------------------------------

From: hal@cs.uga.edu (Hal N. Brooks)
Subject: Re: MAKEDEV for SCSI TAPE
Date: 28 Aug 1993 01:43:24 GMT
Reply-To: hal@cs.uga.edu (Hal N. Brooks)

In article <25batr$nj7@news.bu.edu> heiser@bumetb.bu.edu (Bill Heiser) writes:
>I just installed .99P12, and so far so good.  But I need to use
>my SCSI tape (Archive 2150S on an Adaptec 1542b).  The MAKEDEV
>doesn't (yet) support SCSI tape.
>
>What should I do to create the necessary devices, including
>non-rewind devices, etc.
>
>Thanks
>Bill

I see someone posted a correct reply for /dev/st0 (major 9, minor 0) and
I can't seem to get out a reply that won't bounce (probably a problem on
my end since the system was just rebuilt).

For non-rewinding, use major 9 and minor 128.

mknod /dev/nst0 c 9 128

yields

crw-r--r--   1 root     root       9, 128 Mar 27 20:05 /dev/nst0

=============================================================================
 Hal N. Brooks     Voice: (706) 546-7792     Internet: hal@pollux.cs.uga.edu
=============================================================================


------------------------------

From: bashford@scripps.edu (Don &)
Subject: Re: swap "weirdness," ... SOLVED!
Date: Sat, 28 Aug 1993 03:34:18 GMT

It was a hardware problem.  New motherboard fixed it.

I eliminated swapping as a possibility and narrowed bad partition
possibilities by commenting out the "swapon" from /etc/rc and all
entries except "/" in /etc/fstab and just booting to single user mode.

Many problems persisted, including "output inhibited state," which
turned out to involve programmings emmitting several blocks of zeros
before getting to "real" output, and some kernel error messages about
trying to free nonexistent pages.

Then some problems under DOS and WINDOWS, and the suggestions of some
people from the net, led me to wonder about a hardware problem.  I
took it to the shop; they ran QA+ diagnostics and got errors which
they eliminated by installing a new motherboard.  Machine was still
under warantee, so no cost to me.

Only bad part is that my attempts to run e2fsck while in this buggy
state may have screwed up some of my data.  Oh well.

Thanks to all who responded

Don Bashford
bashford@scripps.edu

------------------------------

From: heiser@bumetb.bu.edu (Bill Heiser)
Subject: booting .99P12 (new kernel)
Date: 28 Aug 1993 04:30:20 GMT

I installed Linux .99P12 last week using SLS 1.03.  Today I decided
to try building a new kernel, to make sure the "clean distribution"
would build, before trying any new kernels for patches that may come
out, etc.

I ran "make config", and selected options appropriate for my system
(scsi disks, etc).  A half hour later (!!!!!yikes!!!) (on a 486/33!!),
the build completed.  I then tried to boot the new kernel.  It got
to the point where it got through LILO and started "loading kernel"
(or whatever wording it uses right after leaving LILO).  Then the
machine cold-booted.

So unable to get to a point where I could manually specify a kernel to
load, I booted from my boot floppy.  I copied the old kernel that I'd
saved earlier, back to /zImage.  But even now, the same symptoms occur
when I try to boot from the system disk!  The only way it will boot is
if I use the floppy.

Is this a common problem?  How do I restore the bootability of the
Linux system?

Thanks,
Bill


------------------------------

From: hedrick@geneva.rutgers.edu (Charles Hedrick)
Crossposted-To: comp.os.linux.help
Subject: Re: Backup to QIC-80 tape drive (Colorado)
Date: 28 Aug 93 04:49:00 GMT

mark@macs.ee.mcgill.ca (Mark Kassab) writes:

>By the way, how come "dump" isn't bundles with SLS?  Is it available
>somewhere?

If you mean Berkeley dump, it is specific to the Berkeley file
system.  It reads the raw disk.  Even on Suns, dump can only be used
with Berkeley file systems.  I suspect most people use tar to do
backups under Linux.  On Linux, tar is Gnu tar.  It has additional
facilities that make it more reasonable for backups than the old Unix
tar.  (It can save devices, and can handle long filenames.)  At
Rutgers, we use dump when we can, but a lot of our Unix and Unix-like
machines end up being backed up with Gnu tar.

------------------------------

From: erc@khijol.uucp (Ed Carp)
Subject: Re: Linux bbs software?
Date: Sat, 28 Aug 1993 07:27:00 GMT

Steve Traugott (stevegt@TerraLuna.Org) wrote:
: Scott Little (little@qucis.queensu.ca) wrote:
: > Have any bulletin board software packages been ported to Linux?
: > Where can such software be found?  What are the hardware constraints?

: Waffle should work with little hacking - see comp.bbs.waffle.

Yeah, but you gotta frigging *buy* it.  No, thank you...
-- 
Ed Carp, N7EKG                  erc@apple.com                   510/659-9560
                            anon-0001@khijol.uucp
If you want magic, let go of your armor.  Magic is so much stronger than
steel!        -- Richard Bach, "The Bridge Across Forever"

------------------------------

From: joel@rac2.wam.umd.edu (Joel M. Hoffman)
Subject: re: permissions on msdos mounted FS's
Date: Sat, 28 Aug 1993 02:06:21 GMT

In article <CCFH9J.2xE@csn.org> marvint@csn.org (Marvin L. Taylor) writes:
>I think this is a simple question, but I cannot find the answer:
>
>--- How do I allow non-root user's to write to a MSDOS-formated disk?
>
>    ( All files are owned by root and are mode 644 or 755 )

Access to MSDOS mounted FS's is controlled by the options with which
the FS is mounted, not by the usual unix permissions.  From my
/etc/rc.local:

        echo Mounting DOS partition on /usr/dos, \(gid=100,uid=20,perm=770\)
        mount -w -t msdos -o gid=100,umask=0007 /dev/hda2 /usr/dos

Notice the gid and umask arguments.

-Joel
(joel@wam.umd.edu)
-- 
=============================================================================
|_|~~ Germany, Europe. 1943.    "The diameter of the bomb was 30 centimeters,
__|~| 16 Million DEAD.           and the diameter of its destruction, about 7
                                meters, and in it four killed and 11 wounded. 
 cnc  Bosnia, Europe. 1993.     And around these, in a larger circle of  pain
 cnc  HOW MANY MORE?          and time,  are scattered two  hospitals and one
                          cemetery.   But the young woman who was  buried  in
                    the place from where she came, at a distance of more than
             than 100 kilometers, enlarges the circle considerably.   And the 
      lonely man who is mourning her death in a distant  country incorporates
into the circle the whole world.  And I won't speak of the cry of the orphans
that reaches God's chair and from there makes the circle endless and godless."
=============================================================================
     Tell Clinton to stop the genocide:  president@whitehouse.gov

------------------------------

From: david@omphalos.equinox.gen.nz (David Liebert)
Subject: top, kmem ps, compressed kernels
Date: Sat, 28 Aug 1993 01:18:13 GMT

Is there a version of top which uses the 'proc' file system?
Alternatively, is there a way of rebuilding /etc/psdatabase after
building a COMPRESSED kernel?

Thanks in advance.



------------------------------

From: greg@halcyon.com (greg naber)
Subject: Re: Linux bbs software?
Date: 28 Aug 1993 09:01:19 -0700

>: > Have any bulletin board software packages been ported to Linux?
>: > Where can such software be found?  What are the hardware constraints?
>
>: Waffle should work with little hacking - see comp.bbs.waffle.
>
>Yeah, but you gotta frigging *buy* it.  No, thank you...

There are a lot of 'payware' bbs systems being developed for Linux, not
many 'freeware' bbs systems. At least this one has been around a while and
has the ability to nntp news.

We use a 'donated' copy of waffle from Tom Dell to operate a 'free' email +
local news service here in Seattle on a Linux 99.11 directly connected via
ethernet to a T-1. It uses sendmail+ida to send the mail out, and nntp to
read the local seattle news & job related newsgroups.

fry.halcyon.com has been 'up' for approx 3 months and has over 350 casual
users keeping in touch with freinds around the world.

Toms donation allows us to provide these services to the community at no cost
and still limit what the users are allowed to do. Sorry, telnet into the
system is not allowed, nor is ftp. For those that wish, you may call into 
+1.206.462.0674 to see fry.halcyon.com and waffle in action.

I also use waffle as a bbs interface to my Linux system at home, it too is
ethernetted to another machine there and is occasionally slipped into the
net, do a whois squally-net for the ip's if you'd like to try to catch me
online and check out this system;)

We wish to thank Tom Dell for his donation of the waffle bbs for use on
the fry.halcyon.com system, and support his efforts at making a quailty bbs
system available to those who use *nix type systems, at an affordable price.




------------------------------

Date: Sat, 28 Aug 1993 11:55:01 EDT
From: Kyr Velusian <BDA104@psuvm.psu.edu>
Subject: Re: booting .99P12 (new kernel)

In article <25mn0s$o38@news.bu.edu>, heiser@bumetb.bu.edu (Bill Heiser) says:
>
>I ran "make config", and selected options appropriate for my system
>(scsi disks, etc).  A half hour later (!!!!!yikes!!!) (on a 486/33!!),

used to take me about 10 hours on my 386DX20 back in the .98 days...
;-)

>So unable to get to a point where I could manually specify a kernel to
>load, I booted from my boot floppy.  I copied the old kernel that I'd
>saved earlier, back to /zImage.  But even now, the same symptoms occur
>when I try to boot from the system disk!  The only way it will boot is
>if I use the floppy.

I think you need to copy zSystem.map from the LILO directory on your
floppy (probably /etc/lilo) to your LILO directory on your Hard Drive.
Then you must run LILO's Install, to install the new Image properly
on your Boot Sector.  After this, you might have more luck.

Brett

------------------------------

From: aneubach@risc.uni-linz.ac.at (Andreas Neubacher)
Subject: [SOURCE] Re: Sample DIP scripts
Date: Sat, 28 Aug 1993 17:07:18 GMT

In article <MARK.93Aug23000906@defiant.ee.mcgill.ca>, mark@macs.ee.mcgill.ca (Mark Kassab) writes:
>
> Hi,
>
> Does anyone have sample DIP scripts which they could send me?  I'm trying to

Below I'm appending 2 pairs of bash and dip scripts for setting up and
terminating a SLIP connection between a Linux machine and a CISCO terminal
server.  I'm using these scripts regularly so I'm fairly sure they work.
        Don't forget to customize the scripts by changing the phone numbers,
the internet numbers, the machine names, the login, the password, etc. ;-)
        The basic setup is as follows: Depending on the phone number I get a
certain IP address (e.g. 140.78.5.3). I use this as the address of my
machine. My default route is set to the router (140.78.1.1) of the subnet
the terminal server is connected to.
        As I said, this setup works to my satisfaction. (I'm posting this
from my Linux machine at home ...) Don't hesitate to send e-mail if you have
problems.

Hope that helps,
Andreas.
===============================================================================
Andreas NEUBACHER, Research Institute for Symbolic Computation, Johannes Kepler
University, 4040 Linz, Austria. aneubach@risc.uni-linz.ac.at !Packed signature!
===============================================================================
==========cut here==================cut here=================cut here==========
#!/bin/sh
#
# SYNOPSIS
#   @(#) Connects to the terminal server of the JKU and starts networking.
#
# USAGE
#   slipon [-h]
#
# DESCRIPTION
#   This script first runs "dip" to set up a SLIP connection via modem to the
#   terminal server.  Then it sets up the default route to the outside world
#   over the SLIP line.
#
# REMARKS
#   In the future additional network services ("inetd", etc.) might be started
#   by this script.  Alternatively, it might be called at the beginning of
#   "/etc/rc.net" only for setting up SLIP and everything else will be started
#   by "/etc/rc.net".
#
# FILES
#   /usr/local/etc/slipon.dip   ... the dip script for login at the terminal
#                                   server.
#
# EXIT CODES
    ERR_ARGS=1 # Error on arguments.
    ERR_CONN=2  # Could not set up the connection.
#
# SEE ALSO
#   dip(8), route(8)
#
# REVISION HISTORY
#   15-08-93 Andreas Neubacher  : created this file

ARGV0=`basename $0`

usage() {
  awk '/^# USAGE/,/^# DESCRIPTION/' <$0 \
  | sed "s/ <[^>]*>/ $ARGV0/; s/^#//; /DESCRIPTION/d" >&2
}

help() {
  awk '/^# DESCRIPTION/,/^# REVISION HISTORY/' <$0 \
  | sed "s/^#//; /REVISION HISTORY/d" >&2
}

#
# Process arguments.
#

if [ "$1" = -debug ]; then
  set -vx
  shift
elif [ "$1" = -ndebug ]; then
  set -nvx
  shift
fi

#set -- `getopt h: $*`

if [ $? != 0 ]; then
  usage
  exit $ERR_ARGS
fi

if [ "$1" = "-h" ]; then
  usage
  help
  exit 0
fi

#
# Set up SLIP connection.
#

dip /usr/local/etc/slipon.dip | tee /tmp/slipon.log
if grep -s ERROR: /tmp/slipon.log; then
  echo "Dip failed. Network not set up."
  exit ERR_CONN
fi

#
# Set up routes.
#

route del 140.78.1.1
route add default gw 140.78.1.1

==========cut here==================cut here=================cut here==========
# FILE
#   slipon.dip - Script for connecting to the terminal server of the JKU.
#

# Dial to terminal server - one of the numbers 24407[1-4].
  # Init modem.
  port modem
  reset
  send ATE1V1X4M0L0&Q6\r
  wait OK 5
  if $errlvl != 0 goto err_init
  sleep 3

  # Dial 244073
  print Dialling 244073.
  local 140.78.5.3
  send ATDP244073\r
  wait CONNECT 60
  if $errlvl == 0 goto login
  print No connection.
  # Dial 244074
  print Dialling 244074.
  local 140.78.5.4
  send ATDP244074\r
  wait CONNECT 60
  if $errlvl == 0 goto login
  print No connection.
  # Dial 244072
  print Dialling 244072.
  local 140.78.5.2
  send ATDP244072\r
  wait CONNECT 60
  if $errlvl == 0 goto login
  print No connection.
  # Dial 244071
  print Dialling 244071.
  local 140.78.5.1
  send ATDP244071\r
  wait CONNECT 60
  if $errlvl == 0 goto login
  print No connection.

  # All numbers busy ... abort.
  print ERROR: All lines failed - aborting.
  exit

# Login to the terminal server - don't care what line we actually got.
login:
  sleep 5
  send \r\n
  sleep 2
  send \r\n
  wait sername: 10
  if $errlvl != 0 goto err_user
  send YOUR_LOGIN_NAME\r
  wait assword: 5
  if $errlvl != 0 goto err_pass
  send YOUR_PASSWORD\r
  wait JKUTSL01> 5
  if $errlvl != 0 goto err_prompt
  send slip\r\n
  wait SLIP
  if $errlvl != 0 goto err_slip
  print Login to jkutsl0?.edvz.uni-linz.ac.at successful.

# Start SLIP mode.
  remote 140.78.1.1
  mtu 1500
  mode SLIP
  exit

err_init:
  print ERROR: Could not initialize modem! (Is it switched on?)
  exit
err_user:
  print ERROR: Did not get "Username:" prompt - aborting.
  goto hangup
err_pass:
  print ERROR: Did not get "Password:" prompt - aborting.
  goto hangup
err_prompt:
  print ERROR: Did not get "JKUTSL01>" prompt - aborting.
  goto hangup
err_slip:
  print ERROR: Server could not start slip - aborting.
  goto hangup

hangup:
  sleep 3
  send +
  sleep 1
  send +
  sleep 1
  send +
  wait OK 3
  send ath\r\n
  print Sent hangup to modem. Exiting now.
  exit

==========cut here==================cut here=================cut here==========
#!/bin/sh
#
# SYNOPSIS
#   @(#) Connects to the terminal server of the JKU and starts networking.
#
# USAGE
#   slipoff [-h]
#
# DESCRIPTION
#   This script first kills a running "dip" to abort networking.  Then it sends
#   a hangup to the modem using "dip".
#
# FILES
#   /usr/local/etc/slipoff.dip  ... the dip script for sending the hangup to
#                                   the modem.
#
# EXIT CODES
    ERR_ARGS=1 # Error on arguments.
    ERR_HUP=2  # Could not send hangup.
#
# SEE ALSO
#   dip(8), slipon
#
# REVISION HISTORY
#   15-08-93 Andreas Neubacher  : created this file

ARGV0=`basename $0`

usage() {
  awk '/^# USAGE/,/^# DESCRIPTION/' <$0 \
  | sed "s/ <[^>]*>/ $ARGV0/; s/^#//; /DESCRIPTION/d" >&2
}

help() {
  awk '/^# DESCRIPTION/,/^# REVISION HISTORY/' <$0 \
  | sed "s/^#//; /REVISION HISTORY/d" >&2
}

#
# Process arguments.
#

if [ "$1" = -debug ]; then
  set -vx
  shift
elif [ "$1" = -ndebug ]; then
  set -nvx
  shift
fi

#set -- `getopt h: $*`

if [ $? != 0 ]; then
  usage
  exit $ERR_ARGS
fi

if [ "$1" = "-h" ]; then
  usage
  help
  exit 0
fi

#
# Kill "dip".
#


DIPPS=`ps -ax | grep dip | grep -v grep`
DIPID=`echo "$DIPPS" | cut -c1-5`
if [ "$DIPPS" = "" ]; then
  echo "No \"dip\" process running."
else
  echo "To hang up the modem I must kill the following process:"
  echo
  echo $DIPPS
  echo
  echo "OK to kill it (y/n)? "
  read answer
  if [ "$answer" = "y" ]; then
    kill $DIPID
  fi
fi

#
# Send hangup to modem.
#

dip /usr/local/etc/slipoff.dip | tee /tmp/slipoff.log
if grep -s ERROR: /tmp/slipoff.log; then
  echo "Dip failed. No hangup sent to modem."
  exit $ERR_HUP
fi

==========cut here==================cut here=================cut here==========
# FILE
#   slipoff.dip - Script for disconnecting the modem (i.e. sending a hangup).
#

# Send hangup to modem.
  port modem
hangup:
  sleep 3
  send +
  sleep 1
  send +
  sleep 1
  send +
  wait OK 3
  if $errlvl != 0 goto err_hup
  send ath\r
  print Sent hangup to modem. Done
  exit

err_hup:
  print ERROR: No response from modem! (Is it locked, e.g. by a "dip" process?)
  exit

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
