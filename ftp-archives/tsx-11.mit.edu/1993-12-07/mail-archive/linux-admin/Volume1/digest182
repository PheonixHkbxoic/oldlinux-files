From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Tue, 23 Nov 93 00:14:23 EST
Subject:  Linux-Admin Digest #182

Linux-Admin Digest #182, Volume #1               Tue, 23 Nov 93 00:14:23 EST

Contents:
  Re: File System Corruption Lessons Learned (long) (Linux Software/Support)
  Re: "Talk" problems on 0.99.13 and > (Mohan Kokal)
  Re: Can't run VI (Mark Evans)
  Re: SLIP FAQ (Alan Cox)
  Re: Can't run VI and other programs!!! (Mark Evans)
  Re: Watcher... (Rob Shady)
  Re: Determine Passwords (What's in a name?)
  syslog config file help (thompsoc@myhost.subdomain.domain)
  Re: "Talk" problems on 0.99.13 and > (Uri Blumenthal)
  adjtime() for Linux? (Steve Tinney)
  Is there a patch against ICMP bombing? (Mohan Kokal)
  Re: Linux with 2 ethernet car (Per Andersson)
  Re: "Talk" problems on 0.99.13 and > (Mohan Kokal)

----------------------------------------------------------------------------

From: linux@rucs2.sunlab.cs.runet.edu (Linux Software/Support)
Subject: Re: File System Corruption Lessons Learned (long)
Date: Mon, 22 Nov 1993 17:37:58 GMT

In article <1993Nov22.153621.25661@spdc.ti.com> andy@piziali.lonestar.org (Andrew J. Piziali) writes:
>   I booted the system from my maintenance disk, the SLS 1.03 a1.5 floppy,
>created a clean file system (mke2fs /dev/sda2 229376) on the Linux partition,
>mounted the fresh partition on /mnt (mount -t ext2 /dev/sda2 /mnt), and
>attempted to restore it (cd /mnt; tar xvfbp /dev/rmt0 4096) from the most recent
>QIC-250 tape (using a Wangtek 5150ES).  After restoring about ten files tar
>displayed the message "Skipping to next file header ..." and hung.
>
>   After several days of attempting to read this tape and each of my older
>backup tapes, during which I was able to read the tape on a Sun QIC-250 drive
>using Sun's tar but was not able to read even using Linux dd(1), I finally
>discovered the problem.  The SLS 1.03 a1.5 floppy was created with the 0.99pl9
>Linux kernel.  The tapes were all written using 0.99pl12.  After copying the
>0.99pl12 kernel to the maintenance floppy I was able to read the tape but I
>wasn't out of the woods yet.
>
>   These are the lessons learned from this whole experience:
>
>       4) keep a current maintenance floppy which uses the same kernel
>          binary (/zImage) as your hard disk,
>
>       5) keep the maintenance floppy's /etc/passwd and /etc/group
>          files up-to-date with the hard disk,
>

How does one go about creating a maintenance floppy?  The only disks
I have been able to make are boot only disks.  Any help would be most
appreciated!

James

-- 
+-------------------------------------------------------------------+
| Linux Software & Support for Radford University students/faculty. |
|                                                                   |
| E-mail linux@rucs2 for questions or instillation help.            |

------------------------------

From: magnus@cegt201.bradley.edu (Mohan Kokal)
Subject: Re: "Talk" problems on 0.99.13 and >
Date: 22 Nov 1993 12:41:18 -0600

In <CGvBAy.vLE@hawnews.watson.ibm.com> uri@watson.ibm.com writes:


>"talk" seems to work (yeah, right :-), but "ytalk" doesn't!
>Ytalk complains that 
>       /home/who/src/talkd # ytalk root@angmar
>       Cannot read from YTalk daemon!: Connection refused

  Looks like your ytalk is looking for the talkd at a wrong port ....
  (btw.. did this thing stop working after you made the talk work?)
  (if so, then, it seems you messed up something. because.. when you compile
   talk, you do *not* change the talkd (they are entirely different progs)).


------------------------------

From: evansmp@mb48059.aston.ac.uk (Mark Evans)
Subject: Re: Can't run VI
Date: Mon, 22 Nov 1993 19:08:15 GMT

ez025807@othello.ucdavis.edu wrote:
: When I log in as a user "other then root" I cannot use programs
: such as VI.  I get into VI but cannot edit a file.
: The message I get when I open a file, for example a file name 'test'
: is the following:

:       garbage() failed to read oldhdr?? [More...] 
:       "test" [READONLY] 1 line, 1 char [More...]
:       Trouble writing to tmp file 

Check that you have the right permissions on /tmp,
try chmod 1777 /tmp

Also check, with df /tmp, that the filesystem contating /tmp
is not full.


------------------------------

From: iiitac@swan.pyr (Alan Cox)
Subject: Re: SLIP FAQ
Date: Mon, 22 Nov 1993 18:05:41 GMT

In article <1993Nov18.033018.23520@cs.cornell.edu> mdw@cs.cornell.edu (Matt Welsh) writes:
>The NET-2-FAQ has been superceded by the NET-2-HOWTO posted to c.o.l.announce
>just yesterday. I know of many people who are reading and relying on the
>VERY outdated NET-2-FAQ although I have tried to make it quite clear that
>this document is OBSOLETE. Apparently people are still picking it up from
>a few (ahem) FTP sites where it still lingers.

And if you see the NET-2-HOWTO don't believe it: Its obsolete and wrong.
A couple of things it tells you to do will break an SLS system (not a bad
thing in itself 8-))

This is the list of corrections/comments I mailed Terry. bear in mind this
originally was a personal email so some of it may seem more like a complaint
than it should be read because of this.

        developers directly. The developers of the NET-2 code _cannot_ and
        _will not_ offer support for NET-2 as distributed in any form, other
        than as specified in this document, or as per distributed Alpha test
        instructions specify. This includes the Net-2d(ebugged) versions of
        Net code as well.

This annoys me. Unlike Fred I do go to the trouble of helping people with
problems caused by other peoples stupid (IMHO) setups. It's also the only
to find out where the real perceived problems - be they documentation tools
or code ones exist. How about _ASKING_ before you comment.


        The current libraries (libc-4.4.1), found in 
        sunsite.unc.edu:/pub/Linux/GCC/image-4.4.1.tar.z. (You'll probably 
        want to install the include files in inc-4.4.1.tar.z as well! See the 
        READMEs there for details.)

You must have libc4.4.2 or higher or the routing tables will fail in
certain cases due to a library bug. Slakcware includes a statically linked route
against these libraries.

        The current NET-2 configuration file distribution is in
        tsx-11.mit.edu:/pub/linux/packages/net/net-2/sources/net/net-010.tar.z.

        The TCP/IP application binaries and setup files are found in
        tsx-11.mit.edu:/pub/linux/packages/net/net-2/binaries. 
        Get the three files in this directory: net-base.tar.z, net-std.tar.z, 
        and net-ext.tar.z.

With the pl13 kernel these are partially out of date and you must get the
replacement telnetd/rlogind/rlogin by Charles Hedrick.
        


        ANOTHER WARNING: On SLS distributions, /usr/etc is a symlink to
        /etc. You need to delete this link if you have it. So, run the
        command
                # rm /usr/etc
                
NEVER NEVER DO THIS - SOME THINGS REQUIRE /etc SOME /usr/etc DOING THIS WILL
_BREAK_ PARTS OF AN SLS SYSTEM.


        If you use shadow passwd, you need to unpack the net2-shadow-bin
        package from the root directory (/) after unpacking the software
        above.
                # cd /
                # zcat net2-shadow-bin.tgz | tar xvvofp -

Also replace any blank passwords in /etc/passwd with :x: instead of
::. Otherwise rshd/rlogind will let anyone become these user ids.
This is an SLS setup bug.
        


2.3 Creating the device interfaces
        You'll need to create several device special files in /dev for
        use by NET-2. These are all created (as root) with the "mknod"
        command. This command is given 4 arguments: the name of the
        device interface (i.e. "/dev/net"), the type of device ("c" for
        character, "b" for block, etc.), and the major and minor numbers
        of the device driver (specified in the kernel).

This entire section is complete and total crap. You need no device entries
and creating these device entries is a waste. Worse than that having them
lying around for NET2E will cause more confusion and possibly real harm
as some NET2E device ids clash with things like the SCSI driver.

3.1 Configuring the NET-2 kernel code
        First, you need to read and modify the file
                /usr/src/linux/net/inet/CONFIG
        which specifies the drivers used by the NET-2 code in the kernel.
        Also see the various README files in /usr/src/linux/net/inet which
        explain the format of these files.

This file has moved for pl13alpha k upwards to ready for pl14 note it will
be /usr/src/linux/drivers/net/CONFIG: You ought to be using the lilo
facility instead anyway.

        Finally do 'make dep' and 'make'. You now have a new 0.99.10 kernel 
                                    Make your mind up 10 or 13 ? ^^^
        with NET-2 set up. I wouldn't reboot it quite yet as we still have
        to configure the NET-2 programs before it will work correctly.


        * Your network mask ('netmask'). Again, your network admins will
          supply this. Most networks are class C subnetworks which use
          255.255.255.0 as their netmask. Other Class B networks use
          255.255.0.0. If one of these doesn't work, try the other. If this
          doesn't work, ask your local net guru for help.
          
How about explaining it defaults for the probable correct one ie:
1-127   255.0.0.0
128-191 255.255.0.0
else    255.255.255.0

          If you're only using loopback, you don't have a netmask.


        * Your gateway address. This is the address of the machine which
          is your "gateway" to the outside world (i.e. machines not on your
          subnet). In general the gateway machine has an IP address identical
          to yours but with a ".1" in the last position; e.g. if your IP
          address is 128.253.154.32, your gateway might be 128.253.154.1.
          Your network admins will provide you with the IP address of your
          gateway.

If you are doing proxy arp based routing you'll have a netmask of 0.0.0.0
and _no_ gateway. Ditto if you are one of the many users with jsut a private
ethernet. Documenting how to go without a gateway is worth doing.

        NET-2 supports full routing, with proxy ARP, multiple routes, 
BZZT : Proxy arp isn't supported until PL14. Subnets are only supported with
libc4.4.2 or higher and on byte boundaries.

#!/bin/sh
# rc.inet1: configure the network interface

HOSTNAME=`hostname`

# Attach the loopback device. 
/etc/ifconfig lo 127.0.0.1  
/etc/route add 127.0.0.1

# IF YOU HAVE AN ETHERNET CONNECTION, use these lines below to configure the 
# eth0 interface. If you're only using loopback or SLIP, don't include the
# rest of the lines in this file.

# Edit for your setup.
IPADDR="128.253.154.32"  # REPLACE with YOUR IP address!
NETMASK="255.255.255.0"  # REPLACE with YOUR netmask!
NETWORK="128.253.154.0"  # REPLACE with YOUR network address!
BROADCAST="128.253.154.255"  # REPLACE with YOUR broadcast address, if you
                             # have one. If not, leave blank and edit below.
GATEWAY="128.253.154.1"  # REPLACE with YOUR gateway address!

/etc/ifconfig eth0 ${IPADDR} netmask ${NETMASK} broadcast ${BROADCAST}
# If you don't have a broadcast address, change the above line to just:
# /etc/ifconfig eth0 ${IPADDR} netmask ${NETMASK} 

/etc/route add ${IPADDR}
^^^^^^^^^^^^^^^^^^^^^^^^ This line is wrong. It shouldn't be here


        If you're not going to be using NFS, you can comment out the lines
        to run: rpc.portmap, ugidd, mountd, routed, nfsd, pcnfsd, and bwnfsd.
               
rpc.portmap is needed for several other tools (not normally included).
routed has _NOTHING_ to do with NFS and is only appropriate if your
are on a RIP routed network.          
        QUESTION: With SLIP, I get a connection open, but no data flows.

        ANSWER: This could be a number of things. First, check your routes
        and be sure that the gateway is set correctly. Attempt to ping
        your gateway; if you can't, then something is wrong with the routes.
        
        Another problem could be that your system and the SLIP server 
        disagree about header compression. With 0.99.pl11 and above, 
        SLIP automatically compresses packet headers. To turn off header
        compression, look in slip.c for the function sl_encaps(). Comment
        out the line that calls sl_compress(). That should be all that's
        needed.

NO: Either use setencap (pl14) or use the CONFIG file option SL_COMPRESS


8. Known bugs 
        There are several known bugs with the NET-2 software. Note that these
        may or may not be fixed with a newer version of the NET-2 code;
        therefore, I leave them here. 
        
        The bugs here are for NET-2d, found in kernels 0.99.pl10, pl11, 
        pl12, and pl13. NET-2e (currently in alpha), when released, may
        or may not have fixed these bugs. 

        * Bug with route guessing code. If you ifconfig the "lo"
          interface before the "eth0" interface in rc.inet1, whenever you
          add a route, it will be added to "lo" instead of "eth0". 
          (Simply use the "route" command by itself; it will display all
          of your routes. If your "default" route, which should be out
          on the ethernet, is for device "lo" instead of "eth0", then you're
          seeing this bug.) 
          
          This is just a problem with the route guessing code. Several
          things can fix it: 1) ifconfig/route on "eth0" before "lo" in
          rc.inet1; or, 2) Set your netmask to 255.0.0.0 (which is reported
          to work, but I can't guarantee it). This should be fixed in NET-2e.

        * Missing IP packet fragmentation. Packet fragmentation allows the
          various protocol layers to "chop up" packets into smaller packets
          if the MTU (maximum tranfer unit) of one network differs from
          another. NET-2e should contain packet fragmentation/defragmentation
          code, but NET-2d currently does not.
          
Will be in pl14 in Net2Debugged

        * Weak NFS support. There have been a number of success stories with
          NFS under Linux, however, not all of the support is there. For
          one thing, the current NFS buffer size is much smaller---and 
          therefore much slower---than other implementations of NFS. From
          what I understand, this problem is related to the lack of packet
          fragmentation code, above.

Mostly if you get 'kmalloc: calle with impossibly large...' you forgot to
mount the Linux file system from a remote machine with -orsize=1024,wsize=1024


Alan
iiitac@pyr.swan.ac.uk


------------------------------

From: evansmp@mb48059.aston.ac.uk (Mark Evans)
Subject: Re: Can't run VI and other programs!!!
Date: Mon, 22 Nov 1993 19:12:12 GMT

Steve VanDevender (stevev@miser.uoregon.edu) wrote:
: In article <CGnM92.HEH@ucdavis.edu> ez025807@othello.ucdavis.edu ( ) writes:

:    When I want to run programs such as CU or VI I get an error message
:    saying:  "No space left on device"

:    Does anyone recognize this problem?????

: You have filled up the partition (or partitions) where /tmp and
: /usr reside.  Deleting unnecessary files may fix your problem.
: Try removing the stuff in /tmp first; /tmp can accumulate things.

Well really you sould have something like 
/bin/rm -rm /tmp/* /tmp/.X*
in one of the startup times.

Also you should wipe /tmp periodically with a cron job.

To be honest this is a general unix thread, rather than anything
Linux specific.

------------------------------

From: crt@tiamat.umd.umich.edu (Rob Shady)
Subject: Re: Watcher...
Date: 22 Nov 1993 14:38:15 -0500

webster@kaiwan.com (Tom Webster) writes:

[Description of various definitions of 'WATCH' deleted]

Actually... What I think the original poster meant, was something that you
can actually whatch what a user on a tty is typing, and perhaps even
intervine and be able to type commands for the user while they watch.
Ie: Like a PC BBS system... BTW- I have been looking for something like
this for quite a long time, if anybody else knows anything, let me know
as well..  Mail me, since I don't read this group often..



------------------------------

From: JMSCHURY@CHEMICAL.watstar.uwaterloo.ca (What's in a name?)
Subject: Re: Determine Passwords
Date: Mon, 22 Nov 1993 19:54:15 GMT

In article <2cm8i0$b0p@cs1.bradley.edu> mojo@cs1.bradley.edu (Tony Bailey) writes:
>From: mojo@cs1.bradley.edu (Tony Bailey)
>Subject: Determine Passwords
>Date: 20 Nov 1993 17:17:20 -0600

>I have a user on my linux system that lost his password.  How as root can
>I find out what his pw is w/out changing it?  Is there a util to do this?

If he's a typical user, Crack will be able to grab his password in about an
hour (on a 486 dx50).  Get it off sunsite...you should probably run it to
inform users that their passwords suck anyways...

But other than that, the other comments about changing it and telling him
are correct...this is the usual way to do it.

Good luck,
Jerry
==============================================================================
jmschur@chemical.watstar.uwaterloo.ca --> 5150 - The Criminally Insane
Question of the Week...
                Does Tylenol count as breakfast??



------------------------------

From: thompsoc@myhost.subdomain.domain
Subject: syslog config file help
Date: 22 Nov 93 19:59:08 GMT

How does one go about setting up syslog.conf entry for another computer on 
the network.  I have tried several different setups but to no avail.  All
I want to have happen is for the other comp. to write messages to the 
comp runing linux .99pl13 / slackware 1.0.3.

Chris Thompson
thompsoc@oliver.kerr.orst.edu
thompsoc@kerr.orst.edu

------------------------------

From: uri@watson.ibm.com (Uri Blumenthal)
Subject: Re: "Talk" problems on 0.99.13 and >
Date: Mon, 22 Nov 1993 19:57:51 GMT
Reply-To: uri@watson.ibm.com

In article <2cr14e$m4i@cegt201.bradley.edu>, magnus@cegt201.bradley.edu (Mohan Kokal) writes:
|> In <CGvBAy.vLE@hawnews.watson.ibm.com> uri@watson.ibm.com writes:
|> >    /home/who/src/talkd # ytalk root@angmar
|> >    Cannot read from YTalk daemon!: Connection refused
|> 
|>   Looks like your ytalk is looking for the talkd at a wrong port ....
|>   (btw.. did this thing stop working after you made the talk work?)
|>   (if so, then, it seems you messed up something. because.. when you compile
|>    talk, you do *not* change the talkd (they are entirely different progs)).

As a matter of fact, I didn't touch "talk" - I recompiled "talkd"
(or rather "ntalkd" and installed it as "/etc/in.ntalkd"). YTalk
never worked on Linux though, while on RS/6000 it runs like charm.
-- 
Regards,
Uri.      uri@watson.ibm.com     scifi!angmar!uri 
============
<Disclaimer>

------------------------------

From: sjt@enlil.museum.upenn.edu (Steve Tinney)
Subject: adjtime() for Linux?
Date: 22 Nov 1993 20:16:05 GMT

I'd like to bring up nistime on my Linux box and ftp'd the source
but it requires adjtime(), which I have been unable to find
anywhere. Anyone done this already?

 Steve



------------------------------

From: magnus@cegt201.bradley.edu (Mohan Kokal)
Subject: Is there a patch against ICMP bombing?
Date: 22 Nov 1993 15:24:55 -0600

I was wondering... is there a patch against the famous ICMP bombing?
or something similar?

Thanks.
-Mohan-

------------------------------

From: ppan@celsiustech.se (Per Andersson)
Subject: Re: Linux with 2 ethernet car
Date: Mon, 22 Nov 1993 21:07:29 GMT

In article <1.443.2380.0N27A5FD@satalink.com> john.will@satalink.com (John Will) writes:
>C >Now the question: Is it possible to set up a linux PC to route all requests
>C >on the thick net to the thin net, preferable in a way that is transparent
>C >to all but the machines on the thin net.
>
>A simple transceiver should be all that's required, that comment about you
>"messing up the net" is total bullshit.  You can tap into the network with
>a transceiver and run your thinnet segment from that, shouldn't be a problem.

Tranceivers seems to a different kind of animal on your planet than on mine.
On my planet you connect the tranceiver to either thick or thin ethernet (or
10BaseT, or FOIRL) and get AUI out. To connect thick to thin you either put
a small device which name in english I am not familiar with, but it has BNC
in the thinwire end, and connects to the yellow cable instead of a terminator
in the other end. This certainly allows you to mess up their net, by not
having it properly terminated, or the real, but expensive way: two 
tranceivers, one to each cable, and a bridge, repeater or router (Linux?)
between them. Of course you can't have the same IP network on both sides of
a router, to think about that.

/Per
-- 
=============================================================================
Per Andersson - ppan@celsiustech.se (perand@stacken.kth.se on free time)
Managing networks ( and occasionally SUNs) at, but not speaking for:
CelsiusTech AB, J{rf{lla, Sweden

------------------------------

From: magnus@cegt201.bradley.edu (Mohan Kokal)
Subject: Re: "Talk" problems on 0.99.13 and >
Date: 22 Nov 1993 15:14:18 -0600


In <CGwssF.15ux@hawnews.watson.ibm.com> uri@watson.ibm.com (Uri Blumenthal) writes:

>|>   Looks like your ytalk is looking for the talkd at a wrong port ....
>|>   (btw.. did this thing stop working after you made the talk work?)
>|>   (if so, then, it seems you messed up something. because.. when you compile
>|>    talk, you do *not* change the talkd (they are entirely different progs)).

>As a matter of fact, I didn't touch "talk" - I recompiled "talkd"
>(or rather "ntalkd" and installed it as "/etc/in.ntalkd"). YTalk
>never worked on Linux though, while on RS/6000 it runs like charm.

 Ytalk just worked for me... i'm using SLS1.03 0.99.13 . Although while 
 compiling i did get some warnings... it works great for me....
 so, your talk works well...but your ytalk doesnt?
 If you want the source code for the Ytalk that i compiled for linux
 (or the binaries) ... let me know...
 Somehow i still feel that your talkd isnt quite reaching its port...

-Mohan-


------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
