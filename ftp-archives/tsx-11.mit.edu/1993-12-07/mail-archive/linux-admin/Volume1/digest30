From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Tue, 31 Aug 93 17:14:05 EDT
Subject:  Linux-Admin Digest #30

Linux-Admin Digest #30, Volume #1                Tue, 31 Aug 93 17:14:05 EDT

Contents:
  Linux HOWTO Index (Matt Welsh)
  World writable DOS partitions - Solution. (Harvey J. Stein)
  Re: Net-Admin-Guide CAUTION! (Jon Gefaell)
  Re: Rnews problem in UUCP (Guido Thater)
  XDM bug/Shadow passwords. (Geir Harris Hedemark)
  Re: Where's Ross Biro ? (was Re: Let's collect KNOWN BUGS) (Brian Stempien)

----------------------------------------------------------------------------

From: mdw@sunsite.unc.edu (Matt Welsh)
Crossposted-To: comp.os.linux.announce,comp.os.linux.help,news.answers,comp.answers
Subject: Linux HOWTO Index
Date: 31 Aug 1993 15:53:00 GMT

Archive-name: linux/howto/index
Last-modified: 31 August 1993

The Linux HOWTO Index 
Matt Welsh, <mdwsunsite.unc.edu>
=============================================================================
Last Modified 27 August 1993

This is an introduction and index to the Linux HOWTO documents. 

0. What are Linux HOWTOs?

        Linux HOWTOs are short online documents which describe in detail
        a certain aspect of configuring or using the Linux system. For 
        example, there is the Installation HOWTO, which gives instructions
        on installing Linux, and the Mail HOWTO, which describes how to
        set up and configure mail under Linux. Other examples include the
        NET-2-HOWTO (previously the NET-2-FAQ) and the Linux-vs-386BSD HOWTO.

        Information in HOWTOs is generally more detailed and in-depth than
        what can be squeezed into the Linux FAQ. For this reason, the
        Linux FAQ is being rewritten. A large amount of the information
        contained therein will be relegated to various HOWTO documents.
        The FAQ will be a shorter list of frequently asked questions about 
        Linux, covering small specific topics. Most of the ``useful'' 
        information in the FAQ will now be covered in the HOWTOs. 

        HOWTOs are comprehensive docs---much like an FAQ but generally not
        in question-and-answer format. However, many HOWTOs contain an FAQ
        section at the end. For example, the NET-2-FAQ has been renamed to
        the NET-2-HOWTO, because it wasn't in question-and-answer format. 
        However, you will see the NET-2-HOWTO named as the NET-2-FAQ in many
        places. The two docs are one and the same.


1. Where to get Linux HOWTOs

        HOWTOs can be retrieved via anonymous FTP from the following
        sites:

                sunsite.unc.edu:/pub/Linux/docs/HOWTO

                tsx-11.mit.edu:/pub/linux/docs/HOWTO

        The Index, printed below, lists the currently available HOWTOs.

        HOWTOs are also posted regularly to the newsgroups comp.os.linux
        and comp.os.linux.announce. In addition, a number of the HOWTOs
        will be crossposted to news.answers. Therefore, you can find the
        Linux HOWTOs on the news.answers archive site rtfm.mit.edu.


2. HOWTO Index
        
        The following Linux HOWTOs are currently available. The list
        is small, because this is a relatively new project. 

        * INSTALLATION HOWTO. How to obtain and install Linux. This is the
          first document which a Linux newcomer should read. It discusses
          how to obtain Linux, both from the Internet and via Snail-mail,
          and how to install it. Focuses primarily on the SLS distribution
          of Linux, which is the current de facto standard.

        * Linux INFO-SHEET. A general technical introduction to Linux,
          listing its features, supported hardware, and other general
          information. 

        * Linux META-FAQ. A list of sources of information about Linux,
          such as documentation, newsgroups, FTP sites, and so on.

        * NET-2 HOWTO. Describes how to install and configure the Linux NET-2 
          TCP/IP code, in kernels 0.99.pl10 and above. (This has nothing 
          to do with the so-called BSD NET-2 distribution.) Discusses various
          aspects of TCP/IP networking under Linux, including the use of SLIP.
          The complete instruction manual for TCP/IP under Linux.
        
        * Ethernet HOWTO. A HOWTO about the various Ethernet device drivers
          which are available for Linux. Should be read along with the NET-2
          HOWTO by anyone using Ethernet for TCP/IP on Linux.

        * Mail HOWTO. All about configuration of electronic mail with Linux,
          including UUCP and TCP/IP mailers such as Smail and sendmail.

        * UUCP HOWTO. How to configure UUCP to transfer files, mail, and
          news to other UNIX machines on a UUCP-based connection. Includes
          discussion of Taylor UUCP for Linux.

        WANTED. I would be very happy if someone would write the following 
        HOWTO documents, and submit them to me (see the instructions in
        the next section below). Most of these are modifications of existing
        FAQ documents, and should be easy to put into HOWTO format. Keep in
        mind that HOWTOs generally aren't in FAQ format, but can contain an
        FAQ section at the end.

        Some of these are under construction; however, if you're interested
        in working on one of them, please let me know.

        * GCC/LIBRARY HOWTO. Discussing installation/upgrading of the GCC 
          and shared libraries under Linux. How to build shared libraries.
          Most of the material would come from Mitchum DeSouza's GCC FAQ. 

        * KERNEL HOWTO. How to upgrade and compile the kernel. Basic kernel
          tweaking, including how to turn on debugging output. How to decrypt
          panic messages. Basic introduction to kernel structure and hacking.
          (Under constructions, mdw@sunsite.unc.edu).
        
        * News HOWTO. Setup and configuration of news software, such as 
          C News, INN, and newsreaders (such as rn and tin) under Linux.

        * PRINTING HOWTO. How to install and use printing software such as
          lp/lpr on your system. How to configure /etc/printcap for
          various types of printers. Information can come from existing
          Printer and LPR FAQs. (Under construction.)

        * SCSI HOWTO. All of the ins and outs about SCSI drivers for Linux. 

        * SERIAL HOWTO. All of the ins and outs about serial communications
          under Linux, including use of getty for dialins. Perhaps a section
          on FAX software.

        * X WINDOWS HOWTO. How to install and configure XFree86 under Linux.
          Much of this is general, not Linux-specific, but the current
          XFree86 documentation consists mostly READMEs which most new users 
          don't understand. What hardware is supported, tweaking the Xconfig
          file, getting xdm to work, and so on. (Under construction, 
          mdw@sunsite.unc.edu).


3. Writing and submitting a HOWTO

        If you would like to write a Linux HOWTO document, there are a few
        guidelines that you should follow. 

        * Format the document neatly. HOWTOs must be available in plain 
          ASCII format, but you are free to use a formatting tool (texinfo,
          LameTeX, nroff) to format the document. Try to use meaningful
          structure and organization, and write clearly. Remember that
          many of the people reading HOWTOs do not speak English as their
          first language.

        * Make sure that all of the information is correct. I can't stress
          this enough. When in doubt, speculate, but make it clear that
          you're only guessing. 

        * Make sure that you are covering the most recent version of the
          available software. Also, be sure to include full instructions
          on where software can be downloaded from (FTP site name, full
          pathname). 

        * Include an FAQ section at the end, if appropriate. Many HOWTO
          documents need an "FAQ" or "Common Problems" section to cover
          information which can't be covered in the regular text.

        * Use other HOWTOs as a model. It is nice to have a common look and
          feel to HOWTO documents--- this document being an example. The
          easier the HOWTO is to browse, the more useful it will be to
          readers.


        After you have written the HOWTO, mail it to me (Matt Welsh) at
        mdw@sunsite.unc.edu. I am the HOWTO coordinator---I will look 
        over the HOWTO, and make any editorial remarks. I will also take
        care of approving and posting the HOWTO to the various newsgroups
        and uploading the HOWTO to the FTP archive sites. Of course,
        all credit for the HOWTO will go to the author.

        It is important that you go through me when submitting a HOWTO. I
        maintain the HOWTO archives and need to keep track of what HOWTOs
        are being written and who is doing what. If you don't submit a
        HOWTO to me, I can't include it in the archive or add it to the
        HOWTO INDEX. 

        I can also help to reformat the HOWTO if needed to make it look
        nicer. :) Once I have approved the HOWTO, I will post it and
        upload it to the FTP sites. I will also send you (the author) 
        the "final" version of the HOWTO with any changes. All you have
        to do is send me periodic updates (every month or so, as needed)
        and I will take care of posting the HOWTO regularly. 


3. Miscellaneous and Legalese

        If you have questions, please feel free to mail mdw@sunsite.unc.edu.
        The Linux FAQ rewrite is being coordinated by Ian Jackson, 
        ijackson@nyx.cs.du.edu, with help from others.

        Linux HOWTOs are copyrighted by their authors. You are free to
        distribute verbatim copies of HOWTOs in any medium, provided that
        the copyright notice and authorship remains intact.
-- 
Send submissions for comp.os.linux.announce to: linux-announce@tc.cornell.edu

------------------------------

Subject: World writable DOS partitions - Solution.
From: hjstein@sunrise.huji.ac.il (Harvey J. Stein)
Date: 31 Aug 93 17:48:50


Marvin L. Taylor <marvint@csn.org> asked me to post this for him
because newsgroup access is very expensive for him, but email isn't!
He also asked me to try out the enclosed program first, so I did, and
I found the following:

In the usage function, the mailer ate the backslashes.  Each printf
string should end with <backslash>n", instead of just n".  I put them
back in here, but if, when you get this, they're gone again, put'em
back.

I found it to work, but I actually already wrote one of these, so I
didn't need one.  What I really needed was the *invaluable* table of
mount options for dos partitions.  The command:

mount -t msdos -o umask=111 /dev/hda1 /dos

was *exactly* what I was looking for.  I'd still like to know,
however, if there is a way to enable non-roots to mount particular
partitions without using a setuid root hack.

============================== cut here ==============================

I asked Harvey Stein to post this for me, since he wanted the program
I've attached anyhow...

>>
>>    --- How do I allow non-root user's to write to a MSDOS-formated disk?
>>
>>        ( All files are owned by root and are mode 644 or 755 )
>>

Thanks for the responses.  Upon re-reading this, it is a little
unclear, but my question was about the files in the FAT partition
itself, not the device files (like "tar -cvf /dev/fd0 ...").

The manual pages that I have for "fstab(1)" and "mount(1)" do not have
this info, so here it is, for the record, as best I understand it from
"/linux/fs/msdos/inode.c" and my observations.

This is intended as a draft for a manual page entry, but I'm not
familiar enough with this code to write one (ie: use with caution).

|------------------------------------------------------------------------
|
|  When mounting a FAT file system (vfstype is "msdos"), then the
|  following options are valid:
|
|    check=VAL  - Assign checking to one of "relaxed", "normal" or
|                 "strict". Default is "normal".
|
|    conv=VAL   - Set conversion to "binary", "text" or "auto".
|                 Default is "binary".
|
|    uid=NUM    - Causes the User ID and/or Group ID of all files on
|    gid=NUM      the mounted file system to the number given. Default
|                 is uid/gid of mount (usually "uid=0,gid=0").
|
|    umask=OCT  - Cause all files on the mounted file system to have the
|                 umask given (in octal).  Default is 022.
|
|    debug=1    - Turns on debugging.
|
|    fat=VAL    - Assume VAL for size of FAT.  Only "12" or "16" is legal.
|
|    quiet=1    - Turns off error reporting (???).
|
|------------------------------------------------------------------------

> I'd also like to know how to allow non-roots to mount particular
> partitions and floppies, but not others.  Non-roots cannot currently
> mount anything...

See the attached file.

This reminds me, though, I've written similar tools for allowing
non-root users to do NFS mount/unmount.  It was a small (setuid root)
program that parsed the options, did the appropriate checks and then
exec'ed "mount(1)" or "umount(1)".

I've also used a similar pair of programs for optical disks, that
would (each did one of the following):

- Mount the disk as desired, then disable the eject button.
- Unmount the disk and enable the button or even eject the disk.

This would be nice for the CD-ROM, disallowing eject for a mounted
filesystem is a worthwhile cause.

Cheers,
- Marvin

============================== cut here ==============================
/* -*-C-*-
*******************************************************************************
*
* File:         mnt.c
* Rev:          $Revision: 1.1$
* Description:  Allow non-root user to mount and/or unmount floppies.
* Author:       Marvin L. Taylor
* Created:      Mon Aug 30 19:28:12 1993
* Modified:     Mon Aug 30 19:36:33 1993 (root) root@malta.linux
* Language:     C
* Package:      LINUX misc tools
* Status:       ALPHA
*
* (C) Copyleft 1993, Marvin L. Taylor, distribute freely.
*
*******************************************************************************
*
* To compile and install this, do this (as root):
*
*       cc -s -o /usr/local/bin/mnt mnt.c
*       chmod u+s /usr/local/bin/mnt
*       ln /usr/local/bin/mnt /usr/local/bin/umnt
*
* Then users would try something like:
*
*       mnt /dev/fd0 /home/mylogin/floppy
*
*       umnt /dev/fd0
*       umnt /home/mylogin/floppy
*
*  Comments welcome:  Marvin Taylor <marvint@csn.org>
*/
#include <stdlib.h>
#include <string.h>
#include <pwd.h>
#include <unistd.h>

/* Does S1 begin with S2 ? */
#define  strbeg(s1, s2)    (!strncmp( s1, s2, strlen(s2)))

/*  Print usage and exit. */
void usage( char *err )
{
printf("USAGE:mnt /dev/fd[01] $HOME[/...]\n");
printf("USAGE:umnt /dev/fd[01]ntumnt $HOME[/...]\n");
printf("FATAL ERROR: %sn\n", err);
exit(1);
}

int main( int argc, const char *argv[] )
{
struct passwd *pwd = getpwuid(getuid());
const char *vect[15];
int  nvect = 0, num;
const char *prog;

if (pwd==NULL) usage("Cannot get info for your UID");

/* Get the basename of the program from ARGV[0] */
if (NULL != (prog = strrchr( argv[0], '/' ))) prog++; else prog = argv[0];

if (!strcmp( prog, "mnt"))
{
if (!strbeg(argv[1],"/dev/fd"))   usage("Can only mount /dev/fd*");
if (!strbeg(argv[2],pwd->pw_dir)) usage("Must mount under $HOME");

vect[nvect++] = "/etc/mount";
vect[nvect++] = "-t";
vect[nvect++] = "msdos";
/*
* Add any other options desired here, like:
*
*    vect[nvect++] = "-o";
*    vect[nvect++] = "conv=a,umask=000";
*/
}
else if (!strcmp( prog, "umnt"))
{
if (argc!=2) usage("incorrect arguments");

if (!strbeg(argv[1],"/dev/fd") && !strbeg(argv[1],pwd->pw_dir))
usage("Can only unmount /dev/fd* or under $HOME");

vect[nvect++] = "/etc/umount";
}
else
usage("Unknown program name");

for( num = 1; num < argc ; num++ )
vect[nvect++] = argv[num];
vect[nvect++] = NULL;

return execv( vect[0], vect );
}
============================== cut here ==============================

--
Harvey Stein
Department of Mathematics
Hebrew University
hjstein@math.huji.ac.il

------------------------------

From: jeg7e@livia.acs.Virginia.EDU (Jon Gefaell)
Subject: Re: Net-Admin-Guide CAUTION!
Date: Tue, 31 Aug 1993 17:33:30 GMT

In article <25vpb7INNs3o@uwm.edu>, Rick Miller <rick@ee.uwm.edu> wrote:
>Don't waste a ton of paper printing the Net Admin Guide, until you've
>inserted the proper scaling commands into the PostScript to make it FIT
>on LETTER-sized paper (or print it on LEGAL-size).

Funny, I ran the DVI file through dvips, and printed it out on my 
LWIIG, presto, beautiful document. Letter size...

-- 
Any opinions expressed herein are not intended to be construed as those of UVA
 ______ 
 \ \  / Jon Gefaell, Computer Systems Engineer      | Amateur Radio - KD4CQY
  \/\/  Information Technology and Communications   | -Will chmod for food-
   \/   The University of Virginia, Charlottesville |  Hacker@Virginia.EDU

------------------------------

Crossposted-To: comp.os.linux.help
From: gt@sky.GUN.de (Guido Thater)
Subject: Re: Rnews problem in UUCP
Date: Tue, 31 Aug 1993 21:20:08 GMT

Steve W. Wynen (swwynen@undergrad.math.uwaterloo.ca) wrote:
: Hello Everybody;

: Hope you can help.  I am trying to set up a UUCP site to receive email and news.
: i have got the UUCP faq, the recommended reading, and this one still escapes me.

: I have the UUCP feed mostly working, can send and receive email, but i cannot get my news to come in properly, it gets sent over , but then seems to dissappear into the bit bucket.

: In the file /usr/spool/uucp/.Log/joesys I get many many messages like:


: Executing X.joesysX0ctr (rnews)
: ERROR: Execution: Exit Status 1
: Execution failed (X.joesysX0ctr)

: I have don e everything that the Cnews README said to do but, it doesnt work.

I had the same problem after restoring /bin from disk. Check if /bin/rnews
has permission 'rwsr-sr-x'. When I had the problem it was 'rws--x--x'..

Bye

Guido

: Any suggestions would be appreciated.

:  
-- 

______________________________________________________________________________

"How long a minute is depends on which side

------------------------------

From: Geir Harris Hedemark <geirhe@ifi.uio.no>
Subject: XDM bug/Shadow passwords.
Date: Tue, 31 Aug 1993 20:24:46 GMT

Has anyone with the knowledge to hack the source for xdm noticed that it
never takes a look at the shadow password file? I am using Xfree86-1.3
from sunsite.unc.edu. Or maybe someone has fixed this already? :-)

Geir

------------------------------

From: stempien@sol.cs.wmich.edu (Brian Stempien)
Subject: Re: Where's Ross Biro ? (was Re: Let's collect KNOWN BUGS)
Date: Tue, 31 Aug 1993 20:35:45 GMT

agulbra@nvg.unit.no (Arnt Gulbrandsen) writes:

>In article <25ui0m$o6d@aggedor.rmit.oz.au>,
>Paul Gortmaker <rcopg@minyos.xx.rmit.OZ.AU> wrote:
>>...hey, wait a minute! What happened to Ross Biro's setup! Did it just
>>die silently?

>Ross' robot first tries to match every question to a FAQ, replies
>automatically if any FAQ fits and forwards the question to a human
>(me or someone else) if it doesn't.  The human's answer is then
>entered into the FAQ database.

>It works, kinda, I get a question now and then, and since their code
>numbers keep rising I assume the robot answers a lot of questions
>from the FAQ database. 

>Very few, maybe no questions are real, new, bugs worth submitting
>bug reports for.  Generally they seem to be already reported on the
>activists lists or fixed-but-not-in-SLS type problems. Here's a
>typical question:

>> Keywords: Increasing swap 
>> Summary: I have a 20 meg swap partition and need linux to use it all
>> Program: Kernel
>> Kernel: .99pl9 soon to be pl10
>> Hardware: 486dx-33, 8meg Ram, 240meg IDE, Actix 32 SVGA
>> Description: I once saw an article explaining how to increase the
>> arbitary 16Meg swap partition limit. I unfortunatly didn't save it.
>> Expected: 

>And my reply was that you can't, you define another swap partition
>in the same manner as the first (only I used four lines, not two).

>All this is IMHO and from my experience, naturally.

Well, since this is the question I sent in about 2 months ago, I think I
should point out to you that I wasn't asking the typical swap-file question.
Whether I phrased it correctly or not, I was trying to get a pointer on how
to change the Linux kernel so that it COULD use more swap. The answers I
got from some other people convinced me that swap was too closely tied to
other kernel operations to be mucked with in an arbitrary way, so I didn't
mess with it. 

The point to my post: You should actually read the text of the questions,
maybe the service would be used more if more of the answers were useful.

>-- 
>Arnt Gulbrandsen, agulbra@nvg.unit.no
>The perpetual double-sig newbie.

PS. The swap thing is the last problem I have with Linux, It would be nice if
    single partition/swap-file sizes could be arbitrarily large, like
    commercial UN*Xes.

--
                                                         Brian Stempien
                                            Western Michigan University
          
                                           Email: stempien@cs.wmich.edu
                                           Voice:  (616)-387-5848


------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
