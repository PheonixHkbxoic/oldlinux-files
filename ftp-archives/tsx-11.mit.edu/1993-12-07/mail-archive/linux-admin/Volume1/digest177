From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Sat, 20 Nov 93 20:23:55 EST
Subject:  Linux-Admin Digest #177

Linux-Admin Digest #177, Volume #1               Sat, 20 Nov 93 20:23:55 EST

Contents:
  Re: Watcher... (Steven M. Gallo)
  Re: How to reach network? (Michael Poag)
  New User Script Bugs (Sami-Pekka Hallikas)
  Re: How to get rid of colors (Terry Gliedt)
  "New" directory structure... (Enrico Scotoni)
  Linux with 2 ethernet cards ... (Michael Cederberg)
  Shutdown -r now fails to reboot (Philip H Jones)
  Re: Berkeley Fast Filesystem (Joel M. Hoffman)
  Re: "New" directory structure... (Mejia Pablo J)
  Re: "New" directory structure... (Lars Wirzenius)
  Linux on Gateway2000 4DX2-66v (Joey Buttafuoco)
  Re: filesystem for archive disks (Karsten Steffens)
  Determine Passwords (Tony Bailey)
  Re: filesystem for archive disks (Mark Chace)

----------------------------------------------------------------------------

From: smgallo@cs.buffalo.edu (Steven M. Gallo)
Subject: Re: Watcher...
Date: Fri, 19 Nov 1993 17:51:10 GMT

In article <CGqzo4.Gw4@curia.ucc.ie> ken@symphony.mp.ucc.ie (Kenneth Walsh) writes:
> Does anyone know of a program to Watch terminals(tty's) on a linux machine?

What do you mean by 'watch' ?  The program getty will watch a tty for a login
or a modem.  getty_ps_2.07b is the newest release of this program.

-- 
Steven M. Gallo                         "If you don't expect too much from
SUNY at Buffalo, Dept. of Comp. Sci.     me you might not be let down.."
smgallo@cs.buffalo.edu                   - Gin Blossoms

------------------------------

From: poagm@jeeves.eng.sematech.org (Michael Poag)
Subject: Re: How to reach network?
Date: 19 Nov 1993 19:30:30 GMT
Reply-To: poagm@jeeves.eng.sematech.org (Michael Poag)


Maxim Matveev (mmatveev@boi.hp.com) wrote:
: Hi,

: I try to configure NET-2 stuff and any time then I try to
: run route or smth other I get "SIOCADDRT: Network unreacheble".
: I run SLS-1.03 with kernel 0.99pl13. Ethernet card - WD8003EP.

: I can ping my Linux box from other WS on the NET, Linux
: receive some info about ARP, but no outgoing connection.
: I've tried to solve this problem by myself, but neiver NET-2-HOWTO,
: neiver Network Adm. Guide don't help.

: --
: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
: Max Matveev                            (208) 396-7900 (work)
: mmatveev@hpbs669.boi.hp.com            (208) 385-9103 (home)

Might be that your kernal is still set for the 8013 (16-bit)
card type.. I remember having to fix something to get mine to work

watch during boot-up to see what type of card it thinks is there.

Hope this helps.
Michael Poag                  (512)863-9351
poag@cactus.org
poagm@jeeves.eng.sematech.org (512)356-3116  Pager 397-8669

------------------------------

From: semi@dream.nullnet.fi (Sami-Pekka Hallikas)
Subject: New User Script Bugs
Date: Thu, 18 Nov 1993 02:45:20 GMT

I find few bugs from that my newuser shell script. Also thanks to Bernard
Johnson for reminding me that user can write EVERYTING as login ;-).. Quite
major bug.. eh..

Changes between these two versions:
 - Script greps user name from /etc/passwd and check for dupes
 - Script does not accept ":" chars in user name ... and you know why ;)
 - Default shell question removed
 - Check BAD chars from login (Accept ONLY a-z and 0-9 chars)
 - Check space in login (Some of my users tried put their FULL NAME ;) )
 - Added "Last change" prompt (Great help for "sysop" testing)
 - Added posting most faq to new user
 - Script adds user to download and upload groups automaticly
   (Remember to change sz,rz,kermit,etc programs owner group and security
    if you want that only users in group can up- or download)

And here is diff for that script:

===== START =====
19a20,24
> setterm -underline on
> echo REMEMBER. In unix upper- and lowercase letters ARE NOT SAME!
> echo And USE ONLY 7BIT skandinavian characters in here\!
> setterm -underline off
> echo 
23,24c28,47
< echo -n "Your FIRST- and LASTNAME: "
< read name
---
> 
> vara=1
> while test $vara = 1
> do
>       echo -n "Your FIRST- and LASTNAME: "
>       read name
>       if test . = `grep -i ":$name:" /etc/passwd|cut -d: -f1`.
>       then
>               vara=0
>       else
>               echo You have login in here allready\!
>               grep -i ":$name:" /etc/passwd
>               vara=1
>       fi
>       if test "`echo "$name"|grep ":"`". != "".
>       then
>               echo "You can't use \":\" chars in your name."
>               vara=1
>       fi
> done
41,59d63
< echo "   1 - /bin/sh                  6 - /bin/ksh "
< echo "   2 - /bin/bash                7 - /bin/sash"
< echo "   3 - /bin/bwbasic             8 - /bin/tcsh"
< echo "   4 - /bin/chsh                9 - /bin/zsh "
< echo "   5 - /bin/csh                              "
< echo
< echo -n "\"default\" shell to use (or press enter): "
< read shell
< vara=0
< if test $shell. = "9".; then shell="/bin/sh"     ; vara=1; fi
< if test $shell. = "8".; then shell="/bin/tcsh"   ; vara=1; fi
< if test $shell. = "7".; then shell="/bin/sash"   ; vara=1; fi
< if test $shell. = "6".; then shell="/bin/ksh"    ; vara=1; fi
< if test $shell. = "5".; then shell="/bin/csh"    ; vara=1; fi
< if test $shell. = "4".; then shell="/bin/chsh"   ; vara=1; fi
< if test $shell. = "3".; then shell="/bin/bwbasic"; vara=1; fi
< if test $shell. = "2".; then shell="/bin/bash"   ; vara=1; fi
< if test $shell. = "1".; then shell="/bin/sh"     ; vara=1; fi
< if test $vara   =  0  ; then shell="/bin/bash"   ; vara=1; fi
73c77
< echo And use ONLY LOWERCASE letters in your login name... PLEASE!
---
> echo Use ONLY LOWERCASE letters in your login name... PLEASE!
81,86c85,100
<       if test . = `grep $login":" /etc/passwd|cut -d: -f1`.
<               then
<                       vara=0
<                       break
<               else
<                       echo Login is allready in use\!
---
>       if test . = `grep "$login:" /etc/passwd|cut -d: -f1`.
>       then
>               vara=0
>       else
>               echo Login is allready in use\!
>               vara=1
>       fi
>       if test "`echo \"$login\"|grep -x \"[a-z0-9]\+\"`". = .
>       then
>               echo "Use only a-z and 0-9 chars in you're login name."
>               vara=1
>       fi
>       if test "`echo \"$login\"|grep \" \"`". != .
>       then
>               echo "Use only ONE WORD and 8 chars."
>               vara=1
89a104
> echo "Press ENTER to continue (Last change to interrupt with ^C)";read
91c106
< echo $login:x:$usernro:$defgroup:$name:/home/$login:$shell >> /etc/passwd
---
> echo $login:x:$usernro:$defgroup:$name:/home/$login:/bin/bash >> /etc/passwd
104a120
> cat /usr/doc/dream.faq > /usr/spool/mail/$login
108a125
> 
112a130,138
> 
> grep -v "download:" /etc/group > /etc/group.new
> echo `grep "download:" /etc/group`,$login >> /etc/group.new
> mv -f /etc/group.new /etc/group
> 
> grep -v "upload:" /etc/group > /etc/group.new
> echo `grep "upload:" /etc/group`,$login >> /etc/group.new
> mv -f /etc/group.new /etc/group
> 
117c143
< echo Now try login again with you new "login"...
---
> echo Now try login again with you new login \"login\".

===== END =====
-- 
+--------------------------+-------------------------------------------------+
| semi@dream.nullnet.fi    |       MAIL MEDIA. Do Not Expose to Flame!       |
| samip@garbo.uwasa.fi     +-------------------------------------------------|
| semi@freenet.hut.fi      | Dream World BBS * 358-21-4389843 * 24H * 9600 * |

------------------------------

From: zaphod!tpg@csn.org (Terry Gliedt)
Subject: Re: How to get rid of colors
Date: 19 Nov 1993 15:04:05 -0600
Reply-To: zaphod!tpg@csn.org

I thought this sequence of news postings & mail might be of interest to some,  
so I am posting it lest others remain as confused as I was.  :-)



In article <2c0vqa$872@s1.gov> of comp.os.linux.admin, pcc@s1.gov (Philip C.  
Cox) writes:
> I just installed Slack 1.1.0 and I was introduced to ncurses and
> those blasted colors. My question is ; How do I get it to not display
> files on colors, or how can I change the colors?

To which hpa@ahab.eecs.nwu.edu (H. Peter Anvin N9ITP) replied:

>To remove colors from ls:
>
>   * Remove the -o option from your .profile, /etc/profile, .cshrc or
>     /etc/csh.cshrc file.
>
>To change colors:
>
>   * Define an LS_COLORS variable.
> (more deleted)

And I replied to hpa:

> (Using Linux pl13 from SLS)
>
> I've been wondering about this ever since I started playing with Linux. When  
> I use root, I get a colored output from ls. On my tpg user, I do not.  So I
> searched all over for this -o option. Not to be seen. Nothing in the man page  
> for ls and no man page for color-ls.
  

> After some digging I discovered that root was using /usr/bin/ls (25604 bytes)  
> while tpg was using /bin/ls (13252 bytes). It was simply a matter of a minor     
> difference in the PATH.  Boy was this confusing!  Perhaps others may have
> been in the same confused state as I.

To which hpa@ahab.eecs.nwu.edu (H. Peter Anvin N9ITP) replied:

> Argh!  Sounds like YASLSCP (Yet Another SLS Configuration Problem).
> You may just want to pick up the latest color-ls binary from
> eecs.nwu.edu and nuke both /bin/ls and /usr/bin/ls (I think SLS uses
> the old HLU color-ls, but I don't know.)  The new color-ls will work
> fine as the only ls on the system since it only displays color if you
> have the -o option.
>
> Hint:  If "/usr/bin/ls -o" gives you an error, you have an outdated color-ls.


=============================================================================
Terry Gliedt                                               zaphod!tpg@csn.org

------------------------------

Date: Fri, 19 Nov 1993 08:03:00 MET
From: scoti@p46.keru.chg.imp.com (Enrico Scotoni)
Subject: "New" directory structure...

 > From: zukerman@rosarita.berkeley.edu (Itai Zukerman)

 > i've seen mentioned in several places that "linux" is moving to
 > a
 > new directory arrangement, specifically involving the creation
 > of
 > /sbin, some shifts in /etc and possibly other changes.  (i
 > realize
 > this is also a matter of taste, hence the quotes).  for example,
 > the
 > lilo documentation comes with QuickInst.new (or somesuch)
 > supporting
 > the so-called "new" structure.

 > has there been discussion of this?  have i missed it?  are there
 > references?  where can i read about the pros and cons of
 > different
 > directory arrangements?

I'm interested in this too. Especially the "sbin" directory. What the heck is
it good for (I mean, I don't have one, and I don't see a need for it right now)

Regards

Enrico.

---

------------------------------

From: c878109@idcad7.uucp (Michael Cederberg)
Subject: Linux with 2 ethernet cards ...
Date: Sat, 20 Nov 1993 11:58:38 GMT

Hi there!

The department that I'm working for is to be merged shortly with another.
This gives us troubles with our network, since other depertment is using thick
ethernet while we're currently using thin ethernet. We would like to continue
using thinnet, but are not allowed to, since that would (and I quote) "allow
us to mess up the net".

Now the question: Is it possible to set up a linux PC to route all requests
on the thick net to the thin net, preferable in a way that is transparent
to all but the machines on the thin net.

Michael Cederberg
-- 
Technical University of Denmark
and
State Library of Denmark, Computing Office

------------------------------

From: phil@plisgyn.demon.co.uk (Philip H Jones)
Subject: Shutdown -r now fails to reboot
Date: Fri, 19 Nov 1993 22:03:32 +0000

 I am running pl11 and have a problem rebooting i.e when doing shutdown -h now
everything shuts down o/k but fails to reboot . I read the lilo faq and can see
no problem , config follows -

boot = /dev/hda
install = /etc/lilo/boot.b
compact
delay = 50
vga = normal
ramdisk = 0
image = /Image.pl11sel
     label = pl11sel-ro
     read-only
image = /Linux.pl11
     label = pl11-ro
     read-only
image = /Linux.pl11
     label = pl11-rw
image = /Image.pl10
     label = linux.pl10
other = /dev/hda1
      table = /dev/hda
      label = dos5

  Can anyone tell me how a reboot should work work so I can find why mine 
does'nt . I have tried using strace but am not sure what to look for.
NOTE- boot = /dev/hda but root = /dev/hda3 could this be the problem.

                         Yours Hopefully
                           Phil Jones 

------------------------------

From: joel@rac2.wam.umd.edu (Joel M. Hoffman)
Subject: Re: Berkeley Fast Filesystem
Date: Sat, 20 Nov 1993 15:33:38 GMT

[who wrote what deleted]
>Curt> Linux has its advantages over BSD, but the lack of FFS is not one of
>Curt> them.
>
>Enough with this! the ext2 fs is competitive with the FFS, and with
>Youngdale's clustering diffs soon, I think, to become standard,
>performance is as good or even way better, _without_ all the silly
>complications of fragmentation.

For me a more important question is stability.  I'm still (shame on
me) running the original minix FS.  But I've had several crashes with
GCC running and swapping, dozens of open files, etc., and I've never
lost any data.  The FS seems to handle crashes VERY well, always
leaving the disk in a stable state.

I've heard horror stories from users of other fs's, which is the only
reason I haven't upgraded.

How do the FFS and ext2 compare with respect to stability after a
crash?

-Joel
(joel@wam.umd.edu)
-- 
=============================================================================
|_|~~ Germany, Europe. 1943.    "The diameter of the bomb was 30 centimeters,
__|~| 16 Million DEAD.           and the diameter of its destruction, about 7
                                meters, and in it four killed and 11 wounded. 
 cnc  Bosnia, Europe. 1993.     And around these, in a larger circle of  pain
 cnc  HOW MANY MORE?          and time,  are scattered two  hospitals and one
                          cemetery.   But the young woman who was  buried  in
                    the place from where she came, at a distance of more than
             than 100 kilometers, enlarges the circle considerably.   And the 
      lonely man who is mourning her death in a distant  country incorporates
into the circle the whole world.  And I won't speak of the cry of the orphans
that reaches God's chair and from there makes the circle endless and godless."
=============================================================================
     Tell Clinton to stop the genocide:  president@whitehouse.gov

------------------------------

From: pjm9806@a112.usl.edu (Mejia Pablo J)
Subject: Re: "New" directory structure...
Date: Sat, 20 Nov 1993 18:53:27 GMT


>    I'm interested in this too. Especially the "sbin" directory. What
> the heck is it good for (I mean, I don't have one, and I don't see a
> need for it right now)


I believe sbin is used to store important executables that have been
statically linked.  This is for emergency recovery purposes.

Pablo

------------------------------

From: wirzeniu@klaava.Helsinki.FI (Lars Wirzenius)
Subject: Re: "New" directory structure...
Date: 20 Nov 1993 21:11:16 +0200

zukerman@rosarita.berkeley.edu (Itai Zukerman) writes:
> i've seen mentioned in several places that "linux" is moving to a
> new directory arrangement, [...]
> 
> has there been discussion of this?

There is an effort going on to create a new "Filesystem standard"
for Linux.  The goal is that all distributions will adopt it.  It
will not and cannot be enforced, which means that if you disagree
with it, or are just too lazy to modify your system to conform
to it, nobody's going to mind.  

Of course, if it does become popular (and it probably will),
more and more software will assume that layout, so people with
some other layout will have to hack on things.

The discussion is going on in the FSSTND channel on the linux-activists
mailing list on niksula.hut.fi.  See the FAQ for instructions on
joining.  (Although I get the impression that unless you have some
system administration experience, you are very likely to overlook
important issues.  Also, at this point, when the work has been
going on for several months, it is increasingly difficult to come
up with new things to discuss, and re-discussing things is not
fruitful.)

--
Lars.Wirzenius@helsinki.fi  (finger wirzeniu@klaava.helsinki.fi)
Humans are unreliable, computers are non-deterministically reliable.

------------------------------

From: cm007b@uhura.cc.rochester.edu (Joey Buttafuoco)
Subject: Linux on Gateway2000 4DX2-66v
Date: Sat, 20 Nov 93 21:27:12 GMT

Im new to this group. where can I get a working copy of linux for my pc?

e-mail please.
thanks.
-- 
"Those who cannot do, teach.  Those who cannot teach, teach gym." -W. Allen
Claude Erik Meyer - Univ. Of Rochester ---->  cm007b@uhura.cc.rochester.edu 
***************************************************************************
cm007b@roundtable.cif.rochester.edu <-------------------> dj047@po.cwru.edu

------------------------------

From: karsten@kshome.ruhr.de (Karsten Steffens)
Subject: Re: filesystem for archive disks
Date: Sat, 20 Nov 1993 18:40:06 GMT

Jon Freivald (jaf@jaflrn.Morse.Net) wrote:

: What exactly is lost+found for?

If e2fsck finds inodes not entered in a directory it will put them into
lost+found. Such beasts come into life usually when the system crashes in
the wrong moment, i.e., while directories are being written. As e2fsck
cannot retrieve the filenames of such filechains, but only the inode-number
it may be hard to recover from the error and sort in the files correctly.
A good help then is to have a complete listing at hand, which has been
generated by the command 'ls -aliR /', because from that you can reconstruct
the relation inode->filename. I myself create such a file every three hours
automatically on a different disk each.

Regards, Karsten

-- 
==================>         Karsten Steffens        <=====================
   karsten@kshome.ruhr.de          |      steffens@ikp.uni-muenster.de
Marl - close to Recklinghausen     |         Institut fuer Kernphysik
  North of the Ruhrgebiet          |   Westf.Wilhelms-Universitaet Muenster

------------------------------

From: mojo@cs1.bradley.edu (Tony Bailey)
Subject: Determine Passwords
Date: 20 Nov 1993 17:17:20 -0600

I have a user on my linux system that lost his password.  How as root can
I find out what his pw is w/out changing it?  Is there a util to do this?

--
                                   /\
                     Tony Bailey  /  \  mojo@cs1.bradley.edu 
             Bradley University  /    \  mojo@camelot.bradley.edu
  _____________________________ /      \_______________________________
  \   House upon the hill, moon is lying still, shadows in the trees  /  
   \   witnessing the wild breeze....c'mon baby, run with me....     /
    \                  -- James Douglas Morrison                    /
      -------------------------------------------------------------

------------------------------

From: markcha@microsoft.com (Mark Chace)
Subject: Re: filesystem for archive disks
Date: Sat, 20 Nov 1993 03:07:09 GMT

In article <e0V4cc1w165w@jaflrn.Morse.Net> jaf@jaflrn.Morse.Net (Jon Freivald) writes:
>> Although I suggest this, I myself prefer raw-written floppies 
>> ( tar cvf - > /dev/fd0 ) to create archives. Sure, I admit that I don't 
>> then have the lost+found capabilities, but I can take my archives over
>> to SUNs without any trouble.
>
>What exactly is lost+found for?

It gives fsck a place to put files and pieces of files that it has found
on a damaged disk.  The directory is created when the file system 
is created and given directory slots for aproximately 20 files so that
fsck can still recover lost files if the disk is full.

Mark

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
