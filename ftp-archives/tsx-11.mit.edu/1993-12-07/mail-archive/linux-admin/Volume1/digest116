From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Tue, 19 Oct 93 07:13:26 EDT
Subject:  Linux-Admin Digest #116

Linux-Admin Digest #116, Volume #1               Tue, 19 Oct 93 07:13:26 EDT

Contents:
  Re: *** Survey Summary of Questions Posted to c.o.l.d and c.o.l.a ** (Philippe Bonal)
  Re: sstrange syslogd problems (Julian Edwards)
  Re: UNIX sysadmin FAQ- proposal and volunteer (Hamish Marson)
  Re: UNIX sysadmin FAQ- proposal and volunteer (Karl Denninger)
  Re: Puzzled by internet  (Keith Smith)
  Re: Puzzled by internet (Simon A Langley)
  Re: UNIX sysadmin FAQ- proposal and volunte (Erwin Embsen)
  Re: lost+found cleanup ? - a (partial) solution (Edgar Greuter)
  Re: tredir and null modems problems (Katarzyna Krakowski)
  Re: SLIP problems (datagram fragmentation) (Alan Cox)

----------------------------------------------------------------------------

From: philb@blips.frmug.fr.net (Philippe Bonal)
Crossposted-To: comp.os.linux.development,comp.os.linux.help,comp.os.linux.m
Subject: Re: *** Survey Summary of Questions Posted to c.o.l.d and c.o.l.a **
Date: Mon, 18 Oct 93 20:28:52 +0100
Reply-To: philb@frmug.fr.net

byron@cc.gatech.edu (Byron A Jeff) writes:

> Well if you've been reading any of the linux newsgroups you are aware
> of the raging debate going on about the quantity and types of questions
[...lot of stuff deleted..]

You've only to recall the problems like:
- not cross-beetween 2 linux newsgroups,
- read FAQs,
- read newsgroups before post.

that is good...,

But I think to quote so many stuff like you is garbaging the newsgroup.
There is 11 k yet !!and you want to append every week !!!

+---------------------------------------------------------------------------+
 philb@frmug.fr.net  Philippe Bonal (France)  Please,Not email > 25k without
 philb@blips.frmug.fr.net  bonal_p@epita.fr          inform me, No NeXT mail
+---------------------------------------------------------------------------+

------------------------------

From: wjedwd@isl.com (Julian Edwards)
Subject: Re: sstrange syslogd problems
Date: 18 Oct 1993 11:08:10 +0100

John Paul Morrison (jmorriso@rflab.ee.ubc.ca) wrote:
: In article <29pqrg$1a8@genesis.ait.psu.edu>,
: Chuck Fee <fee@cxf111.rh.psu.edu> wrote:
: >I'm gaving some really odd problems with syslogd. In both the binary
: >and source distributions. I've recompiled syslogd about a million times
: >and the same things keep occuring. For no apparent reason, my syslogd
: >goes haywire, spouting tons of errors to its logs, and then proceeding
: >to grab nearly 100% of both free core (real and swap) and cpu time, 
: >apparently trying to keep up with these messages.
: >
: >has anyone had any similar problems with syslogd? 

: Yes, I had the same problem. It wasn't quite as bad: I could kill
: inetd.

: Wheat kernel, net code and libraries are you using?

: I think I fixed it by recompiling syslogd and tcpd.
: Actually, another user at this site had a crack at this too
: and he cleaned up syslog.conf, which helped a lot. The orignal
: syslog.conf from the net-2 binaries (or wherever) were confusing
: syslog with too many "*.foo, *.bar" entries. keep it to:

: facility.priority /file

: and that worked around the problem. We haven't seen syslogd
: go crazy in a while.

I had a similar thing happen with syslogk.  I've got the output redirected
to a file in /usr/log, and every now and again the machine goes crazy and fills
up the partition containing the log file.  I'm running pl12/libc441, but this 
has been happening since pl10.  When I'm running Xconsole, the output in that
goes mad too, so I think it may be something to do with /dev/kmem or /dev/klog.

Anyone else experiencing this?

J.
--
Julian Edwards
wjedwd@isl.com

------------------------------

From: hamish@thebes.cc.waikato.ac.nz (Hamish Marson)
Crossposted-To: comp.unix.admin,comp.sys.sun.admin,comp.sys.sgi.admin,comp.admin.policy
Subject: Re: UNIX sysadmin FAQ- proposal and volunteer
Date: 19 Oct 1993 02:59:34 GMT

Rahul Dhesi (dhesi@rahul.net) wrote:
> In <1993Oct18.064938.11806@leland.Stanford.EDU>
> mosedale@aeffle.Stanford.EDU (Dan Mosedale) writes:

> >- Mounting /var/spool/mail via NFS
> > - why & why not

> This is easy to write.

>    - Mounting /var/spool/mail via NFS
>     - don't

But why not? Because of file locking? Sun recommend it... Or at least 
tell you how with SunOS....


--
======================================================================
|  Hamish Marson                                                     |
|  Systems Programmer              |                                 |
|  Computer Services               | INTERNET h.marson@waikato.ac.nz |
|  University of Waikato           | PHONE    +64 7 8562889 xt 8181  |
|  New Zealand                     | FAX      +64 7 8384066          |
===========Disclaimer :- Remember. You heard it here first.===========

------------------------------

From: karl@Notwerk.mcs.com (Karl Denninger)
Crossposted-To: comp.unix.admin,comp.sys.sun.admin,comp.sys.sgi.admin,comp.admin.policy
Subject: Re: UNIX sysadmin FAQ- proposal and volunteer
Date: 18 Oct 1993 22:30:11 -0500

In article <29vl6m$161b@thebes.cc.waikato.ac.nz>,
Hamish Marson <hamish@thebes.cc.waikato.ac.nz> wrote:
>Rahul Dhesi (dhesi@rahul.net) wrote:
>> In <1993Oct18.064938.11806@leland.Stanford.EDU>
>> mosedale@aeffle.Stanford.EDU (Dan Mosedale) writes:
>
>> >- Mounting /var/spool/mail via NFS
>> > - why & why not
>
>> This is easy to write.
>
>>    - Mounting /var/spool/mail via NFS
>>     - don't
>
>But why not? Because of file locking? Sun recommend it... Or at least 
>tell you how with SunOS....

Done <correctly>, this is 99.xyz% safe.  It is NOT 100% safe.  However, done
<incorrectly> it is <extremely> unsafe and <will> hose you frequently.  This
will, no doubt, irritate your users if it becomes unsafe. :-)

rpc.lockd is SERIOUSLY unstable in all implementations I've seen to date.
Between two of the same machine it might work nowdays (not true a 
couple of years ago) - but on a heterogeneous environment just forget 
it and give up.

However, there <are> ways to "play safe" while NFSing the mail spool.  They
require that you take extraordinary care in (1) the way you handle folder
locking, and (2) the way you handle delivery.

I've done this before with success at multiple large installations -- it can
be done safely.

There is, unfortunately, no other good (except imap, which does not yet
enjoy reasonable client support) way to handle this problem on a network of
machines unless you want to restrict people to getting mail on one CPU.

--
Karl Denninger (karl@MCS.COM)   | MCSNet - First Interactive Internet and 
Modem: [+1 312 248-0900]        | Clarinet feed in Chicago.  Send email to
Voice/FAX: [+1 312 248-8649]    | "info@mcs.com" for more information.

------------------------------

Crossposted-To: comp.dcom.lans.misc
From: keith@ksmith.com (Keith Smith)
Subject: Re: Puzzled by internet 
Date: Tue, 19 Oct 93 02:54:12 GMT

In article <1993Oct16.214822.18084@cobra.uni.edu>,
 <simmonr5387@cobra.uni.edu> wrote:
>Okay, Im not a newbie to the UNIX system, but I have one question that
>has either gone unaswered or answered in an unsatifactory manner to me 
>though I have consulted many sources. 
>
>The deal is, SLIP is a recent invention, so we can assume that most of the 
>present doy systems on the internet do not use it to connect to the heart 
>of the internet. Therefore my question is how do these other new machines
>at colleges who want to get internet on ETHERNET accomplish this miracle
>without running a cable 400 miles to the nearest connected site. I am 
>sure that I am missing something here. I am interested in the hardware 
>that is in practical, everyday use, not theories of how the various net 
>layers work. Would someone please enlighten me on this. 

>
>I want to know,
>1) what hardware is required 

I _UNDERSTAND_ your confusion.  I too was this way but a year ago, and
you know what? After about $200 and 10 books on TCP and networking I was
_still_ lost.  I kept asking.  Okay how do I get from A-Z please, so
here is _one_ possiblity and If I have ERRORED _PLEASE_ correct me
because as of this date I have never used any of this but I know I got
the MONEY right <G> and I'm really close in the neighborhood! (NOTE:
Don't bother calling your local telco, they don't know shit):

You buy a computer and a network interface card (NIC).

You connect from the NIC via the cable of choice possibly thru a HUB or
10baseT concentrator into a BRIDGE. (There are also routers, and
brouters and other nifty little boxes that can fall in here too!)

A bridge is a fancy name for a Protocall converter, and it will convert
the ethernet/token_ring or whatever kinda bridge you bought into a V.35
signal for a mere $3000 (give or take $500).

Now that you have V.35 your all set to run a cable from that box to a
DSU/CSU (Data Service Unit/Channel Service Unit).  You can get these
puppies seperate but since you need both for the darn thing to work most
companies that sell them combine them.  So for another $1000 (Note we
are talking the price at ONE END of the connection) you wire up to this
box which is connected to the line you LEASE from the phone company. 

The DSU/CSU connects directly to the wires from the telephone company
which can be a 64K(bits/sec) channel up to a T3 which is like 10M or
something.  The most common T-span is the T1 which muxes 24 64K channels
on one TELCO wire quad.  It takes 1 T1 64K channel per voice line, so
consider yourself getting ripped off as I go on.  There are DSU/CSU's
that will allow you to do FRACTIONAL T1 which simply means you get a
T-span but don't use all the channels you have available and the Telco
office.  Note the faster you go drives the price of the DSU/CSU up. 

Repeat this process on the other end after paying the Telco big bucks
based on the number of times your packet must bounce from one T-span to
the next.  Across town (3 WIRE Miles) they wanted $500/month for a T1 +
$3000 to connect it up. (Hahahahahaha).  Prices go up with distance,
although the rates thru a LD carrier such as MCI or SPRINT will be WAY
cheaper per mile.  Probably around $2K/month, across one state.

>2) how to get my beautiful new pentium based linux system internetted
>via internet and the total estimated cost outlay for this. 

The cheapest was is via a SLIP connection thru America Online, or UUNET
or one of those type service providers.  You will have to break out the
checkbook to do it though, probably in the 100's of $$$ per month.

I suggest just using a uucp connection for Mail & getting a news feed
and such about $25/month for Low Volume on UUNET.  If you ask they will
ftp anything you want and queue it up for you too.

But hold on, cause I expect the cost of WAN'ing is about to drop.  I
have a guy comming in to demo a Spread Spectrum radio setup for my 3
wire mile (about 1.5 as the crow flies) run, that will do from 64K up to
1Mbit/sec via radio link (You have the cash, we can go faster...).  I've
been bitching about the V.35 end on the box, and I _think_ he said
something about a direct ethernet hookup RSN.  These boxes run from 2
kilobucks for a 64K setup up to about $5K for 1M.  Again, at EACH end,
so about $10K for a 1M data link.  Basically it would pay for itself in
less than A year vs a T1. 

There is also a whole bunch of satellite stuff comming on, and I expect
to see SAT-NET before too long.  Companies are pushing up the newer High
Power Satellites for the 18" dishes that are comming out that will have
much more bandwidth than current stuff.  I expect to see commercially
available Bi-Directional via satellite come WAY down (you can do it
_now_ if you want, call Hughes Aerospace <GRIN>) over the next 3-5
years, as the new satellites get up there.

If anyone reading this is working on this contact me, I'm interested and
may be able to provide testing & capital.

F/U Carolina Telephone, Here comes wireless and it's gonna STEP all over
you.

Throw enough money at it, and you can have whatever you want.

NOTE:  Follow-ups to comp.dcom.lans.misc
-- 
Keith Smith          keith@ksmith.com              5719 Archer Rd.
Digital Designs      BBS 1-919-423-4216            Hope Mills, NC 28348-2201
Somewhere in the Styx of North Carolina ...

------------------------------

From: slangley@constant.demon.co.uk (Simon A Langley)
Subject: Re: Puzzled by internet
Date: Mon, 18 Oct 1993 17:04:49 GMT

Robert Moser (araw@elm.circa.ufl.edu) wrote:

: If you as an individual want internet, by far the cheapest is to get some
: kind soul to give you a slip connection from campus.  Since these are hard
: to come by, there is at least one commercial offering available.  UUNET
: offers dialup slip for the neighborhood of $250 per month, with a one-time
: startup fee (I don't remember how much).  They offer higher rate connections
: upto 10MBPS, but they get out of the reach of individuals.  

I know that this is of no use to the original poster, but linuxers (and in
fact users of any mainstream OS) in the UK might be interested to know that
they can get a full dialup SLIP or PPP link to the internet for a mere 
UKP10 (+VAT) per month with no extra charges.

The provider is Demon Internet Systems Ltd in Finchley (they also have
dialup points in Warrington & Edinburgh).  Unfortunately, I do not have
their tel number to hand (this shows how rarely I need to call them) but
ISTRT the email address is internet@demon.co.uk.

I have no connection with this company other than having been an extremely
satisfied customer for about eighteen months.

-- 
   Simon Langley       Hampstead, London        slangley@constant.demon.co.uk
   

------------------------------

From: erwin@nioz.nl (Erwin Embsen)
Subject: Re: UNIX sysadmin FAQ- proposal and volunte
Reply-To: erwin@nioz.nl
Date: Tue, 19 Oct 1993 08:04:59 GMT

In article Ltv@rahul.net, dhesi@rahul.net (Rahul Dhesi) writes:
>In <1993Oct18.064938.11806@leland.Stanford.EDU>
>mosedale@aeffle.Stanford.EDU (Dan Mosedale) writes:
>
>>- Mounting /var/spool/mail via NFS
>> - why & why not
>
>This is easy to write.
>
>   - Mounting /var/spool/mail via NFS
>    - don't
>-- 
>Rahul Dhesi <dhesi@rahul.net>
>also:  dhesi@cirrus.com
>
Why not!. Here at the NIOZ we do that for more than two years and we haven't had
any trouble with it.

Erwin.

---
Name      : Erwin Embsen                Email: erwin@nioz.nl
Department: BEWON (ERSEM Project)       Phone: +31 (0)2220 - 69424 (or 69300)
Institute : NIOZ, Texel - NL            Fax  : +31 (0)2220 - 19674


------------------------------

From: edgar@mpii02000.ag2.mpi-sb.mpg.de (Edgar Greuter)
Subject: Re: lost+found cleanup ? - a (partial) solution
Date: 19 Oct 1993 10:25:33 GMT

In article <1993Oct15.094449.12494@wisipc.weizmann.ac.il> csron@wizard.weizmann.ac.il (Ron Edgar) writes:

> After a crash, the rc boot script ran e2fsck -a on my Slackware (0.99.12#2)
> and some anonymous files ended up in lost+found, err...what do I do with them ?

These files have been lost on the partition with the lost+found directory. The
names in lost+found are just the inode-numbers (a kind of pointer to the file
contents). You could start looking at these files and guess their names now,
copy them to their old location and delete the lost+found versions (renaming
via mv will not work). Then, if you run e2fsck again, you will notice that you
get more and more files back that were lost on your harddisk (like the
.Xdefaults-file you mention later in your post). I have done this procedure
several times after loosing my /usr/src-directory.
Why are these files/directories not all there after the first e2fsck? Because
they have still references pointing to them (i.e. they are not "lost" in the
sense of e2fsck). I'll give an example and illustrate my recovery-procedure:

EXAMPLE: suppose we have the following tree in the filesystem /usr:

                                "root" (that's /usr after mounting it)
                                / | \
                               /  |  \
                              /   |   \
                     lost+found local  src ...
                                / | \  /|\

Now root (accidentally) does "rm -f -d /usr/src" (the actual cause for the
situation could be a power failure before sync ...). We have cut the arc from
/usr to /usr/src. If we are lucky, e2fsck will find the inode of the
src-directory and leave a file (here: directory) in /usr/lost+found for it.
We could simply copy the whole subtree back to /usr/src and we are done.
But according to Murphy's law e2fsck will first find the unreferenced directory
/usr/src/linux/kernel/blk_drv/scsi and link it back to lost+found. Let's assume
it is inode #135 and we get /usr/lost+found/135. Now the directory .../blk_drv
has a reference, namely /usr/lost+found/135/.. , and is thus not recollected
by e2fsck. If we delete 135 with rm -fr /usr/lost+found/135 (of course after
copying it to some other place), we could try to recover the rest. It would
still be a lot of guessing (`What was the name of the directory with Makefile
and test.c in it???' ...).

SOLUTION (first try):
Suppose we have another partition mounted as /misc.
        o First make a directory to hold the recovered tree:
                mkdir /misc/recover

        o Copy all directories from /usr/lost+found to /misc/recover:
                for file in /usr/lost+found/*
                do
                        if [ -d $file ]; then
                                cp -a $file /misc/recover
                        fi
                done
          (usually i just do "cp -a /usr/lost+found/* /misc/recover")

        o Remove one directory from /usr/lost+found (let's call it 123 here):
                rm -fr /usr/lost+found/123

        o Unmount /usr and run e2fsck:
                umount /usr; fsck -t ext2 -a /usr; mount /usr

        o Do the previous two steps until we get at least one new directory.
          Let's call this new directory 456. Copy this directory to our backup
          tree:
                cp -a /usr/lost+found/456 /misc/recover

        o Move previously recovered directories to their right place:

                * Find out the inode-numbers of all direct subdirs of 456:
                        ls -i /usr/lost+found/456

                * Move the recovered directories in /misc/recover to their
                  places. Say we have found that the subdir
                  /usr/lost+found/456/scsi has inode #123, do this:
                        mv /misc/recover/123/* /misc/recover/456/scsi
                        rmdir /misc/recover/123

        o Delete any files from /usr/lost+found having more than one link, as
          shown by "ls -l /usr/lost+found".

        o Repeat the whole process until we have no more directories in
          /usr/lost+found. All remaining files in /usr/lost+found and all
          the directories in /misc/recover will have to be renamed "by hand".
          Look at their contents and guess the name.

Probably the above steps could be coded in a program or even a shell script,
but this has to wait until my machine crashes the next time.
I hope this posting helps some of you!

        - Edgar

------------------------------

From: (Katarzyna Krakowski)
Subject: Re: tredir and null modems problems
Date: 19 Oct 1993 10:23:56 GMT

Craig Ashcroft  Willmott (cwil4@cs.aukuni.ac.nz) wrote:
: First, tredir. I've got term going fine, it worked like a charm with
: 7 connections over my 14.4 line the other day. But tredir doesn't go.
: From the remote site, I type
:               tredir 12345 23
: which should connect the remote (uni) port 12345 to my telnet port
: 23, no? I have the line remote in my uni termrc. What happens is
: that if you telnet to 12345 it says that it is connected, but nothing
: happens. 

Well I just gave it a try, and it worked fine! Mind you, there was a
five or six second pause before connection, perhaps because of the
simultaneous download ;)

What system is your foreign host? And what version of term are you
using?

------------------------------

From: iiitac@swan.pyr (Alan Cox)
Subject: Re: SLIP problems (datagram fragmentation)
Date: Tue, 19 Oct 1993 10:12:19 GMT

>
>What is the plan for supporting fragmentation on the Linux side ?

Fred Van Kempens NET2E Beta1 supports it but crashes all the time. I'm 
working on fixing his fragment support to put it into the linux kernel proper

Alan
iiitac@pyr.swan.ac.uk


------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
