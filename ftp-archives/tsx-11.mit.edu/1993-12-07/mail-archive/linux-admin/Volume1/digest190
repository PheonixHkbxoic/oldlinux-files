From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Sun, 28 Nov 93 03:13:50 EST
Subject:  Linux-Admin Digest #190

Linux-Admin Digest #190, Volume #1               Sun, 28 Nov 93 03:13:50 EST

Contents:
  tty7 and tty8 hang while logging in (Rob Levin)
  Re: [Q] help wanted with "/dev/cua1: Device or resource busy" (Christopher Shaulis)
  Re: [Q] LILO doesn't work from my IDE MBR (Christopher Shaulis)
  controlling console baud rate and... (Chris Hawley)
  Re: Any LINUX installations in real life environments? (peter hoffman)
  Re: controlling console baud rate and... ("John E. Davis")
  Re: adjtime() for Linux? (H.J. Lu)
  Re: Berkeley Fast Filesystem (Joe Portman)
  Re: [Q] LILO doesn't work from my IDE MBR (David Alan Black)
  Re: Difference between cua and ttyS (Mike Horwath)
  Re: Watcher... (Mike Horwath)
  Re: Once again, using tape drives under Linux (CHRISTOPHER M MAY)

----------------------------------------------------------------------------

From: TaRDiS@TaRDiS (Rob Levin)
Crossposted-To: comp.os.linux.help,comp.os.linux.misc
Subject: tty7 and tty8 hang while logging in
Date: 27 Nov 1993 21:48:04 GMT


I'm running Slackware (I believe it's release 1.0.5).  For some reason,
regardless of which user ID I use, my session hangs on tty7 and tty8 when I
try to log in.  It displays "last login" and performs mail check
successfully, then the session just hangs.  I can't dump the contents of the
screen; I tried (from my root ID) and got "can not ioctl dump".

ps -x looks as follows:

  PID TT STAT  TIME COMMAND
    1  ? S     0:10 init
  500  1 S     0:09 -bash
  521  2 S     0:08 -bash
   18  ? S     0:00 /etc/lpd
   54  ? S     0:00 /usr/bin/syslogk on
   65  3 S     0:19 /etc/getty 9600 tty3
   50  ? S     0:00 /usr/etc/syslogd
   52  ? S     0:01 /usr/etc/inetd
   61  ? S     0:13 /usr/bin/dip /etc/sl0
   66  4 S     0:00 /etc/getty 9600 tty4
  522  5 S     0:00 /etc/getty 9600 tty5
   68  6 S     0:16 -bash
   69  7 S     0:00 /etc/getty 9600 tty7
  477  ? T     0:03 -bash
   82  ? S     0:01 /usr/bin/dip /etc/sl1
  526  1 S     0:43 trn -x -X
  434  6 T     4:13 ftp ftp.cdrom.com
  549  1 S     0:00 /bin/sh -c Pnews -h /home/TaRDiS/.rnhead
  550  1 S     0:04 /bin/sh -c Pnews -h /home/TaRDiS/.rnhead
  564  1 S     0:10 /usr/bin/joe /home/TaRDiS/.article
  589  2 R     0:00 ps -x

It appears that PID 477 was the hung login; when I kill it via "kill
-sigkill 477" tty8 returns to the "issue" display.

Any help with this would be greatly appreciated!

------------------------------

From: cjs@netcom.com (Christopher Shaulis)
Subject: Re: [Q] help wanted with "/dev/cua1: Device or resource busy"
Date: Sat, 27 Nov 1993 22:21:21 GMT

norman@flaubert.bellcore.com (Norman Ramsey) writes:

>I'm running the Yggdrasil LGX F93 kernel, and any attempt to use
>/dev/cua1 (including to run setserial) results in "Device or resource
>busy".  (Ditto /dev/ttyS1, unsurprisingly.)  I have a mouse on com1
>(/dev/cua0), and I can use kermit to connect to the mouse and see
>gibberish at 1200baud when I move it.  I have an external modem on
>com2.

Counting myself, you are the third person I have seen complain of this problem
in the last week. It seems to effect everything from cu to Seyon, includeing
kermit, so I think the problem must be at a higher level. My solution is
to do something which causes the /usr/spool directory tree to be read from 
disk -- usually "find /usr/spool/*" is all that is needed to reset whatever
is blocking.

If anyone is looking into this, then I can volunter the following info: The
problem is not due to lock files being left over improperly shut down software
or systems. The condidtion exists immediately after boot-up as well as after
being up for a while. The problem seemd to go away when I switched shells 
from bash to tcsh.

Hope this helps,
Christopher
cjs@netcom.com

------------------------------

From: cjs@netcom.com (Christopher Shaulis)
Subject: Re: [Q] LILO doesn't work from my IDE MBR
Date: Sat, 27 Nov 1993 22:28:40 GMT

norman@flaubert.bellcore.com (Norman Ramsey) writes:

>I have one DOS partition on my IDE hard drive (/dev/hda1), and I have
>a SCSI drive with several partitions, Linux root on /dev/sda1.  From
>reading the LILO docs it seemed my only chance was to put lilo in the
>MBR of the IDE drive.  Unfortunately, lilo only gets to the `L' stage
>and then the machine hangs.  I'm running the Yggdrasil LGX F93, but I
>have also tried the lilo on the TransAmeritech CD.  No luck with
>either.  I restored the original MBR with dd, but I'm left booting
>linux from floppy (ugh).  Does anybody have any suggestions about how
>to proceed?

Ditto on my setup and my results trying to use LILO. I would be interested
in hearing anything you come up with.

Christopher
cjs@netcom.com

------------------------------

From: ah654@freenet.carleton.ca (Chris Hawley)
Subject: controlling console baud rate and...
Date: Sat, 27 Nov 1993 22:46:05 GMT


Hello,

        I have two problems, the latter might be in the serial FAQ...

        
        I can't seem to "stty 2400" a VT... Is this a bug or is it
deliberate?  I'm trying to guage the speed of display over a 2400 baud
modem link on certain display files, etc.  Is there a way I can slow a
VT down to 2400 baud?


        And, I just tried to upload a file using Zmodem, and it just
dumps the whole file to the modem at max speed (19200), when I was not
connected at high speed.  I don't think these are related, but just in
case...  How do I set the flowcontrol on serial devices?  I will read
the Serial FAQ tonight and look for "gettydefs" and "inittab", and see
what I find, but any help would be appreciated. 


Chris


-- 
Chris Hawley - ah654@freenet.carleton.ca - ak422@po.cwru.edu - Mr_Chris (IRC)
I knew Everything when I was 19.  Now I hang out with his brother, Jack Shit.
     =========>> Check out the NCF Linux SIG! ( GO LINUX ) <<=========== 

------------------------------

From: peter@melanie.uucp (peter hoffman)
Subject: Re: Any LINUX installations in real life environments?
Date: Sat, 27 Nov 1993 10:45:20 GMT

mark@taylor.wyvern.com (Mark A. Davis) writes:
>jmorris@darkstar.rastek.com (Jim Morris) writes:
>>Other than that, Linux is very viable in
>>a commercial development environment, in my opinion.  At the very least,
>              ^^^^^^^^^^^^^^^^^^^^^^^
>Yes, I agree with that.
>>even if Linux doesn't meet the needs of end users on your network, it
>>provides a VERY economical alternative for a network server OS.
>Indeed!
>>It is at least as stable as Intel-based Unices that we have paid 1000's for!
>Let's be realistic here....
>That is an incorrect statement.  Even in the best of light, my experience
>shows that it is not as stable as most commercial Unixen.  A comparison to
>SCO/ODT/MPX: I have run an entire hospital on a single MP Altos 15000
>supermicro running SCO/ODT/MPX.  I have never found out what the max. 
>continuous uptime is because I usually have to do somthing which requires
>my taking the system down every 6 months or so :)  This box handles 100 users,
>with countless ASCII and X terminals, scores of printers, etc, 24 hours a
>day 365 days a year...... 
>-- 
>  /--------------------------------------------------------------------------\
>  | Mark A. Davis    | Lake Taylor Hospital | Norfolk, VA (804)-461-5001x431 |
>  | Sys.Administrator|  Computer Services   | mark@taylor.wyvern.com   .uucp |
>  \--------------------------------------------------------------------------/

Since I agree with jmorris, I have to make the following observations:

Note: jmorris said that it was "It is at least as stable as Intel-based Unices
that we have paid 1000's for!".  What I conclude from this statement is that
there are at least two Intel-based Unices on which you can spend at least
$2000 total, that are less stable than Linux.  I think that this is true.

Linux is more stable than ICL's DRS/NX3000.  We have spent $1000's on
DRS/NX3000.  I suspect (from experience with the SPARC version) that Solaris
2.x can provide the second example required to prove jmorris's statement.

At any rate, I really doubt the truth of the statement now required to prove
jmorris wrong: "There are no commercial Intel-based Unices (other than
DRS/NX3000) less stable than Linux."

Just my $0.02's worth! :-)

Peter Hoffman

-- 
..!uunet!melanie!peter

"The Future" -- Public Access UNIX -- 803/271-0688 -- news and email
==============================================================================

------------------------------

From: davis@pacific.mps.ohio-state.edu ("John E. Davis")
Subject: Re: controlling console baud rate and...
Reply-To: davis@pacific.mps.ohio-state.edu  (John E. Davis)
Date: Sun, 28 Nov 1993 01:19:38 GMT

In article <CH69wu.3u6@freenet.carleton.ca> ah654@freenet.carleton.ca (Chris
Hawley) writes: 
           I can't seem to "stty 2400" a VT... Is this a bug or is it
   deliberate?  I'm trying to guage the speed of display over a 2400 baud
   modem link on certain display files, etc.  Is there a way I can slow a
   VT down to 2400 baud?

By default, the console is set to 9600 baud.  Some programs look at the
baudrate setting and output data at a rate consistent with this setting.  I
would think that the console shoud be set to the maximum possible value
(38400 baud).

Finally, the SLS 1.03 /etc/profile sets the TERM variable to console.  Why is
this?  Shouldn't this be the job of something like /etc/gettytab (gettydefs?)?


--
     _____________
#___/John E. Davis\_________________________________________________________
#
# internet: davis@amy.tch.harvard.edu
#   bitnet: davis@ohstpy
#   office: 617-735-6746
#

------------------------------

From: hjl@nynexst.com (H.J. Lu)
Subject: Re: adjtime() for Linux?
Date: Sun, 28 Nov 93 00:58:36 GMT

kardel@nessy.informatik.uni-erlangen.de (Frank Kardel) writes:
: sjt@enlil.museum.upenn.edu (Steve Tinney) writes:
: 
: >I'd like to bring up nistime on my Linux box and ftp'd the source
: >but it requires adjtime(), which I have been unable to find
: >anywhere. Anyone done this already?
: 
: > Steve
: 
: PL 14 will have it. (And will support NTP)
: 

The Linux C library 4.5.x (x >= 4) will support it, which will
be released after the kernel 0.99 pl 14 is out.

H.J.

------------------------------

From: baron@hebron.connected.com (Joe Portman)
Crossposted-To: comp.os.linux.development
Subject: Re: Berkeley Fast Filesystem
Date: 22 Nov 93 09:14:43 GMT

In article <2cirua$8ob@smurf.sub.org| urlichs@smurf.sub.org (Matthias Urlichs) writes:
|
|Oh yes, one problem: the partitioning issue. Since *BSD uses their own
|partition layout, hiding many file systems in one "real" partition (or
|on the whole disk), the current in-kernel way to identify and cache inodes
|by their inode and device numbers doesn't work any more. I think the Xenix
|file system has the same problem.

        Yes, but this is trivial to implement, if you know the structure of
        the "divvy" table for Xenix. I have written my own patches for the
        Xenix divvy system that simply presents each sub-partition to the 
        system as a block device. You can then use it as if it were a regular
        partition. I have not done a divvy command, since I am dual booting
        Xenix, and can run the "real" one.

        Anyhow the point is, the partitioning scheme was very easy to add to
        the linux kernel, probably less than 200 lines of code. 

|This is fixable most easily by using indirection through the superblock.

        If you mean indirection through the partition table, then I agree.



-- 
=============================
Joe Portman (Westin Hotels & Resorts)
NOTE: These opinions are my own and not those of my employer

------------------------------

From: dblack@pilot.njin.net (David Alan Black)
Subject: Re: [Q] LILO doesn't work from my IDE MBR
Date: 28 Nov 93 03:37:32 GMT

cjs@netcom.com (Christopher Shaulis) writes:

>norman@flaubert.bellcore.com (Norman Ramsey) writes:

>>I have one DOS partition on my IDE hard drive (/dev/hda1), and I have
>>a SCSI drive with several partitions, Linux root on /dev/sda1.  From
>>reading the LILO docs it seemed my only chance was to put lilo in the
>>MBR of the IDE drive.  Unfortunately, lilo only gets to the `L' stage
>>and then the machine hangs.  I'm running the Yggdrasil LGX F93, but I
>>have also tried the lilo on the TransAmeritech CD.  No luck with
>>either.  I restored the original MBR with dd, but I'm left booting
>>linux from floppy (ugh).  Does anybody have any suggestions about how
>>to proceed?

>Ditto on my setup and my results trying to use LILO. I would be interested
>in hearing anything you come up with.

>Christopher
>cjs@netcom.com

I don't know if this helps (nor do I have experience with SCSI drives), 
but according to the documentation the appearance of only the 'L' 
"usually indicates a media failure or a geometry mismatch (e.g. bad
parameters in /etc/lilo/disktab)", the latter being a file which holds
SCSI and non-standard IDE parameters.  (See /etc/lilo/README.)

And remember: whenever you rearrange the furniture, reinstall LILO!


David Black
dblack@pilot.njin.net



                "You've got me on my knees . . . LILO!"

                   -- Derek and the Dominos | me

------------------------------

From: root@jacobs.mn.org (Mike Horwath)
Subject: Re: Difference between cua and ttyS
Date: 25 Nov 1993 21:15:41 GMT

ttyS? and cua? are different like this:

ttyS? block on an open call if carrier detect is low, meaning that the modem
is in an idle state and no one is attached.

cua? will not block and is the device to use when you wish to dial out, like
in UUCP using uucico, or kermit, or minicomm.

Does this answer your questions?

(and I think that this might be in the Serial FAQ [don't hold me to that])

--
Mike Horwath    IRC: Drechsau   BBS: Drechsau   LIFE: lover
root@jacobs.mn.org  drechsau@jacobs.mn.org
Jacob's Ladder  612-588-0201  UUCP, UseNet, Linux files, BBS

------------------------------

From: root@jacobs.mn.org (Mike Horwath)
Subject: Re: Watcher...
Date: 25 Nov 1993 21:25:12 GMT

Why do you need to 'spy' on them?

Can't a user have some privacy?  Or you are so worried what the user is
doing that you need to watch so you can reset your modem if he does
something questionable?  (oh wow, memory protection and permissions are
NOT enough, we have to 'watch' the user and keep him in check)

I know, I sound like I am bitching, but most of the time when I see posts
or requests like this, it is always from someone running a BBS that is used
to watching the user do things and 'reading over their shoulder' even if
they are sending PRIVATE email.

Flame if you are childish, adults will just dicuss it.

--
Mike Horwath    IRC: Drechsau   BBS: Drechsau   LIFE: lover
root@jacobs.mn.org  drechsau@jacobs.mn.org
Jacob's Ladder  612-588-0201  UUCP, UseNet, Linux files, BBS

------------------------------

From: cmay@titan.ucs.umass.edu (CHRISTOPHER M MAY)
Crossposted-To: comp.os.linux.help
Subject: Re: Once again, using tape drives under Linux
Date: 28 Nov 1993 05:44:08 GMT

Alexander Kourakos (awk@char.vnet.net) wrote:
:    My initial posting about tape drives received a few meager scraps
: of replies.
:    I'm going to have to buy SOMETHING by the end of this week.

:    Has anyone here actually saved data to a tape and restored it? What
: brand? What drivers?

:    PLEASE let me know so I don't make a $200 (or more) mistake.

: awk
: awk@vt.edu

After much frustration, I finally got ftape-0.9.6pl13 working with a
Colorado Memory Systems Jumbo 120 (DJ-10) QIC-40 Tape drive.

I am kinda new to the whole sysadmin thing, but that's why I use Linux.

I finally got tar to work, and verified that I had a good backup.

Although I haven't tried too many mt commands, rewind works.

I hope you buy a new drive, as I spent a couple days trying to get an
old version of the DJ-10 to work... It never did.

I got a newer model of the jumbo 120 on loan just to test to see if it 
would work.  It does, and I still have yet to try the special interface 
card which connects between the floppy interface and the tape drive, which
is supposed to increase transfer rate from 250k/s to 500 k/s.

If ftape ever comes out of BETA, it would seem to be a cheap solution for many
since the CONNER Tapestor 250MB drives are as low as $150 for what is basically
an 80 MB tape drive (w/o compression) Correct me if I'm wrong.  I hate it 
when companies advertise storage capacities after compression.  Imagine
if hard drive makers did this???

If you can afford SCSI, more power to you.

--
*===========================================================*
|| Chris May, Computer Science Major, UMass, Amherst, MA   ||
|| email: cmay@titan.umass.ucs.edu                         ||
||                                                         ||
|| "Macintosh: computers for everyone else........."       ||
*===========================================================*

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
