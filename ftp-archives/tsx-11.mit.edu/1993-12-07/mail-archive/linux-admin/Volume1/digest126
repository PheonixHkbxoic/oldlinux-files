From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Tue, 26 Oct 93 14:14:31 EDT
Subject:  Linux-Admin Digest #126

Linux-Admin Digest #126, Volume #1               Tue, 26 Oct 93 14:14:31 EDT

Contents:
  Re: [Q] Great! passwd file corrupt!! what now? (James Moss)
  Re: How to use a secondary IDE interface. (Mike Horwath)
  Re: SLIP problems (datagram fragmentation) (Carl Schott)
  Re: Help with routing under Linux (Craig Smith)
  Ftp To Linux System (Shlomit Afgin)
  Re: Sysinstall don't work (Andre' Zehl)
  SLIP!!! [long] (Omar Loggiodice)
  Re: Fails: mounting Linux filesystem from ISC 3.0/4.0 via NFS (Steve Steinberg)

----------------------------------------------------------------------------

From: moss@usceast.cs.scarolina.edu (James Moss)
Crossposted-To: comp.os.linux.help
Subject: Re: [Q] Great! passwd file corrupt!! what now?
Date: 25 Oct 1993 20:41:26 -0400

hawks@seq.uncwil.edu (David Hawks) writes:

>Looks like the passwd file is corrupt and who knows what else?  What should
>I do now?  Reinstall?  How do I prevent this corruption?  How did it happen?
>It happened less than a week after I installed linux.  I need some advice,
>if someone would be so kind to offer it?  I can't run linux if it gets
>corrupted files that easy and fast.  I can only login as root through the
>original boot disk but what do I do to restore the passwd file?  How do
>I check for other corrupt files?

You could copy another passwd file to /etc they are not that complex.
Unless there have been a lot of changes since you put it on there.
In order to make sure it doesn't happen again, and I don't know if this
is the problem, but you should run "e2fsck -fav /dev/[hs]d[abc...]" this
forces a check on the file system, and then fixes it
/dev/[hs]d[abc...][123...] should be whatever the hard drive partition
you use is.



------------------------------

From: root@jacobs.mn.org (Mike Horwath)
Subject: Re: How to use a secondary IDE interface.
Date: 25 Oct 93 23:07:49 GMT

Look for a file called atdiskx.x.tar.gz on tsx-11.mit.edu and sunsite.unc.edu

This is the kernel patch needed to use 2 controllers like you stated in
your post.

--
Mike Horwath    IRC: Drechsau   BBS: Drechsau   LIFE: lover
root@jacobs.mn.org  drechsau@jacobs.mn.org
Jacob's Ladder  612-588-0201  UUCP, UseNet, Linux files, BBS

------------------------------

From: carl@news.cac.psu.edu (Carl Schott)
Subject: Re: SLIP problems (datagram fragmentation)
Date: 26 Oct 1993 02:20:04 GMT
Reply-To: cgs103@psu.edu

In article <1993Oct19.101219.11822@swan.pyr>, iiitac@swan.pyr (Alan Cox) writes:
|> >
|> >What is the plan for supporting fragmentation on the Linux side ?
|> 
|> Fred Van Kempens NET2E Beta1 supports it but crashes all the time. I'm 
|> working on fixing his fragment support to put it into the linux kernel proper
|> 
|> Alan
|> iiitac@pyr.swan.ac.uk
|>

If you can't put up with NET2E Beta1 crashes or wait for a fix from Fred, try
the the new "ip.c" by Ahmon Dancy.  It's a drop-in replacement for the usual
ip.c in net/inet under the linux source tree, and seems to have completely
fixed the fragmentation problems on my machine (SLIP connection).  Note
that it requires pl13 and net2-debugged.

The file is ip.c in /pub/Linux/kernel/misc-patches on sunsite.

Carl Schott

------------------------------

From: smithc@kelvin.physics.uq.oz.au (Craig Smith)
Subject: Re: Help with routing under Linux
Reply-To: smithc@kelvin
Date: Tue, 26 Oct 1993 08:05:19 GMT

Alex Liu (aliu@aludra.usc.edu) wrote:
: torvalds@klaava.Helsinki.FI (Linus Torvalds) writes:

: >In article <2a6mdb$2mh@aludra.usc.edu>, Alex Liu <aliu@aludra.usc.edu> wrote:
: >>    150.8.4.0               *               UH      0       86      eth0
: >>    198.187.207.0           *               UH      0       6       eth1
: >>    localhost               *               UH      0       101     lo

: >Note the 'Flags' line: your route entries are all host routes (the 'H'),
: >even though they should be network routes (except for the localhost
: >route, which is correct).  Do you have a /etc/networks file? Is it set
: >up correctly? Do you have libc.so.4.4.2 or newer?

: Following Linus' suggestions I went and checked my /etc/networks file
: as well as upgraded my libc to the current one (v4.4.4).  So now
: my flags look correct.  (They are N routes)

: >>Now, the fun part.  When I try using "routed".  The routes change to:
: >Not surprising.  With a bogus routing table, things only get worse if
: >you run 'routed'. 

: Well, now my routing table doesn't look bogus anymore, yet the results
: are identical.  (Or at least as far as I tested).  Basicaly, what it
: comes down to is the routes have flags "UN" for networks (Which is what 
: it should be, I think) yet as soon as I start "routed", networking
: to other machines stops working.

: My routing table lists:
: 150.8.4.0     *                       UN      0  23   eth0
: 150.8.4.0     utx.unitrx.com          UGN     0  0    eth0

: Same for the other  route.

: >Similarly for 198.187.207.0.  And make sure to have a newer libc.so than
: >4.4.1, as 4.4.1 will mess up the first route, and you'll get the 'network
: >unreachable' errors. 

: Yup, was using v4.4.1 and was indeed giving me 'network unreachable' errors
: some of the time.  (Not always, perhaps, that is why I had the messed up
: routing table, allthough messed up routing or not I was still able to
: connect to other hosts)

: -- 
: _____________________________________________________________________________
: Alejandro Liu           |EMail: aliu@usc.edu |All mispellings are intentional
: 424N Electric Ave. #C |Voice: 818-293-8696 |Anything mentioned here is not
: Alhambra,CA 91801       |Data:  818-293-XXXX |necessarily true.

--
There was a posting a couple of days ago concerning the use of routed under
linux.  I have been trying get this to work for some time now.  I have set
up the networks file and so forth as described by Linus and I am having
the same problems as Alejandro Liu.  It seems to me that there is some 
problem with the sendto call.  All of my debug output is the same as 
Alejandro.  The problem is the following

sendto: Invalid argument
REQUEST to 130.102.120.30.0 Tue Oct 26 17:22:19:
sendto: Invalid argument
REQUEST to 130.102.120.255.0 Tue Oct 26 17:22:19:
sendto: Invalid argument
REQUEST to 130.102.172.255.0 Tue Oct 26 17:22:19:


My other question is whether or not the addresses given above
are correct.  Should there be a zero on the end or the port number 520.  
I am currently running libc-4.4.4 but still only 0.99.11 kernel.

Thanks in advance 

Craig P. Smith
 +------------------------------+--------------------------------------+
 |  Craig P Smith               | TELEPHONE:  ++61 7 365 3414          | 
 |  Physics Department          | INTERNET:   smithc@physics.uq.oz.au  |
 |  University of Queensland    | FACSIMILE:  ++61 6 365 1242          |
 |  St. Lucia, Brisbane         |                                      |
 |  Queensland, Australia 4072. |       "I wish I knew ...   "         |
 +------------------------------+--------------------------------------+

------------------------------

Crossposted-To: comp.os.linux.help
Subject: Ftp To Linux System
From: vshlomit@wiscon.weizmann.ac.il (Shlomit Afgin)
Date: Mon, 25 Oct 1993 13:30:47 GMT



I have a problem with the ftp ,
I cannot ftp from another machine to the Linux machine ( I get the error
message : 530 Login incorrect.  Login failed.) I can only  ftp from
Linux machine to another Unix machine.
What wrong ?

Please reply to vshlomit@wiscon.weizmann.ac.il.
Thanks,
        Shlomit

------------------------------

From: aze@first.gmd.de (Andre' Zehl)
Subject: Re: Sysinstall don't work
Date: 26 Oct 93 13:12:13 GMT

sjkangas@major.cs.mtu.edu (STEVEN J. KANGAS) writes:
>Joe Panico (joe@retina.anatomy.upenn.edu) wrote:

>: sysinstall -disk
>: or 
>: sysinstall -instdev /dev/fd0H1440 -series <whatever>

>       Log in as root, go to /usr/bin, vi sysinstall, and change the
>INSTDEV to /dev/fd1.  It worked for me.  For some reason, I could
>never get the sysinstall script to use the -instdev command.  There
>are a few other commands it refuses to take but I can't remember them
>at the moment.  My solution is the easy way out but it worked.

I had a similar error with sysinstall and it was due to the non-existence
of the directory /user which sysinstall uses as default mountpoint. So either
you make shure you have a directory /user or you edit the sysinstall-
shellscript and replace the MNTDIR (sp?) variable with something other than
/user.


--
Andre'_________________________________________________________________________
                                      crusoe@cs.tu-berlin.de [aze@first.gmd.de]

------------------------------

From: ologgio@netcom.com (Omar Loggiodice)
Subject: SLIP!!! [long]
Date: Tue, 26 Oct 1993 16:38:43 GMT

Dear Linuxers,

   About three days ago i decided to setup my SLIP connection with a local
server. The server address is 150.189.1.2 (which i figured out because i
telnet to it and i get the terminal server). And it offers a dynamic SLIP
connection. 

   Well, i have tried almost every possible combination of route, ifconfig
etc. I have been sneaking in the kernel and following the functions to see
what's happening. I turned on SLIP debugging in the INET modules (
inet_debug = DBG_SLIP in sock.c ) and still can't make the SLIP connection
work. I am almost sure that the server is not configured correctly; after
many days of trial and error. In any case, since I am completely new to this
(i started to really use linux only a month ago; I'm developing VR software
in it), i decided to resort to the net to show you this *very* strange case,
and see if i can get some help!! (or if i misunderstood something, since i
started learning about SLIP only 3 days ago with NET-2-HOWTO) 

   So strange that I get [supposed normal] SLIP messages from / to IP
addresses that i have not configured anywhere (that are impossible to reach
by the terminal server). 

   Well, my conclusions/facts are the following:

1.- SLIP packets are being received and processed, since the
    sl_bump function calls the ip_dump function (in slip.c).
    This means that the IP packet is decoded and sent to the
    upper layer.

2.- SLIP packets are sent, since the sl_xmit and sl_encaps are
    being run and seem to work fine.

3.- I get very strange IP addresses in the ip struct
    (this is shown by the debugging output)

Since these three things happen, then i only can see two causes
for the SLIP connection not to work:

1.- The SLIP driver has a problem with IP addresses and somehow
    garbage gets into the ip struct that holds ip addresses
    (very very unlikely)

2.- The SLIP server is *broken* <hehehehe> 
    (after three days of working...i find out <ggggg>
     and the worse thing is that I can't contact any sysadm
     since they really don't want anything to do with 
     SLIP...)

Well, even if you can't help maybe by reading these you can
catch something that might help you. The output of
Ping, ifconfig, route, dip, the terminal server and the
slip debugging functions follows. Please read it to see
if you find something i missed. Sorry about this long 
message, but most of you should benefit from reading it.
Ohh ya, I'm using 0.99pl13 and have tried net-2 and net2-debugged
......with the same results <ggggg> (ya I have tried *everything* before
posting <hehehehheheeh> )

   hmmm..i forgot...I have tried with different netmasks too....
haven't tried different broadcasts though.... (could this be the cause? ..I
doubt it....)

Well, Have a nice day!!! and enjoy your Linux!!! :)))


*********>>>>>>> output from terminal server when it is in SLIP mode

      Your IP address is 150.189.5.129. MTU is 1500
      Header compression will match your system.

*********>>>>>>> Output after "mode SLIP" in dip

SLIP: channel 0 opened.
SLIP: TTY 64 connected to sl0.
SLIP: ioctl(64, 0x8910, YYYYY)
SLIP: channel 0 opened.

**********>>>>>> ifconfig output

     lo  IP ADDR 127.0.0.1  BCAST 127.255.255.255  NETMASK 255.0.0.0
         MTU 2000  METRIC 0  POINT-TO-POINT ADDR 0.0.0.0
         FLAGS: 0x0049 ( UP LOOPBACK RUNNING )

     sl0 IP ADDR 150.189.5.33  BCAST 150.189.255.255  NETMASK 255.255.0.0
         MTU 296  METRIC 0  POINT-TO-POINT ADDR 150.189.1.2
         FLAGS: 0x0051 ( UP POINTOPOINT RUNNING )

**********>>>>>> route output
**********>>>>>> please note that i have also tried with
**********>>>>>> "route add default gw 150.189.1.2"
**********>>>>>> (and other options) and the SLIP connection
**********>>>>>> still doesn't work.

     Kernel routing table
     Destination net/address   Gateway address Flags RefCnt    Use Iface
     vorl                      *               UH         0   1266 lo
     150.189.1.2               *               UH         0      0 sl0


**********>>>>>> Ping 150.189.1.2 output:

     PING 150.189.1.2 (150.189.1.2): 56 data bytes

     SLIP: sl_xmit("sl0") skb=0x6CBE00 busy=0
     SLIP: sl_encaps(0x6CBE3C, 84) called
     >> "sl0" sent:
     150.189.5.129 -> 150.189.5.129 seq 0xXXXXXXXX ack 0xXXXXXXXX len 84
     SLIP: kicking TTY for 86 bytes at 0x53FC00
     SLIP: TTY already done with 86 bytes!
     SLIP: sl_next(0x1812BC) called!
     SLIP: sl_xmit("sl0") skb=0x6CBE00 busy=0
     SLIP: sl_encaps(0x6CBE3C, 84) called
     >> "sl0" sent:
     150.189.5.129 -> 150.189.5.129 seq 0xXXXXXXXX ack 0xXXXXXXXX len 84
     SLIP: kicking TTY for 86 bytes at 0x53FC00
     SLIP: TTY already done with 86 bytes!
     SLIP: sl_next(0x1812BC) called!
     SLIP: sl_xmit("sl0") skb=0x6CBE00 busy=0
     SLIP: sl_encaps(0x6CBE3C, 84) called


     --- 150.189.1.2 ping statistics ---
     2 packets transmitted, 0 packets received, 100% packet loss

**********>>>>>>> end of ping output

**********>>>>>>> When [supposedly normal] SLIP packets are received:
**********>>>>>>> This occurs at regular intervals

     SLIP: slip_recv(64) called <<<<<******** This is repeated several times
     << "sl0" recv:
     150.189.5.129 -> 150.189.5.129 seq XXXXXX XXXXX len 410
     SLIP: packet is 410 at 0xXXXXXX

**********>>>>>>> *STRANGE* packet received 
**********>>>>>>> please note IP address which is NOWHERE in my system
**********>>>>>>> and was not accesible by the terminal server.
**********>>>>>>> This occurs at regular intervals about three times
**********>>>>>>> as long as for the [supposedly normal] SLIP packets

     << "sl0" recv:
     130.238.127.3 -> 130.238.127.3 seq XXXXXX XXXXX len 41
     SLIP: packet is 41 at 0xXXXXXX

**********>>>>>>> and then -- immediately-- my box replies with THIS!!!!! 
**********>>>>>>> please note it replies with my IP adress with the last
**********>>>>>>> octet + 1 !!!!!

     >> "sl0" sent:
     150.189.5.130 -> 150.189.5.130 seq 0xXXXXXXXX ack 0xXXXXXXXX len 56
     SLIP: kicking TTY for 58 bytes at 0xXXXXXX
     SLIP: TTY already done with 58 bytes!
     SLIP: sl_next(0xXXXXXX) called!
     SLIP: sl_xmit("sl0") skb=0xXXXXXX busy=0
     SLIP: sl_encaps(0xXXXXXX, YY) called

Geeez.....isn't this quite strange?????
Any explanation is welcome!!!!!!!
Ohh ya, why is it that the destination address and the source address are
always the same (ip->saddr and ip->daddr in  function ip_dump
net/inet/slip.c) ??????

Thanks for your help!!!
and again.....have a nice day!! :)



------------------------------

From: ss@JH.Org (Steve Steinberg)
Crossposted-To: de.comp.os.linux
Subject: Re: Fails: mounting Linux filesystem from ISC 3.0/4.0 via NFS
Date: 25 Oct 1993 17:53:37 -0400

ad@cat.de (Axel Dunkel) writes:

>dendisch@cat.physics.uwo.ca (Denis Endisch) writes:

>>>I am trying to mount a Linux filesystem via NFS from an ISC 3.0/4.0 .
>>>The mount fails with 

>>>mount: Permission denied
>>>mount: cannot mount /dev/nfsd

>>I have exactly the same problem (From ISC3.2 -> linux0.99pl12)
>>I found the following in /usr/log/notice, but I have no ideas what to
>>do with that.

>>... cat nfsd[41]: NFS request from 141.2.34.23 originated on 
>>                                 insecure port, psychoanalysis suggested

>Using 0.99pl13, after installing net-2-debugged, the problem went away
>and is working (after some first simple tests).

I am having the exact same problem, but the net-2-d didn't help.  Do
you know which version of net-2-debugged you used?

>Helped me...

>Axel

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
