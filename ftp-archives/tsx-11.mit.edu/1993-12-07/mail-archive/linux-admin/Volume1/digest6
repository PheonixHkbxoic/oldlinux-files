From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Wed, 18 Aug 93 03:13:22 EDT
Subject:  Linux-Admin Digest #6

Linux-Admin Digest #6, Volume #1                 Wed, 18 Aug 93 03:13:22 EDT

Contents:
  Re: tar & mt (David Clemmer)
  Re: Why use shadow? (Frank Lofaro)
  Re: Floppy administration (Jon Gefaell)
  Re: tar & mt ("Brian E. Gallew")
  Re: SLS 1.03, WD8003, no-go? (Tim Newsham)
  Re: SLS 1.03, WD8003, no-go? (david.a.cuka)
  Re: tar & mt (Brandon S. Allbery)
  Re: NFS mount fails with authentication error (Martin-D. Lacasse)
  resetting a virtual console (Hymie!)
  Re: Why use shadow? (Brandon S. Allbery)
  Re: Why use shadow? (Brandon S. Allbery)
  Re: Help 1)Booting SCO from LILO 2)common fs for both  (Brandon S. Allbery)
  SLS 1.03 installation: bad TCP assumption (Craig I. Hagan)
  Networking with pl12 (my solution) (Ronald Aarts)

----------------------------------------------------------------------------

From: dclemmer%anl433.uucp@Germany.EU.net (David Clemmer)
Crossposted-To: comp.os.linux
Subject: Re: tar & mt
Date: 17 Aug 1993 19:33:17 GMT

Warner Losh (imp@boulder.parcplace.com) wrote:

: It rewinds because the default device for mt is /dev/rmt0, which is
: the rewind device.  If you really want to do mt weof, say "mt -f
: /dev/nrmt0 weof", but see below, since this is rarely needed.

umm... why would it be needed at all... admittedly, i've only had my tape drive
(with tapes :) since last night, but in my little experience, i saw that
whenever the system was finished with the tape, even if it was a job stopped by
SIGINT, it rewound the tape before restoring the prompt...

: >What I want to do is append a new directory path to the current tape
: >position.

: The kernel will automatically write an eof on the tape when tar closes
: /dev/nrmt0.  At that point, you can issue the second tar command and
: it will create another file on the tape.

ok... how would you specify which you wanted when restoring from that tape?
i mean, you can't exactly say 'tar xvf /dev/rmt0/file1' or something equally
silly...

btw, in checking my back-up (which i did by saying: tar cvf - * |gzip -cv >
/dev/rmt0), i found that zcat couldn't deal with the tape... ie: i couldn't do
zcat /dev/rmt0 |tar tvf - 
i had to do:
cat /dev/rmt0 |zcat |tar tvf -
this make sense to anyone?

thanks,

Dave
ps: wangtek 5150es attached to aha1542b, if it matters to anyone...:>

pps: great job, everyone who did the scsi tape driver... i installed the tape
drive, recompiled the kernel w/tape support, re-installed lilo, and away i went
:> :> :> :>

------------------------------

From: ftlofaro@unlv.edu (Frank Lofaro)
Subject: Re: Why use shadow?
Date: Tue, 17 Aug 93 19:35:35 GMT

        Another reason to use shadow: One can use non-standard authentication. 
One can tell useradd to use a program to do authentication. It calls the 
program to check if the operation is allowed. Exit status zero means okay, 
other status means not okay.

program -a user -> add the program as authenticator for user
program -d user -> delete this program from authentication for user
program -s user -> su for user
program -l user -> login
program -c user -> change password for user

        So it could be useful for setting up guest accounts, weird restricted 
access schemes, etc. Pretty nifty feature.



------------------------------

From: jeg7e@livia.acs.Virginia.EDU (Jon Gefaell)
Subject: Re: Floppy administration
Date: Tue, 17 Aug 1993 20:13:07 GMT

In article <CBwzzE.MGs@murdoch.acc.virginia.edu> doolitt@cebaf4.cebaf.gov (Larry Doolittle) writes:
>
>I don't feel the floppy drive setup on my machine is
>as good as it could be.  Anybody out there have any
>ideas how it could be better?
>
>Right now they are set like:
>brw-rw-r--   1 root     floppy     2,   0 Aug 29  1992 fd0
>
>and I end up su'ing to root to do anything with a floppy.
>I don't like doing that every time I use a floppy.

Create a group named 'wheel' (for instance) and add yourself
and anyone else you want to have access to that group.

Change the group to 'wheel' and give it rw permissions.

Presto.

>Mtools do fine reading from MS-DOS floppies as a general
>user.  If a non-su tries to mount a minix floppy, even
>if the floppy is protected rw-rw-rw-, he/she/I get the
> "can't create lock file /etc/mtab~: Permission denied"
>error.  I am attached directly to internet, so I shouldn't
>just make /etc world writable.

Perhaps a similar use of groups is called for here.

>I tried monkeying with groups, but since I both don't
>know the rules on group setup, and I am not really sure
>what I am trying to do with the permissions, I naturally
>did not come up with anything constructive.

RTFM. You need to understand chmod and /etc/group

In short, add your login to the line in /etc/group for
'wheel' (it's probably in there) then chgrp the file
(i.e. 'chgrp wheel /dev/fd0') then chmod the file
(i.e. 'chmod g+rw  /dev/fd0') Enjoy...

You'll need to log back in to 'activate' your membership
in the new group.
-- 
 ______ 
 \ \  / Jon Gefaell, Computer Systems Engineer      | Amateur Radio - KD4CQY
  \/\/  Information Technology and Communications   | -Will chmod for food-
   \/   The University of Virginia, Charlottesville |  Hacker@Virginia.EDU
Any opinions expressed herein are not intended to be construed as those of UVA

------------------------------

From: "Brian E. Gallew" <geek+@CMU.EDU>
Crossposted-To: comp.os.linux
Subject: Re: tar & mt
Date: Tue, 17 Aug 1993 16:46:58 -0400

dclemmer%anl433.uucp@Germany.EU.net (David Clemmer) writes:
> umm... why would it be needed at all... admittedly, i've only had my tape drive
> (with tapes :) since last night, but in my little experience, i saw that
> whenever the system was finished with the tape, even if it was a job stopped by
> SIGINT, it rewound the tape before restoring the prompt...
You were using the REWINDING tape device, which automagically rewinds
upon closure.

> ok... how would you specify which you wanted when restoring from that tape?
> i mean, you can't exactly say 'tar xvf /dev/rmt0/file1' or something equally
> silly...
Actually, RTFM will show
tar xvf /dev/rmt0 path1 path2 path3
where pathX is the full pathname of the file of interest.

> btw, in checking my back-up (which i did by saying: tar cvf - * |gzip -cv >
> /dev/rmt0), i found that zcat couldn't deal with the tape... ie: i couldn't do
> zcat /dev/rmt0 |tar tvf - 
> i had to do:
> cat /dev/rmt0 |zcat |tar tvf -
> this make sense to anyone?
Yeah, zcat isn't truly intelligent.  Try `zcat < /dev/rmt0 | tar tvf -`.
Of course, if you are at all familiar with GNU-tar, then you would use
`tar tvfz /dev/rmt0`.  


                                  -Brian

=========================================================================
| "Are they dead?"                                                      |
| "Does it matter?"                                                     |
|   - Pugsley and Wednesday in "The Addams Family."                     |
=========================================================================

------------------------------

Crossposted-To: comp.os.linux.help
From: newsham@uhunix3.uhcc.Hawaii.Edu (Tim Newsham)
Subject: Re: SLS 1.03, WD8003, no-go?
Date: Tue, 17 Aug 1993 20:23:44 GMT

In article <CBwI5H.LFw@nocusuhs.nnmc.navy.mil> SSB1PZP@imcvms.med.navy.mil (PERUCCI, PHILIP A.) writes:
>Anyone know any tips on getting SLS 1.03 up on the net?  I have been
>using SLS for a few versions, with no trouble.  This time, though,
>the NET, for me, is a no-go.
>
>I checked EVERYTHING per various postings I have seen, as well as the
>NET-2-FAQ.  No joy...
>
>All I get are lots of annoying "eth0 ..." messages.
>
>Does SLS 1.03 not work with the WD8003 (without building a kernel), or am I
>just an idiot?  Any good docs to read?
>
>Is Slackware easier to get up?  I have Adaptec 1542C and WD8003.
>I need to get this up FAST so I can load OS/2!

I had a problem with a WD8003EBT card I installed.  After several
email messages to becker@super.org I got it to work.  

When you boot up it says what type of card it thinks you have,
for me it said 
eth0: WD8003-old using IRQ 9 with shared memory at 0x80000-0x81fff.

This shared memory address is wrong.  I got my card working using
the addres 0xd0000.  You can change it at boot time from LILO by entering 
"linux ether=0,0,0xd0000,0,eth0" at the "lilo: " prompt.

I was able to rebuild the kernel with the right i/o address chosen.
This involved editing /usr/src/linux/net/inet/wd.c.
I didnt keep a copy of the original around, so I cant post a diff,
but here is the portion of the code I changed with the changes
marked.  (slightly past 50% in the file)

==========
      } else {
          int high_addr_bits = inb(ioaddr+WD_CMDREG5) & 0x1f;
          /* Some boards don't have the register 5 -- it returns 0xff. */
          if (high_addr_bits == 0x1f || ei_status.word16 == 0)
              high_addr_bits = 0x01;
          dev->mem_start = ((reg0&0x3f) << 13) + (high_addr_bits << 19);
      }
  }
#endif
>>  if(ancient==1) {
>>    dev->mem_start = 0xd0000;
>>  }

  /* The 8390 isn't at the base address -- the ASIC regs are there! */
  dev->base_addr = ioaddr+WD_NIC_OFFSET;
===========


I hope this helps.


> Phil Perucci, Systems Programmer   | "I don't speak for any organization
> ssb1pzp@imcvms.med.navy.mil        |  and no organization speaks for me"



------------------------------

From: dcuka@cbnewse.cb.att.com (david.a.cuka)
Subject: Re: SLS 1.03, WD8003, no-go?
Date: Tue, 17 Aug 1993 21:15:27 GMT

In article <CBwI5H.LFw@nocusuhs.nnmc.navy.mil> SSB1PZP@imcvms.med.navy.mil (PERUCCI, PHILIP A.) writes:
>Anyone know any tips on getting SLS 1.03 up on the net?  I have been
>using SLS for a few versions, with no trouble.  This time, though,
>the NET, for me, is a no-go.
>
[remainder of article deleted]

Installed:      SLS1.03 linux 0.99pl12

Well, as I was hacking about rc.net, I found that the grep expressions
used ot extract from /etc/hosts did not work for me.  I changed the
expression 
        from "^[^#]*/b${HOSTNAME}\b"
        to   "^[^#]*/<${HOSTNAME}\>"

I believe that the \b is supposed to match a blank???  (not sure) Assuming
that \b matches a blank, putting \b around the hostname would single it 
out as a whole word.  This only works if you actually have spaces (0x20)
around the hostname; tabs will screw this up.  Anyway, using /< anchors
to the front of a word, and \> anchors to the end of a word regardless of
what whitespace preceeds or follows the hostname.  

Anyone know of any reason why I should use \b???

dcuka@research.att.com

------------------------------

Crossposted-To: comp.os.linux
From: bsa@kf8nh.wariat.org (Brandon S. Allbery)
Subject: Re: tar & mt
Date: Tue, 17 Aug 1993 23:28:18 GMT

In article <4gQID2q00VR509B4si@andrew.cmu.edu> "Brian E. Gallew" <geek+@CMU.EDU> writes:
>dclemmer%anl433.uucp@Germany.EU.net (David Clemmer) writes:
>> ok... how would you specify which you wanted when restoring from that tape?
>> i mean, you can't exactly say 'tar xvf /dev/rmt0/file1' or something equally
>> silly...
>Actually, RTFM will show
>tar xvf /dev/rmt0 path1 path2 path3
>where pathX is the full pathname of the file of interest.

Wrong answer.  He's talking about separate tapefiles; tar won't read past the
end of the first tapefile.

The answer is:
        mt -f /dev/rmt0 fsf
        tar xvf /dev/rmt0 ...

>> btw, in checking my back-up (which i did by saying: tar cvf - * |gzip -cv >
>> /dev/rmt0), i found that zcat couldn't deal with the tape... ie: i couldn't do
>> zcat /dev/rmt0 |tar tvf - 
>> i had to do:
>> cat /dev/rmt0 |zcat |tar tvf -
>> this make sense to anyone?
>Yeah, zcat isn't truly intelligent.  Try `zcat < /dev/rmt0 | tar tvf -`.
>Of course, if you are at all familiar with GNU-tar, then you would use
>`tar tvfz /dev/rmt0`.  

If he's got the tar from SLS 1.02 or earlier, that won't work.  :-(

As for why gzip won't read the tape directly:  it probably rejects anything
that isn't an ordinary file or a pipe.  In the case of tapes, the tape drive
would probably reject any read attempts anyway unless gzip reads in multiples
of 512 bytes.  (Of course, gzip undoubtedly uses stdio so this isn't likely to
be a problem.)

++Brandon
-- 
Brandon S. Allbery         kf8nh@kf8nh.ampr.org          bsa@kf8nh.wariat.org

------------------------------

From: isaac@elrond.physics.mcgill.ca (Martin-D. Lacasse)
Subject: Re: NFS mount fails with authentication error
Date: Tue, 17 Aug 1993 23:52:28 GMT

>It's a problem of System V. System V don't know additional groups.
>You have to delete all additional group entries for the user, who mounts.
>(Root in almost every case.)
>
>MfG Uli
>-- 
        Mounting AIX (3.2) disks on a linux box requires that the mountd
        on the AIX server be given a flag for 'less secure nfs'.

        Read man mountd on your hp server for such an option too.
        (after running exportfs on a well configured /etc/exports, it figures)

 """""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
 Martin-D. Lacasse                   internet: isaac@physics.mcgill.ca
 Physics Department                     voice: (514) 398-7027
 McGill University                        fax: (514) 398-8434
 Montreal, Quebec, Canada
 ---------------------------------------------------------------------

------------------------------

From: hymowitz@hull.cs.jhu.edu (Hymie!)
Subject: resetting a virtual console
Reply-To: hymowitz@cs.jhu.edu (Hymie!)
Date: Wed, 18 Aug 1993 02:14:36 GMT

hello there.

i finally got dosemu running (yay!).  but sometimes, when dosemu dies a
poor death, it messes up the tty.  charactger input is very sluggish.

is there a way to reset a tty when this happens?  i've tried killing the
getty on that terminal, but it turns itself back on, still sluggish.

does anyone have a similar problem? or, even better, a fix?

thanx in advance.

--hymie                                                     hymowitz@cs.jhu.edu
===============================================================================
And I would choose to be with you.  That's if the choice were mine to make.
But you can make decisions too.  And you can have this heart to break.
                                                                   --Billy Joel
===============================================================================

------------------------------

From: bsa@kf8nh.wariat.org (Brandon S. Allbery)
Subject: Re: Why use shadow?
Date: Wed, 18 Aug 1993 01:14:30 GMT

In article <MUTS.93Aug15235253@compi.hobby.nl> muts@compi.hobby.nl (Peter Mutsaers) writes:
>Because someone with lots of CPU time on a CRAY can read the encrypted
>passwords and do a brute force guessing of passwords through this. If

It doesn't take anything even near a Cray to do this.  All it takes are the
usual naive users who use their first names or their login names or SO's names
or common dictionary words, etc., any old computer that has the the crypt()
function, and a list of words and names.  Heck, the Internet Worm used this
trick.

++Brandon
-- 
Brandon S. Allbery         kf8nh@kf8nh.ampr.org          bsa@kf8nh.wariat.org

------------------------------

From: bsa@kf8nh.wariat.org (Brandon S. Allbery)
Subject: Re: Why use shadow?
Date: Wed, 18 Aug 1993 01:20:36 GMT

In article <24r426$t4m@news.u.washington.edu> kenney@stein.u.washington.edu (Michael Kenney) writes:
>Think about it ... if someone really wants to gain access to your Linux
>system, all they need is a bootable-root floppy.

I *am* thinking about it.  My system is in my apartment, and has a modem
hooked up to it so I can dial in from work.  Quite frankly, if someone's in a
position to use a bootable rootdisk to break into my Linux box then they're
also in a position to carry off several thousand dollars' worth of computer
and radio equipment, etc.

++Brandon
-- 
Brandon S. Allbery         kf8nh@kf8nh.ampr.org          bsa@kf8nh.wariat.org

------------------------------

From: bsa@kf8nh.wariat.org (Brandon S. Allbery)
Subject: Re: Help 1)Booting SCO from LILO 2)common fs for both 
Date: Wed, 18 Aug 1993 01:29:55 GMT

In article <1993Aug17.070357.23047@cse.iitb.ernet.in> vinod@cse.iitb.ernet.in (Vinod G Kulkarni) writes:
>I am having SCO and linux both on same disk on different partitions.
>Has anyone configured LILO to boot SCO? 
>Please  mail me the config file.

Not sure it's possible.  SCO may require that you use its masterboot.  It
would probably be easier to boot Linux from SCO's masterboot.

>I also would like to have a common partition  between SCO and DOS
>containing user's home directories. Can you recommend any 
>common file system? Which file system  recommended? (Apart from MSDOG ...)  
>I am trying to go in for Xenix.

There's an S51K filesystem driver available somewhere in the ALPHA subtree on
tsx-11 and sunSITE.  I don't know if Xenix supports S51K filesystems, however.
(SCO "Unix" does, or at least claims to.)

++Brandon
-- 
Brandon S. Allbery         kf8nh@kf8nh.ampr.org          bsa@kf8nh.wariat.org

------------------------------

From: hagan@opine (Craig I. Hagan)
Subject: SLS 1.03 installation: bad TCP assumption
Date: 18 Aug 1993 03:43:39 GMT

[ Article crossposted from comp.os.linux.help ]
[ Author was Craig I. Hagan ]
[ Posted on 18 Aug 1993 01:47:00 GMT ]

After cursing at SLS-1.03 for not working, i sat down, and looked:
and i noticed something interesting, the default netmask for sls-1.03
is a class C number, and i am a class B address. changing that -- 
and adding a route (more in a sec) solved all of my problems

here is my rc.net now:

note: 255.255.0.0 is a class B netmask ditto 128.119.255.255 being a
class B broadcast.


# /etc/rc.net
# Linux networking startup script.  Should be run by /etc/rc.local at
# boot time.  Configures the interfaces and starts the deamons.
# It assumes hostname has been set.
#
#
echo -n "/etc/rc.net: "

HOSTS=/etc/hosts
INETD=/etc/inetd
NAMED=/etc/named
PORTMAP=/etc/portmap
NFSD=/etc/nfsd
MOUNTD=/etc/mountd
IPDEV=eth0

HOSTNAME=`hostname`

# This needs more testing and more diagnostics. */
IPADDR=`grep "^[^#]*\b$HOSTNAME\b" $HOSTS | cut -f1`

echo  -n "$HOSTNAME($IPADDR)"

# Router,  get it from the /etc/hosts file
ROUTER=`grep "^[^#]*\brouter\b" $HOSTS | cut -f1`

# Net, get it from the /etc/hosts file
NET=`grep "^[^#]*\bnetwork\b" $HOSTS | cut -f1`


ifconfig lo 127.0.0.1 up netmask 255.255.255.0
route add 127.0.0.1 lo
ifconfig eth0 up 128.119.41.236  broadcast 128.119.255.255 netmask 255.255.0.0
route add 128.119.41.0
route add default gw 128.119.1.2 1

if [ -x $PORTMAP ]; then
        echo -n ", `basename $PORTMAP`"
        $PORTMAP
fi

if [ -x $INETD ]; then
        echo -n ", `basename $INETD`"
        $INETD
fi

if [ -x $NAMED ]; then
        echo -n ", `basename $NAMED`"
        $NAMED
fi

if [ -x $NFSD ]; then
        echo -n ", `basename $NFSD`"
        $NFSD -f /etc/exports
fi

if [ -x $MOUNTD ]; then
        echo -n ", `basename $MOUNTD`"
        $MOUNTD
fi

echo ""


------------------------------

From: ronald@lowt.phys.tue.nl (Ronald Aarts)
Crossposted-To: comp.os.linux
Subject: Networking with pl12 (my solution)
Date: 18 Aug 1993 06:34:10 GMT

Hi netters,

A few days ago I asked a question about networking with the pl12 kernel.
From the news I understand that I'm not the only one with problems. I tried
to use the latest SLS 1.03 release which includes the latest (final) pl12
release of the kernel. 

I received all kind of hints of how to organize my /etc/rc.net
startup-file(s), but none of these worked and my routing remained broken.
There are some suggestions left that I didn't try (yet):
* Using the 4.4.2 library (Linus), which is however still in the alpha
  phase (see comp.os.linux/53589).
* Using a different /etc/route (Jon Tombs in comp.os.linux/53653).

Right now I installed the Slackware 1.01 release (from nic.funet.fi), which
still includes the earlier version of the kernel (pl12 ALPHA of Aug 7 if I'm
correct). With this package my networking worked without any major probles.

--
Ronald Aarts
Eindhoven University of Technology  | Internet: ronald@lowt.phys.tue.nl
Physics Department, P.O. Box 513,   |    Phone: +.31.40.474213
5600 MB Eindhoven, The Netherlands  |      Fax: +.31.40.453587

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
