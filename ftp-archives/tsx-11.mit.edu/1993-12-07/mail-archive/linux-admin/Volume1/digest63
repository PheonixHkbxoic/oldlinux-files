From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Fri, 17 Sep 93 16:13:42 EDT
Subject:  Linux-Admin Digest #63

Linux-Admin Digest #63, Volume #1                Fri, 17 Sep 93 16:13:42 EDT

Contents:
  Re: Swap *file* (Carsten Schulz-Key)
  Re: [Q] File ownerships/permissions (gone)
  Re: Slackware & TeX? (Mark Lord)
  Re: Slackware & TeX? (Larry Doolittle)
  Adventures in Slipland (Marcelo Mourier)
  Re: New bash and elm warning (Jeff Jennings)
  xlock and virtual consoles (Michael S Finger-1)
  Re: Back to the problem (was Re: Install (M.BELOW@BIONIC.zer.de)
  Re: [Summary] /etc/shutdown by non-root (Brion Moss)
  [Q] Backup and disaster recovery (webster)

----------------------------------------------------------------------------

From: schulzke@peanuts.informatik.uni-tuebingen.de (Carsten Schulz-Key)
Subject: Re: Swap *file*
Date: 17 Sep 1993 14:42:22 GMT

In article <1993Sep17.022512.541@hpacv.com>, guest@hpacv.com (nostofla) writes:
|> Hello,
|>      I am curious about a minor issue. 
|> Have seen other articles make reference to a swap FILE (as opposed to a
|> swap partition). There is no manual page in my 99.9 for mkswap and the
|> faqs only seem to cover howto make a partition for swap.
|>      Is there a way to make a swap FILE without creating a partiton
|> and could someone please tell me the command??
|> 
|>                                              Thanx much,
|>                                              postmaster@hpacv.com
|> 

Just do the following (as root):

dd if=/dev/zero of=/your/swapfile bs=1 count=<swapfile_size>
chmod 600 /your/swapfile
mkswap /your/swapfile <swapfile_size>

swapon /your/swapfile

and create an entry in /etc/fstab:
/your/swapfile     none         swap   sw 


Hope, that's what you wanted to know.
Ciao Carsten    
-- 
 ____________________________________________________________________________
|  ***  ***  *   *            |Carsten Schulz-Key                            |
| *     *    * *              |                                              |
| *       *  * *              |IRC: Gaston@#tuebingen                        | 
|  ***  ***  *   *            |schulzke@peanuts.informatik.uni-tuebingen.de  |
 ----------------------------------------------------------------------------

------------------------------

From: aehall@calvin.seattleu.edu (gone)
Subject: Re: [Q] File ownerships/permissions
Date: 17 Sep 1993 14:50:53 GMT

In article <1993Sep17.121016.9654@black.ox.ac.uk> uv94002@black.ox.ac.uk (Matt Millar) writes:
>I was wondering, having recently set up a fairly complete Linux system
>from a variety of different sources (names witheld to prevent flames)
>if there was any idea of what file ownerships should be on what files
>and what permissions by the same token.  Many of the archives I
>install seem to cough on ownerships and permissions and I end up with
>nasty things like X directories being owned by root with read/write
>permission to root only!
>
>Basically I'm looking for a trimmed ls -lR of a 'correct'
>(optimal) setup to compare with mine, to highlight any potential
>problems with binaries, shellscripts and config files. 

If you have the time to wait, you could wait for the Debian
Distribution that was a slick utility (if I do say so myself... (I
wrote it :) - fixperms) that sets up permissions for you upon
installation.  Right now Debian is in Alpha testing and it looks pretty
good so far!!!

-A

-- 
Anthony Hall                             _   _   Unix System Administrator
aehall@seattleu.edu                     /_/ /_/ Physician Micro Systems, Inc.
                                        _   _   2033 6th Ave Suite 707          
                                      /_/ /_/ Seattle, WA 98122  206-441-8490  

------------------------------

From: mlord@bnr.ca (Mark Lord)
Subject: Re: Slackware & TeX?
Date: Fri, 17 Sep 93 15:04:08 GMT

In article <CDHtI9.Axy@nocusuhs.nnmc.navy.mil> SSB1PZP@imcvms.med.navy.mil writes:
>
>With Slackware 1.0.2 installed (1 day before 1.0.3 came out !@#$%) I
>now would like TeX.  Anyone know the command to use to install from the
>SLS T* disks?

Just use the slackware pkgtool (spelling?) instead, and tell it you want
to install the T series.
-- 
mlord@bnr.ca    Mark Lord       BNR Ottawa,Canada       613-763-7482

------------------------------

From: doolitt@cebaf4.cebaf.gov (Larry Doolittle)
Subject: Re: Slackware & TeX?
Reply-To: doolitt@cebaf4.cebaf.gov (Larry Doolittle)
Date: Fri, 17 Sep 1993 14:22:45 GMT

In article <1993Sep17.121826.27601@cc.gatech.edu>, byron@cc.gatech.edu
(Byron A Jeff) writes:
> In article <CDHtI9.Axy@nocusuhs.nnmc.navy.mil>,
> PERUCCI, PHILIP A. <SSB1PZP@imcvms.med.navy.mil> wrote:
> >With Slackware 1.0.2 installed (1 day before 1.0.3 came out !@#$%) I
> >now would like TeX.  Anyone know the command to use to install from the
> >SLS T* disks?
> >
> 
> It seems the pkgtool is the proper command. It prompts you for the series
> or package to install. You can work from the hard disk or floppy.
> 

They are just .tar.gz files.  They don't bite.

  su root
  cd /
  gzip -cd </full/path/here/something.tgz | tar -xvv

The something.tgz file can be on a mounted floppy, NFS mount,
or local hard disk, your choice.
The only oddball thing to check for is a post-install script.
If a /install/scripts/something file shows up, it should
be run.  I don't think the SLS TeX packages have any of these.

Considering how simple this process is, I have a hard time taking
seriously the recent flap about copyright rules on install scripts.

           - Larry Doolittle   doolittle@cebaf.gov

------------------------------

From: mmourier@netcom.com (Marcelo Mourier)
Subject: Adventures in Slipland
Date: Fri, 17 Sep 1993 18:20:38 GMT

Hi Linuxers!

Hope this cook-book saves somebody time and headackes...  :-)  Good luck!

======== clip ======= clip ======== clip ======== clip ======== clip ========


                          Adventures in Slipland
                          ~~~~~~~~~~~~~~~~~~~~~~

So you want SLIP to work but don't have a clue how to go about..? Hopefully
this cook-book will help you set up a SLIP connection between your Linux box
and a SLIP server. The process is really not difficult, but it involves a lot
of little steps that can (and usually do) go wrong.

Please, send comments and corrections to this document to mmourier@netcom.com.
Good luck and have fun SLIPing...  ;-)


1.- Assumptions

        I'll assume that you have already read the NET-2 FAQ (and were left
with the same unanswered questions I was, like for instance "what exactly is
a SLIP server?!!!") If you haven't, go do your homework first...  :-)

        Also, during this "discurse" I'll use my hardware/software set up as
reference. If yours is different make sure you change things accordingly. My
system is a 486-based PC running Linux 0.99.12 with a 2400-baud internal modem
configured as /dev/cua1 (i.e., second serial port). I'll also assume that you
have access to a SLIP server, or that you can "build" one yourself (see below).


2.- SLIP Servers

        So what exactly is a SLIP server? A SLIP server is just a system that
has been set up to accept login's from a SLIP client. Intuitively obvious,
isn't it? The main difference with a regular login account is that the SLIP
server has a special "login shell" for the client (a la UUCP style). For exam-
ple, a Linux system configured as a SLIP server could use "dip" as the SLIP 
client's login "shell". In my case the SLIP server is a SPARC IPC configured 
with the slip-4.1 distribution by Mark Andrews (Mark.Andrews@syd.dms.csiro.au).
So when the client (my Linux PC at home) logs into the SPARC, the "slip-attach"
command (that comes with Mark's package) is executed to set up the SLIP inter-
face. 

        Unless you use a "static" SLIP server, the server will inform the SLIP
client the IP addresses assigned to both ends of the point-to-point link. The 
client needs this information to set up its side of the link. Another important
thing to know about your SLIP server is whether it runs plain SLIP or CSLIP
(compresses SLIP), and the Maximum Transfer Unit (MTU) size used. For example,
as shipped by SLS 1.3, the SLIP driver uses compressed datagrams and an MTU of
296 bytes. As the SLIP server on my SPARC uses plain SLIP and an MTU of 1006
bytes, I had to reconfigure the Linux SLIP driver (see below).


3.- Configuring the client

        In order to use SLIP, you need to configure it as a valid network
interface in the kernel. You do this by modifying the linux/net/inet/CONFIG
file to enable the SLIP driver. Also, at this point you should undefine the
SL_DUMP macro, and define or undefine the SL_COMPRESSED macro depending on
your server's configuration. Build the new kernel and reboot with it.

        Make sure you have the /dev/cua1 special file, and that there's no
getty process hanging from it. If you have one, edit the /etc/inittab file,
comment out the entry for it, and do a "kill -HUP 1" to notify init of the 
change (type "ps -ax" to make sure getty went away).


4. - Configuring the Server

        As I mentioned in Sec. 2, my SLIP server is a SPARCstation IPC running
SunOS 4.1.2 configured with Mark Andrew's STREAMS-based SLIP interface. Confi-
guring the SunOS kernel for SLIP is a job in itself, and its description is 
beyond the scope of this document. So if you don't have a SLIP server available
the best thing you can do to test your client is get ahold of a Linux buddy
that can set up his/her system to work as your server. Anyway, the process is
more or less the same in both cases. First, you'll have to create a login 
account for the client to log into the server. Let's be original and give it 
the login name "slip", user ID 100, and group ID 1 (daemon). Thus, the entry 
in the /etc/passwd might look like this:

        slip::100:1:SLIP Client:/usr/lib/slip:/usr/lib/slip/slattach

Make sure you assign a login password to this account before going on...!
The directory /usr/lib/slip is where I installed Mark's SLIP executables.
The program "slattach" is invoked by login(1) when the client logs into the
system. Its main function is to call "slip-attach" to set up the SLIP inter-
face. If you are using a Linux box as your server, your login "shell" will be
/usr/bin/dip -i. I haven't played with "dip" as a login shell, so I can't say
much about it. The man page for it is pretty good though, so you shouldn't
have much problem setting it to work. Second, make sure that the modem on the
server's side is set up for "auto-answer" and "quiet mode" (no response codes),
and that there is a getty(8) process listening to the port where the modem is
connected. If you don't have one, edit the file /etc/inittab and create an
entry of the form:

        c8:6:respawn:/etc/getty cua1

Do a "kill -HUP 1" to notify init of the change, and use "ps -ax" to make sure
that getty is there (you don't want to drive all the way home, just to find out
that nobody answers your call!) If you want to avoid login(1) from sending the
message of the day to the SLIP client, create an (empty) file in the client's
home directory (/usr/lib/slip in this example) called ".hushlogin". See the man
page for login(1) for more information about this.


5. - Making it Happen

        Well, maybe... :-) If you followed the steps described above, you 
shouldn't have trouble setting up the SLIP link (famous last words :-) Just
follow the directions described in Sec. 5.3 of the "NET-2 HOWTO" by Matt Welsh
on how to use "dip" to dial into the SLIP server. For the sake of completeness
I'll include them here, assuming that the SLIP client's host name is "client",
the SLIP server's is "server", the server's telephone number is 123-4567, and 
the client's login "shell" is /usr/lib/slip/slattach.

client:~% dip -t
DIP> port cua1
DIP> speed 2400
DIP> reset
DIP> send att\r\n
DIP> dial 1234567
DIP> term

server login: slip
Password:

Client: 192.42.62.2, Server: 192.42.62.1, Netmask: 255.255.255.0
^]
DIP> local 192.42.62.2
DIP> remote 192.42.62.1
DIP> mtu 1006
DIP> mode SLIP
client:~% /etc/route add default gw 192.42.62.1
client:~% /etc/ifconfig
lo        IP ADDR 127.0.0.1  BCAST 127.255.255.255  NETMASK 255.255.255.0
          MTU 2000  METRIC 0  POINT-TO-POINT ADDR 0.0.0.0
          FLAGS: 0x0049 ( UP LOOPBACK RUNNING )

sl0       IP ADDR 192.42.62.2  BCAST 192.42.62.255  NETMASK 255.255.255.0
          MTU 1006  METRIC 0  POINT-TO-POINT ADDR 192.42.62.1
          FLAGS: 0x0051 ( UP POINTOPOINT RUNNING )
client:~% netstat -rn
Kernel routing table
Destination net/address   Gateway address           Flags RefCnt    Use Iface
default                   192.42.62.1               UGN        0      0 sl0
127.0.0.1                 *                         UH         0      0 lo
192.42.62.1
client:~%

At this point, if everything went smoothly, you should be able to "ping" the
server, "telent" into it, "ftp" files, etc. etc. Congratulations, you made it!


6. - Problems

        If you're reading this section you either run into problems or you're
really curious! Start by reading Sec. 7 and Sec. 8 of the "NET-2 HOWTO", which
describe some common problems you might run into. In general, I'd suggest that
you use a "divide and conquer" approach to solving the problem. Make sure you
have set everything up correctly; make sure you can log into the server; make
sure that both, client and server, are speaking the same language (same MTU
and either compressed or uncompressed datagrams). If you want to refer to the
remote host by name, make sure you have an entry for it in your /etc/hosts
file. Finally, if you (like me) are using a low-speed modem (2400-baud or less)
you should expect _slow_ response times, so wait a couple of seconds before
assuming that the system is hung.
        
-- 
Marcelo Mourier
mmourier@netcom.com

------------------------------

From: jennings@lhotse.stortek.com (Jeff Jennings)
Subject: Re: New bash and elm warning
Date: Fri, 17 Sep 1993 14:38:54 GMT

Arjan de Vet (devet@adv.win.tue.nl) wrote:
: In article <1993Sep16.063001.23243@sifon.cc.mcgill.ca>,
: Martin-D. Lacasse <isaac@physics.mcgill.ca> wrote:

: >     To all those who installed the small beta release (announced
: >     a few days ago) of bash as /bin/sh: Be careful!!
: >     All your mail message sent by elm will have a correct
: >     header but might have an empty message. It took me a while to
: >     track this down since a few other changes have been made
: >     to my system in the mean time.
: >
: >     Anyone else had this problem too?

: I had this problem too in the beginning of using bash 1.13 beta. It turned
: out to be a bug in Elm 2.4. The fact that this bug does not show up when
: using bash 1.12 is a bug in bash 1.12 :-). It has been fixed in the latest
: release 2.4.21 (and maybe even earlier).

Well, I'm running bash 1.13 beta and elm 2.4.21, and I have the empty
message problem.  Bash to bash 1.12...

- jeff

--
Jeff Jennings              | Imagination is more important than knowledge.
Jeff_Jennings@stortek.com  |                         - Albert Einstein
Storage Tek - Iceberg      |    (~)  Turn down your lights  (~)
LSVL 4 (303)673-7855       |     U     (where applicable)    U
GCS -d+ -p+ c++ l++ u+(++) e++ m+ s/+ n+(---) h---(*) f+(-) !g w+ t++ r- y+(*)

------------------------------

From: fing0004@gold.tc.umn.edu (Michael S Finger-1)
Subject: xlock and virtual consoles
Date: Fri, 17 Sep 1993 18:52:25 GMT

Is there any way to prevent a user from switching virtual terminals when xlock
is running?  As a test I started xlock and <ctrl><alt><F1> to get back to the 
console that I started x through and I was able to ctrl-c out of it and get 
a prompt.  Is there a way to prevent switching when xlock is running?

I am not running xdm, I figured that running that will fix it, but I would like
to have it work both ways.
i

Also, (I think this is in a FAQ, but I could not find it) when I run xdm I run
out of VT's and my machine hangs in a loop, how can I get xdm to release the VT
and regrab it again on exit of an xsession?

Thanks for all of the help.

I know these are kinda X questions but I am worried about the security isuues,
so I thought this would be the right spot.  If not, flame me and I will learn.

-Mike

------------------------------

From: M.BELOW@BIONIC.zer.de
Subject: Re: Back to the problem (was Re: Install
Date: Fri, 17 Sep 1993 15:39:00 +0200

zrzm0370@helpdesk.rus.uni-stuttgart.de (Joerg Scheurich)  wrote:

> >> > I tryed to install Linux 99pl12 SLS 1.03 on an ARC Pentium System
> >> > it did not work! The Bord was a combitype EISA / VLB, 1542C 32MB RAM
>
> >> > It hanged at boottime after that line whis trying Alib....
>
> I don't want to stop your flame wars about distributions, but:
>
> What may be the reason for the hang ?
>
> What is Alib ?

I think it has to be Adlib, which is a soundcard.

> If it is a scsi-driver, a other kernel without scsi-support will help.
> If it is a soundcard-driver, a other kernel without this support will help.
>
> I can't see any need for a Alib on a EISA / VLB ...

I don't see the need for a soundcard for any type of computer system,
but that's another topic...

And back to the flame war:
I didn't have any problems installing SLS !
(Okay, I admit that it's been the version with the pl9-1 kernel
[SLS 1.01 ?] ...)

-Michael

 - Be a loyal plastic robot for a world that doesn't care - (Frank Zappa)

## CrossPoint v2.1 ##

------------------------------

From: boss@soda.berkeley.edu (Brion Moss)
Crossposted-To: comp.unix.admin
Subject: Re: [Summary] /etc/shutdown by non-root
Date: 17 Sep 1993 19:28:58 GMT

What I did was, rather than create a user with /etc/shutdown as its shell,
to create a shutdown user with a shell which I called "shutoff", which
checked to make sure that nobody else was logged on and then called shutdown.
(The script was then setuid root, of course).  This seemed to work pretty
well.

I post this both as a suggestion and to find out what's wrong with my idea.

-- 
 Brion "Imp" Moss       imp@cory.berkeley.edu           | to save us both
                        boss@soda.berkeley.edu          | some effort, just
                                                        | assume this .sig
DISCLAIMER: I hereby claim the city of Dis as my own.   | is already funny.

------------------------------

From: webster@ud17501.mdc.com (webster)
Subject: [Q] Backup and disaster recovery
Date: 17 Sep 1993 19:22:26 GMT
Reply-To: webster@varmit.mdc.com (webster)


Hi,

[This may be in a FAQ, if so please point me at it.]
Now that I have Linux up and running correctly (well close enough) on my
system, its time to start worrying about backups and disaster recovery.

Assumptions:
* Linux .99.9 (SLS 1.02)
* System boots off of 5.25" 1.2mb, second floppy is 1.44mb 3.5"
* A SCSI Tape (DC6250) is available to the system.
* Linux partition (exfs2) is smaller than the max tape size (150mb vs 250)
* User/Admin has a good knowledge of Unix commands from a user's
standpoint, has installed Linux, isn't afraid of Kernel configuration,
etc.... -- but disaster recovery on a Linux/Unix box is a new area.

Questions:
1.  What is the best way to copy the whole Linux setup to tape?  dd?
tar?  And what would the command lines for these look like?  I want to
be able to take a 'snap-shot' of the system and restore to that.

1.a.  Is there a mechanism for producing incremental backups (to patch
Q#1 after a restore).  I'm thinking that tar with a date filter (find?) 
would work here.  What are the gottcha's here?  How can I make sure that
file permissions, sym links, devices, etc. are correctly backed up?

2.  How does one create a Linux 'boot' disk (like the SLS A1 disks)? 
What all has to go on it to perform restores from Q#1?  (i.e. Kernel
Image, dd, fdisk, tar,....)

Thanks in advance,

Tom
--
Tom Webster     webster@varmit.mdc.com
                please mail to this address.
===========
My opinions are my own and may not reflect those of my employer.


------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
