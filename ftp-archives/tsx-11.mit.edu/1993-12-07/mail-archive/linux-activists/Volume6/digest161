From:     Digestifier <Linux-Activists-Request@senator-bedfellow.mit.edu>
To:       Linux-Activists@senator-bedfellow.mit.edu
Reply-To: Linux-Activists@senator-bedfellow.mit.edu
Date:     Mon, 23 Aug 93 18:13:08 EDT
Subject:  Linux-Activists Digest #161

Linux-Activists Digest #161, Volume #6           Mon, 23 Aug 93 18:13:08 EDT

Contents:
  Re: Kernel compile error (James Hightower)
  Boot manager (Bolski)
  Re: Serial: My IRQ is 5 NOT 4!  Change? (Mark Warren)
  Is emacs 19.19-A binary on sunsite broken? (Savio Lam)
  Re: Boot manager (Byron A Jeff)
  Re: SCSI Performance (Yet (John Will)
  Re: Cross-compiling on Sun (Zhuo Er Lin)
  Does Sony 8012 CD-ROM work with Linux? (Sysopje)
  SORRY! (guest@hpacv.com)
  Re: SCSI Performance (Yet Again) (Eric Youngdale)
  2: No more processes :(  and GNU Finger? (Ludwig Van.)
  Re: Can't use X other than login as root (Zack Evans)
  Re: Can't use X other than login as root (Zack Evans)
  Re: SCSI Performance (Yet Again) (Wolfgang Schelongowski)
  Re: When's Linux 1.0 coming out? (Kevin Cummings)
  Re: Kernel compile error (Zhuo Er Lin)

----------------------------------------------------------------------------

Crossposted-To: comp.os.linux.help
From: jamesh@netcom.com (James Hightower)
Subject: Re: Kernel compile error
Date: Mon, 23 Aug 1993 17:08:35 GMT

umlin000@ccu.umanitoba.ca (Zhuo Er Lin) writes:

>I turned off Math emulation, quota file sys etc...

>Here is the error message of 'make zImage':

>ld  -T 100000 -M boot/head.o init/main.o tools/version.o kernel/kernel.o...
>kernel/kernel.o: Undefined symbol _sys_quotactl referenced from data segment
>make: *** [tools/zSystem] Error 1
>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

You did a make dep; make clean; first, right?

JJH


------------------------------

From: iks@bsu-cs.bsu.edu (Bolski)
Subject: Boot manager
Date: 23 Aug 93 17:16:35 GMT

I am setting up Linux for our school, but the machines also need to be able
to run DOS. The machines will be used by both Computer Science majors and
non-CS majors. Therefore, we need a better boot manager than LILO. What I'm
looking for is on the lines of this:

All the person has to do is reboot the machine, whether in DOS or Linux, and
a menu comes up allowing the user to select whatever OS they want to run.

I don't want something along the lines of LILO where the person HAS to hit
a key and hold it.

Any help would be greatly appreciated.


------------------------------

From: mwarren@cedar.sybase.com (Mark Warren)
Subject: Re: Serial: My IRQ is 5 NOT 4!  Change?
Date: Mon, 23 Aug 1993 14:41:10 GMT

In article <1993Aug17.203434.163@dg8lav.toppoint.de>, kalle@dg8lav.toppoint.de (Karlheinz Hagen) writes:
|> Greg Corteville (gcortevi@nyx.cs.du.edu) wrote:
|> : I purposely installed COM 3 on my system to have IRQ 5 so that I could use
|> : COM 1 and COM 3 on my system at the same time without problems.  However,
|> : when Linux loads, it thinks its some kind of error and defaults to IRQ 4
|> : on COM 3.  How can I force it to use IRQ 5?
|> 
|> 
|> Use SETSERIAL Version 2.x. Linux can't install the serial ports at the boot-up.
|> You will find setserial on all servers. (i hope so :-)
|> 

I'm brand new to Linux (I've been running it for a total of two days) so please let
me know if I've made any mistakes here...

I had the same problem, and I tried setserial, but found that it wouldn't work
initially, because (I *think*) the lp driver found my COM3 at 0x3e8/irq5 and
claimed it for its own.  So, I trimmed the table of ports available to lp (I
believe that was in lp.h) and set LP_NO to 1.  Setserial was then able to work.

Then I went hunting to try to see why COM3 was defaulting to IRQ4.  I never found
it because I quit when I discovered CONFIG_AUTO_IRQ in serial.c.

I recompiled serial.c with CONFIG_AUTO_IRQ defined, and everything is now happy.  I
am a little bit nervous about doing this because

        1) I couldn't find much documentation on it,
        2) it isn't the default (and I'm always worried when things that look
                really useful aren't the default).

Is there any danger in using CONFIG_AUTO_IRQ?

Thanks in advance...

------------------------------

From: lam836@cs.cuhk.hk (Savio Lam)
Subject: Is emacs 19.19-A binary on sunsite broken?
Date: Mon, 23 Aug 1993 15:12:15 GMT
Reply-To: lam836@cs.cuhk.hk

Hello,

        I just got the emacs 19.19-A binaries from sunsite and installed
it. When I tried to run it (not under X), it says something like "can't load
term/lk201". Later, I noticed that lk201.el is included in
emacs-19.19-A.el.2of2.tar.gz, and so I got both parts (1of2 and 2of2) and
installed them as well. This fixed the above problem. Next I tried C-h i
to access the info browser, and got "Info dir does not exist". I have to
"cd /usr/info" before running emacs to avoid this error, but now when I
try to access menu items under the top node of the emacs manual tree, I
got errors saying "No such node: xxxxxx". For example, I can't access
nodes Intro, Glossary, and many other nodes. What's wrong with this
binary distribution?

        Thanks.

Regards,
Savio Lam.

--
###############################################################################
#                                 |        _                                  #
# ------------------------------- |      _| |_                                #
# Lam Lai Yin, Savio              |     |_   _|                               #
#                                 |       | |                                 #
# Internet: lam836@cs.cuhk.hk     |     /     \     Can't live with DOS?      #
# Department of Computer Science  |    |  DOS  |                              #
# Chinese University of Hong Kong |    |       |    Try Linux...              #
# ------------------------------- |    |       |                              #
#                                 |  ^^^^^^^^^^^^^                            #
###############################################################################

------------------------------

From: byron@cc.gatech.edu (Byron A Jeff)
Subject: Re: Boot manager
Date: Mon, 23 Aug 1993 18:52:05 GMT

In article <4870@bsu-cs.bsu.edu>, Bolski <iks@bsu-cs.bsu.edu> wrote:
>I am setting up Linux for our school, but the machines also need to be able
>to run DOS. The machines will be used by both Computer Science majors and
>non-CS majors. Therefore, we need a better boot manager than LILO. What I'm
>looking for is on the lines of this:
>
>All the person has to do is reboot the machine, whether in DOS or Linux, and
>a menu comes up allowing the user to select whatever OS they want to run.
>
>I don't want something along the lines of LILO where the person HAS to hit
>a key and hold it.
>
>Any help would be greatly appreciated.

I believe LILO has a prompt option that forces the boot prompt. Let me
look at the README.....AH here it is!

  PROMPT  forces entering the boot prompt without expecting any prior
    key-presses. Unattended reboots are impossible if PROMPT is set and
    TIMEOUT isn't.
  TIMEOUT=<tsecs>  sets a timeout (in tenths of a second) for keyboard input.
    If no key is pressed for the specified time, the first image is
    automatically booted. Similarly, password input is aborted if the user is
    idle for too long. The default timeout is infinite.

So you can turn PROMPT on with no TIMEOUT and LILO will always prompt. Here 
is another useful option:

  MESSAGE=<message_file>  specifies a file containing a message that is
    displayed before the boot prompt. No message is displayed when waiting for
    a shifting key after printing "LILO ". The FF character ([Ctrl L]) clears
    the local screen. The size of the message file is limited to 65535 bytes.
    The map file has to be rebuilt if the message file is changed or moved.

This way you can even tell the user what they have to do to boot the OS
that they want. Something like this:

This machine can run multiple operating systems.

To run DOS/Windows just press <ENTER> at the "boot:" prompt below.

To run Linux type "linux" and press <ENTER> at the "boot:" prompt.

To see a list of all operating systems available press the <Tab> key.

boot:

Can that be too hard?

Hope this helps. Get a copy of the LILO manual. It has all kinds of goodies
in it.

BAJ
---
Another random extraction from the mental bit stream of...
Byron A. Jeff - PhD student operating in parallel!
Georgia Tech, Atlanta GA 30332   Internet: byron@cc.gatech.edu

------------------------------

From: john.will@satalink.com (John Will)
Subject: Re: SCSI Performance (Yet
Date: 23 Aug 93 14:51:00 GMT

B >Any cacheing scheme has pathological cases where the result is actually 
B >slower than direct I/O.  For Linux the pathological case is iozone... a 
B >sequential write of a large file followed by a sequential read of the same 
B >file, if it's larger than the cache, results in Linux having to force 
B >cache writes so that there are enough free blocks to read into.

GIVE THAT MAN A CIGAR!  I was watching from the sidelines, wondering when
someone was going to figure this out. :-)  I've done similar test with
MS-DOS, and caching will actually hurt you with monster sequential files.

------------------------------

From: umlin000@ccu.umanitoba.ca (Zhuo Er Lin)
Subject: Re: Cross-compiling on Sun
Date: Mon, 23 Aug 1993 18:30:26 GMT

In <24ufqq$s8c@hallmark.key.amdahl.com> brian@key.amdahl.com (Brian Ullmark) writes:

>Hello -

>I seem to remember stuff going by about cross-compiling Linux stuff
>on a different system. I haven't heard anything about this lately.
>Is it possible to compile stuff on my Sun IPC (w/gcc) for later
>use on my 386? I would also be interested in compiling 6502 code
>on my Linux box also... It would be nice to be able to recompile
>the kernel for a specific boxes attributes. I don't have a second

Check out the GCC-FAQ in sunsite.unc.edu.  It details about the Cross
compiler for Linux in Sun Sparc.


Cheers.
-- 
========================================================================
|  Eric Lin                       (Home):   (204) 783-2884             |
|    Computer Engineering      FAX Modem:   (204) 783-2884             |
|    University of Manitoba     Internet:   Umlin000@cc.Umanitoba.CA   |

------------------------------

From: rb@dutsh7.tudelft.nl (Sysopje)
Subject: Does Sony 8012 CD-ROM work with Linux?
Date: Tue, 24 Aug 1993 01:41:54 GMT

Does anyone know if it's possible to use a Sony 8012 CD-ROM player with Linux?
(Adaptec 1542C)

Richard Biemans  rb@dutsh7.tudelft.nl

------------------------------

From: guest@hpacv.com
Subject: SORRY!
Date: Mon, 23 Aug 1993 14:28:15 GMT

To all:
        I am very sorry about the posts from this system last night.
After an "all nighter" of installing configuring/installing Linux, Cnews
and TCP/IP (for the first time) I had NO intention of my crazy "test posts"
ever leaving this system.
        thanx for your understanding.
                                                Jamie Popken
                                                SysOp -==SsosS==-
P.S. can anyone tell me where to find more info on TCP/IP for Linux?


------------------------------

From: eric@tantalus.nrl.navy.mil (Eric Youngdale)
Subject: Re: SCSI Performance (Yet Again)
Date: Mon, 23 Aug 1993 20:19:17 GMT

In article <PCG.93Aug22210201@decb.aber.ac.uk> pcg@aber.ac.uk (Piercarlo Grandi) writes:
>Actually one would want to have an idea of how good each of these
>components is *in isolation*;
>
>1)     the generic SCSI code
>
>2)     the HA specific SCSI code
>
>3)     the disk SCSI code
>
>4)     the filesystem code
>
>5)     the cache handling code.
>

        A number of people have been commenting on the iozone benchmark, and it
appears as if people are trying to benchmark a number of things simultaneously,
as has been pointed out by the above poster.

        First of all, it has been observed that the numbers for writing are
much larger than those for reading, and this has been attributed to the buffer
cache not being completely flushed to disk when reading starts (inflating the
write numbers and depressing the read numbers).  I feel that this is a correct
explanation and I would like to point out that in pl12 there is now an ioctl to
flush and invalidate the buffer cache for a specific device.  It is not quite
fsync(), but if you control the conditions of the testing it amounts to the
same thing.  If someone wants to play with this, feel free.  I suspect that the
numbers for read and write will be much closer if you were to try this.
The ioctl was actually added for a different purpose - for writing patterns to
a disk and then reading them back in search of bad sectors.  This could have
been accomplished by implementing raw devices, but for what we wanted this was
much faster, and in fact it would be faster for locating bad sectors as well.

        Next, I would like to make sure that everyone knows that it is
recommended that the size of the file that you use with iozone should be at
*least* 2.5 times the size of the buffer cache for the system, basically to
ensure that the reads are not in fact being satisfied by the buffer cache.

        Then I would like to point out that filesystem fragmentation and free
space fragmentation can be a very important component of the iozone benchmark
results.  If you want to measure the raw speed of the scsi subsystem, then
start with a fresh partition, or run iozone directly on a naked partition (i.e.
/dev/sda1 - this will wipe out the contents of the partition).   If you run
iozone on a active partition that you have used for some time, you will
probably get a more accurate indication of what the real-life throughput is,
but you are measuring something that is more of a composite number.

        Next, you should be aware that performance can be somewhat better by
using a larger block size with iozone.  By doing this, you tend to reduce the
number of actual syscalls. (As a pathological example, consider what would
happen if you were to use a block size of 1 - even on a ramdisk).

        Finally, you should be aware that you can get a better performance by
using filesystems with larger allocation blocksizes.  I have only had limited
success with this - there is apparently some bug in ext2 which cause the
performance to go down quite significantly when used on filesystems with
allocation block sizes != 1024.  One of these days I will dig in and see where
the bottleneck is.  Nonetheless, I have measured performance using a naked
partition (bypassing the filesystem), and I have gotten numbers in excess of
1.0Mb/sec with a 1542B.

-Eric

In closing, I give you some numbers that we got last fall when testing some new
scsi code (which is all present in the kernel now).  These were all on a
*fresh* minix partition - I would expect that ext2 or xia would give comparable
numbers.  I can think of no reason why the numbers would be much different now
than they were last fall.

>iozone gave good results. I tried three block lengths with a 40 MB file and
>the results were:
>
>block       w               r
> 1024      800 kB/s        650 kB/s
> 4096      700 kB/s        750 kB/s
>16384      800 kB/s        800 kB/s


-- 
"When Gregor Samsa woke up one morning from unsettling dreams, he
found himself changed in his bed into a lawyer."

------------------------------

Crossposted-To: comp.os.linux.misc
From: lruppert@rodan.syr.edu (Ludwig Van.)
Subject: 2: No more processes :(  and GNU Finger?
Date: Mon, 23 Aug 93 16:19:04 EDT


First question.  I run SLS 0.,99pl9 with 8MB real, 16 virtual.  After
getting about 20 login processes, I get an error message "No more
processes". Is there a tunable in the kernel that will allow more
space for processes, or am I stuck with only being able to have about 
10- 15 usable simultaneous login sessions.  Has this been fixed since
pl9? Also telnetd runs out of ptys after ttypf is used.  Is there
support for more ptys in the kernel or telnetd?  How difficult would
it be to add support like that?

Second question (easier):  Has anyone ported GNU finger to Linux?
If so, where can I find it, if not, is anyone working on it?

-Lou Ruppert

--
Linux:  proof that the best things in life *are* free.

------------------------------

From: zevans@nyx.cs.du.edu (Zack Evans)
Subject: Re: Can't use X other than login as root
Date: Mon, 23 Aug 93 20:34:55 GMT

In article <1993Aug21.050017.1326@cucs5.cs.cuhk.hk>,
lau chi ngan <cnlau1@ie.cuhk.hk> wrote:
>I've installed X windows and can successfully use Openwin when login as
>root but not others.  What have I missed?  

A big giveaway, which is...

>Fatal server error:
>Server must be suid root

This means, um, well, it means that the server must be suid root :) If you
don't know what that means, email me and I'll explain it, but for now here's
the fix:

chmod 4755 /usr/X386/bin/<whatever the 1.2 colour server is called>

Zack




--
Zack Evans        pyc081@cent1.lancs.ac.uk or zevans@nyx.cs.du.edu (Internet)
                  pyc081@uk.ac.lancs.cent1                         (JANET)

Watch yer bass bins lads, I'm tellin' yer...

------------------------------

From: zevans@nyx.cs.du.edu (Zack Evans)
Subject: Re: Can't use X other than login as root
Date: Mon, 23 Aug 93 20:52:37 GMT

In article <1993Aug23.203455.20580@mnemosyne.cs.du.edu>,
Zack Evans <zevans@nyx.cs.du.edu> wrote:

>This means, um, well, it means that the server must be suid root :) If you
>don't know what that means, email me and I'll explain it, but for now here's
>the fix:
>
>chmod 4755 /usr/X386/bin/<whatever the 1.2 colour server is called>

Damn. Forgot to say, that the server must also be owned by root. chown the same
file as above to root.

Zack

--
Zack Evans        pyc081@cent1.lancs.ac.uk or zevans@nyx.cs.du.edu (Internet)
                  pyc081@uk.ac.lancs.cent1                         (JANET)

Watch yer bass bins lads, I'm tellin' yer...

------------------------------

From: ws@xivic.bo.open.de (Wolfgang Schelongowski)
Subject: Re: SCSI Performance (Yet Again)
Date: Mon, 23 Aug 93 16:37:17 MEST

jhenders@jonh.wimsey.bc.ca (John Henders) writes:

...
>  SO far, it seems
> to me that the theoretical 5.7 meg/sec of the Adaptec is just that,
> theory, and only a few people get even 1 meg/sec.

The 5.7 MB/sec are the DMA transfer speed. There are other things
happening on the SCSI-Bus which have to complete before that. If you
need to know more about what's going on there, RTFM. There's a
(German) book about the IDE-Interface and SCSI-Bus (Author:
Friedhelm Schmidt, ISBN: 3-89319-597-1). As it is published by
Addison-Wesley, you can pester them to have a translation released
if there is no English book about that subject.

>     Again, on my ST, there was a program that bypassed the filesystem
> completely to test raw disk i/o, and somehow they even made it
> non-destructive so you didn't have to use a clean partition to do tests.
> It seems there is no equivalent under *nix.

How about
 date;dd if=/dev/sda of=/dev/null bs=131072 count=512;date
(This does only a read, you have to save and restore via dd
if you want to test write. Just be _very_ careful about _where_
you test ! Maybe you should backup the disk.)

That took 69 seconds => 950 KByte/sec for raw I/O. Under BSDI,
the numbers are 36 seconds on /dev/rsd0a => 1820 KByte/sec.

As I'm still running 0.99 pl6 the numbers for Linux may have
changed (hopefully to the better). Can somebody test it and
post the results so we have _numbers_ to compare and not
assumptions ?

My System: noname 486/33, AHA1542B, Fuji M2624FA. It makes no
difference for Linux whether I use async or sync SCSI.

--
Wolfgang Schelongowski
ws@xivic.bo.open.de  or  ...!uunet!Germany.EU.net!xivic.bo.open.de!ws
"No matter what the game, no matter what the rules, the same rules
apply to both sides."   -- Hoyle's Law

------------------------------

From: cummings@hammer.cv.com (Kevin Cummings)
Subject: Re: When's Linux 1.0 coming out?
Date: Mon, 23 Aug 1993 21:14:51 GMT

In article <BURLEY.93Aug18101424@mole.gnu.ai.mit.edu>, burley@mole.gnu.ai.mit.edu (Craig Burley) writes:
> I think the GNU version numbering scheme system is simplest after all
> (after I've spent most of my life inventing all sorts of comprehensive
> and overly complex ones):
> 
> major.minor.patch
> 
> where each field is a nonnegative integer.  At least I think this
> is the scheme they use; perhaps it's documented somewhere.

Sigh!  I long for the days of

release.update

This major,minor,patch stuff is going too far.  Especially when rev 0.99 has
been around for a year now!  At this rate, we'll NEVER get to release 1.0!
Let's bite the bullet!  Get 1.0 pushed out the door.  Maybe even have some
patch releases for it (1.1, 1.2, etc), and then get on with the next major
release of 2.0!  It's time to set our sights BEYOND 1.0 (so we can get there!)

-- 
Kevin J. Cummings                       ComputerVision Services
cummings@kjc386.framingham.ma.us        cummings@primerd.cv.com

------------------------------

Crossposted-To: comp.os.linux.help
From: umlin000@ccu.umanitoba.ca (Zhuo Er Lin)
Subject: Re: Kernel compile error
Date: Mon, 23 Aug 1993 20:50:38 GMT

In <jameshCC82AC.9A2@netcom.com> jamesh@netcom.com (James Hightower) writes:

>umlin000@ccu.umanitoba.ca (Zhuo Er Lin) writes:

>>I turned off Math emulation, quota file sys etc...

>>Here is the error message of 'make zImage':

>>ld  -T 100000 -M boot/head.o init/main.o tools/version.o kernel/kernel.o...
>>kernel/kernel.o: Undefined symbol _sys_quotactl referenced from data segment
>>make: *** [tools/zSystem] Error 1
>>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

>You did a make dep; make clean; first, right?

Yes, I did 'make config; make dep; make zImage'.

FYI, after I turned on the support of quota file system, it compiled ok!

However, I didn't want to use quota nor did I install quota :-)

I would think it is a bug somewhere in the kernel source.



-- 
========================================================================
|  Eric Lin                       (Home):   (204) 783-2884             |
|    Computer Engineering      FAX Modem:   (204) 783-2884             |
|    University of Manitoba     Internet:   Umlin000@cc.Umanitoba.CA   |

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Activists-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux) via:

    Internet: Linux-Activists@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    tupac-amaru.informatik.rwth-aachen.de	pub/msdos/replace

The current version of Linux is 0.99pl9 released on April 23, 1993

End of Linux-Activists Digest
******************************
