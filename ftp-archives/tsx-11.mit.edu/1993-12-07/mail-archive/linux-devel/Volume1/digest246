From:     Digestifier <Linux-Development-Request@senator-bedfellow.mit.edu>
To:       Linux-Development@senator-bedfellow.mit.edu
Reply-To: Linux-Development@senator-bedfellow.mit.edu
Date:     Sun, 21 Nov 93 20:13:12 EST
Subject:  Linux-Development Digest #246

Linux-Development Digest #246, Volume #1         Sun, 21 Nov 93 20:13:12 EST

Contents:
  Re: 4.3 BSD sendmsg/recvmsg (Matthias Urlichs)
  Re: How many BogoMips on a Pentium? (Mark A. Davis)
  Re: Some ideas and reasons for a more modular kernel. (Ulrich Karl)
  Re: Don't use Motif for free sw: it now requires runtime royalties! (Matt Ranney)
  Re: WANT Slackware for 5.25 disks (Mark Buckaway)
  Re: TAMU X INSTALL (Patrick J. Volkerding)
  Help with TVGA9000a Card Xconfig (Kevin Coutinho - ACPS/F93)
  Writing a REAL-TIME program/device driver. (Paul Greenwood)
  Re: Mounting floppy: Solaris fs? (Andreas Klemm)
  Re: Don't use Motif for free sw: it now requires runtime royalties! (Axel Boldt)
  Re: Kernel output to /dev/tty0 (Sander van Malssen)
  Re: Don't use Motif for free sw: it now requires runtime royalties! (Amancio Hasty Jr)
  Re: Some ideas and reasons for a more modular kernel. (Zeyd M. Ben-Halim)

----------------------------------------------------------------------------

From: urlichs@smurf.sub.org (Matthias Urlichs)
Subject: Re: 4.3 BSD sendmsg/recvmsg
Date: 21 Nov 1993 11:40:23 +0100

In comp.os.linux.development, article <2c5pr1$kvv@jacobs.jacobs.mn.org>,
  merlyn@jacobs.jacobs.mn.org (Doug McIntyre) writes:
> 
> I'd be interested in some work arounds for these system calls if anybody
> has done something like that. (Or for them to be implemented in the 
> kernel with lib stubs would be really great :). I need them as well.. 
> 
You might want to use the library code for readv()/writev().
Basically, you grab the iovec, allocate a buffer, copy the stuff if you're
sending, call recvfrom()/sendto(), copy the stuff if you're receiving,
free the buffer, and return.

All of this is really ugly, and somebody should implement real kernel 
readv()/writev(). I might do it once PL14 is out; it's not really
difficult to do, just a lot of work for which I don't really have
time. :-/

-- 
There you go man,
Keep as cool as you can.
It riles them to believe that you perceive the web they weave.
Keep on being free!
-- 
Matthias Urlichs        \ XLink-POP Nürnberg   | EMail: urlichs@smurf.sub.org
Schleiermacherstraße 12  \  Unix+Linux+Mac     | Phone: ...please use email.
90491 Nürnberg (Germany)  \   Consulting+Networking+Programming+etc'ing      42

------------------------------

From: mark@taylor.wyvern.com (Mark A. Davis)
Subject: Re: How many BogoMips on a Pentium?
Date: Sun, 21 Nov 1993 16:11:14 GMT

root@jacobs.mn.org (Mike Horwath) writes:

>I tested a Pentium for a week at my job.

>I didn't write down the bogomips cause it wasn't worthwhile to do this,
>since it is just a timer setup routine for some devices (QIC-80 come to
>mind).

>       486-DX50, 8 megs RAM, 256K cache, WD IDE drives (340, 170)
>       Pentium, 8 megs RAM, 512K cache, WD IDE drive (170)

>My conclusion:  It was fast, but not worth the extra cash to spend on
>       it.  The concurrent compile was the best I could do at multiple

It is highly unlikely that you were using a TRUE Pentium machine, with 64
bit external access to memory (which is also laid out in 64 bits)......
As I said once before, the Pentium is little improvement if shoved in a
typical clone motherboard of today.....
-- 
  /--------------------------------------------------------------------------\
  | Mark A. Davis    | Lake Taylor Hospital | Norfolk, VA (804)-461-5001x431 |
  | Sys.Administrator|  Computer Services   | mark@taylor.wyvern.com   .uucp |
  \--------------------------------------------------------------------------/

------------------------------

From: uli@ulk.rmt.sub.de (Ulrich Karl)
Subject: Re: Some ideas and reasons for a more modular kernel.
Date: Fri, 19 Nov 1993 18:31:29 GMT

dok423@cvx12.inet.dkfz-heidelberg.de (Andrew Martin) writes:

>This all sounds suspiciously like the way the AmigaDOS operating system
>does things. Why doesn't more of the serious programming world start
>to realise what a superb machine and OS this is rather than thinking
>of the Amiga as a games machine?? :-( (Or a video workstation...)
What do you want to say? Throw away your linux PCs, buy AMIGA machines?
Perhaps it's a good design, but many linux user have to use a PC for their
daily work (with DOS, Windows or other ugly things running on them) - they
are glad to have a free unix on another partition. Why (especially in Germany)
do so many AMIGA users write articles about a 68000 based linux if they have
perfect machines?

Ciao, Ulrich
-- 
__________________________________________________________________________
Ulrich Karl                                            uli@ulk.rmt.sub.org
06131/685631                                       Ulrich_Karl@wi2.maus.de

------------------------------

Crossposted-To: comp.infosystems.www,comp.windows.x,comp.windows.x.i386unix,comp.windows.x.motif,gnu.misc.discuss,comp.sources.d
From: mjr@syl.dl.nec.com (Matt Ranney)
Subject: Re: Don't use Motif for free sw: it now requires runtime royalties!
Date: Sun, 21 Nov 1993 19:49:17 GMT

badger@phylo.life.uiuc.edu (Jonathan Badger) writes:

>Er, haven't people seen Athena 3D? Set the background to dark blue, as I do,
>and you can make a program with Athena Widgets look just like Motif. (I'm 
>writing this from a copy of Seyon running under Linux, and the buttons are 
>3D and "push in" when pressed.

That adds some 3D-ish stuff to it yes, but its a far cry from Motif.
-- 
Matt Ranney -  mjr@syl.dl.nec.com
  "You know, I don't think theres a man, woman, or child alive today
   who doesn't enjoy a lovely beverage."  -DL

------------------------------

From: mark@datasoft.com (Mark Buckaway)
Subject: Re: WANT Slackware for 5.25 disks
Date: Wed, 17 Nov 1993 03:44:36 GMT

a cute boy!! (pschen@Winkie.Oz.nthu.edu.tw) wrote:

: Hello:
:       Is there Slackware version for 5.25 disks?
:      I very need it.

A 3-1/2" drive is only about $60-70CAN. Being that you are in Taiwan where
alot of these things come from, it should be much cheaper.

The Slackware disks are designed for 3-1/2 and will not fit on a 5-1/4
disk. According to the readme's the author may release a 5-1/4 in the
future (read never).

Mark
--
==============================================================================
Mark Buckaway           | root@datasoft.com         |  DataSoft Communications
DataSoft Communications | uunorth!datasoft!root     |  62 Rock Fernway
System Administrator    | Voice: +1 416 756 4497    |  Willowdale, ON M2J 4N5
==============================================================================
    "UNIX and OS/2 are operating systems. Windows is a shell, and
                         DOS is an boot virus"
==============================================================================

------------------------------

Subject: Re: TAMU X INSTALL
From: volkerdi@mhd1.moorhead.msus.edu (Patrick J. Volkerding)
Date: 21 Nov 93 14:21:22 -0600

In article <2cnkl9$3il@winx03.informatik.uni-wuerzburg.de> hohndel@informatik.uni-wuerzburg.de (Dirk Hohndel) writes:
>
>The problem with the Xconfig file this thread is about, is that you cannot
>use your calculator on the modes therein, as it uses 1 2 3 ... for clock
>names so that you don't know which clocks really are used.

It's not like you *couldn't* know the clocks you're using if you wanted to.
If you look at the order in which the clocks are detected by the server,
these are the same clocks that get numbered, 1, 2, 3, etc. Now, if you go
down below and cut out modes on the Modes line that use clocks that you
feel are too high, how unsafe could cycling through really be?

>People blindly cycling through the modes risk their monitor and their
>graphic cards. The fun part is, that tou may find a mode that looks nice and
>stable, and running this mode for a week will kill your card and your
>monitor. This is not theoretical bla bla, I can prove that this is true.

I asked the net whether anyone knew of a real case where this had happened.
Until we hear of one, it is "theoretical", don't you think? Right now I
have zero reports of problems. (and counting :^)

If you use it, it's entirely at you own risk. However, until I hear real
reports of damage resulting from THIS file (and not from overclocking
while testing an alpha XFree version WITHOUT this file) I'll continue to
consider the dangers of this system to be highly overrated.

I mean really, this is just about the only thing I haven't gotten a bug
report on. It's been included in TAMU since XFree86 1.1, and in
Slackware since June. If it was really frying monitors all over the planet,
don't you think we would have heard by now?

---
Patrick Volkerding
volkerdi@mhd1.moorhead.msus.edu

------------------------------

From: kcoutinh@acs.ryerson.ca (Kevin Coutinho - ACPS/F93)
Subject: Help with TVGA9000a Card Xconfig
Date: 21 Nov 1993 20:25:35 GMT

Hi,             
        I've got a TVGA 9000a, SVGA card and was having alot of problems configuring it with  X.  It's got 512K Ram and I don't think it's expandable.  Does anyone have or know how I'd go about configuring it?

Thanks

Kevin


------------------------------

From: pablo@austin.ibm.com (Paul Greenwood)
Subject: Writing a REAL-TIME program/device driver.
Date: Sun, 21 Nov 1993 21:08:36 GMT


Does anyone have any experience writing "real-time" programs or device drivers
under Linux?  I need to write a device-driver or application that operates on the
hardware level.  I need ALL the system resources while running certain routines
in my code.  It would be unacceptable for a context switch to occur.  Please
respond if you could give me some information on how to do this.

Thanks a million.....!!!!!



-- 
            -- Paul Greenwood --  (pablo@netmail.austin.ibm.com)

        "You know, it's at times like this when I'm trapped in a Vogon
airlock with a man from Betelgeuse and about to die of asphyxiation in

------------------------------

From: andreas@knobel.knirsch.de (Andreas Klemm)
Subject: Re: Mounting floppy: Solaris fs?
Date: 21 Nov 1993 21:10:22 -0000

bilan@cps.msu.edu (Thomas J Bilan) writes:

>I am despirately looking for a fs patch so that I can mount floppies 
>formatted on a Sun Sparc 10 (Solaris 2.2) or SVR4.  Has anyone been
>working on this?

You are speaking of floppies (that are of course formatted '-)
and have a ufs (berkeley fast filesystem) on it ?

As far as I know there are no activities on porting ufs to linux.
The reason is the AT&T lawsuit ...
-- 
Andreas Klemm                 /\/\____ Wiechers & Partner Datentechnik GmbH 
andreas@knobel.knirsch.de ___/\/\/     andreas@sunny.wup.de (Unix Support)

------------------------------

From: boldt@emile.math.ucsb.edu (Axel Boldt)
Crossposted-To: comp.infosystems.www,comp.windows.x,comp.windows.x.i386unix,comp.windows.x.motif,gnu.misc.discuss,comp.sources.d
Subject: Re: Don't use Motif for free sw: it now requires runtime royalties!
Date: 21 Nov 1993 22:14:53 GMT

In article <CGr25w.9vA@news.cis.umn.edu> ehhchi@maroon.tc.umn.edu (Ed H. Chi) writes:

>What I don't understand is:
>Why didn't they use tk/tcl toolkit?  It has the ease of Motif programming,
>and it is free!
> I vote tk/tcl to be the toolkit of the choice.  If you have never looked
>at tk/tcl, it is the time NOW.

I agree wholeheartedly. It's also important to mention that tk gives
you an interpreted language, and modifications to the client become
almost trivial.

> O'Reilly will be coming out with a tc/tkl Book in the early '94 (it is
>written by a professor at Brekeley whose name has escaped me.)  I have
>seen a draft of the book, and this book is *good*.
> Is there any chance for Mosiac to be rewritten in tc/tkl??  :)  <I know it
>probably won't happen, but it would be a step in the right direction
>IMHO.>

Been done. Check out tkWWW. Location is in the WWW-FAQ, I guess.

Axel.

------------------------------

From: svm@kozmix.hacktic.nl (Sander van Malssen)
Subject: Re: Kernel output to /dev/tty0
Date: Sun, 21 Nov 1993 18:11:26 GMT
Reply-To: svm@kozmix.hacktic.nl

In article <2cikbd$4aa@smurf.sub.org>,
Matthias Urlichs <urlichs@smurf.sub.org> wrote:

> Uhh... don't. If the output is crucial, it should go to the active
> VT because you might not be able to switch consoles afterwards and
> because it might be so important that seeing it two hours later when
> you happen to look at the console output again is insufficient.
> 
> And if it's unimportant, there's a very good method to deal with the
> stuff -- syslog. The kernel now has a way to mark the priority of
> these messages and you can control what's printed to the console with 
> sys_syslog(8,NULL,prio) (0 <= prio <= 8).
> 
> The priority of these messages (the default is KERN_INFO) is OK,
> all you have to do is to make sure they are only sent to the kernel
> syslog, not to the console.

That's right, but I think it would be useful if all kernel developers
would re-examine their printk's -- currently only panic() uses
priority 1 and anything else uses the default log level. This makes
things like shift-scroll_lock etc. to see what's going on if some
run-away process causes the kernel to thrash rather pointless.

The way I have set up things here is that any kernel message with
priority < 6 is sent to the screen, and I patched the kernel so that
show_state(), show_mem() and show_ptregs() use priority 5 (see patch
below).

Sander


---cut here---

--- linux/kernel/sched.c.~1~    Thu Nov 18 03:05:01 1993
+++ linux/kernel/sched.c        Thu Nov 18 21:48:02 1993
@@ -689,35 +689,35 @@
 {
        static char * stat_nam[] = { "R", "S", "D", "Z", "T", "W" };
 
-       printk("%-8s %3d ", p->comm, (p == current) ? -nr : nr);
+       printk("<5>%-8s %3d ", p->comm, (p == current) ? -nr : nr);
        if (((unsigned) p->state) < sizeof(stat_nam)/sizeof(char *))
                printk(stat_nam[p->state]);
        else
-               printk(" ");
+               printk("<5> ");
        /* this prints bogus values for the current process */
-       printk(" %08X ", ((long *)p->tss.esp)[2]);
-       printk("%5d %5d %6d ",
+       printk("<5> %08X ", ((long *)p->tss.esp)[2]);
+       printk("<5>%5d %5d %6d ",
                p->tss.esp - p->kernel_stack_page, p->pid, p->p_pptr->pid);
        if (p->p_cptr)
-               printk("%5d ", p->p_cptr->pid);
+               printk("<5>%5d ", p->p_cptr->pid);
        else
-               printk("      ");
+               printk("<5>      ");
        if (p->p_ysptr)
-               printk("%7d", p->p_ysptr->pid);
+               printk("<5>%7d", p->p_ysptr->pid);
        else
-               printk("       ");
+               printk("<5>       ");
        if (p->p_osptr)
-               printk(" %5d\n", p->p_osptr->pid);
+               printk("<5> %5d\n", p->p_osptr->pid);
        else
-               printk("\n");
+               printk("<5>\n");
 }
 
 void show_state(void)
 {
        int i;
 
-       printk("                         free                        sibling\n");
-       printk("  task             PC    stack   pid father child younger older\n");
+       printk("<5>                         free                        sibling\n");
+       printk("<5>  task             PC    stack   pid father child younger older\n");
        for (i=0 ; i<NR_TASKS ; i++)
                if (task[i])
                        show_task(i,task[i]);
--- linux/mm/memory.c.~1~       Fri Oct 29 13:14:54 1993
+++ linux/mm/memory.c   Thu Nov 18 21:45:54 1993
@@ -983,13 +983,13 @@
        int i,free = 0,total = 0,reserved = 0;
        int shared = 0;
 
-       printk("Mem-info:\n");
-       printk("Free pages:      %6dkB\n",nr_free_pages<<(PAGE_SHIFT-10));
-       printk("Secondary pages: %6dkB\n",nr_secondary_pages<<(PAGE_SHIFT-10));
-       printk("Free swap:       %6dkB\n",nr_swap_pages<<(PAGE_SHIFT-10));
-       printk("Buffer memory:   %6dkB\n",buffermem>>10);
-       printk("Buffer heads:    %6d\n",nr_buffer_heads);
-       printk("Buffer blocks:   %6d\n",nr_buffers);
+       printk("<5>Mem-info:\n");
+       printk("<5>Free pages:      %6dkB\n",nr_free_pages<<(PAGE_SHIFT-10));
+       printk("<5>Secondary pages: %6dkB\n",nr_secondary_pages<<(PAGE_SHIFT-10));
+       printk("<5>Free swap:       %6dkB\n",nr_swap_pages<<(PAGE_SHIFT-10));
+       printk("<5>Buffer memory:   %6dkB\n",buffermem>>10);
+       printk("<5>Buffer heads:    %6d\n",nr_buffer_heads);
+       printk("<5>Buffer blocks:   %6d\n",nr_buffers);
        i = high_memory >> PAGE_SHIFT;
        while (i-- > 0) {
                total++;
@@ -1000,10 +1000,10 @@
                else
                        shared += mem_map[i]-1;
        }
-       printk("%d pages of RAM\n",total);
-       printk("%d free pages\n",free);
-       printk("%d reserved pages\n",reserved);
-       printk("%d pages shared\n",shared);
+       printk("<5>%d pages of RAM\n",total);
+       printk("<5>%d free pages\n",free);
+       printk("<5>%d reserved pages\n",reserved);
+       printk("<5>%d pages shared\n",shared);
 }
 
 /*
--- linux/drivers/char/keyboard.c.~1~   Sun Oct  3 17:34:46 1993
+++ linux/drivers/char/keyboard.c       Thu Nov 18 21:51:10 1993
@@ -341,16 +341,16 @@
 {
        if (!pt_regs)
                return;
-       printk("\n");
-       printk("EIP: %04x:%08x",0xffff & pt_regs->cs,pt_regs->eip);
+       printk("<5>\n");
+       printk("<5>EIP: %04x:%08x",0xffff & pt_regs->cs,pt_regs->eip);
        if (pt_regs->cs & 3)
-               printk(" ESP: %04x:%08x",0xffff & pt_regs->ss,pt_regs->esp);
-       printk(" EFLAGS: %08x\n",pt_regs->eflags);
-       printk("EAX: %08x EBX: %08x ECX: %08x EDX: %08x\n",
+               printk("<5> ESP: %04x:%08x",0xffff & pt_regs->ss,pt_regs->esp);
+       printk("<5> EFLAGS: %08x\n",pt_regs->eflags);
+       printk("<5>EAX: %08x EBX: %08x ECX: %08x EDX: %08x\n",
                pt_regs->orig_eax,pt_regs->ebx,pt_regs->ecx,pt_regs->edx);
-       printk("ESI: %08x EDI: %08x EBP: %08x",
+       printk("<5>ESI: %08x EDI: %08x EBP: %08x",
                pt_regs->esi, pt_regs->edi, pt_regs->ebp);
-       printk(" DS: %04x ES: %04x FS: %04x GS: %04x\n",
+       printk("<5> DS: %04x ES: %04x FS: %04x GS: %04x\n",
                0xffff & pt_regs->ds,0xffff & pt_regs->es,
                0xffff & pt_regs->fs,0xffff & pt_regs->gs);
 }

---cut here---
-- 
Sander van Malssen
svm@kozmix.hacktic.nl

------------------------------

Crossposted-To: comp.infosystems.www,comp.windows.x,comp.windows.x.i386unix,comp.windows.x.motif,gnu.misc.discuss,comp.sources.d
From: hasty@netcom.com (Amancio Hasty Jr)
Subject: Re: Don't use Motif for free sw: it now requires runtime royalties!
Date: Mon, 22 Nov 1993 00:38:03 GMT

In article <BOLDT.93Nov21221453@emile.math.ucsb.edu> boldt@emile.math.ucsb.edu (Axel Boldt) writes:
>In article <CGr25w.9vA@news.cis.umn.edu> ehhchi@maroon.tc.umn.edu (Ed H. Chi) writes:
>
>>What I don't understand is:
>>Why didn't they use tk/tcl toolkit?  It has the ease of Motif programming,
>>and it is free!
>> I vote tk/tcl to be the toolkit of the choice.  If you have never looked
>>at tk/tcl, it is the time NOW.
>
>I agree wholeheartedly. It's also important to mention that tk gives
>you an interpreted language, and modifications to the client become
>almost trivial.
>
>> O'Reilly will be coming out with a tc/tkl Book in the early '94 (it is
>>written by a professor at Brekeley whose name has escaped me.)  I have
>>seen a draft of the book, and this book is *good*.
>> Is there any chance for Mosiac to be rewritten in tc/tkl??  :)  <I know it
>>probably won't happen, but it would be a step in the right direction
>>IMHO.>
>
>Been done. Check out tkWWW. Location is in the WWW-FAQ, I guess.
>
>Axel.

Checkout any tcl/tk ftp site for a postscript version of the forthcoming
coming book on TCL/TK. I printed a copy of it at work and we used 
it a lot :-)

        Amancio


-- 
This message brought to you by the letters X and S and the number 3
Amancio Hasty           |  
Home: (415) 495-3046    |  ftp-site depository of all my work:
e-mail hasty@netcom.com |  sunvis.rtpnc.epa.gov:/pub/386bsd/X

------------------------------

From: zmbenhal@netcom.com (Zeyd M. Ben-Halim)
Subject: Re: Some ideas and reasons for a more modular kernel.
Date: Mon, 22 Nov 1993 00:39:26 GMT

In article <CGrCFr.C7@frobozz.sccsi.com>,
Kevin Brown <kevin@frobozz.sccsi.com> wrote:
>In article <2cgu5u$90q@access1.speedway.net> pats@speedway.net (Pat Spinler) writes:
>[...]
>>There are at least a few systems out there which seem to have
>>implemented loadable drivers successfully.  Can anyone comment on
>>QNX's or MACH's loadable devices ?  
>
>I don't know about those, but a loadable device drivers package does exist
>for Linux.  It's called "modules" and can be found on tsx-11.mit.edu in
>the directory /pub/linux/ALPHA/QIC-80.

BUT 'modules' is a set of patches to 0.99.10 and will not fit in newer
kernels. What it needs is an automated way of generating a kernel symbol
map. I was hoping Linus will get around to incorporating into the kernel
proper or providing an alternative.

A loadable-driver feature will make development of drivers much easier.
No need to compile and link the entire kernel. You load and unload drivers
at run-time.

>-- 
>Kevin Brown                                    kevin@frobozz.sccsi.com
>This is your .signature virus: < begin 644 .signature (9V]T8VAA(0K0z end >
>           This is your .signature virus on drugs: <>
>                       Any questions?


-- 
---
Zeyd M. Ben-Halim       zmbenhal@netcom.com
10479 1/4 Santa Monica Blvd, LA, CA, 90025 (310) 470-0281

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Development-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.development) via:

    Internet: Linux-Development@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Development Digest
******************************
