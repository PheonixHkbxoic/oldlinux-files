From:     Digestifier <Linux-Development-Request@senator-bedfellow.mit.edu>
To:       Linux-Development@senator-bedfellow.mit.edu
Reply-To: Linux-Development@senator-bedfellow.mit.edu
Date:     Wed, 29 Sep 93 21:13:13 EDT
Subject:  Linux-Development Digest #135

Linux-Development Digest #135, Volume #1         Wed, 29 Sep 93 21:13:13 EDT

Contents:
  Re: Lpmud on Linux. Alarm Clock. (Bas de Bakker)
  Re: Pascal compiler. (Alan Cox)
  Lpmud on Linux. Alarm Clock. Summary of answers (Wayne Hodgen)
  Re: linux scheduler alternatives??? (Ken Sorensen)
  ftape & 99.13 (Terror on Tape)
  Re: ASM I/O (Pascal Haible)
  Re: Bug in Xfree with tvga9000? (-* FireHawk *-)
  Re: No smart serial boards??? (Mark A. Horton)
  Adaptec AHA-1510 SCSI controller supported yet? (Stuart J. Barr)
  GPIB and ADC card controllers (Alastair McKinstry)
  bind 4.9 ported? (J. Douglas Smith)
  Re: Driver for 3c507 anyone? (Heribert Dahms)
  Re: No smart serial boards??? (David Willmore)
  gcc 2.4.5 cross-compiler for linux. (Marc E. Fiuczynski)
  SCSI (Nan He)
  Re: gcc 2.4.5 cross-compiler for linux. (Craig)

----------------------------------------------------------------------------

Subject: Re: Lpmud on Linux. Alarm Clock.
From: bas@phys.uva.nl (Bas de Bakker)
Date: 28 Sep 1993 07:18:22 GMT

>>>>> On 27 Sep 1993 12:55:59 GMT, hodgen@ozzy.uni-koblenz.de (Wayne
>>>>> Hodgen) said:

> I'm having problems getting the driver for our Lpmud working under
> Linux. On a Sun, no problem. Under Linux (Slackware 1.0.2) it keeps
> crashing with an Alarm clock.

Typical behaviour of a program written to use BSD signal(), but using
POSIX signal().  When using plain signal(), as opposed to the more
elaborate sigaction(), the POSIX signal handlers have to be reset
after use.

You can get the BSD behaviour by compiling with
-D__USE_BSD_SIGNALS
(Hope I spelled that correctly, otherwise look in the various signal.h
include files for it.)

Bas.

------------------------------

From: iiitac@swan.pyr (Alan Cox)
Subject: Re: Pascal compiler.
Date: Wed, 29 Sep 1993 09:27:52 GMT

In article <287tc9$pjq@mtu.edu> sjkangas@major.cs.mtu.edu (STEVEN J. KANGAS) writes:
>       Has anyone ported a pascal compiler to linux yet?  It seems like
>all the compilers (p4, etc.) I can find are all written in pascal.  If I
>had a pascal compiler to compiler the compiler I wouldn't need a stupid
>compiler now would I?  Any info would be appreciated.

It is normal for a compiler to be written in its own language. Gcc is written
in gcc for example. What you should do is get the binary of p4 or whatever
and change it so that it runs on the machine it currently works on (the one
you have the binary for) and produces output that will run on Linux. When
that finally works you compile it with itself and you get a linux edition.

Alan

------------------------------

From: hodgen@ozzy.uni-koblenz.de (Wayne Hodgen)
Subject: Lpmud on Linux. Alarm Clock. Summary of answers
Date: 29 Sep 1993 09:42:49 GMT


First, thanx to the following for answering my post.

Paul, Ahmon Dancy, Robert Sanders, Alan Cox, Stephen Harris and Craig T Manske.

The answer was, the Mud driver wanted BSD type signals but Linux uses SYS V
type. The clearest solution (from Stephen Harris).

> On the "cc" lines for the .o files add the following:
> -I/usr/include/bsd --include /usr/include/bsd/bsd.h
> (general this is part of the CFLAGS line)
> 
> This will tell the Linux compiler to use bsd style behaviour in a lot of
> things (and is a useful trick to remember).
> 
> and on the final compile (sometimes called LDFLAGS) you should add a -lbsd
> to ensure the bsd library is used.
> 
> Actually in this one specific case, -D_USE_BSD_SIGNALS might work, but the
> above is the cleanest way.

Thanx again guys. The driver works now and I can program at home. :-)
-- 
Wayne Hodgen   | hodgen@informatik.uni-koblenz.de | Have you heard about the
Uni Koblenz,   | or Fight-o-net 2:245/5600.11     | riscy project? A GPL based
Rheinau 3-4,   | Voice: +49 261 9119-645          | design for an R4000 PC MB.
56075 Koblenz. | Fax:   +49 261 9119-499          | MIPS, Power to the people!

------------------------------

From: ksore@atr-14 (Ken Sorensen)
Subject: Re: linux scheduler alternatives???
Date: 28 Sep 93 15:30:47 GMT

zloebl@piis10.joanneum.ac.at (Klaus ZLOEBL) writes:
: I found some time last weekend and read the khg
: after looking around in the kernel sources i had to notice
: that i don't fine the place where the timeout timer is set.
: So could somebody be so nice and tell me where to find it.
: 
: Also i'd like to write a new scheduler (multilevel feedback queue)

I, myself was looking at the KHG, and I also noticed a note that
someone by the name of Jim Wissner had developed a different
scheduler. The email address, however was invalid (or our system
didn't recognize the host or whatnot). I wanted to toy with the
kernel as well.

Does anyone know where I could get hold of Jim's work? I checked
ftp sites all over the world to no avail.

: 
: is there a new khg ? (i haven't seen one)
: 
: What algorithm is use for paging?
: 
: I have played with osp (an operating system simulator), but
: a real OS would be an even better playground!
: 

--
Ken Sorensen
ksore@atr-2s.hac.com

------------------------------

Crossposted-To: comp.os.linux.help
From: jmadison@etsun.tech.iupui.edu (Terror on Tape)
Subject: ftape & 99.13
Date: Wed, 29 Sep 1993 01:33:46 GMT

well, i tried to apply the diffs for the ftape 096 (i believe,
whatever the latest version is) modules, and i couldn't do it. did
patch -p0 < [name of the diff file]
and it just said "looks like a unified diff" and stopped.  i guess
it didn't matter much, 'cause when i applied them successfully to
my pl12 kernel & compiled, the ftape sources didn't compile correctly,
but that's a subject of another help.  My ppoint: when will there
be an ftape distribution that works?

-jonM
-- 
jmadison@etsun.tech.iupui.edu     <><
DJ.AllStar
get Linux OS, it's dope! it's free! it's UNIX!

------------------------------

From: haible@izfm.uni-stuttgart.de (Pascal Haible)
Subject: Re: ASM I/O
Date: 29 Sep 1993 12:02:24 GMT

In article <1993Sep28.172942.10493@cybernet.cse.fau.edu> mahesh@cybernet.cse.fau.edu (Mahesh Neelakanta) writes:
>In article <1993Sep28.161911.27630@ugle.unit.no> hugogu@slagg.met.sintef.no (Hugo Eide Gunnarsen) writes:
>>I tried to change the code for inb/outb, but it failed to
>>work.
>>
>>SO it anybody know how to read/write a word (16b) from/to a
>>I/O port, pleas tell me.
>>
>Here is what I use. I got this from both the XFree86 (1.3 I think) sources 
>and the [s]vgalib packages. Linux provides two ways (that I know of) for
>I/O privs..the iopl() command and the ioctl method (KDADDIO). The former
>is quick-and-dirty but is more dangerous since it will allow access to
>all io ports. 
>
[ inlines deleted ]

Note that the ioctl method will only work for video ports!!

linux/kernel/chr_drv/vt.c:
/*
 * these are the valid i/o ports we're allowed to change. they map all the
 * video ports
 */
#define GPFIRST 0x3b4
#define GPLAST 0x3df
#define GPNUM (GPLAST - GPFIRST + 1)
[...]
        case KDADDIO:
        case KDDELIO:
                /*
                 * KDADDIO and KDDELIO may be able to add ports beyond what
                 * we reject here, but to be safe...
                 */
                if (arg < GPFIRST || arg > GPLAST)
                        return -EINVAL;
                return sys_ioperm(arg, 1, (cmd == KDADDIO)) ? -ENXIO : 0;

        case KDENABIO:
        case KDDISABIO:
                return sys_ioperm(GPFIRST, GPNUM,
                                  (cmd == KDENABIO)) ? -ENXIO : 0;

But I think there is a ioperm() libc function that works like sys_ioperm().


------------------------------

From: firehawk@argo.unm.edu (-* FireHawk *-)
Subject: Re: Bug in Xfree with tvga9000?
Date: 29 Sep 1993 14:23:23 GMT

In article <CE2Jpw.8oM@cs.vu.nl>, Liefting W <wlieftin@cs.vu.nl> wrote:
:
:640x480x256color no problem, but when I Ctrl-Alt-+ to 800x600x256color,
:the screen gets messed up. But... not like it would when I had the wrong 
:sync numbers. 

I've got the same video card, but I'm not sure what's going on here. I can get 
800x600x256 mode to come up on mine. The only problem I have is with a few
annoying horizontal lines near the top of the screen. I've tried messing with
the horizontal sync numbers with no luck.   

:The screen _IS_ stable, but black spickles get all over it. And when I switch
:back to 640x480, they stay so. I have to refresh the screen to get them away.

Same thing happens here. However, I just keep the thing in 800x600 mode and
don't worry about switching back and forth. =) I think this 'sprinkes' problem 
is a bug in the server.
  
:Also, after stopping X, some letters (in normal screen mode) seem to have some
:parts missing.

You might want to grab and compile svgalib from sunsite.unc.edu. In that
package, there is a script called 'runx' which will save the current text
font before running 'startx' and restore it afterwards (Note: You need to
compile the two executables it needs as well - also included in the package).

Hope this helps!

------------------------------

From: mahmha@crl.com (Mark A. Horton)
Subject: Re: No smart serial boards???
Date: 29 Sep 1993 08:16:10 -0700

Bill Broadley (broadley@neurocog.lrdc.pitt.edu) wrote:
: > *ONE* line at 38400 ( modem on V.32bis TUUCP 1.04 g(7,1024) )
: > uses 3.x % CPU on my noname 486DX33 with 8 MB and a 16555 uart.

: I would suspect that 4 lines at 38,400 would be less then 4 * this,
: during a single overhead of an interupt, all 4 ports can have their
: buffers emptied.

: Even 8 ports at 38,400 would probably be reasonable, if all 8 transfered at
: full speed they probably would lose some bandwidth, but normally that
: wouldn't be a problem, unless it's basically a file server.

: --
: Bill                                  1st>    Broadley@neurocog.lrdc.pitt.edu
: Broadley@schneider3.lrdc.pitt.edu <2nd        3rd>                 Broadley+@pitt.edu
: Linux is great.         Bike to live, live to bike.                      PGP-ok
        I'm probably missing something here guys, but if one 38400 baud
        transfer is consuming 3.x% cpu (let us say, worst case 4%)
        of this particular instance of cpu, that is still less than
        (for 8 concurrent lines at 38400 baud transfer rate continuous)
        32% of the total cpu.  The 16550A is buffered (16 bytes, I 
        believe), therefore dropped or missed data should not be a
        factor.  What is consuming the other available 68% of the
        cpu time?  It seems to me that this is not an unreasonable 
        demand upon cpu time.  Whilst many of the intelligent i/o
        cards perform admirably at high speeds, they too have their
        aggregate data rate limits.  It just seems to me that if one
        has enough cpu left over to insure adequate performance even
        with the amount of time spent servicing serial interrupts,
        then the less expensive option would be preferable.  I used
        to use a $1300. Consensys 8 port card on my AT&T SVr4 system
        that I junked when I switched to Linux (far more reliable) and
        had to look for alternatives for all my serial lines and devices.
        I replaced it with two $110.00 STB4COM boards and have had far
        less trouble with no discernable performance loss.  An $1100.00
        price differential goes a long way towards additional main memory
        which I believe solves a great many more performance problems -
        Remember that *no one* runs faster than the kernel - if it's
        paging, everybody waits!
                My two cents worth; Peace.
--
Mark A. Horton                          mah@ka4ybr.com (or here) 
P.O.Box 747 Decatur GA US 30031-0747      ICBM: 33 45 N / 084 16 W
+1.404.371.0291                         Cruise: 33 45 30 N / 084 16 50 W
   "We may note that, for the purposes of these experiments, the symbol 
                "=" has the meaning "may be confused with."  

------------------------------

From: nbarrs@libra.hasler.ascom.ch (Stuart J. Barr)
Subject: Adaptec AHA-1510 SCSI controller supported yet?
Date: Wed, 29 Sep 1993 16:09:30 GMT

I have been looking at investing in a cd-rom drive, deciding to go
got the Toshiba XM-3401B, and the question of a SCSI controller came
up.  I was almost buying the Adaptec AHA-1510, and then I remembered
about my favourite OS :-), so checked out the SCSI-HOWTO to see if
it's supported.  However, (as of 14Sept93 version), it is stated that
it would work "with a little work" and "minor modifications" to the 152x
drivers.
 
Can anybody shed any light on the current status of the driver?  Would
I be better off opting for the AHA-154x?
 
Thanks for any info,
 
Stuart.
    ___   ____  __              Stuart J. Barr
   (_      /   /__) __, ,_ ,_   Ascom Hasler AG, Berne, Switzerland  
  ___). \_/.  /__) (_/ /  /     Email: nbarrs@hasler.ascom.ch
                                Phone: (+41) 031 999 16 04


------------------------------

From: amck@maths.tcd.ie (Alastair McKinstry)
Subject: GPIB and ADC card controllers
Date: 29 Sep 1993 17:52:21 +0100

Somebody posted an article looking for info on controllers for GPIB cards
and ADC cards a while (about a week) ago. They said they would post a 
follow-up; sorry I lost the original article, so I am broadcasting this
reply to them.

I don't know of any drivers at the moment, but would like one for the
National Instruments GPIB card; if none exist I will set about writing
one :-)

Please reply if you know any further details.

                Thanks,
                        Alastair McKinstry.

-- 
                                        -^-
                                         |  Alastair McKinstry
(amck@maths.tcd.ie)


------------------------------

From: jdsmith@novell.com (J. Douglas Smith)
Subject: bind 4.9 ported?
Reply-To: jdsmith@novell.com
Date: Wed, 29 Sep 1993 17:58:50 GMT

Has anyone ported BIND 4.9?  I would be very interested if so.

--
Doug Smith                              Internet: jdsmith@novell.com
Productivity Enhancements Group         Phone:    (801) 429-7324
Novell, INC.

------------------------------

From: DAHMS@ifk20.mach.uni-karlsruhe.de (Heribert Dahms)
Subject: Re: Driver for 3c507 anyone?
Date: 29 Sep 1993 20:55:09 GMT

In <9760@uswnvg.uswnvg.com> sstarck@uswnvg.com writes:

: Realizing that the Ethernet HOWTO contains the line:
: 
:                 3c507 --
:                         Not available at present.
: 
: I was wondering if anyone has been working on a driver for this Ethernet
: card, since my PC at work has a 3c507-TP and I'd like to put Linux on it
: and have it connected to our net.
: 
It's under construction. There's some alpha code yet.

: --
: Steve Starck                          sstarck@uswnvg.com
: Sr. Systems Administrator             
: U S WEST NewVector Group, Inc.
: (206)562-5024


Bye, Heribert (dahms@ifk20.mach.uni-karlsruhe.de)

------------------------------

From: willmore@iastate.edu (David Willmore)
Subject: Re: No smart serial boards???
Date: Wed, 29 Sep 1993 20:34:50 GMT

bill@bhhome.ci.net (Bill Heiser) writes:

>With the "standard" linux serial driver, even *one* line running
>at 38400 (14.4 modem) uses quite a bit of CPU ... so I'd had to 
>think of running *8* lines on a non-intelligent board :-)

Since the serial drivers check all devices on that IRQ when they get an IRQ,
it shouldn't matter much wether one or eight serial lines are running full
bore at 38400--even on the dumbest serial card.  Now, if the card uses seperate
IRQ's for the different ports, slap the designer!  (sorry for the pun)

>Rich, what is your system like when all of your lines are in use?

Mine runs fine with a 386/40 with two 38400 ports doing zmodem uploads.

Cheers,
David
-- 
___________________________________________________________________________
willmore@iastate.edu | "Death before dishonor" | "Better dead than greek" | 
David Willmore  | "Ever noticed how much they look like orchids? Lovely!" | 
===========================================================================

------------------------------

Crossposted-To: comp.os.linux.help
From: mef@cs.washington.edu (Marc E. Fiuczynski)
Subject: gcc 2.4.5 cross-compiler for linux.
Date: Wed, 29 Sep 93 23:29:58 GMT

Hi,

Has anyone out there successfully built a gcc 2.4.5 cross-compiler on
a sparc-sunos-411 machine. I would like to build linux 0.99.p13 on a
sparc. I believe that I have not configured it properly.  My
configuration statement is:

        ./configre --target=i386-cross-linux --host=sparc-cross-sunos411
                   --prefix=/homes/gws/mef/linux/cross
                   --local-prefix=/homes/gws/mef/linux/cross

When building the cross compiler I run into various problems.  Here is
my compile statement:

        make LANGUAGES=c LIBGCC1=libgcc1.a OLDCC=./xgcc 
then
        make LANGUAGES=c LIBGCC1=libgcc1.a OLDCC=./xgcc install

I was able to build libgcc1.a (probably not the right way, though) and
can not build libgcc2.a. Further, it seems to be linking with the
sparc's libc.so...

Do I need to build a cross-compiled version of ar, ranlib, or ld?

Please help!

Thanks,

Marc
mef@cs.washington.edu

------------------------------

From: henan@mcmail.cis.mcmaster.ca (Nan He)
Subject: SCSI
Date: Wed, 29 Sep 1993 23:18:59 GMT

Hi, dear Netter,
I need to get help from experienced people for the following problem:
I have a PC 386DX25MHz, with an IDE 82MB Seagate HD. I am going to install
a 340MB SCSI HD with Adaptec 1542c bus master controller. The configuration 
is that I use the IDE drive as the boot drive. Since the total space
is 82MB+340MB=422MB, I am going to format it to 2 part(how?), one part
is 100MB reserved for DOS5.0, while the rest is for Linux. My question
is, can I do such partition? If this is possible, is there any trouble
or tips for running both the two OS(not the same time, of course)?
Please send reply to:
  henan@mcmail.cis.mcmaster.ca

Thanks in advance for any advice!

Allen N. He





------------------------------

From: Craig.Humphrey@comp.vuw.ac.nz (Craig)
Crossposted-To: comp.os.linux.help,comp.sys.sun.wanted
Subject: Re: gcc 2.4.5 cross-compiler for linux.
Date: 30 Sep 1993 01:05:25 GMT
Reply-To: chumphre@comp.vuw.ac.nz



In article <1993Sep29.232958.4308@beaver.cs.washington.edu>, mef@cs.washington.edu (Marc E. Fiuczynski) writes:


>Has anyone out there successfully built a gcc 2.4.5 cross-compiler on
>a sparc-sunos-411 machine. I would like to build linux 0.99.p13 on a
>sparc. I believe that I have not configured it properly.  My
>configuration statement is:
>
>       ./configre --target=i386-cross-linux --host=sparc-cross-sunos411
>                  --prefix=/homes/gws/mef/linux/cross
>                  --local-prefix=/homes/gws/mef/linux/cross
>
>When building the cross compiler I run into various problems.  Here is
>my compile statement:
>
>       make LANGUAGES=c LIBGCC1=libgcc1.a OLDCC=./xgcc 
>then
>       make LANGUAGES=c LIBGCC1=libgcc1.a OLDCC=./xgcc install
>
>I was able to build libgcc1.a (probably not the right way, though) and
>can not build libgcc2.a. Further, it seems to be linking with the
>sparc's libc.so...
>
>Do I need to build a cross-compiled version of ar, ranlib, or ld?

Hi,
        I'm looking to do something similar, only I'm also after a Sun/Linux ->
i386 cross compiler.

I had Djgpp but it just ate too much disk space and was very slow.
But I have access to Linux and Sun4 machines, on which diskspace and CPU time
isn't so much of a problem.

Can anyone help me here?

Please reply via email.

Later'ish
Craig
-- 
+----------------------------------------------------------------------------+
| chumphre@comp.vuw.ac.nz               craig.humphrey@stargate.actrix.gen.nz|
| 10,000 lemmings can't be wrong        CoSysop on Stargate BBS  3:771/350   |
+----------------------------------------------------------------------------+

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Development-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.development) via:

    Internet: Linux-Development@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Development Digest
******************************
