From:     Digestifier <Linux-Development-Request@senator-bedfellow.mit.edu>
To:       Linux-Development@senator-bedfellow.mit.edu
Reply-To: Linux-Development@senator-bedfellow.mit.edu
Date:     Fri, 17 Sep 93 21:13:22 EDT
Subject:  Linux-Development Digest #106

Linux-Development Digest #106, Volume #1         Fri, 17 Sep 93 21:13:22 EDT

Contents:
  /config and system administration (David C. Niemi)
  Re: Linux Standards (was Re: Debian: a brief status report) (Mike Jagdis)
  Re: port of Linux to the upcoming PowerPC? Manual available (Hansruedi Heeb)
  Re: Let's have a prog to restore screen state! (Howlin' Bob)
  mapping high memory (Curtis Yarvin)
  Re: Anybody ever try crashme on Linux? (Diversion (Jeff Rogers))
  Re: Another multiple sector IDE driver... (Bill Broadley)
  Re: mapping high memory (Linus Torvalds)
  Re: Let's have a prog to restore screen state! (Risto Kankkunen)
  Is anyone writing PPP for linux? (Mark Kassab)
  Re: What do people think about /config? (Thomas Aaron Insel)
  Strange 'ping' behaviour (Andreas Mengel)
  Re: Please no /config. (Rebuttal) (Brandon S. Allbery)
  Re: What do people think about /config? (John Henders)

----------------------------------------------------------------------------

From: niemidc@oasis.gtefsd.com (David C. Niemi)
Subject: /config and system administration
Date: 17 Sep 1993 19:17:50 GMT
Reply-To: niemidc@oasis.gtefsd.com

It seems to me that we need a system administration menu system, with
defined interfaces to various administrative functions (e.g. add_user,
add_host).  Then multiple people can independently work on the various
parts of it.

The funny thing is that much of this seemed to be in place with SLS's
"menu" but is now broken!  What happened?

While I could certainly live with a /config area, I don't see what
it really buys you: you still have to make the same scripts to do
the same functions.  Might as well just work directly on /etc and
have some general purpose functions that can be shared between the
shell scripts that do the work (e.g. find an entry in the file,
add an entry, remove an entry, etc.) and to make backups in case
something goes awry.
---
David C. Niemi                  The U.S. Constitution may be flawed, but it's
David.Niemi@oasis.gtegsc.com      a whole lot better than what we have now.



------------------------------

From: jaggy@purplet.demon.co.uk (Mike Jagdis)
Subject: Re: Linux Standards (was Re: Debian: a brief status report)
Date: Mon, 13 Sep 1993 22:32:00 +0000

* In message <CD5Lz7.HBB@boulder.parcplace.com>, Warner Losh said:

[rshd...]

WL> It checks to see if there is a password, and if there isn't,
WL> it goes ahead and approves the command.

Ah! That would explain why it escaped the crypt() hunt :-). Does this imply 
that there is only a problem with those broken versions of SLS which, 
apprently, leave the password field blank rather than locking it in 
/etc/passwd?

WL> >And this. It's all in the Purple Distribution. I would put it on an
WL> archive
WL> >site but I'm on the end of a modem connection on which I pay the bills.
WL> So
WL> >far exactly two (2) people have shown an interest in it appearing on an
WL> >archive site so it hardly seems worth my while.

WL> Please share this with the rest of the world.  It does no good to say
WL> "I've got this great distribution, but I won't distribute
WL> it.

I never said that. In fact I *do* distribute it, particularly within the UK 
FidoNet community.

WL> If it is as good as you say it is, then it might be worth it.

I never said it was particularly good either :-). If having all these 
(essential) "features" that people keep mentioning make it "good" so be it. 
I know where the bugs are though :-).

  This distribution thread seems to have an excessively high 
manager-to-worker ratio, however since I've now had almost a whole *half 
dozen* expressions of interest from the Internet side I'll see about 
uploading it somewhere. Or at least some of it...

                                Mike  
 

------------------------------

Crossposted-To: comp.os.linux.misc
From: heeb@watson.ibm.com (Hansruedi Heeb)
Subject: Re: port of Linux to the upcoming PowerPC? Manual available
Date: Fri, 17 Sep 1993 19:21:15 GMT

In article <1993Sep16.211424.7634@iitmax.iit.edu> grzyrob@elof.acc.iit.edu (Rob Grzywinski) writes:
>With all of the work going into the development and porting of Linux
>will there be an effort to port over to the PowerPC (running on the 
>MPC601 Motorola chip) when they are released?
>

[in a previous reply that I cancelled I said the the manul was
free. This does not seem to be the case, or maybe it is only free
if you sound like a potential customer. I got it free ... :-)  ]

Just in case someone wants to get started on this: the manual
of the PowerPC 601 is available. It also contains a detailed
description of the op codes.

The part numbers are:
IBM: 52G7484 (phone 800-IBM-MIRS)
Motorola: MPC601 UM/AD
 (Motorola Literature Distribution, PO Box 20912, Phoenix, AZ 85036)
 (Motorola Ltd, European Literature Centre, 88 Tanners Dr, Blakelands,
  Milton Keynes, MK14 5BP, England)

(the two are the same, I think)

Hansruedi



------------------------------

From: gt8134b@prism.gatech.EDU (Howlin' Bob)
Subject: Re: Let's have a prog to restore screen state!
Date: 17 Sep 93 20:29:56 GMT

bsa@kf8nh.wariat.org (Brandon S. Allbery) writes:

>In article <112507@hydra.gatech.EDU> gt8134b@prism.gatech.EDU (Howlin' Bob) writes:
>>I think it's just too costly to go with this scheme.  On my localbus
>>ET4000 (on a 486/33), X is tolerably fast.  I wouldn't want it any

>Actually, SCO has an ioctl that takes an *array* of I/O ports and values.
>There's even a (slight, knowing SCO...) chance that it's standard in the
>SysV/386 world.

That's a slight optimization, but it really isn't that useful.  It only
helps if there is infrequent to a large number of ports; the more likely 
case is frequent I/O to a small to medium number of ports (and, no,
these can't be combined).

>But it still doesn't help dosemu.

Nope.  Then again, nothing can.

--
Robert Sanders
Georgia Institute of Technology, Atlanta Georgia, 30332
uucp:     ...!{decvax,hplabs,ncar,purdue,rutgers}!gatech!prism!gt8134b
Internet: gt8134b@prism.gatech.edu

------------------------------

From: curtis@viper.CS.Berkeley.EDU (Curtis Yarvin)
Crossposted-To: comp.os.linux.help
Subject: mapping high memory
Date: 17 Sep 1993 13:50:08 -0700


I'm working with a video card (Cornerstone CVC-2) that can map
its frame buffer into the extended address space.  So I put it
at 14-16 MB, which is fine because I only have 8MB, and then...
I'm having trouble mapping it into the user (X server) address
space.  mmap(/dev/mem) doesn't work.  

Is there any way I can do this from user mode?  Or do I have to
write a device driver?

Thanks,
c
curtis@cs.berkeley.edu

------------------------------

From: rogerj@aix02.ecs.rpi.edu (Diversion (Jeff Rogers))
Subject: Re: Anybody ever try crashme on Linux?
Date: 17 Sep 1993 21:11:48 GMT

mchapman@argos.eis (Michael Chapman K8/EIS1. Tel. 1662) writes:

>>Or try mounting a 1.72 meg floppy (the device is there, but the driver
>>apparantly isn't)
>>

>No problem on my system!

>(You have to modify the kernel to allocate more space to the buffer track 
>so it doesn't write the last 3 sectors on the track over something vital!!! 
>This is done in one of the assembler files).

A patch, perhaps?

Diversion

-- 
"I can see 'em                          | "Want me to create a diversion?"
    I can see 'em                       | Diversion
        Someone wake me when it's over" | rogerj@rpi.edu

------------------------------

From: broadley@neurocog.lrdc.pitt.edu (Bill Broadley)
Subject: Re: Another multiple sector IDE driver...
Date: 17 Sep 93 21:10:46 GMT

Any benchmark numbers available before/after??

Perferably bonnie.
--
Bill                                    1st>    Broadley@neurocog.lrdc.pitt.edu
Broadley@schneider3.lrdc.pitt.edu <2nd  3rd>                 Broadley+@pitt.edu
Linux is great.         Bike to live, live to bike.                      PGP-ok


------------------------------

From: torvalds@klaava.Helsinki.FI (Linus Torvalds)
Crossposted-To: comp.os.linux.help
Subject: Re: mapping high memory
Date: 18 Sep 1993 00:35:12 +0300

In article <27d7u0$pmd@viper.cs.berkeley.edu>,
Curtis Yarvin <curtis@viper.CS.Berkeley.EDU> wrote:
>
>I'm working with a video card (Cornerstone CVC-2) that can map
>its frame buffer into the extended address space.  So I put it
>at 14-16 MB, which is fine because I only have 8MB, and then...
>I'm having trouble mapping it into the user (X server) address
>space.  mmap(/dev/mem) doesn't work.  
>
>Is there any way I can do this from user mode?  Or do I have to
>write a device driver?

You don't mention what kernel you are using, but it should work fine in
newer kernels with a mmap(/dev/mem).  Indeed, I know it works, because
some of the accelerated XFree86 servers currently under development
actually use this feature.  I'd suggest using 0.99.12 with the one-line
patch I sent out, or simply getting the latest ALPHA-pl13 from
nic.funet.fi which has that patch and some others. 

                        Linus

------------------------------

From: kankkune@klaava.Helsinki.FI (Risto Kankkunen)
Subject: Re: Let's have a prog to restore screen state!
Date: 18 Sep 1993 00:41:46 +0300

>>I think every program should absolutely switch through kernel, even if
>>via a really low-level ioctl that takes an array of port/value pairs or
>>something general enough like that. This would make it possible for the
>
>And you would have even the X server do this?  I surely wouldn't.

I'd at least want to try that out. If the performance is unacceptable,
maybe one has then come up with some kludges to fix that up. I wouldn't
like linux to become another DOS where every program bypasses the OS and
then you get all those coordination problems of sharing devices between
multiple programs. The OS is there just to prevent this.

>Remember that bank switching is something that would affect screen
>"normality," yet I wouldn't want the X server having to do a bunch
>of ioctl()s every time my mouse crossed a bank boundary.

There aren't so many banks on a screen, and it would probably be one
ioctl with an array. It might not be too bad, I don't know (and it can
heavily depend on the screen mode).

But one of those speed hacks might be that programs handling VC switches
on their own might have the responsibility to save their screen state
before switching out and restore that when they get the control again.
While they have the screen, they can access it directly. If the program
dies, the kernel could reprogram the screen to the state it was before
this program started.

>>kernel to maintain the current state of the card, allow programs to
>>query some write-only registers from the kernel's (or driver's) copy of
>
>VGA shouldn't have any write-only registers.  EGA/CGA/MDA do, of course,

This is what I recollected, and was refering to EGA/... One of the
driver's functions would be abstracting all those cards enough that
kernel proper or user programs wouldn't normally need to know too many
details about the installed hardware. Thing like blanking a positive
screen etc. belong to the driver.

>I think it's just too costly to go with this scheme.  On my localbus
>ET4000 (on a 486/33), X is tolerably fast.  I wouldn't want it any
>slower.  I can run Castle Wolfenstein 3-D under dosemu at a very 
>comfortable speed; with the overhead of trapping all port accesses 
>and translating them into ioctl()s and context switching, etc., you 
>could count the pixels as they changed.

Do you have any numbers? It would sure be interesting to see some
best/worst case figures (some modes are really pain in the ass in regard
of access), but I'm too lazy to calculate them myself.

>  3) If a console switch away from a console in GRAPHICS mode occurs,
>     the kernel driver restores the screen state to the default text
>     mode.

That would mean the driver had to know the adapter pretty intimately for
it to know when the screen is in graphics mode. This wouldn't, however,
help you much if you switch to a non-default text mode.

Wouldn't my scheme work better? To repeat, let's say that normally the
screen is handled through ioctl's. A program can issue a KD_EXCLUSIVE
ioctl to get direct access to the screen. This would add the registers
the card has to the process's iobitmap. When a switch occurs, the kernel
can set the state of the screen from the saved copy of that process.
Before switching the KD_EXCLUSIVE process is notified, so it can save
its state. When you switch back to the process with KD_EXCLUSIVE would
get a signal or something to let it restore the screen to its liking
before continuing.

A minimal driver to implement just KD_EXCLUSIVE for a wide variety of
cards would only need a list of port values each card uses and the
simple ioctl. Are the ports usually documented at all for noname svga
cards? If not, it shouldn't be impossible to track the ports the cards
BIOS uses. If it is, you could guess a bit liberally the range of ports
used. Or guess conservetively and keep increasing until you get no more
port access violations.

>Performance should *not* suffer.

Compared to what? Drop the OS and you get more performance. Many people
still like the notion of a proper OS that gives them some protection and
otherwise increases usability, even if it means paying a small
performace hit. I think the issue here is to balance the performace loss
with the added robustness.

> Also, sometimes having it done at all is more important that doing it
> right (see *BSD and shared libraries).

Ah, this is the new Linux motto! Drawing a parallel from the shared
libray case, we should be implementing the drivers already, not debating
what works, what not, and what might be the optimal solution. But I
don't like analogies too much, you can usually get any conclusions you
want from a reasonable-sounding analogy.
-- 
                                         It's that time of the year again

------------------------------

Crossposted-To: comp.os.linux.misc
From: mark@macs.ee.mcgill.ca (Mark Kassab)
Subject: Is anyone writing PPP for linux?
Reply-To: mark@macs.ee.mcgill.ca
Date: Fri, 17 Sep 1993 22:50:02 GMT


Hi,

I've seen this question asked a lot, but haven't seen any answers.  Is anyone
doing anything to write/port PPP?

Thanks,
Mark

------------------------------

From: tinsel@uiuc.edu (Thomas Aaron Insel)
Subject: Re: What do people think about /config?
Date: 17 Sep 1993 22:51:07 GMT
Reply-To: tinsel@uiuc.edu

Jyri Virkki <jv24+@andrew.cmu.edu> writes:

> It seems to me that since a script has to be written anyway to
> translate from the /config entry into the actual file in /etc or
> wherever, that it would be much cleaner to have this script read and
> write the actual file directly, and do away with the file in /config
> which is just redundant anyway. This would also eliminate the issue of
> loosing changes done directly to the config file if the entry in
> /config is later changed and the script run. Something like SMIT in
> AIX, I think, although I haven't used AIX enough to be sure if this is
> what it does.

Sounds nifty.  Personally, I like the idea of one master script or
executable which handled the user interface and such, with plug-in
modules for new file formats.
-- 
Thomas Insel (tinsel@uiuc.edu)
  "Sometimes one pays most for the things one gets for nothing." -- A. Einstein

------------------------------

From: falcon@hotblack.sh.sub.org (Andreas Mengel)
Subject: Strange 'ping' behaviour
Date: Fri, 17 Sep 1993 11:55:43 GMT

Hi there!

I just found that ping behaves very strange. I just ping'ed myself and after
reporting 32 (icmp_seq=0..31) successful pings it just stops !
It seems to send out the packet with icmp_seq=32, but does not receive any
response on that. It doesn't send out further packets either (if I hit ^C after
some time it reports:
  64 bytes from 127.0.0.1: icmp_seq=31 ttl=119 time=0 ms

  --- localhost ping statistics ---
  33 packets transmitted, 32 packets received, 3% packet loss
  round-trip min/avg/max = 0/0/1 ms

'ps al' says it hanging on interrupt (WCHAN=interrupt).

This is linux-0.99.ALPHA-13 with networking stuff from SLS1.02

Any ideas ???
-- 
Bye,
        Falcon
+-----------------------------------------------------------------------------+
|                          Real Name: Andreas Mengel                          |
|          Internet: Andreas.Mengel@arbi.Informatik.Uni-Oldenburg.DE          |
|          Home: falcon@hotblack.sh.sub.org | Bitnet: 169371@DOLUNI1          |
+-------------+-------------------------------------------------+-------------+
              |Some say I'm lazy, but others say that's just me.|
              |Some say I'm crazy, I guess I'll always be! (GnR)|
              +-------------------------------------------------+

------------------------------

From: bsa@kf8nh.wariat.org (Brandon S. Allbery)
Subject: Re: Please no /config. (Rebuttal)
Date: Fri, 17 Sep 1993 21:50:58 GMT

In article <CDI88I.2L2@daedalus.cs.unm.edu> mcdermot@daedalus.cs.unm.edu (John McDermott) writes:
>In article <27b6dn$l99@galaxy.ucr.edu> grif@ucrengr.ucr.edu (Michael Griffith) writes:
>Is there such at thing?  The SVR4 version is SOOO different from other
>systems.  Each "version" has its own layout.  [Do we NEED sbin?]

You'd be surprised how many *modern* systems have picked up SVR4's layout.

>text, it is not THE answer.  And, BTW, SYSV admin is much harder than
>BSD (IMHO).

My co-workers, struggling with a Sun IPX (SunOS 4.1.3) after years of SVR3
administration, would laugh in your face at that comment...

What's easier is what you're used to.  What others are used to is easier to
*them*.  To me so far, *neither* looks "easier" than the other from a purely
objective standpoint, and both are harder than they should be for new
administrators unused to *ix.

++Brandon
-- 
Brandon S. Allbery         kf8nh@kf8nh.ampr.org          bsa@kf8nh.wariat.org
"MSDOS didn't get as bad as it is overnight -- it took over ten years
of careful development."  ---dmeggins@aix1.uottawa.ca

------------------------------

From: jhenders@jonh.wimsey.bc.ca (John Henders)
Subject: Re: What do people think about /config?
Date: Fri, 17 Sep 1993 21:22:39 GMT

bsa@kf8nh.wariat.org (Brandon S. Allbery) writes:

>Anyway, the biggest problem is that it doesn't handle configuration files
>which are scripts.  I sent Russell my startup.nos from JNOS/Linux as a case in
>point :-) but it applies even more so to shell scripts....

    It seems to me that while this idea has some merit, it would be more
useful to have curses based full screen programs to modify standard
system file. As in Russ's proposal, each config file would need a
seperate program written to copy the new info file in sonfig to the
standard system file, the programming effort to do a nice full screen
based editor to work on them directly would seem like a better bet to
me. 
    Is there any packages out there to facilitate writing full screen
cusres based front ends in sh using curses?
    Also, outside of selection, has anyone thought of a way to allow
hooking into the mouse in an easy, integrated into linux way? What do
people thing about some mouse hook routines as part of the linux api? 


-- 
John Henders       GO/MU/E d* -p+ c+++ l++ t- m--- s/++ g+ w+++ -x+
                      Segments are for Worms

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Development-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.development) via:

    Internet: Linux-Development@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Development Digest
******************************
