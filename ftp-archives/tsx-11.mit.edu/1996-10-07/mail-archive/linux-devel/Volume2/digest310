From:     Digestifier <Linux-Development-Request@senator-bedfellow.mit.edu>
To:       Linux-Development@senator-bedfellow.mit.edu
Reply-To: Linux-Development@senator-bedfellow.mit.edu
Date:     Sat, 15 Oct 94 03:13:10 EDT
Subject:  Linux-Development Digest #310

Linux-Development Digest #310, Volume #2         Sat, 15 Oct 94 03:13:10 EDT

Contents:
  Re: 3Com 509 Driver Problems - Any fixes - Help (Chris Stoffel)
  insmod drv_hello.o gives "___moddi3 undefined" (Erik E. Rantapaa)
  Re: Extreme delays telnetting into linux box (Mark Lord)
  NFS mounts from linux ? (David Martin)
  Re: Linux NOT logging people out on hangup (Piet W. Plomp)
  Re: Just a quick question... (Jeff Kesselman)
  Re: A badly missed feature in gcc (Bruce Thompson)
  Re: 1.1.52 bug? (Bruce Thompson)
  Re: patch in the kernel (Mark Lord)
  Re: ext2fs vs. Berkeley FFS (Erik Corry)
  Re: Telnet & ftp freeze! - AND UNFREEZE KLUDGE (Steve Davies)
  Motif+Linux... broken! (Douglas Frank)
  ext2, UFS, Linux, and Mach (travis jensen)
  Cmix,RT -> Linux,DOS (David J Topper)
  Re: Shared Libs: working toward a permanent solution? (Brandon S. Allbery)
  Re: We a FAQ: Linux vs. *BSD!!! (Andreas Helke)
  Re: [fdformat] kernel 1.1.52 (and .53) patch comment (Brent R. Earl)

----------------------------------------------------------------------------

From: cstoffel@memhpc13.sc.ti.com (Chris Stoffel)
Crossposted-To: comp.os.linux.help
Subject: Re: 3Com 509 Driver Problems - Any fixes - Help
Date: 14 Oct 1994 14:30:33 GMT

   I just read in comp.os.linux.announce that the latest kernel patch
has some 3c509 fixes. Maybe it's time for an overhaul.

Chris Stoffel                   e-mail: cstoffel@lobby.ti.com

Brian Kramer (bjkramer@pluto.njcc.com) wrote:
: I get the following error which pretty much disables my system.  Is there
: a fix?  Or can someone recommend a ethernet card that works flawlessly
: with linux?

: Sep 27 20:11:56 pluto kernel: eth0: Missed interrupt, status then 2011 now 2000  Tx 00 Rx 8000.
: Sep 27 21:56:01 pluto kernel: eth0: Transmitter access conflict.
: Sep 27 22:07:24 pluto kernel: eth0: transmit timed out, tx_status 00 status 2000.
: Sep 27 22:07:25 pluto kernel: eth0: transmit timed out, tx_status 00 status 2000.
: Sep 27 22:33:54 pluto kernel: eth0: Missed interrupt, status then 2011 now 2000  Tx 00 Rx 8000.
: Sep 28 01:10:52 pluto kernel: eth0: Missed interrupt, status then 2011 now 2000  Tx 00 Rx 8000.
: Sep 28 12:32:12 pluto kernel: eth0: Missed interrupt, status then 2011 now 2000  Tx 00 Rx 8000.
: Sep 28 15:39:43 pluto kernel: eth0: Missed interrupt, status then 2011 now 2000  Tx 00 Rx 8000.
: -- 
: Brian Kramer - Owner/Systems Administrator - bjkramer@pluto.njcc.com
: New Jersey Computer Connection - Public Access Unix Site - pluto.njcc.com
: Voice: 609-896-2799 - Fax: 609-896-2994 - Dialups: 609-896-3191
: Dialup or Telnet to pluto.njcc.com and log in as guest for more information.

------------------------------

From: rantapaa@s6.math.umn.edu (Erik E. Rantapaa)
Subject: insmod drv_hello.o gives "___moddi3 undefined"
Date: Thu, 13 Oct 1994 01:19:36 GMT

I am trying to use the module utilities with the following set up:

  kernel version: 1.1.51
      cc version: 2.5.8
  modules.tar.gz: dated June 27, 1994

When attempting to load the sample module dvr_hello.o, however,
I get the following error:

___moddi3 undefined

Is there something special I need to do when compiling module
object files?

Here is a list of the symbols in drv_hello.o:

zorro /nfs/zorro/x4/build/modules-new: nm drv_hello.o
00000000 t ___gnu_compiled_c
         U ___moddi3
00000220 T _cleanup_module
000000e0 t _hw_close
00000294 d _hw_fops
00000060 t _hw_lseek
000000d0 t _hw_open
00000000 t _hw_read
00000287 d _hw_reply
00000150 T _init_module
00000280 d _kernel_version
         U _mod_use_count_
         U _printk
         U _register_chrdev
         U _unregister_chrdev
00000000 t gcc2_compiled.

------------------------------

From: mlord@bnr.ca (Mark Lord)
Crossposted-To: comp.os.linux.admin
Subject: Re: Extreme delays telnetting into linux box
Date: 15 Oct 1994 01:09:36 GMT

In article <bart.158.000B60CD@dunedin.es.co.nz> bart@dunedin.es.co.nz writes:
...
<>problems  may be related.  Running 1.1.49 on a Slackware setup.
<
<There is a serious problem with the TCP in the new kernels. I (and many 
<others) have been posting about it for months, but sofar I have never seen any 
<reply from a Kernel developer. Have a look at all postings about Telnet, Ftp 
<delays/hangups etc.

Mmmm.. no such problems noted here.

Have you upgraded your network utilities to go with the new kernel code, as required?
-- 
mlord@bnr.ca    Mark Lord       BNR Ottawa,Canada       613-763-7482

------------------------------

From: dmartin@lerc.nasa.gov (David Martin)
Subject: NFS mounts from linux ?
Date: 14 Oct 1994 16:38:39 -0400


I checked the NFS-FAQ, but I wanted to make sure.  Is there any way to
mount a linux filesystem from another computer?  i.e. 

mount linuxbox:/home /mnt

If not, are there any plans to develop this?
-- 



# David Martin   System Administrator   NASA Lewis Research Center
# dmartin@lerc.nasa.gov   (216) 977-7014   Cleveland, Ohio

------------------------------

From: piet@icce.rug.nl (Piet W. Plomp)
Subject: Re: Linux NOT logging people out on hangup
Date: Thu, 13 Oct 1994 11:07:01 GMT

> I had a run-in with the comp.os.linux.development people over this
> several months ago.
> 
> The general consensus is:

>   Linux strives for POSIX compliance.
>   POSIX states that the kernel sends HUP signals only to session leaders.
>   POSIX states that session leaders should relay SIGHUP to children.
>   Many session leaders (shells, usually) don't follow the POSIX spec.
>   Lots of processes wind up chewing up CPU time.
> 
> So lots of multi-user admins wind up working around this POSIX "feature"
> by writing daemons to kill the processes that Linux doesn't.
> 
> If it's any consolation, I've seen a large-scale commercial provider
> running AIX grind to a halt because the OS is POSIX compliant and the
> shells or applications [kermit, ytalk, and lynx were the major problems]
> aren't.  They've got a daemon to work around POSIX now, too.

Ok., I got myself a brandnew tcsh 6.0.5. (from sunsite:system/Shells).
The docs that come with it don't mention this POSIX compliance problem.
The (beautiful) man page says that TERM signals are caught.

Well, they are ignored. Both for login tcsh's as for non-login tcsh's
kill -15's don't have any effect.
For hangup signals (kill -1) the situation is different: they are ignored for
login tcsh's, but effectively kill the tcsh on non-login tcsh's.

The only way to kill a login tcsh is through SIGKILL (-9). This is true for
both the old tcsh (6.0.4) as the new one.

Questions:
    - should the tcsh be considered process group leader?
    - should it ignore SIGTERM and SIGHUP signals as described above
    - is there a way to recompile the tcsh, so that it complies
      with posix and linux signal handling?

Btw, kernel 1.0.9, libs 4.5.26.

Thanks,

piet
-- 
Piet W. Plomp, ICCE, Groningen University, The Netherlands; piet@icce.rug.nl
Visit The LINUX SYMPOSIUM: 8th/9th of december 1994 in Amsterdam, Netherlands.
SUBSCRIBE NOW: ftp (anonymous) to ftp.icce.rug.nl:pub/symposium/how.to.register

------------------------------

From: jeffpk@netcom.com (Jeff Kesselman)
Subject: Re: Just a quick question...
Date: Tue, 11 Oct 1994 04:10:25 GMT

In article <375afj$rap@acmez.gatech.edu>,
Matthew Richard Scopp <gt4374c@prism.gatech.edu> wrote:
>       Hello.  I have a quick question.  I'll apologize in advance if this
>is a question that is constantly being asked, but I have just joined this
>group this very minute, and it takes far too long to wade through over 1500
>articles looking for what I need.  :)  I was just wondering what the status
>of Linux development is for the PowerPC chip.  Specifically, if I go out and
>buy myself a PowerMac, will I be able to run Linux on it any time soon, or
>will I grow a big grey beard first?  I'm just curious as to what kind of
>support for PowerMac Linux there is.  I don't think I would be able to run
>XFree86 :) so I'd have to look elsewhere.  They're supposed to be porting AIX
>to PowerPC, but AIX is a joke that's not worth laughing at.  PowerPCs seem
>like good chips to run Linux on, so I'm hopeful about possible support.  Thanks
>for your time.  My e-mail address is gt4374c@prism.gatech.edu.
>

The buzz I've heard is that Linux for any Mac is a long way off due to 
the propiatary nature of info on the Mac's hardware (thats just my 
impression from group reading.  (If I am wrong, please correct me, but 
don't flame, ok?)

I have a stoopid question for YOU.  WHY buy Mac hardware if you intend to 
run Linux???  Pound for pound (and $ for $) your price/performance is 
going to be MUCH better with an intel-type platform.  I can understadn 
buyign a Mac if you want the Mac environment, but if you're just going to 
install Linux over it, it hardly seems worth it.

Myself, I'm waiting for the IBM PPCs, which shoudl be alot cheaper then 
Power Macs....

JK


------------------------------

From: bruce@mdavcr.mda.ca (Bruce Thompson)
Subject: Re: A badly missed feature in gcc
Date: 10 Oct 94 07:20:38 GMT

Jeff Kesselman (jeffpk@netcom.com) wrote:
: In article <373vcn$1da@nz12.rz.uni-karlsruhe.de>,
: And this is the cannonical case of why c++ is NOT a true super-set of 
: ANSI c.  (Thanks, I'm going to save the exampel for the next time I have 
: THAT argument.)

: Question, though, if gcc is fed a c++ file, will it accept that (a .C 
: extension, or one of the other  gcc/g++ blessed c++ extensions)?

: Seems to me it should.  The answer to the poster woudl then be 'Youa re 
: trying to write c++ code.  Stop telling the compiler its C code, and all 
: will be fine...'

: Jeff Kesselman

APPLAUSE! It's about time someone said something like this. Please
don't take this the wrong way folks, but if you want to write _C_
code, write _C_ (as defined by the ANSI standard). If, on the other
hand you want to write _C++_ code, write C++ code (as defined by the
ARM) but _PLEASE_ don't complain that C isn't C++!

The // comment syntax is not defined to be part of C, therefore gcc
should _never_ accept it as a comment. When invoked as g++ though,
it's compiling C++ and therefore // is valid syntax for a comment.

The fact that gcc is the compiler for C, C++ and even Objective-C (and
now Ada too!) is more convenience than anything else. C and C++ and
still _distinct_ languages. They have a common history, and C++ is
mostly a super-set of C, but that's where the line is drawn.

As far as I know, gcc _will_ compile a file called foo.C or foo.cc or
foo.cxx etc. as a C++ file. However, if you are linking C++ code you
_must_ invoke g++ to do the linking, otherwise the static constructor
and destructor lists won't get setup correctly.

        Cheers,
        Bruce.

-- 
Bruce Thompson, B.Sc.           | "A great many people think they are
Software Engineer               |  thinking when they are merely
MacDonald Dettwiler,            |  rearranging their prejudices."
13800 Commerce Parkway,         |       -- William James
Richmond, BC                    |
(604) 278-3411                  | Usual disclaimers apply
NAPRA #473                      |

------------------------------

From: bruce@mdavcr.mda.ca (Bruce Thompson)
Subject: Re: 1.1.52 bug?
Date: 10 Oct 94 07:24:45 GMT

Riku Saikkonen (riku.saikkonen@compart.fi) wrote:
: Hmm... Linux crashes on me, seemingly randomly. Nothing works
: after the crash, not virtual console switching, not Ctrl-Alt-Del.
: 'Unable to handle kernel paging request' and the normal register dump
: appears in the log, for two or three processes. The EIP is in a totally
: different location each time...

: So, it seems that it's the 1.1.52 kernel which is having some problems.
: I noticed some modification of memory.c in the .52 patch; perhaps that's
: the culprit?

:       [...]

I haven't had a chance to investigate further, but the bug seems to be
present in 1.1.51 too. I'm compiling 1.1.52 as we speak :-) and I've
noticed similar behavior to that mentioned above. I can't pinpoint
anything that could be causing the problem. It has happened with 'rm',
'atrun' and once with 'inetd'. If I can nail down any additional
information I'll post it.

        Cheers,
        Bruce.
-- 
Bruce Thompson, B.Sc.           | "A great many people think they are
Software Engineer               |  thinking when they are merely
MacDonald Dettwiler,            |  rearranging their prejudices."
13800 Commerce Parkway,         |       -- William James
Richmond, BC                    |
(604) 278-3411                  | Usual disclaimers apply
NAPRA #473                      |

------------------------------

From: mlord@bnr.ca (Mark Lord)
Subject: Re: patch in the kernel
Date: 15 Oct 1994 01:11:02 GMT

In article <CxoJLM.2IA@cbfsb.cb.att.com> ncherry@cbnewsg.cb.att.com writes:
<Simple question: what command line do you use to patch the kernel?

        less /usr/src/linux/README
-- 
mlord@bnr.ca    Mark Lord       BNR Ottawa,Canada       613-763-7482

------------------------------

From: erik@kroete2.freinet.de (Erik Corry)
Subject: Re: ext2fs vs. Berkeley FFS
Date: Fri, 14 Oct 1994 03:33:34 GMT

David Jeske (jeske@ux4.cso.uiuc.edu) wrote:

: For example..(not a NeXT example, but rather a UNIXish example)

: Backgammon.app     <directory>
: Backgammon.app/Backgammon          <file of same name is the program executable>
: Backgammon.app/whiteCircle.tiff    <tiff image of the white playing piece>
: Backgammon.app/blackCircle.tiff    <tiff image of the black playing piece>
: Backgammon.app/local-config        <some machine configuration>

What nobody has commented on, is that this example shows things being
put together that probably shouldn't be together anyway. The TIFFs are
architecture independent, the executable is architecture dependent,
and the configuration file is probably machine dependent. Given this
they shouldn't even be on the same filesystem, never mind packed
in the same file/dir.

Having got extremely frustrated about VMS's filesystem, where the RMS
Record Manangement System stores various meta-information about a file
which almost invariably gets left behind when copying between
architectures or is set to the wrong thing, and very difficult to alter,
it really seems to me that 'a file is an ordered collection of bytes'
avoids a lot of trouble. The exception, of course is security-relevant
material, which causes lots of trouble, but must be specially handled
by the OS. When ext2fs gets Access Control Lists there will probably
be a lot of frustration about tar, cp, gzip etc not doing The Right
Thing with them. If we introduce resource forks, the problem is only
made worse.

--
-- 
Erik Corry, Skagerrakstr. 2, 79100 Freiburg, Germany, +49 761 406637
erik@kroete2.freinet.de

------------------------------

From: steve@iaccess.za (Steve Davies)
Crossposted-To: comp.os.linux.help,comp.os.linux.misc
Subject: Re: Telnet & ftp freeze! - AND UNFREEZE KLUDGE
Date: 14 Oct 1994 23:52:03 +0200

We experience a problem on out Linux 1.1.19 systems where
the inetd goes deaf and won't handle any more incoming connections.

If you run inetd in debugging mode then as I recall you see that
select() starts to return -1 [Dimly remembered]

The fix is to kill inetd and start a new one.

The cause?  I have found that the problem is caused by people connecting
with SLIP and using the *wrong IP address* on their end.  In other words
they have configured their IP stack with an address different from that
in the diphosts file.

Perhaps that will help someone,
Steve


------------------------------

Crossposted-To: alt.uu.comp.os.linux.questions,comp.windows.x.motif
From: frankdn@mv.mv.com (Douglas Frank)
Subject: Motif+Linux... broken!
Date: Thu, 13 Oct 1994 00:33:24 GMT


Has anyone successfully installed "Swim," (Motif 1.2.4) on Linux?

I have the Slackware 2.0 distribution of Linux, and by golly she
don't work too good.

Motif apps run fine, but I can't compile a thing using make or imake.
The most common failure is 'can't find <Xm/Xm.h>' -- make should
be compiling with -I/usr/X386/include, but doesn't.

Another problem- when I compile manually, the call to XtSetLanguageProc
always generates a runtime error message, "Locale not supported by C
library."  This is a call to an Xt-, not an Xm- function, which leads me
to suspect it's Slackware that's broken, not Swim-Motif.

Any advice will be welcome (IF it's free :-)

--Doug


------------------------------

From: jensen@peruvian.cs.utah.edu (travis jensen)
Subject: ext2, UFS, Linux, and Mach
Date: 14 Oct 1994 22:04:57 GMT
Reply-To: jensen@peruvian.cs.utah.edu

I am considering a project to take the ext2fs and put a layer
of vaneer over it so it could be mounted as a UFS file system.
This would allow Mach to be able to share Linux partitions (and
vice-versa).

A couple of questions:

Is this even possible?  I figure anything is possible, but is
this a project of weeks, months, years, or millenia?

Where can I find documentation on the ext2fs?  I would like
something a little better than source. :)

Is this being done already?  If so, who is doing it?

Thanks.

Travis

--
Travis A. Jensen            | USER, n.:
jensen@peruvian.cs.utah.edu |  "The word computer professionals
Linux contractor for hire   |   use when they mean 'idiot'."
"Am I really graduating     |      --Dave Barry
 next summer??"             |        "Claw Your Way to the Top"

------------------------------

From: djt1@konichiwa.cc.columbia.edu (David J Topper)
Crossposted-To: comp.os.linux.help,comp.os.linux.misc,comp.music
Subject: Cmix,RT -> Linux,DOS
Date: 14 Oct 1994 21:16:35 GMT

Does anyone know any one or more of the following:

     - cmix for DOS?
          - where might I find it, I've only seen for Linux.

     - Linux / Xfree86 based graphical sound editor to view sound files, etc...

     - Linux / Xfree86 based sound file converter
          - .snd files to .au (whatever format Linux uses) files?

     - RT for DOS/Windows or Linux/Xfree86?

Thanks,


------------------------------

From: bsa@kf8nh.wariat.org (Brandon S. Allbery)
Subject: Re: Shared Libs: working toward a permanent solution?
Date: Fri, 14 Oct 1994 21:51:38 GMT

In article <37mepf$mei@senator-bedfellow.mit.edu>, tytso@MIT.EDU says:
+---------------
|    of accessing or taking the address of a static variable.  To take the
|    address of a static variable, just convert the segment-register-relative
|    offset to a global, absolute offset by adding the base address of the
|    library, and use the resulting absolute pointer thereafter.  This will
| 
| Unfortuantely, life's not that simple.  What if you take the address of
| a static variable, and store it into a structure?  That structure member
| might contain a pointer to a static variable local to the shared
| library, or it might contain a pointer to memory in the main program's
| data segment.
+------------->8

I think you misunderstand his intent:  he's talking about using a segment
register as if it were a general register containing an address.  Basically,
using e.g. %gs as one would normally use %bp.  Segment overrides would not be
used in this scheme; instead, the address would be calculated when needed by
adding %gs to the library-base-relative address.

That said (and I address this to the group, not to you, Ted; I suspect you
know more about this than I do :-) I don't think you can get away with using a
segment register as a general "address" register, because in 386 mode a
segment register points to a segment descriptor, not to the base address of a
segment.  Moreover, retrieving and setting the value of the register as if it
were a general register is impossible because its value gets validated by the
hardware as a segment descriptor pointer.  System calls would probably have to
be used to manipulate the value, which will probably slow things down just as
much as if we did it the normal way.  Perhaps more so --- the overhead of a
system call is likely to be greater than the overhead of pushing and popping
registers because there aren't enough to go around with one allocated as a
base pointer.

++Brandon
-- 
Brandon S. Allbery KF8NH         [44.70.4.88]           bsa@kf8nh.wariat.org
Linux development:  iBCS2, JNOS, MH                                      ~\U
Waiting For Godot^H^H^H^H^HRothenberg

------------------------------

From: andreas@orion.mgen.uni-heidelberg.de (Andreas Helke)
Crossposted-To: comp.os.386bsd.development
Subject: Re: We a FAQ: Linux vs. *BSD!!!
Date: 14 Oct 1994 20:55:18 GMT

Ken Hughes (hughes@napa.eng.uop.edu) wrote:
: I wonder how the Windows-DOS-OS/2 people react to these questions?  Does
: anyone ever ask over in those groups?  Or is everyone there resigned to the 
: fact that OS/2 is best or Windows is best or Chicago/Windows 95 will be best
: or that they're all SOL?  :-)

You only have to look at the multiple 100 post flamewars that regulary come
up in comp.os.ms-windows.advocacy. The Windows solution is simply to assign
a special newsgroup for this discussion.

Andreas
--
* Andreas Helke, Institut fuer molekulare Genetik, Universitaet Heidelberg
**                      Im Neuenheimer Feld 230, 69122 Heidelberg, Germany
***  orion.mgen.uni-heidelberg.de has a ftp server with Unix tools for DOS
****   and with the HFM V. 4.02 DOS file manager and archive program shell

------------------------------

From: earl@tenrec.cig.mot.com (Brent R. Earl)
Subject: Re: [fdformat] kernel 1.1.52 (and .53) patch comment
Date: 14 Oct 1994 15:51:54 GMT

>: I justed installed the kernel patch 1.1.52, and now I have problem using
>: fdformat. I abort with an IOCTRL error.
>[...]
> [oops, yet another floppy bug]
>
> It can be fixed by applying the following small patch:
>--- linux-1.1.52/drivers/block/floppy.c Thu Oct  6 20:56:59 1994
>+++ linux/drivers/block/floppy.c        Sat Oct  8 13:50:38 1994
>@@ -1745,6 +1745,7 @@
>        raw_cmd.track = format_req.track << floppy->stretch;
>        buffer_track = -1;
>        setup_format_params();
>+       clear_bit(current_drive, &changed_floppies);
>        floppy_start();
> #ifdef DEBUGT
>        debugt("queue format request");

Applied this patch, and it worked for a bit, until I 'rdev'ed a
new boot floppy.  This locked the drive for fdformat again, until
I did a 'mount /dev/fd0 /dos' and got an a mount error, but the
drive was freed up again.

The setfdprm line didn't work for me.

- Brent -
earl@rtsg.mot.com (Brent Earl) Motorola CIG +1-708-632-5830
** Panic! Could not locate coffee - Operator halted **

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Development-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.development) via:

    Internet: Linux-Development@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Development Digest
******************************
