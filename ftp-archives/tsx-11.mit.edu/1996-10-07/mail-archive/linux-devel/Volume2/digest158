From:     Digestifier <Linux-Development-Request@senator-bedfellow.mit.edu>
To:       Linux-Development@senator-bedfellow.mit.edu
Reply-To: Linux-Development@senator-bedfellow.mit.edu
Date:     Sun, 11 Sep 94 21:13:08 EDT
Subject:  Linux-Development Digest #158

Linux-Development Digest #158, Volume #2         Sun, 11 Sep 94 21:13:08 EDT

Contents:
  Re: mprotect() support in Linux kernel? (Sven Goldt)
  Re: Linux for DEC Alpha platform? (Ralf Baechle)
  Re: Survey: who wants f77,cc,c++,hpf for linux? (Pyramids-R-Us)
  A crash and a little debugging on 1.1.x (BARTHOLDI Laurent)
  Re: Digi Intelligent Boards? (Henry Ware)
  Re: Don't use Linux?! (Stephen Harris)
  Re: News Spool File System - new filesystem type?? (Gert Doering)
  Re: 480x360 Res works for me. (Paradox)
  Kernel panic report (Riku Saikkonen)
  Re: Why I cannot mount a PhotoCD on Mitsumi ? (Eberhard Moenkeberg)
  Re: IDE Performance enhancement (Linus Torvalds)
  Re: Curses help (Zeyd M. Ben-Halim)
  Doom Music + PAS-16 (Christopher M. May)
  Re: Survey: who wants f77,cc,c++,hpf for linux? (Dan Pop)
  Re: 480x360 Res works for me. (Mihail S. Iotov)
  Re: IDE Hard Drives w/ over 1024 cylinders (John E. Gotts)
  Re: Alpha Linux (David Willmore)

----------------------------------------------------------------------------

From: goldt@math.tu-berlin.de (Sven Goldt)
Crossposted-To: comp.lang.modula3
Subject: Re: mprotect() support in Linux kernel?
Date: 10 Sep 1994 02:00:15 GMT

Dan Connolly (connolly@ulua.hal.com) wrote:

: I'm interested in enhancing the Linux port of Modula 3 to use
: incremental/generational garbage collection. This requires support for
: the mprotect() library routine, or its equivalent.

: However, it appears that mprotect() is not supported under Linux:

It is implemented in newer kernels. Look at the Linux Programmer's Guide.

--
*****************************************************************************
*    # THE MOST IMPORTANT FINANCIAL QUESTION IS:  Where is the money ? #    *
*****************************************************************************

------------------------------

From: ralf@informatik.uni-koblenz.de (Ralf Baechle)
Subject: Re: Linux for DEC Alpha platform?
Date: 11 Sep 1994 19:25:13 GMT

In article <33u1fh$9ej@bmerha64.bnr.ca>, Hamish.Macdonald@bnr.ca (Hamish Macdonald) writes:
|> >>>>> On 29 Aug 1994 08:14:02 EST,
|> >>>>> In message <33smuq$mkq@scotty.waldorf-gmbh.de>,
|> >>>>> ralf@resi.waldorf-gmbh.de (Ralf Baechle) wrote:
|> 
|> Ralf> Expect Linux to be available for all major CPU families in the
|> Ralf> near future.
|> 
|> Ralf, you and I both know that the big work in a Linux port is not so
|> much the CPU specific stuff, but the device drivers.
|> 
|> As such, only expect Linux to work on PC clones (powered by various
|> ALPHA, x86, MIPS chips) in the *near* future.

If you're talking about "real" computers, yes. For example the Deskstation Tyne board which is the first target for Linux/MIPS is one of these machines. However there are more applications for a UNIX clone than just in computers. As some people still may remember I sent a posting about two month ago to c.o.l.m asking people about their interest in a Linux port to MIPS. Three of the answer emails that I've received were requests of companies that are interested in using Linux for embedded systems. My time schedule made at least one of these companies move to NetBSD, but the other still show interest in Linux for their products.

Another company that develops products based on SPARC CPUs asked some technical questions about porting Linux to SPARCs. It seems to me that this company intends to use an free UNIX clone for an noncomputer product, too.

I admit that my posting which you have quoted above is a bit provocative. That was exactly I intended. I received lots of very interesting mail ranging from flames over to "how interesting" mails. Even other people suggested to use NetBSD or MACH instead.

  Ralf 

------------------------------

From: ges@earth.baylor.edu (Pyramids-R-Us)
Crossposted-To: comp.lang.fortran
Subject: Re: Survey: who wants f77,cc,c++,hpf for linux?
Date: 11 Sep 1994 14:18:35 -0500

In article <CvyynF.Lxp@news.cern.ch>, Dan Pop <danpop@cernapo.cern.ch> wrote:
>Could you post some examples where a commercial native compiler for x86
>produces _significantly_ faster codes than the free gcc?

Well I was messing around with a small program to test integer performance
and tested it on a linux system and on an AT&T SVR4 machine (also intel
based).  the svr4 machine came out about twice the speed I thought it would
so i copied the executable over to the linux machine and ran it there.  
the executable generated by the at&t compiler ran about twice as fast as
the one mace by gcc.  Both compilers were run with no options (other than
output).  After looking at the assembly generated by the compilers I discoverd
that the at&t compiler left values in registers while gcc moved the values
back to memory.  When I declared in the index variable I was using as register
the gcc version ran twice as fast and the at&t version stayed the same.  They
also ran at the same speed when I used the -O option.

I guess the moral of the story would be that if you are going to compare
the performace of code generated by different compilers compare
_optimized_ versions

Gene E. Scogin


------------------------------

From: lbartho@scsun.unige.ch (BARTHOLDI Laurent)
Subject: A crash and a little debugging on 1.1.x
Date: Sun, 11 Sep 1994 19:34:57 GMT

Hi folks,
I think I spotted a true problem with 1.1.50 (and maybe previous releases).
I get fairly often (that is, more than once) this message in
/var/adm/messages:
Sep 11 20:40:54 funnyfarm kernel: Oops: 0000
Sep 11 20:40:54 funnyfarm kernel: EIP:    0010:0010e5dc
Sep 11 20:40:54 funnyfarm kernel: EFLAGS: 00010202
Sep 11 20:40:54 funnyfarm kernel: eax: 00000002   ebx: 00000001   ecx: 00000000   edx: 008ebedc
Sep 11 20:40:54 funnyfarm kernel: esi: 008ebedc   edi: 00000001   ebp: 00257f94   esp: 00257f88
Sep 11 20:40:54 funnyfarm kernel: ds: 0018   es: 0018   fs: 002b   gs: 002b   ss: 0018
Sep 11 20:40:54 funnyfarm kernel: Process xeyes (pid: 1806, process nr: 28, stackpage=00257000)
Sep 11 20:40:54 funnyfarm kernel: Stack: 00000000 001a28fc 00000001 bffffac8 0016db1d 
Sep 11 20:40:54 funnyfarm kernel: Code: 8b 0b 85 c9 74 2f 8b 11 83 fa 02 74 07 8b 11 83 fa 01 75 21 
Sep 11 20:40:54 funnyfarm kernel: Aiee, killing interrupt handler

(as you noticed, during an X11 run)

as I compiled with debug information, I found out that the problem comes
from wake_up, in kernel/sched.c:277:
        if(!q || !(tmp = *q))
                return;
where the value of q is != 0x008ebedc (esi),
and that of tmp is 00000001 (ebx).
the kernel then proceeds on referencing address 00000001, causing the panic.
hope this helped someone,
        larry
--
==========
Larry `Hacker' Bartholdi, University of Geneva, Switzerland
E-Mail: lbartho@scsun.unige.ch or lbartho@cui.unige.ch
S-Mail: Larry Bartholdi / Barillette 11 / 1260 NYON / Switzerland

------------------------------

From: hware@bronze.coil.com (Henry Ware)
Subject: Re: Digi Intelligent Boards?
Date: 11 Sep 1994 15:55:54 -0400

>In article <Cvnn6J.33C@wimpol.demon.co.uk>,
>Simon Park <si@wimpol.demon.co.uk> wrote:
>>AFAIK there are no Linux drivers available for any of the
>>intelligent serial cards.

There is support for the Cyclades mutiport boards- these range from 8 to 
32 ports.  Try cyclades@netcom.com or your favorite Linux hardware vendor.

Cheers,
Henry

------------------------------

From: hsw1@papa.attmail.com (Stephen Harris)
Subject: Re: Don't use Linux?!
Date: Sun, 11 Sep 1994 18:43:15 GMT

Jeff Kesselman (jeffpk@netcom.com) wrote:

: 2) Getting commercial developers to develop for linux.
: Frankly, at the moment the BEST way to encourage this is to continue to 
: give Linux away.  Lets get real, for a minute.  it doesnt matter HOW nice 
: your OS is if you can't get a large number of installatiosn installed.  I 

And here's a new twist!  IBM are *giving away* OS/2 2.1 for Windows!
Honest!

In the UK, 'PC Magazine' comes with a cover CD with this program on it for
free!  You can register it with IBM on a freephone number.  What you don't
get are the rights to upgrades or manuals (but you can buy these extra).

So, if a big company like IBM is now giving away its OS to try and help
compete in the market place, arguments such as 'Linux is free so people won't
want to buy software for it' start to look pretty feeble :-)

Giving away the software is a great way to get a large installed userbase.
And that is what Linux has!  Looks like IBM have finally learnt something ;-)

Another good use for Linux is in the 'niche' market.  eg a company has written
an 'all-in-one' solution for a specific industry, and yet to sell the package
they often have to provide a system to run it on as well.  Imagine how much
cheaper a Linux system would be - it wouldn't save/cost the developer
anything, but would save the final enduser, thus making the overall package
that bit cheaper and more enticing.  (And I know a developer for ship
chartering who is seriously considering this for exactly this reason).

-- 

rgds
Stephen

------------------------------

Crossposted-To: news.software.b
From: gert@greenie.muc.de (Gert Doering)
Subject: Re: News Spool File System - new filesystem type??
Date: Sun, 11 Sep 1994 22:37:27 GMT

davidsen@elephant.dev.prodigy.com (Bill Davidsen) writes:

>I have thought of writing a complete news system using this method, which
>would restrict reading to NNTP, since the file structure would be all
>diferent. Not a loss, I think. I'm still looking for a fast algorithm to
>find N consecutive bits ON in a bitmap...

Take a look at the "gdevdfax.c" module of the ghostscript 2.6.1 (not 3.0!)
sources. It uses a very nice table lookup algorithm to find the length of
white/black runs in the image bitmap. About 3-6 times faster than counting
bits.

(I use a similar algorithm, with dynamically computed tables instead of
static ones, in mgetty+sendfax's pbmtog3 tool, but that one is -- IMHO
-- too ugly to find out how it works, but you could use that as reference
too)

gert
-- 
I've got a signature breakdown! Anybody got a spare one?

Gert Doering - Munich, Germany                             gert@greenie.muc.de
fax: +49-89-3243328                         gert.doering@physik.tu-muenchen.de

------------------------------

From: paradox@pcnet.com (Paradox)
Crossposted-To: comp.os.linux.misc
Subject: Re: 480x360 Res works for me.
Date: 11 Sep 1994 19:16:58 -0400

Steve VanDevender (stevev@efn.org) wrote:
: In article <34r3nd$ps1@vixen.cso.uiuc.edu> mooredan@uxa.cso.uiuc.edu (Daniel L Moore   ) writes:

:    DOOM runs fine, now to find solutions to the ctrl, alt - arrow keys
:    combinations, (my window manager takes over), and getting the sound
:    to work, probably need to upgrade my driver.

        Remember, Linux is a multi-user system, I found the easiest way
to get around this was to add a user in the database who's only purpose
in life was to boot X-Windows in a configuration to play doom ;)
        To get around the alt/ctrl problem, look through yer .fvwmrc
and take out all the definitions for those keys. Remember, the user is for
playing Doom and you don't need a full-fledged setup. I stripped it down
to almost nothing and get decent time on my 486/33 with 8 megs.
        -Paradox

        Ok, who wants to make a linux-based wad editor now? ;)


------------------------------

Subject: Kernel panic report
From: riku.saikkonen@compart.fi (Riku Saikkonen)
Date: Sat, 10 Sep 94 01:34:00 +0200

Kernel panic report coming up... Could some kind soul forward this to the
KERNEL mailing list?

Seven months of running Linux and only now comes my first kernel panic!

This seems to be repeatable, at least to some extent. It seems to be caused
by my old Hitachi CDR-1650S SCSI CD-ROM; sometimes when in heavy use, the
CD-ROM drive creates timeouts and seems to somehow reset itself (from the
noise, the drive seems to move the head from one end to the other a couple of
times).

I'm not sure if the drive works completely either; it sometimes causes Abort,
Retry, Fails even in DOS. But I still thought to report the kernel panic, since
it could come from something else...

I hadn't seen it until I upgraded to 1.1.49 (and now to 1.1.50). But I haven't
looked too much either...

Anyway, my setup:
* 486DX-50, 8 Mb memory, 2*420 Mb IDE HD (200 Mb Linux partition on
  /dev/hdb3)
* Future Domain TMC-885 SCSI controller (16-bit, works with the seagate.c
  driver, except that I had to set the IRQ to 10 from the kernel source
  (IRQ 10, CONTROLLER FD, OVERRIDE 0xCA000)
* the Hitachi CDR-1650S SCSI CD-ROM
* D-Link DE-100+ NE-1000-compatible Ethernet card (in a 2-computer
  network, with no activity at the time of the crash)
* and some miscellaneous stuff...

My Linux is from Slackware 2.0.0, with the kernel upgraded to 1.1.50 (bdflush
1.4, net-tools-1.1.38).

Here's the panic report:
***
Oops: 0000
EIP:    0010:0018f719
EFLAGS: 00010216
eax: 00000000   ebx: 00000002   ecx: 00000000   edx: 001e99d8
esi: 001e98f1   edi: 001e98d9   ebp: 28000000   esp: 001a722c
ds: 0018   es: 0018   fs: 002b   gs: 002b   ss: 0018
Process swapper (pid: 0, process nr: 0, stackpage=001a63ac)
Stack: 001e98f1 001e0002 00000000 00000000 001e98f1
Code: 80 48 22 08 8b 54 24 28 52 6a 00 8b 74 24 38 56 e8 ee f9 ff
Aiee, killing interrupt handler
kfree of non-kmalloced memory: 001a73a4, next= 00000000, order=0
task[0] (swapper) killed: unable to recover
Kernel panic: Trying to free up swapper memory space
In swapper task - not syncing
***

A clip from zSystem.map:
***
0018f11c t _end_scsi_request
0018f21c t _sr_release
0018f28c t _check_cdrom_media_change
0018f42c t _rw_intr                  [<--- so it's here, right?]
0018f8ac t _sr_open
0018f99c t _do_sr_request
***

And in the log:
***
Sep  9 17:33:26 anar kernel: scsi : aborting command due to timeout :
pid 54, scsi0, id 0, lun 0 Read (6) 00 52 24 0e 00
***

Hope someone can do something useful with this info... :) I don't know that
much about kernel programming, so I can't very well fix it myself. And I
don't consider it a very bad bug since it only seems to occur in the case
of a CD-ROM timeout - very rare for most people. Still, I wanted you to
know...

-=- Rjs -=- riku.saikkonen@compart.fi - IRC: Rjs
GCS/L/M/TW/S -d+>++ H(+) s:- !g !p?>1+ !au a17 w+ v+(---)*>+++ C++>$
UL++++(A)>$ P+ L++>+++ 3 E>++ N+++>++ K- W+(++) M- !V po Y+>++ t/Tolkien+++
!5 !j R>+ G' tv-() b++(+) D++ B? e>+++ u+++@ h--! f+ !r>++ n+ !y+(*)


------------------------------

Date: Sat, 10 Sep 1994 14:10:28 +0200
From: Eberhard_Moenkeberg@p27.rollo.central.de (Eberhard Moenkeberg)
Subject: Re: Why I cannot mount a PhotoCD on Mitsumi ?


Hello Erik Mouw and all others,

on 09.09.94 Erik Mouw wrote to All in USENET.COMP.OS.LINUX.DEVELOPMENT:

EM> I think the errormessage says enough: photo CD's don't have a
EM> ISO 9660 filesystem on it, otherwise Linux should have mounted it.

Wrong. PhotoCDs have an ISO9660 file system, and you can read them
under linux. But not every driver is supporting it.

EM> ISO 9660 filesystems is only for CD-ROM, another CD substandard.
EM> I don't know how to read from a photo CD under Linux, under MS-DOG with
EM> Windows you van use Corel Draw!...

Under linux, you can use Matsushita/Panasonic or Sony drives and
some SCSI drives.

Greetings ... Eberhard


------------------------------

From: torvalds@cc.Helsinki.FI (Linus Torvalds)
Subject: Re: IDE Performance enhancement
Date: 12 Sep 1994 02:41:49 +0300

In article <34uotc$ee3@wabbit.aladdin.co.uk>,
Chris Cain <chris@wabbit.aladdin.co.uk> wrote:
>
>There is a speedup in the code somewhere that isnt ide releated, 
>I just recently updated from 1.1.23 to 1.1.49 and the first thing I noticed
>was that the news expire that had been taking 7 or 8 hours now complets
>in about 4. This is on scsi drives using an adaptec host adapter.
>Dont know why its so much faster but I'm not complaining !.

Hmm.  This might actually be due to the name caching, I think, as the
SCSI code tweaks had been done by 1.1.23 already.  News servers was one
of the things I thought might win in a big way, but I had no numbers
from real life.  It would seem to work (although it might also possibly
be due to the minor SCSI changes that have happened since 1.1.23). 

                Linus

------------------------------

From: zmbenhal@netcom.com (Zeyd M. Ben-Halim)
Subject: Re: Curses help
Date: Sun, 11 Sep 1994 21:22:32 GMT

In article <34u0kt$i5h@u.cc.utah.edu>,
Benjamin B. Rickett <rickett@highway.alinc.com> wrote:
>I am modifying my curses programs to ahve color, but i'm not exactly sure 
>where to start.  Does any body have a simple example of how to use color 
>in curses?  If youu do please let me know.

curses can't do color, use ncurses instead.

Zeyd


-- 
---
Zeyd M. Ben-Halim       zmbenhal@netcom.com
NCURSES is available from ftp.netcom.com:pub/zmbenhal/ncurses
Current version is 1.8.5

------------------------------

From: cmay@titan.ucs.umass.edu (Christopher M. May)
Subject: Doom Music + PAS-16
Date: 11 Sep 1994 21:39:15 GMT

From nic.umass.edu!titan.ucs.umass.edu!cmay Sun Sep 11 17:37:38 1994
Path: nic.umass.edu!titan.ucs.umass.edu!cmay
From: cmay@titan.ucs.umass.edu (Christopher M. May)
Newsgroups: comp.os.linux.misc
Subject: Doom Music + PAS-16
Date: 11 Sep 1994 21:10:54 GMT
Organization: University of Massachusetts at Amherst
Lines: 31
Message-ID: <34vrou$bsa@nic.umass.edu>
NNTP-Posting-Host: titan.ucs.umass.edu
X-Newsreader: TIN [version 1.2 PL2]

Hi, Has anyone gotten the music to work in DOOM?

I've seen 1 person post with a SB16 who said it worked.

I thought doom was working perfectly, until I remembered there's
music too :)

My card passes the "fmtest" included in the sndkit.
(After I load the general midi patches... is this necessary?)


Also, do I have to compile in the MPU-401 support?

The PAS-16 emulates an MPU-401.

Is the DOOM code sensitive to Soundblaster IRQ?


Does the Music go out /dev/sequencer or /dev/midi, or /dev/dsp?

Finally, does anyone with a PAS-16 have music working?


THANKS DDT,  ID, and HANNU.  You're the greatest. Keep up the
great work.  I really appreciate the early release of Linuxxdoom.

--

-Chris May, Computer Science, University of MA, Amherst
-       Technical Assistant, P.C. Maintenance Lab




------------------------------

Crossposted-To: comp.lang.fortran
From: danpop@cernapo.cern.ch (Dan Pop)
Subject: Re: Survey: who wants f77,cc,c++,hpf for linux?
Date: Mon, 12 Sep 1994 00:26:40 GMT

In <MAINE.94Sep11161334@altair.dfrf.nasa.gov> maine@altair.dfrf.nasa.gov (Richard Maine) writes:

>Off the top of my head, the code that I recall giving f2c/gcc the most fits
>combined COMMON and EQUIVALENCE something like
>
>  common /com/ a,b,c
>  real x(3)
>  equivalence (x(1),a)
>
>The object here was to allow variables to be used by their individual
>names (the real case had more pertinent names that a,b,c) in one set
>of routines, while another set of routines operated only on the vector
>as a whole.  (I might not have recalled every detail correctly, but it
>was something close to this).
>
>One might question the style, but this is perfectly standard.  And at
>least the copy of f2c/gcc that I had barfed badly on this.  (Giving
>very confusing error messages out of the C compilation stage).  I never
>figured out how to send in bug reports, so I just dropped it.  But

ues4:~/tmp 10> cat test.f
        common /com/ a,b,c
        real x(3)
        equivalence (x(1),a)

        x(1) = 3.14
        print *, a
        end
ues4:~/tmp 11> f2c test.f
test.f:
   MAIN:
ues4:~/tmp 12> gcc test.c -lf2c -lm
ues4:~/tmp 13> ./a.out
  3.1400001

Dan
--
Dan Pop 
CERN, CN Division
Email: danpop@cernapo.cern.ch
Mail:  CERN - PPE, Bat. 31 R-004, CH-1211 Geneve 23, Switzerland

------------------------------

From: iotov@cco.caltech.edu (Mihail S. Iotov)
Crossposted-To: comp.os.linux.misc
Subject: Re: 480x360 Res works for me.
Date: 10 Sep 1994 03:39:18 GMT

mooredan@uxa.cso.uiuc.edu (Daniel L Moore   ) writes:

>Here's a Xconfig line that works for my CrystalScan 1572FS monitor.

>"480x360" 25  480 496 504 664  360 360 368 377

>It'll will probably work with other monitors that have the following
>specs: 

>   Horizontal Scan Freq: 30 - 64 kHz
>   Vertical Scan Freq: 50 - 100 Hz

 And make sure your monitor can do 100Hz. 

>   Bandwidth: 80 MHz

>Also note that the dot clock is 25MHz for your video card.

It looks like for 320x240, you'll need even lower dot clock, soif you can
program yours give it a try.

>DOOM runs fine, now to find solutions to the ctrl, alt - arrow keys
>combinations, (my window manager takes over), and getting the sound
>to work, probably need to upgrade my driver.

same here.

------------------------------

From: jgotts@myhost.subdomain.domain (John E. Gotts)
Subject: Re: IDE Hard Drives w/ over 1024 cylinders
Date: 11 Sep 1994 22:14:13 GMT

Matthew Moss (mmoss@panix.com) wrote:
: 3) A partition cannot cross over the 1024 cylinder mark. So I couldn't extend
:    the Swap partition over the boundary. If I wanted to grow it, it would
:    have to shrink some other partition in the first 1024, or move completely
:    into the second 1024 and shrink the /usr partition.

Not necessarily.  My swap partition extends across the boundary without any
ill effects.

------------------------------

From: willmore@iastate.edu (David Willmore)
Subject: Re: Alpha Linux
Date: 11 Sep 94 22:13:12 GMT

im14u2c@cegt201.bradley.edu (Joe Zbiciak) writes:
>jem@snakemail.hut.fi (Johan Myreen) writes:
>>What is the natural word size of the 68000?  Or the 8088?  Or a

>Even better:  The 68008...  8 bit data path, 16 bit registers, 32 bit ALU.
>By 32 bit ALU, I mean two registers would combine together and make a 32 bit 
>register for ADD & SUB and MUL & DIV (I think.) 

Nope, sorry.  The 68008 had an 8 bit data path, 32 bit registers, 32 bit
ALU.  The only funny thing about this chip was the small bus.

Cheers,
David
-- 
___________________________________________________________________________
willmore@iastate.edu | "Death before dishonor" | "Better dead than greek" | 
David Willmore  | "Ever noticed how much they look like orchids? Lovely!" | 
===========================================================================

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Development-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.development) via:

    Internet: Linux-Development@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Development Digest
******************************
